# NOTE: The `devDeps` and `peerDeps` catalogs in this file are
# generated from khan/frontend's pnpm-workspace.yaml. To update them, run:
#
#     utils/sync-dependencies.ts ../frontend/pnpm-workspace.yaml
#
# We have two separate catalogs for dev deps and peer deps to ensure
# that:
#
# - we know exactly which version of each package we're installing in
#   dev. That way, we can truthfully claim to support all versions
#   compatible with that one.
# - our peer dependencies can specify a range of versions. For peer
#   deps, want to accept any version compatible with the one we
#   installed in dev. For example, if we installed version 1.2.3 in
#   dev, then we want to accept ^1.2.3 (which means "any 1.x.x version
#   equal to or later than 1.2.3") as a peer dep. We want peer deps
#   to be specified as a range so clients don't get spurious warnings
#   if their dependency versions are slightly different than the ones
#   we use.
#
# The sync-dependencies.ts script ensures that peer deps are always
# specified as a range, and the dev deps are always pinned to the
# version at the bottom of that range.
#
# To add a new package:
# 1. Add the new package both in peerDeps and devDeps below.
# 2. Then it both in devDependencies and peerDependencies of the relevant package
#    example, in packages/perseus/package.json file:
#    devDependencies -> "@khanacademy/wonder-blocks-link": "catalog:devDeps",
#    peerDependencies -> "@khanacademy/wonder-blocks-link": "catalog:peerDeps",
# 3. Run pnpm install in root
#
# pnpm configuration:
# - minimumReleaseAge: We require a minimum release age of 3-days
#   (specified in minutes) before a package can be used in this project.
#   https://pnpm.io/settings#minimumreleaseage
# - minimumReleaseAgeExclude: We exclude our own packages from this minimum
#   release age so that we can upgrade to a new release immediately.
minimumReleaseAge: 4320
minimumReleaseAgeExclude:
    - "@khanacademy/*"
packages:
    - config/build
    - dev
    - packages/*
    - vendor/*
overrides:
    # Newer versions of jsdom break our tests. Examples of the problems:
    # - The `window` property of `window` is non-configurable, so we can't
    #   mock it. (21.0.0)
    # - window.getComputedStyle() returns bizarre results for background
    #   color, e.g. `rgb(255, 0, 0)` instead of `green`. (21.1.0)
    jest-environment-jsdom>jsdom: 20.0.3
catalogs:
    peerDeps:
        react: ^18.2.0
        react-dom: ^18.2.0
        aphrodite: ^1.2.5
        classnames: ^1.1.4
        jquery: ^2.1.1
        prop-types: ^15.8.1
        underscore: ^1.4.4
        "@phosphor-icons/core": ^2.0.2
        "@popperjs/core": ^2.10.2
        "@khanacademy/mathjax-renderer": ^3.0.0
        "@khanacademy/wonder-blocks-accordion": ^3.1.51
        "@khanacademy/wonder-blocks-announcer": ^1.0.6
        "@khanacademy/wonder-blocks-banner": ^5.0.15
        "@khanacademy/wonder-blocks-button": ^11.3.4
        "@khanacademy/wonder-blocks-clickable": ^8.1.3
        "@khanacademy/wonder-blocks-core": ^12.4.3
        "@khanacademy/wonder-blocks-data": ^15.0.1
        "@khanacademy/wonder-blocks-dropdown": ^10.8.0
        "@khanacademy/wonder-blocks-form": ^7.5.4
        "@khanacademy/wonder-blocks-icon-button": ^11.1.4
        "@khanacademy/wonder-blocks-icon": ^5.3.7
        "@khanacademy/wonder-blocks-labeled-field": ^4.0.14
        "@khanacademy/wonder-blocks-layout": ^3.1.44
        "@khanacademy/wonder-blocks-link": ^10.1.5
        "@khanacademy/wonder-blocks-modal": ^8.5.15
        "@khanacademy/wonder-blocks-pill": ^3.1.55
        "@khanacademy/wonder-blocks-popover": ^6.1.53
        "@khanacademy/wonder-blocks-progress-spinner": ^3.1.44
        "@khanacademy/wonder-blocks-search-field": ^5.1.61
        "@khanacademy/wonder-blocks-switch": ^3.3.28
        "@khanacademy/wonder-blocks-tabs": ^0.5.2
        "@khanacademy/wonder-blocks-theming": ^4.0.2
        "@khanacademy/wonder-blocks-timing": ^7.0.4
        "@khanacademy/wonder-blocks-tokens": ^15.0.0
        "@khanacademy/wonder-blocks-toolbar": ^5.1.46
        "@khanacademy/wonder-blocks-tooltip": ^4.1.66
        "@khanacademy/wonder-blocks-typography": ^4.2.29
        "@khanacademy/wonder-stuff-core": ^3.0.0
    devDeps:
        react: 18.2.0
        react-dom: 18.2.0
        aphrodite: 1.2.5
        classnames: 1.1.4
        jquery: 2.1.1
        prop-types: 15.8.1
        tiny-invariant: 1.3.1
        underscore: 1.4.4
        vite: 5.4.0
        "@phosphor-icons/core": 2.0.2
        "@popperjs/core": 2.10.2
        "@khanacademy/mathjax-renderer": 3.0.0
        "@khanacademy/wonder-blocks-accordion": 3.1.51
        "@khanacademy/wonder-blocks-announcer": 1.0.6
        "@khanacademy/wonder-blocks-banner": 5.0.15
        "@khanacademy/wonder-blocks-button": 11.3.4
        "@khanacademy/wonder-blocks-clickable": 8.1.3
        "@khanacademy/wonder-blocks-core": 12.4.3
        "@khanacademy/wonder-blocks-data": 15.0.1
        "@khanacademy/wonder-blocks-dropdown": 10.8.0
        "@khanacademy/wonder-blocks-form": 7.5.4
        "@khanacademy/wonder-blocks-icon-button": 11.1.4
        "@khanacademy/wonder-blocks-icon": 5.3.7
        "@khanacademy/wonder-blocks-labeled-field": 4.0.14
        "@khanacademy/wonder-blocks-layout": 3.1.44
        "@khanacademy/wonder-blocks-link": 10.1.5
        "@khanacademy/wonder-blocks-modal": 8.5.15
        "@khanacademy/wonder-blocks-pill": 3.1.55
        "@khanacademy/wonder-blocks-popover": 6.1.53
        "@khanacademy/wonder-blocks-progress-spinner": 3.1.44
        "@khanacademy/wonder-blocks-search-field": 5.1.61
        "@khanacademy/wonder-blocks-switch": 3.3.28
        "@khanacademy/wonder-blocks-tabs": 0.5.2
        "@khanacademy/wonder-blocks-theming": 4.0.2
        "@khanacademy/wonder-blocks-timing": 7.0.4
        "@khanacademy/wonder-blocks-tokens": 15.0.0
        "@khanacademy/wonder-blocks-toolbar": 5.1.46
        "@khanacademy/wonder-blocks-tooltip": 4.1.66
        "@khanacademy/wonder-blocks-typography": 4.2.29
        "@khanacademy/wonder-stuff-core": 3.0.0
    prodDeps:
        tiny-invariant: 1.3.1
