"use strict";(self.webpackChunkperseus=self.webpackChunkperseus||[]).push([[1607],{"./packages/perseus-editor/src/components/graph-settings.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),create_react_class__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/create-react-class/index.js"),create_react_class__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(create_react_class__WEBPACK_IMPORTED_MODULE_1__),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),react_dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-dom/index.js"),underscore__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/underscore/modules/index-all.js");const{ButtonGroup,InfoTip,PropCheckBox,RangeInput}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.components,{getDependencies}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Dependencies,defaultBackgroundImage={url:null,width:0,height:0};const __WEBPACK_DEFAULT_EXPORT__=create_react_class__WEBPACK_IMPORTED_MODULE_1___default()({displayName:"GraphSettings",propTypes:{..._khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.i,editableSettings:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().oneOf(["canvas","graph","snap","image","measure"])),box:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().number),labels:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().string),range:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().number)),step:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().number),gridStep:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().number),snapStep:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().number),valid:prop_types__WEBPACK_IMPORTED_MODULE_5___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,prop_types__WEBPACK_IMPORTED_MODULE_5___default().string]),backgroundImage:prop_types__WEBPACK_IMPORTED_MODULE_5___default().object,markings:prop_types__WEBPACK_IMPORTED_MODULE_5___default().oneOf(["graph","grid","none"]),showProtractor:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,showRuler:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,showTooltips:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,rulerLabel:prop_types__WEBPACK_IMPORTED_MODULE_5___default().string,rulerTicks:prop_types__WEBPACK_IMPORTED_MODULE_5___default().number},getDefaultProps:function(){return{editableSettings:["graph","snap","image","measure"],box:[_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Yu.defaultBoxSizeSmall,_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Yu.defaultBoxSizeSmall],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],snapStep:[1,1],valid:!0,backgroundImage:defaultBackgroundImage,markings:"graph",showProtractor:!1,showRuler:!1,showTooltips:!1,rulerLabel:"",rulerTicks:10}},getInitialState:function(){return this.stateFromProps(this.props)},componentDidMount:function(){this._isMounted=!0,this.changeGraph=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.debounce(this.changeGraph,300)},UNSAFE_componentWillReceiveProps:function(nextProps){underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isEqual(this.props.labels,nextProps.labels)&&underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isEqual(this.props.gridStep,nextProps.gridStep)&&underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isEqual(this.props.snapStep,nextProps.snapStep)&&underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isEqual(this.props.step,nextProps.step)&&underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isEqual(this.props.range,nextProps.range)&&underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isEqual(this.props.backgroundImage,nextProps.backgroundImage)||this.setState(this.stateFromProps(nextProps))},componentWillUnmount:function(){this._isMounted=!1},stateFromProps:function(props){return{labelsTextbox:props.labels,gridStepTextbox:props.gridStep,snapStepTextbox:props.snapStep,stepTextbox:props.step,rangeTextbox:props.range,backgroundImage:underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.clone(props.backgroundImage)}},change(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.m.apply(this,args)},changeRulerLabel:function(e){this.change({rulerLabel:e.target.value})},changeRulerTicks:function(e){this.change({rulerTicks:+e.target.value})},changeBackgroundUrl:function(e){if("keypress"===e.type&&"Enter"!==e.key)return;const setUrl=(url,width,height)=>{const image=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.clone(this.props.backgroundImage);image.url=url,image.width=width,image.height=height,this.setState({backgroundImage:image},this.changeGraph)},url=react_dom__WEBPACK_IMPORTED_MODULE_3__.findDOMNode(this.refs["bg-url"]).value;url?_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util.getImageSize(url,((width,height)=>{this._isMounted&&setUrl(url,width,height)})):setUrl(null,0,0)},renderLabelChoices:function(choices){return underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.map(choices,(function(nameAndValue){return react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:nameAndValue[1]},nameAndValue[0])}))},validRange:function(range){return underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.every(range,(function(num){return underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isFinite(num)}))?!(range[0]>=range[1])||"Range must have a higher number on the right":"Range must be a valid number"},validateStepValue:function(settings){const{step,range,name,minTicks,maxTicks}=settings;if(!underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isFinite(step))return name+" must be a valid number";const nSteps=function numSteps(range,step){return Math.floor((range[1]-range[0])/step)}(range,step);return nSteps<minTicks?name+" is too large, there must be at least "+minTicks+" ticks.":!(nSteps>maxTicks)||name+" is too small, there can be at most "+maxTicks+" ticks."},validSnapStep:function(step,range){return this.validateStepValue({step,range,name:"Snap step",minTicks:5,maxTicks:60})},validGridStep:function(step,range){return this.validateStepValue({step,range,name:"Grid step",minTicks:3,maxTicks:60})},validStep:function(step,range){return this.validateStepValue({step,range,name:"Step",minTicks:3,maxTicks:20})},validBackgroundImageSize:function(image){if(!image.url)return!0;return!!(image.width<=450&&image.height<=450)||"Image must be smaller than 450px x 450px."},validateGraphSettings:function(range,step,gridStep,snapStep,image){const self=this;let msg;const goodRange=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.every(range,(function(range){return msg=self.validRange(range),!0===msg}));if(!goodRange)return msg;const goodStep=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.every(step,(function(step,i){return msg=self.validStep(step,range[i]),!0===msg}));if(!goodStep)return msg;const goodGridStep=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.every(gridStep,(function(gridStep,i){return msg=self.validGridStep(gridStep,range[i]),!0===msg}));if(!goodGridStep)return msg;const goodSnapStep=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.every(snapStep,(function(snapStep,i){return msg=self.validSnapStep(snapStep,range[i]),!0===msg}));if(!goodSnapStep)return msg;const goodImageSize=this.validBackgroundImageSize(image);return!0===goodImageSize||(msg=goodImageSize,msg)},changeLabel:function(i,e){const val=e.target.value,labels=this.state.labelsTextbox.slice();labels[i]=val,this.setState({labelsTextbox:labels},this.changeGraph)},changeRange:function(i,values){const ranges=this.state.rangeTextbox.slice();ranges[i]=values;const step=this.state.stepTextbox.slice(),gridStep=this.state.gridStepTextbox.slice(),snapStep=this.state.snapStepTextbox.slice(),scale=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util.scaleFromExtent(ranges[i],this.props.box[i]);!0===this.validRange(ranges[i])&&(step[i]=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util.tickStepFromExtent(ranges[i],this.props.box[i]),gridStep[i]=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util.gridStepFromTickStep(step[i],scale),snapStep[i]=gridStep[i]/2),this.setState({stepTextbox:step,gridStepTextbox:gridStep,snapStepTextbox:snapStep,rangeTextbox:ranges},this.changeGraph)},changeStep:function(step){this.setState({stepTextbox:step},this.changeGraph)},changeSnapStep:function(snapStep){this.setState({snapStepTextbox:snapStep},this.changeGraph)},changeGridStep:function(gridStep){this.setState({gridStepTextbox:gridStep,snapStepTextbox:underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.map(gridStep,(function(step){return step/2}))},this.changeGraph)},changeGraph:function(){const labels=this.state.labelsTextbox,range=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.map(this.state.rangeTextbox,(function(range){return underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.map(range,Number)})),step=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.map(this.state.stepTextbox,Number),gridStep=this.state.gridStepTextbox,snapStep=this.state.snapStepTextbox,image=this.state.backgroundImage,validationResult=this.validateGraphSettings(range,step,gridStep,snapStep,image);!0===validationResult?this.change({valid:!0,labels,range,step,gridStep,snapStep,backgroundImage:image}):this.change({valid:validationResult})},render:function(){const scale=[_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.TR.roundTo(2,_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util.scaleFromExtent(this.props.range[0],this.props.box[0])),_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.TR.roundTo(2,_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util.scaleFromExtent(this.props.range[1],this.props.box[1]))],{TeX}=getDependencies();return react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.contains(this.props.editableSettings,"canvas")&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"graph-settings"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},"Canvas size (x,y pixels)",react__WEBPACK_IMPORTED_MODULE_2__.createElement(RangeInput,{value:this.props.box,onChange:box=>{this.change({box})}})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},"Scale (px per div):"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(TeX,null,"("+scale[0]+", "+scale[1]+")"))),underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.contains(this.props.editableSettings,"graph")&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"graph-settings"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"}," ","x Label",react__WEBPACK_IMPORTED_MODULE_2__.createElement("input",{type:"text",className:"graph-settings-axis-label",ref:"labels-0",onChange:e=>this.changeLabel(0,e),value:this.state.labelsTextbox[0]||""})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-right-col"},"y Label",react__WEBPACK_IMPORTED_MODULE_2__.createElement("input",{type:"text",className:"graph-settings-axis-label",ref:"labels-1",onChange:e=>this.changeLabel(1,e),value:this.state.labelsTextbox[1]||""}))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},"x Range",react__WEBPACK_IMPORTED_MODULE_2__.createElement(RangeInput,{value:this.state.rangeTextbox[0],onChange:vals=>this.changeRange(0,vals)})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-right-col"},"y Range",react__WEBPACK_IMPORTED_MODULE_2__.createElement(RangeInput,{value:this.state.rangeTextbox[1],onChange:vals=>this.changeRange(1,vals)}))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},"Tick Step",react__WEBPACK_IMPORTED_MODULE_2__.createElement(RangeInput,{value:this.state.stepTextbox,onChange:this.changeStep})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-right-col"},"Grid Step",react__WEBPACK_IMPORTED_MODULE_2__.createElement(RangeInput,{value:this.state.gridStepTextbox,onChange:this.changeGridStep}))),underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.contains(this.props.editableSettings,"snap")&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},"Snap Step",react__WEBPACK_IMPORTED_MODULE_2__.createElement(RangeInput,{value:this.state.snapStepTextbox,onChange:this.changeSnapStep}))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Markings: "),react__WEBPACK_IMPORTED_MODULE_2__.createElement(ButtonGroup,{value:this.props.markings,allowEmpty:!1,buttons:[{value:"graph",content:"Graph"},{value:"grid",content:"Grid"},{value:"none",content:"None"}],onChange:this.change("markings")})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Show tooltips",showTooltips:this.props.showTooltips,onChange:this.change}))),underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.contains(this.props.editableSettings,"image")&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"image-settings"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,"Background image:"),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,"Url:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("input",{type:"text",className:"graph-settings-background-url",ref:"bg-url",value:this.state.backgroundImage.url||"",onChange:e=>{const image=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.clone(this.props.backgroundImage);image.url=e.target.value,this.setState({backgroundImage:image})},onKeyPress:this.changeBackgroundUrl,onBlur:this.changeBackgroundUrl}),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,'Create an image in graphie, or use the "Add image" function to create a background.')))),underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.contains(this.props.editableSettings,"measure")&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"misc-settings"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Show ruler",showRuler:this.props.showRuler,onChange:this.change})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-right-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Show protractor",showProtractor:this.props.showProtractor,onChange:this.change}))),this.props.showRuler&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null," ","Ruler label:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("select",{onChange:this.changeRulerLabel,value:this.props.rulerLabel},react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:""},"None"),react__WEBPACK_IMPORTED_MODULE_2__.createElement("optgroup",{label:"Metric"},this.renderLabelChoices([["milimeters","mm"],["centimeters","cm"],["meters","m"],["kilometers","km"]])),react__WEBPACK_IMPORTED_MODULE_2__.createElement("optgroup",{label:"Imperial"},this.renderLabelChoices([["inches","in"],["feet","ft"],["yards","yd"],["miles","mi"]]))))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null," ","Ruler ticks:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("select",{onChange:this.changeRulerTicks,value:this.props.rulerTicks},underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.map([1,2,4,8,10,16],(function(n){return react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:n},n)}))))))))}})},"./packages/perseus-editor/src/widgets/interaction-editor/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>widgets_interaction_editor});var src=__webpack_require__("./packages/perseus/src/index.ts"),react=__webpack_require__("./node_modules/react/index.js"),index_all=__webpack_require__("./node_modules/underscore/modules/index-all.js"),graph_settings=__webpack_require__("./packages/perseus-editor/src/components/graph-settings.tsx"),math_input_src=__webpack_require__("./packages/math-input/src/index.ts"),es=__webpack_require__("./node_modules/@khanacademy/wonder-blocks-color/dist/es/index.js"),dist_es=__webpack_require__("./node_modules/@khanacademy/wonder-blocks-core/dist/es/index.js");function MathquillInput(props){const mathFieldWrapperRef=(0,react.useRef)(null),mathFieldInstance=(0,react.useRef)();return(0,react.useEffect)((()=>{mathFieldWrapperRef.current&&!mathFieldInstance.current&&(mathFieldInstance.current=(0,math_input_src.OS)(mathFieldWrapperRef.current,(baseConfig=>({...baseConfig,handlers:{edit:mathField=>{let value=mathField.latex();value=value.replace(/<>/g,"\\ne"),props.value!==value&&props.onChange(value)},upOutOf:mathField=>{mathField.typedText("^")}}}))))})),react.createElement(dist_es.G7,{style:styles.outerWrapper},react.createElement("span",{ref:mathFieldWrapperRef,className:"perseus-math-input mq-editable-field mq-math-mode"}))}const styles=__webpack_require__("./node_modules/aphrodite/lib/index.js").StyleSheet.create({outerWrapper:{display:"inline-block",borderStyle:"solid",borderWidth:1,borderColor:es.default.offBlack50,borderRadius:3,background:es.default.white}});try{mathquillinput.displayName="mathquillinput",mathquillinput.__docgenInfo={description:"A simple Mathquill MathField input for the InteractionEditor.\nUnlike our other uses of Mathquill, we're not using a keypad here;\nit's just the input itself for use writing TeX.",displayName:"mathquillinput",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/interaction-editor/mathquill-input.tsx#mathquillinput"]={docgenInfo:mathquillinput.__docgenInfo,name:"mathquillinput",path:"packages/perseus-editor/src/widgets/interaction-editor/mathquill-input.tsx#mathquillinput"})}catch(__react_docgen_typescript_loader_error){}const{NumberInput}=src.components,{getDependencies}=src.Dependencies;class FunctionEditor extends react.Component{static defaultProps={value:"x",rangeMin:"-10",rangeMax:"10",color:src.eA.BLUE,strokeDasharray:"",strokeWidth:2};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();serialize=()=>src.yU.serialize.call(this);render(){const{TeX}=getDependencies();return react.createElement("div",{className:"graph-settings"},react.createElement("div",{className:"perseus-widget-row"},react.createElement(TeX,null,this.props.funcName+"(x)=")," ",react.createElement(MathquillInput,{value:this.props.value,onChange:this.change("value")})),react.createElement("div",{className:"perseus-widget-row"},"Range: ",react.createElement(TeX,null,"\\Large("),react.createElement(MathquillInput,{value:this.props.rangeMin,onChange:this.change("rangeMin")}),react.createElement(TeX,null,",")," ",react.createElement(MathquillInput,{value:this.props.rangeMax,onChange:this.change("rangeMax")}),react.createElement(TeX,null,"\\Large)")),react.createElement("div",{className:"perseus-widget-row"},react.createElement(src.zH,{value:this.props.color,onChange:this.change("color")})),react.createElement("div",{className:"perseus-widget-row"},react.createElement(src.Nx,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})),react.createElement("div",{className:"perseus-widget-row"},react.createElement("div",{className:"perseus-widget-left-col"},"Width:"," ",react.createElement(NumberInput,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")}))))}}const function_editor=FunctionEditor;try{FunctionEditor.displayName="FunctionEditor",FunctionEditor.__docgenInfo={description:"",displayName:"FunctionEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},value:{defaultValue:{value:"x"},description:"",name:"value",required:!1,type:{name:"string"}},rangeMin:{defaultValue:{value:"-10"},description:"",name:"rangeMin",required:!1,type:{name:"string"}},rangeMax:{defaultValue:{value:"10"},description:"",name:"rangeMax",required:!1,type:{name:"string"}},color:{defaultValue:{value:"#6495ED"},description:"",name:"color",required:!1,type:{name:"string"}},strokeDasharray:{defaultValue:{value:""},description:"",name:"strokeDasharray",required:!1,type:{name:"string"}},strokeWidth:{defaultValue:{value:"2"},description:"",name:"strokeWidth",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/interaction-editor/function-editor.tsx#FunctionEditor"]={docgenInfo:FunctionEditor.__docgenInfo,name:"FunctionEditor",path:"packages/perseus-editor/src/widgets/interaction-editor/function-editor.tsx#FunctionEditor"})}catch(__react_docgen_typescript_loader_error){}const{TextInput}=src.components,{getDependencies:label_editor_getDependencies}=src.Dependencies;class LabelEditor extends react.Component{static defaultProps={coordX:"0",coordY:"0",color:src.eA.BLACK,label:"\\phi"};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();serialize=()=>src.yU.serialize.call(this);render(){const{TeX}=label_editor_getDependencies();return react.createElement("div",{className:"graph-settings"},react.createElement("div",{className:"perseus-widget-row"},react.createElement(TextInput,{value:this.props.label,onChange:this.change("label"),style:{width:"100%"}})),react.createElement("div",{className:"perseus-widget-row"},"Location: ",react.createElement(TeX,null,"\\Large("),react.createElement(MathquillInput,{value:this.props.coordX,onChange:this.change("coordX")}),react.createElement(TeX,null,",")," ",react.createElement(MathquillInput,{value:this.props.coordY,onChange:this.change("coordY")}),react.createElement(TeX,null,"\\Large)")),react.createElement("div",{className:"perseus-widget-row"},react.createElement(src.zH,{value:this.props.color,onChange:this.change("color")})))}}const label_editor=LabelEditor;try{LabelEditor.displayName="LabelEditor",LabelEditor.__docgenInfo={description:"",displayName:"LabelEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},color:{defaultValue:{value:"black"},description:"",name:"color",required:!1,type:{name:"string"}},coordX:{defaultValue:{value:"0"},description:"",name:"coordX",required:!1,type:{name:"string"}},coordY:{defaultValue:{value:"0"},description:"",name:"coordY",required:!1,type:{name:"string"}},label:{defaultValue:{value:"\\phi"},description:"",name:"label",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/interaction-editor/label-editor.tsx#LabelEditor"]={docgenInfo:LabelEditor.__docgenInfo,name:"LabelEditor",path:"packages/perseus-editor/src/widgets/interaction-editor/label-editor.tsx#LabelEditor"})}catch(__react_docgen_typescript_loader_error){}const{NumberInput:line_editor_NumberInput}=src.components,{getDependencies:line_editor_getDependencies}=src.Dependencies;class LineEditor extends react.Component{static defaultProps={startX:"-5",startY:"5",endX:"5",endY:"5",color:src.eA.BLACK,strokeDasharray:"",arrows:"",strokeWidth:2};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();serialize=()=>src.yU.serialize.call(this);render(){const{TeX}=line_editor_getDependencies();return react.createElement("div",{className:"graph-settings"},react.createElement("div",{className:"perseus-widget-row"},"Start: ",react.createElement(TeX,null,"\\Large("),react.createElement(MathquillInput,{value:this.props.startX,onChange:this.change("startX")}),react.createElement(TeX,null,",")," ",react.createElement(MathquillInput,{value:this.props.startY,onChange:this.change("startY")}),react.createElement(TeX,null,"\\Large)")),react.createElement("div",{className:"perseus-widget-row"},"End: ",react.createElement(TeX,null,"\\Large("),react.createElement(MathquillInput,{value:this.props.endX,onChange:this.change("endX")}),react.createElement(TeX,null,",")," ",react.createElement(MathquillInput,{value:this.props.endY,onChange:this.change("endY")}),react.createElement(TeX,null,"\\Large)")),react.createElement("div",{className:"perseus-widget-row"},react.createElement(src.zH,{value:this.props.color,onChange:this.change("color")})),react.createElement("div",{className:"perseus-widget-row"},react.createElement(src.Nx,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")}),"   ",react.createElement(src.B7,{value:this.props.arrows,onChange:this.change("arrows")})),react.createElement("div",{className:"perseus-widget-row"},react.createElement("div",{className:"perseus-widget-left-col"},"Width:"," ",react.createElement(line_editor_NumberInput,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")}))))}}const line_editor=LineEditor;try{LineEditor.displayName="LineEditor",LineEditor.__docgenInfo={description:"",displayName:"LineEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},startX:{defaultValue:{value:"-5"},description:"",name:"startX",required:!1,type:{name:"string"}},startY:{defaultValue:{value:"5"},description:"",name:"startY",required:!1,type:{name:"string"}},endX:{defaultValue:{value:"5"},description:"",name:"endX",required:!1,type:{name:"string"}},endY:{defaultValue:{value:"5"},description:"",name:"endY",required:!1,type:{name:"string"}},color:{defaultValue:{value:"black"},description:"",name:"color",required:!1,type:{name:"string"}},strokeDasharray:{defaultValue:{value:""},description:"",name:"strokeDasharray",required:!1,type:{name:"string"}},arrows:{defaultValue:{value:""},description:"",name:"arrows",required:!1,type:{name:"string"}},strokeWidth:{defaultValue:{value:"2"},description:"",name:"strokeWidth",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/interaction-editor/line-editor.tsx#LineEditor"]={docgenInfo:LineEditor.__docgenInfo,name:"LineEditor",path:"packages/perseus-editor/src/widgets/interaction-editor/line-editor.tsx#LineEditor"})}catch(__react_docgen_typescript_loader_error){}const{ButtonGroup,NumberInput:constraint_editor_NumberInput}=src.components;class ConstraintEditor extends react.Component{static defaultProps={constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"};change=propName=>src.ye.m.call(this,propName);render(){const{TeX}=src.Dependencies.getDependencies();return react.createElement("div",null,react.createElement("div",{className:"perseus-widget-row"},"Constraint:"," ",react.createElement(ButtonGroup,{value:this.props.constraint,allowEmpty:!1,buttons:[{value:"none",content:"None"},{value:"snap",content:"Snap"},{value:"x",content:"x="},{value:"y",content:"y="}],onChange:this.change("constraint")})),"snap"===this.props.constraint&&react.createElement("div",{className:"perseus-widget-row"},"Snap:"," ",react.createElement(constraint_editor_NumberInput,{value:this.props.snap,placeholder:0,onChange:this.change("snap")})),"x"===this.props.constraint&&react.createElement("div",{className:"graph-settings"},react.createElement("div",{className:"perseus-widget-row"},react.createElement(TeX,null,"x=")," ",react.createElement(MathquillInput,{value:this.props.constraintFn,onChange:this.change("constraintFn")}))),"y"===this.props.constraint&&react.createElement("div",{className:"graph-settings"},react.createElement("div",{className:"perseus-widget-row"},react.createElement(TeX,null,"y=")," ",react.createElement(MathquillInput,{value:this.props.constraintFn,onChange:this.change("constraintFn")}))),"Ensure these are set so nothing can be dragged off the canvas:",react.createElement("div",{className:"perseus-widget-row"},react.createElement("div",{className:"perseus-widget-row"},react.createElement(TeX,null,"x \\in \\Large[")," ",react.createElement(MathquillInput,{value:this.props.constraintXMin,onChange:this.change("constraintXMin")}),react.createElement(TeX,null,", ")," ",react.createElement(MathquillInput,{value:this.props.constraintXMax,onChange:this.change("constraintXMax")})," ",react.createElement(TeX,null,"\\Large]"))),react.createElement("div",{className:"perseus-widget-row"},react.createElement("div",{className:"perseus-widget-row"},react.createElement(TeX,null,"y \\in \\Large[")," ",react.createElement(MathquillInput,{value:this.props.constraintYMin,onChange:this.change("constraintYMin")}),react.createElement(TeX,null,", ")," ",react.createElement(MathquillInput,{value:this.props.constraintYMax,onChange:this.change("constraintYMax")})," ",react.createElement(TeX,null,"\\Large]"))))}}const constraint_editor=ConstraintEditor;try{ConstraintEditor.displayName="ConstraintEditor",ConstraintEditor.__docgenInfo={description:"",displayName:"ConstraintEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},constraint:{defaultValue:{value:"none"},description:"",name:"constraint",required:!1,type:{name:"string"}},constraintFn:{defaultValue:{value:"0"},description:"",name:"constraintFn",required:!1,type:{name:"string"}},constraintXMax:{defaultValue:{value:"10"},description:"",name:"constraintXMax",required:!1,type:{name:"string"}},constraintXMin:{defaultValue:{value:"-10"},description:"",name:"constraintXMin",required:!1,type:{name:"string"}},constraintYMax:{defaultValue:{value:"10"},description:"",name:"constraintYMax",required:!1,type:{name:"string"}},constraintYMin:{defaultValue:{value:"-10"},description:"",name:"constraintYMin",required:!1,type:{name:"string"}},snap:{defaultValue:{value:"0.5"},description:"",name:"snap",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/interaction-editor/constraint-editor.tsx#ConstraintEditor"]={docgenInfo:ConstraintEditor.__docgenInfo,name:"ConstraintEditor",path:"packages/perseus-editor/src/widgets/interaction-editor/constraint-editor.tsx#ConstraintEditor"})}catch(__react_docgen_typescript_loader_error){}const{NumberInput:movable_line_editor_NumberInput}=src.components,{getDependencies:movable_line_editor_getDependencies}=src.Dependencies;class MovableLineEditor extends react.Component{static defaultProps={startX:"-5",startY:"5",endX:"5",endY:"5",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();serialize=()=>src.yU.serialize.call(this);render(){const{TeX}=movable_line_editor_getDependencies();return react.createElement("div",{className:"graph-settings"},"Initial position:",react.createElement("div",{className:"perseus-widget-row"},"Start: ",react.createElement(TeX,null,"\\Large("),react.createElement(MathquillInput,{value:this.props.startX,onChange:this.change("startX")}),react.createElement(TeX,null,",")," ",react.createElement(MathquillInput,{value:this.props.startY,onChange:this.change("startY")}),react.createElement(TeX,null,"\\Large)")),react.createElement("div",{className:"perseus-widget-row"},"End: ",react.createElement(TeX,null,"\\Large("),react.createElement(MathquillInput,{value:this.props.endX,onChange:this.change("endX")}),react.createElement(TeX,null,",")," ",react.createElement(MathquillInput,{value:this.props.endY,onChange:this.change("endY")}),react.createElement(TeX,null,"\\Large)")),react.createElement("div",{className:"perseus-widget-row"},"Start updates ",react.createElement(TeX,null,"(x_n, y_n)")," for ",react.createElement(TeX,null,"n ="),react.createElement(movable_line_editor_NumberInput,{value:this.props.startSubscript,placeholder:0,onChange:this.change("startSubscript")})),react.createElement("div",{className:"perseus-widget-row"},"End updates ",react.createElement(TeX,null,"(x_m, y_m)")," for ",react.createElement(TeX,null,"m ="),react.createElement(movable_line_editor_NumberInput,{value:this.props.endSubscript,placeholder:0,onChange:this.change("endSubscript")})),react.createElement("div",{className:"perseus-widget-row"},"All constraints are applied to the start point."),react.createElement(constraint_editor,this.props))}}const movable_line_editor=MovableLineEditor;try{MovableLineEditor.displayName="MovableLineEditor",MovableLineEditor.__docgenInfo={description:"",displayName:"MovableLineEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},startX:{defaultValue:{value:"-5"},description:"",name:"startX",required:!1,type:{name:"string"}},startY:{defaultValue:{value:"5"},description:"",name:"startY",required:!1,type:{name:"string"}},endX:{defaultValue:{value:"5"},description:"",name:"endX",required:!1,type:{name:"string"}},endY:{defaultValue:{value:"5"},description:"",name:"endY",required:!1,type:{name:"string"}},constraint:{defaultValue:{value:"none"},description:"",name:"constraint",required:!1,type:{name:"string"}},snap:{defaultValue:{value:"0.5"},description:"",name:"snap",required:!1,type:{name:"number"}},constraintFn:{defaultValue:{value:"0"},description:"",name:"constraintFn",required:!1,type:{name:"string"}},startSubscript:{defaultValue:null,description:"",name:"startSubscript",required:!0,type:{name:"number"}},endSubscript:{defaultValue:null,description:"",name:"endSubscript",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/interaction-editor/movable-line-editor.tsx#MovableLineEditor"]={docgenInfo:MovableLineEditor.__docgenInfo,name:"MovableLineEditor",path:"packages/perseus-editor/src/widgets/interaction-editor/movable-line-editor.tsx#MovableLineEditor"})}catch(__react_docgen_typescript_loader_error){}const{NumberInput:movable_point_editor_NumberInput}=src.components,{getDependencies:movable_point_editor_getDependencies}=src.Dependencies;class MovablePointEditor extends react.Component{static defaultProps={startX:"0",startY:"0",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();serialize=()=>src.yU.serialize.call(this);render(){const{TeX}=movable_point_editor_getDependencies();return react.createElement("div",{className:"graph-settings"},react.createElement("div",{className:"perseus-widget-row"},"Start: ",react.createElement(TeX,null,"\\Large("),react.createElement(MathquillInput,{value:this.props.startX,onChange:this.change("startX")}),react.createElement(TeX,null,",")," ",react.createElement(MathquillInput,{value:this.props.startY,onChange:this.change("startY")}),react.createElement(TeX,null,"\\Large)")),react.createElement("div",{className:"perseus-widget-row"},"Update ",react.createElement(TeX,null,"(x_n, y_n)")," for ",react.createElement(TeX,null,"n =")," ",react.createElement(movable_point_editor_NumberInput,{value:this.props.varSubscript,placeholder:0,onChange:this.change("varSubscript")})),react.createElement(constraint_editor,this.props))}}const movable_point_editor=MovablePointEditor;try{MovablePointEditor.displayName="MovablePointEditor",MovablePointEditor.__docgenInfo={description:"",displayName:"MovablePointEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},startX:{defaultValue:{value:"0"},description:"",name:"startX",required:!1,type:{name:"string"}},startY:{defaultValue:{value:"0"},description:"",name:"startY",required:!1,type:{name:"string"}},constraint:{defaultValue:{value:"none"},description:"",name:"constraint",required:!1,type:{name:"string"}},snap:{defaultValue:{value:"0.5"},description:"",name:"snap",required:!1,type:{name:"number"}},constraintFn:{defaultValue:{value:"0"},description:"",name:"constraintFn",required:!1,type:{name:"string"}},varSubscript:{defaultValue:null,description:"",name:"varSubscript",required:!0,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/interaction-editor/movable-point-editor.tsx#MovablePointEditor"]={docgenInfo:MovablePointEditor.__docgenInfo,name:"MovablePointEditor",path:"packages/perseus-editor/src/widgets/interaction-editor/movable-point-editor.tsx#MovablePointEditor"})}catch(__react_docgen_typescript_loader_error){}const{NumberInput:parametric_editor_NumberInput}=src.components,{getDependencies:parametric_editor_getDependencies}=src.Dependencies;class ParametricEditor extends react.Component{static defaultProps={x:"cos(t)",y:"sin(t)",rangeMin:"0",rangeMax:"2\\pi",color:src.eA.BLUE,strokeDasharray:"",strokeWidth:2};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();serialize=()=>src.yU.serialize.call(this);render(){const{TeX}=parametric_editor_getDependencies();return react.createElement("div",{className:"graph-settings"},react.createElement("div",{className:"perseus-widget-row"},react.createElement(TeX,null,"X(t) =")," ",react.createElement(MathquillInput,{value:this.props.x,onChange:this.change("x")})),react.createElement("div",{className:"perseus-widget-row"},react.createElement(TeX,null,"Y(t) =")," ",react.createElement(MathquillInput,{value:this.props.y,onChange:this.change("y")})),react.createElement("div",{className:"perseus-widget-row"},"Range: ",react.createElement(TeX,null,"\\Large("),react.createElement(MathquillInput,{value:this.props.rangeMin,onChange:this.change("rangeMin")}),react.createElement(TeX,null,",")," ",react.createElement(MathquillInput,{value:this.props.rangeMax,onChange:this.change("rangeMax")}),react.createElement(TeX,null,"\\Large)")),react.createElement("div",{className:"perseus-widget-row"},react.createElement(src.zH,{value:this.props.color,onChange:this.change("color")})),react.createElement("div",{className:"perseus-widget-row"},react.createElement(src.Nx,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})),react.createElement("div",{className:"perseus-widget-row"},react.createElement("div",{className:"perseus-widget-left-col"},"Width:"," ",react.createElement(parametric_editor_NumberInput,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")}))))}}const parametric_editor=ParametricEditor;try{ParametricEditor.displayName="ParametricEditor",ParametricEditor.__docgenInfo={description:"",displayName:"ParametricEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},x:{defaultValue:{value:"cos(t)"},description:"",name:"x",required:!1,type:{name:"string"}},y:{defaultValue:{value:"sin(t)"},description:"",name:"y",required:!1,type:{name:"string"}},rangeMin:{defaultValue:{value:"0"},description:"",name:"rangeMin",required:!1,type:{name:"string"}},rangeMax:{defaultValue:{value:"2\\pi"},description:"",name:"rangeMax",required:!1,type:{name:"string"}},color:{defaultValue:{value:"#6495ED"},description:"",name:"color",required:!1,type:{name:"string"}},strokeDasharray:{defaultValue:{value:""},description:"",name:"strokeDasharray",required:!1,type:{name:"string"}},strokeWidth:{defaultValue:{value:"2"},description:"",name:"strokeWidth",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/interaction-editor/parametric-editor.tsx#ParametricEditor"]={docgenInfo:ParametricEditor.__docgenInfo,name:"ParametricEditor",path:"packages/perseus-editor/src/widgets/interaction-editor/parametric-editor.tsx#ParametricEditor"})}catch(__react_docgen_typescript_loader_error){}const{getDependencies:point_editor_getDependencies}=src.Dependencies;class PointEditor extends react.Component{static defaultProps={coordX:"0",coordY:"0",color:src.eA.BLACK};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();serialize=()=>src.yU.serialize.call(this);render(){const{TeX}=point_editor_getDependencies();return react.createElement("div",{className:"graph-settings"},react.createElement("div",{className:"perseus-widget-row"},"Coordinate: ",react.createElement(TeX,null,"\\Large("),react.createElement(MathquillInput,{value:this.props.coordX,onChange:this.change("coordX")}),react.createElement(TeX,null,",")," ",react.createElement(MathquillInput,{value:this.props.coordY,onChange:this.change("coordY")}),react.createElement(TeX,null,"\\Large)")),react.createElement("div",{className:"perseus-widget-row"},react.createElement(src.zH,{value:this.props.color,onChange:this.change("color")})))}}const point_editor=PointEditor;try{PointEditor.displayName="PointEditor",PointEditor.__docgenInfo={description:"",displayName:"PointEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},coordX:{defaultValue:{value:"0"},description:"",name:"coordX",required:!1,type:{name:"string"}},coordY:{defaultValue:{value:"0"},description:"",name:"coordY",required:!1,type:{name:"string"}},color:{defaultValue:{value:"black"},description:"",name:"color",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/interaction-editor/point-editor.tsx#PointEditor"]={docgenInfo:PointEditor.__docgenInfo,name:"PointEditor",path:"packages/perseus-editor/src/widgets/interaction-editor/point-editor.tsx#PointEditor"})}catch(__react_docgen_typescript_loader_error){}const{getDependencies:rectangle_editor_getDependencies}=src.Dependencies;class RectangleEditor extends react.Component{static defaultProps={coordX:"-5",coordY:"5",width:"2",height:"3",color:src.eA.LIGHT_BLUE};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();serialize=()=>src.yU.serialize.call(this);render(){const{TeX}=rectangle_editor_getDependencies();return react.createElement("div",{className:"graph-settings"},react.createElement("div",{className:"perseus-widget-row"},"Bottom left: ",react.createElement(TeX,null,"\\Large("),react.createElement(MathquillInput,{value:this.props.coordX,onChange:this.change("coordX")}),react.createElement(TeX,null,",")," ",react.createElement(MathquillInput,{value:this.props.coordY,onChange:this.change("coordY")}),react.createElement(TeX,null,"\\Large)")),react.createElement("div",{className:"perseus-widget-row"},"Width:"," ",react.createElement(MathquillInput,{value:this.props.width,onChange:this.change("width")})),react.createElement("div",{className:"perseus-widget-row"},"Height:"," ",react.createElement(MathquillInput,{value:this.props.height,onChange:this.change("height")})),react.createElement("div",{className:"perseus-widget-row"},react.createElement(src.zH,{value:this.props.color,lightColors:!0,onChange:this.change("color")})),react.createElement("div",{className:"perseus-widget-row"},"You want a border? Sorry, draw your own."))}}const rectangle_editor=RectangleEditor;try{RectangleEditor.displayName="RectangleEditor",RectangleEditor.__docgenInfo={description:"",displayName:"RectangleEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},color:{defaultValue:{value:"#9AB8ED"},description:"",name:"color",required:!1,type:{name:"string"}},coordX:{defaultValue:{value:"-5"},description:"",name:"coordX",required:!1,type:{name:"string"}},coordY:{defaultValue:{value:"5"},description:"",name:"coordY",required:!1,type:{name:"string"}},height:{defaultValue:{value:"3"},description:"",name:"height",required:!1,type:{name:"string"}},width:{defaultValue:{value:"2"},description:"",name:"width",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/interaction-editor/rectangle-editor.tsx#RectangleEditor"]={docgenInfo:RectangleEditor.__docgenInfo,name:"RectangleEditor",path:"packages/perseus-editor/src/widgets/interaction-editor/rectangle-editor.tsx#RectangleEditor"})}catch(__react_docgen_typescript_loader_error){}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const{getDependencies:interaction_editor_getDependencies}=src.Dependencies,{unescapeMathMode}=src.Util,defaultInteractionProps={graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]};class InteractionEditor extends react.Component{static widgetName="interaction";static defaultProps=defaultInteractionProps;state={usedVarSubscripts:this._getAllVarSubscripts(this.props.elements),usedFunctionNames:this._getAllFunctionNames(this.props.elements)};UNSAFE_componentWillReceiveProps(nextProps){this.setState({usedVarSubscripts:this._getAllVarSubscripts(nextProps.elements),usedFunctionNames:this._getAllFunctionNames(nextProps.elements)})}_getAllVarSubscripts(elements){return index_all.ZP.map(index_all.ZP.where(elements,{type:"movable-point"}),(element=>element.options.varSubscript)).concat(index_all.ZP.map(index_all.ZP.where(elements,{type:"movable-line"}),(element=>element.options.startSubscript))).concat(index_all.ZP.map(index_all.ZP.where(elements,{type:"movable-line"}),(element=>element.options.endSubscript)))}_getAllFunctionNames(elements){return index_all.ZP.map(index_all.ZP.where(elements,{type:"function"}),(element=>element.options.funcName))}_updateGraphProps=newProps=>{this.change({graph:index_all.ZP.extend(index_all.ZP.omit(newProps,"step"),{tickStep:newProps.step})})};_addNewElement=e=>{const elementType=e.target.value;if(""===elementType)return;e.target.value="";const newElement={type:elementType,key:elementType+"-"+(16777215*Math.random()<<0).toString(16),options:"point"===elementType?index_all.ZP.clone(point_editor.defaultProps):"line"===elementType?index_all.ZP.clone(line_editor.defaultProps):"movable-point"===elementType?index_all.ZP.clone(movable_point_editor.defaultProps):"movable-line"===elementType?index_all.ZP.clone(movable_line_editor.defaultProps):"function"===elementType?index_all.ZP.clone(function_editor.defaultProps):"parametric"===elementType?index_all.ZP.clone(parametric_editor.defaultProps):"label"===elementType?index_all.ZP.clone(label_editor.defaultProps):"rectangle"===elementType?index_all.ZP.clone(rectangle_editor.defaultProps):{}};let nextSubscript;if("movable-point"===elementType)nextSubscript=index_all.ZP.max([index_all.ZP.max(this.state.usedVarSubscripts),-1])+1,newElement.options.varSubscript=nextSubscript;else if("movable-line"===elementType)nextSubscript=index_all.ZP.max([index_all.ZP.max(this.state.usedVarSubscripts),-1])+1,newElement.options.startSubscript=nextSubscript,newElement.options.endSubscript=nextSubscript+1;else if("function"===elementType){const nextLetter=String.fromCharCode(index_all.ZP.max([index_all.ZP.max(index_all.ZP.map(this.state.usedFunctionNames,(function(c){return c.charCodeAt(0)}))),"e".charCodeAt(0)])+1);newElement.options.funcName=nextLetter}this.change({elements:this.props.elements.concat(newElement)})};_deleteElement=index=>{const element=this.props.elements[index];this.change({elements:index_all.ZP.without(this.props.elements,element)})};_moveElementUp=index=>{const element=this.props.elements[index],newElements=index_all.ZP.without(this.props.elements,element);newElements.splice(index-1,0,element),this.change({elements:newElements})};_moveElementDown=index=>{const element=this.props.elements[index],newElements=index_all.ZP.without(this.props.elements,element);newElements.splice(index+1,0,element),this.change({elements:newElements})};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();serialize=()=>src.yU.serialize.call(this);render(){const{TeX}=interaction_editor_getDependencies();return react.createElement("div",{className:"perseus-widget-interaction-editor"},react.createElement(src.F7,{title:"Grid settings"},react.createElement(graph_settings.Z,{editableSettings:["canvas","graph"],box:this.props.graph.box,labels:this.props.graph.labels,range:this.props.graph.range,step:this.props.graph.tickStep,gridStep:this.props.graph.gridStep,markings:this.props.graph.markings,onChange:this._updateGraphProps}),!0!==this.props.graph.valid&&react.createElement("div",null,this.props.graph.valid)),index_all.ZP.map(this.props.elements,(function(element,n){return"movable-point"===element.type?react.createElement(src.F7,{title:react.createElement("span",null,"Movable point"," ",react.createElement(TeX,null,"(x_{"+element.options.varSubscript+"}, y_{"+element.options.varSubscript+"})")),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement.bind(this,n),key:element.key},react.createElement(movable_point_editor,_extends({},element.options,{onChange:newProps=>{const elements=JSON.parse(JSON.stringify(this.props.elements));index_all.ZP.extend(elements[n].options,newProps),this.change({elements})}}))):"movable-line"===element.type?react.createElement(src.F7,{title:react.createElement("span",null,"Movable line"," ",react.createElement(TeX,null,"(x_{"+element.options.startSubscript+"}, y_{"+element.options.startSubscript+"})")," ","to"," ",react.createElement(TeX,null,"(x_{"+element.options.endSubscript+"}, y_{"+element.options.endSubscript+"})")),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement.bind(this,n),key:element.key},react.createElement(movable_line_editor,_extends({},element.options,{onChange:newProps=>{const elements=JSON.parse(JSON.stringify(this.props.elements));index_all.ZP.extend(elements[n].options,newProps),this.change({elements})}}))):"point"===element.type?react.createElement(src.F7,{title:react.createElement("span",null,"Point"," ",react.createElement(TeX,null,"("+element.options.coordX+", "+element.options.coordY+")")),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement.bind(this,n),key:element.key},react.createElement(point_editor,_extends({},element.options,{onChange:newProps=>{const elements=JSON.parse(JSON.stringify(this.props.elements));index_all.ZP.extend(elements[n].options,newProps),this.change({elements})}}))):"line"===element.type?react.createElement(src.F7,{title:react.createElement("span",null,"Line"," ",react.createElement(TeX,null,"("+element.options.startX+", "+element.options.startY+")")," ","to"," ",react.createElement(TeX,null,"("+element.options.endX+", "+element.options.endY+")")),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement.bind(this,n),key:element.key},react.createElement(line_editor,_extends({},element.options,{onChange:newProps=>{const elements=JSON.parse(JSON.stringify(this.props.elements));index_all.ZP.extend(elements[n].options,newProps),this.change({elements})}}))):"function"===element.type?react.createElement(src.F7,{title:react.createElement("span",null,"Function"," ",react.createElement(TeX,null,element.options.funcName+"(x) = "+element.options.value)),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement,key:element.key},react.createElement(function_editor,_extends({},element.options,{onChange:newProps=>{const elements=JSON.parse(JSON.stringify(this.props.elements));index_all.ZP.extend(elements[n].options,newProps),this.change({elements})}}))):"parametric"===element.type?react.createElement(src.F7,{title:react.createElement("span",null,"Parametric"),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement,key:element.key},react.createElement(parametric_editor,_extends({},element.options,{onChange:newProps=>{const elements=JSON.parse(JSON.stringify(this.props.elements));index_all.ZP.extend(elements[n].options,newProps),this.change({elements})}}))):"label"===element.type?react.createElement(src.F7,{title:react.createElement("span",null,"Label"," ",react.createElement(TeX,null,unescapeMathMode(element.options.label))," "),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement,key:element.key},react.createElement(label_editor,_extends({},element.options,{onChange:newProps=>{const elements=JSON.parse(JSON.stringify(this.props.elements));index_all.ZP.extend(elements[n].options,newProps),this.change({elements})}}))):"rectangle"===element.type?react.createElement(src.F7,{title:react.createElement("span",null,"Rectangle"," ",react.createElement(TeX,null,"("+element.options.coordX+", "+element.options.coordY+")")," — ",react.createElement(TeX,null,element.options.width+" \\times "+element.options.height)),onUp:0===n?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement,key:element.key},react.createElement(rectangle_editor,_extends({},element.options,{onChange:newProps=>{const elements=JSON.parse(JSON.stringify(this.props.elements));index_all.ZP.extend(elements[n].options,newProps),this.change({elements})}}))):void 0}),this),react.createElement("div",{className:"perseus-widget-interaction-editor-select-element"},react.createElement("select",{onChange:this._addNewElement},react.createElement("option",{value:""},"Add an element","…"),react.createElement("option",{disabled:!0},"--"),react.createElement("option",{value:"point"},"Point"),react.createElement("option",{value:"line"},"Line segment"),react.createElement("option",{value:"function"},"Function plot"),react.createElement("option",{value:"parametric"},"Parametric plot"),react.createElement("option",{value:"label"},"Label"),react.createElement("option",{value:"rectangle"},"Rectangle"),react.createElement("option",{value:"movable-point"},"★ Movable point"),react.createElement("option",{value:"movable-line"},"★ Movable line segment"))))}}const interaction_editor=InteractionEditor;try{InteractionEditor.displayName="InteractionEditor",InteractionEditor.__docgenInfo={description:"",displayName:"InteractionEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},elements:{defaultValue:null,description:"",name:"elements",required:!0,type:{name:"readonly any[]"}},graph:{defaultValue:null,description:"",name:"graph",required:!0,type:{name:"Graph"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/interaction-editor/interaction-editor.tsx#InteractionEditor"]={docgenInfo:InteractionEditor.__docgenInfo,name:"InteractionEditor",path:"packages/perseus-editor/src/widgets/interaction-editor/interaction-editor.tsx#InteractionEditor"})}catch(__react_docgen_typescript_loader_error){}const widgets_interaction_editor=interaction_editor}}]);