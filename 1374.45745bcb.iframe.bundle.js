"use strict";(self.webpackChunkperseus=self.webpackChunkperseus||[]).push([[1374],{"./packages/perseus-editor/src/components/form-wrapped-text-field.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),_khanacademy_wonder_blocks_color__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@khanacademy/wonder-blocks-color/dist/es/index.js"),aphrodite__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/aphrodite/lib/index.js"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/index.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}class FormWrappedTextField extends react__WEBPACK_IMPORTED_MODULE_3__.Component{state={focused:!1};handleBlur=e=>{const{onBlur}=this.props;onBlur&&onBlur(e),this.setState({focused:!1})};handleFocus=e=>{const{onFocus}=this.props;onFocus&&onFocus(e),this.setState({focused:!0})};disableDefault=e=>{e.preventDefault()};render(){const{forwardedRef,width,grow,shrink,icon,backgroundColor,focusBorderColor,borderColor,color,onSubmit,leftSideIcon,id,testId,type,labelMediumInputText,...allProps}=this.props,{focused}=this.state,extraStyles={},spanStyle=[styles.input,styles.container];width&&(extraStyles.width=width),grow&&(extraStyles.flexGrow=!0===grow?1:grow),(shrink||0===shrink)&&(extraStyles.flexShrink=!0===shrink?0:shrink),backgroundColor?extraStyles.backgroundColor=backgroundColor:spanStyle.push(styles.defaultBackground),color&&(extraStyles.color=color);const borderColorStyle=focused?focusBorderColor||_khanacademy_wonder_blocks_color__WEBPACK_IMPORTED_MODULE_1__.default.blue:borderColor||_khanacademy_wonder_blocks_color__WEBPACK_IMPORTED_MODULE_1__.default.offBlack16;extraStyles.border=`1px solid ${borderColorStyle}`;const wrappedIcon=icon&&react__WEBPACK_IMPORTED_MODULE_3__.createElement("span",{className:(0,aphrodite__WEBPACK_IMPORTED_MODULE_2__.css)(styles.icon)},icon),inputBase=labelMediumInputText?styles.labelMediumInputBase:styles.inputBase;return react__WEBPACK_IMPORTED_MODULE_3__.createElement("form",{className:(0,aphrodite__WEBPACK_IMPORTED_MODULE_2__.css)(...spanStyle),style:extraStyles,onSubmit:onSubmit||this.disableDefault},leftSideIcon&&wrappedIcon,react__WEBPACK_IMPORTED_MODULE_3__.createElement("input",_extends({},allProps,{onFocus:this.handleFocus,onBlur:this.handleBlur,type,className:(0,aphrodite__WEBPACK_IMPORTED_MODULE_2__.css)(inputBase),ref:forwardedRef,id,"data-test-id":testId})),!leftSideIcon&&wrappedIcon)}}const styles=aphrodite__WEBPACK_IMPORTED_MODULE_2__.StyleSheet.create({inputBase:{background:"inherit",border:"none",..._khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.globalStyles.typography.bodyXsmall,outline:"none","::placeholder":{color:_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.globalStyles.colors.gray41},width:"100%",color:"inherit",marginBottom:0,paddingLeft:0,boxShadow:"none",padding:0,margin:0},labelMediumInputBase:{background:"inherit",border:"none",outline:"none","::placeholder":{color:_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.globalStyles.colors.gray41},width:"100%",fontWeight:"normal",fontFamily:"Lato, san-serif",fontSize:"16px",lineHeight:"20px"},input:{height:40,borderRadius:_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.globalStyles.borderRadius,boxSizing:"border-box",padding:"8px 10px"},container:{display:"inline-flex",alignItems:"center",marginBottom:0},defaultBackground:{backgroundColor:_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.globalStyles.colors.white},icon:{display:"flex",alignItems:"center",justifyContent:"center"}}),__WEBPACK_DEFAULT_EXPORT__=react__WEBPACK_IMPORTED_MODULE_3__.forwardRef(((props,ref)=>react__WEBPACK_IMPORTED_MODULE_3__.createElement(FormWrappedTextField,_extends({},props,{forwardedRef:ref}))));try{formwrappedtextfield.displayName="formwrappedtextfield",formwrappedtextfield.__docgenInfo={description:"",displayName:"formwrappedtextfield",props:{id:{defaultValue:null,description:"",name:"id",required:!1,type:{name:"string"}},testId:{defaultValue:null,description:"",name:"testId",required:!1,type:{name:"string"}},type:{defaultValue:null,description:"",name:"type",required:!1,type:{name:"string"}},name:{defaultValue:null,description:"",name:"name",required:!1,type:{name:"string"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | number | readonly string[]"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number | readonly string[]"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:null,description:"",name:"autoFocus",required:!1,type:{name:"boolean"}},maxLength:{defaultValue:null,description:"",name:"maxLength",required:!1,type:{name:"number"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"enum",value:[{value:'"false"'},{value:'"true"'}]}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},width:{defaultValue:null,description:"",name:"width",required:!1,type:{name:"string | number"}},grow:{defaultValue:null,description:"",name:"grow",required:!1,type:{name:"number | boolean"}},shrink:{defaultValue:null,description:"",name:"shrink",required:!1,type:{name:"number | boolean"}},labelMediumInputText:{defaultValue:null,description:"",name:"labelMediumInputText",required:!1,type:{name:"boolean"}},icon:{defaultValue:null,description:"",name:"icon",required:!1,type:{name:"ReactElement<Props, string | JSXElementConstructor<any>>"}},leftSideIcon:{defaultValue:null,description:"",name:"leftSideIcon",required:!1,type:{name:"boolean"}},backgroundColor:{defaultValue:null,description:"",name:"backgroundColor",required:!1,type:{name:"string"}},focusBorderColor:{defaultValue:null,description:"",name:"focusBorderColor",required:!1,type:{name:"string"}},borderColor:{defaultValue:null,description:"",name:"borderColor",required:!1,type:{name:"string"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"string"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!1,type:{name:"((arg1: ChangeEvent<HTMLInputElement>) => unknown)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((arg1: ChangeEvent<HTMLInputElement>) => unknown)"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((arg1: ChangeEvent<HTMLInputElement>) => unknown)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((arg1: ChangeEvent<HTMLInputElement>) => unknown)"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((arg1: MouseEvent<HTMLInputElement, MouseEvent>) => unknown)"}},onKeyPress:{defaultValue:null,description:"",name:"onKeyPress",required:!1,type:{name:"((arg1: KeyboardEvent<HTMLInputElement>) => unknown)"}},onKeyDown:{defaultValue:null,description:"",name:"onKeyDown",required:!1,type:{name:"((arg1: KeyboardEvent<HTMLInputElement>) => unknown)"}},"aria-label":{defaultValue:null,description:"",name:"aria-label",required:!1,type:{name:"string"}},"aria-describedby":{defaultValue:null,description:"",name:"aria-describedby",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/components/form-wrapped-text-field.tsx#formwrappedtextfield"]={docgenInfo:formwrappedtextfield.__docgenInfo,name:"formwrappedtextfield",path:"packages/perseus-editor/src/components/form-wrapped-text-field.tsx#formwrappedtextfield"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/widgets/label-image/marker.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>Marker});var src=__webpack_require__("./packages/perseus/src/index.ts"),lib=__webpack_require__("./node_modules/aphrodite/lib/index.js"),react=__webpack_require__("./node_modules/react/index.js"),react_dom=__webpack_require__("./node_modules/react-dom/index.js");const{Icon}=src.components,{colors}=src.globalStyles;class Option extends react.Component{handleKeyDown(event){const{onDropdownClose}=this.props,pressedKey=event.key,focusedElement=event.target;"ArrowDown"===pressedKey&&focusedElement.nextSibling&&(event.preventDefault(),focusedElement.nextSibling.focus()),"ArrowUp"===pressedKey&&focusedElement.previousSibling&&(event.preventDefault(),focusedElement.previousSibling.focus()),"ArrowUp"===pressedKey&&!focusedElement.previousSibling&&onDropdownClose&&(event.preventDefault(),onDropdownClose()),"Escape"!==pressedKey&&"Tab"!==pressedKey||!onDropdownClose||onDropdownClose()}render(){const{selected,value,onClick,children,optionRenderer,disabled,hideFocusState,testId,ariaLabel}=this.props;return react.createElement("button",{ref:node=>this.node=node,value,role:"menuitemradio","aria-checked":selected,className:(0,lib.css)(styles.notAButton,disabled&&styles.cursorDefault,hideFocusState&&styles.noFocus),onClick:value=>{!disabled&&onClick&&onClick(value)},onKeyDown:event=>this.handleKeyDown(event),"aria-disabled":disabled,"aria-label":ariaLabel,"data-test-id":testId},optionRenderer&&optionRenderer(react.createElement(react.Fragment,null,children),value||"",selected||!1,disabled),!optionRenderer&&react.createElement("span",{className:(0,lib.css)(styles.option,selected&&styles.optionSelected,disabled&&styles.optionDisabled)},children,selected&&react.createElement("span",{className:(0,lib.css)(styles.check)},react.createElement(Icon,{icon:"M10,3.8C10,4,9.9,4.2,9.8,4.3L5.1,8.9L4.3,9.8C4.2,9.9,4,10,3.8,10\n S3.5,9.9,3.4,9.8L2.5,8.9L0.2,6.6C0.1,6.5,0,6.3,0,6.2s0.1-0.3,0.2-0.4\n l0.9-0.9c0.1-0.1,0.3-0.2,0.4-0.2s0.3,0.1,0.4,0.2l1.9,1.9l4.2-4.2c0.1\n -0.1,0.3-0.2,0.4-0.2c0.2,0,0.3,0.1,0.4,0.2l0.9,0.9C9.9,3.5,10,3.7,\n 10,3.8z"}))))}}class OptionGroup extends react.Component{componentDidMount(){this.focusedElement&&(component=>{const button=react_dom.findDOMNode(component);button.focus&&function focusWithChromeStickyFocusBugWorkaround(element){element.focus({preventScroll:!0})}(button)})(this.focusedElement)}render(){const{children,onSelected,selectedValues,optionRenderer,noMargin,onDropdownClose,hideFocusState}=this.props;return react.createElement("div",{style:{top},className:(0,lib.css)(styles.optionGroup,noMargin&&styles.optionGroupNoMargin)},react.Children.map(children,((child,index)=>{const selected=selectedValues.includes(child.props.value),reference=selected||0===index?node=>this.focusedElement=node:null;return react.cloneElement(child,{...child.props,key:index,selected,onClick:()=>onSelected(child.props.value),optionRenderer,ref:reference,onDropdownClose,hideFocusState})})))}}const styles=lib.StyleSheet.create({optionGroup:{margin:"4px 0"},optionGroupNoMargin:{margin:0},option:{display:"flex",flexDirection:"row",alignItems:"center",paddingLeft:32,paddingRight:32,height:30,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:colors.gray17,userSelect:"none",":hover":{backgroundColor:colors.gray95}},optionSelected:{backgroundColor:colors.gray95,color:"#11ACCD"},optionDisabled:{color:colors.gray76,":hover":{backgroundColor:"transparent"}},check:{position:"absolute",left:11},notAButton:{backgroundColor:"transparent",border:"none",display:"block",padding:0,margin:0,width:"100%",font:"inherit"},noFocus:{outline:"none"},cursorDefault:{cursor:"default"}}),dropdown_option=Option;try{OptionGroup.displayName="OptionGroup",OptionGroup.__docgenInfo={description:"",displayName:"OptionGroup",props:{onSelected:{defaultValue:null,description:"",name:"onSelected",required:!0,type:{name:"(value: string) => void"}},selectedValues:{defaultValue:null,description:"",name:"selectedValues",required:!0,type:{name:"string[]"}},optionRenderer:{defaultValue:null,description:"",name:"optionRenderer",required:!1,type:{name:"OptionRenderer"}},noMargin:{defaultValue:null,description:"",name:"noMargin",required:!1,type:{name:"boolean"}},onDropdownClose:{defaultValue:null,description:"",name:"onDropdownClose",required:!1,type:{name:"(() => void)"}},hideFocusState:{defaultValue:null,description:"",name:"hideFocusState",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/components/dropdown-option.tsx#OptionGroup"]={docgenInfo:OptionGroup.__docgenInfo,name:"OptionGroup",path:"packages/perseus-editor/src/components/dropdown-option.tsx#OptionGroup"})}catch(__react_docgen_typescript_loader_error){}try{Option.displayName="Option",Option.__docgenInfo={description:"",displayName:"Option",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}},optionRenderer:{defaultValue:null,description:"",name:"optionRenderer",required:!1,type:{name:"OptionRenderer"}},onDropdownClose:{defaultValue:null,description:"",name:"onDropdownClose",required:!1,type:{name:"(() => void)"}},hideFocusState:{defaultValue:null,description:"",name:"hideFocusState",required:!1,type:{name:"boolean"}},testId:{defaultValue:null,description:"",name:"testId",required:!1,type:{name:"string"}},ariaLabel:{defaultValue:null,description:"",name:"ariaLabel",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/components/dropdown-option.tsx#Option"]={docgenInfo:Option.__docgenInfo,name:"Option",path:"packages/perseus-editor/src/components/dropdown-option.tsx#Option"})}catch(__react_docgen_typescript_loader_error){}var form_wrapped_text_field=__webpack_require__("./packages/perseus-editor/src/components/form-wrapped-text-field.tsx");const{colors:marker_colors,borderRadius}=src.globalStyles;class Marker extends react.Component{constructor(props){super(props),this.state={showDropdown:!1}}componentDidMount(){document.addEventListener("click",this.handleClick,!0)}UNSAFE_componentWillReceiveProps(nextProps){const{answers}=this.props,filteredAnswers=answers.filter((answer=>nextProps.choices.includes(answer)));JSON.stringify(answers)!==JSON.stringify(filteredAnswers)&&setTimeout((()=>this.updateMarker({answers:filteredAnswers})))}componentWillUnmount(){document.removeEventListener("click",this.handleClick,!0)}openDropdown(){this.setState({showDropdown:!0})}updateMarker(props){const{answers,label,onChange,x,y}=this.props;onChange({answers,label,x,y,...props})}handleClick=e=>{const{showDropdown}=this.state;this._marker===e.target?this.setState({showDropdown:!showDropdown}):showDropdown&&this._marker&&!this._marker.contains(e.target)&&(e.stopPropagation(),this.setState({showDropdown:!1}))};handleLabelChange=e=>{this.updateMarker({label:e.target.value})};handleSelectAnswer=toggleAnswer=>{let{answers}=this.props;answers=answers.includes(toggleAnswer)?answers.filter((answer=>answer!==toggleAnswer)):[...answers,toggleAnswer],this.updateMarker({answers})};render(){const{answers,choices,label,onRemove,x,y}=this.props,{showDropdown}=this.state;return react.createElement("div",{className:(0,lib.css)(marker_styles.marker,answers.length>0&&marker_styles.markerWithAnswers,showDropdown&&marker_styles.markerSelected),ref:node=>this._marker=node,style:{left:`${x}%`,top:`${y}%`},title:"Click to select marker answers or to delete marker. Repositioning marker is not implemented."},showDropdown&&react.createElement("div",null,react.createElement("div",{className:(0,lib.css)(marker_styles.dropdownBody,marker_styles.dropdownPositionWithArrow)},react.createElement(dropdown_option,{value:"",onClick:()=>onRemove()},"Delete marker"),react.createElement("hr",{className:(0,lib.css)(marker_styles.dividerHorizontal)}),react.createElement(OptionGroup,{onSelected:this.handleSelectAnswer,selectedValues:answers},choices.map((choice=>react.createElement(dropdown_option,{key:choice,value:choice},choice)))),react.createElement("div",{className:(0,lib.css)(marker_styles.labelContainer)},react.createElement(form_wrapped_text_field.Z,{placeholder:"ARIA label (for screen readers)",onChange:this.handleLabelChange,value:label,width:"100%"})))))}}const marker_styles=lib.StyleSheet.create({marker:{position:"absolute",boxSizing:"content-box",width:16,height:16,marginLeft:-8,marginTop:-8,cursor:"pointer",background:"linear-gradient(to bottom, rgba(33, 36, 44, 0.2), rgba(33, 36, 44, 0.5))",border:"solid 2px #ffffff",borderRadius:16,boxShadow:"0 2px 10px 0 rgba(33, 36, 44, 0.1)"},markerSelected:{width:28,height:28,marginLeft:-12,marginTop:-12,border:"none",borderRadius:28,"::before":{content:"''",display:"block",width:20,height:20,marginLeft:2,marginTop:2,border:"solid 2px #ffffff",borderRadius:20}},markerWithAnswers:{background:"#1865f2"},dropdownPositionWithArrow:{left:46,bottom:-12,"::before":{content:"''",display:"block",position:"absolute",width:0,height:0,left:-16,bottom:8,borderRight:`solid 16px ${marker_colors.gray98}`,borderTop:"solid 16px transparent",borderBottom:"solid 16px transparent"}},labelContainer:{padding:4},dividerHorizontal:{height:0,margin:0,border:`solid ${marker_colors.gray85}`,borderWidth:"0 0 1px",boxShadow:"none"},dropdownBody:{position:"absolute",border:"solid 1px rgba(0, 0, 0, 0.1)",zIndex:src.w_.g5L,color:marker_colors.gray17,backgroundColor:marker_colors.gray98,borderRadius,maxHeight:320,cursor:"pointer"}});try{marker.displayName="marker",marker.__docgenInfo={description:"",displayName:"marker",props:{answers:{defaultValue:null,description:"",name:"answers",required:!0,type:{name:"readonly string[]"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},x:{defaultValue:null,description:"",name:"x",required:!0,type:{name:"number"}},y:{defaultValue:null,description:"",name:"y",required:!0,type:{name:"number"}},choices:{defaultValue:null,description:"",name:"choices",required:!0,type:{name:"readonly string[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(marker: MarkerType) => void"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/label-image/marker.tsx#marker"]={docgenInfo:marker.__docgenInfo,name:"marker",path:"packages/perseus-editor/src/widgets/label-image/marker.tsx#marker"})}catch(__react_docgen_typescript_loader_error){}}}]);