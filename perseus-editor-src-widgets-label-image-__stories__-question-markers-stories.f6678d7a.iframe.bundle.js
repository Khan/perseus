"use strict";(self.webpackChunkperseus=self.webpackChunkperseus||[]).push([[246],{"./packages/perseus-editor/src/widgets/label-image/__stories__/question-markers.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Empty:()=>Empty,Filled:()=>Filled,Interactive:()=>Interactive,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var aphrodite__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/aphrodite/lib/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_question_markers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/perseus-editor/src/widgets/label-image/question-markers.tsx");const __WEBPACK_DEFAULT_EXPORT__={title:"Perseus/Editor/Widgets/Label Image/Question Markers"},styles=aphrodite__WEBPACK_IMPORTED_MODULE_0__.StyleSheet.create({wrapper:{width:338}}),Wrapper=props=>react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:(0,aphrodite__WEBPACK_IMPORTED_MODULE_0__.css)(styles.wrapper)},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_question_markers__WEBPACK_IMPORTED_MODULE_2__.Z,props));class WithState extends react__WEBPACK_IMPORTED_MODULE_1__.Component{state={markers:[{answers:[],label:"",x:50,y:50}]};render(){const{markers}=this.state;return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:(0,aphrodite__WEBPACK_IMPORTED_MODULE_0__.css)(styles.wrapper)},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_question_markers__WEBPACK_IMPORTED_MODULE_2__.Z,{choices:["Lamborghini","BMW","Volkswagen","Fiat","Porsche","Ferrari"],imageUrl:"https://ka-perseus-images.s3.amazonaws.com/2ee5fc32e35c5178373b39fd304b325b2994c913.png",imageWidth:1280,imageHeight:1024,markers,onChange:markers=>this.setState({markers})}))}}const Empty=args=>{const props={choices:[],imageUrl:"",imageWidth:0,imageHeight:0,markers:[],onChange:()=>{}};return react__WEBPACK_IMPORTED_MODULE_1__.createElement(Wrapper,props)},Filled=args=>{const props={choices:[],imageUrl:"https://ka-perseus-images.s3.amazonaws.com/2ee5fc32e35c5178373b39fd304b325b2994c913.png",imageWidth:1280,imageHeight:1024,markers:[{answers:[],label:"",x:50,y:50}],onChange:()=>{}};return react__WEBPACK_IMPORTED_MODULE_1__.createElement(Wrapper,props)},Interactive=args=>react__WEBPACK_IMPORTED_MODULE_1__.createElement(WithState,null);Empty.parameters={...Empty.parameters,docs:{...Empty.parameters?.docs,source:{originalSource:'(args: StoryArgs): React.ReactElement => {\n  const props = ({\n    choices: [],\n    imageUrl: "",\n    imageWidth: 0,\n    imageHeight: 0,\n    markers: [],\n    onChange: () => {}\n  } as const);\n  return <Wrapper {...props} />;\n}',...Empty.parameters?.docs?.source}}},Filled.parameters={...Filled.parameters,docs:{...Filled.parameters?.docs,source:{originalSource:'(args: StoryArgs): React.ReactElement => {\n  const props = ({\n    choices: [],\n    imageUrl: "https://ka-perseus-images.s3.amazonaws.com/2ee5fc32e35c5178373b39fd304b325b2994c913.png",\n    imageWidth: 1280,\n    imageHeight: 1024,\n    markers: [{\n      answers: [],\n      label: "",\n      x: 50,\n      y: 50\n    }],\n    onChange: () => {}\n  } as const);\n  return <Wrapper {...props} />;\n}',...Filled.parameters?.docs?.source}}},Interactive.parameters={...Interactive.parameters,docs:{...Interactive.parameters?.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => {\n  return <WithState />;\n}",...Interactive.parameters?.docs?.source}}};const __namedExportsOrder=["Empty","Filled","Interactive"];try{Empty.displayName="Empty",Empty.__docgenInfo={description:"",displayName:"Empty",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/label-image/__stories__/question-markers.stories.tsx#Empty"]={docgenInfo:Empty.__docgenInfo,name:"Empty",path:"packages/perseus-editor/src/widgets/label-image/__stories__/question-markers.stories.tsx#Empty"})}catch(__react_docgen_typescript_loader_error){}try{Filled.displayName="Filled",Filled.__docgenInfo={description:"",displayName:"Filled",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/label-image/__stories__/question-markers.stories.tsx#Filled"]={docgenInfo:Filled.__docgenInfo,name:"Filled",path:"packages/perseus-editor/src/widgets/label-image/__stories__/question-markers.stories.tsx#Filled"})}catch(__react_docgen_typescript_loader_error){}try{Interactive.displayName="Interactive",Interactive.__docgenInfo={description:"",displayName:"Interactive",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/label-image/__stories__/question-markers.stories.tsx#Interactive"]={docgenInfo:Interactive.__docgenInfo,name:"Interactive",path:"packages/perseus-editor/src/widgets/label-image/__stories__/question-markers.stories.tsx#Interactive"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/widgets/label-image/question-markers.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>QuestionMarkers});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),aphrodite__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/aphrodite/lib/index.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),_marker__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/perseus-editor/src/widgets/label-image/marker.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const{colors,typography}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.globalStyles;class QuestionMarkers extends react__WEBPACK_IMPORTED_MODULE_2__.Component{_markers=[];openDropdownForMarkerIndices(indices){indices.forEach((index=>{this._markers[index]&&this._markers[index].openDropdown()}))}handleImageDoubleClick=e=>{e.preventDefault();const rect=e.currentTarget.getBoundingClientRect(),x=Math.round((e.clientX-rect.left)/rect.width*1e3)/10,y=Math.round((e.clientY-rect.top)/rect.height*1e3)/10,{markers,onChange}=this.props;onChange([...markers,{answers:[],label:"",x,y}])};render(){const{choices,imageUrl,imageWidth,imageHeight,markers,onChange}=this.props,staticUrl=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Dependencies.getDependencies().staticUrl;return react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:(0,aphrodite__WEBPACK_IMPORTED_MODULE_1__.css)(styles.title)},"Markers"),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:(0,aphrodite__WEBPACK_IMPORTED_MODULE_1__.css)(styles.subtitle)},imageUrl?react__WEBPACK_IMPORTED_MODULE_2__.createElement("span",null,"Double-click on the image to add a marker.",react__WEBPACK_IMPORTED_MODULE_2__.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_2__.createElement("br",null),"Markers are read by screen readers in the order that you add them here, so add in a logical order for the learner (e.g. sequentially, clockwise). You can test order by using keyboard tabbing."):"Upload an image to place markers."),imageUrl&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:(0,aphrodite__WEBPACK_IMPORTED_MODULE_1__.css)(styles.markersCanvas),style:{maxWidth:imageWidth,maxHeight:imageHeight}},react__WEBPACK_IMPORTED_MODULE_2__.createElement("img",{alt:"",className:(0,aphrodite__WEBPACK_IMPORTED_MODULE_1__.css)(styles.image),src:staticUrl(_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util.getRealImageUrl(imageUrl)),onDoubleClick:this.handleImageDoubleClick}),markers.map(((marker,index)=>react__WEBPACK_IMPORTED_MODULE_2__.createElement(_marker__WEBPACK_IMPORTED_MODULE_3__.Z,_extends({},marker,{choices,key:`${marker.x}.${marker.y}`,onChange:marker=>onChange([...markers.slice(0,index),marker,...markers.slice(index+1)]),onRemove:()=>onChange([...markers.slice(0,index),...markers.slice(index+1)]),ref:node=>this._markers[index]=node}))))))}}const styles=aphrodite__WEBPACK_IMPORTED_MODULE_1__.StyleSheet.create({title:{...typography.bodyXsmallBold,marginBottom:6,color:colors.gray17},subtitle:{...typography.labelSmall,marginBottom:12,color:colors.gray68},markersCanvas:{position:"relative",border:"solid 1px rgba(33, 36, 44, 0.16)"},image:{display:"block",maxWidth:"100%"}});try{questionmarkers.displayName="questionmarkers",questionmarkers.__docgenInfo={description:"",displayName:"questionmarkers",props:{choices:{defaultValue:null,description:"",name:"choices",required:!0,type:{name:"readonly string[]"}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}},imageWidth:{defaultValue:null,description:"",name:"imageWidth",required:!0,type:{name:"number"}},imageHeight:{defaultValue:null,description:"",name:"imageHeight",required:!0,type:{name:"number"}},markers:{defaultValue:null,description:"",name:"markers",required:!0,type:{name:"readonly MarkerType[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(markers: readonly MarkerType[]) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/label-image/question-markers.tsx#questionmarkers"]={docgenInfo:questionmarkers.__docgenInfo,name:"questionmarkers",path:"packages/perseus-editor/src/widgets/label-image/question-markers.tsx#questionmarkers"})}catch(__react_docgen_typescript_loader_error){}}}]);