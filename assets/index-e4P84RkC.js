import{r as o,a as C}from"./index-4g5l5LRQ.js";import{l as m}from"./index-awljIyHI.js";function c(){return c=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},c.apply(this,arguments)}function v(r,e){if(r==null)return{};var t={},n=Object.keys(r),s,a;for(a=0;a<n.length;a++)s=n[a],!(e.indexOf(s)>=0)&&(t[s]=r[s]);return t}function w(r){const e=[];if(r)if(Array.isArray(r))for(const t of r)e.push(...w(t));else e.push(r);else return e;return e}function _(r){const e=[],t=[];if(!r)return{style:{},className:""};const n=typeof global<"u"&&global.SNAPSHOT_INLINE_APHRODITE;w(r).forEach(a=>{const i=a._definition;if(i!=null)if(n){const d={};for(const[h,u]of Object.entries(i))d[h.replace(/-[a-z]/g,g=>g[1].toUpperCase())]=u;t.push(d)}else e.push(a);else t.push(a)});const s=Object.assign({},...t);if(t.length>0&&!n){const a=m.StyleSheet.create({inlineStyles:s});e.push(a.inlineStyles)}return{style:n?s:{},className:m.css(...e)}}const N=["children","style","tag","testId"],F=/^h[1-6]$/,b=m.StyleSheet.create({text:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},header:{marginTop:0,marginBottom:0}}),H=o.forwardRef(function(e,t){let{children:n,style:s,tag:a="span",testId:i}=e,d=v(e,N);const h=F.test(a),u=_([b.text,h&&b.header,s]),g=d.className?[d.className,u.className].join(" "):u.className;return o.createElement(a,c({},d,{style:u.style,className:g,"data-testid":i,ref:t}),n)}),O=["className","style"];function y(r,e){return o.forwardRef((t,n)=>{const{className:s,style:a}=t,i=v(t,O),d=typeof r=="string"?P[r]:null,{className:h,style:u}=_([d,e,a]);return o.createElement(r,c({},i,{ref:n,className:[h,s].filter(Boolean).join(" "),style:u}))})}const P=m.StyleSheet.create({button:{margin:0,"::-moz-focus-inner":{border:0}}}),T=["testId","tag"],p=m.StyleSheet.create({default:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexDirection:"column",margin:0,padding:0,position:"relative",zIndex:0,minHeight:0,minWidth:0}}),$=y("div",p.default),j=y("article",p.default),D=y("aside",p.default),q=y("nav",p.default),A=y("section",p.default),M=o.forwardRef(function(e,t){const{testId:n,tag:s="div"}=e,a=v(e,T),i=c({},a,{"data-testid":n});switch(s){case"article":return o.createElement(j,c({},i,{ref:t}));case"aside":return o.createElement(D,c({},i,{ref:t}));case"nav":return o.createElement(q,c({},i,{ref:t}));case"section":return o.createElement(A,c({},i,{ref:t}));case"div":return o.createElement($,c({},i,{ref:t}));default:throw Error(`${s} is not an allowed value for the 'tag' prop`)}});let l=function(r){return r.Root="root",r.Initial="initial",r.Standard="standard",r}({});const f=o.createContext(l.Root);f.displayName="RenderStateContext";class W extends o.Component{constructor(...e){super(...e),this.state={mounted:!1},this._isTheRootComponent=!1}componentDidMount(){this._isTheRootComponent&&this.setState({mounted:!0})}_renderAsRootComponent(){const{mounted:e}=this.state,{children:t,placeholder:n}=this.props;return this._isTheRootComponent=!0,e?o.createElement(f.Provider,{value:l.Standard},t()):n?o.createElement(f.Provider,{value:l.Initial},n()):null}_maybeRender(e){const{children:t,placeholder:n}=this.props;switch(e){case l.Root:return this._renderAsRootComponent();case l.Initial:return n?n():null;case l.Standard:return t()}{var s;return console.log(`We got a render state we don't understand: "${(s=JSON.stringify(e))!=null?s:""}"`),this._maybeRender(l.Root)}}render(){return o.createElement(f.Consumer,null,e=>this._maybeRender(e))}}class S{constructor(e){this._uniqueFactoryName=void 0,this.get=n=>{const s=n.toLowerCase();if(!this._hasValidIdChars(n))throw new Error(`Invalid identifier key: ${n}`);return`${this._uniqueFactoryName}-${s}`},e=typeof e=="string"?e:"";const t=e.toLowerCase();if(!this._hasValidIdChars(t))throw new Error(`Invalid factory scope: ${e}`);this._uniqueFactoryName=`uid-${t}-${S._factoryUniquenessCounter++}`}_hasValidIdChars(e){if(typeof e!="string")return!1;const t=e.replace(/[^\d\w-]/g,"-");return e===t}}S._factoryUniquenessCounter=0;class R{get(e){return e}}R.Default=new R;var x=R.Default;class z extends o.Component{constructor(...e){super(...e),this._idFactory=void 0}_performRender(e){const{children:t,mockOnFirstRender:n,scope:s}=this.props;return e?n?t(x):null:(this._idFactory||(this._idFactory=new S(s)),t(this._idFactory))}render(){return o.createElement(W,{placeholder:()=>this._performRender(!0)},()=>this._performRender(!1))}}class I extends o.Component{renderChildren(e){const{id:t,children:n}=this.props,s=e?e.get(I.defaultId):t;if(!s)throw new Error("Did not get an identifier factory nor a id prop");return n(s)}render(){const{id:e,scope:t}=this.props;return e?this.renderChildren():o.createElement(z,{scope:t,mockOnFirstRender:!0},n=>this.renderChildren(n))}}I.defaultId="wb-id";const E=()=>o.useContext(f),B=r=>{const e=E(),t=o.useRef(null);if(e===l.Root)throw new Error("Components using useUniqueIdWithMock() should be descendants of <RenderStateRoot>");return e===l.Initial?x:(t.current||(t.current=new S(r)),t.current)};function K(r){const e=o.useRef(r);return e.current=r,e}const{useEffect:U,useState:L}=C,G=({children:r,throwIfNested:e=!0})=>{const[t,n]=L(!0),s=E();if(U(()=>{n(!1)},[]),s!==l.Root){if(e)throw new Error("There's already a <RenderStateRoot> above this instance in the render tree.  This instance should be removed.");return o.createElement(o.Fragment,null,r)}const a=t?l.Initial:l.Standard;return o.createElement(f.Provider,{value:a},r)};export{I,G as R,H as T,z as U,M as V,y as a,K as b,B as u};
