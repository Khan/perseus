var G=Object.defineProperty;var J=(t,r,e)=>r in t?G(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var y=(t,r,e)=>(J(t,typeof r!="symbol"?r+"":r,e),e);import{j as s}from"./jsx-runtime-BT65X5dW.js";import{_ as R,b as I,V as S,a as K,T as Q}from"./index-BbSJVDiq.js";import{a as X}from"./index-CYkCOiVy.js";import{P as Y}from"./index-DqLa1jFt.js";import{r as o,a as Z}from"./index-C6mWTJJr.js";import{n as p}from"./no-important-DlFk8a1I.js";import{a as b,e as x,s as j,f as _,c as ee}from"./index-B7Lkas_q.js";import{a as te,b as W}from"./index-B3d1jNQR.js";import{w as re}from"./warning-circle-BLJ1dLdU.js";import{a as se}from"./i18n-context-BT3CWGFO.js";import{R as ne}from"./renderer-Bcffh0S1.js";const ae=""+new URL("warning-circle-bold-Ch9vbkOR.svg",import.meta.url).href;function F(t){const r=[];if(t)if(Array.isArray(t))for(const e of t)r.push(...F(e));else r.push(t);else return r;return r}function q(t){const r=[],e=[];if(!t)return{style:{},className:""};const i=typeof global<"u"&&global.SNAPSHOT_INLINE_APHRODITE;F(t).forEach(n=>{const a=n._definition;if(a!=null)if(i){const l={};for(const[u,m]of Object.entries(a))l[u.replace(/-[a-z]/g,h=>h[1].toUpperCase())]=m;e.push(l)}else r.push(n);else e.push(n)});const c=Object.assign({},...e);if(e.length>0&&!i){const n=p.StyleSheet.create({inlineStyles:c});r.push(n.inlineStyles)}return{style:i?c:{},className:p.css(...r)}}const oe=["children","style","tag","testId"],ie=/^h[1-6]$/,T=p.StyleSheet.create({text:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},header:{marginTop:0,marginBottom:0}}),Te=o.forwardRef(function(r,e){let{children:i,style:c,tag:n="span",testId:a}=r,l=R(r,oe);const u=ie.test(n),m=q([T.text,u&&T.header,c]),h=l.className?[l.className,m.className].join(" "):m.className;return o.createElement(n,I({},l,{style:m.style,className:h,"data-testid":a,ref:e}),i)}),le=["className","style"];function V(t,r){return o.forwardRef((e,i)=>{const c=e,{className:n,style:a}=c,l=R(c,le),u=typeof t=="string"?ce[t]:null,{className:m,style:h}=q([u,r,a]);return o.createElement(t,I({},l,{ref:i,className:[m,n].filter(Boolean).join(" "),style:h}))})}const ce=p.StyleSheet.create({button:{margin:0,"::-moz-focus-inner":{border:0}}}),de=["testId","tag"],ue=p.StyleSheet.create({default:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexDirection:"column",margin:0,padding:0,position:"relative",zIndex:0,minHeight:0,minWidth:0}}),ze=o.forwardRef(function(r,e){const{testId:i,tag:c="div"}=r,n=R(r,de),a=I({},n,{"data-testid":i}),l=o.useMemo(()=>V(c,ue.default),[c]);return o.createElement(l,I({},a,{ref:e}))});(function(t){return t.Initial="initial",t.Standard="standard",t})({});let N=function(t){return t.Root="root",t.Initial="initial",t.Standard="standard",t}({});const k=o.createContext(N.Root);k.displayName="RenderStateContext";const{useEffect:me,useState:he,useContext:pe}=Z,Fe=({children:t,throwIfNested:r=!0})=>{const[e,i]=he(!0),c=pe(k);if(me(()=>{i(!1)},[]),c!==N.Root){if(r)throw new Error("There's already a <RenderStateRoot> above this instance in the render tree.  This instance should be removed.");return o.createElement(o.Fragment,null,t)}const n=e?N.Initial:N.Standard;return o.createElement(k.Provider,{value:n},t)},qe={enter:"Enter",space:" "},fe=t=>({small:16,medium:24,large:48,xlarge:96})[t],ge=["color","icon","size","style","testId","className","role"],ye=V("span"),B=o.forwardRef(function(r,e){const{color:i="currentColor",icon:c,size:n="small",style:a,testId:l,className:u,role:m}=r,h=R(r,ge),f=fe(n),w=`${u??""}`,C=xe(i,f);return o.createElement(ye,I({},h,{className:w,style:[v.svg,C.icon,{maskImage:`url(${c})`},a],"data-testid":l,ref:e,role:m??h["aria-label"]?"img":void 0}))}),z={},xe=(t,r)=>{const e=`${t}-${r}`;if(v[e])return v[e];const i={icon:{backgroundColor:t,width:r,height:r}};return z[e]=p.StyleSheet.create(i),z[e]},v=p.StyleSheet.create({svg:{display:"inline-block",verticalAlign:"text-bottom",flexShrink:0,flexGrow:0,maskSize:"100%",maskRepeat:"no-repeat",maskPosition:"center"}});B.displayName="PhosphorIcon";const be={errorIconAriaLabel:"Error:"},Se=K("span");function Ie(t){const{field:r,styles:e,label:i,id:c,required:n,testId:a,description:l,errorMessage:u,labels:m=be}=t,h=o.useId(),f=c??`${h}-labeled-field`,w=`${f}-label`,C=`${f}-description`,L=`${f}-field`,E=`${f}-error`,O=!!n||!!r.props.required,P=!!u||!!r.props.error;function A(){const H=s.jsxs(Se,{style:[d.textWordBreak,d.required],"aria-hidden":!0,children:[" ","*"]});return s.jsx(o.Fragment,{children:s.jsxs(te,{style:[d.textWordBreak,d.label,l?d.labelWithDescription:d.labelWithNoDescription,e==null?void 0:e.label],tag:"label",htmlFor:L,testId:a&&`${a}-label`,id:w,children:[i,O&&H]})})}function D(){return l?s.jsx(o.Fragment,{children:s.jsx(W,{style:[d.textWordBreak,d.description,e==null?void 0:e.description],testId:a&&`${a}-description`,id:C,children:l})}):null}function U(){return s.jsx(o.Fragment,{children:s.jsx(S,{style:[d.errorSection,u?d.errorSectionWithContent:void 0,e==null?void 0:e.error],id:E,testId:a&&`${a}-error`,"aria-live":"assertive","aria-atomic":"true",children:u&&s.jsxs(s.Fragment,{children:[s.jsx(B,{icon:ae,style:[d.errorIcon,d.error],role:"img","aria-label":m.errorIconAriaLabel}),s.jsx(W,{style:[d.textWordBreak,d.errorMessage,d.error],children:u})]})})})}function M(){return o.cloneElement(r,{id:L,"aria-describedby":[u&&E,l&&C].filter(Boolean).join(" "),required:n||r.props.required,error:P,testId:a?`${a}-field`:void 0})}return s.jsxs(S,{style:e==null?void 0:e.root,children:[A(),D(),M(),U()]})}const d=p.StyleSheet.create({label:{color:b.text.primary},labelWithDescription:{paddingBlockEnd:x.size_040},labelWithNoDescription:{paddingBlockEnd:x.size_120},description:{color:b.text.secondary,paddingBlockEnd:x.size_120},errorSection:{flexDirection:"row",gap:x.size_080},errorSectionWithContent:{paddingBlockStart:x.size_120},error:{color:b.status.critical.foreground},errorIcon:{marginTop:"1px"},errorMessage:{minWidth:"0"},required:{color:b.status.critical.foreground},textWordBreak:{overflowWrap:"break-word"}});class $ extends o.Component{constructor(){super(...arguments);y(this,"state",{currentValue:""});y(this,"characterCount",()=>this.state.currentValue.replace(/\n/g,"").length);y(this,"handleChange",e=>{this.setState({currentValue:e})})}getUserInput(){return{currentValue:this.state.currentValue}}isOverLimit(){return!this.props.allowUnlimitedCharacters&&this.characterCount()>this.props.characterLimit}renderCharacterCount(){if(this.props.allowUnlimitedCharacters)return null;const e=this.context.strings.characterCount({used:this.characterCount(),num:this.props.characterLimit});return s.jsx(S,{children:s.jsxs(Q,{role:"status",style:[g.characterCountText,this.isOverLimit()?g.overCharacterLimit:void 0],children:[this.isOverLimit()&&s.jsx(Y,{icon:re,size:"small",style:g.warningCircleIcon}),e]})})}render(){return s.jsxs(S,{style:g.container,className:"free-response",children:[s.jsx(Ie,{label:s.jsx(S,{className:"free-response-question",children:s.jsx(ne,{content:this.props.question,strings:this.context.strings})}),field:s.jsx(X,{error:this.isOverLimit(),onChange:this.handleChange,placeholder:this.props.placeholder,style:g.textarea,value:this.state.currentValue}),styles:{label:g.questionLabel}}),this.renderCharacterCount()]})}}y($,"contextType",se);const Ve={name:"free-response",accessible:!0,displayName:"Free Response",widget:$,hidden:!0},g=p.StyleSheet.create({container:{gap:j.xSmall_8},characterCountText:{color:b.text.secondary,fontSize:_.size.small},overCharacterLimit:{color:ee.red},questionLabel:{fontWeight:_.weight.bold},textarea:{padding:j.medium_16},warningCircleIcon:{marginInlineEnd:j.xSmall_8}});$.__docgenInfo={description:"",methods:[{name:"characterCount",docblock:null,modifiers:[],params:[],returns:null},{name:"getUserInput",docblock:null,modifiers:[],params:[],returns:{type:{name:"signature",type:"object",raw:`{
    currentValue: string;
}`,signature:{properties:[{key:"currentValue",value:{name:"string",required:!0}}]}}}},{name:"handleChange",docblock:null,modifiers:[],params:[{name:"newValue",optional:!1,type:{name:"string"}}],returns:null},{name:"isOverLimit",docblock:null,modifiers:[],params:[],returns:null},{name:"renderCharacterCount",docblock:null,modifiers:[],params:[],returns:{type:{name:"ReactReactNode",raw:"React.ReactNode"}}}],displayName:"FreeResponse"};export{$ as F,Ie as L,B as P,Fe as R,Te as T,ze as V,V as a,Ve as b,qe as k};
