import{j as p}from"./jsx-runtime-63Ea5SlK.js";import{_ as i,$ as f}from"./jquery-yG1GhClm.js";import{P as u}from"./index-o42urCig.js";import{r as m}from"./index-6oxdNXpR.js";import{F as l}from"./index-9gkyvru-.js";const c={};function d(a){if(!c[a]){const t=f("<span>").text(a).appendTo("body");c[a]=t.width()+5,t.remove()}return c[a]}const r=class r extends m.Component{constructor(){super(...arguments),this.state={items:this.props.options.concat("")},this.onChange=(t,o)=>{let s=i.clone(this.state.items);s[t]=o.target.value,t===s.length-1&&(s=s.concat("")),this.setState({items:s}),this.props.onChange(i.compact(s))},this.onKeyDown=(t,o)=>{const s=o.nativeEvent.keyCode;if(s===8&&this.state.items[t]===""){o.preventDefault();const e=i.clone(this.state.items),n=t===0?0:t-1;t===e.length-1&&(t===0||e[n]!=="")?l.findDOMNode(this.refs["input_"+n]).focus():(e.splice(t,1),this.setState({items:e},function(){l.findDOMNode(this.refs["input_"+n]).focus()}))}else if(s===8&&this.state.items[t].length===1&&t===this.state.items.length-2){o.preventDefault();const e=i.clone(this.state.items);e.splice(t,1),this.setState({items:e}),this.props.onChange(i.compact(e))}else if(s===13){o.preventDefault();const e=i.clone(this.state.items),n=t+1;t===e.length-2?l.findDOMNode(this.refs["input_"+n]).focus():(e.splice(n,0,""),this.setState({items:e},function(){l.findDOMNode(this.refs["input_"+n]).focus()}))}}}UNSAFE_componentWillReceiveProps(t){this.setState({items:t.options.concat("")})}render(){const t=["perseus-text-list-editor","perseus-clearfix","layout-"+this.props.layout].join(" "),o=i.map(this.state.items,function(s,e){return p.jsx("li",{children:p.jsx("input",{ref:"input_"+e,type:"text",value:s,onChange:this.onChange.bind(this,e),onKeyDown:this.onKeyDown.bind(this,e),style:{width:d(s)}})},e)},this);return p.jsx("ul",{className:t,children:o})}};r.propTypes={options:u.array,layout:u.oneOf(["horizontal","vertical"]),onChange:u.func.isRequired},r.defaultProps={options:[],layout:"horizontal"};let h=r;h.__docgenInfo={description:"",methods:[{name:"onChange",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null},{name:"event",optional:!1,type:null}],returns:null},{name:"onKeyDown",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null},{name:"event",optional:!1,type:null}],returns:null}],displayName:"TextListEditor",props:{options:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"array"},required:!1},layout:{defaultValue:{value:'"horizontal"',computed:!1},description:"",type:{name:"enum",value:[{value:'"horizontal"',computed:!1},{value:'"vertical"',computed:!1}]},required:!1},onChange:{description:"",type:{name:"func"},required:!0}}};export{h as T};
