import{a as b,j as a,F as S}from"./jsx-runtime-5BUNAZ9W.js";import{o as k,z as D}from"./article-renderer-5OJBCfzT.js";import"./jquery-yG1GhClm.js";import"./util-KY8kJaBW.js";import"./version-akiLXZts.js";import"./dependencies-9B_Bv_mA.js";import"./perseus-api-GqFoxb6z.js";import"./multi-renderer-q7RM_s5L.js";import"./hints-renderer-iCAhrl75.js";import"./renderer-zs11neBD.js";import"./base-radio-LpW5mNw9.js";import"./button-group-KR3umc1e.js";import"./graph-VKYZ1zR1.js";import"./svg-image-UfCByHtE.js";import"./hud-CJYktPgf.js";import"./icon-TA3bBVIW.js";import"./index-8nUh1h5D.js";import"./inline-icon-QIU9thzn.js";import"./math-input-6SkbBwHq.js";import"./multi-button-group-AxfQn4Cq.js";import"./number-input-CBpHDTnb.js";import"./range-input-pIZWHWbz.js";import"./text-input-wkUsDgzz.js";import"./text-list-editor--7RKQsFY.js";import"./i18n-context-5R-kLn05.js";import{l as s}from"./index-awljIyHI.js";import{r as u}from"./index-4g5l5LRQ.js";import{c as x}from"./components-4f87eP1B.js";import{R as E}from"./index-jmm5gWkb.js";import{f as T}from"./util--MgOawjh.js";import{F as A}from"./form-wrapped-text-field-99Ltr1zS.js";const{Icon:M}=x,{colors:g}=k,N=h=>{const e=E.findDOMNode(h);e.focus&&T(e)},q=`M10,3.8C10,4,9.9,4.2,9.8,4.3L5.1,8.9L4.3,9.8C4.2,9.9,4,10,3.8,10
 S3.5,9.9,3.4,9.8L2.5,8.9L0.2,6.6C0.1,6.5,0,6.3,0,6.2s0.1-0.3,0.2-0.4
 l0.9-0.9c0.1-0.1,0.3-0.2,0.4-0.2s0.3,0.1,0.4,0.2l1.9,1.9l4.2-4.2c0.1
 -0.1,0.3-0.2,0.4-0.2c0.2,0,0.3,0.1,0.4,0.2l0.9,0.9C9.9,3.5,10,3.7,
 10,3.8z`,L=30;class w extends u.Component{handleKeyDown(t){const{onDropdownClose:e}=this.props,n=t.key,r=t.target;n==="ArrowDown"&&r.nextSibling&&(t.preventDefault(),r.nextSibling.focus()),n==="ArrowUp"&&r.previousSibling&&(t.preventDefault(),r.previousSibling.focus()),n==="ArrowUp"&&!r.previousSibling&&e&&(t.preventDefault(),e()),(n==="Escape"||n==="Tab")&&e&&e()}render(){const{selected:t,value:e,onClick:n,children:r,optionRenderer:l,disabled:i,hideFocusState:m,testId:o,ariaLabel:f}=this.props;return b("button",{ref:p=>this.node=p,value:e,role:"menuitemradio","aria-checked":t,className:s.css(d.notAButton,i&&d.cursorDefault,m&&d.noFocus),onClick:p=>{!i&&n&&n(p)},onKeyDown:p=>this.handleKeyDown(p),"aria-disabled":i,"aria-label":f,"data-testid":o,children:[l&&l(a(S,{children:r}),e||"",t||!1,i),!l&&b("span",{className:s.css(d.option,t&&d.optionSelected,i&&d.optionDisabled),children:[r,t&&a("span",{className:s.css(d.check),children:a(M,{icon:q})})]})]})}}class R extends u.Component{componentDidMount(){this.focusedElement&&N(this.focusedElement)}render(){const{children:t,onSelected:e,selectedValues:n,optionRenderer:r,noMargin:l,onDropdownClose:i,hideFocusState:m}=this.props;return a("div",{style:{top},className:s.css(d.optionGroup,l&&d.optionGroupNoMargin),children:u.Children.map(t,(o,f)=>{const p=n.includes(o.props.value),v=p||f===0?C=>this.focusedElement=C:null;return u.cloneElement(o,{...o.props,key:f,selected:p,onClick:()=>e(o.props.value),optionRenderer:r,ref:v,onDropdownClose:i,hideFocusState:m})})})}}const d=s.StyleSheet.create({optionGroup:{margin:"4px 0"},optionGroupNoMargin:{margin:0},option:{display:"flex",flexDirection:"row",alignItems:"center",paddingLeft:32,paddingRight:32,height:L,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:g.gray17,userSelect:"none",":hover":{backgroundColor:g.gray95}},optionSelected:{backgroundColor:g.gray95,color:"#11ACCD"},optionDisabled:{color:g.gray76,":hover":{backgroundColor:"transparent"}},check:{position:"absolute",left:11},notAButton:{backgroundColor:"transparent",border:"none",display:"block",padding:0,margin:0,width:"100%",font:"inherit"},noFocus:{outline:"none"},cursorDefault:{cursor:"default"}});R.__docgenInfo={description:"",methods:[],displayName:"OptionGroup",props:{onSelected:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},children:{required:!1,tsType:{name:"Array",elements:[{name:"ReactReactElement",raw:"React.ReactElement<React.ComponentProps<typeof Option>>",elements:[{name:"ReactComponentProps",raw:"React.ComponentProps<typeof Option>",elements:[{name:"Option"}]}]}],raw:"Array<React.ReactElement<React.ComponentProps<typeof Option>>>"},description:""},selectedValues:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},description:""},optionRenderer:{required:!1,tsType:{name:"signature",type:"function",raw:`(
    children: React.ReactElement<any> | null | undefined,
    value: string,
    selected: boolean,
    disabled?: boolean,
) => React.ReactElement<any>`,signature:{arguments:[{type:{name:"union",raw:"React.ReactElement<any> | null | undefined",elements:[{name:"ReactReactElement",raw:"React.ReactElement<any>",elements:[{name:"any"}]},{name:"null"},{name:"undefined"}]},name:"children"},{type:{name:"string"},name:"value"},{type:{name:"boolean"},name:"selected"},{type:{name:"boolean"},name:"disabled"}],return:{name:"ReactReactElement",raw:"React.ReactElement<any>",elements:[{name:"any"}]}}},description:""},noMargin:{required:!1,tsType:{name:"boolean"},description:""},onDropdownClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},hideFocusState:{required:!1,tsType:{name:"boolean"},description:""}}};w.__docgenInfo={description:"",methods:[{name:"handleKeyDown",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:{name:"any"}}],returns:{type:{name:"void"}}}],displayName:"Option",props:{value:{required:!0,tsType:{name:"string"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},selected:{required:!1,tsType:{name:"boolean"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},optionRenderer:{required:!1,tsType:{name:"signature",type:"function",raw:`(
    children: React.ReactElement<any> | null | undefined,
    value: string,
    selected: boolean,
    disabled?: boolean,
) => React.ReactElement<any>`,signature:{arguments:[{type:{name:"union",raw:"React.ReactElement<any> | null | undefined",elements:[{name:"ReactReactElement",raw:"React.ReactElement<any>",elements:[{name:"any"}]},{name:"null"},{name:"undefined"}]},name:"children"},{type:{name:"string"},name:"value"},{type:{name:"boolean"},name:"selected"},{type:{name:"boolean"},name:"disabled"}],return:{name:"ReactReactElement",raw:"React.ReactElement<any>",elements:[{name:"any"}]}}},description:""},onDropdownClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},hideFocusState:{required:!1,tsType:{name:"boolean"},description:""},testId:{required:!1,tsType:{name:"string"},description:""},ariaLabel:{required:!1,tsType:{name:"string"},description:""}}};const{colors:y,borderRadius:O}=k;class F extends u.Component{constructor(t){super(t),this.handleClick=e=>{const{showDropdown:n}=this.state;this._marker===e.target?this.setState({showDropdown:!n}):n&&this._marker&&!this._marker.contains(e.target)&&(e.stopPropagation(),this.setState({showDropdown:!1}))},this.handleLabelChange=e=>{this.updateMarker({label:e.target.value})},this.handleSelectAnswer=e=>{let{answers:n}=this.props;n.includes(e)?n=n.filter(r=>r!==e):n=[...n,e],this.updateMarker({answers:n})},this.state={showDropdown:!1}}componentDidMount(){document.addEventListener("click",this.handleClick,!0)}UNSAFE_componentWillReceiveProps(t){const{answers:e}=this.props,n=e.filter(r=>t.choices.includes(r));JSON.stringify(e)!==JSON.stringify(n)&&setTimeout(()=>this.updateMarker({answers:n}))}componentWillUnmount(){document.removeEventListener("click",this.handleClick,!0)}openDropdown(){this.setState({showDropdown:!0})}updateMarker(t){const{answers:e,label:n,onChange:r,x:l,y:i}=this.props;r({answers:e,label:n,x:l,y:i,...t})}render(){const{answers:t,choices:e,label:n,onRemove:r,x:l,y:i}=this.props,{showDropdown:m}=this.state;return a("div",{className:s.css(c.marker,t.length>0&&c.markerWithAnswers,m&&c.markerSelected),ref:o=>this._marker=o,style:{left:`${l}%`,top:`${i}%`},title:"Click to select marker answers or to delete marker. Repositioning marker is not implemented.",children:m&&a("div",{children:b("div",{className:s.css(c.dropdownBody,c.dropdownPositionWithArrow),children:[a(w,{value:"",onClick:()=>r(),children:"Delete marker"}),a("hr",{className:s.css(c.dividerHorizontal)}),a(R,{onSelected:this.handleSelectAnswer,selectedValues:t,children:e.map(o=>a(w,{value:o,children:o},o))}),a("div",{className:s.css(c.labelContainer),children:a(A,{placeholder:"ARIA label (for screen readers)",onChange:this.handleLabelChange,value:n,width:"100%"})})]})})})}}const c=s.StyleSheet.create({marker:{position:"absolute",boxSizing:"content-box",width:16,height:16,marginLeft:-8,marginTop:-8,cursor:"pointer",background:"linear-gradient(to bottom, rgba(33, 36, 44, 0.2), rgba(33, 36, 44, 0.5))",border:"solid 2px #ffffff",borderRadius:16,boxShadow:"0 2px 10px 0 rgba(33, 36, 44, 0.1)"},markerSelected:{width:28,height:28,marginLeft:-12,marginTop:-12,border:"none",borderRadius:28,"::before":{content:"''",display:"block",width:20,height:20,marginLeft:2,marginTop:2,border:"solid 2px #ffffff",borderRadius:20}},markerWithAnswers:{background:"#1865f2"},dropdownPositionWithArrow:{left:46,bottom:-12,"::before":{content:"''",display:"block",position:"absolute",width:0,height:0,left:-16,bottom:8,borderRight:`solid 16px ${y.gray98}`,borderTop:"solid 16px transparent",borderBottom:"solid 16px transparent"}},labelContainer:{padding:4},dividerHorizontal:{height:0,margin:0,border:`solid ${y.gray85}`,borderWidth:"0 0 1px",boxShadow:"none"},dropdownBody:{position:"absolute",border:"solid 1px rgba(0, 0, 0, 0.1)",zIndex:D,color:y.gray17,backgroundColor:y.gray98,borderRadius:O,maxHeight:320,cursor:"pointer"}});F.__docgenInfo={description:"",methods:[{name:"openDropdown",docblock:null,modifiers:[],params:[],returns:null},{name:"updateMarker",docblock:null,modifiers:[],params:[{name:"props",optional:!1,type:{name:"any"}}],returns:null},{name:"handleClick",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"MouseEvent",alias:"MouseEvent"}}],returns:null},{name:"handleLabelChange",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"handleSelectAnswer",docblock:null,modifiers:[],params:[{name:"toggleAnswer",optional:!1,type:{name:"string"}}],returns:null}],displayName:"Marker",props:{choices:{required:!0,tsType:{name:"ReadonlyArray",elements:[{name:"string"}],raw:"ReadonlyArray<string>"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(marker: MarkerType) => void",signature:{arguments:[{type:{name:"MarkerType"},name:"marker"}],return:{name:"void"}}},description:""},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};export{F as M};
