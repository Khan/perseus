import{j as s}from"./jsx-runtime-63Ea5SlK.js";import{p as z,c as q}from"./article-renderer-9EsWpilh.js";import{_ as u}from"./jquery-yG1GhClm.js";import{U as j,K as C}from"./util-AYeX86gl.js";import"./phet-simulation-_7qOO4_B.js";import"./version-akiLXZts.js";import{g as K}from"./dependencies-CP7Uh8Kq.js";import"./perseus-api-1-ethIrW.js";import"./perseus-item-mOWgcFKM.js";import"./hints-renderer-2nNpxHIk.js";import"./renderer-YKj6xKon.js";import"./base-radio-pOFEgW-n.js";import{c as V}from"./components-2XngBvY8.js";import{i as O}from"./constants-iPV6vHZm.js";import"./index-k-0mNqHS.js";import"./i18n-context-fsWEgybQ.js";import"./svg-image-FcZanvM1.js";import"./index-smZ6iCr_.js";import{C as R}from"./index-V5gl6frG.js";import{g as $}from"./_commonjsHelpers-4gQjN7DL.js";import{r as X}from"./index-6oxdNXpR.js";import{i as Q}from"./invariant-bu5zBsRS.js";import{P as d}from"./index-0C4KXdeC.js";import{F as H}from"./index-9gkyvru-.js";/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var A=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;function ee(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function te(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var i={},a=0;a<10;a++)i["_"+String.fromCharCode(a)]=a;var l=Object.getOwnPropertyNames(i).map(function(p){return i[p]});if(l.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(p){c[p]=p}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var se=te()?Object.assign:function(e,i){for(var a,l=ee(e),c,p=1;p<arguments.length;p++){a=Object(arguments[p]);for(var o in a)J.call(a,o)&&(l[o]=a[o]);if(A){c=A(a);for(var b=0;b<c.length;b++)Z.call(a,c[b])&&(l[c[b]]=a[c[b]])}}return l},ae={},ne=ae,I=se,re=ne,f=Q,P="mixins";function ie(e,i,a){var l=[],c={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},p={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},o={displayName:function(n,t){n.displayName=t},mixins:function(n,t){if(t)for(var r=0;r<t.length;r++)E(n,t[r])},childContextTypes:function(n,t){n.childContextTypes=I({},n.childContextTypes,t)},contextTypes:function(n,t){n.contextTypes=I({},n.contextTypes,t)},getDefaultProps:function(n,t){n.getDefaultProps?n.getDefaultProps=y(n.getDefaultProps,t):n.getDefaultProps=t},propTypes:function(n,t){n.propTypes=I({},n.propTypes,t)},statics:function(n,t){M(n,t)},autobind:function(){}};function b(n,t){var r=c.hasOwnProperty(t)?c[t]:null;k.hasOwnProperty(t)&&f(r==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),n&&f(r==="DEFINE_MANY"||r==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function E(n,t){if(t){f(typeof t!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),f(!i(t),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=n.prototype,m=r.__reactAutoBindPairs;t.hasOwnProperty(P)&&o.mixins(n,t.mixins);for(var h in t)if(t.hasOwnProperty(h)&&h!==P){var g=t[h],v=r.hasOwnProperty(h);if(b(v,h),o.hasOwnProperty(h))o[h](n,g);else{var F=c.hasOwnProperty(h),L=typeof g=="function",W=L&&!F&&!v&&t.autobind!==!1;if(W)m.push(h,g),r[h]=g;else if(v){var T=c[h];f(F&&(T==="DEFINE_MANY_MERGED"||T==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",T,h),T==="DEFINE_MANY_MERGED"?r[h]=y(r[h],g):T==="DEFINE_MANY"&&(r[h]=x(r[h],g))}else r[h]=g}}}}function M(n,t){if(t)for(var r in t){var m=t[r];if(t.hasOwnProperty(r)){var h=r in o;f(!h,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r);var g=r in n;if(g){var v=p.hasOwnProperty(r)?p[r]:null;f(v==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r),n[r]=y(n[r],m);return}n[r]=m}}}function _(n,t){f(n&&t&&typeof n=="object"&&typeof t=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var r in t)t.hasOwnProperty(r)&&(f(n[r]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r),n[r]=t[r]);return n}function y(n,t){return function(){var m=n.apply(this,arguments),h=t.apply(this,arguments);if(m==null)return h;if(h==null)return m;var g={};return _(g,m),_(g,h),g}}function x(n,t){return function(){n.apply(this,arguments),t.apply(this,arguments)}}function S(n,t){var r=t.bind(n);return r}function G(n){for(var t=n.__reactAutoBindPairs,r=0;r<t.length;r+=2){var m=t[r],h=t[r+1];n[m]=S(n,h)}}var Y={componentDidMount:function(){this.__isMounted=!0}},U={componentWillUnmount:function(){this.__isMounted=!1}},k={replaceState:function(n,t){this.updater.enqueueReplaceState(this,n,t)},isMounted:function(){return!!this.__isMounted}},D=function(){};I(D.prototype,e.prototype,k);function B(n){var t=function(m,h,g){this.__reactAutoBindPairs.length&&G(this),this.props=m,this.context=h,this.refs=re,this.updater=g||a,this.state=null;var v=this.getInitialState?this.getInitialState():null;f(typeof v=="object"&&!Array.isArray(v),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=v};t.prototype=new D,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],l.forEach(E.bind(null,t)),E(t,Y),E(t,n),E(t,U),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),f(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var r in c)t.prototype[r]||(t.prototype[r]=null);return t}return B}var oe=ie,w=X,le=oe;if(typeof w>"u")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var ce=new w.Component().updater,pe=le(w.Component,w.isValidElement,ce);const ue=$(pe),{ButtonGroup:he,InfoTip:de,RangeInput:N}=V,ge={url:null,width:0,height:0};function me(e,i){return Math.floor((e[1]-e[0])/i)}const fe=ue({displayName:"GraphSettings",propTypes:{...z,editableSettings:d.arrayOf(d.oneOf(["canvas","graph","snap","image","measure"])),box:d.arrayOf(d.number),labels:d.arrayOf(d.string),range:d.arrayOf(d.arrayOf(d.number)),step:d.arrayOf(d.number),gridStep:d.arrayOf(d.number),snapStep:d.arrayOf(d.number),valid:d.oneOfType([d.bool,d.string]),backgroundImage:d.object,markings:d.oneOf(["graph","grid","none"]),showProtractor:d.bool,showRuler:d.bool,showTooltips:d.bool,rulerLabel:d.string,rulerTicks:d.number},getDefaultProps:function(){return{editableSettings:["graph","snap","image","measure"],box:[O.defaultBoxSizeSmall,O.defaultBoxSizeSmall],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],snapStep:[1,1],valid:!0,backgroundImage:ge,markings:"graph",showProtractor:!1,showRuler:!1,showTooltips:!1,rulerLabel:"",rulerTicks:10}},getInitialState:function(){return this.stateFromProps(this.props)},componentDidMount:function(){this._isMounted=!0,this.changeGraph=u.debounce(this.changeGraph,300)},UNSAFE_componentWillReceiveProps:function(e){(!u.isEqual(this.props.labels,e.labels)||!u.isEqual(this.props.gridStep,e.gridStep)||!u.isEqual(this.props.snapStep,e.snapStep)||!u.isEqual(this.props.step,e.step)||!u.isEqual(this.props.range,e.range)||!u.isEqual(this.props.backgroundImage,e.backgroundImage))&&this.setState(this.stateFromProps(e))},componentWillUnmount:function(){this._isMounted=!1},stateFromProps:function(e){return{labelsTextbox:e.labels,gridStepTextbox:e.gridStep,snapStepTextbox:e.snapStep,stepTextbox:e.step,rangeTextbox:e.range,backgroundImage:u.clone(e.backgroundImage)}},change(...e){return q.apply(this,e)},changeRulerLabel:function(e){this.change({rulerLabel:e.target.value})},changeRulerTicks:function(e){this.change({rulerTicks:+e.target.value})},changeBackgroundUrl:function(e){if(e.type==="keypress"&&e.key!=="Enter")return;const i=(l,c,p)=>{const o=u.clone(this.props.backgroundImage);o.url=l,o.width=c,o.height=p,this.setState({backgroundImage:o},this.changeGraph)},a=H.findDOMNode(this.refs["bg-url"]).value;a?j.getImageSize(a,(l,c)=>{this._isMounted&&i(a,l,c)}):i(null,0,0)},renderLabelChoices:function(e){return u.map(e,function([i,a]){return s.jsx("option",{value:a,children:i},a)})},validRange:function(e){return u.every(e,function(a){return u.isFinite(a)})?e[0]>=e[1]?"Range must have a higher number on the right":!0:"Range must be a valid number"},validateStepValue:function(e){const{step:i,range:a,name:l,minTicks:c,maxTicks:p}=e;if(!u.isFinite(i))return l+" must be a valid number";const o=me(a,i);return o<c?l+" is too large, there must be at least "+c+" ticks.":o>p?l+" is too small, there can be at most "+p+" ticks.":!0},validSnapStep:function(e,i){return this.validateStepValue({step:e,range:i,name:"Snap step",minTicks:5,maxTicks:60})},validGridStep:function(e,i){return this.validateStepValue({step:e,range:i,name:"Grid step",minTicks:3,maxTicks:60})},validStep:function(e,i){return this.validateStepValue({step:e,range:i,name:"Step",minTicks:3,maxTicks:20})},validBackgroundImageSize:function(e){return e.url?e.width<=450&&e.height<=450?!0:"Image must be smaller than 450px x 450px.":!0},validateGraphSettings:function(e,i,a,l,c){const p=this;let o;if(!u.every(e,function(x){return o=p.validRange(x),o===!0})||!u.every(i,function(x,S){return o=p.validStep(x,e[S]),o===!0})||!u.every(a,function(x,S){return o=p.validGridStep(x,e[S]),o===!0})||!u.every(l,function(x,S){return o=p.validSnapStep(x,e[S]),o===!0}))return o;const y=this.validBackgroundImageSize(c);return y!==!0?(o=y,o):!0},changeLabel:function(e,i){const a=i.target.value,l=this.state.labelsTextbox.slice();l[e]=a,this.setState({labelsTextbox:l},this.changeGraph)},changeRange:function(e,i){const a=this.state.rangeTextbox.slice();a[e]=i;const l=this.state.stepTextbox.slice(),c=this.state.gridStepTextbox.slice(),p=this.state.snapStepTextbox.slice(),o=j.scaleFromExtent(a[e],this.props.box[e]);this.validRange(a[e])===!0&&(l[e]=j.tickStepFromExtent(a[e],this.props.box[e]),c[e]=j.gridStepFromTickStep(l[e],o),p[e]=c[e]/2),this.setState({stepTextbox:l,gridStepTextbox:c,snapStepTextbox:p,rangeTextbox:a},this.changeGraph)},changeStep:function(e){this.setState({stepTextbox:e},this.changeGraph)},changeSnapStep:function(e){this.setState({snapStepTextbox:e},this.changeGraph)},changeGridStep:function(e){this.setState({gridStepTextbox:e,snapStepTextbox:u.map(e,function(i){return i/2})},this.changeGraph)},changeGraph:function(){const e=this.state.labelsTextbox,i=u.map(this.state.rangeTextbox,function(b){return u.map(b,Number)}),a=u.map(this.state.stepTextbox,Number),l=this.state.gridStepTextbox,c=this.state.snapStepTextbox,p=this.state.backgroundImage,o=this.validateGraphSettings(i,a,l,c,p);o===!0?this.change({valid:!0,labels:e,range:i,step:a,gridStep:l,snapStep:c,backgroundImage:p}):this.change({valid:o})},render:function(){const e=[C.roundTo(2,j.scaleFromExtent(this.props.range[0],this.props.box[0])),C.roundTo(2,j.scaleFromExtent(this.props.range[1],this.props.box[1]))],{TeX:i}=K();return s.jsxs("div",{children:[u.contains(this.props.editableSettings,"canvas")&&s.jsxs("div",{className:"graph-settings",children:[s.jsxs("div",{className:"perseus-widget-row",children:[s.jsx("label",{htmlFor:"canvas-size",children:"Canvas size (x,y pixels)"}),s.jsx(N,{id:"canvas-size",value:this.props.box,onChange:a=>{this.change({box:a})}})]}),s.jsxs("div",{className:"perseus-widget-row",children:["Scale (px per div):"," ",s.jsx(i,{children:"("+e[0]+", "+e[1]+")"})]})]}),u.contains(this.props.editableSettings,"graph")&&s.jsxs("div",{className:"graph-settings",children:[s.jsxs("div",{className:"perseus-widget-row",children:[s.jsxs("div",{className:"perseus-widget-left-col",children:[s.jsx("label",{htmlFor:"labels-x",children:"x Label"}),s.jsx("input",{id:"labels-x",type:"text",className:"graph-settings-axis-label",ref:"labels-0",onChange:a=>this.changeLabel(0,a),value:this.state.labelsTextbox[0]||""})]}),s.jsxs("div",{className:"perseus-widget-right-col",children:[s.jsx("label",{htmlFor:"labels-y",children:"y Label"}),s.jsx("input",{id:"labels-y",type:"text",className:"graph-settings-axis-label",ref:"labels-1",onChange:a=>this.changeLabel(1,a),value:this.state.labelsTextbox[1]||""})]})]}),s.jsxs("div",{className:"perseus-widget-row",children:[s.jsxs("div",{className:"perseus-widget-left-col",children:[s.jsx("label",{htmlFor:"range-x",children:"x Range"}),s.jsx(N,{id:"range-x",value:this.state.rangeTextbox[0],onChange:a=>this.changeRange(0,a)})]}),s.jsxs("div",{className:"perseus-widget-right-col",children:[s.jsx("label",{htmlFor:"range-y",children:"y Range"}),s.jsx(N,{id:"range-y",value:this.state.rangeTextbox[1],onChange:a=>this.changeRange(1,a)})]})]}),s.jsxs("div",{className:"perseus-widget-row",children:[s.jsxs("div",{className:"perseus-widget-left-col",children:[s.jsx("label",{htmlFor:"tick-step",children:"Tick Step"}),s.jsx(N,{id:"tick-step",value:this.state.stepTextbox,onChange:this.changeStep})]}),s.jsxs("div",{className:"perseus-widget-right-col",children:[s.jsx("label",{htmlFor:"grid-step",children:"Grid Step"}),s.jsx(N,{id:"grid-step",value:this.state.gridStepTextbox,onChange:this.changeGridStep})]})]}),u.contains(this.props.editableSettings,"snap")&&s.jsx("div",{className:"perseus-widget-row",children:s.jsxs("div",{className:"perseus-widget-left-col",children:[s.jsx("label",{htmlFor:"snap-step",children:"Snap Step"}),s.jsx(N,{id:"snap-step",value:this.state.snapStepTextbox,onChange:this.changeSnapStep})]})}),s.jsxs("div",{className:"perseus-widget-row",children:[s.jsx("label",{children:"Markings: "}),s.jsx(he,{value:this.props.markings,allowEmpty:!1,buttons:[{value:"graph",content:"Graph"},{value:"grid",content:"Grid"},{value:"none",content:"None"}],onChange:this.change("markings")})]}),s.jsx("div",{className:"perseus-widget-left-col",children:s.jsx(R,{label:"Show tooltips",checked:this.props.showTooltips,onChange:a=>{this.change({showTooltips:a})}})})]}),u.contains(this.props.editableSettings,"image")&&s.jsxs("div",{className:"image-settings",children:[s.jsx("div",{children:"Background image:"}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"bg-url",children:"Url:"}),s.jsx("input",{id:"bg-url",type:"text",className:"graph-settings-background-url",ref:"bg-url",value:this.state.backgroundImage.url||"",onChange:a=>{const l=u.clone(this.props.backgroundImage);l.url=a.target.value,this.setState({backgroundImage:l})},onKeyPress:this.changeBackgroundUrl,onBlur:this.changeBackgroundUrl}),s.jsx(de,{children:s.jsx("p",{children:'Create an image in graphie, or use the "Add image" function to create a background.'})})]})]}),u.contains(this.props.editableSettings,"measure")&&s.jsxs("div",{className:"misc-settings",children:[s.jsxs("div",{className:"perseus-widget-row",children:[s.jsx("div",{className:"perseus-widget-left-col",children:s.jsx(R,{label:"Show ruler",checked:this.props.showRuler,onChange:a=>{this.change({showRuler:a})}})}),s.jsx("div",{className:"perseus-widget-right-col",children:s.jsx(R,{label:"Show protractor",checked:this.props.showProtractor,onChange:a=>{this.change({showProtractor:a})}})})]}),this.props.showRuler&&s.jsxs("div",{children:[s.jsx("div",{children:s.jsxs("label",{children:[" ","Ruler label:"," ",s.jsxs("select",{onChange:this.changeRulerLabel,value:this.props.rulerLabel,children:[s.jsx("option",{value:"",children:"None"}),s.jsx("optgroup",{label:"Metric",children:this.renderLabelChoices([["milimeters","mm"],["centimeters","cm"],["meters","m"],["kilometers","km"]])}),s.jsx("optgroup",{label:"Imperial",children:this.renderLabelChoices([["inches","in"],["feet","ft"],["yards","yd"],["miles","mi"]])})]})]})}),s.jsx("div",{children:s.jsxs("label",{children:[" ","Ruler ticks:"," ",s.jsx("select",{onChange:this.changeRulerTicks,value:this.props.rulerTicks,children:u.map([1,2,4,8,10,16],function(a){return s.jsx("option",{value:a,children:a},a)})})]})})]})]})]})}}),Be=fe;export{Be as G,ue as c};
