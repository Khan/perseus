import{j as g}from"./jsx-runtime-BGVbfQ2Z.js";import{r as b}from"./index-qhcEwEpg.js";import{R as y}from"./index-E09jvG0x.js";const r=class r extends b.Component{constructor(){super(...arguments),this.state={visible:!1,marginBottomPx:0,zoomed:!0},this.reset=()=>{this._isMounted&&this.state.visible&&(this._originalWidth=null,this.setState({visible:!1,compactHeight:null,expandedHeight:null,zoomed:!0},()=>{this.measureAndScaleChildToFit(!1)}))},this.stopPropagationIfZoomed=t=>{this.state.zoomed||t.stopPropagation()},this.handleClickIfZoomed=t=>{this.state.zoomed||(t.stopPropagation(),this.handleClick())},this.handleClick=()=>{this.setState({zoomed:!this.state.zoomed})}}componentDidMount(){this._isMounted=!0,this.maybeInitializeMeasuring()}componentDidUpdate(){this.maybeInitializeMeasuring()}componentWillUnmount(){window.removeEventListener("resize",this.reset),this._observer&&this._observer.disconnect(),this._isMounted=!1}maybeInitializeMeasuring(){const t=this.props.readyToMeasure&&!this._measuringInitialized;this._isMounted&&t&&(this._measuringInitialized=!0,this._node=y.findDOMNode(this),setTimeout(()=>this.measureAndScaleChildToFit(!1),0),window.MutationObserver&&(this._observer=new MutationObserver(e=>{if(this._isMounted){for(const i of e)if(i.target!==this._node){this.measureAndScaleChildToFit(this.state.zoomed);break}}}),this._observer.observe(this._node,{childList:!0,subtree:!0,attributes:!0})),window.addEventListener("resize",this.reset))}measureAndScaleChildToFit(t){if(!this._isMounted)return;const e={width:this._node.offsetWidth,height:this._node.offsetHeight},i=this.props.computeChildBounds(this._node,e),o=i.width+1,s=i.height+1;if(o>e.width){const n=e.width/o;this.setState({scale:n,zoomed:t,compactHeight:Math.ceil(n*s),expandedHeight:s}),setTimeout(()=>{this._isMounted&&this.setState({visible:!0})})}else this.setState({visible:!0})}render(){const{visible:t,scale:e,compactHeight:i,expandedHeight:o,zoomed:s}=this.state,{animateHeight:n,disableEntranceAnimation:u}=this.props,c=t?{transitionProperty:n?"opacity transform height":"opacity transform",transitionDuration:"0.3s",transitionTimingFunction:"ease-out"}:{},d=!u&&!t,h=d?" translate(0, 8px)":"",p=d?0:1,l=(e??1).toString(),m=s?`scale(1, 1) ${h}`:`scale(${l}, ${l}) ${h}`,f={display:"block",width:"100%",height:s?o:i,transform:m,transformOrigin:"0 0",opacity:p,WebkitTapHighlightColor:"transparent",...c};return g("span",{onClick:this.handleClick,onClickCapture:this.handleClickIfZoomed,onTouchCancelCapture:this.stopPropagationIfZoomed,onTouchEndCapture:this.stopPropagationIfZoomed,onTouchStartCapture:this.stopPropagationIfZoomed,style:f,children:this.props.children})}};r.defaultProps={animateHeight:!1,readyToMeasure:!0,disableEntranceAnimation:!1,computeChildBounds:t=>{const e=t.firstElementChild;return{width:e.offsetWidth,height:e.offsetHeight}}};let a=r;try{a.displayName="Zoomable",a.__docgenInfo={description:"",displayName:"Zoomable",props:{animateHeight:{defaultValue:{value:"false"},description:"",name:"animateHeight",required:!1,type:{name:"boolean"}},disableEntranceAnimation:{defaultValue:{value:"false"},description:"",name:"disableEntranceAnimation",required:!1,type:{name:"boolean"}},computeChildBounds:{defaultValue:{value:`(parentNode) => {
            const firstChild = parentNode.firstElementChild;

            return {
                // @ts-expect-error - TS2531 - Object is possibly 'null'. | TS2339 - Property 'offsetWidth' does not exist on type 'Element'.
                width: firstChild.offsetWidth,
                // @ts-expect-error - TS2531 - Object is possibly 'null'. | TS2339 - Property 'offsetHeight' does not exist on type 'Element'.
                height: firstChild.offsetHeight,
            };
        }`},description:`Optional function that allows customizations in zooming.

Defaults to just using the bounding client rect of the first DOM
element of this component.`,name:"computeChildBounds",required:!1,type:{name:"(parentNode: HTMLElement, parentBounds: Bounds) => Bounds"}},readyToMeasure:{defaultValue:{value:"true"},description:`Optional boolean specifying whether the component is ready to measure
or not.  Defaults to true for synchronous components like tables.`,name:"readyToMeasure",required:!1,type:{name:"boolean"}}}}}catch{}export{a as Z};
