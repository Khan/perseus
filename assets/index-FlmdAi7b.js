import{_ as I,a as d}from"./extends-wRoo2ExD.js";import{r as s,a as C}from"./index-TT1qJ6UJ.js";import{l as m}from"./index-awljIyHI.js";function E(r){const e=[];if(r)if(Array.isArray(r))for(const t of r)e.push(...E(t));else e.push(r);else return e;return e}function v(r){const e=[],t=[];if(!r)return{style:{},className:""};const n=typeof global<"u"&&global.SNAPSHOT_INLINE_APHRODITE;E(r).forEach(a=>{const i=a._definition;if(i!=null)if(n){const c={};for(const[f,u]of Object.entries(i))c[f.replace(/-[a-z]/g,R=>R[1].toUpperCase())]=u;t.push(c)}else e.push(a);else t.push(a)});const o=Object.assign({},...t);if(t.length>0&&!n){const a=m.StyleSheet.create({inlineStyles:o});e.push(a.inlineStyles)}return{style:n?o:{},className:m.css(...e)}}const N=["children","style","tag","testId"],F=/^h[1-6]$/,w=m.StyleSheet.create({text:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},header:{marginTop:0,marginBottom:0}}),M=s.forwardRef(function(e,t){let{children:n,style:o,tag:a="span",testId:i}=e,c=I(e,N);const f=F.test(a),u=v([w.text,f&&w.header,o]),R=c.className?[c.className,u.className].join(" "):u.className;return s.createElement(a,d({},c,{style:u.style,className:R,"data-testid":i,ref:t}),n)}),P=["className","style"];function y(r,e){return s.forwardRef((t,n)=>{const{className:o,style:a}=t,i=I(t,P),c=typeof r=="string"?T[r]:null,{className:f,style:u}=v([c,e,a]);return s.createElement(r,d({},i,{ref:n,className:[f,o].filter(Boolean).join(" "),style:u}))})}const T=m.StyleSheet.create({button:{margin:0,"::-moz-focus-inner":{border:0}}}),$=["testId","tag"],p=m.StyleSheet.create({default:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexDirection:"column",margin:0,padding:0,position:"relative",zIndex:0,minHeight:0,minWidth:0}}),D=y("div",p.default),q=y("article",p.default),A=y("aside",p.default),O=y("nav",p.default),W=y("section",p.default),B=s.forwardRef(function(e,t){const{testId:n,tag:o="div"}=e,a=I(e,$),i=d({},a,{"data-testid":n});switch(o){case"article":return s.createElement(q,d({},i,{ref:t}));case"aside":return s.createElement(A,d({},i,{ref:t}));case"nav":return s.createElement(O,d({},i,{ref:t}));case"section":return s.createElement(W,d({},i,{ref:t}));case"div":return s.createElement(D,d({},i,{ref:t}));default:throw Error(`${o} is not an allowed value for the 'tag' prop`)}});let l=function(r){return r.Root="root",r.Initial="initial",r.Standard="standard",r}({});const h=s.createContext(l.Root);h.displayName="RenderStateContext";class z extends s.Component{constructor(...e){super(...e),this.state={mounted:!1},this._isTheRootComponent=!1}componentDidMount(){this._isTheRootComponent&&this.setState({mounted:!0})}_renderAsRootComponent(){const{mounted:e}=this.state,{children:t,placeholder:n}=this.props;return this._isTheRootComponent=!0,e?s.createElement(h.Provider,{value:l.Standard},t()):n?s.createElement(h.Provider,{value:l.Initial},n()):null}_maybeRender(e){const{children:t,placeholder:n}=this.props;switch(e){case l.Root:return this._renderAsRootComponent();case l.Initial:return n?n():null;case l.Standard:return t()}{var o;return console.log(`We got a render state we don't understand: "${(o=JSON.stringify(e))!=null?o:""}"`),this._maybeRender(l.Root)}}render(){return s.createElement(h.Consumer,null,e=>this._maybeRender(e))}}class S{constructor(e){this._uniqueFactoryName=void 0,this.get=n=>{const o=n.toLowerCase();if(!this._hasValidIdChars(n))throw new Error(`Invalid identifier key: ${n}`);return`${this._uniqueFactoryName}-${o}`},e=typeof e=="string"?e:"";const t=e.toLowerCase();if(!this._hasValidIdChars(t))throw new Error(`Invalid factory scope: ${e}`);this._uniqueFactoryName=`uid-${t}-${S._factoryUniquenessCounter++}`}_hasValidIdChars(e){return typeof e=="string"?!/\s/.test(e):!1}}S._factoryUniquenessCounter=0;class g{get(e){return e}}g.Default=new g;var x=g.Default;class U extends s.Component{constructor(...e){super(...e),this._idFactory=void 0}_performRender(e){const{children:t,mockOnFirstRender:n,scope:o}=this.props;return e?n?t(x):null:(this._idFactory||(this._idFactory=new S(o)),t(this._idFactory))}render(){return s.createElement(z,{placeholder:()=>this._performRender(!0)},()=>this._performRender(!1))}}class _ extends s.Component{renderChildren(e){const{id:t,children:n}=this.props,o=e?e.get(_.defaultId):t;if(!o)throw new Error("Did not get an identifier factory nor a id prop");return n(o)}render(){const{id:e,scope:t}=this.props;return e?this.renderChildren():s.createElement(U,{scope:t,mockOnFirstRender:!0},n=>this.renderChildren(n))}}_.defaultId="wb-id";const b=()=>s.useContext(h),K=r=>{const e=b(),t=s.useRef(null);if(e===l.Root)throw new Error("Components using useUniqueIdWithMock() should be descendants of <RenderStateRoot>");return e===l.Initial?x:(t.current||(t.current=new S(r)),t.current)};function G(r){const e=s.useRef(r);return e.current=r,e}const{useEffect:j,useState:L}=C,J=({children:r,throwIfNested:e=!0})=>{const[t,n]=L(!0),o=b();if(j(()=>{n(!1)},[]),o!==l.Root){if(e)throw new Error("There's already a <RenderStateRoot> above this instance in the render tree.  This instance should be removed.");return s.createElement(s.Fragment,null,r)}const a=t?l.Initial:l.Standard;return s.createElement(h.Provider,{value:a},r)};export{_ as I,J as R,M as T,U,B as V,y as a,G as b,K as u};
