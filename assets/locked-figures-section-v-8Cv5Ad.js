import{j as a,a as f,F as x}from"./jsx-runtime-BGVbfQ2Z.js";import{B as E}from"./choice-U2lXOTna.js";import{V as h,u as T}from"./index-oMd7J_hd.js";import{S as I}from"./index-KIBY7gd7.js";import{s as m,c as $}from"./index-lUErx3pE.js";import{l as v}from"./index-awljIyHI.js";import{r as w}from"./index-qhcEwEpg.js";import{H as A}from"./heading-T1HN2tJ9.js";import{g as N}from"./util-RR67UMDN.js";import{a as B,b as R}from"./answer-choices-Y9Xz84Nm.js";import{L as j}from"./locked-ellipse-settings-JGiv8wCC.js";import{L as H}from"./locked-line-settings-qCWjhsU5.js";import{L as D}from"./locked-point-settings-A-uVTE03.js";import{L as W}from"./locked-polygon-settings-TAfsb31w.js";import{L as z}from"./locked-vector-settings-sNtJ-W1Y.js";const G=t=>{const{id:g,onChange:u}=t,s=t.showM2Features?["point","line","vector","ellipse","polygon"]:["point","line"];return a(h,{style:F.container,children:a(B,{menuText:"Add locked figure",style:F.addElementSelect,children:s.map(i=>a(R,{label:i,onClick:()=>u(i),children:i},`${g}-${i}`))})})},F=v.StyleSheet.create({container:{marginTop:m.xSmall_8},addElementSelect:{backgroundColor:$.fadedBlue8,borderRadius:m.xxxSmall_4}});try{lockedfigureselect.displayName="lockedfigureselect",lockedfigureselect.__docgenInfo={description:"",displayName:"lockedfigureselect",props:{showM2Features:{defaultValue:null,description:"",name:"showM2Features",required:!0,type:{name:"boolean"}},showM2bFeatures:{defaultValue:null,description:"",name:"showM2bFeatures",required:!0,type:{name:"boolean"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}}}catch{}const O=t=>{switch(t.type){case"point":return a(D,{...t});case"line":return a(H,{...t});case"vector":if(t.showM2Features)return a(z,{...t});break;case"ellipse":if(t.showM2Features)return a(j,{...t});break;case"polygon":if(t.showM2Features)return a(W,{...t})}return null};try{lockedfiguresettings.displayName="lockedfiguresettings",lockedfiguresettings.__docgenInfo={description:"",displayName:"lockedfiguresettings",props:{showM2Features:{defaultValue:null,description:"",name:"showM2Features",required:!1,type:{name:"boolean"}},showM2bFeatures:{defaultValue:null,description:"",name:"showM2bFeatures",required:!1,type:{name:"boolean"}},onMove:{defaultValue:null,description:"Called when a movement button (top, up, down, bottom) is pressed.",name:"onMove",required:!0,type:{name:"(movement: LockedFigureSettingsMovementType) => void"}},onRemove:{defaultValue:null,description:"Called when the delete button is pressed.",name:"onRemove",required:!0,type:{name:"() => void"}},expanded:{defaultValue:null,description:"Whether this accordion is expanded.",name:"expanded",required:!1,type:{name:"boolean"}},onToggle:{defaultValue:null,description:"Called when the accordion is expanded or collapsed.",name:"onToggle",required:!1,type:{name:"((expanded: boolean) => void)"}},type:{defaultValue:null,description:"",name:"type",required:!0,type:{name:"enum",value:[{value:'"vector"'},{value:'"polygon"'},{value:'"point"'},{value:'"ellipse"'},{value:'"line"'}]}},points:{defaultValue:null,description:"",name:"points",required:!0,type:{name:"[tail: Coord, tip: Coord] | readonly Coord[] | [point1: LockedPointType, point2: LockedPointType]"}},color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"enum",value:[{value:'"blue"'},{value:'"green"'},{value:'"grayH"'},{value:'"purple"'},{value:'"pink"'},{value:'"orange"'},{value:'"red"'}]}},onChangeProps:{defaultValue:null,description:`Called when the props (points, color, etc.) are updated.
Called when the props (coords, color, etc.) are updated.`,name:"onChangeProps",required:!0,type:{name:"((newProps: Partial<LockedFigure>) => void) | ((newProps: Partial<LockedPolygonType>) => void) | ((newProps: Partial<LockedPointType>) => void) | ((newProps: Partial<...>) => void) | ((newProps: Partial<...>) => void)"}},showVertices:{defaultValue:null,description:"",name:"showVertices",required:!0,type:{name:"boolean"}},fillStyle:{defaultValue:null,description:"",name:"fillStyle",required:!0,type:{name:"enum",value:[{value:'"none"'},{value:'"solid"'},{value:'"translucent"'}]}},strokeStyle:{defaultValue:null,description:"",name:"strokeStyle",required:!0,type:{name:"enum",value:[{value:'"solid"'},{value:'"dashed"'}]}},coord:{defaultValue:null,description:"",name:"coord",required:!0,type:{name:"Coord"}},filled:{defaultValue:null,description:"",name:"filled",required:!0,type:{name:"boolean"}},center:{defaultValue:null,description:"",name:"center",required:!0,type:{name:"Coord"}},radius:{defaultValue:null,description:"",name:"radius",required:!0,type:{name:"[x: number, y: number]"}},angle:{defaultValue:null,description:"",name:"angle",required:!0,type:{name:"number"}},kind:{defaultValue:null,description:"",name:"kind",required:!0,type:{name:"enum",value:[{value:'"line"'},{value:'"ray"'},{value:'"segment"'}]}},lineStyle:{defaultValue:null,description:"",name:"lineStyle",required:!0,type:{name:"enum",value:[{value:'"solid"'},{value:'"dashed"'}]}},showPoint1:{defaultValue:null,description:"",name:"showPoint1",required:!0,type:{name:"boolean"}},showPoint2:{defaultValue:null,description:"",name:"showPoint2",required:!0,type:{name:"boolean"}}}}}catch{}const U=t=>{const g=Array((t.figures??[]).length).fill(!1),[u,s]=w.useState(g),[i,V]=w.useState(!0),y=T().get("locked-figures-section"),{figures:n,onChange:c}=t;function S(e){const r={lockedFigures:[...n||[],N(e)]};c(r),s([...u,!0])}function q(e,o){if(e===0&&(o==="back"||o==="backward")||n&&e===n.length-1&&(o==="front"||o==="forward"))return;const l=[...n||[]],d=[...u],[p]=l.splice(e,1);switch(d.splice(e,1),o){case"back":l.unshift(p),d.unshift(!0);break;case"backward":l.splice(e-1,0,p),d.splice(e-1,0,!0);break;case"forward":l.splice(e+1,0,p),d.splice(e+1,0,!0);break;case"front":l.push(p),d.push(!0);break}c({lockedFigures:l}),s(d)}function M(e){if(window.confirm("Are you sure you want to delete this figure?")){const o=n||[];c({lockedFigures:[...o.slice(0,e),...o.slice(e+1)]});const r=[...u];r.splice(e,1),s(r)}}function C(e,o){const r=n||[],l={lockedFigures:[...r.slice(0,e),{...r[e],...o},...r.slice(e+1)]};c(l)}function L(e){s(Array(n==null?void 0:n.length).fill(e))}const k=u.every(e=>!e),_=k?"Expand all":"Collapse all",P=!!(n!=null&&n.length);return f(x,{children:[a(A,{title:"Locked Figures",isOpen:i,onToggle:()=>V(!i),isCollapsible:!0}),i&&f(h,{children:[n==null?void 0:n.map((e,o)=>{if(e.type!=="function")return a(O,{showM2Features:t.showM2Features,showM2bFeatures:t.showM2bFeatures,expanded:u[o],onToggle:r=>{const l=[...u];l[o]=r,s(l)},...e,onChangeProps:r=>C(o,r),onMove:r=>q(o,r),onRemove:()=>M(o)},`${y}-locked-${e}-${o}`)}),f(h,{style:b.buttonContainer,children:[a(G,{showM2Features:t.showM2Features,showM2bFeatures:t.showM2bFeatures,id:`${y}-select`,onChange:S}),a(I,{size:m.small_12}),P&&a(E,{kind:"secondary",onClick:()=>L(k),style:b.button,children:_})]})]})]})},b=v.StyleSheet.create({buttonContainer:{flexDirection:"row",alignItems:"center"},button:{marginTop:m.xSmall_8,flexGrow:1}}),se=U;try{lockedfiguressection.displayName="lockedfiguressection",lockedfiguressection.__docgenInfo={description:"",displayName:"lockedfiguressection",props:{showM2Features:{defaultValue:null,description:"",name:"showM2Features",required:!0,type:{name:"boolean"}},showM2bFeatures:{defaultValue:null,description:"",name:"showM2bFeatures",required:!0,type:{name:"boolean"}},figures:{defaultValue:null,description:"",name:"figures",required:!1,type:{name:"LockedFigure[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(props: Partial<Props>) => void"}}}}}catch{}export{se as L};
