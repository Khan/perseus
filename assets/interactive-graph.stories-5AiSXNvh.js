import{j as t,a as u,F as R}from"./jsx-runtime-BGVbfQ2Z.js";import{B as rt}from"./article-renderer-GkWQa1ny.js";import{B as V}from"./choice-rFAFMrR4.js";import{V as p}from"./index-4c2J3ov1.js";import{I as K}from"./index-kutQl4v0.js";import{S as x}from"./index-h47zdzUa.js";import{L as ot}from"./video-transcript-link-g12jSPmn.js";import{a as st,S as nt}from"./index-JT1-kTlx.js";import{c as y,s as c}from"./index-lUErx3pE.js";import{r as a}from"./index-qhcEwEpg.js";import{l as H}from"./index-awljIyHI.js";import{b as it,L as at,H as ct}from"./index-qh_wob3p.js";import{b as $}from"./index-xE_wKg8s.js";import{w as lt}from"./index-J2t_5nK1.js";import"./index-default-4_ZsnO94.js";import{a as mt}from"./util-EDQcR2F7.js";import"./unit-ovoXKu5O.js";import"./dependencies-fnqF3NiV.js";import"./perseus-api-XkoWPDUZ.js";import"./multi-renderer-8S9Ndef_.js";import"./hints-renderer-D_ElXUgG.js";import{R as ut}from"./renderer-hl8X5cVO.js";import"./base-radio-o-i9tZ9C.js";import"./button-group-eBTrRsKy.js";import"./graph-e5NeKk0k.js";import{S as pt}from"./svg-image-lYtLGErm.js";import"./hud-Q7Km3N9P.js";import"./icon-HbAIhp4d.js";import"./info-tip-7OZQMH1X.js";import"./inline-icon-MJBS_-2U.js";import"./math-input-VMbNQVXB.js";import"./multi-button-group-rHU9dGVb.js";import"./number-input-k4bRs4vK.js";import"./prop-check-box-ZNuWlBix.js";import"./range-input-zCtWZXYe.js";import"./text-input-yDsqFbe3.js";import"./text-list-editor-xQBHt64k.js";import"./jquery-5v7aFUvu.js";import"./index-0C4KXdeC.js";import"./i18n-context-9-s9cJ--.js";import{m as dt}from"./strings-YJ61eiUN.js";import{R as i}from"./renderer-with-debug-ui-8KcTwy8G.js";import{a as gt,c as ht,l as ft,b as yt,d as St,p as Rt,e as kt,r as qt,f as xt,g as bt,h as Lt,i as It,j as wt,k as Ct,m as Wt,n as Et,o as At}from"./interactive-graph.testdata-KDWx7Wwt.js";import"./compare-59FC1ybr.js";import"./version-akiLXZts.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./prop-types-VEqj8M-u.js";import"./index-E09jvG0x.js";import"./index-sCIolE-R.js";import"./tabbar-_HYg3Kcf.js";import"./item-MgaZQyPg.js";import"./index-VhM44oCk.js";import"./index-tvtfaFq4.js";import"./button-assets-cmoMUwP4.js";import"./keypad-button-BUF7auet.js";import"./operators-page-H6dLcd0l.js";import"./navigation-pad-URlj9thj.js";import"./key-translator-uZU3CxVJ.js";import"./_commonjs-dynamic-modules-h-SxKiO4.js";import"./invariant-bu5zBsRS.js";import"./enums-x5qaTru7.js";import"./index-dnMhQZ-1.js";import"./perseus-error-OpXxk17X.js";import"./input-with-examples-jyEz1IVC.js";import"./math-output-me3cXzXD.js";import"./tooltip-K2JbXmT6.js";import"./simple-keypad-input-6x94GZ43.js";import"./icon-paths-AuJwhOz7.js";import"./media-queries-MaBBbpNq.js";import"./constants-I_nlPaPx.js";import"./shared-3pf9YZIg.js";import"./index-3tBZ6RgE.js";import"./index-_15Y2y0p.js";import"./answer-choices-NDEW-H2U.js";import"./minus-bold-ONmDo3Ve.js";import"./Popper-uHddJoXq.js";import"./asset-context-pmjKTqqL.js";import"./tiny-invariant-bHgPayXn.js";import"./bundle.esm-3RuEOGQS.js";import"./marker-2GXURCib.js";import"./answer-pill-l5agfFCB.js";import"./index-mohBxQl_.js";import"./sortable-8PK3J5nJ.js";import"./fixed-to-responsive-ybwlrogx.js";import"./choice-icon-8EqwF5gf.js";import"./focus-ring-SGFL5fpl.js";import"./option-status-atX5Qolq.js";import"./stub-tag-editor-f1WdYARp.js";import"./tex-SwZEYYPF.js";import"./zoomable-QW77xrsT.js";import"./zoomable-tex-LJgLrbXQ.js";import"./lint-4QkP-VXi.js";import"./choice-none-above-mR5lZbAT.js";import"./image-loader-BrzYBUzY.js";import"./index-ZObC1LzG.js";import"./side-by-side-WCZfunJ2.js";import"./register-all-widgets-for-testing-MUI2Lry-.js";import"./interactive-graph-question-builder-5H3Bi9Ra.js";class j extends a.Component{render(){const{color:r,leftContent:s,rightContent:n,size:m,subtitle:g,title:d}=this.props,f=g?at:ct;return a.createElement(p,{style:[l.container,r==="dark"&&l.dark,m==="small"&&l.small]},a.createElement(p,{style:[l.column,l.leftColumn,d?l.withTitle:null]},s),d&&a.createElement(p,{style:[l.column,l.wideColumn]},a.createElement(p,{style:[l.titles,l.center]},a.createElement(f,{id:"wb-toolbar-title"},d),g&&a.createElement(it,{style:r==="light"&&l.subtitle},g))),a.createElement(p,{style:[l.column,l.rightColumn,d?l.withTitle:null]},n))}}j.defaultProps={color:"light",leftContent:null,rightContent:null,size:"medium"};const l=H.StyleSheet.create({container:{border:`1px solid ${y.offBlack16}`,flex:1,flexDirection:"row",justifyContent:"space-between",minHeight:66,paddingLeft:c.medium_16,paddingRight:c.medium_16,width:"100%"},small:{minHeight:50},dark:{backgroundColor:y.darkBlue,boxShadow:`0 1px 0 0 ${y.white64}`,color:"white"},column:{justifyContent:"center"},withTitle:{flex:1},wideColumn:{flex:1,flexBasis:"50%"},leftColumn:{alignItems:"center",flexDirection:"row",flexShrink:0,justifyContent:"flex-start"},rightColumn:{alignItems:"center",flexDirection:"row",justifyContent:"flex-end"},center:{textAlign:"center"},subtitle:{color:y.offBlack64},titles:{padding:c.small_12}}),Qt=""+new URL("camera-slash-Oge78uaV.svg",import.meta.url).href,vt=""+new URL("graph-RU2fqeKx.svg",import.meta.url).href,_t=""+new URL("image-PFUjt3DK.svg",import.meta.url).href,Dt=["segment","linear","linear-system","ray","polygon","point","circle","quadratic","sinusoid"],Ot=Dt.reduce((e,r)=>(e[r]=!0,e),{});function z(e){const{value:r,onInput:s,...n}=e,[m,g]=a.useState(!1),[d,f]=a.useState("");return t("input",{...n,value:m?d:r,onChange:h=>{f(h.target.value),s(h.target.value)},onFocus:()=>{f(r),g(!0)},onBlur:()=>{g(!1)}})}try{z.displayName="EditableControlledInput",z.__docgenInfo={description:"",displayName:"EditableControlledInput",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onInput:{defaultValue:null,description:"",name:"onInput",required:!0,type:{name:"(newValue: string) => unknown"}}}}}catch{}function k(e){let r;return s=>((r==null||s!==r.arg)&&(r={arg:s,result:e(s)}),r.result)}const Pt={type:"next"},Ut={type:"previous"},Bt=e=>Ht(e)?{type:"jump-to-index",index:parseInt(e,10)-1}:{type:"noop"};function Nt(e){return{type:"set-questions",questions:e}}function Tt(e){return{type:"load-questions-from-storage",questions:e}}const Vt={type:"remove-current-question"};function jt(e,r){switch(r.type){case"next":return G(e,s=>s+1);case"previous":return G(e,s=>s-1);case"jump-to-index":return G(e,()=>r.index);case"set-questions":return{...e,questions:r.questions};case"load-questions-from-storage":return e.questions||!r.questions?e:{...e,questions:r.questions};case"remove-current-question":{const s=q(e);return{...e,questions:e.questions.split(`
`).filter((n,m)=>m!==s).join(`
`)}}}return e}function G(e,r){const s=q(e),n=F(e);return{...e,requestedIndex:Ze(r(s),n)}}function Ze(e,r){return r.length===0||e<0?0:e>=r.length?r.length-1:e}const et=k(e=>e.questions.split(`
`).map(r=>r.trim()).filter(Boolean)),F=k(e=>et(e).map(Mt)),Ft=k(e=>F(e)[q(e)]??null),Gt=k(e=>et(e)[q(e)]??null),zt=k(e=>F(e).length),q=e=>Ze(e.requestedIndex,F(e));function Mt(e){try{return JSON.parse(e)}catch{return{content:"**Could not parse the JSON for this question.**\n\n```\n"+e+"\n```",widgets:{},images:{}}}}function Ht(e){return/^\d+$/.test(e)&&+e>0}const Jt=H.StyleSheet.create({header:{display:"flex",alignItems:"center",boxShadow:"0 0 10px #0002",borderBlockEnd:`1px solid ${y.offBlack32}`,background:y.offBlack8,padding:c.small_12,justifyContent:"space-between",flexDirection:"row-reverse",flexWrap:"wrap"}}),M=({children:e})=>t("header",{className:H.css(Jt.header),children:e});try{M.displayName="Header",M.__docgenInfo={description:"",displayName:"Header",props:{}}}catch{}const Kt=`
# copy all questions
cat data/questions/*/*/* | pbcopy

# copy all segment questions
grep -rl '"type":"segment"' data/questions/ | xargs cat | pbcopy
`.trim(),Y="FLIPBOOK-QUESTIONS-JSON";function $t(e){return e.type==="interactive-graph"}function tt(e){return e.startsWith("web+graphie://")}function Yt(){const[e,r]=a.useReducer(jt,{questions:"",requestedIndex:0}),s=Gt(e),n=Ft(e),m=zt(e),g=q(e),d=e.questions.trim(),f=d==="",h=a.useMemo(()=>Object.values((n==null?void 0:n.widgets)??{}).filter($t).map(o=>{var J;return((J=o.options.backgroundImage)==null?void 0:J.url)??""}).filter(o=>o.length>0),[n]);return a.useEffect(()=>{const o=localStorage.getItem(Y)||"";r(Tt(o))},[]),a.useEffect(()=>{localStorage.setItem(Y,d)},[d]),u(R,{children:[t(M,{children:t(p,{style:{flexDirection:"row",alignItems:"center",flexBasis:"max-content"},children:t("nav",{children:t("a",{href:"/",children:"Gallery"})})})}),u(p,{style:{padding:c.medium_16},children:[t("textarea",{wrap:"off",rows:10,style:{width:"100%"},value:e.questions,onChange:o=>r(Nt(o.target.value))}),t(j,{leftContent:u(R,{children:[t(V,{kind:"secondary",onClick:()=>r(Ut),children:"Previous"}),t(x,{size:c.xxSmall_6}),t(V,{kind:"secondary",onClick:()=>r(Pt),children:"Next"}),t(x,{size:c.medium_16}),t(Zt,{zeroBasedIndex:g,total:m,onIndexChanged:o=>r(Bt(o))}),t(x,{size:c.medium_16}),t(V,{kind:"tertiary",onClick:()=>r(Vt),children:"Discard question"})]}),rightContent:u(p,{children:[h==null?void 0:h.map(o=>t($,{placement:"right",content:t(er,{url:o}),children:t(K,{icon:tt(o)?vt:_t})},o)),((h==null?void 0:h.length)??0)===0&&t($,{placement:"right",content:"This graph does not specify a background image",children:t(K,{icon:Qt})})]})}),t(x,{size:c.small_12}),u("div",{style:{display:f?"block":"none"},children:[t("h2",{children:"Instructions"}),u("ol",{children:[u("li",{children:[t("p",{children:"Run a command like one of the following to copy question data to your clipboard."}),t("code",{children:t("pre",{children:Kt})})]}),t("li",{children:t("p",{children:"Paste the data in the box above."})})]})]}),n!=null&&t(Xt,{question:n},s)]})]})}function Xt({question:e,apiOptions:r={}}){return u(R,{children:[u(p,{className:"framework-perseus",style:{flexDirection:"row",padding:c.medium_16,gap:c.medium_16,background:"#f8f8f8"},children:[t(X,{question:e,apiOptions:{...r,flags:{mafs:!1}}}),t(X,{question:e,apiOptions:{...r,flags:{mafs:Ot}}})]}),t("div",{children:t("pre",{style:{whiteSpace:"pre-wrap"},children:t("code",{children:JSON.stringify(e)})})})]})}function X(e){const{question:r,apiOptions:s}=e,n=a.useRef(null),[m,g]=a.useState(),d=st(()=>g(void 0),2500,{schedulePolicy:nt.OnDemand});function f(o){switch(o.type){case"invalid":return"You didn't answer the question.";case"points":return mt(o)?"Correct!":"Incorrect."}}function h(o){switch(o.type){case"invalid":return"critical";case"points":return o.earned===o.total?"success":"warning";default:throw new lt(o)}}return u(p,{style:{alignItems:"flex-start",overflow:"hidden",background:y.white,padding:c.medium_16},children:[t(ut,{ref:n,content:r.content,images:r.images,widgets:r.widgets,problemNum:0,apiOptions:{...s},strings:dt}),t(j,{leftContent:t(V,{onClick:()=>{var o;g((o=n.current)==null?void 0:o.score()),d.set()},children:"Check answer"})}),m&&t(p,{style:{position:"absolute",alignSelf:"center",width:"60%",top:"150px",zIndex:"1000"},children:t(rt,{layout:"full-width",text:f(m),kind:h(m)})})]})}function Zt(e){const{zeroBasedIndex:r,total:s,onIndexChanged:n}=e,m=Math.min(s,r+1);return u("div",{children:[t(z,{value:String(m),onInput:n,style:{width:"4em",textAlign:"right"}})," of ",s]})}function er({url:e}){return u(R,{children:[t(j,{leftContent:u(p,{style:{display:"flex",flexDirection:"row"},children:["This question uses a",tt(e)?t(ot,{href:`http://graphie-to-png.khanacademy.systems?preload=${encodeURIComponent(e)}`,target:"_blank",style:{marginLeft:c.xxSmall_6,marginRight:c.xxSmall_6},children:"Graphie"}):" regular image ","background."]}),rightContent:t(R,{})}),t(p,{className:"framework-perseus",style:{margin:c.medium_16,border:"solid 1px grey"},children:t(pt,{alt:"The background image for this graph question",src:e})})]})}const Mo={title:"Perseus/Widgets/Interactive Graph"},S={apiOptions:{flags:{mafs:{segment:!0}}}},b=e=>t(Yt,{}),L=e=>t(i,{question:gt}),I=e=>t(i,{question:ht}),w=e=>t(i,{question:ft}),C=e=>t(i,{question:yt}),W=e=>t(i,{question:St}),E=e=>t(i,{question:Rt}),A=e=>t(i,{question:kt}),Q=e=>t(i,{question:qt}),v=e=>t(i,{question:xt}),_=e=>t(i,{...S,question:bt}),D=e=>t(i,{...S,question:Lt}),O=e=>t(i,{...S,question:It}),P=e=>t(i,{...S,question:wt}),U=e=>t(i,{...S,question:Ct}),B=e=>t(i,{...S,question:Wt}),N=e=>t(i,{...S,question:Et}),T=e=>t(i,{question:At});var Z,ee,te;b.parameters={...b.parameters,docs:{...(Z=b.parameters)==null?void 0:Z.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <Flipbook />",...(te=(ee=b.parameters)==null?void 0:ee.docs)==null?void 0:te.source}}};var re,oe,se;L.parameters={...L.parameters,docs:{...(re=L.parameters)==null?void 0:re.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI question={angleQuestion} />",...(se=(oe=L.parameters)==null?void 0:oe.docs)==null?void 0:se.source}}};var ne,ie,ae;I.parameters={...I.parameters,docs:{...(ne=I.parameters)==null?void 0:ne.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI question={circleQuestion} />",...(ae=(ie=I.parameters)==null?void 0:ie.docs)==null?void 0:ae.source}}};var ce,le,me;w.parameters={...w.parameters,docs:{...(ce=w.parameters)==null?void 0:ce.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI question={linearQuestion} />",...(me=(le=w.parameters)==null?void 0:le.docs)==null?void 0:me.source}}};var ue,pe,de;C.parameters={...C.parameters,docs:{...(ue=C.parameters)==null?void 0:ue.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI question={linearQuestionWithLockedPoints} />",...(de=(pe=C.parameters)==null?void 0:pe.docs)==null?void 0:de.source}}};var ge,he,fe;W.parameters={...W.parameters,docs:{...(ge=W.parameters)==null?void 0:ge.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI question={linearSystemQuestion} />",...(fe=(he=W.parameters)==null?void 0:he.docs)==null?void 0:fe.source}}};var ye,Se,Re;E.parameters={...E.parameters,docs:{...(ye=E.parameters)==null?void 0:ye.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI question={pointQuestion} />",...(Re=(Se=E.parameters)==null?void 0:Se.docs)==null?void 0:Re.source}}};var ke,qe,xe;A.parameters={...A.parameters,docs:{...(ke=A.parameters)==null?void 0:ke.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI question={polygonQuestion} />",...(xe=(qe=A.parameters)==null?void 0:qe.docs)==null?void 0:xe.source}}};var be,Le,Ie;Q.parameters={...Q.parameters,docs:{...(be=Q.parameters)==null?void 0:be.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI question={rayQuestion} />",...(Ie=(Le=Q.parameters)==null?void 0:Le.docs)==null?void 0:Ie.source}}};var we,Ce,We;v.parameters={...v.parameters,docs:{...(we=v.parameters)==null?void 0:we.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI question={segmentQuestion} />",...(We=(Ce=v.parameters)==null?void 0:Ce.docs)==null?void 0:We.source}}};var Ee,Ae,Qe;_.parameters={..._.parameters,docs:{...(Ee=_.parameters)==null?void 0:Ee.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI {...mafsOptions} question={segmentWithLockedPointsQuestion} />",...(Qe=(Ae=_.parameters)==null?void 0:Ae.docs)==null?void 0:Qe.source}}};var ve,_e,De;D.parameters={...D.parameters,docs:{...(ve=D.parameters)==null?void 0:ve.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI {...mafsOptions} question={segmentWithLockedLineQuestion} />",...(De=(_e=D.parameters)==null?void 0:_e.docs)==null?void 0:De.source}}};var Oe,Pe,Ue;O.parameters={...O.parameters,docs:{...(Oe=O.parameters)==null?void 0:Oe.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI {...mafsOptions} question={segmentWithAllLockedLineSegmentVariations} />",...(Ue=(Pe=O.parameters)==null?void 0:Pe.docs)==null?void 0:Ue.source}}};var Be,Ne,Te;P.parameters={...P.parameters,docs:{...(Be=P.parameters)==null?void 0:Be.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI {...mafsOptions} question={segmentWithAllLockedLineVariations} />",...(Te=(Ne=P.parameters)==null?void 0:Ne.docs)==null?void 0:Te.source}}};var Ve,je,Fe;U.parameters={...U.parameters,docs:{...(Ve=U.parameters)==null?void 0:Ve.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI {...mafsOptions} question={segmentWithAllLockedRayVariations} />",...(Fe=(je=U.parameters)==null?void 0:je.docs)==null?void 0:Fe.source}}};var Ge,ze,Me;B.parameters={...B.parameters,docs:{...(Ge=B.parameters)==null?void 0:Ge.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI {...mafsOptions} question={segmentWithLockedEllipses} />",...(Me=(ze=B.parameters)==null?void 0:ze.docs)==null?void 0:Me.source}}};var He,Je,Ke;N.parameters={...N.parameters,docs:{...(He=N.parameters)==null?void 0:He.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI {...mafsOptions} question={segmentWithLockedVectors} />",...(Ke=(Je=N.parameters)==null?void 0:Je.docs)==null?void 0:Ke.source}}};var $e,Ye,Xe;T.parameters={...T.parameters,docs:{...($e=T.parameters)==null?void 0:$e.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => <RendererWithDebugUI question={sinusoidQuestion} />",...(Xe=(Ye=T.parameters)==null?void 0:Ye.docs)==null?void 0:Xe.source}}};const Ho=["SideBySideFlipbook","Angle","Circle","Linear","LinearWithLockedPoints","LinearSystem","Point","Polygon","Ray","Segment","SegmentWithMafsAndLockedPoints","SegmentWithMafsAndLockedLines","AllLockedLineSegments","AllLockedLines","AllLockedRays","LockedEllipse","LockedVector","Sinusoid"];export{O as AllLockedLineSegments,P as AllLockedLines,U as AllLockedRays,L as Angle,I as Circle,w as Linear,W as LinearSystem,C as LinearWithLockedPoints,B as LockedEllipse,N as LockedVector,E as Point,A as Polygon,Q as Ray,v as Segment,D as SegmentWithMafsAndLockedLines,_ as SegmentWithMafsAndLockedPoints,b as SideBySideFlipbook,T as Sinusoid,Ho as __namedExportsOrder,Mo as default};
