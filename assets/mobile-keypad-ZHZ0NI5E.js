import{j as s}from"./jsx-runtime-63Ea5SlK.js";import{r as c,R as T}from"./index-6oxdNXpR.js";import{l as g}from"./index-awljIyHI.js";import{F as R}from"./index-9gkyvru-.js";import{w as te}from"./index-7-BESUpx.js";import{e as ne}from"./index-J2t_5nK1.js";import{V as E,_ as re,a as ae}from"./index-glC8WTvQ.js";import{_ as ie}from"./assertThisInitialized-4q6YPdh3.js";import{_ as se}from"./index-rDXm6JjH.js";import{c as K}from"./index-dmcq622U.js";import{T as oe}from"./tabbar-3r6sEokv.js";import{u as x,K as y,c as le}from"./button-assets-ozecF1qE.js";import{K as p}from"./keypad-button-vE6mhmf6.js";import{N as ue,O as de,G as pe}from"./operators-page-f8JQHV76.js";import{N as ce}from"./navigation-pad-LynhtGkb.js";var h=(r=>(r.NONE="NONE",r.IN_PARENS="IN_PARENS",r.IN_SUPER_SCRIPT="IN_SUPER_SCRIPT",r.IN_SUB_SCRIPT="IN_SUB_SCRIPT",r.IN_NUMERATOR="IN_NUMERATOR",r.IN_DENOMINATOR="IN_DENOMINATOR",r.BEFORE_FRACTION="BEFORE_FRACTION",r))(h||{});const I=3;function P(r){const{extraKeys:e,onClickKey:t}=r,{strings:i}=x(),a=y(i);return s.jsx(s.Fragment,{children:e.map((n,o)=>{const l=o%I,u=o/I;return s.jsx(p,{keyConfig:a[n],onClickKey:t,coord:[l,u]},n)})})}P.__docgenInfo={description:"",methods:[],displayName:"ExtrasPage",props:{extraKeys:{required:!0,tsType:{name:"ReadonlyArray",elements:[{name:"unknown[number]",raw:"(typeof KeyArray)[number]"}],raw:"ReadonlyArray<Key>"},description:""},onClickKey:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: Key, event?: React.SyntheticEvent) => void",signature:{arguments:[{type:{name:"unknown[number]",raw:"(typeof KeyArray)[number]"},name:"key"},{type:{name:"ReactSyntheticEvent",raw:"React.SyntheticEvent"},name:"event"}],return:{name:"void"}}},description:""}}};const j=500;function D(r,e){if(!e)return null;switch(e){case h.NONE:return null;case h.IN_PARENS:return y(r).JUMP_OUT_PARENTHESES;case h.IN_SUPER_SCRIPT:return y(r).JUMP_OUT_EXPONENT;case h.IN_SUB_SCRIPT:return y(r).JUMP_OUT_BASE;case h.IN_NUMERATOR:return y(r).JUMP_OUT_NUMERATOR;case h.IN_DENOMINATOR:return y(r).JUMP_OUT_DENOMINATOR;case h.BEFORE_FRACTION:return y(r).JUMP_INTO_NUMERATOR}}function O(r){const{onClickKey:e,cursorContext:t}=r,{strings:i}=x(),a=D(i,t),n=y(i);return s.jsxs(s.Fragment,{children:[s.jsx(p,{keyConfig:n.NUM_1,onClickKey:e,coord:[0,2]}),s.jsx(p,{keyConfig:n.NUM_2,onClickKey:e,coord:[1,2]}),s.jsx(p,{keyConfig:n.NUM_3,onClickKey:e,coord:[2,2]}),s.jsx(p,{keyConfig:n.NUM_4,onClickKey:e,coord:[0,1]}),s.jsx(p,{keyConfig:n.NUM_5,onClickKey:e,coord:[1,1]}),s.jsx(p,{keyConfig:n.NUM_6,onClickKey:e,coord:[2,1]}),s.jsx(p,{keyConfig:n.NUM_7,onClickKey:e,coord:[0,0]}),s.jsx(p,{keyConfig:n.NUM_8,onClickKey:e,coord:[1,0]}),s.jsx(p,{keyConfig:n.NUM_9,onClickKey:e,coord:[2,0]}),s.jsx(p,{keyConfig:n.NUM_0,onClickKey:e,coord:[0,3]}),s.jsx(p,{keyConfig:n.DECIMAL,onClickKey:e,coord:[1,3]}),s.jsx(p,{keyConfig:n.NEGATIVE,onClickKey:e,coord:[2,3]}),s.jsx(p,{keyConfig:n.PERCENT,onClickKey:e,coord:[3,0],secondary:!0}),s.jsx(p,{keyConfig:n.PI,onClickKey:e,coord:[3,1],secondary:!0}),s.jsx(p,{keyConfig:n.FRAC,onClickKey:e,coord:[3,2],secondary:!0}),a&&s.jsx(p,{keyConfig:a,onClickKey:e,coord:[3,3],secondary:!0}),s.jsx(p,{keyConfig:n.BACKSPACE,onClickKey:e,coord:[4,3],action:!0})]})}O.__docgenInfo={description:"",methods:[],displayName:"FractionsPage",props:{onClickKey:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: Key, event?: React.SyntheticEvent) => void",signature:{arguments:[{type:{name:"unknown[number]",raw:"(typeof KeyArray)[number]"},name:"key"},{type:{name:"ReactSyntheticEvent",raw:"React.SyntheticEvent"},name:"event"}],return:{name:"void"}}},description:""},cursorContext:{required:!1,tsType:{name:"unknown[unknown]",raw:"(typeof CursorContext)[keyof typeof CursorContext]"},description:""}}};function V(r){const{onClickKey:e,cursorContext:t,divisionKey:i,convertDotToTimes:a,selectedPage:n}=r,{strings:o,locale:l}=x(),u=D(o,t),d=y(o),m=n==="Numbers"||n==="Operators"?[3,1]:[3,0];return s.jsxs(s.Fragment,{children:[s.jsx(p,{keyConfig:d.FRAC,onClickKey:e,coord:m,secondary:!0}),s.jsx(p,{keyConfig:d.PLUS,onClickKey:e,coord:[4,0],secondary:!0}),s.jsx(p,{keyConfig:d.MINUS,onClickKey:e,coord:[5,0],secondary:!0}),s.jsx(p,{keyConfig:le(l,!!a)?d.TIMES:d.CDOT,onClickKey:e,coord:[4,1],secondary:!0}),i&&s.jsx(p,{keyConfig:d.DIVIDE,onClickKey:e,coord:[5,1],secondary:!0}),s.jsx(p,{keyConfig:d.LEFT_PAREN,onClickKey:e,coord:[4,2],secondary:!0}),s.jsx(p,{keyConfig:d.RIGHT_PAREN,onClickKey:e,coord:[5,2],secondary:!0}),u&&s.jsx(p,{keyConfig:u,onClickKey:e,coord:[4,3],secondary:!0}),s.jsx(p,{keyConfig:d.BACKSPACE,onClickKey:e,coord:[5,3],action:!0})]})}V.__docgenInfo={description:"",methods:[],displayName:"SharedKeys",props:{onClickKey:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: Key, event?: React.SyntheticEvent) => void",signature:{arguments:[{type:{name:"unknown[number]",raw:"(typeof KeyArray)[number]"},name:"key"},{type:{name:"ReactSyntheticEvent",raw:"React.SyntheticEvent"},name:"event"}],return:{name:"void"}}},description:""},selectedPage:{required:!0,tsType:{name:"union",raw:`| "Geometry"
| "Operators"
| "Numbers"
| "Fractions"
| "Extras"
| "Dismiss"`,elements:[{name:"literal",value:'"Geometry"'},{name:"literal",value:'"Operators"'},{name:"literal",value:'"Numbers"'},{name:"literal",value:'"Fractions"'},{name:"literal",value:'"Extras"'},{name:"literal",value:'"Dismiss"'}]},description:""},cursorContext:{required:!1,tsType:{name:"unknown[unknown]",raw:"(typeof CursorContext)[keyof typeof CursorContext]"},description:""},convertDotToTimes:{required:!1,tsType:{name:"boolean"},description:""},divisionKey:{required:!1,tsType:{name:"boolean"},description:""}}};function me(r){var t;if(r.fractionsOnly)return[];const e=["Numbers"];return(r.preAlgebra||r.logarithms||r.basicRelations||r.advancedRelations)&&e.push("Operators"),r.trigonometry&&e.push("Geometry"),(t=r.extraKeys)!=null&&t.length&&e.push("Extras"),e}function U({extraKeys:r=[],...e}){const t=e.fractionsOnly?"Fractions":"Numbers",[i,a]=c.useState(t),[n,o]=c.useState(!1),l=me({...e,extraKeys:r}),{onClickKey:u,cursorContext:d,convertDotToTimes:m,divisionKey:W,preAlgebra:Y,logarithms:B,basicRelations:Q,advancedRelations:J,scientific:$,showDismiss:X,onAnalyticsEvent:C,fractionsOnly:_,expandedView:w}=e,Z=_?f.fractionsGrid:f.expressionGrid;return c.useEffect(()=>{a(t)},[_,t]),c.useEffect(()=>(n||(C({type:"math-input:keypad-opened",payload:{virtualKeypadVersion:"MATH_INPUT_KEYPAD_V2"}}),o(!0)),()=>{n&&(C({type:"math-input:keypad-closed",payload:{virtualKeypadVersion:"MATH_INPUT_KEYPAD_V2"}}),o(!1))}),[C,n]),s.jsx(E,{style:w?f.keypadOuterContainer:null,children:s.jsxs(E,{style:[f.wrapper,w?f.expandedWrapper:null],children:[s.jsx(oe,{items:l,selectedItem:i,onSelectItem:ee=>{a(ee)},onClickClose:X?()=>u("DISMISS"):void 0}),s.jsxs(E,{style:f.keypadInnerContainer,children:[s.jsxs(E,{style:[f.keypadGrid,Z],"aria-label":"Keypad",children:[i==="Fractions"&&s.jsx(O,{onClickKey:u,cursorContext:d}),i==="Numbers"&&s.jsx(ue,{onClickKey:u,scientific:$}),i==="Extras"&&s.jsx(P,{onClickKey:u,extraKeys:r}),i==="Operators"&&s.jsx(de,{onClickKey:u,preAlgebra:Y,logarithms:B,basicRelations:Q,advancedRelations:J}),i==="Geometry"&&s.jsx(pe,{onClickKey:u}),!_&&s.jsx(V,{onClickKey:u,cursorContext:d,convertDotToTimes:m,divisionKey:W,selectedPage:i})]}),w&&s.jsx(ce,{onClickKey:u})]})]})})}const f=g.StyleSheet.create({keypadOuterContainer:{display:"flex",alignItems:"center"},wrapper:{background:K.white},expandedWrapper:{borderWidth:"1px 1px 0 1px",borderColor:K.offBlack32,maxWidth:j,borderRadius:"3px 3px 0 0"},keypadInnerContainer:{display:"flex",flexDirection:"row",backgroundColor:"#DBDCDD"},keypadGrid:{display:"grid",gridTemplateRows:"repeat(4, 1fr)",flex:1},expressionGrid:{gridTemplateColumns:"repeat(6, 1fr)"},fractionsGrid:{gridTemplateColumns:"repeat(5, 1fr)"}});U.__docgenInfo={description:"",methods:[],displayName:"Keypad",props:{extraKeys:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"unknown[number]",raw:"(typeof KeyArray)[number]"}],raw:"ReadonlyArray<Key>"},description:"",defaultValue:{value:"[]",computed:!1}},cursorContext:{required:!1,tsType:{name:"unknown[unknown]",raw:"(typeof CursorContext)[keyof typeof CursorContext]"},description:""},showDismiss:{required:!1,tsType:{name:"boolean"},description:""},expandedView:{required:!1,tsType:{name:"boolean"},description:""},convertDotToTimes:{required:!1,tsType:{name:"boolean"},description:""},divisionKey:{required:!1,tsType:{name:"boolean"},description:""},trigonometry:{required:!1,tsType:{name:"boolean"},description:""},preAlgebra:{required:!1,tsType:{name:"boolean"},description:""},logarithms:{required:!1,tsType:{name:"boolean"},description:""},basicRelations:{required:!1,tsType:{name:"boolean"},description:""},advancedRelations:{required:!1,tsType:{name:"boolean"},description:""},fractionsOnly:{required:!1,tsType:{name:"boolean"},description:""},scientific:{required:!1,tsType:{name:"boolean"},description:""},onClickKey:{required:!0,tsType:{name:"signature",type:"function",raw:"(key: Key, event?: React.SyntheticEvent) => void",signature:{arguments:[{type:{name:"unknown[number]",raw:"(typeof KeyArray)[number]"},name:"key"},{type:{name:"ReactSyntheticEvent",raw:"React.SyntheticEvent"},name:"event"}],return:{name:"void"}}},description:""},onAnalyticsEvent:{required:!0,tsType:{name:"signature",type:"function",raw:`(
    event: PerseusAnalyticsEvent,
) => Promise<void>`,signature:{arguments:[{type:{name:"union",raw:`| {
      type: "perseus:expression-evaluated";
      payload: {
          virtualKeypadVersion: VirtualKeypadVersion;
          result: "correct" | "incorrect" | "invalid";
      };
  }
| {
      type: "perseus:expression-focused";
      payload: null;
  }
| {
      type: "perseus:widget-rendering-error";
      payload: {
          widgetType: string;
          widgetId: string;
      };
  }
| {
      type: "perseus:interactive-graph-widget:rendered";
      payload: {
          type: string;
          widgetType: string;
          widgetId: string;
      };
  }
| {
      type: "perseus:label-image:toggle-answers-hidden";
      payload: null;
  }
| {
      type: "perseus:label-image:marker-interacted-with";
      payload: null;
  }
| {
      type: "perseus:label-image:choiced-interacted-with";
      payload: null;
  }
| {
      type: "math-input:keypad-closed";
      payload: {
          virtualKeypadVersion: VirtualKeypadVersion;
      };
  }
| {
      type: "math-input:keypad-opened";
      payload: {
          virtualKeypadVersion: VirtualKeypadVersion;
      };
  }`,elements:[{name:"signature",type:"object",raw:`{
    type: "perseus:expression-evaluated";
    payload: {
        virtualKeypadVersion: VirtualKeypadVersion;
        result: "correct" | "incorrect" | "invalid";
    };
}`,signature:{properties:[{key:"type",value:{name:"literal",value:'"perseus:expression-evaluated"',required:!0}},{key:"payload",value:{name:"signature",type:"object",raw:`{
    virtualKeypadVersion: VirtualKeypadVersion;
    result: "correct" | "incorrect" | "invalid";
}`,signature:{properties:[{key:"virtualKeypadVersion",value:{name:"union",raw:`| "MATH_INPUT_KEYPAD_V2"
| "REACT_NATIVE_KEYPAD"`,elements:[{name:"literal",value:'"MATH_INPUT_KEYPAD_V2"'},{name:"literal",value:'"REACT_NATIVE_KEYPAD"'}],required:!0}},{key:"result",value:{name:"union",raw:'"correct" | "incorrect" | "invalid"',elements:[{name:"literal",value:'"correct"'},{name:"literal",value:'"incorrect"'},{name:"literal",value:'"invalid"'}],required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:`{
    type: "perseus:expression-focused";
    payload: null;
}`,signature:{properties:[{key:"type",value:{name:"literal",value:'"perseus:expression-focused"',required:!0}},{key:"payload",value:{name:"null",required:!0}}]}},{name:"signature",type:"object",raw:`{
    type: "perseus:widget-rendering-error";
    payload: {
        widgetType: string;
        widgetId: string;
    };
}`,signature:{properties:[{key:"type",value:{name:"literal",value:'"perseus:widget-rendering-error"',required:!0}},{key:"payload",value:{name:"signature",type:"object",raw:`{
    widgetType: string;
    widgetId: string;
}`,signature:{properties:[{key:"widgetType",value:{name:"string",required:!0}},{key:"widgetId",value:{name:"string",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:`{
    type: "perseus:interactive-graph-widget:rendered";
    payload: {
        type: string;
        widgetType: string;
        widgetId: string;
    };
}`,signature:{properties:[{key:"type",value:{name:"literal",value:'"perseus:interactive-graph-widget:rendered"',required:!0}},{key:"payload",value:{name:"signature",type:"object",raw:`{
    type: string;
    widgetType: string;
    widgetId: string;
}`,signature:{properties:[{key:"type",value:{name:"string",required:!0}},{key:"widgetType",value:{name:"string",required:!0}},{key:"widgetId",value:{name:"string",required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:`{
    type: "perseus:label-image:toggle-answers-hidden";
    payload: null;
}`,signature:{properties:[{key:"type",value:{name:"literal",value:'"perseus:label-image:toggle-answers-hidden"',required:!0}},{key:"payload",value:{name:"null",required:!0}}]}},{name:"signature",type:"object",raw:`{
    type: "perseus:label-image:marker-interacted-with";
    payload: null;
}`,signature:{properties:[{key:"type",value:{name:"literal",value:'"perseus:label-image:marker-interacted-with"',required:!0}},{key:"payload",value:{name:"null",required:!0}}]}},{name:"signature",type:"object",raw:`{
    type: "perseus:label-image:choiced-interacted-with";
    payload: null;
}`,signature:{properties:[{key:"type",value:{name:"literal",value:'"perseus:label-image:choiced-interacted-with"',required:!0}},{key:"payload",value:{name:"null",required:!0}}]}},{name:"signature",type:"object",raw:`{
    type: "math-input:keypad-closed";
    payload: {
        virtualKeypadVersion: VirtualKeypadVersion;
    };
}`,signature:{properties:[{key:"type",value:{name:"literal",value:'"math-input:keypad-closed"',required:!0}},{key:"payload",value:{name:"signature",type:"object",raw:`{
    virtualKeypadVersion: VirtualKeypadVersion;
}`,signature:{properties:[{key:"virtualKeypadVersion",value:{name:"union",raw:`| "MATH_INPUT_KEYPAD_V2"
| "REACT_NATIVE_KEYPAD"`,elements:[{name:"literal",value:'"MATH_INPUT_KEYPAD_V2"'},{name:"literal",value:'"REACT_NATIVE_KEYPAD"'}],required:!0}}]},required:!0}}]}},{name:"signature",type:"object",raw:`{
    type: "math-input:keypad-opened";
    payload: {
        virtualKeypadVersion: VirtualKeypadVersion;
    };
}`,signature:{properties:[{key:"type",value:{name:"literal",value:'"math-input:keypad-opened"',required:!0}},{key:"payload",value:{name:"signature",type:"object",raw:`{
    virtualKeypadVersion: VirtualKeypadVersion;
}`,signature:{properties:[{key:"virtualKeypadVersion",value:{name:"union",raw:`| "MATH_INPUT_KEYPAD_V2"
| "REACT_NATIVE_KEYPAD"`,elements:[{name:"literal",value:'"MATH_INPUT_KEYPAD_V2"'},{name:"literal",value:'"REACT_NATIVE_KEYPAD"'}],required:!0}}]},required:!0}}]}}]},name:"event"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}}},description:""}}};const H=c.createContext({setKeypadActive:r=>{},keypadActive:!1,setKeypadElement:r=>{},keypadElement:null,setRenderer:r=>{},renderer:null,setScrollableElement:r=>{},scrollableElement:null});function ye(r){const[e,t]=c.useState(!1),[i,a]=c.useState(),[n,o]=c.useState(),[l,u]=c.useState(),d=c.useMemo(()=>({keypadActive:e,setKeypadActive:t,keypadElement:i,setKeypadElement:a,renderer:n,setRenderer:o,scrollableElement:l,setScrollableElement:u}),[e,t,i,a,n,o,l,u]);return s.jsx(H.Provider,{value:d,children:r.children})}ye.__docgenInfo={description:"",methods:[],displayName:"StatefulKeypadContextProvider"};const k=class k extends c.Component{render(){const e=g.css(k.styles.initial,...Array.isArray(this.props.style)?this.props.style:[this.props.style])+(this.props.extraClassName?` ${this.props.extraClassName}`:"");return s.jsx("div",{className:e,style:this.props.dynamicStyle,onClick:this.props.onClick,onTouchCancel:this.props.onTouchCancel,onTouchEnd:this.props.onTouchEnd,onTouchMove:this.props.onTouchMove,onTouchStart:this.props.onTouchStart,"aria-label":this.props.ariaLabel,role:this.props.role,ref:this.props.forwardRef,children:this.props.children})}};k.styles=g.StyleSheet.create({initial:{alignItems:"stretch",borderWidth:0,borderStyle:"solid",boxSizing:"border-box",display:"flex",flexBasis:"auto",flexDirection:"column",margin:0,padding:0,position:"relative",backgroundColor:"transparent",color:"inherit",font:"inherit",textAlign:"inherit",textDecorationLine:"none",listStyle:"none",maxWidth:"100%",minHeight:0,minWidth:0}});let S=k;S.__docgenInfo={description:"",methods:[],displayName:"View",props:{ariaLabel:{required:!1,tsType:{name:"string"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},dynamicStyle:{required:!1,tsType:{name:"CSSProperties"},description:""},extraClassName:{required:!1,tsType:{name:"string"},description:""},numberOfLines:{required:!1,tsType:{name:"number"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(arg1: React.SyntheticEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactSyntheticEvent",raw:"React.SyntheticEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"arg1"}],return:{name:"void"}}},description:""},onTouchCancel:{required:!1,tsType:{name:"signature",type:"function",raw:"(arg1: React.TouchEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactTouchEvent",raw:"React.TouchEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"arg1"}],return:{name:"void"}}},description:""},onTouchEnd:{required:!1,tsType:{name:"signature",type:"function",raw:"(arg1: React.TouchEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactTouchEvent",raw:"React.TouchEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"arg1"}],return:{name:"void"}}},description:""},onTouchMove:{required:!1,tsType:{name:"signature",type:"function",raw:"(arg1: React.TouchEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactTouchEvent",raw:"React.TouchEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"arg1"}],return:{name:"void"}}},description:""},onTouchStart:{required:!1,tsType:{name:"signature",type:"function",raw:"(arg1: React.TouchEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactTouchEvent",raw:"React.TouchEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"arg1"}],return:{name:"void"}}},description:""},role:{required:!1,tsType:{name:"string"},description:""},style:{required:!1,tsType:{name:"StyleType"},description:""},forwardRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},description:""}}};const M=T.createContext(null);function N(r,e){var t=function(n){return e&&c.isValidElement(n)?e(n):n},i=Object.create(null);return r&&c.Children.map(r,function(a){return a}).forEach(function(a){i[a.key]=t(a)}),i}function he(r,e){r=r||{},e=e||{};function t(m){return m in e?e[m]:r[m]}var i=Object.create(null),a=[];for(var n in r)n in e?a.length&&(i[n]=a,a=[]):a.push(n);var o,l={};for(var u in e){if(i[u])for(o=0;o<i[u].length;o++){var d=i[u][o];l[i[u][o]]=t(d)}l[u]=t(u)}for(o=0;o<a.length;o++)l[a[o]]=t(a[o]);return l}function v(r,e,t){return t[e]!=null?t[e]:r.props[e]}function fe(r,e){return N(r.children,function(t){return c.cloneElement(t,{onExited:e.bind(null,t),in:!0,appear:v(t,"appear",r),enter:v(t,"enter",r),exit:v(t,"exit",r)})})}function ve(r,e,t){var i=N(r.children),a=he(e,i);return Object.keys(a).forEach(function(n){var o=a[n];if(c.isValidElement(o)){var l=n in e,u=n in i,d=e[n],m=c.isValidElement(d)&&!d.props.in;u&&(!l||m)?a[n]=c.cloneElement(o,{onExited:t.bind(null,o),in:!0,exit:v(o,"exit",r),enter:v(o,"enter",r)}):!u&&l&&!m?a[n]=c.cloneElement(o,{in:!1}):u&&l&&c.isValidElement(d)&&(a[n]=c.cloneElement(o,{onExited:t.bind(null,o),in:d.props.in,exit:v(o,"exit",r),enter:v(o,"enter",r)}))}}),a}var ge=Object.values||function(r){return Object.keys(r).map(function(e){return r[e]})},Te={component:"div",childFactory:function(e){return e}},A=function(r){se(e,r);function e(i,a){var n;n=r.call(this,i,a)||this;var o=n.handleExited.bind(ie(n));return n.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},n}var t=e.prototype;return t.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},t.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(a,n){var o=n.children,l=n.handleExited,u=n.firstRender;return{children:u?fe(a,l):ve(a,o,l),firstRender:!1}},t.handleExited=function(a,n){var o=N(this.props.children);a.key in o||(a.props.onExited&&a.props.onExited(n),this.mounted&&this.setState(function(l){var u=re({},l.children);return delete u[a.key],{children:u}}))},t.render=function(){var a=this.props,n=a.component,o=a.childFactory,l=ae(a,["component","childFactory"]),u=this.state.contextValue,d=ge(this.state.children).map(o);return delete l.appear,delete l.enter,delete l.exit,n===null?T.createElement(M.Provider,{value:u},d):T.createElement(M.Provider,{value:u},T.createElement(n,l,d))},e}(T.Component);A.propTypes={};A.defaultProps=Te;function L(r){const e=[];if(!r)return e;if(Array.isArray(r))for(const t of r)e.push(...L(t));else e.push(r);return e}function q(r){const e=[],t=[];if(!r)return{style:{},className:""};const i=typeof globalThis<"u"&&globalThis.SNAPSHOT_INLINE_APHRODITE;L(r).forEach(n=>{const o=n._definition;if(o!=null)if(i){const l={};for(const[u,d]of ne(o))l[u.replace(/-[a-z]/g,m=>m[1].toUpperCase())]=d;t.push(l)}else e.push(n);else t.push(n)});const a=Object.assign({},...t);if(t.length>0&&!i){const n=g.StyleSheet.create({inlineStyles:a});e.push(n.inlineStyles)}return{style:i?a:{},className:g.css(...e)}}class F extends c.Component{constructor(e){super(e),this._isMounted=!1,this.addClass=(t,i)=>{i&&(t.classList.add(i),this.appliedClassNames.add(i))},this.removeClass=(t,i)=>{i&&(t.classList.remove(i),this.appliedClassNames.delete(i))},this.flushClassNameQueue=()=>{if(this._isMounted){const t=R.findDOMNode(this);t instanceof Element&&this.classNameQueue.forEach(([i,a])=>{this.removeClass(t,i),this.addClass(t,a)})}this.classNameQueue.length=0},this._isMounted=!1,this.classNameQueue=[],this.appliedClassNames=new Set,this.state={status:"mounted"}}static getDerivedStateFromProps({in:e},t){return e&&t.status==="unmounted"?{status:"mounted"}:null}componentDidMount(){this._isMounted=!0,typeof this.props.appearTimeout=="number"?this.transition("appear",this.props.appearTimeout):this.transition("enter",this.props.enterTimeout)}componentDidUpdate(e,t){e.in&&!this.props.in?this.transition("leave",this.props.leaveTimeout):!e.in&&this.props.in&&this.transition("enter",this.props.enterTimeout),t.status!=="mounted"&&this.state.status==="mounted"&&this.setState({status:"unmounted"})}componentWillUnmount(){this._isMounted=!1,this.props.schedule.clearAll()}removeAllClasses(e){for(const t of this.appliedClassNames)this.removeClass(e,t)}transition(e,t){const i=R.findDOMNode(this);if(!(i instanceof Element))return;this.removeAllClasses(i),this.props.schedule.clearAll();const a=typeof this.props.transitionStyles=="function"?this.props.transitionStyles():this.props.transitionStyles,{className:n}=q(a[e]),{className:o}=q([a[e],a[e+"Active"]]);this.addClass(i,n),this.queueClass(n,o),e==="leave"&&this.props.schedule.timeout(()=>{this._isMounted&&this.setState({status:"unmounted"})},t||0)}queueClass(e,t){this.classNameQueue.push([e,t]),this.props.schedule.timeout(this.flushClassNameQueue,0)}render(){const{status:e}=this.state;return e==="unmounted"?null:this.props.children}}const Ee=te(F);F.__docgenInfo={description:"",methods:[{name:"removeAllClasses",docblock:null,modifiers:[],params:[{name:"node",optional:!1,type:{name:"Element",alias:"Element"}}],returns:null},{name:"addClass",docblock:null,modifiers:[],params:[{name:"elem",optional:!1,type:{name:"Element",alias:"Element"}},{name:"className",optional:!1,type:{name:"string"}}],returns:{type:{name:"void"}}},{name:"removeClass",docblock:null,modifiers:[],params:[{name:"elem",optional:!1,type:{name:"Element",alias:"Element"}},{name:"className",optional:!1,type:{name:"string"}}],returns:{type:{name:"void"}}},{name:"transition",docblock:null,modifiers:[],params:[{name:"animationType",optional:!1,type:{name:"union",raw:'"appear" | "enter" | "leave"',elements:[{name:"literal",value:'"appear"'},{name:"literal",value:'"enter"'},{name:"literal",value:'"leave"'}]}},{name:"duration",optional:!0,type:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]}}],returns:null},{name:"queueClass",docblock:null,modifiers:[],params:[{name:"removeClassName",optional:!1,type:{name:"string"}},{name:"addClassName",optional:!1,type:{name:"string"}}],returns:null},{name:"flushClassNameQueue",docblock:null,modifiers:[],params:[],returns:null}],displayName:"TransitionChild",props:{transitionStyles:{required:!0,tsType:{name:"union",raw:"AnimationStyles | (() => AnimationStyles)",elements:[{name:"signature",type:"object",raw:`{
    enter?: StyleType;
    enterActive?: StyleType;
    leave?: StyleType;
    leaveActive?: StyleType;
    appear?: StyleType;
    appearActive?: StyleType;
}`,signature:{properties:[{key:"enter",value:{name:"StyleType",required:!1}},{key:"enterActive",value:{name:"StyleType",required:!1}},{key:"leave",value:{name:"StyleType",required:!1}},{key:"leaveActive",value:{name:"StyleType",required:!1}},{key:"appear",value:{name:"StyleType",required:!1}},{key:"appearActive",value:{name:"StyleType",required:!1}}]}},{name:"unknown"}]},description:""},appearTimeout:{required:!1,tsType:{name:"number"},description:""},enterTimeout:{required:!1,tsType:{name:"number"},description:""},leaveTimeout:{required:!1,tsType:{name:"number"},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},in:{required:!1,tsType:{name:"boolean"},description:""}}};class z extends c.Component{render(){const{children:e}=this.props;return s.jsx(A,{component:null,children:c.Children.map(e,t=>s.jsx(Ee,{transitionStyles:this.props.transitionStyle,appearTimeout:this.props.transitionAppearTimeout,enterTimeout:this.props.transitionEnterTimeout,leaveTimeout:this.props.transitionLeaveTimeout,children:t}))})}}z.__docgenInfo={description:"",methods:[],displayName:"AphroditeCSSTransitionGroup",props:{transitionStyle:{required:!0,tsType:{name:"union",raw:"AnimationStyles | (() => AnimationStyles)",elements:[{name:"signature",type:"object",raw:`{
    enter?: StyleType;
    enterActive?: StyleType;
    leave?: StyleType;
    leaveActive?: StyleType;
    appear?: StyleType;
    appearActive?: StyleType;
}`,signature:{properties:[{key:"enter",value:{name:"StyleType",required:!1}},{key:"enterActive",value:{name:"StyleType",required:!1}},{key:"leave",value:{name:"StyleType",required:!1}},{key:"leaveActive",value:{name:"StyleType",required:!1}},{key:"appear",value:{name:"StyleType",required:!1}},{key:"appearActive",value:{name:"StyleType",required:!1}}]}},{name:"unknown"}]},description:""},transitionAppearTimeout:{required:!1,tsType:{name:"number"},description:""},transitionEnterTimeout:{required:!1,tsType:{name:"number"},description:""},transitionLeaveTimeout:{required:!1,tsType:{name:"number"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};const b=200;class G extends c.Component{constructor(){super(...arguments),this._containerRef=c.createRef(),this._containerResizeObserver=null,this._throttleResize=!1,this.state={containerWidth:0},this._resize=()=>{var t;const e=((t=this._containerRef.current)==null?void 0:t.clientWidth)||0;this.setState({containerWidth:e})},this._throttleResizeHandler=()=>{this._throttleResize||(this._throttleResize=!0,setTimeout(()=>{this._resize(),this._throttleResize=!1},100))},this.activate=()=>{this.props.setKeypadActive(!0)},this.dismiss=()=>{var e,t;this.props.setKeypadActive(!1),(t=(e=this.props).onDismiss)==null||t.call(e)},this.configure=(e,t)=>{this.setState({keypadConfig:e}),setTimeout(()=>t&&t())},this.setCursor=e=>{this.setState({cursor:e})},this.setKeyHandler=e=>{this.setState({keyHandler:e})},this.getDOMNode=()=>R.findDOMNode(this)}componentDidMount(){var e,t;this._resize(),window.addEventListener("resize",this._throttleResizeHandler),window.addEventListener("orientationchange",this._throttleResizeHandler),"ResizeObserver"in window&&(this._containerResizeObserver=new window.ResizeObserver(this._throttleResizeHandler),this._containerRef.current&&this._containerResizeObserver.observe(this._containerRef.current)),(t=(e=this.props).onElementMounted)==null||t.call(e,{activate:this.activate,dismiss:this.dismiss,configure:this.configure,setCursor:this.setCursor,setKeyHandler:this.setKeyHandler,getDOMNode:this.getDOMNode})}componentWillUnmount(){var e;window.removeEventListener("resize",this._throttleResizeHandler),window.removeEventListener("orientationchange",this._throttleResizeHandler),(e=this._containerResizeObserver)==null||e.disconnect()}_handleClickKey(e){var i,a;if(e==="DISMISS"){this.dismiss();return}const t=(a=(i=this.state).keyHandler)==null?void 0:a.call(i,e);this.setState({cursor:t})}render(){const{keypadActive:e,style:t}=this.props,{containerWidth:i,cursor:a,keypadConfig:n}=this.state,o=[be.keypadContainer,...Array.isArray(t)?t:[t]],l=(n==null?void 0:n.keypadType)==="EXPRESSION",u=n==null?void 0:n.times;return s.jsx(S,{style:o,forwardRef:this._containerRef,children:s.jsx(z,{transitionEnterTimeout:b,transitionLeaveTimeout:b,transitionStyle:{enter:{transform:"translate3d(0, 100%, 0)",transition:`${b}ms ease-out`},enterActive:{transform:"translate3d(0, 0, 0)"},leave:{transform:"translate3d(0, 0, 0)",transition:`${b}ms ease-out`},leaveActive:{transform:"translate3d(0, 100%, 0)"}},children:e?s.jsx(U,{onAnalyticsEvent:this.props.onAnalyticsEvent,extraKeys:n==null?void 0:n.extraKeys,onClickKey:d=>this._handleClickKey(d),cursorContext:a==null?void 0:a.context,fractionsOnly:!l,convertDotToTimes:u,divisionKey:l,trigonometry:l,preAlgebra:l,logarithms:l,basicRelations:l,advancedRelations:l,expandedView:i>j,showDismiss:!0,scientific:l&&(n==null?void 0:n.scientific)}):null})})}}const be=g.StyleSheet.create({keypadContainer:{bottom:0,left:0,right:0,position:"fixed"}});G.__docgenInfo={description:`This is the v2 equivalent of v1's ProvidedKeypad. It follows the same
external API so that it can be hot-swapped with the v1 keypad and
is responsible for connecting the keypad with MathInput and the Renderer.

Ideally this strategy of attaching methods on the class component for
other components to call will be replaced props/callbacks since React
doesn't support this type of code anymore (functional components
can't have methods attached to them).`,methods:[{name:"_resize",docblock:null,modifiers:[],params:[],returns:null},{name:"_throttleResizeHandler",docblock:null,modifiers:[],params:[],returns:null},{name:"activate",docblock:null,modifiers:[],params:[],returns:null},{name:"dismiss",docblock:null,modifiers:[],params:[],returns:null},{name:"configure",docblock:null,modifiers:[],params:[{name:"configuration",optional:!1,type:null},{name:"cb",optional:!1,type:null}],returns:null},{name:"setCursor",docblock:null,modifiers:[],params:[{name:"cursor",optional:!1,type:null}],returns:null},{name:"setKeyHandler",docblock:null,modifiers:[],params:[{name:"keyHandler",optional:!1,type:null}],returns:null},{name:"getDOMNode",docblock:null,modifiers:[],params:[],returns:null},{name:"_handleClickKey",docblock:null,modifiers:[],params:[{name:"key",optional:!1,type:{name:"unknown[number]",raw:"(typeof KeyArray)[number]",alias:"Key"}}],returns:null}],displayName:"MobileKeypadInternals"};function Se(r){return s.jsx(H.Consumer,{children:({keypadActive:e,setKeypadActive:t})=>s.jsx(G,{...r,keypadActive:e,setKeypadActive:t})})}Se.__docgenInfo={description:"",methods:[],displayName:"MobileKeypad"};export{h as C,U as K,Se as M,ye as S,S as V,H as a};
