import{a as Ue}from"./version-akiLXZts.js";import{c as He,g as Ke}from"./_commonjsHelpers-4gQjN7DL.js";const Je="@khanacademy/kas",Ye="__lib_version__";Ue(Je,Ye);var qe={exports:{}};(function(N,t){(function(){var s=this,c=s._,l={},o=Array.prototype,y=Object.prototype,E=Function.prototype,w=o.push,g=o.slice,p=o.concat,d=y.toString,m=y.hasOwnProperty,k=o.forEach,x=o.map,O=o.reduce,_=o.reduceRight,T=o.filter,H=o.every,Y=o.some,re=o.indexOf,he=o.lastIndexOf,Q=Array.isArray,j=Object.keys,ie=E.bind,r=function(e){if(e instanceof r)return e;if(!(this instanceof r))return new r(e);this._wrapped=e};N.exports&&(t=N.exports=r),t._=r,r.VERSION="1.4.4";var z=r.each=r.forEach=function(e,n,i){if(e!=null){if(k&&e.forEach===k)e.forEach(n,i);else if(e.length===+e.length){for(var a=0,u=e.length;a<u;a++)if(n.call(i,e[a],a,e)===l)return}else for(var v in e)if(r.has(e,v)&&n.call(i,e[v],v,e)===l)return}};r.map=r.collect=function(e,n,i){var a=[];return e==null?a:x&&e.map===x?e.map(n,i):(z(e,function(u,v,f){a[a.length]=n.call(i,u,v,f)}),a)};var pe="Reduce of empty array with no initial value";r.reduce=r.foldl=r.inject=function(e,n,i,a){var u=arguments.length>2;if(e==null&&(e=[]),O&&e.reduce===O)return a&&(n=r.bind(n,a)),u?e.reduce(n,i):e.reduce(n);if(z(e,function(v,f,P){u?i=n.call(a,i,v,f,P):(i=v,u=!0)}),!u)throw new TypeError(pe);return i},r.reduceRight=r.foldr=function(e,n,i,a){var u=arguments.length>2;if(e==null&&(e=[]),_&&e.reduceRight===_)return a&&(n=r.bind(n,a)),u?e.reduceRight(n,i):e.reduceRight(n);var v=e.length;if(v!==+v){var f=r.keys(e);v=f.length}if(z(e,function(P,D,K){D=f?f[--v]:--v,u?i=n.call(a,i,e[D],D,K):(i=e[D],u=!0)}),!u)throw new TypeError(pe);return i},r.find=r.detect=function(e,n,i){var a;return X(e,function(u,v,f){if(n.call(i,u,v,f))return a=u,!0}),a},r.filter=r.select=function(e,n,i){var a=[];return e==null?a:T&&e.filter===T?e.filter(n,i):(z(e,function(u,v,f){n.call(i,u,v,f)&&(a[a.length]=u)}),a)},r.reject=function(e,n,i){return r.filter(e,function(a,u,v){return!n.call(i,a,u,v)},i)},r.every=r.all=function(e,n,i){n||(n=r.identity);var a=!0;return e==null?a:H&&e.every===H?e.every(n,i):(z(e,function(u,v,f){if(!(a=a&&n.call(i,u,v,f)))return l}),!!a)};var X=r.some=r.any=function(e,n,i){n||(n=r.identity);var a=!1;return e==null?a:Y&&e.some===Y?e.some(n,i):(z(e,function(u,v,f){if(a||(a=n.call(i,u,v,f)))return l}),!!a)};r.contains=r.include=function(e,n){return e==null?!1:re&&e.indexOf===re?e.indexOf(n)!=-1:X(e,function(i){return i===n})},r.invoke=function(e,n){var i=g.call(arguments,2),a=r.isFunction(n);return r.map(e,function(u){return(a?n:u[n]).apply(u,i)})},r.pluck=function(e,n){return r.map(e,function(i){return i[n]})},r.where=function(e,n,i){return r.isEmpty(n)?i?null:[]:r[i?"find":"filter"](e,function(a){for(var u in n)if(n[u]!==a[u])return!1;return!0})},r.findWhere=function(e,n){return r.where(e,n,!0)},r.max=function(e,n,i){if(!n&&r.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!n&&r.isEmpty(e))return-1/0;var a={computed:-1/0,value:-1/0};return z(e,function(u,v,f){var P=n?n.call(i,u,v,f):u;P>=a.computed&&(a={value:u,computed:P})}),a.value},r.min=function(e,n,i){if(!n&&r.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!n&&r.isEmpty(e))return 1/0;var a={computed:1/0,value:1/0};return z(e,function(u,v,f){var P=n?n.call(i,u,v,f):u;P<a.computed&&(a={value:u,computed:P})}),a.value},r.shuffle=function(e){var n,i=0,a=[];return z(e,function(u){n=r.random(i++),a[i-1]=a[n],a[n]=u}),a};var $=function(e){return r.isFunction(e)?e:function(n){return n[e]}};r.sortBy=function(e,n,i){var a=$(n);return r.pluck(r.map(e,function(u,v,f){return{value:u,index:v,criteria:a.call(i,u,v,f)}}).sort(function(u,v){var f=u.criteria,P=v.criteria;if(f!==P){if(f>P||f===void 0)return 1;if(f<P||P===void 0)return-1}return u.index<v.index?-1:1}),"value")};var M=function(e,n,i,a){var u={},v=$(n||r.identity);return z(e,function(f,P){var D=v.call(i,f,P,e);a(u,D,f)}),u};r.groupBy=function(e,n,i){return M(e,n,i,function(a,u,v){(r.has(a,u)?a[u]:a[u]=[]).push(v)})},r.countBy=function(e,n,i){return M(e,n,i,function(a,u){r.has(a,u)||(a[u]=0),a[u]++})},r.sortedIndex=function(e,n,i,a){i=i==null?r.identity:$(i);for(var u=i.call(a,n),v=0,f=e.length;v<f;){var P=v+f>>>1;i.call(a,e[P])<u?v=P+1:f=P}return v},r.toArray=function(e){return e?r.isArray(e)?g.call(e):e.length===+e.length?r.map(e,r.identity):r.values(e):[]},r.size=function(e){return e==null?0:e.length===+e.length?e.length:r.keys(e).length},r.first=r.head=r.take=function(e,n,i){if(e!=null)return n!=null&&!i?g.call(e,0,n):e[0]},r.initial=function(e,n,i){return g.call(e,0,e.length-(n==null||i?1:n))},r.last=function(e,n,i){if(e!=null)return n!=null&&!i?g.call(e,Math.max(e.length-n,0)):e[e.length-1]},r.rest=r.tail=r.drop=function(e,n,i){return g.call(e,n==null||i?1:n)},r.compact=function(e){return r.filter(e,r.identity)};var V=function(e,n,i){return z(e,function(a){r.isArray(a)?n?w.apply(i,a):V(a,n,i):i.push(a)}),i};r.flatten=function(e,n){return V(e,n,[])},r.without=function(e){return r.difference(e,g.call(arguments,1))},r.uniq=r.unique=function(e,n,i,a){r.isFunction(n)&&(a=i,i=n,n=!1);var u=i?r.map(e,i,a):e,v=[],f=[];return z(u,function(P,D){(n?!D||f[f.length-1]!==P:!r.contains(f,P))&&(f.push(P),v.push(e[D]))}),v},r.union=function(){return r.uniq(p.apply(o,arguments))},r.intersection=function(e){var n=g.call(arguments,1);return r.filter(r.uniq(e),function(i){return r.every(n,function(a){return r.indexOf(a,i)>=0})})},r.difference=function(e){var n=p.apply(o,g.call(arguments,1));return r.filter(e,function(i){return!r.contains(n,i)})},r.zip=function(){for(var e=g.call(arguments),n=r.max(r.pluck(e,"length")),i=new Array(n),a=0;a<n;a++)i[a]=r.pluck(e,""+a);return i},r.object=function(e,n){if(e==null)return{};for(var i={},a=0,u=e.length;a<u;a++)n?i[e[a]]=n[a]:i[e[a][0]]=e[a][1];return i},r.indexOf=function(e,n,i){if(e==null)return-1;var a=0,u=e.length;if(i)if(typeof i=="number")a=i<0?Math.max(0,u+i):i;else return a=r.sortedIndex(e,n),e[a]===n?a:-1;if(re&&e.indexOf===re)return e.indexOf(n,i);for(;a<u;a++)if(e[a]===n)return a;return-1},r.lastIndexOf=function(e,n,i){if(e==null)return-1;var a=i!=null;if(he&&e.lastIndexOf===he)return a?e.lastIndexOf(n,i):e.lastIndexOf(n);for(var u=a?i:e.length;u--;)if(e[u]===n)return u;return-1},r.range=function(e,n,i){arguments.length<=1&&(n=e||0,e=0),i=arguments[2]||1;for(var a=Math.max(Math.ceil((n-e)/i),0),u=0,v=new Array(a);u<a;)v[u++]=e,e+=i;return v},r.bind=function(e,n){if(e.bind===ie&&ie)return ie.apply(e,g.call(arguments,1));var i=g.call(arguments,2);return function(){return e.apply(n,i.concat(g.call(arguments)))}},r.partial=function(e){var n=g.call(arguments,1);return function(){return e.apply(this,n.concat(g.call(arguments)))}},r.bindAll=function(e){var n=g.call(arguments,1);return n.length===0&&(n=r.functions(e)),z(n,function(i){e[i]=r.bind(e[i],e)}),e},r.memoize=function(e,n){var i={};return n||(n=r.identity),function(){var a=n.apply(this,arguments);return r.has(i,a)?i[a]:i[a]=e.apply(this,arguments)}},r.delay=function(e,n){var i=g.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},n)},r.defer=function(e){return r.delay.apply(r,[e,1].concat(g.call(arguments,1)))},r.throttle=function(e,n){var i,a,u,v,f=0,P=function(){f=new Date,u=null,v=e.apply(i,a)};return function(){var D=new Date,K=n-(D-f);return i=this,a=arguments,K<=0?(clearTimeout(u),u=null,f=D,v=e.apply(i,a)):u||(u=setTimeout(P,K)),v}},r.debounce=function(e,n,i){var a,u;return function(){var v=this,f=arguments,P=function(){a=null,i||(u=e.apply(v,f))},D=i&&!a;return clearTimeout(a),a=setTimeout(P,n),D&&(u=e.apply(v,f)),u}},r.once=function(e){var n=!1,i;return function(){return n||(n=!0,i=e.apply(this,arguments),e=null),i}},r.wrap=function(e,n){return function(){var i=[e];return w.apply(i,arguments),n.apply(this,i)}},r.compose=function(){var e=arguments;return function(){for(var n=arguments,i=e.length-1;i>=0;i--)n=[e[i].apply(this,n)];return n[0]}},r.after=function(e,n){return e<=0?n():function(){if(--e<1)return n.apply(this,arguments)}},r.keys=j||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var n=[];for(var i in e)r.has(e,i)&&(n[n.length]=i);return n},r.values=function(e){var n=[];for(var i in e)r.has(e,i)&&n.push(e[i]);return n},r.pairs=function(e){var n=[];for(var i in e)r.has(e,i)&&n.push([i,e[i]]);return n},r.invert=function(e){var n={};for(var i in e)r.has(e,i)&&(n[e[i]]=i);return n},r.functions=r.methods=function(e){var n=[];for(var i in e)r.isFunction(e[i])&&n.push(i);return n.sort()},r.extend=function(e){return z(g.call(arguments,1),function(n){if(n)for(var i in n)e[i]=n[i]}),e},r.pick=function(e){var n={},i=p.apply(o,g.call(arguments,1));return z(i,function(a){a in e&&(n[a]=e[a])}),n},r.omit=function(e){var n={},i=p.apply(o,g.call(arguments,1));for(var a in e)r.contains(i,a)||(n[a]=e[a]);return n},r.defaults=function(e){return z(g.call(arguments,1),function(n){if(n)for(var i in n)e[i]==null&&(e[i]=n[i])}),e},r.clone=function(e){return r.isObject(e)?r.isArray(e)?e.slice():r.extend({},e):e},r.tap=function(e,n){return n(e),e};var A=function(e,n,i,a){if(e===n)return e!==0||1/e==1/n;if(e==null||n==null)return e===n;e instanceof r&&(e=e._wrapped),n instanceof r&&(n=n._wrapped);var u=d.call(e);if(u!=d.call(n))return!1;switch(u){case"[object String]":return e==String(n);case"[object Number]":return e!=+e?n!=+n:e==0?1/e==1/n:e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object RegExp]":return e.source==n.source&&e.global==n.global&&e.multiline==n.multiline&&e.ignoreCase==n.ignoreCase}if(typeof e!="object"||typeof n!="object")return!1;for(var v=i.length;v--;)if(i[v]==e)return a[v]==n;i.push(e),a.push(n);var f=0,P=!0;if(u=="[object Array]"){if(f=e.length,P=f==n.length,P)for(;f--&&(P=A(e[f],n[f],i,a)););}else{var D=e.constructor,K=n.constructor;if(D!==K&&!(r.isFunction(D)&&D instanceof D&&r.isFunction(K)&&K instanceof K))return!1;for(var J in e)if(r.has(e,J)&&(f++,!(P=r.has(n,J)&&A(e[J],n[J],i,a))))break;if(P){for(J in n)if(r.has(n,J)&&!f--)break;P=!f}}return i.pop(),a.pop(),P};r.isEqual=function(e,n){return A(e,n,[],[])},r.isEmpty=function(e){if(e==null)return!0;if(r.isArray(e)||r.isString(e))return e.length===0;for(var n in e)if(r.has(e,n))return!1;return!0},r.isElement=function(e){return!!(e&&e.nodeType===1)},r.isArray=Q||function(e){return d.call(e)=="[object Array]"},r.isObject=function(e){return e===Object(e)},z(["Arguments","Function","String","Number","Date","RegExp"],function(e){r["is"+e]=function(n){return d.call(n)=="[object "+e+"]"}}),r.isArguments(arguments)||(r.isArguments=function(e){return!!(e&&r.has(e,"callee"))}),typeof/./!="function"&&(r.isFunction=function(e){return typeof e=="function"}),r.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},r.isNaN=function(e){return r.isNumber(e)&&e!=+e},r.isBoolean=function(e){return e===!0||e===!1||d.call(e)=="[object Boolean]"},r.isNull=function(e){return e===null},r.isUndefined=function(e){return e===void 0},r.has=function(e,n){return m.call(e,n)},r.noConflict=function(){return s._=c,this},r.identity=function(e){return e},r.times=function(e,n,i){for(var a=Array(e),u=0;u<e;u++)a[u]=n.call(i,u);return a},r.random=function(e,n){return n==null&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))};var R={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};R.unescape=r.invert(R.escape);var C={escape:new RegExp("["+r.keys(R.escape).join("")+"]","g"),unescape:new RegExp("("+r.keys(R.unescape).join("|")+")","g")};r.each(["escape","unescape"],function(e){r[e]=function(n){return n==null?"":(""+n).replace(C[e],function(i){return R[e][i]})}}),r.result=function(e,n){if(e==null)return null;var i=e[n];return r.isFunction(i)?i.call(e):i},r.mixin=function(e){z(r.functions(e),function(n){var i=r[n]=e[n];r.prototype[n]=function(){var a=[this._wrapped];return w.apply(a,arguments),ve.call(this,i.apply(r,a))}})};var q=0;r.uniqueId=function(e){var n=++q+"";return e?e+n:n},r.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ce=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},le=/\\|'|\r|\n|\t|\u2028|\u2029/g;r.template=function(e,n,i){var a;i=r.defaults({},i,r.templateSettings);var u=new RegExp([(i.escape||ce).source,(i.interpolate||ce).source,(i.evaluate||ce).source].join("|")+"|$","g"),v=0,f="__p+='";e.replace(u,function(D,K,J,de,oe){return f+=e.slice(v,oe).replace(le,function(ye){return"\\"+G[ye]}),K&&(f+=`'+
((__t=(`+K+`))==null?'':_.escape(__t))+
'`),J&&(f+=`'+
((__t=(`+J+`))==null?'':__t)+
'`),de&&(f+=`';
`+de+`
__p+='`),v=oe+D.length,D}),f+=`';
`,i.variable||(f=`with(obj||{}){
`+f+`}
`),f=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+f+`return __p;
`;try{a=new Function(i.variable||"obj","_",f)}catch(D){throw D.source=f,D}if(n)return a(n,r);var P=function(D){return a.call(this,D,r)};return P.source="function("+(i.variable||"obj")+`){
`+f+"}",P},r.chain=function(e){return r(e).chain()};var ve=function(e){return this._chain?r(e).chain():e};r.mixin(r),z(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=o[e];r.prototype[e]=function(){var i=this._wrapped;return n.apply(i,arguments),(e=="shift"||e=="splice")&&i.length===0&&delete i[0],ve.call(this,i)}}),z(["concat","join","slice"],function(e){var n=o[e];r.prototype[e]=function(){return ve.call(this,n.apply(this._wrapped,arguments))}}),r.extend(r.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(He)})(qe,qe.exports);var Ze=qe.exports;const h=Ke(Ze);(function(){var N=function(g,p,d,m){for(d=d||{},m=g.length;m--;d[g[m]]=p);return d},t=[1,11],s=[1,9],c=[8,17],l=[6,11],o=[6,11,13,17],y={trace:function(){},yy:{},symbols_:{error:2,unitvalue:3,magnitude:4,unit:5,EOF:6,float:7,POW:8,int:9,multatoms:10,DIV:11,expatom:12,MUL:13,atom:14,"^":15,nat:16,ATOM:17,FLOAT:18,NAT:19,NEG:20,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",8:"POW",11:"DIV",13:"MUL",15:"^",17:"ATOM",18:"FLOAT",19:"NAT",20:"NEG"},productions_:[0,[3,3],[3,2],[4,3],[4,1],[5,3],[5,1],[10,3],[10,2],[10,1],[12,3],[12,1],[14,1],[7,1],[7,1],[16,1],[9,2],[9,1]],performAction:function(p,d,m,k,x,O,_){var T=O.length-1;switch(x){case 1:return{type:"unitMagnitude",magnitude:O[T-2],unit:O[T-1]};case 2:return{type:"unitStandalone",unit:O[T-1]};case 3:this.$=O[T-2]+"e"+O[T];break;case 4:case 13:case 14:case 15:case 17:this.$=O[T];break;case 5:this.$={num:O[T-2],denom:O[T]};break;case 6:this.$={num:O[T],denom:null};break;case 7:this.$=[O[T-2]].concat(O[T]);break;case 8:this.$=[O[T-1]].concat(O[T]);break;case 9:this.$=[O[T]];break;case 10:this.$={name:O[T-2],pow:O[T]};break;case 11:this.$={name:O[T],pow:1};break;case 12:this.$=p;break;case 16:this.$="-"+O[T];break}},table:[{3:1,4:2,5:3,7:4,10:5,12:8,14:10,16:7,17:t,18:[1,6],19:s},{1:[3]},{5:12,10:5,12:8,14:10,17:t},{6:[1,13]},{8:[1,14],17:[2,4]},{6:[2,6],11:[1,15]},N(c,[2,13]),N(c,[2,14]),N(l,[2,9],{12:8,14:10,10:17,13:[1,16],17:t}),N([6,8,11,13,17],[2,15]),N(o,[2,11],{15:[1,18]}),N([6,11,13,15,17],[2,12]),{6:[1,19]},{1:[2,2]},{9:20,19:[1,22],20:[1,21]},{10:23,12:8,14:10,17:t},{10:24,12:8,14:10,17:t},N(l,[2,8]),{16:25,19:s},{1:[2,1]},{17:[2,3]},{19:[1,26]},{17:[2,17]},{6:[2,5]},N(l,[2,7]),N(o,[2,10]),{17:[2,16]}],defaultActions:{13:[2,2],19:[2,1],20:[2,3],22:[2,17],23:[2,5],26:[2,16]},parseError:function(p,d){if(d.recoverable)this.trace(p);else throw new Error(p)},parse:function(p){var d=this,m=[0],k=[null],x=[],O=this.table,_="",T=0,H=0,Y=2,re=1,he=x.slice.call(arguments,1),Q=Object.create(this.lexer),j={yy:{}};for(var ie in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ie)&&(j.yy[ie]=this.yy[ie]);Q.setInput(p,j.yy),j.yy.lexer=Q,j.yy.parser=this,typeof Q.yylloc>"u"&&(Q.yylloc={});var r=Q.yylloc;x.push(r);var z=Q.options&&Q.options.ranges;typeof j.yy.parseError=="function"?this.parseError=j.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function pe(){var le;return le=Q.lex()||re,typeof le!="number"&&(le=d.symbols_[le]||le),le}for(var X,$,M,V,A={},R,C,q,ce;;){if($=m[m.length-1],this.defaultActions[$]?M=this.defaultActions[$]:((X===null||typeof X>"u")&&(X=pe()),M=O[$]&&O[$][X]),typeof M>"u"||!M.length||!M[0]){var G="";ce=[];for(R in O[$])this.terminals_[R]&&R>Y&&ce.push("'"+this.terminals_[R]+"'");Q.showPosition?G="Parse error on line "+(T+1)+`:
`+Q.showPosition()+`
Expecting `+ce.join(", ")+", got '"+(this.terminals_[X]||X)+"'":G="Parse error on line "+(T+1)+": Unexpected "+(X==re?"end of input":"'"+(this.terminals_[X]||X)+"'"),this.parseError(G,{text:Q.match,token:this.terminals_[X]||X,line:Q.yylineno,loc:r,expected:ce})}if(M[0]instanceof Array&&M.length>1)throw new Error("Parse Error: multiple actions possible at state: "+$+", token: "+X);switch(M[0]){case 1:m.push(X),k.push(Q.yytext),x.push(Q.yylloc),m.push(M[1]),X=null,H=Q.yyleng,_=Q.yytext,T=Q.yylineno,r=Q.yylloc;break;case 2:if(C=this.productions_[M[1]][1],A.$=k[k.length-C],A._$={first_line:x[x.length-(C||1)].first_line,last_line:x[x.length-1].last_line,first_column:x[x.length-(C||1)].first_column,last_column:x[x.length-1].last_column},z&&(A._$.range=[x[x.length-(C||1)].range[0],x[x.length-1].range[1]]),V=this.performAction.apply(A,[_,H,T,j.yy,M[1],k,x].concat(he)),typeof V<"u")return V;C&&(m=m.slice(0,-1*C*2),k=k.slice(0,-1*C),x=x.slice(0,-1*C)),m.push(this.productions_[M[1]][0]),k.push(A.$),x.push(A._$),q=O[m[m.length-2]][m[m.length-1]],m.push(q);break;case 3:return!0}}return!0}},E=function(){var g={EOF:1,parseError:function(d,m){if(this.yy.parser)this.yy.parser.parseError(d,m);else throw new Error(d)},setInput:function(p,d){return this.yy=d||this.yy||{},this._input=p,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var p=this._input[0];this.yytext+=p,this.yyleng++,this.offset++,this.match+=p,this.matched+=p;var d=p.match(/(?:\r\n?|\n).*/g);return d?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),p},unput:function(p){var d=p.length,m=p.split(/(?:\r\n?|\n)/g);this._input=p+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-d),this.offset-=d;var k=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),m.length-1&&(this.yylineno-=m.length-1);var x=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:m?(m.length===k.length?this.yylloc.first_column:0)+k[k.length-m.length].length-m[0].length:this.yylloc.first_column-d},this.options.ranges&&(this.yylloc.range=[x[0],x[0]+this.yyleng-d]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(p){this.unput(this.match.slice(p))},pastInput:function(){var p=this.matched.substr(0,this.matched.length-this.match.length);return(p.length>20?"...":"")+p.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var p=this.match;return p.length<20&&(p+=this._input.substr(0,20-p.length)),(p.substr(0,20)+(p.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var p=this.pastInput(),d=new Array(p.length+1).join("-");return p+this.upcomingInput()+`
`+d+"^"},test_match:function(p,d){var m,k,x;if(this.options.backtrack_lexer&&(x={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(x.yylloc.range=this.yylloc.range.slice(0))),k=p[0].match(/(?:\r\n?|\n).*/g),k&&(this.yylineno+=k.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:k?k[k.length-1].length-k[k.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+p[0].length},this.yytext+=p[0],this.match+=p[0],this.matches=p,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(p[0].length),this.matched+=p[0],m=this.performAction.call(this,this.yy,this,d,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),m)return m;if(this._backtrack){for(var O in x)this[O]=x[O];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var p,d,m,k;this._more||(this.yytext="",this.match="");for(var x=this._currentRules(),O=0;O<x.length;O++)if(m=this._input.match(this.rules[x[O]]),m&&(!d||m[0].length>d[0].length)){if(d=m,k=O,this.options.backtrack_lexer){if(p=this.test_match(m,x[O]),p!==!1)return p;if(this._backtrack){d=!1;continue}else return!1}else if(!this.options.flex)break}return d?(p=this.test_match(d,x[k]),p!==!1?p:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var d=this.next();return d||this.lex()},begin:function(d){this.conditionStack.push(d)},popState:function(){var d=this.conditionStack.length-1;return d>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(d){return d=this.conditionStack.length-1-Math.abs(d||0),d>=0?this.conditionStack[d]:"INITIAL"},pushState:function(d){this.begin(d)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(d,m,k,x){switch(k){case 0:return 11;case 1:return"(";case 2:return")";case 3:return 8;case 4:return 15;case 5:return 13;case 6:return 18;case 7:return 19;case 8:return 20;case 9:return 17;case 10:return 17;case 11:return 17;case 12:break;case 13:return 6}},rules:[/^(?:\/)/,/^(?:\()/,/^(?:\))/,/^(?:(\*|x|\u00d7|\u2219|\u22c5|\u00b7)\s*10\s*\^)/,/^(?:\^)/,/^(?:\*)/,/^(?:[0-9]+\.[0-9]+)/,/^(?:[0-9]+)/,/^(?:-)/,/^(?:\u00b0( ?)[cCfF])/,/^(?:fl\.? oz\.?)/,/^(?:[\u00b5]?([A-Za-z-]+|[\u2103\u2109\u212b]))/,/^(?:\s+)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return g}();y.lexer=E;function w(){this.yy={}}return w.prototype=y,y.Parser=w,new w})();var Ae=function(){var N=function($,M,V,A){for(V=V||{},A=$.length;A--;V[$[A]]=M);return V},t=[1,7],s=[1,17],c=[1,13],l=[1,14],o=[1,15],y=[1,32],E=[1,22],w=[1,23],g=[1,24],p=[1,25],d=[1,26],m=[1,33],k=[1,27],x=[1,28],O=[1,29],_=[1,30],T=[1,20],H=[1,36],Y=[1,37],re=[5,6,8,10,33,35,41,43,45],he=[1,39],Q=[1,40],j=[5,6,8,10,12,14,16,19,21,22,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],ie=[10,16,19,21,22,28,29,30,31,32,34,37,39,42,43,44,46],r=[5,6,8,10,12,14,16,18,19,21,22,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],z={trace:function(){},yy:{},symbols_:{error:2,equation:3,expression:4,SIGN:5,EOF:6,additive:7,"+":8,multiplicative:9,"-":10,triglog:11,"*":12,negative:13,"/":14,trig:15,TRIG:16,trigfunc:17,"^":18,TRIGINV:19,logbase:20,ln:21,log:22,_:23,subscriptable:24,power:25,primitive:26,variable:27,VAR:28,CONST:29,INT:30,FLOAT:31,"{":32,"}":33,"(":34,")":35,function:36,FUNC:37,invocation:38,sqrt:39,"[":40,"]":41,abs:42,"|":43,"LEFT|":44,"RIGHT|":45,FRAC:46,$accept:0,$end:1},terminals_:{2:"error",5:"SIGN",6:"EOF",8:"+",10:"-",12:"*",14:"/",16:"TRIG",18:"^",19:"TRIGINV",21:"ln",22:"log",23:"_",28:"VAR",29:"CONST",30:"INT",31:"FLOAT",32:"{",33:"}",34:"(",35:")",37:"FUNC",39:"sqrt",40:"[",41:"]",42:"abs",43:"|",44:"LEFT|",45:"RIGHT|",46:"FRAC"},productions_:[0,[3,4],[3,2],[3,1],[4,1],[7,3],[7,3],[7,1],[9,2],[9,3],[9,3],[9,1],[13,2],[13,1],[15,1],[17,1],[17,3],[17,1],[20,1],[20,1],[20,3],[11,2],[11,2],[11,1],[25,3],[25,1],[27,1],[24,3],[24,1],[24,1],[24,1],[24,1],[24,3],[24,3],[36,1],[38,4],[38,4],[38,7],[38,4],[38,3],[38,3],[38,4],[26,1],[26,1],[26,7]],performAction:function(M,V,A,R,C,q,ce){var G=q.length-1;switch(C){case 1:return new R.Eq(q[G-3],q[G-2],q[G-1]);case 2:return q[G-1];case 3:return new R.Add([]);case 4:case 7:case 11:case 13:case 15:case 20:case 23:case 25:case 42:case 43:this.$=q[G];break;case 5:this.$=R.Add.createOrAppend(q[G-2],q[G]);break;case 6:this.$=R.Add.createOrAppend(q[G-2],R.Mul.handleNegative(q[G],"subtract"));break;case 8:this.$=R.Mul.fold(R.Mul.createOrAppend(q[G-1],q[G]));break;case 9:this.$=R.Mul.fold(R.Mul.createOrAppend(q[G-2],q[G]));break;case 10:this.$=R.Mul.fold(R.Mul.handleDivide(q[G-2],q[G]));break;case 12:this.$=R.Mul.handleNegative(q[G]);break;case 14:case 17:this.$=[M];break;case 16:this.$=q[G-2].concat(q[G]);break;case 18:this.$=R.Log.natural();break;case 19:this.$=R.Log.common();break;case 21:this.$=R.Trig.create(q[G-1],q[G]);break;case 22:this.$=R.Log.create(q[G-1],q[G]);break;case 24:this.$=new R.Pow(q[G-2],q[G]);break;case 26:case 34:this.$=M;break;case 27:this.$=new R.Var(q[G-2],q[G]);break;case 28:this.$=new R.Var(q[G]);break;case 29:this.$=new R.Const(M.toLowerCase());break;case 30:this.$=R.Int.create(Number(M));break;case 31:this.$=R.Float.create(Number(M));break;case 32:this.$=q[G-1].completeParse();break;case 33:this.$=q[G-1].completeParse().addHint("parens");break;case 35:case 36:this.$=R.Pow.sqrt(q[G-1]);break;case 37:this.$=new R.Pow.nthroot(q[G-1],q[G-4]);break;case 38:case 39:case 40:this.$=new R.Abs(q[G-1]);break;case 41:this.$=new R.Func(q[G-3],q[G-1]);break;case 44:this.$=R.Mul.handleDivide(q[G-4],q[G-1]);break}},table:[{3:1,4:2,6:[1,3],7:4,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{1:[3]},{5:[1,34],6:[1,35]},{1:[2,3]},N([5,6],[2,4],{8:H,10:Y}),N(re,[2,7],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:he,14:Q,16:s,19:c,21:l,22:o,28:y,29:E,30:w,31:g,32:p,34:d,37:m,39:k,42:x,44:_,46:T}),N(j,[2,11]),{10:t,11:8,13:41,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},N(j,[2,13]),{10:t,11:8,13:42,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{10:t,11:8,13:43,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},N(j,[2,23]),N(ie,[2,15],{18:[1,44]}),N(ie,[2,17]),N(ie,[2,18]),N(ie,[2,19],{23:[1,45]}),N(j,[2,25],{18:[1,46]}),N([10,16,18,19,21,22,28,29,30,31,32,34,37,39,42,43,44,46],[2,14]),N(r,[2,42]),N(r,[2,43]),{32:[1,47]},N(r,[2,28],{23:[1,48]}),N(r,[2,29]),N(r,[2,30]),N(r,[2,31]),{7:49,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{7:50,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{32:[1,52],34:[1,51],40:[1,53]},{34:[1,54]},{7:55,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{7:56,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{34:[1,57]},N([5,6,8,10,12,14,16,18,19,21,22,23,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],[2,26]),{34:[2,34]},{4:58,7:4,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{1:[2,2]},{9:59,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{9:60,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},N(j,[2,8]),{10:t,11:8,13:61,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{10:t,11:8,13:62,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},N(j,[2,12]),N(j,[2,21]),N(j,[2,22]),{10:t,11:8,13:63,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{24:64,27:21,28:y,29:E,30:w,31:g,32:p,34:d},{10:t,11:8,13:65,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{7:66,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{24:67,27:21,28:y,29:E,30:w,31:g,32:p,34:d},{8:H,10:Y,33:[1,68]},{8:H,10:Y,35:[1,69]},{7:70,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{7:71,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{7:72,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{7:73,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{8:H,10:Y,43:[1,74]},{8:H,10:Y,45:[1,75]},{7:76,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{6:[1,77]},N(re,[2,5],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:he,14:Q,16:s,19:c,21:l,22:o,28:y,29:E,30:w,31:g,32:p,34:d,37:m,39:k,42:x,44:_,46:T}),N(re,[2,6],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:he,14:Q,16:s,19:c,21:l,22:o,28:y,29:E,30:w,31:g,32:p,34:d,37:m,39:k,42:x,44:_,46:T}),N(j,[2,9]),N(j,[2,10]),N(ie,[2,16]),N(ie,[2,20]),N(j,[2,24]),{8:H,10:Y,33:[1,78]},N(r,[2,27]),N(r,[2,32]),N(r,[2,33]),{8:H,10:Y,35:[1,79]},{8:H,10:Y,33:[1,80]},{8:H,10:Y,41:[1,81]},{8:H,10:Y,35:[1,82]},N(r,[2,39]),N(r,[2,40]),{8:H,10:Y,35:[1,83]},{1:[2,1]},{32:[1,84]},N(r,[2,35]),N(r,[2,36]),{32:[1,85]},N(r,[2,38]),N(r,[2,41]),{7:86,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{7:87,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:E,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:k,42:x,43:O,44:_,46:T},{8:H,10:Y,33:[1,88]},{8:H,10:Y,33:[1,89]},N(r,[2,44]),N(r,[2,37])],defaultActions:{3:[2,3],33:[2,34],35:[2,2],77:[2,1]},parseError:function(M,V){if(V.recoverable)this.trace(M);else throw new Error(M)},parse:function(M){var V=this,A=[0],R=[null],C=[],q=this.table,ce="",G=0,le=0,ve=2,e=1,n=C.slice.call(arguments,1),i=Object.create(this.lexer),a={yy:{}};for(var u in this.yy)Object.prototype.hasOwnProperty.call(this.yy,u)&&(a.yy[u]=this.yy[u]);i.setInput(M,a.yy),a.yy.lexer=i,a.yy.parser=this,typeof i.yylloc>"u"&&(i.yylloc={});var v=i.yylloc;C.push(v);var f=i.options&&i.options.ranges;typeof a.yy.parseError=="function"?this.parseError=a.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function P(){var be;return be=i.lex()||e,typeof be!="number"&&(be=V.symbols_[be]||be),be}for(var D,K,J,de,oe={},ye,ge,Ge,Pe;;){if(K=A[A.length-1],this.defaultActions[K]?J=this.defaultActions[K]:((D===null||typeof D>"u")&&(D=P()),J=q[K]&&q[K][D]),typeof J>"u"||!J.length||!J[0]){var Fe="";Pe=[];for(ye in q[K])this.terminals_[ye]&&ye>ve&&Pe.push("'"+this.terminals_[ye]+"'");i.showPosition?Fe="Parse error on line "+(G+1)+`:
`+i.showPosition()+`
Expecting `+Pe.join(", ")+", got '"+(this.terminals_[D]||D)+"'":Fe="Parse error on line "+(G+1)+": Unexpected "+(D==e?"end of input":"'"+(this.terminals_[D]||D)+"'"),this.parseError(Fe,{text:i.match,token:this.terminals_[D]||D,line:i.yylineno,loc:v,expected:Pe})}if(J[0]instanceof Array&&J.length>1)throw new Error("Parse Error: multiple actions possible at state: "+K+", token: "+D);switch(J[0]){case 1:A.push(D),R.push(i.yytext),C.push(i.yylloc),A.push(J[1]),D=null,le=i.yyleng,ce=i.yytext,G=i.yylineno,v=i.yylloc;break;case 2:if(ge=this.productions_[J[1]][1],oe.$=R[R.length-ge],oe._$={first_line:C[C.length-(ge||1)].first_line,last_line:C[C.length-1].last_line,first_column:C[C.length-(ge||1)].first_column,last_column:C[C.length-1].last_column},f&&(oe._$.range=[C[C.length-(ge||1)].range[0],C[C.length-1].range[1]]),de=this.performAction.apply(oe,[ce,le,G,a.yy,J[1],R,C].concat(n)),typeof de<"u")return de;ge&&(A=A.slice(0,-1*ge*2),R=R.slice(0,-1*ge),C=C.slice(0,-1*ge)),A.push(this.productions_[J[1]][0]),R.push(oe.$),C.push(oe._$),Ge=q[A[A.length-2]][A[A.length-1]],A.push(Ge);break;case 3:return!0}}return!0}},pe=function(){var $={EOF:1,parseError:function(V,A){if(this.yy.parser)this.yy.parser.parseError(V,A);else throw new Error(V)},setInput:function(M,V){return this.yy=V||this.yy||{},this._input=M,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var M=this._input[0];this.yytext+=M,this.yyleng++,this.offset++,this.match+=M,this.matched+=M;var V=M.match(/(?:\r\n?|\n).*/g);return V?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),M},unput:function(M){var V=M.length,A=M.split(/(?:\r\n?|\n)/g);this._input=M+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-V),this.offset-=V;var R=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),A.length-1&&(this.yylineno-=A.length-1);var C=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:A?(A.length===R.length?this.yylloc.first_column:0)+R[R.length-A.length].length-A[0].length:this.yylloc.first_column-V},this.options.ranges&&(this.yylloc.range=[C[0],C[0]+this.yyleng-V]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(M){this.unput(this.match.slice(M))},pastInput:function(){var M=this.matched.substr(0,this.matched.length-this.match.length);return(M.length>20?"...":"")+M.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var M=this.match;return M.length<20&&(M+=this._input.substr(0,20-M.length)),(M.substr(0,20)+(M.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var M=this.pastInput(),V=new Array(M.length+1).join("-");return M+this.upcomingInput()+`
`+V+"^"},test_match:function(M,V){var A,R,C;if(this.options.backtrack_lexer&&(C={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(C.yylloc.range=this.yylloc.range.slice(0))),R=M[0].match(/(?:\r\n?|\n).*/g),R&&(this.yylineno+=R.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:R?R[R.length-1].length-R[R.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+M[0].length},this.yytext+=M[0],this.match+=M[0],this.matches=M,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(M[0].length),this.matched+=M[0],A=this.performAction.call(this,this.yy,this,V,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),A)return A;if(this._backtrack){for(var q in C)this[q]=C[q];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var M,V,A,R;this._more||(this.yytext="",this.match="");for(var C=this._currentRules(),q=0;q<C.length;q++)if(A=this._input.match(this.rules[C[q]]),A&&(!V||A[0].length>V[0].length)){if(V=A,R=q,this.options.backtrack_lexer){if(M=this.test_match(A,C[q]),M!==!1)return M;if(this._backtrack){V=!1;continue}else return!1}else if(!this.options.flex)break}return V?(M=this.test_match(V,C[R]),M!==!1?M:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var V=this.next();return V||this.lex()},begin:function(V){this.conditionStack.push(V)},popState:function(){var V=this.conditionStack.length-1;return V>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(V){return V=this.conditionStack.length-1-Math.abs(V||0),V>=0?this.conditionStack[V]:"INITIAL"},pushState:function(V){this.begin(V)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0},performAction:function(V,A,R,C){switch(R){case 0:break;case 1:break;case 2:break;case 3:return"INT";case 4:return"FLOAT";case 5:return"^";case 6:return"*";case 7:return"*";case 8:return"*";case 9:return"*";case 10:return"/";case 11:return"/";case 12:return"-";case 13:return"-";case 14:return"+";case 15:return"^";case 16:return"(";case 17:return")";case 18:return"(";case 19:return")";case 20:return"[";case 21:return"]";case 22:return"{";case 23:return"}";case 24:return"{";case 25:return"}";case 26:return"_";case 27:return"|";case 28:return"LEFT|";case 29:return"RIGHT|";case 30:return"!";case 31:return"SIGN";case 32:return A.yytext="<=","SIGN";case 33:return A.yytext=">=","SIGN";case 34:return A.yytext="<=","SIGN";case 35:return A.yytext=">=","SIGN";case 36:return A.yytext="<>","SIGN";case 37:return A.yytext="<>","SIGN";case 38:return A.yytext="<>","SIGN";case 39:return A.yytext="<>","SIGN";case 40:return A.yytext="<=","SIGN";case 41:return A.yytext=">=","SIGN";case 42:return"FRAC";case 43:return"FRAC";case 44:return"sqrt";case 45:return"abs";case 46:return"ln";case 47:return"log";case 48:return"TRIG";case 49:return"TRIG";case 50:return"TRIG";case 51:return"TRIG";case 52:return A.yytext="sin","TRIG";case 53:return A.yytext="cos","TRIG";case 54:return A.yytext="tan","TRIG";case 55:return A.yytext="csc","TRIG";case 56:return A.yytext="sec","TRIG";case 57:return A.yytext="cot","TRIG";case 58:return A.yytext="arcsin","TRIG";case 59:return A.yytext="arccos","TRIG";case 60:return A.yytext="arctan","TRIG";case 61:return A.yytext="arccsc","TRIG";case 62:return A.yytext="arcsec","TRIG";case 63:return A.yytext="arccot","TRIG";case 64:return"TRIGINV";case 65:return"TRIGINV";case 66:return A.yytext="sinh","TRIG";case 67:return A.yytext="cosh","TRIG";case 68:return A.yytext="tanh","TRIG";case 69:return A.yytext="csch","TRIG";case 70:return A.yytext="sech","TRIG";case 71:return A.yytext="tanh","TRIG";case 72:return"CONST";case 73:return A.yytext="pi","CONST";case 74:return A.yytext="pi","CONST";case 75:return"VAR";case 76:return A.yytext="theta","VAR";case 77:return A.yytext="theta","VAR";case 78:return"VAR";case 79:return A.yytext="phi","VAR";case 80:return A.yytext="phi","VAR";case 81:return V.symbolLexer(A.yytext);case 82:return"EOF";case 83:return"INVALID";case 84:console.log(A.yytext);break}},rules:[/^(?:\s+)/,/^(?:\\space)/,/^(?:\\ )/,/^(?:[0-9]+\.?)/,/^(?:([0-9]+)?\.[0-9]+)/,/^(?:\*\*)/,/^(?:\*)/,/^(?:\\cdot|·)/,/^(?:\\times|×)/,/^(?:\\ast)/,/^(?:\/)/,/^(?:\\div|÷)/,/^(?:-)/,/^(?:−)/,/^(?:\+)/,/^(?:\^)/,/^(?:\()/,/^(?:\))/,/^(?:\\left\()/,/^(?:\\right\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:\\left\{)/,/^(?:\\right\})/,/^(?:_)/,/^(?:\|)/,/^(?:\\left\|)/,/^(?:\\right\|)/,/^(?:\!)/,/^(?:<=|>=|<>|<|>|=)/,/^(?:\\le)/,/^(?:\\ge)/,/^(?:\\leq)/,/^(?:\\geq)/,/^(?:=\/=)/,/^(?:\\ne)/,/^(?:\\neq)/,/^(?:≠)/,/^(?:≤)/,/^(?:≥)/,/^(?:\\frac)/,/^(?:\\dfrac)/,/^(?:sqrt|\\sqrt)/,/^(?:abs|\\abs)/,/^(?:ln|\\ln)/,/^(?:log|\\log)/,/^(?:sin|cos|tan)/,/^(?:csc|sec|cot)/,/^(?:sinh|cosh|tanh)/,/^(?:csch|sech|coth)/,/^(?:\\sin)/,/^(?:\\cos)/,/^(?:\\tan)/,/^(?:\\csc)/,/^(?:\\sec)/,/^(?:\\cot)/,/^(?:\\arcsin)/,/^(?:\\arccos)/,/^(?:\\arctan)/,/^(?:\\arccsc)/,/^(?:\\arcsec)/,/^(?:\\arccot)/,/^(?:arcsin|arccos|arctan)/,/^(?:arccsc|arcsec|arccot)/,/^(?:\\sinh)/,/^(?:\\cosh)/,/^(?:\\tanh)/,/^(?:\\csch)/,/^(?:\\sech)/,/^(?:\\coth)/,/^(?:pi)/,/^(?:π)/,/^(?:\\pi)/,/^(?:theta)/,/^(?:θ)/,/^(?:\\theta)/,/^(?:phi)/,/^(?:φ)/,/^(?:\\phi)/,/^(?:[a-zA-Z])/,/^(?:$)/,/^(?:.)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],inclusive:!0}}};return $}();z.lexer=pe;function X(){this.yy={}}return X.prototype=z,z.Parser=X,new X}();const Ce=function(N){return N!==N},Qe=function(N,t){var s=t-N;return Math.random()*s+N};var ze=12,Be=9;function Ne(N,t){const s=[],c=[];return h.forEach(N,(l,o,y)=>{t(l,o,y)?s.push(l):c.push(l)}),[s,c]}function Xe(N){return N instanceof fe}const Se=function(N){return N instanceof ne};function $e(N){return N instanceof U}function Te(N){return N instanceof b?N.terms:[N]}class fe{constructor(){this.hints={parens:!1}}construct(t){const s=this.func,c=new s(...t);if(typeof c>"u")throw new Error("constructor function returning undefined");return c}recurse(t,...s){var c=this.args().map(function(l){return h.isString(l)||h.isNumber(l)?l:l==null?void 0:l[t].apply(l,s)});return this.construct(c)}eval(t={},s){throw new Error("Abstract method - must override for expr: "+this.print())}codegen(){throw new Error("Abstract method - must override for expr: "+this.print())}compile(){var t=this.codegen();try{return new Function("vars","return "+t+";")}catch{throw new Error("Function did not compile: "+t)}}asTex(t){t=t||{},h.defaults(t,{display:!0,dynamic:!0,times:!1});let s=this.tex();return t.display&&(s="\\displaystyle "+s),t.dynamic&&(s=s.replace(/\(/g,"\\left("),s=s.replace(/\)/g,"\\right)")),t.times&&(s=s.replace(/\\cdot/g,"\\times")),s}name(){return this.func.name}repr(){return this.name()+"("+this.args().map(function(t){return h.isString(t)||h.isNumber(t)?t:t==null?void 0:t.repr()}).join(",")+")"}strip(){return this.recurse("strip")}normalize(){return this.recurse("normalize")}expand(){return this.recurse("expand")}factor(t){return this.recurse("factor",t)}collect(t){return this.recurse("collect",t)}equals(t){return this.normalize().print()===t.normalize().print()}simplify(t){t={once:!1,...t};var s=this.factor(t),c=s.collect(t);s.equals(c)&&(c=this.collect(t));var l=c.expand(),o=l.collect(t);l.equals(o)&&(o=c.collect(t));var y=o;return t.once||this.equals(y)?y:y.simplify(t)}isSimplified(){return this.equals(this.simplify())}exprArgs(){return this.args().filter(Xe)}getVars(t){return h.uniq(h.flatten(h.invoke(this.exprArgs(),"getVars",t))).sort()}getConsts(){return h.uniq(h.flatten(h.invoke(this.exprArgs(),"getConsts"))).sort()}getUnits(){return h.flatten(h.invoke(this.exprArgs(),"getUnits"))}is(t){return this instanceof t}has(t){return this instanceof t?!0:h.any(this.exprArgs(),function(s){return s.has(t)})}raiseToThe(t,s){return new L(this,t)}isSubtract(){return!1}isDivide(){return!1}isRoot(){return!1}needsExplicitMul(){return this.exprArgs()[0].needsExplicitMul()}sameVars(t){var s=this.getVars(),c=t.getVars(),l=function(w,g){return!h.difference(w,g).length},o=function(w){return h.uniq(h.invoke(w,"toLowerCase")).sort()},y=l(s,c),E=l(o(s),o(c));return{equal:y,equalIgnoringCase:E}}compare(t){if(t instanceof Me)return!1;var s=h.union(this.getVars(!0),t.getVars(!0)),c=function(k,x){return Math.abs(k)<1||Math.abs(x)<1?Math.abs(k-x):Math.abs(1-k/x)},l=function(k,x){var O=c(k,x);return k===x||Ce(k)&&Ce(x)||O<Math.pow(10,-Be)};if(!s.length&&!this.has(ue)&&!t.has(ue))return l(this.eval(),t.eval());var o=this.collect(),y=t.collect(),E=this.getUnits(),w=t.getUnits();if(!h.isEqual(E,w))return!1;for(var g=0;g<ze;g++){var p={},d=Math.pow(10,1+Math.floor(3*g/ze)),m=g%2===0;h.each(s,function(x){p[x]=m?Qe(-d,d):h.random(-d,d)});let k;if(o.has(xe)||y.has(xe)||o.has(ue)||y.has(ue)){const x=o.partialEval(p),O=y.partialEval(p);k=x.simplify().equals(O.simplify())}else{const x=o.eval(p),O=y.eval(p);k=l(x,O)}if(!k)return!1}return!0}partialEval(t){return this instanceof ue?this:this.has(xe)?this instanceof xe?new xe(this.symbol,this.arg.partialEval(t)):this.recurse("partialEval",t):new se(+this.eval(t).toFixed(Be)).collect()}sameForm(t){return this.strip().equals(t.strip())}findGCD(t){return this.equals(t)?t:te}getDenominator(){return te}asMul(){return new b(te,this)}isPositive(){throw new Error("Abstract method - must override for expr: "+this.print())}isNegative(){return!1}asPositiveFactor(){return this.isPositive()?this:te}addHint(t){if(!t)return this;var s=this.construct(this.args());return s.hints=h.clone(this.hints),s.hints[t]=!0,s}completeParse(){return this.recurse("completeParse")}abs(){throw new Error("Abstract method - must override for expr: "+this.print())}negate(){return new b(me,this)}}class Re extends fe{constructor(...t){super(),t.length===1?this.terms=t[0]:this.terms=t}args(){return this.terms}normalize(){var t=h.sortBy(h.invoke(this.terms,"normalize"),s=>s.print());return new this.func(t)}expand(){return this.recurse("expand").flatten()}partition(){var[t,s]=Ne(this.terms,c=>c instanceof B);return[new this.func(t),new this.func(s)]}flatten(){var t=this,s=h.reject(this.terms,y=>y.equals(t.identity));if(s.length===0)return t.identity;if(s.length===1)return s[0];const[c,l]=Ne(s,y=>y instanceof t.func);var o=l.concat(h.flatten(h.pluck(c,"terms"),!0));return new t.func(o)}isPositive(){var t=h.invoke(this.terms,"collect");return h.all(h.invoke(t,"isPositive"))}replace(t,s){const c=t instanceof fe?h.indexOf(this.terms,t):t;var l=[];Array.isArray(s)?l=s:s&&(l=[s]);var o=this.terms.slice(0,c).concat(l).concat(this.terms.slice(c+1));return new this.func(o)}remove(t){return this.replace(t)}getDenominator(){return new b(h.invoke(this.terms,"getDenominator")).flatten()}}class ne extends Re{constructor(){super(...arguments),this.identity=_e,this.func=ne}eval(t={},s){return h.reduce(this.terms,(c,l)=>c+l.eval(t,s),0)}codegen(){return h.map(this.terms,t=>"("+t.codegen()+")").join(" + ")||"0"}print(){return h.invoke(this.terms,"print").join("+")}tex(){let t="";return h.each(this.terms,s=>{!t||s.isSubtract()?t+=s.tex():t+="+"+s.tex()}),t}collect(t){var s=h.invoke(this.terms,"collect",t),c=[];h.each(s,y=>{if(y instanceof b){var E=y.partition();c.push([E[1].flatten(),E[0].reduce(t)])}else y instanceof B?c.push([te,y]):c.push([y,te])});var l=h.groupBy(c,y=>y[0].normalize().print()),o=h.compact(h.map(l,y=>{var E=y[0][0],w=new ne(h.zip.apply(h,y)[1]),g=w.reduce(t);return new b(g,E).collect(t)}));return new ne(o).flatten()}factor(t={keepNegative:!1}){const s=this.terms.map(E=>E.collect());let c;s[0]instanceof b?c=s[0].terms:c=[s[0]],h.each(h.rest(this.terms),E=>{c=h.map(c,w=>E.findGCD(w))}),!t.keepNegative&&this.isNegative()&&c.push(me);const l=new b(c).flatten().collect(),o=s.map(E=>b.handleDivide(E,l).simplify()),y=new ne(o).flatten();return b.createOrAppend(l,y).flatten()}reduce(t){return h.reduce(this.terms,(s,c)=>s.add(c,t),this.identity)}needsExplicitMul(){return!1}isNegative(){var t=h.invoke(this.terms,"collect");return h.all(h.invoke(t,"isNegative"))}negate(){return new ne(h.invoke(this.terms,"negate"))}static createOrAppend(t,s){return t instanceof ne?new ne(t.terms.concat(s)):new ne(t,s)}}class b extends Re{constructor(){super(...arguments),this.identity=te,this.func=b}eval(t={},s){return h.reduce(this.terms,(c,l)=>c*l.eval(t,s),1)}codegen(){return h.map(this.terms,t=>"("+t.codegen()+")").join(" * ")||"0"}print(){return h.map(this.terms,t=>t instanceof ne?"("+t.print()+")":t.print()).join("*")}getUnits(){var t=h(this.terms).chain().map(s=>s.getUnits()).flatten().value();return t.sort((s,c)=>s.unit.localeCompare(c.unit)),t}tex(){for(var t=" \\cdot ",s=h.groupBy(this.terms,x=>x.isDivide()?"inverse":x instanceof B?"number":"other"),c=s.inverse||[],l=s.number||[],o=s.other||[],y="",E,w=0;w<l.length;w++){var g=l[w]instanceof U&&!(l[w]instanceof F);if(g&&o.length>0&&c.length>0){var p=l.slice();p.splice(w,1);var d=p.concat(c).concat(o);return l[w].tex()+new b(d).tex()}}if(l=h.compact(h.map(l,x=>{var O=!x.hints.fraction||c.length>0;if(x instanceof U&&!(x instanceof F)&&O){c.push(new L(new F(x.d),we));var _=new F(x.n);return _.hints=x.hints,h.any(x.hints)?_:null}else return x})),l.length===0&&o.length===1)E=o[0].tex();else{var m="";h.each(l,x=>{x.hints.subtract&&x.hints.entered?(y+="-",m+=(m?t:"")+x.abs().tex()):x instanceof F&&x.n===-1&&(x.hints.negate||x.hints.subtract)?y+="-":m+=(m?t:"")+x.tex()}),h.each(o,x=>{x.needsExplicitMul()?m+=(m?t:"")+x.tex():x instanceof ne?m+="("+x.tex()+")":m+=x.tex()}),E=m||"1"}if(c.length){var k=new b(h.invoke(c,"asDivide")).flatten().tex();return y+"\\frac{"+E+"}{"+k+"}"}else return y+E}strip(){var t=h.map(this.terms,s=>s instanceof B?s.abs():s.strip());return new b(t).flatten()}expand(){const t=function(g){return g instanceof L&&g.exp.isNegative()},s=function(g){return t(g)&&Se(g.base)},c=this.recurse("expand").flatten(),l=Te(c),o=h.any(l,Se),y=h.any(l,s);if(!(o||y))return c;let[E,w]=Ne(l,t);if(o){const[g,p]=Ne(w,Se),d=h.reduce(g,function(k,x){return h.reduce(k,function(O,_){return O.concat(h.map(x.terms,T=>_.concat(T)))},[])},[[]]),m=h.map(d,function(k){return new b(p.concat(k)).flatten()});w=[new ne(m)]}if(y){const g=new b(h.invoke(E,"getDenominator")).flatten();E=[new L(g.expand(),we)]}return new b(w.concat(E)).flatten()}factor(t){var s=this.recurse("factor",t).flatten();if(!(s instanceof b))return s;var[c,l]=Ne(s.terms,E=>E instanceof U);const o=h.reduce(c,(E,w)=>({n:E.n*w.n,d:E.d*w.d}),{n:1,d:1}),y=o.d===1?new F(o.n):new U(o.n,o.d);return new b(l.concat(y)).flatten()}collect(t){var s=this.recurse("collect",t).partition(),c=s[0].reduce(t);if(c.eval()===0)return _e;const l=s[1].flatten();if(!(l instanceof b))return new b(c,l).flatten();const o=l.terms;var y=[];h.each(o,_=>{_ instanceof L?y.push([_.base,_.exp]):y.push([_,te])});var E=h.groupBy(y,_=>_[0].normalize().print()),w=h.compact(h.map(E,_=>{var T=_[0][0],H=new ne(h.zip.apply(h,_)[1]),Y=H.collect(t);return Y instanceof B&&Y.eval()===0?null:[T,Y]}));const g=h.groupBy(w,_=>_[0]instanceof W&&_[0].isBasic()?"trig":_[0]instanceof ae?"log":"expr");let p=g.trig||[],d=g.log||[];const m=g.expr||[];if(p.length>1){var k=h.groupBy(p,_=>_[0].arg.normalize().print());p=[],h.each(k,_=>{const T=_[0][0].arg;let H={sin:_e,cos:_e};h.each(_,Y=>{H[Y[0].type]=Y[1]}),b.handleNegative(H.sin).collect(t).equals(H.cos)&&(H.cos.isNegative()?H={tan:H.sin}:H={cot:H.cos}),h.each(H,(Y,re)=>{p.push([new W(re,T),Y])})})}if(d.length>1){var x=h.groupBy(d,_=>_[0].base.normalize().print());d=[],h.each(x,_=>{_.length===2&&b.handleNegative(_[0][1]).collect(t).equals(_[1][1])?_[0][1].isNegative()?d.push([new ae(_[0][0].power,_[1][0].power),_[1][1]]):d.push([new ae(_[1][0].power,_[0][0].power),_[0][1]]):d=d.concat(_)})}var O=h.map([...p,...d,...m],_=>new L(_[0],_[1]).collect(t));return new b([c].concat(O)).flatten()}isSubtract(){return h.any(this.terms,t=>t instanceof B&&!!t.hints.subtract)}factorIn(t){var s=this.partition(),c=s[0].terms,l=c.length&&h.all(c,y=>y.n>0);if(l){var o=c[0].negate();return o.hints=c[0].hints,this.replace(c[0],o.addHint(t))}else return new b([B.negativeOne(t)].concat(this.terms))}factorOut(){var t=!1,s=h.compact(h.map(this.terms,c=>!t&&c instanceof B&&c.hints.divide?(t=!0,c.n!==-1?c.negate():null):c));return s.length===1?s[0]:new b(s)}reduce(t){return h.reduce(this.terms,(s,c)=>s.mul(c,t),this.identity)}findGCD(t){return new b(h.invoke(this.terms,"findGCD",t)).flatten()}asMul(){return this}asPositiveFactor(){if(this.isPositive())return this;{const t=Te(this.collect()).map(s=>s.asPositiveFactor());return new b(t).flatten()}}isNegative(){const t=Te(this.collect()).map(s=>s.isNegative());return h.any(t)}fold(){return b.fold(this)}negate(){var t=c=>c instanceof B;const s=h.find(this.terms,t);return s?this.replace(s,s.negate()):new b([me].concat(this.terms))}static handleNegative(t,s){if(t instanceof B&&t.n>0){var c=t.negate();return c.hints=t.hints,c.addHint(s)}else return t instanceof b?t.factorIn(s):new b(B.negativeOne(s),t)}static handleDivide(t,s){if(s instanceof b){var c=b.handleDivide(t,s.terms[0]),l=new b(h.rest(s.terms)).flatten();return b.handleDivide(c,l)}var o=m=>m instanceof F,y=m=>m instanceof U;if(o(s)&&t instanceof b&&h.any(t.terms,o)){var E=t.terms.slice().reverse(),w=E.find(y);if(!o(w))return new b(t.terms.concat([new U(1,s.n).addHint("fraction")]));var g=new U(w.n,s.n);return g.hints=w.hints,w===E[0]&&(g=g.addHint("fraction")),w.n<0&&s.n<0?(g.d=-g.d,t.replace(w,[me,g])):t.replace(w,g)}var p=(m,k)=>{if(k instanceof F){if(m instanceof F)return m.n<0&&k.n<0?[me,new U(m.n,-k.n).addHint("fraction")]:[new U(m.n,k.n).addHint("fraction")];var x=new U(1,k.eval());return k.eval()<0?[m,x.addHint("negate")]:[m,x]}else{var O;if(k instanceof W&&k.exp){var _=k.exp;k.exp=void 0,k=new L(k,_)}return k instanceof L?O=new L(k.base,b.handleNegative(k.exp,"divide")):O=new L(k,we),m instanceof F&&m.n===1?[O]:[m,O]}};if(t instanceof b){var d=p(h.last(t.terms),s);return new b(h.initial(t.terms).concat(d))}else{var d=p(t,s);return new b(d).flatten()}}static fold(t){if(t instanceof b){var s=h.find(h.initial(t.terms),m=>(m instanceof W||m instanceof ae)&&!!m.hints.open);if(s){const m=h.last(t.terms);if(s.hints.parens||m.hints.parens||m.has(W)||m.has(ae))s.hints.open=!1;else{const k=s instanceof W?W.create([s.type,s.exp],b.createOrAppend(s.arg,m).fold()):ae.create(s.base,b.createOrAppend(s.power,m).fold()),x=h.indexOf(t.terms,s);return x===0?k:new b(t.terms.slice(0,x).concat(k)).fold()}}var c=t.partition(),l=c[0].terms,o=m=>m.n>0,y=m=>m.n===-1&&!!m.hints.negate,E=function(m){return o(m)||y(m)};const p=l.find(o),d=l.find(y);if(l.length>1&&d&&p&&h.every(l,E)){var w=h.indexOf(t.terms,d),g=h.indexOf(t.terms,p);if(w<g)return t.replace(g,t.terms[g].negate()).remove(w)}}return t}static createOrAppend(t,s){return t instanceof b?new b(t.terms.concat(s)):new b(t,s)}}const Z=class Z extends fe{constructor(t,s){super(),this.func=Z,this.base=t,this.exp=s}args(){return[this.base,this.exp]}eval(t={},s){var c=this.base.eval(t,s),l=this.exp.eval(t,s);if(c<0){var o=this.exp.simplify();if(o instanceof se){var y=o.n,E=(y-+y.toFixed()).toString().length-2,w=Math.pow(10,E),g=new U(y*w,w);o=g.simplify()}if(o instanceof U){var p=Math.abs(o.d)%2===1;if(p){var d=Math.abs(o.n)%2===1,m=d?-1:1;return m*Math.pow(-1*c,l)}}}return Math.pow(c,l)}getUnits(){return this.base.getUnits().map(t=>({unit:t.unit,pow:t.pow*this.exp.n}))}codegen(){return"Math.pow("+this.base.codegen()+", "+this.exp.codegen()+")"}print(){var t=this.base.print();return(this.base instanceof Re||this.base instanceof Z)&&(t="("+t+")"),t+"^("+this.exp.print()+")"}tex(){if(this.isDivide())return"\\frac{1}{"+this.asDivide().tex()+"}";if(this.isRoot()&&$e(this.exp)){if(this.exp.n!==1)throw new Error("Node marked with hint 'root' does not have exponent of form 1/x.");return this.exp.d===2?"\\sqrt{"+this.base.tex()+"}":"\\sqrt["+this.exp.d+"]{"+this.base.tex()+"}"}else if(this.base instanceof W&&!this.base.isInverse()&&this.exp instanceof B&&this.exp.isSimple()&&this.exp.eval()>=0){var t=this.base.texSplit();return t[0]+"^{"+this.exp.tex()+"}"+t[1]}else{var s=this.base.tex();return this.base instanceof Re||this.base instanceof Z||this.base instanceof B&&!this.base.isSimple()?s="("+s+")":(this.base instanceof W||this.base instanceof ae)&&(s="["+s+"]"),s+"^{"+this.exp.tex()+"}"}}needsExplicitMul(){return this.isRoot()?!1:this.base.needsExplicitMul()}expand(){var t=this.recurse("expand");if(t.base instanceof b){var s=h.map(t.base.terms,E=>new Z(E,t.exp));return new b(s).expand()}else if(t.base instanceof ne&&t.exp instanceof F&&t.exp.abs().eval()>1){var c=t.exp.eval()>0,l=t.exp.abs().eval(),o=function(d){return c?d:new Z(d,we)};const E={1:t.base};for(var y=2;y<=l;y*=2){const d=new b(E[y/2],E[y/2]);E[y]=d.expand().collect()}if(l in E)return o(E[l]);let w=h.map(l.toString(2).split(""),function(d,m,k){return Number(d)*Math.pow(2,k.length-m-1)});w=h.without(w,0);const g=[];for(const d of w)d in E&&g.push(E[d]);const p=new b(g).expand().collect();return o(p)}else if(t.exp instanceof ne){const E=h.map(t.exp.terms,w=>new Z(t.base,w).expand());return new b(E).expand()}else return t}factor(){var t=this.recurse("factor");if(t.base instanceof b){var s=h.map(t.base.terms,c=>c instanceof F&&t.exp.equals(we)?new U(1,c.n):new Z(c,t.exp));return new b(s)}else return t}collect(t){if(this.base instanceof Z){const l=this.base.base,o=b.createOrAppend(this.base.exp,this.exp);return new Z(l,o).collect(t)}const s=this.recurse("collect",t),c=function(l){return l instanceof ae&&l.base.equals(s.base)};if(s.exp instanceof B&&s.exp.eval()===0)return te;if(s.exp instanceof B&&s.exp.eval()===1)return s.base;if(c(s.exp))return s.exp.power;if(s.exp instanceof b&&h.any(s.exp.terms,c)){const l=s.exp.terms.find(c),o=l.power,y=s.exp.remove(l).flatten();return new Z(o,y).collect(t)}else if(s.base instanceof B&&s.exp instanceof B){if(t&&t.preciseFloats){const l=s.exp.asRational(),o=s.base.getDecimalPlaces();if(new Z(s.base,new U(1,l.d)).collect().getDecimalPlaces()>o){const w=new Z(s.base,new F(l.n)).collect();return new Z(w,new U(1,l.d))}}return s.base.raiseToThe(s.exp,t)}else return s}isDivide(){var t=function(s){return s instanceof B&&!!s.hints.divide};return t(this.exp)||this.exp instanceof b&&h.any(this.exp.terms,t)}asDivide(){if(this.exp instanceof B){if(this.exp.eval()===-1)return this.base;var t=this.exp.negate();return t.hints=h.clone(this.exp.hints),t.hints.divide=!1,new Z(this.base,t)}else{if(this.exp instanceof b)return new Z(this.base,this.exp.factorOut());throw new Error("called asDivide() on an Expr that wasn't a Num or Mul")}}isRoot(){return this.exp instanceof U&&!!this.exp.hints.root}isSquaredTrig(){return this.base instanceof W&&!this.base.isInverse()&&this.exp instanceof B&&this.exp.eval()===2}getDenominator(){if(this.exp instanceof B&&this.exp.eval()===-1)return b.createOrAppend(this.base,this.base.getDenominator()).flatten();if(this.exp.isNegative()){var t=new Z(this.base,b.handleNegative(this.exp).collect());return b.createOrAppend(t,t.collect().getDenominator()).flatten()}else return this.base instanceof B?new Z(this.base.getDenominator(),this.exp).collect():te}findGCD(t){const[s,c]=t instanceof Z?[t.base,t.exp]:[t,te];if(this.base.equals(s)){if(this.exp.equals(c))return this;if(this.exp instanceof B&&c instanceof B)return new Z(this.base,B.min(this.exp,c)).collect();if(this.exp instanceof B||c instanceof B)return te;var l=this.exp.asMul().partition(),o=c.asMul().partition();if(l[1].equals(o[1])){var y=B.min(l[0].reduce(),o[0].reduce()),E=new b(y,l[1].flatten()).flatten();return new Z(s,E).collect()}}return te}isPositive(){if(this.base.isPositive())return!0;var t=this.exp.simplify();return t instanceof F&&t.eval()%2===0}asPositiveFactor(){if(this.isPositive())return this;var t=this.exp.simplify();if(t instanceof F){var s=t.eval();if(s>2)return new Z(this.base,new F(s-1));if(s<-2)return new Z(this.base,new F(s+1))}return te}static sqrt(t){return new Z(t,et)}};Z.nthroot=function(t,s){var c=b.fold(b.handleDivide(new F(1),s));return new Z(t,c.addHint("root"))};let L=Z;class ae extends fe{constructor(t,s){super(),this.func=ae,this.base=t,this.power=s,this.hints={...this.hints,open:!1}}args(){return[this.base,this.power]}eval(t={},s){return Math.log(this.power.eval(t,s))/Math.log(this.base.eval(t,s))}codegen(){return"(Math.log("+this.power.codegen()+") / Math.log("+this.base.codegen()+"))"}print(){var t="("+this.power.print()+")";return this.isNatural()?"ln"+t:"log_("+this.base.print()+") "+t}tex(){var t="("+this.power.tex()+")";return this.isNatural()?"\\ln"+t:"\\log_{"+this.base.tex()+"}"+t}collect(t){var s=this.recurse("collect",t);return s.power instanceof B&&s.power.eval()===1?_e:s.base.equals(s.power)?te:s.power instanceof L&&s.power.base.equals(s.base)?s.power.exp:s}expand(){var t=this.recurse("expand");if(t.power instanceof b){var s=h.map(t.power.terms,c=>new ae(t.base,c).expand());return new ne(s)}else return t.power instanceof L?new b(t.power.exp,new ae(t.base,t.power.base).expand()).flatten():t.isNatural()?t:b.handleDivide(new ae(Ee.e,t.power),new ae(Ee.e,t.base))}isPositive(){var t=this.collect();return t instanceof ae&&t.base instanceof B&&t.power instanceof B?this.eval()>0:!1}needsExplicitMul(){return!1}isNatural(){return this.base.equals(Ee.e)}static natural(){return Ee.e}static common(){return tt}static create(t,s){var c=new ae(t,s);return s.hints.parens||(c=c.addHint("open")),c}}class W extends fe{constructor(t,s){super(),this.func=W,this.functions={sin:{eval:Math.sin,codegen:"Math.sin((",tex:"\\sin",expand:()=>this},cos:{eval:Math.cos,codegen:"Math.cos((",tex:"\\cos",expand:()=>this},tan:{eval:Math.tan,codegen:"Math.tan((",tex:"\\tan",expand:()=>b.handleDivide(W.sin(this.arg),W.cos(this.arg))},csc:{eval:c=>1/Math.sin(c),codegen:"(1/Math.sin(",tex:"\\csc",expand:()=>b.handleDivide(te,W.sin(this.arg))},sec:{eval:c=>1/Math.cos(c),codegen:"(1/Math.cos(",tex:"\\sec",expand:()=>b.handleDivide(te,W.cos(this.arg))},cot:{eval:c=>1/Math.tan(c),codegen:"(1/Math.tan(",tex:"\\cot",expand:()=>b.handleDivide(W.cos(this.arg),W.sin(this.arg))},arcsin:{eval:Math.asin,codegen:"Math.asin((",tex:"\\arcsin"},arccos:{eval:Math.acos,codegen:"Math.acos((",tex:"\\arccos"},arctan:{eval:Math.atan,codegen:"Math.atan((",tex:"\\arctan"},arccsc:{eval:c=>Math.asin(1/c),codegen:"Math.asin(1/(",tex:"\\operatorname{arccsc}"},arcsec:{eval:c=>Math.acos(1/c),codegen:"Math.acos(1/(",tex:"\\operatorname{arcsec}"},arccot:{eval:c=>Math.atan(1/c),codegen:"Math.atan(1/(",tex:"\\operatorname{arccot}"},sinh:{eval:c=>(Math.exp(c)-Math.exp(-c))/2,codegen:c=>"((Math.exp("+c+") - Math.exp(-("+c+"))) / 2)",tex:"\\sinh",expand:()=>this},cosh:{eval:c=>(Math.exp(c)+Math.exp(-c))/2,codegen:c=>"((Math.exp("+c+") + Math.exp(-("+c+"))) / 2)",tex:"\\cosh",expand:()=>this},tanh:{eval:c=>(Math.exp(c)-Math.exp(-c))/(Math.exp(c)+Math.exp(-c)),codegen:c=>"((Math.exp("+c+") - Math.exp(-("+c+"))) / (Math.exp("+c+") + Math.exp(-("+c+"))))",tex:"\\tanh",expand:()=>b.handleDivide(W.sinh(this.arg),W.cosh(this.arg))},csch:{eval:c=>2/(Math.exp(c)-Math.exp(-c)),codegen:c=>"(2 / (Math.exp("+c+") - Math.exp(-("+c+"))))",tex:"\\csch",expand:()=>b.handleDivide(te,W.sinh(this.arg))},sech:{eval:c=>2/(Math.exp(c)+Math.exp(-c)),codegen:c=>"(2 / (Math.exp("+c+") + Math.exp(-("+c+"))))",tex:"\\sech",expand:()=>b.handleDivide(te,W.cosh(this.arg))},coth:{eval:c=>(Math.exp(c)+Math.exp(-c))/(Math.exp(c)-Math.exp(-c)),codegen:c=>"((Math.exp("+c+") + Math.exp(-("+c+"))) / (Math.exp("+c+") - Math.exp(-("+c+"))))",tex:"\\coth",expand:()=>b.handleDivide(W.cosh(this.arg),W.sinh(this.arg))}},this.type=t,this.arg=s,this.hints={...this.hints,open:!1}}args(){return[this.type,this.arg]}isEven(){return h.contains(["cos","sec"],this.type)}isInverse(){return this.type.indexOf("arc")===0}isBasic(){return h.contains(["sin","cos"],this.type)}eval(t={},s){var c=this.functions[this.type].eval,l=this.arg.eval(t,s);return c(l)}codegen(){var t=this.functions[this.type].codegen;if(typeof t=="function")return t(this.arg.codegen());if(typeof t=="string")return t+this.arg.codegen()+"))";throw new Error("codegen not implemented for "+this.type)}print(){return this.type+"("+this.arg.print()+")"}tex(){var t=this.functions[this.type].tex,s="("+this.arg.tex()+")";return t+s}texSplit(){var t=this.functions[this.type].tex,s="("+this.arg.tex()+")";return[t,s]}isPositive(){var t=this.collect();return t instanceof W&&t.arg instanceof B?this.eval()>0:!1}completeParse(){if(this.exp){var t=new L(this,this.exp);return this.exp=void 0,t}else return this}needsExplicitMul(){return!1}expand(){var t=this.recurse("expand");if(t.isInverse())return t;var s=t.functions[t.type].expand;return h.bind(s,t)()}collect(t){var s=this.recurse("collect",t);if(!s.isInverse()&&s.arg.isNegative()){const c=s.arg instanceof B?s.arg.abs():b.handleDivide(s.arg,me).collect(t);return s.isEven()?new W(s.type,c):new b(me,new W(s.type,c))}else return s}static create(t,s){var c=t[0],l=t[1];l&&l.equals(me)&&(c="arc"+c,l=void 0);var o=new W(c,s);return s.hints.parens||(o=o.addHint("open")),l&&(o.exp=l),o}static sin(t){return new W("sin",t)}static cos(t){return new W("cos",t)}static sinh(t){return new W("sinh",t)}static cosh(t){return new W("cosh",t)}}class Oe extends fe{constructor(t){super(),this.func=Oe,this.arg=t}args(){return[this.arg]}eval(t={},s){return Math.abs(this.arg.eval(t,s))}codegen(){return"Math.abs("+this.arg.codegen()+")"}print(){return"abs("+this.arg.print()+")"}tex(){return"\\left|"+this.arg.tex()+"\\right|"}collect(t){var s=this.recurse("collect",t);if(s.arg.isPositive())return s.arg;if(s.arg instanceof B)return s.arg.abs();if(s.arg instanceof b){var c=h.groupBy(s.arg.terms,o=>o.isPositive()?"positive":o instanceof B?"number":"other"),l=c.positive.concat(h.invoke(c.number,"abs"));return c.other.length&&l.push(new Oe(new b(c.other).flatten())),new b(l).flatten()}else return s}expand(){var t=this.recurse("expand");if(t.arg instanceof b){var s=h.map(t.arg.terms,c=>new Oe(c));return new b(s)}else return t}isPositive(){return!0}}class Me extends fe{constructor(t,s,c){super(),this.func=Me,this.signs={"=":" = ","<":" < ",">":" > ","<>":" \\ne ","<=":" \\le ",">=":" \\ge "},this.left=t,this.type=s,this.right=c}args(){return[this.left,this.type,this.right]}needsExplicitMul(){return!1}print(){return this.left.print()+this.type+this.right.print()}tex(){return this.left.tex()+this.signs[this.type]+this.right.tex()}normalize(){var t=this.recurse("normalize");return h.contains([">",">="],t.type)?new Me(t.right,t.type.replace(">","<"),t.left):t}asExpr(t=!1){var s=w=>w instanceof B&&w.isSimple()&&w.eval()===0;let c=[];this.left instanceof ne?c=h.clone(this.left.terms):s(this.left)||(c=[this.left]),this.right instanceof ne?c=c.concat(this.right.negate().terms):s(this.right)||c.push(this.right.negate());var l=!this.isEquality();c=h.invoke(c,"collect",{preciseFloats:!0});for(var o=0;o<c.length;o++){var y=c[o].getDenominator();l&&!y.isPositive()&&(y=y.asPositiveFactor()),y.equals(te)||(c=h.map(c,w=>b.createOrAppend(w,y).simplify({once:!0,preciseFloats:!0})))}var E=new ne(c).flatten();return t?E:this.divideThrough(E)}divideThrough(t){const s=!this.isEquality(),c=t.simplify({once:!0}),l=c.factor({keepNegative:s});if(!(l instanceof b))return t;const o=l.terms,y=m=>!!m.getVars().length,E=m=>m.equals(te),[w,g]=Ne(o,Se);if(w.length&&this.isEquality())return new b(w).flatten();let p=g;w.length||(p=h.reject(p,y)),s&&(p=h.invoke(p,"asPositiveFactor")),p=h.reject(p,E),p=h.map(p,m=>new L(m,we));const d=new b(o.concat(p)).collect();return d.equals(l)?c:d}isEquality(){return h.contains(["=","<>"],this.type)}compare(t){if(!(t instanceof Me))return!1;var s=this.normalize(),c=t.normalize();if(s.type!==c.type)return!1;var l=s.divideThrough(s.asExpr(!0).collect()),o=c.divideThrough(c.asExpr(!0).collect());return s.isEquality()?l.compare(o)||l.compare(b.handleNegative(o)):l.compare(o)}sameForm(t){var s=this.normalize(),c=t.normalize(),l=s.left.sameForm(c.left)&&s.right.sameForm(c.right);return s.isEquality()?l||s.left.sameForm(c.right)&&s.right.sameForm(c.left):l}isSimplified(){var t=this.asExpr(!0),s=this.divideThrough(t).simplify();return t.equals(s)&&this.left.isSimplified()&&this.right.isSimplified()}solveLinearEquationForVariable(t){var s=this.asExpr();if(!(s instanceof ne)||s.terms.length!==2)throw new Error("Can only handle linear equations of the form a + bx (= 0)");var c=E=>E.has(De)&&h.contains(E.getVars(),t.symbol);const l=c(s.terms[0]),o=l?b.handleNegative(s.terms[1]):b.handleNegative(s.terms[0]),y=l?b.handleDivide(s.terms[0],t):b.handleDivide(s.terms[1],t);return b.handleDivide(o,y).simplify()}}class Ie extends fe{needsExplicitMul(){return!1}findGCD(t){return t instanceof Ie||t instanceof B?this.equals(t)?this:te:t.findGCD(this)}}class xe extends Ie{constructor(t,s){super(),this.func=xe,this.symbol=t,this.arg=s}args(){return[this.symbol,this.arg]}print(){return this.symbol+"("+this.arg.print()+")"}tex(){return this.symbol+"("+this.arg.tex()+")"}eval(t={},s){var c=this.arg,l=t[this.symbol],o=h.extend(h.clone(t),{x:c.eval(t,s)}),y=We(l,s);return y.parsed?y.expr.eval(o,s):y}codegen(){return'vars["'+this.symbol+'"]('+this.arg.codegen()+")"}getUnits(){return this.arg.getUnits()}getVars(t){return t?this.arg.getVars():h.union(this.arg.getVars(),[this.symbol]).sort()}getConsts(){return this.arg.getConsts()}}class De extends Ie{constructor(t,s){super(),this.func=De,this.symbol=t,this.subscript=s}args(){return[this.symbol,this.subscript]}exprArgs(){return[]}recurse(){return this}print(){var t="";return this.subscript&&(t="_("+this.subscript.print()+")"),this.symbol+t}prettyPrint(){var t=this.subscript;return t&&(t instanceof B||t instanceof Ie)?this.symbol+"_"+t.print():this.print()}tex(){var t="";this.subscript&&(t="_{"+this.subscript.tex()+"}");var s=this.symbol.length>1?"\\":"";return s+this.symbol+t}repr(){return"Var("+this.print()+")"}eval(t={},s){return t[this.prettyPrint()]}codegen(){return'vars["'+this.prettyPrint()+'"]'}getVars(){return[this.prettyPrint()]}isPositive(){return!1}}const ke=class ke extends Ie{constructor(t){super(),this.func=ke,this.symbol=t}args(){return[this.symbol]}recurse(){return this}eval(t={},s){return this.symbol==="pi"?Math.PI:this.symbol==="e"?Math.E:void 0}codegen(){return this.symbol==="pi"?"Math.PI":this.symbol==="e"?"Math.E":void 0}print(){return this.symbol}tex(){return this.symbol==="pi"?"\\pi ":this.symbol==="e"?"e":void 0}isPositive(){return this.eval()>0}abs(){return this.eval()>0?this:b.handleNegative(this)}getConsts(){return[this.print()]}};ke.e=new ke("e"),ke.pi=new ke("pi");let Ee=ke;class B extends fe{constructor(){super(),this.n=0,this.hints={...this.hints,negate:!1,subtract:!1,divide:!1,root:!1,fraction:!1,entered:!1}}repr(){return this.print()}strip(){return this.abs()}recurse(){return this}codegen(){return this.print()}isSubtract(){return!!this.hints.subtract}needsExplicitMul(){return!0}isPositive(){return this.eval()>0}isNegative(){return this.eval()<0}asPositiveFactor(){return this.isPositive()?this:this.abs()}getDecimalPlaces(){var t=(""+this.n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}static negativeOne(t){return t==="subtract"?je:t==="divide"?we:me}static findGCD(t,s){var c;if(t=Math.abs(t),s=Math.abs(s),t!==Math.floor(t)||s!==Math.floor(s))return 1;for(;s;)c=t%s,t=s,s=c;return t}static min(...t){return h.min(t,s=>s.eval())}static max(...t){return h.max(t,s=>s.eval())}}class U extends B{constructor(t,s){super(),this.func=U;var c=t,l=s;l<0&&(c=-c,l=-l),this.n=c,this.d=l}args(){return[this.n,this.d]}eval(){return this.n/this.d}print(){return this.n.toString()+"/"+this.d.toString()}tex(){var t="\\frac{"+Math.abs(this.n).toString()+"}{"+this.d.toString()+"}";return this.n<0?"-"+t:t}add(t,s){return t instanceof U?new U(this.n*t.d+this.d*t.n,this.d*t.d).collect():t.add(this,s)}mul(t,s){return t instanceof U?new U(this.n*t.n,this.d*t.d).collect():t.mul(this,s)}collect(){var t=B.findGCD(this.n,this.d),s=this.n/t,c=this.d/t;return c===1?new F(s):new U(s,c)}negate(){return new U(-this.n,this.d)}abs(){return new U(Math.abs(this.n),this.d)}findGCD(t){if(t instanceof U){var s=B.findGCD(this.n*t.d,t.n*this.d),c=this.d*t.d;return new U(s,c).collect()}else return t instanceof F?new U(B.findGCD(this.n,t.n),this.d):t.findGCD(this)}raiseToThe(t){if(t instanceof F){var s=t.eval()>0,c=t.abs().eval(),l=Math.pow(this.n,c),o=Math.pow(this.d,c);return s?new U(l,o).collect():new U(o,l).collect()}else return new se(this.eval()).raiseToThe(t)}getDenominator(){return new F(this.d)}isSimple(){return!1}asRational(){return this}}class F extends U{constructor(t){super(t,1),this.func=F}args(){return[this.n]}print(){return this.n.toString()}tex(){return this.n.toString()}negate(){return new F(-this.n)}abs(){return new F(Math.abs(this.n))}isSimple(){return!0}findGCD(t){return t instanceof F?new F(B.findGCD(this.n,t.n)):t.findGCD(this)}static create(t){return new F(t).addHint("entered")}}class se extends B{constructor(t){super(),this.func=se,this.n=t}args(){return[this.n]}eval(){return this.n}print(){return this.n.toString()}tex(){return this.n.toString()}add(t,s){return s&&s.preciseFloats?se.toDecimalPlaces(this.n+t.eval(),Math.max(this.getDecimalPlaces(),t.getDecimalPlaces())):new se(this.n+t.eval()).collect()}mul(t,s){return s&&s.preciseFloats?se.toDecimalPlaces(this.n*t.eval(),this.getDecimalPlaces()+t.getDecimalPlaces()):new se(this.n*t.eval()).collect()}collect(t){return this}negate(){return new se(-this.n)}abs(){return new se(Math.abs(this.n))}findGCD(t){return t instanceof B?new se(B.findGCD(this.eval(),t.eval())).collect():t.findGCD(this)}raiseToThe(t,s){return s&&s.preciseFloats&&t instanceof F&&t.n>1?se.toDecimalPlaces(new L(this,t).eval(),this.getDecimalPlaces()*t.n):new se(new L(this,t).eval()).collect()}asRational(){var t=this.n.toString().split(".");if(t.length===1)return new U(this.n,1);var s=Number(t.join("")),c=Math.pow(10,t[1].length);return new U(s,c).collect()}getDenominator(){return this.asRational().getDenominator()}isSimple(){return!0}static create(t){return new se(t).addHint("entered")}static toDecimalPlaces(t,s){return new se(+t.toFixed(Math.min(s,20))).collect()}}const me=new F(-1).addHint("negate"),je=new F(-1).addHint("subtract"),we=new F(-1).addHint("divide"),et=new U(1,2).addHint("root"),_e=new F(0),te=new F(1),tt=new F(10);var nt=function(N,t){throw new Error(t.loc.first_column)};Ae.yy={Add:ne,Mul:b,Pow:L,Log:ae,Trig:W,Eq:Me,Abs:Oe,Func:xe,Const:Ee,Var:De,Int:F,Float:se,parseError:nt,constants:["e"],symbolLexer:function(N){return h.contains(Ae.yy.constants,N)?"CONST":h.contains(Ae.yy.functions,N)?"FUNC":"VAR"}};const We=function(N,t){try{t&&t.functions?Ae.yy.functions=h.without(t.functions,"i"):Ae.yy.functions=[],t&&t.decimal_separator&&(N=N.split(t.decimal_separator).join("."));var s=Ae.parse(N).completeParse();return{parsed:!0,expr:s}}catch(c){return{parsed:!1,error:c.message}}};class ue extends Ie{constructor(t){super(),this.func=ue,this.symbol=t}args(){return[this.symbol]}recurse(){return this}eval(t={},s){return 1}getUnits(){return[{unit:this.symbol,pow:1}]}codegen(){return"1"}print(){return this.symbol}tex(){return this.symbol}collect(t){if(h(rt).has(this.symbol))return this;if(h(Le).has(this.symbol))return Le[this.symbol].conversion;throw new Error("could not understand unit: "+this.symbol)}}var rt={m:new ue("m"),g:new ue("g"),s:new ue("s"),A:new ue("A"),K:new ue("K"),mol:new ue("mol"),cd:new ue("cd")};new L(new F(10),new F(-18)),new L(new F(10),new F(-15)),new L(new F(10),new F(-12)),new L(new F(10),new F(-9)),new L(new F(10),new F(-6)),new L(new F(10),new F(-3)),new L(new F(10),new F(-2)),new L(new F(10),new F(-1)),new F(10),new L(new F(10),new F(2)),new L(new F(10),new F(3)),new L(new F(10),new F(6)),new L(new F(10),new F(9)),new L(new F(10),new F(12)),new L(new F(10),new F(15)),new L(new F(10),new F(18)),new L(new F(10),new F(27));const ee="hasPrefixes",S="hasntPrefixes",I=function(N,t){var s=N.split("|"),c=s[0].trim(),l=s[1].trim(),o=te;c!==""&&(o=We(c).expr);var y=l.split("/"),E=[o];return y[0]&&y[0].split(" ").filter(w=>w!=="").forEach(w=>E.push(new ue(w))),y[1]&&y[1].split(" ").filter(w=>w!=="").forEach(w=>E.push(new L(new ue(w),we))),{conversion:new b(E),prefixes:t}};var Le={Da:I("1.6605388628 x 10^-24 | g",ee),u:I("| Da",S),meter:I("| m",S),meters:I("| m",S),in:I("254 / 10000 | m",S),ft:I("3048  / 10000 | m",S),yd:I("9144  / 10000 | m",S),mi:I("1609344 / 1000 | m",S),ly:I("9.4607 x 10^15 | m",S),nmi:I("1852 | m",S),Å:I("10^-10 | m",S),pc:I("3.0857 x 10^16 | m",S),min:I("60 | s",S),hr:I("3600 | s",S),sec:I("| s",S),day:I("86400 | s",S),wk:I("604800 | s",S),fortnight:I("14 | day",S),shake:I("10^-8 | s",S),olympiad:I("126200000 | s",S),"°C":I("1 | K",S),"°F":I("5/9 | K",S),"°R":I("5/9 | K",S),e:I("1.6021765314 x 10^-19 | C",S),c:I("299792458 | m / s",S),kn:I("514/1000 | m / s",S),kt:I("| kn",S),knot:I("| kn",S),J:I("| N m",ee),BTU:I("1060 | J",S),cal:I("4184 / 1000 | J",ee),eV:I("1.602176514 x 10^-19 | J",ee),erg:I("10^−7 | J",ee),W:I("| J / s",ee),"H-e":I("80 | W",S),N:I("1000 | g m / s s",ee),lb:I("4448221615 / 1000000000 | N",S),dyn:I("10^-5 | N",S),Pa:I("1 | N / m m m",ee),bar:I("10^5 | Pa",ee),"㏔":I("1/1000 | bar",S),"㍴":I("| bar",S),atm:I("101325 | Pa",S),Torr:I("1/760 | atm",S),mmHg:I("| Torr",S),ha:I("10^4 | m m",S),b:I("10^−28 | m m",ee),barn:I("| b",ee),acre:I("4046.87 | m m",S),skilodge:I("10^-31 | m m",S),outhouse:I("10^-34 | m m",S),shed:I("10^-52 | m m",S),L:I("1/1000 | m m m",ee),gal:I("3785/1000 | L",ee),cup:I("1/16 | gal",S),qt:I("1/4 | gal",S),quart:I("| qt",S),p:I("1/8 | gal",S),pt:I("| p",S),pint:I("| p",S),"fl oz":I("1/8 | cup",S),"fl. oz.":I("1/8 | cup",S),tbsp:I("1/16 | cup",S),tsp:I("1/3 | tbsp",S),rev:I("2 pi | rad",S),deg:I("180 pi | rad",S),"°":I("| deg",S),arcminute:I("1/60 | deg",S),arcsec:I("1/3600 | deg",S),Hu:I("1000 | dB",ee),dozen:I("12 |",S),mol:I("6.0221412927 x 10^23 |",ee),"%":I("1/100 |",S),percent:I("| %",S),ppm:I("1/1000000 |",S),V:I("1000 | g m m / s s C",ee),C:I("| A s",ee),ampere:I("| A",S),Ω:I("| V / A",ee),ohm:I("| Ω",S),F:I("| C / V",ee),H:I("| ohm s",ee),T:I("1000 | g / C s",ee),Wb:I("1000 | g m m / C s",ee),lm:I("pi x 10^4 | cd / m m",S),lx:I("| lm / m m",S),nit:I("| cd / m m",S),sb:I("10^4 | cd / m m",S),stilb:I("1 | sb",S),apostilb:I("1 / pi x 10^(-4) | sb",S),blondel:I("| apostilb",S),asb:I("| apostilb",S),la:I("| lm",S),Lb:I("| lm",S),sk:I("10^-7 | lm",S),skot:I("| sk",S),bril:I("10^-11 | lm",S),Hz:I("| / s",ee)};const it="@khanacademy/kmath",st="__lib_version__";Ue(it,st);var Ve={exports:{}};(function(N,t){(function(){var s=this,c=s._,l={},o=Array.prototype,y=Object.prototype,E=Function.prototype,w=o.push,g=o.slice,p=o.concat,d=y.toString,m=y.hasOwnProperty,k=o.forEach,x=o.map,O=o.reduce,_=o.reduceRight,T=o.filter,H=o.every,Y=o.some,re=o.indexOf,he=o.lastIndexOf,Q=Array.isArray,j=Object.keys,ie=E.bind,r=function(e){if(e instanceof r)return e;if(!(this instanceof r))return new r(e);this._wrapped=e};N.exports&&(t=N.exports=r),t._=r,r.VERSION="1.4.4";var z=r.each=r.forEach=function(e,n,i){if(e!=null){if(k&&e.forEach===k)e.forEach(n,i);else if(e.length===+e.length){for(var a=0,u=e.length;a<u;a++)if(n.call(i,e[a],a,e)===l)return}else for(var v in e)if(r.has(e,v)&&n.call(i,e[v],v,e)===l)return}};r.map=r.collect=function(e,n,i){var a=[];return e==null?a:x&&e.map===x?e.map(n,i):(z(e,function(u,v,f){a[a.length]=n.call(i,u,v,f)}),a)};var pe="Reduce of empty array with no initial value";r.reduce=r.foldl=r.inject=function(e,n,i,a){var u=arguments.length>2;if(e==null&&(e=[]),O&&e.reduce===O)return a&&(n=r.bind(n,a)),u?e.reduce(n,i):e.reduce(n);if(z(e,function(v,f,P){u?i=n.call(a,i,v,f,P):(i=v,u=!0)}),!u)throw new TypeError(pe);return i},r.reduceRight=r.foldr=function(e,n,i,a){var u=arguments.length>2;if(e==null&&(e=[]),_&&e.reduceRight===_)return a&&(n=r.bind(n,a)),u?e.reduceRight(n,i):e.reduceRight(n);var v=e.length;if(v!==+v){var f=r.keys(e);v=f.length}if(z(e,function(P,D,K){D=f?f[--v]:--v,u?i=n.call(a,i,e[D],D,K):(i=e[D],u=!0)}),!u)throw new TypeError(pe);return i},r.find=r.detect=function(e,n,i){var a;return X(e,function(u,v,f){if(n.call(i,u,v,f))return a=u,!0}),a},r.filter=r.select=function(e,n,i){var a=[];return e==null?a:T&&e.filter===T?e.filter(n,i):(z(e,function(u,v,f){n.call(i,u,v,f)&&(a[a.length]=u)}),a)},r.reject=function(e,n,i){return r.filter(e,function(a,u,v){return!n.call(i,a,u,v)},i)},r.every=r.all=function(e,n,i){n||(n=r.identity);var a=!0;return e==null?a:H&&e.every===H?e.every(n,i):(z(e,function(u,v,f){if(!(a=a&&n.call(i,u,v,f)))return l}),!!a)};var X=r.some=r.any=function(e,n,i){n||(n=r.identity);var a=!1;return e==null?a:Y&&e.some===Y?e.some(n,i):(z(e,function(u,v,f){if(a||(a=n.call(i,u,v,f)))return l}),!!a)};r.contains=r.include=function(e,n){return e==null?!1:re&&e.indexOf===re?e.indexOf(n)!=-1:X(e,function(i){return i===n})},r.invoke=function(e,n){var i=g.call(arguments,2),a=r.isFunction(n);return r.map(e,function(u){return(a?n:u[n]).apply(u,i)})},r.pluck=function(e,n){return r.map(e,function(i){return i[n]})},r.where=function(e,n,i){return r.isEmpty(n)?i?null:[]:r[i?"find":"filter"](e,function(a){for(var u in n)if(n[u]!==a[u])return!1;return!0})},r.findWhere=function(e,n){return r.where(e,n,!0)},r.max=function(e,n,i){if(!n&&r.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!n&&r.isEmpty(e))return-1/0;var a={computed:-1/0,value:-1/0};return z(e,function(u,v,f){var P=n?n.call(i,u,v,f):u;P>=a.computed&&(a={value:u,computed:P})}),a.value},r.min=function(e,n,i){if(!n&&r.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!n&&r.isEmpty(e))return 1/0;var a={computed:1/0,value:1/0};return z(e,function(u,v,f){var P=n?n.call(i,u,v,f):u;P<a.computed&&(a={value:u,computed:P})}),a.value},r.shuffle=function(e){var n,i=0,a=[];return z(e,function(u){n=r.random(i++),a[i-1]=a[n],a[n]=u}),a};var $=function(e){return r.isFunction(e)?e:function(n){return n[e]}};r.sortBy=function(e,n,i){var a=$(n);return r.pluck(r.map(e,function(u,v,f){return{value:u,index:v,criteria:a.call(i,u,v,f)}}).sort(function(u,v){var f=u.criteria,P=v.criteria;if(f!==P){if(f>P||f===void 0)return 1;if(f<P||P===void 0)return-1}return u.index<v.index?-1:1}),"value")};var M=function(e,n,i,a){var u={},v=$(n||r.identity);return z(e,function(f,P){var D=v.call(i,f,P,e);a(u,D,f)}),u};r.groupBy=function(e,n,i){return M(e,n,i,function(a,u,v){(r.has(a,u)?a[u]:a[u]=[]).push(v)})},r.countBy=function(e,n,i){return M(e,n,i,function(a,u){r.has(a,u)||(a[u]=0),a[u]++})},r.sortedIndex=function(e,n,i,a){i=i==null?r.identity:$(i);for(var u=i.call(a,n),v=0,f=e.length;v<f;){var P=v+f>>>1;i.call(a,e[P])<u?v=P+1:f=P}return v},r.toArray=function(e){return e?r.isArray(e)?g.call(e):e.length===+e.length?r.map(e,r.identity):r.values(e):[]},r.size=function(e){return e==null?0:e.length===+e.length?e.length:r.keys(e).length},r.first=r.head=r.take=function(e,n,i){if(e!=null)return n!=null&&!i?g.call(e,0,n):e[0]},r.initial=function(e,n,i){return g.call(e,0,e.length-(n==null||i?1:n))},r.last=function(e,n,i){if(e!=null)return n!=null&&!i?g.call(e,Math.max(e.length-n,0)):e[e.length-1]},r.rest=r.tail=r.drop=function(e,n,i){return g.call(e,n==null||i?1:n)},r.compact=function(e){return r.filter(e,r.identity)};var V=function(e,n,i){return z(e,function(a){r.isArray(a)?n?w.apply(i,a):V(a,n,i):i.push(a)}),i};r.flatten=function(e,n){return V(e,n,[])},r.without=function(e){return r.difference(e,g.call(arguments,1))},r.uniq=r.unique=function(e,n,i,a){r.isFunction(n)&&(a=i,i=n,n=!1);var u=i?r.map(e,i,a):e,v=[],f=[];return z(u,function(P,D){(n?!D||f[f.length-1]!==P:!r.contains(f,P))&&(f.push(P),v.push(e[D]))}),v},r.union=function(){return r.uniq(p.apply(o,arguments))},r.intersection=function(e){var n=g.call(arguments,1);return r.filter(r.uniq(e),function(i){return r.every(n,function(a){return r.indexOf(a,i)>=0})})},r.difference=function(e){var n=p.apply(o,g.call(arguments,1));return r.filter(e,function(i){return!r.contains(n,i)})},r.zip=function(){for(var e=g.call(arguments),n=r.max(r.pluck(e,"length")),i=new Array(n),a=0;a<n;a++)i[a]=r.pluck(e,""+a);return i},r.object=function(e,n){if(e==null)return{};for(var i={},a=0,u=e.length;a<u;a++)n?i[e[a]]=n[a]:i[e[a][0]]=e[a][1];return i},r.indexOf=function(e,n,i){if(e==null)return-1;var a=0,u=e.length;if(i)if(typeof i=="number")a=i<0?Math.max(0,u+i):i;else return a=r.sortedIndex(e,n),e[a]===n?a:-1;if(re&&e.indexOf===re)return e.indexOf(n,i);for(;a<u;a++)if(e[a]===n)return a;return-1},r.lastIndexOf=function(e,n,i){if(e==null)return-1;var a=i!=null;if(he&&e.lastIndexOf===he)return a?e.lastIndexOf(n,i):e.lastIndexOf(n);for(var u=a?i:e.length;u--;)if(e[u]===n)return u;return-1},r.range=function(e,n,i){arguments.length<=1&&(n=e||0,e=0),i=arguments[2]||1;for(var a=Math.max(Math.ceil((n-e)/i),0),u=0,v=new Array(a);u<a;)v[u++]=e,e+=i;return v},r.bind=function(e,n){if(e.bind===ie&&ie)return ie.apply(e,g.call(arguments,1));var i=g.call(arguments,2);return function(){return e.apply(n,i.concat(g.call(arguments)))}},r.partial=function(e){var n=g.call(arguments,1);return function(){return e.apply(this,n.concat(g.call(arguments)))}},r.bindAll=function(e){var n=g.call(arguments,1);return n.length===0&&(n=r.functions(e)),z(n,function(i){e[i]=r.bind(e[i],e)}),e},r.memoize=function(e,n){var i={};return n||(n=r.identity),function(){var a=n.apply(this,arguments);return r.has(i,a)?i[a]:i[a]=e.apply(this,arguments)}},r.delay=function(e,n){var i=g.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},n)},r.defer=function(e){return r.delay.apply(r,[e,1].concat(g.call(arguments,1)))},r.throttle=function(e,n){var i,a,u,v,f=0,P=function(){f=new Date,u=null,v=e.apply(i,a)};return function(){var D=new Date,K=n-(D-f);return i=this,a=arguments,K<=0?(clearTimeout(u),u=null,f=D,v=e.apply(i,a)):u||(u=setTimeout(P,K)),v}},r.debounce=function(e,n,i){var a,u;return function(){var v=this,f=arguments,P=function(){a=null,i||(u=e.apply(v,f))},D=i&&!a;return clearTimeout(a),a=setTimeout(P,n),D&&(u=e.apply(v,f)),u}},r.once=function(e){var n=!1,i;return function(){return n||(n=!0,i=e.apply(this,arguments),e=null),i}},r.wrap=function(e,n){return function(){var i=[e];return w.apply(i,arguments),n.apply(this,i)}},r.compose=function(){var e=arguments;return function(){for(var n=arguments,i=e.length-1;i>=0;i--)n=[e[i].apply(this,n)];return n[0]}},r.after=function(e,n){return e<=0?n():function(){if(--e<1)return n.apply(this,arguments)}},r.keys=j||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var n=[];for(var i in e)r.has(e,i)&&(n[n.length]=i);return n},r.values=function(e){var n=[];for(var i in e)r.has(e,i)&&n.push(e[i]);return n},r.pairs=function(e){var n=[];for(var i in e)r.has(e,i)&&n.push([i,e[i]]);return n},r.invert=function(e){var n={};for(var i in e)r.has(e,i)&&(n[e[i]]=i);return n},r.functions=r.methods=function(e){var n=[];for(var i in e)r.isFunction(e[i])&&n.push(i);return n.sort()},r.extend=function(e){return z(g.call(arguments,1),function(n){if(n)for(var i in n)e[i]=n[i]}),e},r.pick=function(e){var n={},i=p.apply(o,g.call(arguments,1));return z(i,function(a){a in e&&(n[a]=e[a])}),n},r.omit=function(e){var n={},i=p.apply(o,g.call(arguments,1));for(var a in e)r.contains(i,a)||(n[a]=e[a]);return n},r.defaults=function(e){return z(g.call(arguments,1),function(n){if(n)for(var i in n)e[i]==null&&(e[i]=n[i])}),e},r.clone=function(e){return r.isObject(e)?r.isArray(e)?e.slice():r.extend({},e):e},r.tap=function(e,n){return n(e),e};var A=function(e,n,i,a){if(e===n)return e!==0||1/e==1/n;if(e==null||n==null)return e===n;e instanceof r&&(e=e._wrapped),n instanceof r&&(n=n._wrapped);var u=d.call(e);if(u!=d.call(n))return!1;switch(u){case"[object String]":return e==String(n);case"[object Number]":return e!=+e?n!=+n:e==0?1/e==1/n:e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object RegExp]":return e.source==n.source&&e.global==n.global&&e.multiline==n.multiline&&e.ignoreCase==n.ignoreCase}if(typeof e!="object"||typeof n!="object")return!1;for(var v=i.length;v--;)if(i[v]==e)return a[v]==n;i.push(e),a.push(n);var f=0,P=!0;if(u=="[object Array]"){if(f=e.length,P=f==n.length,P)for(;f--&&(P=A(e[f],n[f],i,a)););}else{var D=e.constructor,K=n.constructor;if(D!==K&&!(r.isFunction(D)&&D instanceof D&&r.isFunction(K)&&K instanceof K))return!1;for(var J in e)if(r.has(e,J)&&(f++,!(P=r.has(n,J)&&A(e[J],n[J],i,a))))break;if(P){for(J in n)if(r.has(n,J)&&!f--)break;P=!f}}return i.pop(),a.pop(),P};r.isEqual=function(e,n){return A(e,n,[],[])},r.isEmpty=function(e){if(e==null)return!0;if(r.isArray(e)||r.isString(e))return e.length===0;for(var n in e)if(r.has(e,n))return!1;return!0},r.isElement=function(e){return!!(e&&e.nodeType===1)},r.isArray=Q||function(e){return d.call(e)=="[object Array]"},r.isObject=function(e){return e===Object(e)},z(["Arguments","Function","String","Number","Date","RegExp"],function(e){r["is"+e]=function(n){return d.call(n)=="[object "+e+"]"}}),r.isArguments(arguments)||(r.isArguments=function(e){return!!(e&&r.has(e,"callee"))}),typeof/./!="function"&&(r.isFunction=function(e){return typeof e=="function"}),r.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},r.isNaN=function(e){return r.isNumber(e)&&e!=+e},r.isBoolean=function(e){return e===!0||e===!1||d.call(e)=="[object Boolean]"},r.isNull=function(e){return e===null},r.isUndefined=function(e){return e===void 0},r.has=function(e,n){return m.call(e,n)},r.noConflict=function(){return s._=c,this},r.identity=function(e){return e},r.times=function(e,n,i){for(var a=Array(e),u=0;u<e;u++)a[u]=n.call(i,u);return a},r.random=function(e,n){return n==null&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))};var R={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};R.unescape=r.invert(R.escape);var C={escape:new RegExp("["+r.keys(R.escape).join("")+"]","g"),unescape:new RegExp("("+r.keys(R.unescape).join("|")+")","g")};r.each(["escape","unescape"],function(e){r[e]=function(n){return n==null?"":(""+n).replace(C[e],function(i){return R[e][i]})}}),r.result=function(e,n){if(e==null)return null;var i=e[n];return r.isFunction(i)?i.call(e):i},r.mixin=function(e){z(r.functions(e),function(n){var i=r[n]=e[n];r.prototype[n]=function(){var a=[this._wrapped];return w.apply(a,arguments),ve.call(this,i.apply(r,a))}})};var q=0;r.uniqueId=function(e){var n=++q+"";return e?e+n:n},r.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ce=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},le=/\\|'|\r|\n|\t|\u2028|\u2029/g;r.template=function(e,n,i){var a;i=r.defaults({},i,r.templateSettings);var u=new RegExp([(i.escape||ce).source,(i.interpolate||ce).source,(i.evaluate||ce).source].join("|")+"|$","g"),v=0,f="__p+='";e.replace(u,function(D,K,J,de,oe){return f+=e.slice(v,oe).replace(le,function(ye){return"\\"+G[ye]}),K&&(f+=`'+
((__t=(`+K+`))==null?'':_.escape(__t))+
'`),J&&(f+=`'+
((__t=(`+J+`))==null?'':__t)+
'`),de&&(f+=`';
`+de+`
__p+='`),v=oe+D.length,D}),f+=`';
`,i.variable||(f=`with(obj||{}){
`+f+`}
`),f=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+f+`return __p;
`;try{a=new Function(i.variable||"obj","_",f)}catch(D){throw D.source=f,D}if(n)return a(n,r);var P=function(D){return a.call(this,D,r)};return P.source="function("+(i.variable||"obj")+`){
`+f+"}",P},r.chain=function(e){return r(e).chain()};var ve=function(e){return this._chain?r(e).chain():e};r.mixin(r),z(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=o[e];r.prototype[e]=function(){var i=this._wrapped;return n.apply(i,arguments),(e=="shift"||e=="splice")&&i.length===0&&delete i[0],ve.call(this,i)}}),z(["concat","join","slice"],function(e){var n=o[e];r.prototype[e]=function(){return ve.call(this,n.apply(this._wrapped,arguments))}}),r.extend(r.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(He)})(Ve,Ve.exports);var at=Ve.exports;const lt=Ke(at);export{lt as _,We as p};
