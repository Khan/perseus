import{a as n,j as o}from"./jsx-runtime-5BUNAZ9W.js";import{l as i}from"./index-awljIyHI.js";import{r as u}from"./index-4g5l5LRQ.js";import{R as b}from"./index-jmm5gWkb.js";import{c,a as s,w as p,h,j as v,b as y,p as f}from"./constants-I_nlPaPx.js";import{I as k}from"./inline-icon-QIU9thzn.js";const w={path:"M6 11a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0-9a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1z",height:12,width:12};class T extends u.Component{constructor(){super(...arguments),this.state={tooltipAbove:!0},this.getPosition=()=>{const t=b.findDOMNode(this).getBoundingClientRect();this.setState({tooltipAbove:t.top>100})},this.renderLink=t=>{const l=this.state.tooltipAbove;let r,a,d;return this.props.severity===1?(r=e.indicatorError,a="Error",d=e.publishBlockingError):this.props.severity===2?(r=e.indicatorWarning,a="Warning",d=e.warning):(r=e.indicatorGuideline,a="Recommendation",d=e.warning),n("a",{href:`https://khanacademy.org/r/linter-rules#${this.props.ruleName}`,target:"lint-help-window",className:i.css(t),children:[o("span",{className:i.css(e.indicator,r),children:this.props.severity===1&&o(k,{...w})}),n("div",{className:i.css(e.tooltip,l&&e.tooltipAbove),children:[this.props.message.split(`

`).map((g,m)=>n("p",{className:i.css(e.tooltipParagraph),children:[n("span",{className:i.css(d),children:[a,":"," "]}),g]},m)),o("div",{className:i.css(e.tail,l&&e.tailAbove)})]})]})}}componentDidMount(){this._positionTimeout=window.setTimeout(this.getPosition)}componentWillUnmount(){window.clearTimeout(this._positionTimeout)}render(){const{children:t,inline:l,blockHighlight:r,insideTable:a}=this.props;return a?l?o("span",{"data-lint-inside-table":"true",children:t}):o("div",{"data-lint-inside-table":"true",children:t}):r?n("span",{className:i.css(e.lintContainer,e.lintContainerBlock),children:[this.renderLink(e.radioWidgetHoverTarget),o("span",{children:t})]}):l?n("span",{className:i.css(e.lintContainer),children:[this.renderLink(e.inlineHoverTarget),o("span",{children:t})]}):n("div",{className:i.css(e.lintContainer),children:[this.renderLink(e.hoverTarget),o("div",{children:t})]})}}const e=i.StyleSheet.create({lintContainer:{position:"relative"},lintContainerBlock:{display:"block"},hoverTarget:{position:"absolute",top:0,right:-40,display:"block",width:24,height:24,":hover > span":{backgroundColor:c},":hover div":{display:"block"},":hover ~ div":{outline:"1px solid "+s},":hover ~ div div[data-lint-inside-table]":{outline:"1px solid "+s},":hover ~ div span[data-lint-inside-table]":{backgroundColor:s,color:p}},inlineHoverTarget:{float:"right",position:"relative",marginRight:-40,display:"block",width:24,height:24,":hover > span":{backgroundColor:c},":hover div":{display:"block"},":hover ~ span":{backgroundColor:s,color:p}},radioWidgetHoverTarget:{position:"absolute",left:-40,display:"block",width:24,height:24,minWidth:264,":hover > span":{backgroundColor:c},":hover > div":{display:"block",padding:8,width:280},":hover > div > div":{left:8},":hover ~ span":{backgroundColor:s,color:p}},indicator:{alignItems:"center",borderRadius:4,color:"white",display:"flex",fontSize:12,height:8,justifyContent:"center",margin:8,width:8},indicatorError:{backgroundColor:"#be2612",borderRadius:8,height:16,width:16},indicatorWarning:{backgroundColor:"#f86700"},indicatorGuideline:{backgroundColor:"#ffbe26"},tooltip:{position:"absolute",right:-12,display:"none",zIndex:1e3,color:p,backgroundColor:h,opacity:.9,fontFamily:v,fontSize:"12px",lineHeight:"15px",width:"320px",borderRadius:"4px"},tooltipAbove:{bottom:32},tail:{position:"absolute",top:-12,right:16,width:0,height:0,borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderBottom:"12px solid "+h},tailAbove:{bottom:-12,borderBottom:"none",borderTop:"12px solid "+h,top:"auto"},tooltipParagraph:{margin:12},warning:{color:s,fontFamily:y},publishBlockingError:{color:f}});T.__docgenInfo={description:`This component renders "lint" nodes in a markdown parse tree. Lint nodes
are inserted into the tree by the Perseus linter (see
perseus-linter/src/index).

This component serves multiple purposes

1) It renders a small circle in the right margin to indicate that there
is lint on (or near) that line.

2) The area around the circle is hoverable: when the mouse moves over it
the linty content is highlighted and a tooltip is displayed that explains
what the problem is.

3) The hoverable area is also an HTML <a> tag. Clicking on it opens
a new tab and links to additional details about the specific lint rule.

The CSS required to position the circles in the right margin is tricky
and it does not always work perfectly. When lint occurs on a block element
that has a right margin (like anything blockquoted) the circle will appear
to the left of where it belongs.  And if there is more`,methods:[{name:"getPosition",docblock:null,modifiers:[],params:[],returns:null},{name:"renderLink",docblock:null,modifiers:[],params:[{name:"style",optional:!1,type:null}],returns:null}],displayName:"Lint",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},inline:{required:!1,tsType:{name:"boolean"},description:""},message:{required:!0,tsType:{name:"string"},description:""},ruleName:{required:!0,tsType:{name:"string"},description:""},insideTable:{required:!0,tsType:{name:"boolean"},description:""},blockHighlight:{required:!1,tsType:{name:"boolean"},description:""},severity:{required:!1,tsType:{name:"Severity"},description:""}}};export{T as L};
