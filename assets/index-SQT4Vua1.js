import{j as e,a as r,F as W}from"./jsx-runtime-5BUNAZ9W.js";import{c as p}from"./article-renderer-az28vn_y.js";import{_ as s}from"./jquery-yG1GhClm.js";import{U as O}from"./util-KY8kJaBW.js";import"./version-akiLXZts.js";import{a as c,g as J}from"./dependencies-9B_Bv_mA.js";import"./perseus-api-GqFoxb6z.js";import{C as g,D as V,A as B,E as u}from"./multi-renderer-wPTD3WWv.js";import"./hints-renderer-nzd-fpaT.js";import"./renderer-99ueejEY.js";import"./base-radio-KtCtV82W.js";import"./button-group-KR3umc1e.js";import"./graph-VKYZ1zR1.js";import{K as f}from"./svg-image-UfCByHtE.js";import"./hud-CJYktPgf.js";import"./icon-TA3bBVIW.js";import"./index-unb9_VrH.js";import"./inline-icon-QIU9thzn.js";import"./math-input-FrakTMQN.js";import"./multi-button-group-AxfQn4Cq.js";import"./number-input-_vmR2dDD.js";import"./range-input-W6BaCFKq.js";import"./text-input-Q1V0RBx1.js";import"./text-list-editor--7RKQsFY.js";import"./i18n-context-SHL040F7.js";import{E as h}from"./editor-jsonify-AbAI1jcL.js";import{r as d}from"./index-4g5l5LRQ.js";import{G as K}from"./graph-settings-JhDRk3Pn.js";import{c as m}from"./components-UoszEZnc.js";import"./prop-types-SiNm5cRq.js";import{c as $}from"./key-translator-uJhRSksH.js";import"./mobile-keypad-fIN5N6sB.js";import{u as G}from"./button-assets-gSR_ngpH.js";import{V as j}from"./index-e4P84RkC.js";import{c as P}from"./index-lUErx3pE.js";import{l as H}from"./index-awljIyHI.js";function i(z){const n=d.useRef(null),a=d.useRef(),{locale:t,strings:o}=G();return d.useEffect(()=>{n.current&&!a.current&&(a.current=$(n.current,t,o,l=>({...l,handlers:{edit:y=>{let S=y.latex();S=S.replace(/<>/g,"\\ne"),z.value!==S&&z.onChange(S)},upOutOf:y=>{y.typedText("^")}}})))}),e(j,{style:Q.outerWrapper,children:e("span",{ref:n,className:"perseus-math-input mq-editable-field mq-math-mode"})})}const Q=H.StyleSheet.create({outerWrapper:{display:"inline-block",borderStyle:"solid",borderWidth:1,borderColor:P.offBlack50,borderRadius:3,background:P.white}});i.__docgenInfo={description:`A simple Mathquill MathField input for the InteractionEditor.
Unlike our other uses of Mathquill, we're not using a keypad here;
it's just the input itself for use writing TeX.`,methods:[],displayName:"MathquillInput",props:{value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}};const{NumberInput:Z}=m,{getDependencies:ee}=c,R=class R extends d.Component{constructor(){super(...arguments),this.change=(...n)=>p.apply(this,n),this.serialize=()=>h.serialize.call(this)}render(){const{TeX:n}=ee();return r("div",{className:"graph-settings",children:[r("div",{className:"perseus-widget-row",children:[e(n,{children:this.props.funcName+"(x)="})," ",e(i,{value:this.props.value,onChange:this.change("value")})]}),r("div",{className:"perseus-widget-row",children:["Range: ",e(n,{children:"\\Large("}),e(i,{value:this.props.rangeMin,onChange:this.change("rangeMin")}),e(n,{children:","})," ",e(i,{value:this.props.rangeMax,onChange:this.change("rangeMax")}),e(n,{children:"\\Large)"})]}),e("div",{className:"perseus-widget-row",children:e(g,{value:this.props.color,onChange:this.change("color")})}),e("div",{className:"perseus-widget-row",children:e(V,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})}),e("div",{className:"perseus-widget-row",children:r("div",{className:"perseus-widget-left-col",children:["Width:"," ",e(Z,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")})]})})]})}};R.defaultProps={value:"x",rangeMin:"-10",rangeMax:"10",color:f.BLUE,strokeDasharray:"",strokeWidth:2};let v=R;v.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"FunctionEditor",props:{value:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"x"',computed:!1}},rangeMin:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-10"',computed:!1}},rangeMax:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"10"',computed:!1}},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"KhanColors.BLUE",computed:!0}},strokeDasharray:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},strokeWidth:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}}}};const{TextInput:ne}=m,{getDependencies:ae}=c,X=class X extends d.Component{constructor(){super(...arguments),this.change=(...n)=>p.apply(this,n),this.serialize=()=>h.serialize.call(this)}render(){const{TeX:n}=ae();return r("div",{className:"graph-settings",children:[e("div",{className:"perseus-widget-row",children:e(ne,{value:this.props.label,onChange:this.change("label"),style:{width:"100%"}})}),r("div",{className:"perseus-widget-row",children:["Location: ",e(n,{children:"\\Large("}),e(i,{value:this.props.coordX,onChange:this.change("coordX")}),e(n,{children:","})," ",e(i,{value:this.props.coordY,onChange:this.change("coordY")}),e(n,{children:"\\Large)"})]}),e("div",{className:"perseus-widget-row",children:e(g,{value:this.props.color,onChange:this.change("color")})})]})}};X.defaultProps={coordX:"0",coordY:"0",color:f.BLACK,label:"\\phi"};let b=X;b.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"LabelEditor",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"KhanColors.BLACK",computed:!0}},coordX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},coordY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},label:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"\\\\phi"',computed:!1}}}};const{NumberInput:te}=m,{getDependencies:re}=c,D=class D extends d.Component{constructor(){super(...arguments),this.change=(...n)=>p.apply(this,n),this.serialize=()=>h.serialize.call(this)}render(){const{TeX:n}=re();return r("div",{className:"graph-settings",children:[r("div",{className:"perseus-widget-row",children:["Start: ",e(n,{children:"\\Large("}),e(i,{value:this.props.startX,onChange:this.change("startX")}),e(n,{children:","})," ",e(i,{value:this.props.startY,onChange:this.change("startY")}),e(n,{children:"\\Large)"})]}),r("div",{className:"perseus-widget-row",children:["End: ",e(n,{children:"\\Large("}),e(i,{value:this.props.endX,onChange:this.change("endX")}),e(n,{children:","})," ",e(i,{value:this.props.endY,onChange:this.change("endY")}),e(n,{children:"\\Large)"})]}),e("div",{className:"perseus-widget-row",children:e(g,{value:this.props.color,onChange:this.change("color")})}),r("div",{className:"perseus-widget-row",children:[e(V,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")}),"   ",e(B,{value:this.props.arrows,onChange:this.change("arrows")})]}),e("div",{className:"perseus-widget-row",children:r("div",{className:"perseus-widget-left-col",children:["Width:"," ",e(te,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")})]})})]})}};D.defaultProps={startX:"-5",startY:"5",endX:"5",endY:"5",color:f.BLACK,strokeDasharray:"",arrows:"",strokeWidth:2};let w=D;w.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"LineEditor",props:{startX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-5"',computed:!1}},startY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},endX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},endY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"KhanColors.BLACK",computed:!0}},strokeDasharray:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},arrows:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},strokeWidth:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}}}};const{ButtonGroup:se,NumberInput:ie}=m,M=class M extends d.Component{constructor(){super(...arguments),this.change=n=>p.call(this,n)}render(){const{TeX:n}=J();return r("div",{children:[r("div",{className:"perseus-widget-row",children:["Constraint:"," ",e(se,{value:this.props.constraint,allowEmpty:!1,buttons:[{value:"none",content:"None"},{value:"snap",content:"Snap"},{value:"x",content:"x="},{value:"y",content:"y="}],onChange:this.change("constraint")})]}),this.props.constraint==="snap"&&r("div",{className:"perseus-widget-row",children:["Snap:"," ",e(ie,{value:this.props.snap,placeholder:0,onChange:this.change("snap")})]}),this.props.constraint==="x"&&e("div",{className:"graph-settings",children:r("div",{className:"perseus-widget-row",children:[e(n,{children:"x="})," ",e(i,{value:this.props.constraintFn,onChange:this.change("constraintFn")})]})}),this.props.constraint==="y"&&e("div",{className:"graph-settings",children:r("div",{className:"perseus-widget-row",children:[e(n,{children:"y="})," ",e(i,{value:this.props.constraintFn,onChange:this.change("constraintFn")})]})}),"Ensure these are set so nothing can be dragged off the canvas:",e("div",{className:"perseus-widget-row",children:r("div",{className:"perseus-widget-row",children:[e(n,{children:"x \\in \\Large["})," ",e(i,{value:this.props.constraintXMin,onChange:this.change("constraintXMin")}),e(n,{children:", "})," ",e(i,{value:this.props.constraintXMax,onChange:this.change("constraintXMax")})," ",e(n,{children:"\\Large]"})]})}),e("div",{className:"perseus-widget-row",children:r("div",{className:"perseus-widget-row",children:[e(n,{children:"y \\in \\Large["})," ",e(i,{value:this.props.constraintYMin,onChange:this.change("constraintYMin")}),e(n,{children:", "})," ",e(i,{value:this.props.constraintYMax,onChange:this.change("constraintYMax")})," ",e(n,{children:"\\Large]"})]})})]})}};M.defaultProps={constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"};let N=M;N.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"propName",optional:!1,type:{name:"string"}}],returns:{type:{name:"unknown"}}}],displayName:"ConstraintEditor",props:{constraint:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"none"',computed:!1}},constraintFn:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},constraintXMax:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"10"',computed:!1}},constraintXMin:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-10"',computed:!1}},constraintYMax:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"10"',computed:!1}},constraintYMin:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-10"',computed:!1}},snap:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0.5",computed:!1}}}};const{NumberInput:F}=m,{getDependencies:le}=c,Y=class Y extends d.Component{constructor(){super(...arguments),this.change=(...n)=>p.apply(this,n),this.serialize=()=>h.serialize.call(this)}render(){const{TeX:n}=le();return r("div",{className:"graph-settings",children:["Initial position:",r("div",{className:"perseus-widget-row",children:["Start: ",e(n,{children:"\\Large("}),e(i,{value:this.props.startX,onChange:this.change("startX")}),e(n,{children:","})," ",e(i,{value:this.props.startY,onChange:this.change("startY")}),e(n,{children:"\\Large)"})]}),r("div",{className:"perseus-widget-row",children:["End: ",e(n,{children:"\\Large("}),e(i,{value:this.props.endX,onChange:this.change("endX")}),e(n,{children:","})," ",e(i,{value:this.props.endY,onChange:this.change("endY")}),e(n,{children:"\\Large)"})]}),r("div",{className:"perseus-widget-row",children:["Start updates ",e(n,{children:"(x_n, y_n)"})," for ",e(n,{children:"n ="}),e(F,{value:this.props.startSubscript,placeholder:0,onChange:this.change("startSubscript")})]}),r("div",{className:"perseus-widget-row",children:["End updates ",e(n,{children:"(x_m, y_m)"})," for ",e(n,{children:"m ="}),e(F,{value:this.props.endSubscript,placeholder:0,onChange:this.change("endSubscript")})]}),e("div",{className:"perseus-widget-row",children:"All constraints are applied to the start point."}),e(N,{...this.props})]})}};Y.defaultProps={startX:"-5",startY:"5",endX:"5",endY:"5",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"};let k=Y;k.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MovableLineEditor",props:{startX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-5"',computed:!1}},startY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},endX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},endY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},constraint:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"none"',computed:!1}},snap:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0.5",computed:!1}},constraintFn:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},startSubscript:{required:!0,tsType:{name:"number"},description:""},endSubscript:{required:!0,tsType:{name:"number"},description:""},constraintXMin:{defaultValue:{value:'"-10"',computed:!1},required:!1},constraintXMax:{defaultValue:{value:'"10"',computed:!1},required:!1},constraintYMin:{defaultValue:{value:'"-10"',computed:!1},required:!1},constraintYMax:{defaultValue:{value:'"10"',computed:!1},required:!1}}};const{NumberInput:oe}=m,{getDependencies:de}=c,E=class E extends d.Component{constructor(){super(...arguments),this.change=(...n)=>p.apply(this,n),this.serialize=()=>h.serialize.call(this)}render(){const{TeX:n}=de();return r("div",{className:"graph-settings",children:[r("div",{className:"perseus-widget-row",children:["Start: ",e(n,{children:"\\Large("}),e(i,{value:this.props.startX,onChange:this.change("startX")}),e(n,{children:","})," ",e(i,{value:this.props.startY,onChange:this.change("startY")}),e(n,{children:"\\Large)"})]}),r("div",{className:"perseus-widget-row",children:["Update ",e(n,{children:"(x_n, y_n)"})," for ",e(n,{children:"n ="})," ",e(oe,{value:this.props.varSubscript,placeholder:0,onChange:this.change("varSubscript")})]}),e(N,{...this.props})]})}};E.defaultProps={startX:"0",startY:"0",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"};let C=E;C.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MovablePointEditor",props:{startX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},startY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},constraint:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"none"',computed:!1}},snap:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0.5",computed:!1}},constraintFn:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},varSubscript:{required:!0,tsType:{name:"number"},description:""},constraintXMin:{defaultValue:{value:'"-10"',computed:!1},required:!1},constraintXMax:{defaultValue:{value:'"10"',computed:!1},required:!1},constraintYMin:{defaultValue:{value:'"-10"',computed:!1},required:!1},constraintYMax:{defaultValue:{value:'"10"',computed:!1},required:!1}}};const{NumberInput:pe}=m,{getDependencies:ue}=c,L=class L extends d.Component{constructor(){super(...arguments),this.change=(...n)=>p.apply(this,n),this.serialize=()=>h.serialize.call(this)}render(){const{TeX:n}=ue();return r("div",{className:"graph-settings",children:[r("div",{className:"perseus-widget-row",children:[e(n,{children:"X(t) ="})," ",e(i,{value:this.props.x,onChange:this.change("x")})]}),r("div",{className:"perseus-widget-row",children:[e(n,{children:"Y(t) ="})," ",e(i,{value:this.props.y,onChange:this.change("y")})]}),r("div",{className:"perseus-widget-row",children:["Range: ",e(n,{children:"\\Large("}),e(i,{value:this.props.rangeMin,onChange:this.change("rangeMin")}),e(n,{children:","})," ",e(i,{value:this.props.rangeMax,onChange:this.change("rangeMax")}),e(n,{children:"\\Large)"})]}),e("div",{className:"perseus-widget-row",children:e(g,{value:this.props.color,onChange:this.change("color")})}),e("div",{className:"perseus-widget-row",children:e(V,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})}),e("div",{className:"perseus-widget-row",children:r("div",{className:"perseus-widget-left-col",children:["Width:"," ",e(pe,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")})]})})]})}};L.defaultProps={x:"cos(t)",y:"sin(t)",rangeMin:"0",rangeMax:"2\\pi",color:f.BLUE,strokeDasharray:"",strokeWidth:2};let x=L;x.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ParametricEditor",props:{x:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"cos(t)"',computed:!1}},y:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"sin(t)"',computed:!1}},rangeMin:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},rangeMax:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"2\\\\pi"',computed:!1}},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"KhanColors.BLUE",computed:!0}},strokeDasharray:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},strokeWidth:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}}}};const{getDependencies:ce}=c,I=class I extends d.Component{constructor(){super(...arguments),this.change=(...n)=>p.apply(this,n),this.serialize=()=>h.serialize.call(this)}render(){const{TeX:n}=ce();return r("div",{className:"graph-settings",children:[r("div",{className:"perseus-widget-row",children:["Coordinate: ",e(n,{children:"\\Large("}),e(i,{value:this.props.coordX,onChange:this.change("coordX")}),e(n,{children:","})," ",e(i,{value:this.props.coordY,onChange:this.change("coordY")}),e(n,{children:"\\Large)"})]}),e("div",{className:"perseus-widget-row",children:e(g,{value:this.props.color,onChange:this.change("color")})})]})}};I.defaultProps={coordX:"0",coordY:"0",color:f.BLACK};let q=I;q.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PointEditor",props:{coordX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},coordY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"KhanColors.BLACK",computed:!0}}}};const{getDependencies:he}=c,U=class U extends d.Component{constructor(){super(...arguments),this.change=(...n)=>p.apply(this,n),this.serialize=()=>h.serialize.call(this)}render(){const{TeX:n}=he();return r("div",{className:"graph-settings",children:[r("div",{className:"perseus-widget-row",children:["Bottom left: ",e(n,{children:"\\Large("}),e(i,{value:this.props.coordX,onChange:this.change("coordX")}),e(n,{children:","})," ",e(i,{value:this.props.coordY,onChange:this.change("coordY")}),e(n,{children:"\\Large)"})]}),r("div",{className:"perseus-widget-row",children:["Width:"," ",e(i,{value:this.props.width,onChange:this.change("width")})]}),r("div",{className:"perseus-widget-row",children:["Height:"," ",e(i,{value:this.props.height,onChange:this.change("height")})]}),e("div",{className:"perseus-widget-row",children:e(g,{value:this.props.color,lightColors:!0,onChange:this.change("color")})}),e("div",{className:"perseus-widget-row",children:"You want a border? Sorry, draw your own."})]})}};U.defaultProps={coordX:"-5",coordY:"5",width:"2",height:"3",color:f.LIGHT_BLUE};let A=U;A.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"RectangleEditor",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"KhanColors.LIGHT_BLUE",computed:!0}},coordX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-5"',computed:!1}},coordY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},height:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"3"',computed:!1}},width:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"2"',computed:!1}}}};const{getDependencies:me}=c,{unescapeMathMode:ge}=O,fe={graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]},T=class T extends d.Component{constructor(){super(...arguments),this.state={usedVarSubscripts:this._getAllVarSubscripts(this.props.elements),usedFunctionNames:this._getAllFunctionNames(this.props.elements)},this._updateGraphProps=n=>{this.change({graph:s.extend(s.omit(n,"step"),{tickStep:n.step})})},this._addNewElement=n=>{const a=n.target.value;if(a==="")return;n.target.value="";const t={type:a,key:a+"-"+(Math.random()*16777215<<0).toString(16),options:a==="point"?s.clone(q.defaultProps):a==="line"?s.clone(w.defaultProps):a==="movable-point"?s.clone(C.defaultProps):a==="movable-line"?s.clone(k.defaultProps):a==="function"?s.clone(v.defaultProps):a==="parametric"?s.clone(x.defaultProps):a==="label"?s.clone(b.defaultProps):a==="rectangle"?s.clone(A.defaultProps):{}};let o;if(a==="movable-point")o=s.max([s.max(this.state.usedVarSubscripts),-1])+1,t.options.varSubscript=o;else if(a==="movable-line")o=s.max([s.max(this.state.usedVarSubscripts),-1])+1,t.options.startSubscript=o,t.options.endSubscript=o+1;else if(a==="function"){const l=String.fromCharCode(s.max([s.max(s.map(this.state.usedFunctionNames,function(y){return y.charCodeAt(0)})),101])+1);t.options.funcName=l}this.change({elements:this.props.elements.concat(t)})},this._deleteElement=n=>{const a=this.props.elements[n];this.change({elements:s.without(this.props.elements,a)})},this._moveElementUp=n=>{const a=this.props.elements[n],t=s.without(this.props.elements,a);t.splice(n-1,0,a),this.change({elements:t})},this._moveElementDown=n=>{const a=this.props.elements[n],t=s.without(this.props.elements,a);t.splice(n+1,0,a),this.change({elements:t})},this.change=(...n)=>p.apply(this,n),this.serialize=()=>h.serialize.call(this)}UNSAFE_componentWillReceiveProps(n){this.setState({usedVarSubscripts:this._getAllVarSubscripts(n.elements),usedFunctionNames:this._getAllFunctionNames(n.elements)})}_getAllVarSubscripts(n){return s.map(s.where(n,{type:"movable-point"}),a=>a.options.varSubscript).concat(s.map(s.where(n,{type:"movable-line"}),a=>a.options.startSubscript)).concat(s.map(s.where(n,{type:"movable-line"}),a=>a.options.endSubscript))}_getAllFunctionNames(n){return s.map(s.where(n,{type:"function"}),a=>a.options.funcName)}render(){const{TeX:n}=me();return r("div",{className:"perseus-widget-interaction-editor",children:[r(u,{title:"Grid settings",children:[e(K,{editableSettings:["canvas","graph"],box:this.props.graph.box,labels:this.props.graph.labels,range:this.props.graph.range,step:this.props.graph.tickStep,gridStep:this.props.graph.gridStep,markings:this.props.graph.markings,onChange:this._updateGraphProps}),e(W,{children:this.props.graph.valid!==!0&&e("div",{children:this.props.graph.valid})})]}),s.map(this.props.elements,function(a,t){if(a.type==="movable-point")return e(u,{title:r("span",{children:["Movable point"," ",e(n,{children:"(x_{"+a.options.varSubscript+"}, y_{"+a.options.varSubscript+"})"})]}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),children:e(C,{...a.options,onChange:o=>{const l=JSON.parse(JSON.stringify(this.props.elements));s.extend(l[t].options,o),this.change({elements:l})}})},a.key);if(a.type==="movable-line")return e(u,{title:r("span",{children:["Movable line"," ",e(n,{children:"(x_{"+a.options.startSubscript+"}, y_{"+a.options.startSubscript+"})"})," ","to"," ",e(n,{children:"(x_{"+a.options.endSubscript+"}, y_{"+a.options.endSubscript+"})"})]}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),children:e(k,{...a.options,onChange:o=>{const l=JSON.parse(JSON.stringify(this.props.elements));s.extend(l[t].options,o),this.change({elements:l})}})},a.key);if(a.type==="point")return e(u,{title:r("span",{children:["Point"," ",e(n,{children:"("+a.options.coordX+", "+a.options.coordY+")"})]}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),children:e(q,{...a.options,onChange:o=>{const l=JSON.parse(JSON.stringify(this.props.elements));s.extend(l[t].options,o),this.change({elements:l})}})},a.key);if(a.type==="line")return e(u,{title:r("span",{children:["Line"," ",e(n,{children:"("+a.options.startX+", "+a.options.startY+")"})," ","to"," ",e(n,{children:"("+a.options.endX+", "+a.options.endY+")"})]}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),children:e(w,{...a.options,onChange:o=>{const l=JSON.parse(JSON.stringify(this.props.elements));s.extend(l[t].options,o),this.change({elements:l})}})},a.key);if(a.type==="function")return e(u,{title:r("span",{children:["Function"," ",e(n,{children:a.options.funcName+"(x) = "+a.options.value})]}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,children:e(v,{...a.options,onChange:o=>{const l=JSON.parse(JSON.stringify(this.props.elements));s.extend(l[t].options,o),this.change({elements:l})}})},a.key);if(a.type==="parametric")return e(u,{title:e("span",{children:"Parametric"}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,children:e(x,{...a.options,onChange:o=>{const l=JSON.parse(JSON.stringify(this.props.elements));s.extend(l[t].options,o),this.change({elements:l})}})},a.key);if(a.type==="label")return e(u,{title:r("span",{children:["Label"," ",e(n,{children:ge(a.options.label)})," "]}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,children:e(b,{...a.options,onChange:o=>{const l=JSON.parse(JSON.stringify(this.props.elements));s.extend(l[t].options,o),this.change({elements:l})}})},a.key);if(a.type==="rectangle")return e(u,{title:r("span",{children:["Rectangle"," ",e(n,{children:"("+a.options.coordX+", "+a.options.coordY+")"})," — ",e(n,{children:a.options.width+" \\times "+a.options.height})]}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,children:e(A,{...a.options,onChange:o=>{const l=JSON.parse(JSON.stringify(this.props.elements));s.extend(l[t].options,o),this.change({elements:l})}})},a.key)},this),e("div",{className:"perseus-widget-interaction-editor-select-element",children:r("select",{onChange:this._addNewElement,children:[r("option",{value:"",children:["Add an element","…"]}),e("option",{disabled:!0,children:"--"}),e("option",{value:"point",children:"Point"}),e("option",{value:"line",children:"Line segment"}),e("option",{value:"function",children:"Function plot"}),e("option",{value:"parametric",children:"Parametric plot"}),e("option",{value:"label",children:"Label"}),e("option",{value:"rectangle",children:"Rectangle"}),e("option",{value:"movable-point",children:"★ Movable point"}),e("option",{value:"movable-line",children:"★ Movable line segment"})]})})]})}};T.widgetName="interaction",T.defaultProps=fe;let _=T;_.__docgenInfo={description:"",methods:[{name:"_getAllVarSubscripts",docblock:null,modifiers:[],params:[{name:"elements",optional:!1,type:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>",alias:"ReadonlyArray"}}],returns:{type:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>"}}},{name:"_getAllFunctionNames",docblock:null,modifiers:[],params:[{name:"elements",optional:!1,type:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>",alias:"ReadonlyArray"}}],returns:{type:{name:"ReadonlyArray",elements:[{name:"string"}],raw:"ReadonlyArray<string>"}}},{name:"_updateGraphProps",docblock:null,modifiers:[],params:[{name:"newProps",optional:!1,type:null}],returns:null},{name:"_addNewElement",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"_deleteElement",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"_moveElementUp",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"_moveElementDown",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"InteractionEditor",props:{elements:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>"},description:"",defaultValue:{value:"[]",computed:!1}},graph:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    box: ReadonlyArray<number>;
    labels: ReadonlyArray<string>;
    range: ReadonlyArray<ReadonlyArray<number>>;
    tickStep: ReadonlyArray<number>;
    gridStep: ReadonlyArray<number>;
    markings: string;
    valid?: boolean;
}`,signature:{properties:[{key:"box",value:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>",required:!0}},{key:"labels",value:{name:"ReadonlyArray",elements:[{name:"string"}],raw:"ReadonlyArray<string>",required:!0}},{key:"range",value:{name:"ReadonlyArray",elements:[{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>"}],raw:"ReadonlyArray<ReadonlyArray<number>>",required:!0}},{key:"tickStep",value:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>",required:!0}},{key:"gridStep",value:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>",required:!0}},{key:"markings",value:{name:"string",required:!0}},{key:"valid",value:{name:"boolean",required:!1}}]}},description:"",defaultValue:{value:`{
    box: [400, 400],
    labels: ["x", "y"],
    range: [
        [-10, 10],
        [-10, 10],
    ],
    tickStep: [1, 1],
    gridStep: [1, 1],
    markings: "graph",
}`,computed:!1}}}};_.__docgenInfo={description:"",methods:[{name:"_getAllVarSubscripts",docblock:null,modifiers:[],params:[{name:"elements",optional:!1,type:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>",alias:"ReadonlyArray"}}],returns:{type:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>"}}},{name:"_getAllFunctionNames",docblock:null,modifiers:[],params:[{name:"elements",optional:!1,type:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>",alias:"ReadonlyArray"}}],returns:{type:{name:"ReadonlyArray",elements:[{name:"string"}],raw:"ReadonlyArray<string>"}}},{name:"_updateGraphProps",docblock:null,modifiers:[],params:[{name:"newProps",optional:!1,type:null}],returns:null},{name:"_addNewElement",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"_deleteElement",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"_moveElementUp",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"_moveElementDown",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"InteractionEditor",props:{elements:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>"},description:"",defaultValue:{value:"[]",computed:!1}},graph:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    box: ReadonlyArray<number>;
    labels: ReadonlyArray<string>;
    range: ReadonlyArray<ReadonlyArray<number>>;
    tickStep: ReadonlyArray<number>;
    gridStep: ReadonlyArray<number>;
    markings: string;
    valid?: boolean;
}`,signature:{properties:[{key:"box",value:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>",required:!0}},{key:"labels",value:{name:"ReadonlyArray",elements:[{name:"string"}],raw:"ReadonlyArray<string>",required:!0}},{key:"range",value:{name:"ReadonlyArray",elements:[{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>"}],raw:"ReadonlyArray<ReadonlyArray<number>>",required:!0}},{key:"tickStep",value:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>",required:!0}},{key:"gridStep",value:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>",required:!0}},{key:"markings",value:{name:"string",required:!0}},{key:"valid",value:{name:"boolean",required:!1}}]}},description:"",defaultValue:{value:`{
    box: [400, 400],
    labels: ["x", "y"],
    range: [
        [-10, 10],
        [-10, 10],
    ],
    tickStep: [1, 1],
    gridStep: [1, 1],
    markings: "graph",
}`,computed:!1}}}};export{_ as I};
