import{c as b,p as y}from"./all-widgets-Yp4QXy6i.js";import"./phet-simulation-IgTV1JZl.js";import{_ as a}from"./underscore-885MUNGo.js";import{r as v}from"./random-util-wZstT-Qs.js";import"./dependencies-CP7Uh8Kq.js";import{A as g}from"./perseus-api-Y55S7ZPk.js";import"./server-item-renderer-37_1x2jK.js";import"./article-renderer-PED7KCus.js";import"./hints-renderer-ANS4BhQy.js";import"./renderer-aVwTQQzh.js";import{B as q}from"./base-radio-OV84uprd.js";import{c as O}from"./components-wFORXxRX.js";import{i as N}from"./icon-paths-5JCXzGsq.js";import"./i18n-context-G764lc9R.js";import"./util-pvSEraUQ.js";import"./svg-image-m8JdpBjX.js";import"./jquery-5v7aFUvu.js";import"./index-smZ6iCr_.js";import{C as c}from"./index-Mag-4PMw.js";import{P as s}from"./index-o42urCig.js";import{r as n}from"./index-6oxdNXpR.js";import{E as f}from"./editor-0Kp6tdXX.js";import{i as C}from"./icon-paths-naSxOxXw.js";const{InlineIcon:p}=O,m=class m extends n.Component{render(){const e=this.props.choice.correct?"correct":"incorrect";let t="Type a choice here...";this.props.choice.isNoneOfTheAbove&&(t=this.props.choice.correct?"Type the answer to reveal to the user...":"None of the above");const o=n.createElement(f,{ref:"content-editor",apiOptions:this.props.apiOptions,content:this.props.choice.content||"",widgetEnabled:!1,placeholder:t,disabled:this.props.choice.isNoneOfTheAbove&&!this.props.choice.correct,onChange:this.props.onContentChange}),r=n.createElement(f,{ref:"clue-editor",apiOptions:this.props.apiOptions,content:this.props.choice.clue||"",widgetEnabled:!1,placeholder:`Why is this choice ${e}?`,onChange:this.props.onClueChange}),l=n.createElement("a",{className:"simple-button orange delete-choice",href:"#",onClick:d=>{d.stopPropagation(),d.preventDefault(),this.props.onDelete()},title:"Remove this choice"},n.createElement(p,{...N}));return n.createElement("div",{className:"choice-clue-editors"},n.createElement("div",{className:`choice-editor ${e}`},o),n.createElement("div",{className:"clue-editor"},r),this.props.showDelete&&l)}};m.propTypes={apiOptions:g.propTypes,choice:s.object,showDelete:s.bool,onClueChange:s.func,onContentChange:s.func,onDelete:s.func};let u=m;const i=class i extends n.Component{constructor(){super(...arguments),this.change=(...e)=>b.apply(this,e),this.onMultipleSelectChange=e=>{e=e.multipleSelect;const t=a.reduce(this.props.choices,function(o,r){return r.correct?o+1:o},0);if(!e&&t>1){const o=a.map(this.props.choices,function(r){return a.defaults({correct:!1},r)});this.props.onChange({multipleSelect:e,choices:o})}else this.props.onChange({multipleSelect:e})},this.onCountChoicesChange=e=>{e=e.countChoices,this.props.onChange({countChoices:e})},this.onChange=({checked:e})=>{const t=a.map(this.props.choices,(o,r)=>a.extend({},o,{correct:e[r],content:o.isNoneOfTheAbove&&!e[r]?"":o.content}));this.props.onChange({choices:t})},this.onContentChange=(e,t)=>{const o=this.props.choices.slice();o[e]=a.extend({},o[e],{content:t}),this.props.onChange({choices:o})},this.onClueChange=(e,t)=>{const o=this.props.choices.slice();o[e]=a.extend({},o[e],{clue:t}),t===""&&delete o[e].clue,this.props.onChange({choices:o})},this.onDelete=e=>{const t=this.props.choices.slice(),o=t[e];t.splice(e,1),this.props.onChange({choices:t,hasNoneOfTheAbove:this.props.hasNoneOfTheAbove&&!o.isNoneOfTheAbove})},this.addChoice=(e,t)=>{t.preventDefault();const o=this.props.choices.slice(),r={isNoneOfTheAbove:e},l=o.length-(this.props.hasNoneOfTheAbove?1:0);o.splice(l,0,r),this.props.onChange({choices:o,hasNoneOfTheAbove:e||this.props.hasNoneOfTheAbove},()=>{this.refs[`choice-editor${l}`].refs["content-editor"].focus()})},this.setDisplayCount=e=>{this.props.onChange({displayCount:e})},this.focus=()=>(this.refs["choice-editor0"].refs["content-editor"].focus(),!0),this.getSaveWarnings=()=>a.some(a.pluck(this.props.choices,"correct"))?[]:["No choice is marked as correct."],this.serialize=()=>a.pick(this.props,"choices","randomize","multipleSelect","countChoices","displayCount","hasNoneOfTheAbove","deselectEnabled")}render(){const e=a.reduce(this.props.choices,function(t,o){return o.correct?t+1:t},0);return n.createElement("div",null,n.createElement("div",{className:"perseus-widget-row"},n.createElement("a",{href:"https://docs.google.com/document/d/1frZf7yrWVWb1n4tVjqlzqVUiv1pn4cZXbxgP62-JDBY/edit#heading=h.8ng1isya19nu",target:"_blank",rel:"noreferrer"},"Multiple choice style guide"),n.createElement("br",null),n.createElement("div",{className:"perseus-widget-left-col"},n.createElement(c,{label:"Multiple selections",checked:this.props.multipleSelect,onChange:t=>{this.onMultipleSelectChange({multipleSelect:t})}})),n.createElement("div",{className:"perseus-widget-right-col"},n.createElement(c,{label:"Randomize order",checked:this.props.randomize,onChange:t=>{this.props.onChange({randomize:t})}})),this.props.multipleSelect&&n.createElement("div",{className:"perseus-widget-left-col"},n.createElement(c,{label:"Specify number correct",checked:this.props.countChoices,onChange:t=>{this.onCountChoicesChange({countChoices:t})}}))),n.createElement(q,{multipleSelect:this.props.multipleSelect,countChoices:this.props.countChoices,numCorrect:e,editMode:!0,labelWrap:!1,apiOptions:this.props.apiOptions,reviewMode:!1,choices:this.props.choices.map((t,o)=>({content:n.createElement(u,{ref:`choice-editor${o}`,apiOptions:this.props.apiOptions,choice:t,onContentChange:r=>{"content"in r&&this.onContentChange(o,r.content)},onClueChange:r=>{"content"in r&&this.onClueChange(o,r.content)},onDelete:()=>this.onDelete(o),showDelete:this.props.choices.length>=2}),isNoneOfTheAbove:t.isNoneOfTheAbove,checked:t.correct}),this),onChange:this.onChange}),n.createElement("div",{className:"add-choice-container"},n.createElement("a",{className:"simple-button orange",href:"#",onClick:this.addChoice.bind(this,!1)},n.createElement(p,{...C})," Add a choice"," "),!this.props.hasNoneOfTheAbove&&n.createElement("a",{className:"simple-button",href:"#",onClick:this.addChoice.bind(this,!0)},n.createElement(p,{...C})," None of the above"," ")))}};i.propTypes={...y,apiOptions:g.propTypes,choices:s.arrayOf(s.shape({content:s.string,clue:s.string,correct:s.bool})),displayCount:s.number,randomize:s.bool,hasNoneOfTheAbove:s.bool,multipleSelect:s.bool,countChoices:s.bool,deselectEnabled:s.bool,static:s.bool},i.widgetName="radio",i.defaultProps=v.defaultWidgetOptions;let h=i;h.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"onMultipleSelectChange",docblock:null,modifiers:[],params:[{name:"allowMultiple",optional:!1,type:null}],returns:null},{name:"onCountChoicesChange",docblock:null,modifiers:[],params:[{name:"count",optional:!1,type:null}],returns:null},{name:"onChange",docblock:null,modifiers:[],params:[{name:"{checked}",optional:!1,type:null}],returns:null},{name:"onContentChange",docblock:null,modifiers:[],params:[{name:"choiceIndex",optional:!1,type:null},{name:"newContent",optional:!1,type:null}],returns:null},{name:"onClueChange",docblock:null,modifiers:[],params:[{name:"choiceIndex",optional:!1,type:null},{name:"newClue",optional:!1,type:null}],returns:null},{name:"onDelete",docblock:null,modifiers:[],params:[{name:"choiceIndex",optional:!1,type:null}],returns:null},{name:"addChoice",docblock:null,modifiers:[],params:[{name:"noneOfTheAbove",optional:!1,type:null},{name:"e",optional:!1,type:null}],returns:null},{name:"setDisplayCount",docblock:null,modifiers:[],params:[{name:"num",optional:!1,type:null}],returns:null},{name:"focus",docblock:null,modifiers:[],params:[],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"RadioEditor",props:{choices:{defaultValue:{value:"[{}, {}, {}, {}]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"shape",value:{content:{name:"string",required:!1},clue:{name:"string",required:!1},correct:{name:"bool",required:!1}}}},required:!1},displayCount:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"number"},required:!1},randomize:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},hasNoneOfTheAbove:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},multipleSelect:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},countChoices:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},deselectEnabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},apiOptions:{description:"",type:{name:"shape",value:{isArticle:{name:"bool",required:!0},onFocusChange:{name:"func",required:!0},GroupMetadataEditor:{name:"func",required:!0},showAlignmentOptions:{name:"bool",required:!0},readOnly:{name:"bool",required:!0},answerableCallback:{name:"func",required:!1},getAnotherHint:{name:"func",required:!1},interactionCallback:{name:"func",required:!1},groupAnnotator:{name:"func",required:!0},imagePlaceholder:{name:"node",required:!1},widgetPlaceholder:{name:"node",required:!1},baseElements:{name:"shape",value:{Link:{name:"func",required:!1}},required:!1},imagePreloader:{name:"func",required:!1},trackInteraction:{name:"func",required:!1},customKeypad:{name:"bool",required:!1},nativeKeypadProxy:{name:"func",required:!1},isMobile:{name:"bool",required:!1},setDrawingAreaAvailable:{name:"func",required:!1},hintProgressColor:{name:"string",required:!1},canScrollPage:{name:"bool",required:!1},crossOutEnabled:{name:"bool",required:!1},editorChangeDelay:{name:"number",required:!1}}},required:!0},static:{description:"",type:{name:"bool"},required:!1}},composes:["@khanacademy/perseus"]};export{h as R};
