import{b as u}from"./all-widgets-MSXQEX7U.js";import"./phet-simulation-IgTV1JZl.js";import"./underscore-885MUNGo.js";import"./random-util-d2bWv_si.js";import{g}from"./dependencies-CP7Uh8Kq.js";import"./perseus-api-Y55S7ZPk.js";import"./server-item-renderer-9EuPPdfQ.js";import"./article-renderer-Bvcs6wII.js";import"./hints-renderer-jTnQsR44.js";import"./renderer-fsGzB097.js";import"./base-radio--Canz7Cp.js";import"./button-group-f5V3tSn8.js";import"./svg-image-mgEvHBk_.js";import"./hud-VpTa1tZ-.js";import"./icon-H34hvC3Q.js";import"./index-9tMpZISW.js";import"./inline-icon-8e4u-lSW.js";import"./math-input-QqxSex_u.js";import"./multi-button-group-7ejnk4_z.js";import"./number-input-s17rCb7k.js";import"./range-input-2s0MhdeI.js";import"./text-input-arU_BfR6.js";import"./text-list-editor-9dKImvgD.js";import"./i18n-context-G764lc9R.js";import{U as y}from"./util-GC63bR_8.js";import"./jquery-5v7aFUvu.js";import"./index-smZ6iCr_.js";import{n as s}from"./no-important-xCWWYXQR.js";import{r}from"./index-6oxdNXpR.js";import{a as h,b as k}from"./global-colors-VIVU4Od4.js";import{M as b}from"./marker-pBKP6pVR.js";class f extends r.Component{constructor(){super(...arguments),this._markers=[],this.handleImageDoubleClick=t=>{t.preventDefault();const e=t.currentTarget.getBoundingClientRect(),o=Math.round((t.clientX-e.left)/e.width*1e3)/10,l=Math.round((t.clientY-e.top)/e.height*1e3)/10,{markers:a,onChange:n}=this.props;n([...a,{answers:[],label:"",x:o,y:l}])}}openDropdownForMarkerIndices(t){t.forEach(e=>{var o;this._markers[e]&&((o=this._markers[e])==null||o.openDropdown())})}render(){const{choices:t,imageUrl:e,imageWidth:o,imageHeight:l,markers:a,onChange:n}=this.props,d=g().staticUrl;return r.createElement("div",null,r.createElement("div",{className:s.css(m.title)},"Markers"),r.createElement("div",{className:s.css(m.subtitle)},e?r.createElement("span",null,"Double-click on the image to add a marker.",r.createElement("br",null),r.createElement("br",null),"Markers are read by screen readers in the order that you add them here, so add in a logical order for the learner (e.g. sequentially, clockwise). You can test order by using keyboard tabbing."):"Upload an image to place markers."),e&&r.createElement("div",{className:s.css(m.markersCanvas),style:{maxWidth:o,maxHeight:l}},r.createElement("img",{alt:"",className:s.css(m.image),src:d(y.getRealImageUrl(e)),onDoubleClick:this.handleImageDoubleClick}),a.map((p,i)=>r.createElement(b,{...p,choices:t,key:`${p.x}.${p.y}`,onChange:c=>n([...a.slice(0,i),c,...a.slice(i+1)]),onRemove:()=>n([...a.slice(0,i),...a.slice(i+1)]),ref:c=>this._markers[i]=c}))))}}const m=s.StyleSheet.create({title:{...u,marginBottom:6,color:h},subtitle:{fontFamily:"inherit",fontSize:12,lineHeight:"14px",marginBottom:12,color:k},markersCanvas:{position:"relative",border:"solid 1px rgba(33, 36, 44, 0.16)"},image:{display:"block",maxWidth:"100%"}});f.__docgenInfo={description:"",methods:[{name:"openDropdownForMarkerIndices",docblock:null,modifiers:[],params:[{name:"indices",optional:!1,type:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>",alias:"ReadonlyArray"}}],returns:null},{name:"handleImageDoubleClick",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"ReactMouseEvent",raw:"React.MouseEvent",alias:"React.MouseEvent"}}],returns:null}],displayName:"QuestionMarkers",props:{choices:{required:!0,tsType:{name:"ReadonlyArray",elements:[{name:"string"}],raw:"ReadonlyArray<string>"},description:""},imageUrl:{required:!0,tsType:{name:"string"},description:""},imageWidth:{required:!0,tsType:{name:"number"},description:""},imageHeight:{required:!0,tsType:{name:"number"},description:""},markers:{required:!0,tsType:{name:"ReadonlyArray",raw:'PerseusLabelImageWidgetOptions["markers"]'},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:'(markers: PerseusLabelImageWidgetOptions["markers"]) => void',signature:{arguments:[{type:{name:"ReadonlyArray",raw:'PerseusLabelImageWidgetOptions["markers"]'},name:"markers"}],return:{name:"void"}}},description:""}}};export{f as Q};
