import{b as k,_ as c,a as I}from"./index-0DbkllkJ.js";import{r as d}from"./index-6oxdNXpR.js";import{l as _}from"./index-awljIyHI.js";import{w as A,L as P,c as H}from"./react-router-dom-VIBHfbW6.js";import{c as b}from"./index-deFLJwr4.js";const K=l=>{switch(l){case"link":return{triggerOnEnter:!0,triggerOnSpace:!1};case"checkbox":case"radio":case"listbox":return{triggerOnEnter:!1,triggerOnSpace:!0};case"button":case"menuitem":case"menu":case"option":default:return{triggerOnEnter:!0,triggerOnSpace:!0}}},$={onClick:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},onMouseDown:()=>{},onMouseUp:()=>{},onTouchStart:()=>{},onTouchEnd:()=>{},onTouchCancel:()=>{},onKeyDown:()=>{},onKeyUp:()=>{}},f={enter:13,space:32},O={hovered:!1,focused:!1,pressed:!1,waiting:!1};class C extends d.Component{static getDerivedStateFromProps(e,t){return e.disabled?c({},O,{focused:t.focused}):null}constructor(e){super(e),this.waitingForClick=void 0,this.enterClick=void 0,this.handleClick=t=>{const{onClick:n=void 0,beforeNav:i=void 0,safeWithNav:s=void 0}=this.props;this.enterClick||((n||i||s)&&(this.waitingForClick=!1),this.runCallbackAndMaybeNavigate(t))},this.handleMouseEnter=t=>{this.waitingForClick||this.setState({hovered:!0})},this.handleMouseLeave=()=>{this.waitingForClick||this.setState({hovered:!1,pressed:!1,focused:!1})},this.handleMouseDown=t=>{this.props.onMouseDown&&this.props.onMouseDown(t),this.setState({pressed:!0})},this.handleMouseUp=t=>{this.props.onMouseUp&&this.props.onMouseUp(t),this.setState({pressed:!1,focused:!1})},this.handleTouchStart=()=>{this.setState({pressed:!0})},this.handleTouchEnd=()=>{this.setState({pressed:!1}),this.waitingForClick=!0},this.handleTouchCancel=()=>{this.setState({pressed:!1}),this.waitingForClick=!0},this.handleKeyDown=t=>{const{onKeyDown:n,role:i}=this.props;n&&n(t);const s=t.which||t.keyCode,{triggerOnEnter:a,triggerOnSpace:o}=K(i);a&&s===f.enter||o&&s===f.space?(t.preventDefault(),this.setState({pressed:!0})):!a&&s===f.enter&&(this.enterClick=!0)},this.handleKeyUp=t=>{const{onKeyUp:n,role:i}=this.props;n&&n(t);const s=t.which||t.keyCode,{triggerOnEnter:a,triggerOnSpace:o}=K(i);a&&s===f.enter||o&&s===f.space?(this.setState({pressed:!1,focused:!0}),this.runCallbackAndMaybeNavigate(t)):!a&&s===f.enter&&(this.enterClick=!1)},this.handleFocus=t=>{const{onFocus:n}=this.props;this.setState({focused:!0},()=>{n&&n(t)})},this.handleBlur=t=>{this.setState({focused:!1,pressed:!1})},this.state=O,this.waitingForClick=!1,this.enterClick=!1}navigateOrReset(e){if(e){const{history:t,href:n,skipClientNav:i,target:s=void 0}=this.props;n&&(s==="_blank"?(window.open(n,"_blank"),this.setState({waiting:!1})):t&&!i?(t.push(n),this.setState({waiting:!1})):window.location.assign(n))}else this.setState({waiting:!1})}handleSafeWithNav(e,t){const{skipClientNav:n,history:i}=this.props;return i&&!n||this.props.target==="_blank"?(e(),this.navigateOrReset(t),Promise.resolve()):(this.state.waiting||this.setState({waiting:!0}),e().then(()=>{this.state.waiting||this.setState({waiting:!0})}).catch(s=>{}).finally(()=>{this.navigateOrReset(t)}))}runCallbackAndMaybeNavigate(e){const{onClick:t=void 0,beforeNav:n=void 0,safeWithNav:i=void 0,href:s,type:a}=this.props;let o=!0,h=!0;if(t&&t(e),e.defaultPrevented&&(o=!1,h=!1),e.preventDefault(),!s&&a==="submit"&&h){let r=e.currentTarget;for(;r;){if(r instanceof window.HTMLFormElement){const p=new window.Event("submit",{bubbles:!0,cancelable:!0});r.dispatchEvent(p);break}r=r.parentElement}}if(n)this.setState({waiting:!0}),n().then(()=>i?this.handleSafeWithNav(i,o):this.navigateOrReset(o)).catch(()=>{});else{if(i)return this.handleSafeWithNav(i,o);this.navigateOrReset(o)}}render(){const e=this.props.rel||(this.props.target==="_blank"?"noopener noreferrer":void 0),t=this.props.disabled?c({},$,{onFocus:this.handleFocus,onBlur:this.handleBlur,tabIndex:this.props.tabIndex,rel:e}):{onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onTouchCancel:this.handleTouchCancel,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onFocus:this.handleFocus,onBlur:this.handleBlur,tabIndex:this.props.tabIndex,rel:e},{children:n}=this.props;return n&&n(this.state,t)}}C.defaultProps={disabled:!1};const T=l=>typeof l!="string"?!1:!/^(https?:)?\/\//i.test(l)&&!/^([^#]*#[\w-]*|[\w\-.]+:)/.test(l),z=A(C);function j(l,e,t){return t&&e!==!0&&l&&T(l)?z:C}const q=["href","onClick","skipClientNav","beforeNav","safeWithNav","style","target","testId","onFocus","onKeyDown","onKeyUp","onMouseDown","onMouseUp","hideDefaultFocusRing","light","disabled","tabIndex"],G=k("a"),J=k("button"),Q=k(P),V=d.forwardRef(function(e,t){const n=(s,a,o)=>{const h=e.href&&!e.disabled,r=a&&!e.skipClientNav&&T(e.href||"");return h&&r&&e.href?d.createElement(Q,c({},o,{to:e.href,role:e.role,target:e.target||void 0,"aria-disabled":e.disabled?"true":"false",ref:t}),e.children(s)):h&&!r?d.createElement(G,c({},o,{href:e.href,role:e.role,target:e.target||void 0,"aria-disabled":e.disabled?"true":"false",ref:t}),e.children(s)):d.createElement(J,c({},o,{type:"button","aria-disabled":e.disabled,ref:t}),e.children(s))},i=s=>{const{href:a,onClick:o,skipClientNav:h,beforeNav:r=void 0,safeWithNav:p=void 0,style:B,target:L=void 0,testId:y,onFocus:S,onKeyDown:M,onKeyUp:m,onMouseDown:D,onMouseUp:E,hideDefaultFocusRing:R,light:W,disabled:v,tabIndex:x}=e,F=I(e,q),N=j(a,h,s),U=u=>[g.reset,g.link,!R&&u.focused&&(W?g.focusedLight:g.focused),v&&g.disabled,B];return r?d.createElement(N,{href:a,onClick:o,beforeNav:r,safeWithNav:p,onFocus:S,onKeyDown:M,onKeyUp:m,onMouseDown:D,onMouseUp:E,disabled:v,tabIndex:x},(u,w)=>n(u,s,c({},F,{"data-testid":y,style:U(u)},w))):d.createElement(N,{href:a,onClick:o,safeWithNav:p,onFocus:S,onKeyDown:M,onKeyUp:m,onMouseDown:D,onMouseUp:E,target:L,disabled:v,tabIndex:x},(u,w)=>n(u,s,c({},F,{"data-testid":y,style:U(u)},w)))};return d.createElement(H.Consumer,null,s=>i(s))});V.defaultProps={light:!1,disabled:!1};const g=_.StyleSheet.create({reset:{border:"none",margin:0,padding:0,width:"auto",overflow:"visible",background:"transparent",textDecoration:"none",color:"inherit",font:"inherit",boxSizing:"border-box",touchAction:"manipulation",userSelect:"none",outline:"none",lineHeight:"normal",WebkitFontSmoothing:"inherit",MozOsxFontSmoothing:"inherit"},link:{cursor:"pointer"},focused:{":focus":{outline:`solid 2px ${b.blue}`}},focusedLight:{outline:`solid 2px ${b.white}`},disabled:{color:b.offBlack32,cursor:"not-allowed",":focus":{outline:"none"},":focus-visible":{outline:`solid 2px ${b.blue}`}}});export{V as C};
