import{$ as f}from"./jquery-CkHB0_Mt.js";import{P as c}from"./index-CrGd2QqM.js";import{r as l}from"./index-C6mWTJJr.js";import{F as r}from"./index-Xl5L4rvz.js";import{_ as i}from"./underscore-U-AHniOr.js";const u={};function m(a){if(!u[a]){const t=f("<span>").text(a).appendTo("body");u[a]=t.width()+5,t.remove()}return u[a]}const p=class p extends l.Component{constructor(){super(...arguments),this.state={items:this.props.options.concat("")},this.onChange=(t,o)=>{let s=i.clone(this.state.items);s[t]=o.target.value,t===s.length-1&&(s=s.concat("")),this.setState({items:s}),this.props.onChange(i.compact(s))},this.onKeyDown=(t,o)=>{const s=o.nativeEvent.keyCode;if(s===8&&this.state.items[t]===""){o.preventDefault();const e=i.clone(this.state.items),n=t===0?0:t-1;t===e.length-1&&(t===0||e[n]!=="")?r.findDOMNode(this.refs["input_"+n]).focus():(e.splice(t,1),this.setState({items:e},function(){r.findDOMNode(this.refs["input_"+n]).focus()}))}else if(s===8&&this.state.items[t].length===1&&t===this.state.items.length-2){o.preventDefault();const e=i.clone(this.state.items);e.splice(t,1),this.setState({items:e}),this.props.onChange(i.compact(e))}else if(s===13){o.preventDefault();const e=i.clone(this.state.items),n=t+1;t===e.length-2?r.findDOMNode(this.refs["input_"+n]).focus():(e.splice(n,0,""),this.setState({items:e},function(){r.findDOMNode(this.refs["input_"+n]).focus()}))}}}UNSAFE_componentWillReceiveProps(t){this.setState({items:t.options.concat("")})}render(){const t=["perseus-text-list-editor","perseus-clearfix","layout-"+this.props.layout].join(" "),o=i.map(this.state.items,function(s,e){return l.createElement("li",{key:e},l.createElement("input",{ref:"input_"+e,type:"text",value:s,onChange:this.onChange.bind(this,e),onKeyDown:this.onKeyDown.bind(this,e),style:{width:m(s)}}))},this);return l.createElement("ul",{className:t},o)}};p.propTypes={options:c.array,layout:c.oneOf(["horizontal","vertical"]),onChange:c.func.isRequired},p.defaultProps={options:[],layout:"horizontal"};let h=p;h.__docgenInfo={description:"",methods:[{name:"onChange",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null},{name:"event",optional:!1,type:null}],returns:null},{name:"onKeyDown",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null},{name:"event",optional:!1,type:null}],returns:null}],displayName:"TextListEditor",props:{options:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"array"},required:!1},layout:{defaultValue:{value:'"horizontal"',computed:!1},description:"",type:{name:"enum",value:[{value:'"horizontal"',computed:!1},{value:'"vertical"',computed:!1}]},required:!1},onChange:{description:"",type:{name:"func"},required:!0}}};export{h as T};
