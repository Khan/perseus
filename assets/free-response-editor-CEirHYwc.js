var C=Object.defineProperty;var f=(t,i,r)=>i in t?C(t,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[i]=r;var n=(t,i,r)=>f(t,typeof i!="symbol"?i+"":i,r);import{r as x,U as y,j as e,V as l,bD as c,n as b,H as d,aa as w,ao as h,s as u,q as v}from"./iframe-P4OSW_dY.js";import"./changeable-CwdH6ff_.js";import"./article-renderer-CLdCg4eH.js";import"./server-item-renderer-BMQYoJ2I.js";import"./hints-renderer-DcmH3bRW.js";const j={allowUnlimitedCharacters:!1,characterLimit:500,placeholder:"Please provide response here",question:"",scoringCriteria:[{text:""}]},q={defaultWidgetOptions:j},k=""+new URL("plus-circle-x9sP7dzF.svg",import.meta.url).href,L=""+new URL("trash-Cncdq4KR.svg",import.meta.url).href;class p extends x.Component{constructor(){super(...arguments);n(this,"serialize",()=>({allowUnlimitedCharacters:this.props.allowUnlimitedCharacters,characterLimit:this.props.characterLimit,placeholder:this.props.placeholder,question:this.props.question,scoringCriteria:this.props.scoringCriteria}));n(this,"getSaveWarnings",()=>{const r=[];return this.props.question||r.push("The question is empty"),this.props.question.match(y.rWidgetRule)!=null&&r.push("The question contains a widget"),r});n(this,"handleUpdateCharacterLimit",r=>{const a=parseInt(r.target.value);isNaN(a)||this.props.onChange({characterLimit:Math.max(1,a)})});n(this,"handleUpdateCriterion",(r,a)=>{const o=this.props.scoringCriteria.map((m,g)=>g===r?a:m);this.props.onChange({scoringCriteria:o})});n(this,"handleDeleteCriterion",r=>{this.props.onChange({scoringCriteria:this.props.scoringCriteria.filter((a,o)=>o!==r)})});n(this,"handleAddCriterion",()=>{this.props.onChange({scoringCriteria:[...this.props.scoringCriteria,{text:""}]})});n(this,"renderCriteriaList",()=>{const r=this.props.scoringCriteria.length>1;return this.props.scoringCriteria.map((a,o)=>e.jsx(U,{criterion:a,index:o,isDeletable:r,onChange:this.handleUpdateCriterion,onDelete:this.handleDeleteCriterion},o))})}render(){return e.jsxs(l,{children:[e.jsx(c,{label:e.jsx(d,{children:"Question"}),field:e.jsx("textarea",{value:this.props.question,onChange:r=>this.props.onChange({question:r.target.value})}),styles:{root:s.labeledInputField}}),e.jsx(c,{label:e.jsx(d,{children:"Placeholder"}),field:e.jsx("textarea",{value:this.props.placeholder,onChange:r=>this.props.onChange({placeholder:r.target.value})}),styles:{root:s.labeledInputField}}),e.jsx(c,{label:e.jsx(d,{children:"Allow unlimited characters"}),field:e.jsx(w,{checked:this.props.allowUnlimitedCharacters,onChange:r=>this.props.onChange({allowUnlimitedCharacters:r})}),styles:{root:s.labeledInputField}}),!this.props.allowUnlimitedCharacters&&e.jsx(c,{label:e.jsx(d,{children:"Character limit"}),field:e.jsx("input",{type:"number",min:1,value:this.props.characterLimit,onChange:this.handleUpdateCharacterLimit}),styles:{root:s.labeledInputField}}),e.jsxs(l,{children:[e.jsx(d,{children:"Scoring criteria"}),e.jsx(l,{style:s.criteriaList,children:this.renderCriteriaList()}),e.jsx(l,{children:e.jsx(h,{onClick:this.handleAddCriterion,startIcon:k,children:"Add an item"})})]})]})}}n(p,"defaultProps",q.defaultWidgetOptions),n(p,"widgetName","free-response");const U=function(t){return e.jsxs(l,{style:s.criterionContainer,children:[e.jsx("textarea",{"aria-label":`Criterion ${t.index+1}`,onChange:i=>t.onChange(t.index,{text:i.target.value}),value:t.criterion.text}),t.isDeletable&&e.jsx(l,{style:s.deleteButtonContainer,children:e.jsx(h,{"aria-label":`Delete criterion ${t.index+1}`,actionType:"destructive",disabled:!t.isDeletable,kind:"tertiary",onClick:()=>t.onDelete(t.index),size:"small",startIcon:L,children:"Delete"})})]})},s=b.StyleSheet.create({criteriaList:{gap:u.small_12},criterionContainer:{paddingTop:u.xSmall_8,paddingBottom:u.xSmall_8,borderBottom:`1px solid ${v.core.border.neutral.subtle}`,":last-child":{borderBottom:"none"}},deleteButtonContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},labeledInputField:{paddingBottom:u.large_24}});p.__docgenInfo={description:"An editor for adding a free response widget that allows users to enter open-ended text answers.",methods:[{name:"serialize",docblock:null,modifiers:[],params:[],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"handleUpdateCharacterLimit",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"handleUpdateCriterion",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:{name:"number"}},{name:"criterion",optional:!1,type:{name:"signature",type:"object",raw:`{
    // An English-language description of how to score the response for this criterion.
    text: string;
}`,signature:{properties:[{key:"text",value:{name:"string",required:!0}}]},alias:"PerseusFreeResponseWidgetScoringCriterion"}}],returns:null},{name:"handleDeleteCriterion",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:{name:"number"}}],returns:null},{name:"handleAddCriterion",docblock:null,modifiers:[],params:[],returns:null},{name:"renderCriteriaList",docblock:null,modifiers:[],params:[],returns:null}],displayName:"FreeResponseEditor",props:{allowUnlimitedCharacters:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},characterLimit:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Please provide response here"',computed:!1}},question:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},scoringCriteria:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"signature",type:"object",raw:`{
    // An English-language description of how to score the response for this criterion.
    text: string;
}`,signature:{properties:[{key:"text",value:{name:"string",required:!0}}]}}],raw:"ReadonlyArray<PerseusFreeResponseWidgetScoringCriterion>"},description:"",defaultValue:{value:`[
    {
        text: "",
    },
]`,computed:!1}},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(options: Partial<PerseusFreeResponseWidgetOptions>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
    // Whether to allow the user to enter an unlimited number of characters.
    allowUnlimitedCharacters: boolean;
    // The maximum number of characters that the user can enter.
    characterLimit: number;
    // The placeholder text that will be displayed to the user in the text input field.
    placeholder: string;
    // The question text that will be displayed to the user.
    question: string;
    // A list of scoring criteria for the free response question. This is a list
    // of things the answer should contain to be considered correct.
    scoringCriteria: ReadonlyArray<PerseusFreeResponseWidgetScoringCriterion>;
}`,signature:{properties:[{key:"allowUnlimitedCharacters",value:{name:"boolean",required:!0}},{key:"characterLimit",value:{name:"number",required:!0}},{key:"placeholder",value:{name:"string",required:!0}},{key:"question",value:{name:"string",required:!0}},{key:"scoringCriteria",value:{name:"ReadonlyArray",elements:[{name:"signature",type:"object",raw:`{
    // An English-language description of how to score the response for this criterion.
    text: string;
}`,signature:{properties:[{key:"text",value:{name:"string",required:!0}}]}}],raw:"ReadonlyArray<PerseusFreeResponseWidgetScoringCriterion>",required:!0}}]}}],raw:"Partial<PerseusFreeResponseWidgetOptions>"},name:"options"}],return:{name:"void"}}},description:""}}};export{p as F,k as p};
