import{a as d,j as o}from"./jsx-runtime-BGVbfQ2Z.js";import{r as u}from"./index-qhcEwEpg.js";import{g as b}from"./article-renderer-BP_8MBtw.js";import"./index-default-4_ZsnO94.js";import{U as f}from"./util-Kf-UsGkl.js";import"./unit-3mV5sRes.js";import"./version-akiLXZts.js";import{g as C}from"./dependencies-fnqF3NiV.js";import"./perseus-api-BF68z3pH.js";import"./multi-renderer-bID5LDQT.js";import"./hints-renderer-E_9I4Ktc.js";import"./renderer--qvWlSJl.js";import"./base-radio-L2CQ04LW.js";import"./button-group-eBTrRsKy.js";import"./graph-Bysq6csc.js";import"./svg-image-ImGr8npy.js";import"./hud-Q7Km3N9P.js";import"./icon-HbAIhp4d.js";import"./info-tip-_E95qi8X.js";import"./inline-icon-MJBS_-2U.js";import"./math-input-Ah4BQ4X3.js";import"./multi-button-group-rHU9dGVb.js";import"./number-input-nytuiJQZ.js";import"./prop-check-box-s_QybB1E.js";import"./range-input-qxBl8f4w.js";import"./text-input-yDsqFbe3.js";import"./text-list-editor-bJphcq85.js";import"./jquery-5v7aFUvu.js";import"./i18n-context-9-s9cJ--.js";import{l as s}from"./index-awljIyHI.js";import{M as _}from"./marker-_U7jRxzj.js";const{colors:g,typography:h}=b;class Z extends u.Component{constructor(){super(...arguments),this._markers=[],this.handleImageDoubleClick=r=>{r.preventDefault();const e=r.currentTarget.getBoundingClientRect(),a=Math.round((r.clientX-e.left)/e.width*1e3)/10,n=Math.round((r.clientY-e.top)/e.height*1e3)/10,{markers:t,onChange:l}=this.props;l([...t,{answers:[],label:"",x:a,y:n}])}}openDropdownForMarkerIndices(r){r.forEach(e=>{var a;this._markers[e]&&((a=this._markers[e])==null||a.openDropdown())})}render(){const{choices:r,imageUrl:e,imageWidth:a,imageHeight:n,markers:t,onChange:l}=this.props,k=C().staticUrl;return d("div",{children:[o("div",{className:s.css(m.title),children:"Markers"}),o("div",{className:s.css(m.subtitle),children:e?d("span",{children:["Double-click on the image to add a marker.",o("br",{}),o("br",{}),"Markers are read by screen readers in the order that you add them here, so add in a logical order for the learner (e.g. sequentially, clockwise). You can test order by using keyboard tabbing."]}):"Upload an image to place markers."}),e&&d("div",{className:s.css(m.markersCanvas),style:{maxWidth:a,maxHeight:n},children:[o("img",{alt:"",className:s.css(m.image),src:k(f.getRealImageUrl(e)),onDoubleClick:this.handleImageDoubleClick}),t.map((p,i)=>u.createElement(_,{...p,choices:r,key:`${p.x}.${p.y}`,onChange:c=>l([...t.slice(0,i),c,...t.slice(i+1)]),onRemove:()=>l([...t.slice(0,i),...t.slice(i+1)]),ref:c=>this._markers[i]=c}))]})]})}}const m=s.StyleSheet.create({title:{...h.bodyXsmallBold,marginBottom:6,color:g.gray17},subtitle:{...h.labelSmall,marginBottom:12,color:g.gray68},markersCanvas:{position:"relative",border:"solid 1px rgba(33, 36, 44, 0.16)"},image:{display:"block",maxWidth:"100%"}});try{questionmarkers.displayName="questionmarkers",questionmarkers.__docgenInfo={description:"",displayName:"questionmarkers",props:{choices:{defaultValue:null,description:"",name:"choices",required:!0,type:{name:"readonly string[]"}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}},imageWidth:{defaultValue:null,description:"",name:"imageWidth",required:!0,type:{name:"number"}},imageHeight:{defaultValue:null,description:"",name:"imageHeight",required:!0,type:{name:"number"}},markers:{defaultValue:null,description:"",name:"markers",required:!0,type:{name:"readonly MarkerType[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(markers: readonly MarkerType[]) => void"}}}}}catch{}export{Z as Q};
