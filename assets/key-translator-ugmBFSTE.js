import"./index-default-4_ZsnO94.js";import{g as getDecimalSeparator}from"./get-decimal-separator-c07pHhM9.js";import"./random-util-cSB29zlT.js";import{c as commonjsGlobal,g as getDefaultExportFromCjs}from"./_commonjsHelpers-4gQjN7DL.js";import{i as inJest,C as CursorContext}from"./mobile-keypad-brUOJzcB.js";var MathFieldActionType=(t=>(t.WRITE="write",t.CMD="cmd",t.KEYSTROKE="keystroke",t[t.MQ_END=0]="MQ_END",t))(MathFieldActionType||{}),dist={},renderer={},chtml={},OutputJax$1={},OutputJax={},Options$1={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__values||function(v){var x=typeof Symbol=="function"&&Symbol.iterator,b=x&&v[x],S=0;if(b)return b.call(v);if(v&&typeof v.length=="number")return{next:function(){return v&&S>=v.length&&(v=void 0),{value:v&&v[S++],done:!v}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")},e=commonjsGlobal&&commonjsGlobal.__read||function(v,x){var b=typeof Symbol=="function"&&v[Symbol.iterator];if(!b)return v;var S=b.call(v),M,C=[],A;try{for(;(x===void 0||x-- >0)&&!(M=S.next()).done;)C.push(M.value)}catch(E){A={error:E}}finally{try{M&&!M.done&&(b=S.return)&&b.call(S)}finally{if(A)throw A.error}}return C},n=commonjsGlobal&&commonjsGlobal.__spreadArray||function(v,x,b){if(b||arguments.length===2)for(var S=0,M=x.length,C;S<M;S++)(C||!(S in x))&&(C||(C=Array.prototype.slice.call(x,0,S)),C[S]=x[S]);return v.concat(C||Array.prototype.slice.call(x))};Object.defineProperty(t,"__esModule",{value:!0}),t.lookup=t.separateOptions=t.selectOptionsFromKeys=t.selectOptions=t.userOptions=t.defaultOptions=t.insert=t.copy=t.keys=t.makeArray=t.expandable=t.Expandable=t.OPTIONS=t.REMOVE=t.APPEND=t.isObject=void 0;var i={}.constructor;function o(v){return typeof v=="object"&&v!==null&&(v.constructor===i||v.constructor===a)}t.isObject=o,t.APPEND="[+]",t.REMOVE="[-]",t.OPTIONS={invalidOption:"warn",optionError:function(v,x){if(t.OPTIONS.invalidOption==="fatal")throw new Error(v);console.warn("MathJax: "+v)}};var a=function(){function v(){}return v}();t.Expandable=a;function s(v){return Object.assign(Object.create(a.prototype),v)}t.expandable=s;function l(v){return Array.isArray(v)?v:[v]}t.makeArray=l;function c(v){return v?Object.keys(v).concat(Object.getOwnPropertySymbols(v)):[]}t.keys=c;function f(v){var x,b,S={};try{for(var M=r(c(v)),C=M.next();!C.done;C=M.next()){var A=C.value,E=Object.getOwnPropertyDescriptor(v,A),$=E.value;Array.isArray($)?E.value=d([],$,!1):o($)&&(E.value=f($)),E.enumerable&&(S[A]=E)}}catch(D){x={error:D}}finally{try{C&&!C.done&&(b=M.return)&&b.call(M)}finally{if(x)throw x.error}}return Object.defineProperties(v.constructor===a?s({}):{},S)}t.copy=f;function d(v,x,b){var S,M;b===void 0&&(b=!0);var C=function(D){if(b&&v[D]===void 0&&v.constructor!==a)return typeof D=="symbol"&&(D=D.toString()),t.OPTIONS.optionError('Invalid option "'.concat(D,'" (no default value).'),D),"continue";var B=x[D],F=v[D];if(o(B)&&F!==null&&(typeof F=="object"||typeof F=="function")){var I=c(B);Array.isArray(F)&&(I.length===1&&(I[0]===t.APPEND||I[0]===t.REMOVE)&&Array.isArray(B[I[0]])||I.length===2&&I.sort().join(",")===t.APPEND+","+t.REMOVE&&Array.isArray(B[t.APPEND])&&Array.isArray(B[t.REMOVE]))?(B[t.REMOVE]&&(F=v[D]=F.filter(function(H){return B[t.REMOVE].indexOf(H)<0})),B[t.APPEND]&&(v[D]=n(n([],e(F),!1),e(B[t.APPEND]),!1))):d(F,B,b)}else Array.isArray(B)?(v[D]=[],d(v[D],B,!1)):o(B)?v[D]=f(B):v[D]=B};try{for(var A=r(c(x)),E=A.next();!E.done;E=A.next()){var $=E.value;C($)}}catch(D){S={error:D}}finally{try{E&&!E.done&&(M=A.return)&&M.call(A)}finally{if(S)throw S.error}}return v}t.insert=d;function u(v){for(var x=[],b=1;b<arguments.length;b++)x[b-1]=arguments[b];return x.forEach(function(S){return d(v,S,!1)}),v}t.defaultOptions=u;function m(v){for(var x=[],b=1;b<arguments.length;b++)x[b-1]=arguments[b];return x.forEach(function(S){return d(v,S,!0)}),v}t.userOptions=m;function p(v){for(var x,b,S=[],M=1;M<arguments.length;M++)S[M-1]=arguments[M];var C={};try{for(var A=r(S),E=A.next();!E.done;E=A.next()){var $=E.value;v.hasOwnProperty($)&&(C[$]=v[$])}}catch(D){x={error:D}}finally{try{E&&!E.done&&(b=A.return)&&b.call(A)}finally{if(x)throw x.error}}return C}t.selectOptions=p;function _(v,x){return p.apply(void 0,n([v],e(Object.keys(x)),!1))}t.selectOptionsFromKeys=_;function y(v){for(var x,b,S,M,C=[],A=1;A<arguments.length;A++)C[A-1]=arguments[A];var E=[];try{for(var $=r(C),D=$.next();!D.done;D=$.next()){var B=D.value,F={},I={};try{for(var H=(S=void 0,r(Object.keys(v||{}))),W=H.next();!W.done;W=H.next()){var Z=W.value;(B[Z]===void 0?I:F)[Z]=v[Z]}}catch(et){S={error:et}}finally{try{W&&!W.done&&(M=H.return)&&M.call(H)}finally{if(S)throw S.error}}E.push(F),v=I}}catch(et){x={error:et}}finally{try{D&&!D.done&&(b=$.return)&&b.call($)}finally{if(x)throw x.error}}return E.unshift(v),E}t.separateOptions=y;function g(v,x,b){return b===void 0&&(b=null),x.hasOwnProperty(v)?x[v]:b}t.lookup=g})(Options$1);var FunctionList$1={},PrioritizedList$1={};Object.defineProperty(PrioritizedList$1,"__esModule",{value:!0});PrioritizedList$1.PrioritizedList=void 0;var PrioritizedList=function(){function t(){this.items=[],this.items=[]}return t.prototype[Symbol.iterator]=function(){var r=0,e=this.items;return{next:function(){return{value:e[r++],done:r>e.length}}}},t.prototype.add=function(r,e){e===void 0&&(e=t.DEFAULTPRIORITY);var n=this.items.length;do n--;while(n>=0&&e<this.items[n].priority);return this.items.splice(n+1,0,{item:r,priority:e}),r},t.prototype.remove=function(r){var e=this.items.length;do e--;while(e>=0&&this.items[e].item!==r);e>=0&&this.items.splice(e,1)},t.DEFAULTPRIORITY=5,t}();PrioritizedList$1.PrioritizedList=PrioritizedList;var __extends$1X=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__values$P=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$T=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$y=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(FunctionList$1,"__esModule",{value:!0});FunctionList$1.FunctionList=void 0;var PrioritizedList_js_1$1=PrioritizedList$1,FunctionList=function(t){__extends$1X(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.execute=function(){for(var e,n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];try{for(var a=__values$P(this),s=a.next();!s.done;s=a.next()){var l=s.value,c=l.item.apply(l,__spreadArray$y([],__read$T(i),!1));if(c===!1)return!1}}catch(f){e={error:f}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return!0},r.prototype.asyncExecute=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=-1,o=this.items;return new Promise(function(a,s){(function l(){for(var c;++i<o.length;){var f=(c=o[i]).item.apply(c,__spreadArray$y([],__read$T(e),!1));if(f instanceof Promise){f.then(l).catch(function(d){return s(d)});return}if(f===!1){a(!1);return}}a(!0)})()})},r}(PrioritizedList_js_1$1.PrioritizedList);FunctionList$1.FunctionList=FunctionList;Object.defineProperty(OutputJax,"__esModule",{value:!0});OutputJax.AbstractOutputJax=void 0;var Options_js_1$b=Options$1,FunctionList_js_1$1=FunctionList$1,AbstractOutputJax=function(){function t(r){r===void 0&&(r={}),this.adaptor=null;var e=this.constructor;this.options=(0,Options_js_1$b.userOptions)((0,Options_js_1$b.defaultOptions)({},e.OPTIONS),r),this.postFilters=new FunctionList_js_1$1.FunctionList}return Object.defineProperty(t.prototype,"name",{get:function(){return this.constructor.NAME},enumerable:!1,configurable:!0}),t.prototype.setAdaptor=function(r){this.adaptor=r},t.prototype.initialize=function(){},t.prototype.reset=function(){},t.prototype.getMetrics=function(r){},t.prototype.styleSheet=function(r){return null},t.prototype.pageElements=function(r){return null},t.prototype.executeFilters=function(r,e,n,i){var o={math:e,document:n,data:i};return r.execute(o),o.data},t.NAME="generic",t.OPTIONS={},t}();OutputJax.AbstractOutputJax=AbstractOutputJax;var MathItem={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.newState=t.STATE=t.AbstractMathItem=t.protoItem=void 0;function r(i,o,a,s,l,c,f){f===void 0&&(f=null);var d={open:i,math:o,close:a,n:s,start:{n:l},end:{n:c},display:f};return d}t.protoItem=r;var e=function(){function i(o,a,s,l,c){s===void 0&&(s=!0),l===void 0&&(l={i:0,n:0,delim:""}),c===void 0&&(c={i:0,n:0,delim:""}),this.root=null,this.typesetRoot=null,this.metrics={},this.inputData={},this.outputData={},this._state=t.STATE.UNPROCESSED,this.math=o,this.inputJax=a,this.display=s,this.start=l,this.end=c,this.root=null,this.typesetRoot=null,this.metrics={},this.inputData={},this.outputData={}}return Object.defineProperty(i.prototype,"isEscaped",{get:function(){return this.display===null},enumerable:!1,configurable:!0}),i.prototype.render=function(o){o.renderActions.renderMath(this,o)},i.prototype.rerender=function(o,a){a===void 0&&(a=t.STATE.RERENDER),this.state()>=a&&this.state(a-1),o.renderActions.renderMath(this,o,a)},i.prototype.convert=function(o,a){a===void 0&&(a=t.STATE.LAST),o.renderActions.renderConvert(this,o,a)},i.prototype.compile=function(o){this.state()<t.STATE.COMPILED&&(this.root=this.inputJax.compile(this,o),this.state(t.STATE.COMPILED))},i.prototype.typeset=function(o){this.state()<t.STATE.TYPESET&&(this.typesetRoot=o.outputJax[this.isEscaped?"escaped":"typeset"](this,o),this.state(t.STATE.TYPESET))},i.prototype.updateDocument=function(o){},i.prototype.removeFromDocument=function(o){},i.prototype.setMetrics=function(o,a,s,l,c){this.metrics={em:o,ex:a,containerWidth:s,lineWidth:l,scale:c}},i.prototype.state=function(o,a){return o===void 0&&(o=null),a===void 0&&(a=!1),o!=null&&(o<t.STATE.INSERTED&&this._state>=t.STATE.INSERTED&&this.removeFromDocument(a),o<t.STATE.TYPESET&&this._state>=t.STATE.TYPESET&&(this.outputData={}),o<t.STATE.COMPILED&&this._state>=t.STATE.COMPILED&&(this.inputData={}),this._state=o),this._state},i.prototype.reset=function(o){o===void 0&&(o=!1),this.state(t.STATE.UNPROCESSED,o)},i}();t.AbstractMathItem=e,t.STATE={UNPROCESSED:0,FINDMATH:10,COMPILED:20,CONVERT:100,METRICS:110,RERENDER:125,TYPESET:150,INSERTED:200,LAST:1e4};function n(i,o){if(i in t.STATE)throw Error("State "+i+" already exists");t.STATE[i]=o}t.newState=n})(MathItem);var lengths={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.px=t.emRounded=t.em=t.percent=t.length2em=t.MATHSPACE=t.RELUNITS=t.UNITS=t.BIGDIMEN=void 0,t.BIGDIMEN=1e6,t.UNITS={px:1,in:96,cm:96/2.54,mm:96/25.4},t.RELUNITS={em:1,ex:.431,pt:1/10,pc:12/10,mu:1/18},t.MATHSPACE={veryverythinmathspace:1/18,verythinmathspace:2/18,thinmathspace:3/18,mediummathspace:4/18,thickmathspace:5/18,verythickmathspace:6/18,veryverythickmathspace:7/18,negativeveryverythinmathspace:-1/18,negativeverythinmathspace:-2/18,negativethinmathspace:-3/18,negativemediummathspace:-4/18,negativethickmathspace:-5/18,negativeverythickmathspace:-6/18,negativeveryverythickmathspace:-7/18,thin:.04,medium:.06,thick:.1,normal:1,big:2,small:1/Math.sqrt(2),infinity:t.BIGDIMEN};function r(a,s,l,c){if(s===void 0&&(s=0),l===void 0&&(l=1),c===void 0&&(c=16),typeof a!="string"&&(a=String(a)),a===""||a==null)return s;if(t.MATHSPACE[a])return t.MATHSPACE[a];var f=a.match(/^\s*([-+]?(?:\.\d+|\d+(?:\.\d*)?))?(pt|em|ex|mu|px|pc|in|mm|cm|%)?/);if(!f)return s;var d=parseFloat(f[1]||"1"),u=f[2];return t.UNITS.hasOwnProperty(u)?d*t.UNITS[u]/c/l:t.RELUNITS.hasOwnProperty(u)?d*t.RELUNITS[u]:u==="%"?d/100*s:d*s}t.length2em=r;function e(a){return(100*a).toFixed(1).replace(/\.?0+$/,"")+"%"}t.percent=e;function n(a){return Math.abs(a)<.001?"0":a.toFixed(3).replace(/\.?0+$/,"")+"em"}t.em=n;function i(a,s){return s===void 0&&(s=16),a=(Math.round(a*s)+.05)/s,Math.abs(a)<.001?"0em":a.toFixed(3).replace(/\.?0+$/,"")+"em"}t.emRounded=i;function o(a,s,l){return s===void 0&&(s=-t.BIGDIMEN),l===void 0&&(l=16),a*=l,s&&a<s&&(a=s),Math.abs(a)<.1?"0":a.toFixed(1).replace(/\.0$/,"")+"px"}t.px=o})(lengths);var Styles$1={},__values$O=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$S=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$x=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(Styles$1,"__esModule",{value:!0});Styles$1.Styles=void 0;var TRBL=["top","right","bottom","left"],WSC=["width","style","color"];function splitSpaces(t){for(var r=t.split(/((?:'[^']*'|"[^"]*"|,[\s\n]|[^\s\n])*)/g),e=[];r.length>1;)r.shift(),e.push(r.shift());return e}function splitTRBL(t){var r,e,n=splitSpaces(this.styles[t]);n.length===0&&n.push(""),n.length===1&&n.push(n[0]),n.length===2&&n.push(n[0]),n.length===3&&n.push(n[1]);try{for(var i=__values$O(Styles.connect[t].children),o=i.next();!o.done;o=i.next()){var a=o.value;this.setStyle(this.childName(t,a),n.shift())}}catch(s){r={error:s}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(r)throw r.error}}}function combineTRBL(t){var r,e,n=Styles.connect[t].children,i=[];try{for(var o=__values$O(n),a=o.next();!a.done;a=o.next()){var s=a.value,l=this.styles[t+"-"+s];if(!l){delete this.styles[t];return}i.push(l)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}i[3]===i[1]&&(i.pop(),i[2]===i[0]&&(i.pop(),i[1]===i[0]&&i.pop())),this.styles[t]=i.join(" ")}function splitSame(t){var r,e;try{for(var n=__values$O(Styles.connect[t].children),i=n.next();!i.done;i=n.next()){var o=i.value;this.setStyle(this.childName(t,o),this.styles[t])}}catch(a){r={error:a}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(r)throw r.error}}}function combineSame(t){var r,e,n=__spreadArray$x([],__read$S(Styles.connect[t].children),!1),i=this.styles[this.childName(t,n.shift())];try{for(var o=__values$O(n),a=o.next();!a.done;a=o.next()){var s=a.value;if(this.styles[this.childName(t,s)]!==i){delete this.styles[t];return}}}catch(l){r={error:l}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}this.styles[t]=i}var BORDER={width:/^(?:[\d.]+(?:[a-z]+)|thin|medium|thick|inherit|initial|unset)$/,style:/^(?:none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|inherit|initial|unset)$/};function splitWSC(t){var r,e,n,i,o={width:"",style:"",color:""};try{for(var a=__values$O(splitSpaces(this.styles[t])),s=a.next();!s.done;s=a.next()){var l=s.value;l.match(BORDER.width)&&o.width===""?o.width=l:l.match(BORDER.style)&&o.style===""?o.style=l:o.color=l}}catch(u){r={error:u}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}try{for(var c=__values$O(Styles.connect[t].children),f=c.next();!f.done;f=c.next()){var d=f.value;this.setStyle(this.childName(t,d),o[d])}}catch(u){n={error:u}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}function combineWSC(t){var r,e,n=[];try{for(var i=__values$O(Styles.connect[t].children),o=i.next();!o.done;o=i.next()){var a=o.value,s=this.styles[this.childName(t,a)];s&&n.push(s)}}catch(l){r={error:l}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(r)throw r.error}}n.length?this.styles[t]=n.join(" "):delete this.styles[t]}var FONT={style:/^(?:normal|italic|oblique|inherit|initial|unset)$/,variant:new RegExp("^(?:"+["normal|none","inherit|initial|unset","common-ligatures|no-common-ligatures","discretionary-ligatures|no-discretionary-ligatures","historical-ligatures|no-historical-ligatures","contextual|no-contextual","(?:stylistic|character-variant|swash|ornaments|annotation)\\([^)]*\\)","small-caps|all-small-caps|petite-caps|all-petite-caps|unicase|titling-caps","lining-nums|oldstyle-nums|proportional-nums|tabular-nums","diagonal-fractions|stacked-fractions","ordinal|slashed-zero","jis78|jis83|jis90|jis04|simplified|traditional","full-width|proportional-width","ruby"].join("|")+")$"),weight:/^(?:normal|bold|bolder|lighter|[1-9]00|inherit|initial|unset)$/,stretch:new RegExp("^(?:"+["normal","(?:(?:ultra|extra|semi)-)?condensed","(?:(?:semi|extra|ulta)-)?expanded","inherit|initial|unset"].join("|")+")$"),size:new RegExp("^(?:"+["xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller","[d.]+%|[d.]+[a-z]+","inherit|initial|unset"].join("|")+")(?:/(?:normal|[d.+](?:%|[a-z]+)?))?$")};function splitFont(t){var r,e,n,i,o=splitSpaces(this.styles[t]),a={style:"",variant:[],weight:"",stretch:"",size:"",family:"","line-height":""};try{for(var s=__values$O(o),l=s.next();!l.done;l=s.next()){var c=l.value;a.family=c;try{for(var f=(n=void 0,__values$O(Object.keys(FONT))),d=f.next();!d.done;d=f.next()){var u=d.value;if((Array.isArray(a[u])||a[u]==="")&&c.match(FONT[u]))if(u==="size"){var m=__read$S(c.split(/\//),2),p=m[0],_=m[1];a[u]=p,_&&(a["line-height"]=_)}else a.size===""&&(Array.isArray(a[u])?a[u].push(c):a[u]=c)}}catch(y){n={error:y}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}}}catch(y){r={error:y}}finally{try{l&&!l.done&&(e=s.return)&&e.call(s)}finally{if(r)throw r.error}}saveFontParts(t,a),delete this.styles[t]}function saveFontParts(t,r){var e,n;try{for(var i=__values$O(Styles.connect[t].children),o=i.next();!o.done;o=i.next()){var a=o.value,s=this.childName(t,a);if(Array.isArray(r[a])){var l=r[a];l.length&&(this.styles[s]=l.join(" "))}else r[a]!==""&&(this.styles[s]=r[a])}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}function combineFont(t){}var Styles=function(){function t(r){r===void 0&&(r=""),this.parse(r)}return Object.defineProperty(t.prototype,"cssText",{get:function(){var r,e,n=[];try{for(var i=__values$O(Object.keys(this.styles)),o=i.next();!o.done;o=i.next()){var a=o.value,s=this.parentName(a);this.styles[s]||n.push(a+": "+this.styles[a]+";")}}catch(l){r={error:l}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(r)throw r.error}}return n.join(" ")},enumerable:!1,configurable:!0}),t.prototype.set=function(r,e){for(r=this.normalizeName(r),this.setStyle(r,e),t.connect[r]&&!t.connect[r].combine&&(this.combineChildren(r),delete this.styles[r]);r.match(/-/)&&(r=this.parentName(r),!!t.connect[r]);)t.connect[r].combine.call(this,r)},t.prototype.get=function(r){return r=this.normalizeName(r),this.styles.hasOwnProperty(r)?this.styles[r]:""},t.prototype.setStyle=function(r,e){this.styles[r]=e,t.connect[r]&&t.connect[r].children&&t.connect[r].split.call(this,r),e===""&&delete this.styles[r]},t.prototype.combineChildren=function(r){var e,n,i=this.parentName(r);try{for(var o=__values$O(t.connect[r].children),a=o.next();!a.done;a=o.next()){var s=a.value,l=this.childName(i,s);t.connect[l].combine.call(this,l)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},t.prototype.parentName=function(r){var e=r.replace(/-[^-]*$/,"");return r===e?"":e},t.prototype.childName=function(r,e){return e.match(/-/)?e:(t.connect[r]&&!t.connect[r].combine&&(e+=r.replace(/.*-/,"-"),r=this.parentName(r)),r+"-"+e)},t.prototype.normalizeName=function(r){return r.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})},t.prototype.parse=function(r){r===void 0&&(r="");var e=this.constructor.pattern;this.styles={};for(var n=r.replace(e.comment,"").split(e.style);n.length>1;){var i=__read$S(n.splice(0,3),3),o=i[0],a=i[1],s=i[2];if(o.match(/[^\s\n]/))return;this.set(a,s)}},t.pattern={style:/([-a-z]+)[\s\n]*:[\s\n]*((?:'[^']*'|"[^"]*"|\n|.)*?)[\s\n]*(?:;|$)/g,comment:/\/\*[^]*?\*\//g},t.connect={padding:{children:TRBL,split:splitTRBL,combine:combineTRBL},border:{children:TRBL,split:splitSame,combine:combineSame},"border-top":{children:WSC,split:splitWSC,combine:combineWSC},"border-right":{children:WSC,split:splitWSC,combine:combineWSC},"border-bottom":{children:WSC,split:splitWSC,combine:combineWSC},"border-left":{children:WSC,split:splitWSC,combine:combineWSC},"border-width":{children:TRBL,split:splitTRBL,combine:null},"border-style":{children:TRBL,split:splitTRBL,combine:null},"border-color":{children:TRBL,split:splitTRBL,combine:null},font:{children:["style","variant","weight","stretch","line-height","size","family"],split:splitFont,combine:combineFont}},t}();Styles$1.Styles=Styles;var StyleList={},__values$N=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(StyleList,"__esModule",{value:!0});StyleList.CssStyles=void 0;var CssStyles=function(){function t(r){r===void 0&&(r=null),this.styles={},this.addStyles(r)}return Object.defineProperty(t.prototype,"cssText",{get:function(){return this.getStyleString()},enumerable:!1,configurable:!0}),t.prototype.addStyles=function(r){var e,n;if(r)try{for(var i=__values$N(Object.keys(r)),o=i.next();!o.done;o=i.next()){var a=o.value;this.styles[a]||(this.styles[a]={}),Object.assign(this.styles[a],r[a])}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.removeStyles=function(){for(var r,e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{for(var o=__values$N(n),a=o.next();!a.done;a=o.next()){var s=a.value;delete this.styles[s]}}catch(l){r={error:l}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}},t.prototype.clear=function(){this.styles={}},t.prototype.getStyleString=function(){return this.getStyleRules().join(`

`)},t.prototype.getStyleRules=function(){var r,e,n=Object.keys(this.styles),i=new Array(n.length),o=0;try{for(var a=__values$N(n),s=a.next();!s.done;s=a.next()){var l=s.value;i[o++]=l+` {
`+this.getStyleDefString(this.styles[l])+`
}`}}catch(c){r={error:c}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}return i},t.prototype.getStyleDefString=function(r){var e,n,i=Object.keys(r),o=new Array(i.length),a=0;try{for(var s=__values$N(i),l=s.next();!l.done;l=s.next()){var c=l.value;o[a++]="  "+c+": "+r[c]+";"}}catch(f){e={error:f}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o.join(`
`)},t}();StyleList.CssStyles=CssStyles;var __extends$1W=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$J=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$J=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$J.apply(this,arguments)},__read$R=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__values$M=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(OutputJax$1,"__esModule",{value:!0});OutputJax$1.CommonOutputJax=void 0;var OutputJax_js_1$1=OutputJax,MathItem_js_1$4=MathItem,Options_js_1$a=Options$1,lengths_js_1$6=lengths,Styles_js_1$2=Styles$1,StyleList_js_1$1=StyleList,CommonOutputJax=function(t){__extends$1W(r,t);function r(e,n,i){e===void 0&&(e=null),n===void 0&&(n=null),i===void 0&&(i=null);var o=this,a=__read$R((0,Options_js_1$a.separateOptions)(e,i.OPTIONS),2),s=a[0],l=a[1];return o=t.call(this,s)||this,o.factory=o.options.wrapperFactory||new n,o.factory.jax=o,o.cssStyles=o.options.cssStyles||new StyleList_js_1$1.CssStyles,o.font=o.options.font||new i(l),o.unknownCache=new Map,o}return r.prototype.typeset=function(e,n){this.setDocument(n);var i=this.createNode();return this.toDOM(e,i,n),i},r.prototype.createNode=function(){var e=this.constructor.NAME;return this.html("mjx-container",{class:"MathJax",jax:e})},r.prototype.setScale=function(e){var n=this.math.metrics.scale*this.options.scale;n!==1&&this.adaptor.setStyle(e,"fontSize",(0,lengths_js_1$6.percent)(n))},r.prototype.toDOM=function(e,n,i){i===void 0&&(i=null),this.setDocument(i),this.math=e,this.pxPerEm=e.metrics.ex/this.font.params.x_height,e.root.setTeXclass(null),this.setScale(n),this.nodeMap=new Map,this.container=n,this.processMath(e.root,n),this.nodeMap=null,this.executeFilters(this.postFilters,e,i,n)},r.prototype.getBBox=function(e,n){this.setDocument(n),this.math=e,e.root.setTeXclass(null),this.nodeMap=new Map;var i=this.factory.wrap(e.root).getOuterBBox();return this.nodeMap=null,i},r.prototype.getMetrics=function(e){var n,i;this.setDocument(e);var o=this.adaptor,a=this.getMetricMaps(e);try{for(var s=__values$M(e.math),l=s.next();!l.done;l=s.next()){var c=l.value,f=o.parent(c.start.node);if(c.state()<MathItem_js_1$4.STATE.METRICS&&f){var d=a[c.display?1:0],u=d.get(f),m=u.em,p=u.ex,_=u.containerWidth,y=u.lineWidth,g=u.scale,v=u.family;c.setMetrics(m,p,_,y,g),this.options.mtextInheritFont&&(c.outputData.mtextFamily=v),this.options.merrorInheritFont&&(c.outputData.merrorFamily=v),c.state(MathItem_js_1$4.STATE.METRICS)}}}catch(x){n={error:x}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},r.prototype.getMetricsFor=function(e,n){var i=this.options.mtextInheritFont||this.options.merrorInheritFont,o=this.getTestElement(e,n),a=this.measureMetrics(o,i);return this.adaptor.remove(o),a},r.prototype.getMetricMaps=function(e){var n,i,o,a,s,l,c,f,d,u,m=this.adaptor,p=[new Map,new Map];try{for(var _=__values$M(e.math),y=_.next();!y.done;y=_.next()){var g=y.value,v=m.parent(g.start.node);if(v&&g.state()<MathItem_js_1$4.STATE.METRICS){var x=p[g.display?1:0];x.has(v)||x.set(v,this.getTestElement(v,g.display))}}}catch(H){n={error:H}}finally{try{y&&!y.done&&(i=_.return)&&i.call(_)}finally{if(n)throw n.error}}var b=this.options.mtextInheritFont||this.options.merrorInheritFont,S=[new Map,new Map];try{for(var M=__values$M(S.keys()),C=M.next();!C.done;C=M.next()){var A=C.value;try{for(var E=(s=void 0,__values$M(p[A].keys())),$=E.next();!$.done;$=E.next()){var v=$.value;S[A].set(v,this.measureMetrics(p[A].get(v),b))}}catch(H){s={error:H}}finally{try{$&&!$.done&&(l=E.return)&&l.call(E)}finally{if(s)throw s.error}}}}catch(H){o={error:H}}finally{try{C&&!C.done&&(a=M.return)&&a.call(M)}finally{if(o)throw o.error}}try{for(var D=__values$M(S.keys()),B=D.next();!B.done;B=D.next()){var A=B.value;try{for(var F=(d=void 0,__values$M(p[A].values())),I=F.next();!I.done;I=F.next()){var v=I.value;m.remove(v)}}catch(W){d={error:W}}finally{try{I&&!I.done&&(u=F.return)&&u.call(F)}finally{if(d)throw d.error}}}}catch(H){c={error:H}}finally{try{B&&!B.done&&(f=D.return)&&f.call(D)}finally{if(c)throw c.error}}return S},r.prototype.getTestElement=function(e,n){var i=this.adaptor;if(!this.testInline){this.testInline=this.html("mjx-test",{style:{display:"inline-block",width:"100%","font-style":"normal","font-weight":"normal","font-size":"100%","font-size-adjust":"none","text-indent":0,"text-transform":"none","letter-spacing":"normal","word-spacing":"normal",overflow:"hidden",height:"1px","margin-right":"-1px"}},[this.html("mjx-left-box",{style:{display:"inline-block",width:0,float:"left"}}),this.html("mjx-ex-box",{style:{position:"absolute",overflow:"hidden",width:"1px",height:"60ex"}}),this.html("mjx-right-box",{style:{display:"inline-block",width:0,float:"right"}})]),this.testDisplay=i.clone(this.testInline),i.setStyle(this.testDisplay,"display","table"),i.setStyle(this.testDisplay,"margin-right",""),i.setStyle(i.firstChild(this.testDisplay),"display","none");var o=i.lastChild(this.testDisplay);i.setStyle(o,"display","table-cell"),i.setStyle(o,"width","10000em"),i.setStyle(o,"float","")}return i.append(e,i.clone(n?this.testDisplay:this.testInline))},r.prototype.measureMetrics=function(e,n){var i=this.adaptor,o=n?i.fontFamily(e):"",a=i.fontSize(e),s=__read$R(i.nodeSize(i.childNode(e,1)),2),l=s[0],c=s[1],f=l?c/60:a*this.options.exFactor,d=l?i.getStyle(e,"display")==="table"?i.nodeSize(i.lastChild(e))[0]-1:i.nodeBBox(i.lastChild(e)).left-i.nodeBBox(i.firstChild(e)).left-2:1e6,u=Math.max(this.options.minScale,this.options.matchFontHeight?f/this.font.params.x_height/a:1),m=1e6;return{em:a,ex:f,containerWidth:d,lineWidth:m,scale:u,family:o}},r.prototype.styleSheet=function(e){var n,i;if(this.setDocument(e),this.cssStyles.clear(),this.cssStyles.addStyles(this.constructor.commonStyles),"getStyles"in e)try{for(var o=__values$M(e.getStyles()),a=o.next();!a.done;a=o.next()){var s=a.value;this.cssStyles.addStyles(s)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}this.addWrapperStyles(this.cssStyles),this.addFontStyles(this.cssStyles);var l=this.html("style",{id:"MJX-styles"},[this.text(`
`+this.cssStyles.cssText+`
`)]);return l},r.prototype.addFontStyles=function(e){e.addStyles(this.font.styles)},r.prototype.addWrapperStyles=function(e){var n,i;try{for(var o=__values$M(this.factory.getKinds()),a=o.next();!a.done;a=o.next()){var s=a.value;this.addClassStyles(this.factory.getNodeClass(s),e)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},r.prototype.addClassStyles=function(e,n){n.addStyles(e.styles)},r.prototype.setDocument=function(e){e&&(this.document=e,this.adaptor.document=e.document)},r.prototype.html=function(e,n,i,o){return n===void 0&&(n={}),i===void 0&&(i=[]),this.adaptor.node(e,n,i,o)},r.prototype.text=function(e){return this.adaptor.text(e)},r.prototype.fixed=function(e,n){return n===void 0&&(n=3),Math.abs(e)<6e-4?"0":e.toFixed(n).replace(/\.?0+$/,"")},r.prototype.measureText=function(e,n,i){i===void 0&&(i=["",!1,!1]);var o=this.unknownText(e,n);if(n==="-explicitFont"){var a=this.cssFontStyles(i);this.adaptor.setAttributes(o,{style:a})}return this.measureTextNodeWithCache(o,e,n,i)},r.prototype.measureTextNodeWithCache=function(e,n,i,o){o===void 0&&(o=["",!1,!1]),i==="-explicitFont"&&(i=[o[0],o[1]?"T":"F",o[2]?"T":"F",""].join("-")),this.unknownCache.has(i)||this.unknownCache.set(i,new Map);var a=this.unknownCache.get(i),s=a.get(n);if(s)return s;var l=this.measureTextNode(e);return a.set(n,l),l},r.prototype.measureXMLnode=function(e){var n=this.adaptor,i=this.html("mjx-xml-block",{style:{display:"inline-block"}},[n.clone(e)]),o=this.html("mjx-baseline",{style:{display:"inline-block",width:0,height:0}}),a={position:"absolute",display:"inline-block","font-family":"initial","line-height":"normal"},s=this.html("mjx-measure-xml",{style:a},[o,i]);n.append(n.parent(this.math.start.node),this.container),n.append(this.container,s);var l=this.math.metrics.em*this.math.metrics.scale,c=n.nodeBBox(i),f=c.left,d=c.right,u=c.bottom,m=c.top,p=(d-f)/l,_=(n.nodeBBox(o).top-m)/l,y=(u-m)/l-_;return n.remove(this.container),n.remove(s),{w:p,h:_,d:y}},r.prototype.cssFontStyles=function(e,n){n===void 0&&(n={});var i=__read$R(e,3),o=i[0],a=i[1],s=i[2];return n["font-family"]=this.font.getFamily(o),a&&(n["font-style"]="italic"),s&&(n["font-weight"]="bold"),n},r.prototype.getFontData=function(e){return e||(e=new Styles_js_1$2.Styles),[this.font.getFamily(e.get("font-family")),e.get("font-style")==="italic",e.get("font-weight")==="bold"]},r.NAME="Common",r.OPTIONS=__assign$J(__assign$J({},OutputJax_js_1$1.AbstractOutputJax.OPTIONS),{scale:1,minScale:.5,mtextInheritFont:!1,merrorInheritFont:!1,mtextFont:"",merrorFont:"serif",mathmlSpacing:!1,skipAttributes:{},exFactor:.5,displayAlign:"center",displayIndent:"0",wrapperFactory:null,font:null,cssStyles:null}),r.commonStyles={},r}(OutputJax_js_1$1.AbstractOutputJax);OutputJax$1.CommonOutputJax=CommonOutputJax;var WrapperFactory$2={},WrapperFactory$1={},WrapperFactory={},Factory={},__values$L=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$Q=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$w=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(Factory,"__esModule",{value:!0});Factory.AbstractFactory=void 0;var AbstractFactory=function(){function t(r){var e,n;r===void 0&&(r=null),this.defaultKind="unknown",this.nodeMap=new Map,this.node={},r===null&&(r=this.constructor.defaultNodes);try{for(var i=__values$L(Object.keys(r)),o=i.next();!o.done;o=i.next()){var a=o.value;this.setNodeClass(a,r[a])}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}return t.prototype.create=function(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return(this.node[r]||this.node[this.defaultKind]).apply(void 0,__spreadArray$w([],__read$Q(e),!1))},t.prototype.setNodeClass=function(r,e){this.nodeMap.set(r,e);var n=this,i=this.nodeMap.get(r);this.node[r]=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return new(i.bind.apply(i,__spreadArray$w([void 0,n],__read$Q(o),!1)))}},t.prototype.getNodeClass=function(r){return this.nodeMap.get(r)},t.prototype.deleteNodeClass=function(r){this.nodeMap.delete(r),delete this.node[r]},t.prototype.nodeIsKind=function(r,e){return r instanceof this.getNodeClass(e)},t.prototype.getKinds=function(){return Array.from(this.nodeMap.keys())},t.defaultNodes={},t}();Factory.AbstractFactory=AbstractFactory;var __extends$1V=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$P=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$v=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(WrapperFactory,"__esModule",{value:!0});WrapperFactory.AbstractWrapperFactory=void 0;var Factory_js_1$2=Factory,AbstractWrapperFactory=function(t){__extends$1V(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.wrap=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return this.create.apply(this,__spreadArray$v([e.kind,e],__read$P(n),!1))},r}(Factory_js_1$2.AbstractFactory);WrapperFactory.AbstractWrapperFactory=AbstractWrapperFactory;var __extends$1U=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(WrapperFactory$1,"__esModule",{value:!0});WrapperFactory$1.CommonWrapperFactory=void 0;var WrapperFactory_js_1$2=WrapperFactory,CommonWrapperFactory=function(t){__extends$1U(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.jax=null,e}return Object.defineProperty(r.prototype,"Wrappers",{get:function(){return this.node},enumerable:!1,configurable:!0}),r.defaultNodes={},r}(WrapperFactory_js_1$2.AbstractWrapperFactory);WrapperFactory$1.CommonWrapperFactory=CommonWrapperFactory;var Wrappers={},Wrapper$2={},Wrapper$1={},Wrapper={};Object.defineProperty(Wrapper,"__esModule",{value:!0});Wrapper.AbstractWrapper=void 0;var AbstractWrapper=function(){function t(r,e){this.factory=r,this.node=e}return Object.defineProperty(t.prototype,"kind",{get:function(){return this.node.kind},enumerable:!1,configurable:!0}),t.prototype.wrap=function(r){return this.factory.wrap(r)},t}();Wrapper.AbstractWrapper=AbstractWrapper;var MmlNode={},Attributes={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__values||function(n){var i=typeof Symbol=="function"&&Symbol.iterator,o=i&&n[i],a=0;if(o)return o.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.Attributes=t.INHERIT=void 0,t.INHERIT="_inherit_";var e=function(){function n(i,o){this.global=o,this.defaults=Object.create(o),this.inherited=Object.create(this.defaults),this.attributes=Object.create(this.inherited),Object.assign(this.defaults,i)}return n.prototype.set=function(i,o){this.attributes[i]=o},n.prototype.setList=function(i){Object.assign(this.attributes,i)},n.prototype.get=function(i){var o=this.attributes[i];return o===t.INHERIT&&(o=this.global[i]),o},n.prototype.getExplicit=function(i){if(this.attributes.hasOwnProperty(i))return this.attributes[i]},n.prototype.getList=function(){for(var i,o,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var l={};try{for(var c=r(a),f=c.next();!f.done;f=c.next()){var d=f.value;l[d]=this.get(d)}}catch(u){i={error:u}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return l},n.prototype.setInherited=function(i,o){this.inherited[i]=o},n.prototype.getInherited=function(i){return this.inherited[i]},n.prototype.getDefault=function(i){return this.defaults[i]},n.prototype.isSet=function(i){return this.attributes.hasOwnProperty(i)||this.inherited.hasOwnProperty(i)},n.prototype.hasDefault=function(i){return i in this.defaults},n.prototype.getExplicitNames=function(){return Object.keys(this.attributes)},n.prototype.getInheritedNames=function(){return Object.keys(this.inherited)},n.prototype.getDefaultNames=function(){return Object.keys(this.defaults)},n.prototype.getGlobalNames=function(){return Object.keys(this.global)},n.prototype.getAllAttributes=function(){return this.attributes},n.prototype.getAllInherited=function(){return this.inherited},n.prototype.getAllDefaults=function(){return this.defaults},n.prototype.getAllGlobals=function(){return this.global},n}();t.Attributes=e})(Attributes);var Node$1={},__extends$1T=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$I=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$I=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$I.apply(this,arguments)},__values$K=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Node$1,"__esModule",{value:!0});Node$1.AbstractEmptyNode=Node$1.AbstractNode=void 0;var AbstractNode=function(){function t(r,e,n){var i,o;e===void 0&&(e={}),n===void 0&&(n=[]),this.factory=r,this.parent=null,this.properties={},this.childNodes=[];try{for(var a=__values$K(Object.keys(e)),s=a.next();!s.done;s=a.next()){var l=s.value;this.setProperty(l,e[l])}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}n.length&&this.setChildren(n)}return Object.defineProperty(t.prototype,"kind",{get:function(){return"unknown"},enumerable:!1,configurable:!0}),t.prototype.setProperty=function(r,e){this.properties[r]=e},t.prototype.getProperty=function(r){return this.properties[r]},t.prototype.getPropertyNames=function(){return Object.keys(this.properties)},t.prototype.getAllProperties=function(){return this.properties},t.prototype.removeProperty=function(){for(var r,e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{for(var o=__values$K(n),a=o.next();!a.done;a=o.next()){var s=a.value;delete this.properties[s]}}catch(l){r={error:l}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}},t.prototype.isKind=function(r){return this.factory.nodeIsKind(this,r)},t.prototype.setChildren=function(r){var e,n;this.childNodes=[];try{for(var i=__values$K(r),o=i.next();!o.done;o=i.next()){var a=o.value;this.appendChild(a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.appendChild=function(r){return this.childNodes.push(r),r.parent=this,r},t.prototype.replaceChild=function(r,e){var n=this.childIndex(e);return n!==null&&(this.childNodes[n]=r,r.parent=this,e.parent=null),r},t.prototype.removeChild=function(r){var e=this.childIndex(r);return e!==null&&(this.childNodes.splice(e,1),r.parent=null),r},t.prototype.childIndex=function(r){var e=this.childNodes.indexOf(r);return e===-1?null:e},t.prototype.copy=function(){var r,e,n=this.factory.create(this.kind);n.properties=__assign$I({},this.properties);try{for(var i=__values$K(this.childNodes||[]),o=i.next();!o.done;o=i.next()){var a=o.value;a&&n.appendChild(a.copy())}}catch(s){r={error:s}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(r)throw r.error}}return n},t.prototype.findNodes=function(r){var e=[];return this.walkTree(function(n){n.isKind(r)&&e.push(n)}),e},t.prototype.walkTree=function(r,e){var n,i;r(this,e);try{for(var o=__values$K(this.childNodes),a=o.next();!a.done;a=o.next()){var s=a.value;s&&s.walkTree(r,e)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return e},t.prototype.toString=function(){return this.kind+"("+this.childNodes.join(",")+")"},t}();Node$1.AbstractNode=AbstractNode;var AbstractEmptyNode=function(t){__extends$1T(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.setChildren=function(e){},r.prototype.appendChild=function(e){return e},r.prototype.replaceChild=function(e,n){return n},r.prototype.childIndex=function(e){return null},r.prototype.walkTree=function(e,n){return e(this,n),n},r.prototype.toString=function(){return this.kind},r}(AbstractNode);Node$1.AbstractEmptyNode=AbstractEmptyNode;(function(t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var y=function(g,v){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,b){x.__proto__=b}||function(x,b){for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(x[S]=b[S])},y(g,v)};return function(g,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");y(g,v);function x(){this.constructor=g}g.prototype=v===null?Object.create(v):(x.prototype=v.prototype,new x)}}(),e=commonjsGlobal&&commonjsGlobal.__assign||function(){return e=Object.assign||function(y){for(var g,v=1,x=arguments.length;v<x;v++){g=arguments[v];for(var b in g)Object.prototype.hasOwnProperty.call(g,b)&&(y[b]=g[b])}return y},e.apply(this,arguments)},n=commonjsGlobal&&commonjsGlobal.__values||function(y){var g=typeof Symbol=="function"&&Symbol.iterator,v=g&&y[g],x=0;if(v)return v.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&x>=y.length&&(y=void 0),{value:y&&y[x++],done:!y}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},i=commonjsGlobal&&commonjsGlobal.__read||function(y,g){var v=typeof Symbol=="function"&&y[Symbol.iterator];if(!v)return y;var x=v.call(y),b,S=[],M;try{for(;(g===void 0||g-- >0)&&!(b=x.next()).done;)S.push(b.value)}catch(C){M={error:C}}finally{try{b&&!b.done&&(v=x.return)&&v.call(x)}finally{if(M)throw M.error}}return S};Object.defineProperty(t,"__esModule",{value:!0}),t.XMLNode=t.TextNode=t.AbstractMmlEmptyNode=t.AbstractMmlBaseNode=t.AbstractMmlLayoutNode=t.AbstractMmlTokenNode=t.AbstractMmlNode=t.indentAttributes=t.TEXCLASSNAMES=t.TEXCLASS=void 0;var o=Attributes,a=Node$1;t.TEXCLASS={ORD:0,OP:1,BIN:2,REL:3,OPEN:4,CLOSE:5,PUNCT:6,INNER:7,VCENTER:8,NONE:-1},t.TEXCLASSNAMES=["ORD","OP","BIN","REL","OPEN","CLOSE","PUNCT","INNER","VCENTER"];var s=["","thinmathspace","mediummathspace","thickmathspace"],l=[[0,-1,2,3,0,0,0,1],[-1,-1,0,3,0,0,0,1],[2,2,0,0,2,0,0,2],[3,3,0,0,3,0,0,3],[0,0,0,0,0,0,0,0],[0,-1,2,3,0,0,0,1],[1,1,0,1,1,1,1,1],[1,-1,2,3,1,0,1,1]];t.indentAttributes=["indentalign","indentalignfirst","indentshift","indentshiftfirst"];var c=function(y){r(g,y);function g(v,x,b){x===void 0&&(x={}),b===void 0&&(b=[]);var S=y.call(this,v)||this;return S.prevClass=null,S.prevLevel=null,S.texclass=null,S.arity<0&&(S.childNodes=[v.create("inferredMrow")],S.childNodes[0].parent=S),S.setChildren(b),S.attributes=new o.Attributes(v.getNodeClass(S.kind).defaults,v.getNodeClass("math").defaults),S.attributes.setList(x),S}return g.prototype.copy=function(v){var x,b,S,M;v===void 0&&(v=!1);var C=this.factory.create(this.kind);if(C.properties=e({},this.properties),this.attributes){var A=this.attributes.getAllAttributes();try{for(var E=n(Object.keys(A)),$=E.next();!$.done;$=E.next()){var D=$.value;(D!=="id"||v)&&C.attributes.set(D,A[D])}}catch(W){x={error:W}}finally{try{$&&!$.done&&(b=E.return)&&b.call(E)}finally{if(x)throw x.error}}}if(this.childNodes&&this.childNodes.length){var B=this.childNodes;B.length===1&&B[0].isInferred&&(B=B[0].childNodes);try{for(var F=n(B),I=F.next();!I.done;I=F.next()){var H=I.value;H?C.appendChild(H.copy()):C.childNodes.push(null)}}catch(W){S={error:W}}finally{try{I&&!I.done&&(M=F.return)&&M.call(F)}finally{if(S)throw S.error}}}return C},Object.defineProperty(g.prototype,"texClass",{get:function(){return this.texclass},set:function(v){this.texclass=v},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"isToken",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"isEmbellished",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"isSpacelike",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"linebreakContainer",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"hasNewLine",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"arity",{get:function(){return 1/0},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"isInferred",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"Parent",{get:function(){for(var v=this.parent;v&&v.notParent;)v=v.Parent;return v},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"notParent",{get:function(){return!1},enumerable:!1,configurable:!0}),g.prototype.setChildren=function(v){return this.arity<0?this.childNodes[0].setChildren(v):y.prototype.setChildren.call(this,v)},g.prototype.appendChild=function(v){var x,b,S=this;if(this.arity<0)return this.childNodes[0].appendChild(v),v;if(v.isInferred){if(this.arity===1/0)return v.childNodes.forEach(function($){return y.prototype.appendChild.call(S,$)}),v;var M=v;v=this.factory.create("mrow"),v.setChildren(M.childNodes),v.attributes=M.attributes;try{for(var C=n(M.getPropertyNames()),A=C.next();!A.done;A=C.next()){var E=A.value;v.setProperty(E,M.getProperty(E))}}catch($){x={error:$}}finally{try{A&&!A.done&&(b=C.return)&&b.call(C)}finally{if(x)throw x.error}}}return y.prototype.appendChild.call(this,v)},g.prototype.replaceChild=function(v,x){return this.arity<0?(this.childNodes[0].replaceChild(v,x),v):y.prototype.replaceChild.call(this,v,x)},g.prototype.core=function(){return this},g.prototype.coreMO=function(){return this},g.prototype.coreIndex=function(){return 0},g.prototype.childPosition=function(){for(var v,x,b=this,S=b.parent;S&&S.notParent;)b=S,S=S.parent;if(S){var M=0;try{for(var C=n(S.childNodes),A=C.next();!A.done;A=C.next()){var E=A.value;if(E===b)return M;M++}}catch($){v={error:$}}finally{try{A&&!A.done&&(x=C.return)&&x.call(C)}finally{if(v)throw v.error}}}return null},g.prototype.setTeXclass=function(v){return this.getPrevClass(v),this.texClass!=null?this:v},g.prototype.updateTeXclass=function(v){v&&(this.prevClass=v.prevClass,this.prevLevel=v.prevLevel,v.prevClass=v.prevLevel=null,this.texClass=v.texClass)},g.prototype.getPrevClass=function(v){v&&(this.prevClass=v.texClass,this.prevLevel=v.attributes.get("scriptlevel"))},g.prototype.texSpacing=function(){var v=this.prevClass!=null?this.prevClass:t.TEXCLASS.NONE,x=this.texClass||t.TEXCLASS.ORD;if(v===t.TEXCLASS.NONE||x===t.TEXCLASS.NONE)return"";v===t.TEXCLASS.VCENTER&&(v=t.TEXCLASS.ORD),x===t.TEXCLASS.VCENTER&&(x=t.TEXCLASS.ORD);var b=l[v][x];return(this.prevLevel>0||this.attributes.get("scriptlevel")>0)&&b>=0?"":s[Math.abs(b)]},g.prototype.hasSpacingAttributes=function(){return this.isEmbellished&&this.coreMO().hasSpacingAttributes()},g.prototype.setInheritedAttributes=function(v,x,b,S){var M,C;v===void 0&&(v={}),x===void 0&&(x=!1),b===void 0&&(b=0),S===void 0&&(S=!1);var A=this.attributes.getAllDefaults();try{for(var E=n(Object.keys(v)),$=E.next();!$.done;$=E.next()){var D=$.value;if(A.hasOwnProperty(D)||g.alwaysInherit.hasOwnProperty(D)){var B=i(v[D],2),F=B[0],I=B[1],H=(g.noInherit[F]||{})[this.kind]||{};H[D]||this.attributes.setInherited(D,I)}}}catch(lt){M={error:lt}}finally{try{$&&!$.done&&(C=E.return)&&C.call(E)}finally{if(M)throw M.error}}var W=this.attributes.getExplicit("displaystyle");W===void 0&&this.attributes.setInherited("displaystyle",x);var Z=this.attributes.getExplicit("scriptlevel");Z===void 0&&this.attributes.setInherited("scriptlevel",b),S&&this.setProperty("texprimestyle",S);var et=this.arity;if(et>=0&&et!==1/0&&(et===1&&this.childNodes.length===0||et!==1&&this.childNodes.length!==et))if(et<this.childNodes.length)this.childNodes=this.childNodes.slice(0,et);else for(;this.childNodes.length<et;)this.appendChild(this.factory.create("mrow"));this.setChildInheritedAttributes(v,x,b,S)},g.prototype.setChildInheritedAttributes=function(v,x,b,S){var M,C;try{for(var A=n(this.childNodes),E=A.next();!E.done;E=A.next()){var $=E.value;$.setInheritedAttributes(v,x,b,S)}}catch(D){M={error:D}}finally{try{E&&!E.done&&(C=A.return)&&C.call(A)}finally{if(M)throw M.error}}},g.prototype.addInheritedAttributes=function(v,x){var b,S,M=e({},v);try{for(var C=n(Object.keys(x)),A=C.next();!A.done;A=C.next()){var E=A.value;E!=="displaystyle"&&E!=="scriptlevel"&&E!=="style"&&(M[E]=[this.kind,x[E]])}}catch($){b={error:$}}finally{try{A&&!A.done&&(S=C.return)&&S.call(C)}finally{if(b)throw b.error}}return M},g.prototype.inheritAttributesFrom=function(v){var x=v.attributes,b=x.get("displaystyle"),S=x.get("scriptlevel"),M=x.isSet("mathsize")?{mathsize:["math",x.get("mathsize")]}:{},C=v.getProperty("texprimestyle")||!1;this.setInheritedAttributes(M,b,S,C)},g.prototype.verifyTree=function(v){if(v===void 0&&(v=null),v!==null){this.verifyAttributes(v);var x=this.arity;v.checkArity&&x>=0&&x!==1/0&&(x===1&&this.childNodes.length===0||x!==1&&this.childNodes.length!==x)&&this.mError('Wrong number of children for "'+this.kind+'" node',v,!0),this.verifyChildren(v)}},g.prototype.verifyAttributes=function(v){var x,b;if(v.checkAttributes){var S=this.attributes,M=[];try{for(var C=n(S.getExplicitNames()),A=C.next();!A.done;A=C.next()){var E=A.value;E.substr(0,5)!=="data-"&&S.getDefault(E)===void 0&&!E.match(/^(?:class|style|id|(?:xlink:)?href)$/)&&M.push(E)}}catch($){x={error:$}}finally{try{A&&!A.done&&(b=C.return)&&b.call(C)}finally{if(x)throw x.error}}M.length&&this.mError("Unknown attributes for "+this.kind+" node: "+M.join(", "),v)}},g.prototype.verifyChildren=function(v){var x,b;try{for(var S=n(this.childNodes),M=S.next();!M.done;M=S.next()){var C=M.value;C.verifyTree(v)}}catch(A){x={error:A}}finally{try{M&&!M.done&&(b=S.return)&&b.call(S)}finally{if(x)throw x.error}}},g.prototype.mError=function(v,x,b){if(b===void 0&&(b=!1),this.parent&&this.parent.isKind("merror"))return null;var S=this.factory.create("merror");if(S.attributes.set("data-mjx-message",v),x.fullErrors||b){var M=this.factory.create("mtext"),C=this.factory.create("text");C.setText(x.fullErrors?v:this.kind),M.appendChild(C),S.appendChild(M),this.parent.replaceChild(S,this)}else this.parent.replaceChild(S,this),S.appendChild(this);return S},g.defaults={mathbackground:o.INHERIT,mathcolor:o.INHERIT,mathsize:o.INHERIT,dir:o.INHERIT},g.noInherit={mstyle:{mpadded:{width:!0,height:!0,depth:!0,lspace:!0,voffset:!0},mtable:{width:!0,height:!0,depth:!0,align:!0}},maligngroup:{mrow:{groupalign:!0},mtable:{groupalign:!0}}},g.alwaysInherit={scriptminsize:!0,scriptsizemultiplier:!0},g.verifyDefaults={checkArity:!0,checkAttributes:!1,fullErrors:!1,fixMmultiscripts:!0,fixMtables:!0},g}(a.AbstractNode);t.AbstractMmlNode=c;var f=function(y){r(g,y);function g(){return y!==null&&y.apply(this,arguments)||this}return Object.defineProperty(g.prototype,"isToken",{get:function(){return!0},enumerable:!1,configurable:!0}),g.prototype.getText=function(){var v,x,b="";try{for(var S=n(this.childNodes),M=S.next();!M.done;M=S.next()){var C=M.value;C instanceof p&&(b+=C.getText())}}catch(A){v={error:A}}finally{try{M&&!M.done&&(x=S.return)&&x.call(S)}finally{if(v)throw v.error}}return b},g.prototype.setChildInheritedAttributes=function(v,x,b,S){var M,C;try{for(var A=n(this.childNodes),E=A.next();!E.done;E=A.next()){var $=E.value;$ instanceof c&&$.setInheritedAttributes(v,x,b,S)}}catch(D){M={error:D}}finally{try{E&&!E.done&&(C=A.return)&&C.call(A)}finally{if(M)throw M.error}}},g.prototype.walkTree=function(v,x){var b,S;v(this,x);try{for(var M=n(this.childNodes),C=M.next();!C.done;C=M.next()){var A=C.value;A instanceof c&&A.walkTree(v,x)}}catch(E){b={error:E}}finally{try{C&&!C.done&&(S=M.return)&&S.call(M)}finally{if(b)throw b.error}}return x},g.defaults=e(e({},c.defaults),{mathvariant:"normal",mathsize:o.INHERIT}),g}(c);t.AbstractMmlTokenNode=f;var d=function(y){r(g,y);function g(){return y!==null&&y.apply(this,arguments)||this}return Object.defineProperty(g.prototype,"isSpacelike",{get:function(){return this.childNodes[0].isSpacelike},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"isEmbellished",{get:function(){return this.childNodes[0].isEmbellished},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"arity",{get:function(){return-1},enumerable:!1,configurable:!0}),g.prototype.core=function(){return this.childNodes[0]},g.prototype.coreMO=function(){return this.childNodes[0].coreMO()},g.prototype.setTeXclass=function(v){return v=this.childNodes[0].setTeXclass(v),this.updateTeXclass(this.childNodes[0]),v},g.defaults=c.defaults,g}(c);t.AbstractMmlLayoutNode=d;var u=function(y){r(g,y);function g(){return y!==null&&y.apply(this,arguments)||this}return Object.defineProperty(g.prototype,"isEmbellished",{get:function(){return this.childNodes[0].isEmbellished},enumerable:!1,configurable:!0}),g.prototype.core=function(){return this.childNodes[0]},g.prototype.coreMO=function(){return this.childNodes[0].coreMO()},g.prototype.setTeXclass=function(v){var x,b;this.getPrevClass(v),this.texClass=t.TEXCLASS.ORD;var S=this.childNodes[0];S?this.isEmbellished||S.isKind("mi")?(v=S.setTeXclass(v),this.updateTeXclass(this.core())):(S.setTeXclass(null),v=this):v=this;try{for(var M=n(this.childNodes.slice(1)),C=M.next();!C.done;C=M.next()){var A=C.value;A&&A.setTeXclass(null)}}catch(E){x={error:E}}finally{try{C&&!C.done&&(b=M.return)&&b.call(M)}finally{if(x)throw x.error}}return v},g.defaults=c.defaults,g}(c);t.AbstractMmlBaseNode=u;var m=function(y){r(g,y);function g(){return y!==null&&y.apply(this,arguments)||this}return Object.defineProperty(g.prototype,"isToken",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"isEmbellished",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"isSpacelike",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"linebreakContainer",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"hasNewLine",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"arity",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"isInferred",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"notParent",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"Parent",{get:function(){return this.parent},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"texClass",{get:function(){return t.TEXCLASS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"prevClass",{get:function(){return t.TEXCLASS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"prevLevel",{get:function(){return 0},enumerable:!1,configurable:!0}),g.prototype.hasSpacingAttributes=function(){return!1},Object.defineProperty(g.prototype,"attributes",{get:function(){return null},enumerable:!1,configurable:!0}),g.prototype.core=function(){return this},g.prototype.coreMO=function(){return this},g.prototype.coreIndex=function(){return 0},g.prototype.childPosition=function(){return 0},g.prototype.setTeXclass=function(v){return v},g.prototype.texSpacing=function(){return""},g.prototype.setInheritedAttributes=function(v,x,b,S){},g.prototype.inheritAttributesFrom=function(v){},g.prototype.verifyTree=function(v){},g.prototype.mError=function(v,x,b){return null},g}(a.AbstractEmptyNode);t.AbstractMmlEmptyNode=m;var p=function(y){r(g,y);function g(){var v=y!==null&&y.apply(this,arguments)||this;return v.text="",v}return Object.defineProperty(g.prototype,"kind",{get:function(){return"text"},enumerable:!1,configurable:!0}),g.prototype.getText=function(){return this.text},g.prototype.setText=function(v){return this.text=v,this},g.prototype.copy=function(){return this.factory.create(this.kind).setText(this.getText())},g.prototype.toString=function(){return this.text},g}(m);t.TextNode=p;var _=function(y){r(g,y);function g(){var v=y!==null&&y.apply(this,arguments)||this;return v.xml=null,v.adaptor=null,v}return Object.defineProperty(g.prototype,"kind",{get:function(){return"XML"},enumerable:!1,configurable:!0}),g.prototype.getXML=function(){return this.xml},g.prototype.setXML=function(v,x){return x===void 0&&(x=null),this.xml=v,this.adaptor=x,this},g.prototype.getSerializedXML=function(){return this.adaptor.serializeXML(this.xml)},g.prototype.copy=function(){return this.factory.create(this.kind).setXML(this.adaptor.clone(this.xml))},g.prototype.toString=function(){return"XML data"},g}(m);t.XMLNode=_})(MmlNode);var string={},__read$O=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$u=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(string,"__esModule",{value:!0});string.split=string.isPercent=string.unicodeString=string.unicodeChars=string.quotePattern=string.sortLength=void 0;function sortLength(t,r){return t.length!==r.length?r.length-t.length:t===r?0:t<r?-1:1}string.sortLength=sortLength;function quotePattern(t){return t.replace(/([\^$(){}+*?\-|\[\]\:\\])/g,"\\$1")}string.quotePattern=quotePattern;function unicodeChars(t){return Array.from(t).map(function(r){return r.codePointAt(0)})}string.unicodeChars=unicodeChars;function unicodeString(t){return String.fromCodePoint.apply(String,__spreadArray$u([],__read$O(t),!1))}string.unicodeString=unicodeString;function isPercent(t){return!!t.match(/%\s*$/)}string.isPercent=isPercent;function split(t){return t.trim().split(/\s+/)}string.split=split;var BBox$1={};Object.defineProperty(BBox$1,"__esModule",{value:!0});BBox$1.BBox=void 0;var lengths_js_1$5=lengths,BBox=function(){function t(r){r===void 0&&(r={w:0,h:-lengths_js_1$5.BIGDIMEN,d:-lengths_js_1$5.BIGDIMEN}),this.w=r.w||0,this.h="h"in r?r.h:-lengths_js_1$5.BIGDIMEN,this.d="d"in r?r.d:-lengths_js_1$5.BIGDIMEN,this.L=this.R=this.ic=this.sk=this.dx=0,this.scale=this.rscale=1,this.pwidth=""}return t.zero=function(){return new t({h:0,d:0,w:0})},t.empty=function(){return new t},t.prototype.empty=function(){return this.w=0,this.h=this.d=-lengths_js_1$5.BIGDIMEN,this},t.prototype.clean=function(){this.w===-lengths_js_1$5.BIGDIMEN&&(this.w=0),this.h===-lengths_js_1$5.BIGDIMEN&&(this.h=0),this.d===-lengths_js_1$5.BIGDIMEN&&(this.d=0)},t.prototype.rescale=function(r){this.w*=r,this.h*=r,this.d*=r},t.prototype.combine=function(r,e,n){e===void 0&&(e=0),n===void 0&&(n=0);var i=r.rscale,o=e+i*(r.w+r.L+r.R),a=n+i*r.h,s=i*r.d-n;o>this.w&&(this.w=o),a>this.h&&(this.h=a),s>this.d&&(this.d=s)},t.prototype.append=function(r){var e=r.rscale;this.w+=e*(r.w+r.L+r.R),e*r.h>this.h&&(this.h=e*r.h),e*r.d>this.d&&(this.d=e*r.d)},t.prototype.updateFrom=function(r){this.h=r.h,this.d=r.d,this.w=r.w,r.pwidth&&(this.pwidth=r.pwidth)},t.fullWidth="100%",t.StyleAdjust=[["borderTopWidth","h"],["borderRightWidth","w"],["borderBottomWidth","d"],["borderLeftWidth","w",0],["paddingTop","h"],["paddingRight","w"],["paddingBottom","d"],["paddingLeft","w",0]],t}();BBox$1.BBox=BBox;var FontData$2={},__assign$H=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$H=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$H.apply(this,arguments)},__read$N=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$t=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__values$J=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(FontData$2,"__esModule",{value:!0});FontData$2.FontData=FontData$2.NOSTRETCH=FontData$2.H=FontData$2.V=void 0;var Options_js_1$9=Options$1;FontData$2.V=1;FontData$2.H=2;FontData$2.NOSTRETCH={dir:0};var FontData$1=function(){function t(r){var e,n,i,o;r===void 0&&(r=null),this.variant={},this.delimiters={},this.cssFontMap={},this.remapChars={},this.skewIcFactor=.75;var a=this.constructor;this.options=(0,Options_js_1$9.userOptions)((0,Options_js_1$9.defaultOptions)({},a.OPTIONS),r),this.params=__assign$H({},a.defaultParams),this.sizeVariants=__spreadArray$t([],__read$N(a.defaultSizeVariants),!1),this.stretchVariants=__spreadArray$t([],__read$N(a.defaultStretchVariants),!1),this.cssFontMap=__assign$H({},a.defaultCssFonts);try{for(var s=__values$J(Object.keys(this.cssFontMap)),l=s.next();!l.done;l=s.next()){var c=l.value;this.cssFontMap[c][0]==="unknown"&&(this.cssFontMap[c][0]=this.options.unknownFamily)}}catch(m){e={error:m}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}this.cssFamilyPrefix=a.defaultCssFamilyPrefix,this.createVariants(a.defaultVariants),this.defineDelimiters(a.defaultDelimiters);try{for(var f=__values$J(Object.keys(a.defaultChars)),d=f.next();!d.done;d=f.next()){var u=d.value;this.defineChars(u,a.defaultChars[u])}}catch(m){i={error:m}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}this.defineRemap("accent",a.defaultAccentMap),this.defineRemap("mo",a.defaultMoMap),this.defineRemap("mn",a.defaultMnMap)}return t.charOptions=function(r,e){var n=r[e];return n.length===3&&(n[3]={}),n[3]},Object.defineProperty(t.prototype,"styles",{get:function(){return this._styles},set:function(r){this._styles=r},enumerable:!1,configurable:!0}),t.prototype.createVariant=function(r,e,n){e===void 0&&(e=null),n===void 0&&(n=null);var i={linked:[],chars:e?Object.create(this.variant[e].chars):{}};n&&this.variant[n]&&(Object.assign(i.chars,this.variant[n].chars),this.variant[n].linked.push(i.chars),i.chars=Object.create(i.chars)),this.remapSmpChars(i.chars,r),this.variant[r]=i},t.prototype.remapSmpChars=function(r,e){var n,i,o,a,s=this.constructor;if(s.VariantSmp[e]){var l=s.SmpRemap,c=[null,null,s.SmpRemapGreekU,s.SmpRemapGreekL];try{for(var f=__values$J(s.SmpRanges),d=f.next();!d.done;d=f.next()){var u=__read$N(d.value,3),m=u[0],p=u[1],_=u[2],y=s.VariantSmp[e][m];if(y){for(var g=p;g<=_;g++)if(g!==930){var v=y+g-p;r[g]=this.smpChar(l[v]||v)}if(c[m])try{for(var x=(o=void 0,__values$J(Object.keys(c[m]).map(function(S){return parseInt(S)}))),b=x.next();!b.done;b=x.next()){var g=b.value;r[g]=this.smpChar(y+c[m][g])}}catch(S){o={error:S}}finally{try{b&&!b.done&&(a=x.return)&&a.call(x)}finally{if(o)throw o.error}}}}}catch(S){n={error:S}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}}e==="bold"&&(r[988]=this.smpChar(120778),r[989]=this.smpChar(120779))},t.prototype.smpChar=function(r){return[,,,{smp:r}]},t.prototype.createVariants=function(r){var e,n;try{for(var i=__values$J(r),o=i.next();!o.done;o=i.next()){var a=o.value;this.createVariant(a[0],a[1],a[2])}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.defineChars=function(r,e){var n,i,o=this.variant[r];Object.assign(o.chars,e);try{for(var a=__values$J(o.linked),s=a.next();!s.done;s=a.next()){var l=s.value;Object.assign(l,e)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.defineDelimiters=function(r){Object.assign(this.delimiters,r)},t.prototype.defineRemap=function(r,e){this.remapChars.hasOwnProperty(r)||(this.remapChars[r]={}),Object.assign(this.remapChars[r],e)},t.prototype.getDelimiter=function(r){return this.delimiters[r]},t.prototype.getSizeVariant=function(r,e){return this.delimiters[r].variants&&(e=this.delimiters[r].variants[e]),this.sizeVariants[e]},t.prototype.getStretchVariant=function(r,e){return this.stretchVariants[this.delimiters[r].stretchv?this.delimiters[r].stretchv[e]:0]},t.prototype.getChar=function(r,e){return this.variant[r].chars[e]},t.prototype.getVariant=function(r){return this.variant[r]},t.prototype.getCssFont=function(r){return this.cssFontMap[r]||["serif",!1,!1]},t.prototype.getFamily=function(r){return this.cssFamilyPrefix?this.cssFamilyPrefix+", "+r:r},t.prototype.getRemappedChar=function(r,e){var n=this.remapChars[r]||{};return n[e]},t.OPTIONS={unknownFamily:"serif"},t.JAX="common",t.NAME="",t.defaultVariants=[["normal"],["bold","normal"],["italic","normal"],["bold-italic","italic","bold"],["double-struck","bold"],["fraktur","normal"],["bold-fraktur","bold","fraktur"],["script","italic"],["bold-script","bold-italic","script"],["sans-serif","normal"],["bold-sans-serif","bold","sans-serif"],["sans-serif-italic","italic","sans-serif"],["sans-serif-bold-italic","bold-italic","bold-sans-serif"],["monospace","normal"]],t.defaultCssFonts={normal:["unknown",!1,!1],bold:["unknown",!1,!0],italic:["unknown",!0,!1],"bold-italic":["unknown",!0,!0],"double-struck":["unknown",!1,!0],fraktur:["unknown",!1,!1],"bold-fraktur":["unknown",!1,!0],script:["cursive",!1,!1],"bold-script":["cursive",!1,!0],"sans-serif":["sans-serif",!1,!1],"bold-sans-serif":["sans-serif",!1,!0],"sans-serif-italic":["sans-serif",!0,!1],"sans-serif-bold-italic":["sans-serif",!0,!0],monospace:["monospace",!1,!1]},t.defaultCssFamilyPrefix="",t.VariantSmp={bold:[119808,119834,120488,120514,120782],italic:[119860,119886,120546,120572],"bold-italic":[119912,119938,120604,120630],script:[119964,119990],"bold-script":[120016,120042],fraktur:[120068,120094],"double-struck":[120120,120146,,,120792],"bold-fraktur":[120172,120198],"sans-serif":[120224,120250,,,120802],"bold-sans-serif":[120276,120302,120662,120688,120812],"sans-serif-italic":[120328,120354],"sans-serif-bold-italic":[120380,120406,120720,120746],monospace:[120432,120458,,,120822]},t.SmpRanges=[[0,65,90],[1,97,122],[2,913,937],[3,945,969],[4,48,57]],t.SmpRemap={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},t.SmpRemapGreekU={8711:25,1012:17},t.SmpRemapGreekL={977:27,981:29,982:31,1008:28,1009:30,1013:26,8706:25},t.defaultAccentMap={768:"ˋ",769:"ˊ",770:"ˆ",771:"˜",772:"ˉ",774:"˘",775:"˙",776:"¨",778:"˚",780:"ˇ",8594:"⃗",8242:"'",8243:"''",8244:"'''",8245:"`",8246:"``",8247:"```",8279:"''''",8400:"↼",8401:"⇀",8406:"←",8417:"↔",8432:"*",8411:"...",8412:"....",8428:"⇁",8429:"↽",8430:"←",8431:"→"},t.defaultMoMap={45:"−"},t.defaultMnMap={45:"−"},t.defaultParams={x_height:.442,quad:1,num1:.676,num2:.394,num3:.444,denom1:.686,denom2:.345,sup1:.413,sup2:.363,sup3:.289,sub1:.15,sub2:.247,sup_drop:.386,sub_drop:.05,delim1:2.39,delim2:1,axis_height:.25,rule_thickness:.06,big_op_spacing1:.111,big_op_spacing2:.167,big_op_spacing3:.2,big_op_spacing4:.6,big_op_spacing5:.1,surd_height:.075,scriptspace:.05,nulldelimiterspace:.12,delimiterfactor:901,delimitershortfall:.3,min_rule_thickness:1.25,separation_factor:1.75,extra_ic:.033},t.defaultDelimiters={},t.defaultChars={},t.defaultSizeVariants=[],t.defaultStretchVariants=[],t}();FontData$2.FontData=FontData$1;var __extends$1S=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__createBinding$c=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,r,e,n){n===void 0&&(n=e);var i=Object.getOwnPropertyDescriptor(r,e);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,i)}:function(t,r,e,n){n===void 0&&(n=e),t[n]=r[e]}),__setModuleDefault$c=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),__importStar$c=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var e in t)e!=="default"&&Object.prototype.hasOwnProperty.call(t,e)&&__createBinding$c(r,t,e);return __setModuleDefault$c(r,t),r},__values$I=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$M=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$s=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(Wrapper$1,"__esModule",{value:!0});Wrapper$1.CommonWrapper=void 0;var Wrapper_js_1$n=Wrapper,MmlNode_js_1$M=MmlNode,string_js_1$a=string,LENGTHS$1=__importStar$c(lengths),Styles_js_1$1=Styles$1,BBox_js_1$5=BBox$1,FontData_js_1$j=FontData$2,SMALLSIZE=2/18;function MathMLSpace(t,r){return t?r<SMALLSIZE?0:SMALLSIZE:r}var CommonWrapper=function(t){__extends$1S(r,t);function r(e,n,i){i===void 0&&(i=null);var o=t.call(this,e,n)||this;return o.parent=null,o.removedStyles=null,o.styles=null,o.variant="",o.bboxComputed=!1,o.stretch=FontData_js_1$j.NOSTRETCH,o.font=null,o.parent=i,o.font=e.jax.font,o.bbox=BBox_js_1$5.BBox.zero(),o.getStyles(),o.getVariant(),o.getScale(),o.getSpace(),o.childNodes=n.childNodes.map(function(a){var s=o.wrap(a);return s.bbox.pwidth&&(n.notParent||n.isKind("math"))&&(o.bbox.pwidth=BBox_js_1$5.BBox.fullWidth),s}),o}return Object.defineProperty(r.prototype,"jax",{get:function(){return this.factory.jax},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"adaptor",{get:function(){return this.factory.jax.adaptor},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"metrics",{get:function(){return this.factory.jax.math.metrics},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"fixesPWidth",{get:function(){return!this.node.notParent&&!this.node.isToken},enumerable:!1,configurable:!0}),r.prototype.wrap=function(e,n){n===void 0&&(n=null);var i=this.factory.wrap(e,n||this);return n&&n.childNodes.push(i),this.jax.nodeMap.set(e,i),i},r.prototype.getBBox=function(e){if(e===void 0&&(e=!0),this.bboxComputed)return this.bbox;var n=e?this.bbox:BBox_js_1$5.BBox.zero();return this.computeBBox(n),this.bboxComputed=e,n},r.prototype.getOuterBBox=function(e){var n,i;e===void 0&&(e=!0);var o=this.getBBox(e);if(!this.styles)return o;var a=new BBox_js_1$5.BBox;Object.assign(a,o);try{for(var s=__values$I(BBox_js_1$5.BBox.StyleAdjust),l=s.next();!l.done;l=s.next()){var c=__read$M(l.value,2),f=c[0],d=c[1],u=this.styles.get(f);u&&(a[d]+=this.length2em(u,1,a.rscale))}}catch(m){n={error:m}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a},r.prototype.computeBBox=function(e,n){var i,o;n===void 0&&(n=!1),e.empty();try{for(var a=__values$I(this.childNodes),s=a.next();!s.done;s=a.next()){var l=s.value;e.append(l.getOuterBBox())}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}e.clean(),this.fixesPWidth&&this.setChildPWidths(n)&&this.computeBBox(e,!0)},r.prototype.setChildPWidths=function(e,n,i){var o,a;if(n===void 0&&(n=null),i===void 0&&(i=!0),e)return!1;i&&(this.bbox.pwidth="");var s=!1;try{for(var l=__values$I(this.childNodes),c=l.next();!c.done;c=l.next()){var f=c.value,d=f.getOuterBBox();d.pwidth&&f.setChildPWidths(e,n===null?d.w:n,i)&&(s=!0)}}catch(u){o={error:u}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return s},r.prototype.invalidateBBox=function(){this.bboxComputed&&(this.bboxComputed=!1,this.parent&&this.parent.invalidateBBox())},r.prototype.copySkewIC=function(e){var n=this.childNodes[0];n!=null&&n.bbox.sk&&(e.sk=n.bbox.sk),n!=null&&n.bbox.dx&&(e.dx=n.bbox.dx);var i=this.childNodes[this.childNodes.length-1];i!=null&&i.bbox.ic&&(e.ic=i.bbox.ic,e.w+=e.ic)},r.prototype.getStyles=function(){var e=this.node.attributes.getExplicit("style");if(e)for(var n=this.styles=new Styles_js_1$1.Styles(e),i=0,o=r.removeStyles.length;i<o;i++){var a=r.removeStyles[i];n.get(a)&&(this.removedStyles||(this.removedStyles={}),this.removedStyles[a]=n.get(a),n.set(a,""))}},r.prototype.getVariant=function(){if(this.node.isToken){var e=this.node.attributes,n=e.get("mathvariant");if(!e.getExplicit("mathvariant")){var i=e.getList("fontfamily","fontweight","fontstyle");if(this.removedStyles){var o=this.removedStyles;o.fontFamily&&(i.family=o.fontFamily),o.fontWeight&&(i.weight=o.fontWeight),o.fontStyle&&(i.style=o.fontStyle)}i.fontfamily&&(i.family=i.fontfamily),i.fontweight&&(i.weight=i.fontweight),i.fontstyle&&(i.style=i.fontstyle),i.weight&&i.weight.match(/^\d+$/)&&(i.weight=parseInt(i.weight)>600?"bold":"normal"),i.family?n=this.explicitVariant(i.family,i.weight,i.style):(this.node.getProperty("variantForm")&&(n="-tex-variant"),n=(r.BOLDVARIANTS[i.weight]||{})[n]||n,n=(r.ITALICVARIANTS[i.style]||{})[n]||n)}this.variant=n}},r.prototype.explicitVariant=function(e,n,i){var o=this.styles;return o||(o=this.styles=new Styles_js_1$1.Styles),o.set("fontFamily",e),n&&o.set("fontWeight",n),i&&o.set("fontStyle",i),"-explicitFont"},r.prototype.getScale=function(){var e=1,n=this.parent,i=n?n.bbox.scale:1,o=this.node.attributes,a=Math.min(o.get("scriptlevel"),2),s=o.get("fontsize"),l=this.node.isToken||this.node.isKind("mstyle")?o.get("mathsize"):o.getInherited("mathsize");if(a!==0){e=Math.pow(o.get("scriptsizemultiplier"),a);var c=this.length2em(o.get("scriptminsize"),.8,1);e<c&&(e=c)}this.removedStyles&&this.removedStyles.fontSize&&!s&&(s=this.removedStyles.fontSize),s&&!o.getExplicit("mathsize")&&(l=s),l!=="1"&&(e*=this.length2em(l,1,1)),this.bbox.scale=e,this.bbox.rscale=e/i},r.prototype.getSpace=function(){var e=this.isTopEmbellished(),n=this.node.hasSpacingAttributes();this.jax.options.mathmlSpacing||n?e&&this.getMathMLSpacing():this.getTeXSpacing(e,n)},r.prototype.getMathMLSpacing=function(){var e=this.node.coreMO(),n=e.coreParent(),i=n.parent;if(!(!i||!i.isKind("mrow")||i.childNodes.length===1)){var o=e.attributes,a=o.get("scriptlevel")>0;this.bbox.L=o.isSet("lspace")?Math.max(0,this.length2em(o.get("lspace"))):MathMLSpace(a,e.lspace),this.bbox.R=o.isSet("rspace")?Math.max(0,this.length2em(o.get("rspace"))):MathMLSpace(a,e.rspace);var s=i.childIndex(n);if(s!==0){var l=i.childNodes[s-1];if(l.isEmbellished){var c=this.jax.nodeMap.get(l).getBBox();c.R&&(this.bbox.L=Math.max(0,this.bbox.L-c.R))}}}},r.prototype.getTeXSpacing=function(e,n){if(!n){var i=this.node.texSpacing();i&&(this.bbox.L=this.length2em(i))}if(e||n){var o=this.node.coreMO().attributes;o.isSet("lspace")&&(this.bbox.L=Math.max(0,this.length2em(o.get("lspace")))),o.isSet("rspace")&&(this.bbox.R=Math.max(0,this.length2em(o.get("rspace"))))}},r.prototype.isTopEmbellished=function(){return this.node.isEmbellished&&!(this.node.parent&&this.node.parent.isEmbellished)},r.prototype.core=function(){return this.jax.nodeMap.get(this.node.core())},r.prototype.coreMO=function(){return this.jax.nodeMap.get(this.node.coreMO())},r.prototype.getText=function(){var e,n,i="";if(this.node.isToken)try{for(var o=__values$I(this.node.childNodes),a=o.next();!a.done;a=o.next()){var s=a.value;s instanceof MmlNode_js_1$M.TextNode&&(i+=s.getText())}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},r.prototype.canStretch=function(e){if(this.stretch=FontData_js_1$j.NOSTRETCH,this.node.isEmbellished){var n=this.core();n&&n.node!==this.node&&n.canStretch(e)&&(this.stretch=n.stretch)}return this.stretch.dir!==0},r.prototype.getAlignShift=function(){var e,n=(e=this.node.attributes).getList.apply(e,__spreadArray$s([],__read$M(MmlNode_js_1$M.indentAttributes),!1)),i=n.indentalign,o=n.indentshift,a=n.indentalignfirst,s=n.indentshiftfirst;a!=="indentalign"&&(i=a),i==="auto"&&(i=this.jax.options.displayAlign),s!=="indentshift"&&(o=s),o==="auto"&&(o=this.jax.options.displayIndent,i==="right"&&!o.match(/^\s*0[a-z]*\s*$/)&&(o=("-"+o.trim()).replace(/^--/,"")));var l=this.length2em(o,this.metrics.containerWidth);return[i,l]},r.prototype.getAlignX=function(e,n,i){return i==="right"?e-(n.w+n.R)*n.rscale:i==="left"?n.L*n.rscale:(e-n.w*n.rscale)/2},r.prototype.getAlignY=function(e,n,i,o,a){return a==="top"?e-i:a==="bottom"?o-n:a==="center"?(e-i-(n-o))/2:0},r.prototype.getWrapWidth=function(e){return this.childNodes[e].getBBox().w},r.prototype.getChildAlign=function(e){return"left"},r.prototype.percent=function(e){return LENGTHS$1.percent(e)},r.prototype.em=function(e){return LENGTHS$1.em(e)},r.prototype.px=function(e,n){return n===void 0&&(n=-LENGTHS$1.BIGDIMEN),LENGTHS$1.px(e,n,this.metrics.em)},r.prototype.length2em=function(e,n,i){return n===void 0&&(n=1),i===void 0&&(i=null),i===null&&(i=this.bbox.scale),LENGTHS$1.length2em(e,n,i,this.jax.pxPerEm)},r.prototype.unicodeChars=function(e,n){n===void 0&&(n=this.variant);var i=(0,string_js_1$a.unicodeChars)(e),o=this.font.getVariant(n);if(o&&o.chars){var a=o.chars;i=i.map(function(s){return((a[s]||[])[3]||{}).smp||s})}return i},r.prototype.remapChars=function(e){return e},r.prototype.mmlText=function(e){return this.node.factory.create("text").setText(e)},r.prototype.mmlNode=function(e,n,i){return n===void 0&&(n={}),i===void 0&&(i=[]),this.node.factory.create(e,n,i)},r.prototype.createMo=function(e){var n=this.node.factory,i=n.create("text").setText(e),o=n.create("mo",{stretchy:!0},[i]);o.inheritAttributesFrom(this.node);var a=this.wrap(o);return a.parent=this,a},r.prototype.getVariantChar=function(e,n){var i=this.font.getChar(e,n)||[0,0,0,{unknown:!0}];return i.length===3&&(i[3]={}),i},r.kind="unknown",r.styles={},r.removeStyles=["fontSize","fontFamily","fontWeight","fontStyle","fontVariant","font"],r.skipAttributes={fontfamily:!0,fontsize:!0,fontweight:!0,fontstyle:!0,color:!0,background:!0,class:!0,href:!0,style:!0,xmlns:!0},r.BOLDVARIANTS={bold:{normal:"bold",italic:"bold-italic",fraktur:"bold-fraktur",script:"bold-script","sans-serif":"bold-sans-serif","sans-serif-italic":"sans-serif-bold-italic"},normal:{bold:"normal","bold-italic":"italic","bold-fraktur":"fraktur","bold-script":"script","bold-sans-serif":"sans-serif","sans-serif-bold-italic":"sans-serif-italic"}},r.ITALICVARIANTS={italic:{normal:"italic",bold:"bold-italic","sans-serif":"sans-serif-italic","bold-sans-serif":"sans-serif-bold-italic"},normal:{italic:"normal","bold-italic":"bold","sans-serif-italic":"sans-serif","sans-serif-bold-italic":"bold-sans-serif"}},r}(Wrapper_js_1$n.AbstractWrapper);Wrapper$1.CommonWrapper=CommonWrapper;(function(t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var u=function(m,p){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,y){_.__proto__=y}||function(_,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(_[g]=y[g])},u(m,p)};return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");u(m,p);function _(){this.constructor=m}m.prototype=p===null?Object.create(p):(_.prototype=p.prototype,new _)}}(),e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(u,m,p,_){_===void 0&&(_=p);var y=Object.getOwnPropertyDescriptor(m,p);(!y||("get"in y?!m.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(u,_,y)}:function(u,m,p,_){_===void 0&&(_=p),u[_]=m[p]}),n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(u,m){Object.defineProperty(u,"default",{enumerable:!0,value:m})}:function(u,m){u.default=m}),i=commonjsGlobal&&commonjsGlobal.__importStar||function(u){if(u&&u.__esModule)return u;var m={};if(u!=null)for(var p in u)p!=="default"&&Object.prototype.hasOwnProperty.call(u,p)&&e(m,u,p);return n(m,u),m},o=commonjsGlobal&&commonjsGlobal.__values||function(u){var m=typeof Symbol=="function"&&Symbol.iterator,p=m&&u[m],_=0;if(p)return p.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")},a=commonjsGlobal&&commonjsGlobal.__read||function(u,m){var p=typeof Symbol=="function"&&u[Symbol.iterator];if(!p)return u;var _=p.call(u),y,g=[],v;try{for(;(m===void 0||m-- >0)&&!(y=_.next()).done;)g.push(y.value)}catch(x){v={error:x}}finally{try{y&&!y.done&&(p=_.return)&&p.call(_)}finally{if(v)throw v.error}}return g},s;Object.defineProperty(t,"__esModule",{value:!0}),t.CHTMLWrapper=t.SPACE=t.FONTSIZE=void 0;var l=i(lengths),c=Wrapper$1,f=BBox$1;t.FONTSIZE={"70.7%":"s","70%":"s","50%":"ss","60%":"Tn","85%":"sm","120%":"lg","144%":"Lg","173%":"LG","207%":"hg","249%":"HG"},t.SPACE=(s={},s[l.em(2/18)]="1",s[l.em(3/18)]="2",s[l.em(4/18)]="3",s[l.em(5/18)]="4",s[l.em(6/18)]="5",s);var d=function(u){r(m,u);function m(){var p=u!==null&&u.apply(this,arguments)||this;return p.chtml=null,p}return m.prototype.toCHTML=function(p){var _,y,g=this.standardCHTMLnode(p);try{for(var v=o(this.childNodes),x=v.next();!x.done;x=v.next()){var b=x.value;b.toCHTML(g)}}catch(S){_={error:S}}finally{try{x&&!x.done&&(y=v.return)&&y.call(v)}finally{if(_)throw _.error}}},m.prototype.standardCHTMLnode=function(p){this.markUsed();var _=this.createCHTMLnode(p);return this.handleStyles(),this.handleVariant(),this.handleScale(),this.handleColor(),this.handleSpace(),this.handleAttributes(),this.handlePWidth(),_},m.prototype.markUsed=function(){this.jax.wrapperUsage.add(this.kind)},m.prototype.createCHTMLnode=function(p){var _=this.node.attributes.get("href");return _&&(p=this.adaptor.append(p,this.html("a",{href:_}))),this.chtml=this.adaptor.append(p,this.html("mjx-"+this.node.kind)),this.chtml},m.prototype.handleStyles=function(){if(this.styles){var p=this.styles.cssText;if(p){this.adaptor.setAttribute(this.chtml,"style",p);var _=this.styles.get("font-family");_&&this.adaptor.setStyle(this.chtml,"font-family","MJXZERO, "+_)}}},m.prototype.handleVariant=function(){this.node.isToken&&this.variant!=="-explicitFont"&&this.adaptor.setAttribute(this.chtml,"class",(this.font.getVariant(this.variant)||this.font.getVariant("normal")).classes)},m.prototype.handleScale=function(){this.setScale(this.chtml,this.bbox.rscale)},m.prototype.setScale=function(p,_){var y=Math.abs(_-1)<.001?1:_;if(p&&y!==1){var g=this.percent(y);t.FONTSIZE[g]?this.adaptor.setAttribute(p,"size",t.FONTSIZE[g]):this.adaptor.setStyle(p,"fontSize",g)}return p},m.prototype.handleSpace=function(){var p,_;try{for(var y=o([[this.bbox.L,"space","marginLeft"],[this.bbox.R,"rspace","marginRight"]]),g=y.next();!g.done;g=y.next()){var v=g.value,x=a(v,3),b=x[0],S=x[1],M=x[2];if(b){var C=this.em(b);t.SPACE[C]?this.adaptor.setAttribute(this.chtml,S,t.SPACE[C]):this.adaptor.setStyle(this.chtml,M,C)}}}catch(A){p={error:A}}finally{try{g&&!g.done&&(_=y.return)&&_.call(y)}finally{if(p)throw p.error}}},m.prototype.handleColor=function(){var p=this.node.attributes,_=p.getExplicit("mathcolor"),y=p.getExplicit("color"),g=p.getExplicit("mathbackground"),v=p.getExplicit("background");(_||y)&&this.adaptor.setStyle(this.chtml,"color",_||y),(g||v)&&this.adaptor.setStyle(this.chtml,"backgroundColor",g||v)},m.prototype.handleAttributes=function(){var p,_,y,g,v=this.node.attributes,x=v.getAllDefaults(),b=m.skipAttributes;try{for(var S=o(v.getExplicitNames()),M=S.next();!M.done;M=S.next()){var C=M.value;(b[C]===!1||!(C in x)&&!b[C]&&!this.adaptor.hasAttribute(this.chtml,C))&&this.adaptor.setAttribute(this.chtml,C,v.getExplicit(C))}}catch(B){p={error:B}}finally{try{M&&!M.done&&(_=S.return)&&_.call(S)}finally{if(p)throw p.error}}if(v.get("class")){var A=v.get("class").trim().split(/ +/);try{for(var E=o(A),$=E.next();!$.done;$=E.next()){var D=$.value;this.adaptor.addClass(this.chtml,D)}}catch(B){y={error:B}}finally{try{$&&!$.done&&(g=E.return)&&g.call(E)}finally{if(y)throw y.error}}}},m.prototype.handlePWidth=function(){this.bbox.pwidth&&(this.bbox.pwidth===f.BBox.fullWidth?this.adaptor.setAttribute(this.chtml,"width","full"):this.adaptor.setStyle(this.chtml,"width",this.bbox.pwidth))},m.prototype.setIndent=function(p,_,y){var g=this.adaptor;if(_==="center"||_==="left"){var v=this.getBBox().L;g.setStyle(p,"margin-left",this.em(y+v))}if(_==="center"||_==="right"){var x=this.getBBox().R;g.setStyle(p,"margin-right",this.em(-y+x))}},m.prototype.drawBBox=function(){var p=this.getBBox(),_=p.w,y=p.h,g=p.d,v=p.R,x=this.html("mjx-box",{style:{opacity:.25,"margin-left":this.em(-_-v)}},[this.html("mjx-box",{style:{height:this.em(y),width:this.em(_),"background-color":"red"}}),this.html("mjx-box",{style:{height:this.em(g),width:this.em(_),"margin-left":this.em(-_),"vertical-align":this.em(-g),"background-color":"green"}})]),b=this.chtml||this.parent.chtml,S=this.adaptor.getAttribute(b,"size");S&&this.adaptor.setAttribute(x,"size",S);var M=this.adaptor.getStyle(b,"fontSize");M&&this.adaptor.setStyle(x,"fontSize",M),this.adaptor.append(this.adaptor.parent(b),x),this.adaptor.setStyle(b,"backgroundColor","#FFEE00")},m.prototype.html=function(p,_,y){return _===void 0&&(_={}),y===void 0&&(y=[]),this.jax.html(p,_,y)},m.prototype.text=function(p){return this.jax.text(p)},m.prototype.char=function(p){return this.font.charSelector(p).substr(1)},m.kind="unknown",m.autoStyle=!0,m}(c.CommonWrapper);t.CHTMLWrapper=d})(Wrapper$2);var math$2={},math$1={},__extends$1R=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(math$1,"__esModule",{value:!0});math$1.CommonMathMixin=void 0;function CommonMathMixin(t){return function(r){__extends$1R(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getWrapWidth=function(n){return this.parent?this.getBBox().w:this.metrics.containerWidth/this.jax.pxPerEm},e}(t)}math$1.CommonMathMixin=CommonMathMixin;var math={},__extends$1Q=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$G=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$G=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$G.apply(this,arguments)};Object.defineProperty(math,"__esModule",{value:!0});math.MmlMath=void 0;var MmlNode_js_1$L=MmlNode,MmlMath=function(t){__extends$1Q(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"math"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.setChildInheritedAttributes=function(e,n,i,o){this.attributes.get("mode")==="display"&&this.attributes.setInherited("display","block"),e=this.addInheritedAttributes(e,this.attributes.getAllAttributes()),n=!!this.attributes.get("displaystyle")||!this.attributes.get("displaystyle")&&this.attributes.get("display")==="block",this.attributes.setInherited("displaystyle",n),i=this.attributes.get("scriptlevel")||this.constructor.defaults.scriptlevel,t.prototype.setChildInheritedAttributes.call(this,e,n,i,o)},r.defaults=__assign$G(__assign$G({},MmlNode_js_1$L.AbstractMmlLayoutNode.defaults),{mathvariant:"normal",mathsize:"normal",mathcolor:"",mathbackground:"transparent",dir:"ltr",scriptlevel:0,displaystyle:!1,display:"inline",maxwidth:"",overflow:"linebreak",altimg:"","altimg-width":"","altimg-height":"","altimg-valign":"",alttext:"",cdgroup:"",scriptsizemultiplier:1/Math.sqrt(2),scriptminsize:"8px",infixlinebreakstyle:"before",lineleading:"1ex",linebreakmultchar:"⁢",indentshift:"auto",indentalign:"auto",indenttarget:"",indentalignfirst:"indentalign",indentshiftfirst:"indentshift",indentalignlast:"indentalign",indentshiftlast:"indentshift"}),r}(MmlNode_js_1$L.AbstractMmlLayoutNode);math.MmlMath=MmlMath;var __extends$1P=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$L=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(math$2,"__esModule",{value:!0});math$2.CHTMLmath=void 0;var Wrapper_js_1$m=Wrapper$2,math_js_1$2=math$1,math_js_2=math,BBox_js_1$4=BBox$1,CHTMLmath=function(t){__extends$1P(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){t.prototype.toCHTML.call(this,e);var n=this.chtml,i=this.adaptor,o=this.node.attributes.get("display")==="block";o?(i.setAttribute(n,"display","true"),i.setAttribute(e,"display","true"),this.handleDisplay(e)):this.handleInline(e),i.addClass(n,"MJX-TEX")},r.prototype.handleDisplay=function(e){var n=this.adaptor,i=__read$L(this.getAlignShift(),2),o=i[0],a=i[1];if(o!=="center"&&n.setAttribute(e,"justify",o),this.bbox.pwidth===BBox_js_1$4.BBox.fullWidth){if(n.setAttribute(e,"width","full"),this.jax.table){var s=this.jax.table.getOuterBBox(),l=s.L,c=s.w,f=s.R;o==="right"?f=Math.max(f||-a,-a):o==="left"?l=Math.max(l||a,a):o==="center"&&(c+=2*Math.abs(a));var d=this.em(Math.max(0,l+c+f));n.setStyle(e,"min-width",d),n.setStyle(this.jax.table.chtml,"min-width",d)}}else this.setIndent(this.chtml,o,a)},r.prototype.handleInline=function(e){var n=this.adaptor,i=n.getStyle(this.chtml,"margin-right");i&&(n.setStyle(this.chtml,"margin-right",""),n.setStyle(e,"margin-right",i),n.setStyle(e,"width","0"))},r.prototype.setChildPWidths=function(e,n,i){return n===void 0&&(n=null),i===void 0&&(i=!0),this.parent?t.prototype.setChildPWidths.call(this,e,n,i):!1},r.kind=math_js_2.MmlMath.prototype.kind,r.styles={"mjx-math":{"line-height":0,"text-align":"left","text-indent":0,"font-style":"normal","font-weight":"normal","font-size":"100%","font-size-adjust":"none","letter-spacing":"normal","border-collapse":"collapse","word-wrap":"normal","word-spacing":"normal","white-space":"nowrap",direction:"ltr",padding:"1px 0"},'mjx-container[jax="CHTML"][display="true"]':{display:"block","text-align":"center",margin:"1em 0"},'mjx-container[jax="CHTML"][display="true"][width="full"]':{display:"flex"},'mjx-container[jax="CHTML"][display="true"] mjx-math':{padding:0},'mjx-container[jax="CHTML"][justify="left"]':{"text-align":"left"},'mjx-container[jax="CHTML"][justify="right"]':{"text-align":"right"}},r}((0,math_js_1$2.CommonMathMixin)(Wrapper_js_1$m.CHTMLWrapper));math$2.CHTMLmath=CHTMLmath;var mi$2={},mi$1={},__extends$1O=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mi$1,"__esModule",{value:!0});mi$1.CommonMiMixin=void 0;function CommonMiMixin(t){return function(r){__extends$1O(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.computeBBox=function(n,i){r.prototype.computeBBox.call(this,n),this.copySkewIC(n)},e}(t)}mi$1.CommonMiMixin=CommonMiMixin;var mi={},__extends$1N=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$F=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$F=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$F.apply(this,arguments)};Object.defineProperty(mi,"__esModule",{value:!0});mi.MmlMi=void 0;var MmlNode_js_1$K=MmlNode,MmlMi=function(t){__extends$1N(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.texclass=MmlNode_js_1$K.TEXCLASS.ORD,e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mi"},enumerable:!1,configurable:!0}),r.prototype.setInheritedAttributes=function(e,n,i,o){e===void 0&&(e={}),n===void 0&&(n=!1),i===void 0&&(i=0),o===void 0&&(o=!1),t.prototype.setInheritedAttributes.call(this,e,n,i,o);var a=this.getText();a.match(r.singleCharacter)&&!e.mathvariant&&this.attributes.setInherited("mathvariant","italic")},r.prototype.setTeXclass=function(e){this.getPrevClass(e);var n=this.getText();return n.length>1&&n.match(r.operatorName)&&this.attributes.get("mathvariant")==="normal"&&this.getProperty("autoOP")===void 0&&this.getProperty("texClass")===void 0&&(this.texClass=MmlNode_js_1$K.TEXCLASS.OP,this.setProperty("autoOP",!0)),this},r.defaults=__assign$F({},MmlNode_js_1$K.AbstractMmlTokenNode.defaults),r.operatorName=/^[a-z][a-z0-9]*$/i,r.singleCharacter=/^[\uD800-\uDBFF]?.[\u0300-\u036F\u1AB0-\u1ABE\u1DC0-\u1DFF\u20D0-\u20EF]*$/,r}(MmlNode_js_1$K.AbstractMmlTokenNode);mi.MmlMi=MmlMi;var __extends$1M=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mi$2,"__esModule",{value:!0});mi$2.CHTMLmi=void 0;var Wrapper_js_1$l=Wrapper$2,mi_js_1$2=mi$1,mi_js_2=mi,CHTMLmi=function(t){__extends$1M(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.kind=mi_js_2.MmlMi.prototype.kind,r}((0,mi_js_1$2.CommonMiMixin)(Wrapper_js_1$l.CHTMLWrapper));mi$2.CHTMLmi=CHTMLmi;var mo$2={},mo$1={},__extends$1L=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$E=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$E=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$E.apply(this,arguments)},__read$K=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$r=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__values$H=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},_a$b;Object.defineProperty(mo$1,"__esModule",{value:!0});mo$1.CommonMoMixin=mo$1.DirectionVH=void 0;var BBox_js_1$3=BBox$1,string_js_1$9=string,FontData_js_1$i=FontData$2;mo$1.DirectionVH=(_a$b={},_a$b[1]="v",_a$b[2]="h",_a$b);function CommonMoMixin(t){return function(r){__extends$1L(e,r);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(this,__spreadArray$r([],__read$K(n),!1))||this;return o.size=null,o.isAccent=o.node.isAccent,o}return e.prototype.computeBBox=function(n,i){if(this.protoBBox(n),this.node.attributes.get("symmetric")&&this.stretch.dir!==2){var o=this.getCenterOffset(n);n.h+=o,n.d-=o}this.node.getProperty("mathaccent")&&(this.stretch.dir===0||this.size>=0)&&(n.w=0)},e.prototype.protoBBox=function(n){var i=this.stretch.dir!==0;i&&this.size===null&&this.getStretchedVariant([0]),!(i&&this.size<0)&&(r.prototype.computeBBox.call(this,n),this.copySkewIC(n))},e.prototype.getAccentOffset=function(){var n=BBox_js_1$3.BBox.empty();return this.protoBBox(n),-n.w/2},e.prototype.getCenterOffset=function(n){return n===void 0&&(n=null),n||(n=BBox_js_1$3.BBox.empty(),r.prototype.computeBBox.call(this,n)),(n.h+n.d)/2+this.font.params.axis_height-n.h},e.prototype.getVariant=function(){if(this.node.attributes.get("largeop")){this.variant=this.node.attributes.get("displaystyle")?"-largeop":"-smallop";return}if(!this.node.attributes.getExplicit("mathvariant")&&this.node.getProperty("pseudoscript")===!1){this.variant="-tex-variant";return}r.prototype.getVariant.call(this)},e.prototype.canStretch=function(n){if(this.stretch.dir!==0)return this.stretch.dir===n;var i=this.node.attributes;if(!i.get("stretchy"))return!1;var o=this.getText();if(Array.from(o).length!==1)return!1;var a=this.font.getDelimiter(o.codePointAt(0));return this.stretch=a&&a.dir===n?a:FontData_js_1$i.NOSTRETCH,this.stretch.dir!==0},e.prototype.getStretchedVariant=function(n,i){var o,a;if(i===void 0&&(i=!1),this.stretch.dir!==0){var s=this.getWH(n),l=this.getSize("minsize",0),c=this.getSize("maxsize",1/0),f=this.node.getProperty("mathaccent");s=Math.max(l,Math.min(c,s));var d=this.font.params.delimiterfactor/1e3,u=this.font.params.delimitershortfall,m=l||i?s:f?Math.min(s/d,s+u):Math.max(s*d,s-u),p=this.stretch,_=p.c||this.getText().codePointAt(0),y=0;if(p.sizes)try{for(var g=__values$H(p.sizes),v=g.next();!v.done;v=g.next()){var x=v.value;if(x>=m){f&&y&&y--,this.variant=this.font.getSizeVariant(_,y),this.size=y,p.schar&&p.schar[y]&&(this.stretch=__assign$E(__assign$E({},this.stretch),{c:p.schar[y]}));return}y++}}catch(b){o={error:b}}finally{try{v&&!v.done&&(a=g.return)&&a.call(g)}finally{if(o)throw o.error}}p.stretch?(this.size=-1,this.invalidateBBox(),this.getStretchBBox(n,this.checkExtendedHeight(s,p),p)):(this.variant=this.font.getSizeVariant(_,y-1),this.size=y-1)}},e.prototype.getSize=function(n,i){var o=this.node.attributes;return o.isSet(n)&&(i=this.length2em(o.get(n),1,1)),i},e.prototype.getWH=function(n){if(n.length===0)return 0;if(n.length===1)return n[0];var i=__read$K(n,2),o=i[0],a=i[1],s=this.font.params.axis_height;return this.node.attributes.get("symmetric")?2*Math.max(o-s,a+s):o+a},e.prototype.getStretchBBox=function(n,i,o){var a;o.hasOwnProperty("min")&&o.min>i&&(i=o.min);var s=__read$K(o.HDW,3),l=s[0],c=s[1],f=s[2];this.stretch.dir===1?(a=__read$K(this.getBaseline(n,i,o),2),l=a[0],c=a[1]):f=i,this.bbox.h=l,this.bbox.d=c,this.bbox.w=f},e.prototype.getBaseline=function(n,i,o){var a=n.length===2&&n[0]+n[1]===i,s=this.node.attributes.get("symmetric"),l=__read$K(a?n:[i,0],2),c=l[0],f=l[1],d=__read$K([c+f,0],2),u=d[0],m=d[1];if(s){var p=this.font.params.axis_height;a&&(u=2*Math.max(c-p,f+p)),m=u/2-p}else if(a)m=f;else{var _=__read$K(o.HDW||[.75,.25],2),y=_[0],g=_[1];m=g*(u/(y+g))}return[u-m,m]},e.prototype.checkExtendedHeight=function(n,i){if(i.fullExt){var o=__read$K(i.fullExt,2),a=o[0],s=o[1],l=Math.ceil(Math.max(0,n-s)/a);n=s+l*a}return n},e.prototype.remapChars=function(n){var i=this.node.getProperty("primes");if(i)return(0,string_js_1$9.unicodeChars)(i);if(n.length===1){var o=this.node.coreParent().parent,a=this.isAccent&&!o.isKind("mrow"),s=a?"accent":"mo",l=this.font.getRemappedChar(s,n[0]);l&&(n=this.unicodeChars(l,this.variant))}return n},e}(t)}mo$1.CommonMoMixin=CommonMoMixin;var mo={},OperatorDictionary={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__values||function(o){var a=typeof Symbol=="function"&&Symbol.iterator,s=a&&o[a],l=0;if(s)return s.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&l>=o.length&&(o=void 0),{value:o&&o[l++],done:!o}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.OPTABLE=t.MMLSPACING=t.getRange=t.RANGES=t.MO=t.OPDEF=void 0;var e=MmlNode;function n(o,a,s,l){return s===void 0&&(s=e.TEXCLASS.BIN),l===void 0&&(l=null),[o,a,s,l]}t.OPDEF=n,t.MO={ORD:n(0,0,e.TEXCLASS.ORD),ORD11:n(1,1,e.TEXCLASS.ORD),ORD21:n(2,1,e.TEXCLASS.ORD),ORD02:n(0,2,e.TEXCLASS.ORD),ORD55:n(5,5,e.TEXCLASS.ORD),NONE:n(0,0,e.TEXCLASS.NONE),OP:n(1,2,e.TEXCLASS.OP,{largeop:!0,movablelimits:!0,symmetric:!0}),OPFIXED:n(1,2,e.TEXCLASS.OP,{largeop:!0,movablelimits:!0}),INTEGRAL:n(0,1,e.TEXCLASS.OP,{largeop:!0,symmetric:!0}),INTEGRAL2:n(1,2,e.TEXCLASS.OP,{largeop:!0,symmetric:!0}),BIN3:n(3,3,e.TEXCLASS.BIN),BIN4:n(4,4,e.TEXCLASS.BIN),BIN01:n(0,1,e.TEXCLASS.BIN),BIN5:n(5,5,e.TEXCLASS.BIN),TALLBIN:n(4,4,e.TEXCLASS.BIN,{stretchy:!0}),BINOP:n(4,4,e.TEXCLASS.BIN,{largeop:!0,movablelimits:!0}),REL:n(5,5,e.TEXCLASS.REL),REL1:n(1,1,e.TEXCLASS.REL,{stretchy:!0}),REL4:n(4,4,e.TEXCLASS.REL),RELSTRETCH:n(5,5,e.TEXCLASS.REL,{stretchy:!0}),RELACCENT:n(5,5,e.TEXCLASS.REL,{accent:!0}),WIDEREL:n(5,5,e.TEXCLASS.REL,{accent:!0,stretchy:!0}),OPEN:n(0,0,e.TEXCLASS.OPEN,{fence:!0,stretchy:!0,symmetric:!0}),CLOSE:n(0,0,e.TEXCLASS.CLOSE,{fence:!0,stretchy:!0,symmetric:!0}),INNER:n(0,0,e.TEXCLASS.INNER),PUNCT:n(0,3,e.TEXCLASS.PUNCT),ACCENT:n(0,0,e.TEXCLASS.ORD,{accent:!0}),WIDEACCENT:n(0,0,e.TEXCLASS.ORD,{accent:!0,stretchy:!0})},t.RANGES=[[32,127,e.TEXCLASS.REL,"mo"],[160,191,e.TEXCLASS.ORD,"mo"],[192,591,e.TEXCLASS.ORD,"mi"],[688,879,e.TEXCLASS.ORD,"mo"],[880,6688,e.TEXCLASS.ORD,"mi"],[6832,6911,e.TEXCLASS.ORD,"mo"],[6912,7615,e.TEXCLASS.ORD,"mi"],[7616,7679,e.TEXCLASS.ORD,"mo"],[7680,8191,e.TEXCLASS.ORD,"mi"],[8192,8303,e.TEXCLASS.ORD,"mo"],[8304,8351,e.TEXCLASS.ORD,"mo"],[8448,8527,e.TEXCLASS.ORD,"mi"],[8528,8591,e.TEXCLASS.ORD,"mn"],[8592,8703,e.TEXCLASS.REL,"mo"],[8704,8959,e.TEXCLASS.BIN,"mo"],[8960,9215,e.TEXCLASS.ORD,"mo"],[9312,9471,e.TEXCLASS.ORD,"mn"],[9472,10223,e.TEXCLASS.ORD,"mo"],[10224,10239,e.TEXCLASS.REL,"mo"],[10240,10495,e.TEXCLASS.ORD,"mtext"],[10496,10623,e.TEXCLASS.REL,"mo"],[10624,10751,e.TEXCLASS.ORD,"mo"],[10752,11007,e.TEXCLASS.BIN,"mo"],[11008,11055,e.TEXCLASS.ORD,"mo"],[11056,11087,e.TEXCLASS.REL,"mo"],[11088,11263,e.TEXCLASS.ORD,"mo"],[11264,11744,e.TEXCLASS.ORD,"mi"],[11776,11903,e.TEXCLASS.ORD,"mo"],[11904,12255,e.TEXCLASS.ORD,"mi","normal"],[12272,12351,e.TEXCLASS.ORD,"mo"],[12352,42143,e.TEXCLASS.ORD,"mi","normal"],[42192,43055,e.TEXCLASS.ORD,"mi"],[43056,43071,e.TEXCLASS.ORD,"mn"],[43072,55295,e.TEXCLASS.ORD,"mi"],[63744,64255,e.TEXCLASS.ORD,"mi","normal"],[64256,65023,e.TEXCLASS.ORD,"mi"],[65024,65135,e.TEXCLASS.ORD,"mo"],[65136,65791,e.TEXCLASS.ORD,"mi"],[65792,65935,e.TEXCLASS.ORD,"mn"],[65936,74751,e.TEXCLASS.ORD,"mi","normal"],[74752,74879,e.TEXCLASS.ORD,"mn"],[74880,113823,e.TEXCLASS.ORD,"mi","normal"],[113824,119391,e.TEXCLASS.ORD,"mo"],[119648,119679,e.TEXCLASS.ORD,"mn"],[119808,120781,e.TEXCLASS.ORD,"mi"],[120782,120831,e.TEXCLASS.ORD,"mn"],[122624,129023,e.TEXCLASS.ORD,"mo"],[129024,129279,e.TEXCLASS.REL,"mo"],[129280,129535,e.TEXCLASS.ORD,"mo"],[131072,195103,e.TEXCLASS.ORD,"mi","normnal"]];function i(o){var a,s,l=o.codePointAt(0);try{for(var c=r(t.RANGES),f=c.next();!f.done;f=c.next()){var d=f.value;if(l<=d[1]){if(l>=d[0])return d;break}}}catch(u){a={error:u}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return null}t.getRange=i,t.MMLSPACING=[[0,0],[1,2],[3,3],[4,4],[0,0],[0,0],[0,3]],t.OPTABLE={prefix:{"(":t.MO.OPEN,"+":t.MO.BIN01,"-":t.MO.BIN01,"[":t.MO.OPEN,"{":t.MO.OPEN,"|":t.MO.OPEN,"||":[0,0,e.TEXCLASS.BIN,{fence:!0,stretchy:!0,symmetric:!0}],"|||":[0,0,e.TEXCLASS.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"¬":t.MO.ORD21,"±":t.MO.BIN01,"‖":[0,0,e.TEXCLASS.ORD,{fence:!0,stretchy:!0}],"‘":[0,0,e.TEXCLASS.OPEN,{fence:!0}],"“":[0,0,e.TEXCLASS.OPEN,{fence:!0}],"ⅅ":t.MO.ORD21,"ⅆ":n(2,0,e.TEXCLASS.ORD),"∀":t.MO.ORD21,"∂":t.MO.ORD21,"∃":t.MO.ORD21,"∄":t.MO.ORD21,"∇":t.MO.ORD21,"∏":t.MO.OP,"∐":t.MO.OP,"∑":t.MO.OP,"−":t.MO.BIN01,"∓":t.MO.BIN01,"√":[1,1,e.TEXCLASS.ORD,{stretchy:!0}],"∛":t.MO.ORD11,"∜":t.MO.ORD11,"∠":t.MO.ORD,"∡":t.MO.ORD,"∢":t.MO.ORD,"∫":t.MO.INTEGRAL,"∬":t.MO.INTEGRAL,"∭":t.MO.INTEGRAL,"∮":t.MO.INTEGRAL,"∯":t.MO.INTEGRAL,"∰":t.MO.INTEGRAL,"∱":t.MO.INTEGRAL,"∲":t.MO.INTEGRAL,"∳":t.MO.INTEGRAL,"⋀":t.MO.OP,"⋁":t.MO.OP,"⋂":t.MO.OP,"⋃":t.MO.OP,"⌈":t.MO.OPEN,"⌊":t.MO.OPEN,"〈":t.MO.OPEN,"❲":t.MO.OPEN,"⟦":t.MO.OPEN,"⟨":t.MO.OPEN,"⟪":t.MO.OPEN,"⟬":t.MO.OPEN,"⟮":t.MO.OPEN,"⦀":[0,0,e.TEXCLASS.ORD,{fence:!0,stretchy:!0}],"⦃":t.MO.OPEN,"⦅":t.MO.OPEN,"⦇":t.MO.OPEN,"⦉":t.MO.OPEN,"⦋":t.MO.OPEN,"⦍":t.MO.OPEN,"⦏":t.MO.OPEN,"⦑":t.MO.OPEN,"⦓":t.MO.OPEN,"⦕":t.MO.OPEN,"⦗":t.MO.OPEN,"⧼":t.MO.OPEN,"⨀":t.MO.OP,"⨁":t.MO.OP,"⨂":t.MO.OP,"⨃":t.MO.OP,"⨄":t.MO.OP,"⨅":t.MO.OP,"⨆":t.MO.OP,"⨇":t.MO.OP,"⨈":t.MO.OP,"⨉":t.MO.OP,"⨊":t.MO.OP,"⨋":t.MO.INTEGRAL2,"⨌":t.MO.INTEGRAL,"⨍":t.MO.INTEGRAL2,"⨎":t.MO.INTEGRAL2,"⨏":t.MO.INTEGRAL2,"⨐":t.MO.OP,"⨑":t.MO.OP,"⨒":t.MO.OP,"⨓":t.MO.OP,"⨔":t.MO.OP,"⨕":t.MO.INTEGRAL2,"⨖":t.MO.INTEGRAL2,"⨗":t.MO.INTEGRAL2,"⨘":t.MO.INTEGRAL2,"⨙":t.MO.INTEGRAL2,"⨚":t.MO.INTEGRAL2,"⨛":t.MO.INTEGRAL2,"⨜":t.MO.INTEGRAL2,"⫼":t.MO.OP,"⫿":t.MO.OP},postfix:{"!!":n(1,0),"!":[1,0,e.TEXCLASS.CLOSE,null],'"':t.MO.ACCENT,"&":t.MO.ORD,")":t.MO.CLOSE,"++":n(0,0),"--":n(0,0),"..":n(0,0),"...":t.MO.ORD,"'":t.MO.ACCENT,"]":t.MO.CLOSE,"^":t.MO.WIDEACCENT,_:t.MO.WIDEACCENT,"`":t.MO.ACCENT,"|":t.MO.CLOSE,"}":t.MO.CLOSE,"~":t.MO.WIDEACCENT,"||":[0,0,e.TEXCLASS.BIN,{fence:!0,stretchy:!0,symmetric:!0}],"|||":[0,0,e.TEXCLASS.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"¨":t.MO.ACCENT,ª:t.MO.ACCENT,"¯":t.MO.WIDEACCENT,"°":t.MO.ORD,"²":t.MO.ACCENT,"³":t.MO.ACCENT,"´":t.MO.ACCENT,"¸":t.MO.ACCENT,"¹":t.MO.ACCENT,º:t.MO.ACCENT,"ˆ":t.MO.WIDEACCENT,"ˇ":t.MO.WIDEACCENT,"ˉ":t.MO.WIDEACCENT,"ˊ":t.MO.ACCENT,"ˋ":t.MO.ACCENT,"ˍ":t.MO.WIDEACCENT,"˘":t.MO.ACCENT,"˙":t.MO.ACCENT,"˚":t.MO.ACCENT,"˜":t.MO.WIDEACCENT,"˝":t.MO.ACCENT,"˷":t.MO.WIDEACCENT,"̂":t.MO.WIDEACCENT,"̑":t.MO.ACCENT,"϶":t.MO.REL,"‖":[0,0,e.TEXCLASS.ORD,{fence:!0,stretchy:!0}],"’":[0,0,e.TEXCLASS.CLOSE,{fence:!0}],"‚":t.MO.ACCENT,"‛":t.MO.ACCENT,"”":[0,0,e.TEXCLASS.CLOSE,{fence:!0}],"„":t.MO.ACCENT,"‟":t.MO.ACCENT,"′":t.MO.ORD,"″":t.MO.ACCENT,"‴":t.MO.ACCENT,"‵":t.MO.ACCENT,"‶":t.MO.ACCENT,"‷":t.MO.ACCENT,"‾":t.MO.WIDEACCENT,"⁗":t.MO.ACCENT,"⃛":t.MO.ACCENT,"⃜":t.MO.ACCENT,"⌉":t.MO.CLOSE,"⌋":t.MO.CLOSE,"〉":t.MO.CLOSE,"⎴":t.MO.WIDEACCENT,"⎵":t.MO.WIDEACCENT,"⏜":t.MO.WIDEACCENT,"⏝":t.MO.WIDEACCENT,"⏞":t.MO.WIDEACCENT,"⏟":t.MO.WIDEACCENT,"⏠":t.MO.WIDEACCENT,"⏡":t.MO.WIDEACCENT,"■":t.MO.BIN3,"□":t.MO.BIN3,"▪":t.MO.BIN3,"▫":t.MO.BIN3,"▭":t.MO.BIN3,"▮":t.MO.BIN3,"▯":t.MO.BIN3,"▰":t.MO.BIN3,"▱":t.MO.BIN3,"▲":t.MO.BIN4,"▴":t.MO.BIN4,"▶":t.MO.BIN4,"▷":t.MO.BIN4,"▸":t.MO.BIN4,"▼":t.MO.BIN4,"▾":t.MO.BIN4,"◀":t.MO.BIN4,"◁":t.MO.BIN4,"◂":t.MO.BIN4,"◄":t.MO.BIN4,"◅":t.MO.BIN4,"◆":t.MO.BIN4,"◇":t.MO.BIN4,"◈":t.MO.BIN4,"◉":t.MO.BIN4,"◌":t.MO.BIN4,"◍":t.MO.BIN4,"◎":t.MO.BIN4,"●":t.MO.BIN4,"◖":t.MO.BIN4,"◗":t.MO.BIN4,"◦":t.MO.BIN4,"♭":t.MO.ORD02,"♮":t.MO.ORD02,"♯":t.MO.ORD02,"❳":t.MO.CLOSE,"⟧":t.MO.CLOSE,"⟩":t.MO.CLOSE,"⟫":t.MO.CLOSE,"⟭":t.MO.CLOSE,"⟯":t.MO.CLOSE,"⦀":[0,0,e.TEXCLASS.ORD,{fence:!0,stretchy:!0}],"⦄":t.MO.CLOSE,"⦆":t.MO.CLOSE,"⦈":t.MO.CLOSE,"⦊":t.MO.CLOSE,"⦌":t.MO.CLOSE,"⦎":t.MO.CLOSE,"⦐":t.MO.CLOSE,"⦒":t.MO.CLOSE,"⦔":t.MO.CLOSE,"⦖":t.MO.CLOSE,"⦘":t.MO.CLOSE,"⧽":t.MO.CLOSE},infix:{"!=":t.MO.BIN4,"#":t.MO.ORD,$:t.MO.ORD,"%":[3,3,e.TEXCLASS.ORD,null],"&&":t.MO.BIN4,"":t.MO.ORD,"*":t.MO.BIN3,"**":n(1,1),"*=":t.MO.BIN4,"+":t.MO.BIN4,"+=":t.MO.BIN4,",":[0,3,e.TEXCLASS.PUNCT,{linebreakstyle:"after",separator:!0}],"-":t.MO.BIN4,"-=":t.MO.BIN4,"->":t.MO.BIN5,".":[0,3,e.TEXCLASS.PUNCT,{separator:!0}],"/":t.MO.ORD11,"//":n(1,1),"/=":t.MO.BIN4,":":[1,2,e.TEXCLASS.REL,null],":=":t.MO.BIN4,";":[0,3,e.TEXCLASS.PUNCT,{linebreakstyle:"after",separator:!0}],"<":t.MO.REL,"<=":t.MO.BIN5,"<>":n(1,1),"=":t.MO.REL,"==":t.MO.BIN4,">":t.MO.REL,">=":t.MO.BIN5,"?":[1,1,e.TEXCLASS.CLOSE,null],"@":t.MO.ORD11,"\\":t.MO.ORD,"^":t.MO.ORD11,_:t.MO.ORD11,"|":[2,2,e.TEXCLASS.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"||":[2,2,e.TEXCLASS.BIN,{fence:!0,stretchy:!0,symmetric:!0}],"|||":[2,2,e.TEXCLASS.ORD,{fence:!0,stretchy:!0,symmetric:!0}],"±":t.MO.BIN4,"·":t.MO.BIN4,"×":t.MO.BIN4,"÷":t.MO.BIN4,"ʹ":t.MO.ORD,"̀":t.MO.ACCENT,"́":t.MO.ACCENT,"̃":t.MO.WIDEACCENT,"̄":t.MO.ACCENT,"̆":t.MO.ACCENT,"̇":t.MO.ACCENT,"̈":t.MO.ACCENT,"̌":t.MO.ACCENT,"̲":t.MO.WIDEACCENT,"̸":t.MO.REL4,"―":[0,0,e.TEXCLASS.ORD,{stretchy:!0}],"‗":[0,0,e.TEXCLASS.ORD,{stretchy:!0}],"†":t.MO.BIN3,"‡":t.MO.BIN3,"•":t.MO.BIN4,"…":t.MO.INNER,"⁃":t.MO.BIN4,"⁄":t.MO.TALLBIN,"⁡":t.MO.NONE,"⁢":t.MO.NONE,"⁣":[0,0,e.TEXCLASS.NONE,{linebreakstyle:"after",separator:!0}],"⁤":t.MO.NONE,"⃗":t.MO.ACCENT,ℑ:t.MO.ORD,ℓ:t.MO.ORD,"℘":t.MO.ORD,ℜ:t.MO.ORD,"←":t.MO.WIDEREL,"↑":t.MO.RELSTRETCH,"→":t.MO.WIDEREL,"↓":t.MO.RELSTRETCH,"↔":t.MO.WIDEREL,"↕":t.MO.RELSTRETCH,"↖":t.MO.RELSTRETCH,"↗":t.MO.RELSTRETCH,"↘":t.MO.RELSTRETCH,"↙":t.MO.RELSTRETCH,"↚":t.MO.RELACCENT,"↛":t.MO.RELACCENT,"↜":t.MO.WIDEREL,"↝":t.MO.WIDEREL,"↞":t.MO.WIDEREL,"↟":t.MO.WIDEREL,"↠":t.MO.WIDEREL,"↡":t.MO.RELSTRETCH,"↢":t.MO.WIDEREL,"↣":t.MO.WIDEREL,"↤":t.MO.WIDEREL,"↥":t.MO.RELSTRETCH,"↦":t.MO.WIDEREL,"↧":t.MO.RELSTRETCH,"↨":t.MO.RELSTRETCH,"↩":t.MO.WIDEREL,"↪":t.MO.WIDEREL,"↫":t.MO.WIDEREL,"↬":t.MO.WIDEREL,"↭":t.MO.WIDEREL,"↮":t.MO.RELACCENT,"↯":t.MO.RELSTRETCH,"↰":t.MO.RELSTRETCH,"↱":t.MO.RELSTRETCH,"↲":t.MO.RELSTRETCH,"↳":t.MO.RELSTRETCH,"↴":t.MO.RELSTRETCH,"↵":t.MO.RELSTRETCH,"↶":t.MO.RELACCENT,"↷":t.MO.RELACCENT,"↸":t.MO.REL,"↹":t.MO.WIDEREL,"↺":t.MO.REL,"↻":t.MO.REL,"↼":t.MO.WIDEREL,"↽":t.MO.WIDEREL,"↾":t.MO.RELSTRETCH,"↿":t.MO.RELSTRETCH,"⇀":t.MO.WIDEREL,"⇁":t.MO.WIDEREL,"⇂":t.MO.RELSTRETCH,"⇃":t.MO.RELSTRETCH,"⇄":t.MO.WIDEREL,"⇅":t.MO.RELSTRETCH,"⇆":t.MO.WIDEREL,"⇇":t.MO.WIDEREL,"⇈":t.MO.RELSTRETCH,"⇉":t.MO.WIDEREL,"⇊":t.MO.RELSTRETCH,"⇋":t.MO.WIDEREL,"⇌":t.MO.WIDEREL,"⇍":t.MO.RELACCENT,"⇎":t.MO.RELACCENT,"⇏":t.MO.RELACCENT,"⇐":t.MO.WIDEREL,"⇑":t.MO.RELSTRETCH,"⇒":t.MO.WIDEREL,"⇓":t.MO.RELSTRETCH,"⇔":t.MO.WIDEREL,"⇕":t.MO.RELSTRETCH,"⇖":t.MO.RELSTRETCH,"⇗":t.MO.RELSTRETCH,"⇘":t.MO.RELSTRETCH,"⇙":t.MO.RELSTRETCH,"⇚":t.MO.WIDEREL,"⇛":t.MO.WIDEREL,"⇜":t.MO.WIDEREL,"⇝":t.MO.WIDEREL,"⇞":t.MO.REL,"⇟":t.MO.REL,"⇠":t.MO.WIDEREL,"⇡":t.MO.RELSTRETCH,"⇢":t.MO.WIDEREL,"⇣":t.MO.RELSTRETCH,"⇤":t.MO.WIDEREL,"⇥":t.MO.WIDEREL,"⇦":t.MO.WIDEREL,"⇧":t.MO.RELSTRETCH,"⇨":t.MO.WIDEREL,"⇩":t.MO.RELSTRETCH,"⇪":t.MO.RELSTRETCH,"⇫":t.MO.RELSTRETCH,"⇬":t.MO.RELSTRETCH,"⇭":t.MO.RELSTRETCH,"⇮":t.MO.RELSTRETCH,"⇯":t.MO.RELSTRETCH,"⇰":t.MO.WIDEREL,"⇱":t.MO.REL,"⇲":t.MO.REL,"⇳":t.MO.RELSTRETCH,"⇴":t.MO.RELACCENT,"⇵":t.MO.RELSTRETCH,"⇶":t.MO.WIDEREL,"⇷":t.MO.RELACCENT,"⇸":t.MO.RELACCENT,"⇹":t.MO.RELACCENT,"⇺":t.MO.RELACCENT,"⇻":t.MO.RELACCENT,"⇼":t.MO.RELACCENT,"⇽":t.MO.WIDEREL,"⇾":t.MO.WIDEREL,"⇿":t.MO.WIDEREL,"∁":n(1,2,e.TEXCLASS.ORD),"∅":t.MO.ORD,"∆":t.MO.BIN3,"∈":t.MO.REL,"∉":t.MO.REL,"∊":t.MO.REL,"∋":t.MO.REL,"∌":t.MO.REL,"∍":t.MO.REL,"∎":t.MO.BIN3,"−":t.MO.BIN4,"∓":t.MO.BIN4,"∔":t.MO.BIN4,"∕":t.MO.TALLBIN,"∖":t.MO.BIN4,"∗":t.MO.BIN4,"∘":t.MO.BIN4,"∙":t.MO.BIN4,"∝":t.MO.REL,"∞":t.MO.ORD,"∟":t.MO.REL,"∣":t.MO.REL,"∤":t.MO.REL,"∥":t.MO.REL,"∦":t.MO.REL,"∧":t.MO.BIN4,"∨":t.MO.BIN4,"∩":t.MO.BIN4,"∪":t.MO.BIN4,"∴":t.MO.REL,"∵":t.MO.REL,"∶":t.MO.REL,"∷":t.MO.REL,"∸":t.MO.BIN4,"∹":t.MO.REL,"∺":t.MO.BIN4,"∻":t.MO.REL,"∼":t.MO.REL,"∽":t.MO.REL,"∽̱":t.MO.BIN3,"∾":t.MO.REL,"∿":t.MO.BIN3,"≀":t.MO.BIN4,"≁":t.MO.REL,"≂":t.MO.REL,"≂̸":t.MO.REL,"≃":t.MO.REL,"≄":t.MO.REL,"≅":t.MO.REL,"≆":t.MO.REL,"≇":t.MO.REL,"≈":t.MO.REL,"≉":t.MO.REL,"≊":t.MO.REL,"≋":t.MO.REL,"≌":t.MO.REL,"≍":t.MO.REL,"≎":t.MO.REL,"≎̸":t.MO.REL,"≏":t.MO.REL,"≏̸":t.MO.REL,"≐":t.MO.REL,"≑":t.MO.REL,"≒":t.MO.REL,"≓":t.MO.REL,"≔":t.MO.REL,"≕":t.MO.REL,"≖":t.MO.REL,"≗":t.MO.REL,"≘":t.MO.REL,"≙":t.MO.REL,"≚":t.MO.REL,"≛":t.MO.REL,"≜":t.MO.REL,"≝":t.MO.REL,"≞":t.MO.REL,"≟":t.MO.REL,"≠":t.MO.REL,"≡":t.MO.REL,"≢":t.MO.REL,"≣":t.MO.REL,"≤":t.MO.REL,"≥":t.MO.REL,"≦":t.MO.REL,"≦̸":t.MO.REL,"≧":t.MO.REL,"≨":t.MO.REL,"≩":t.MO.REL,"≪":t.MO.REL,"≪̸":t.MO.REL,"≫":t.MO.REL,"≫̸":t.MO.REL,"≬":t.MO.REL,"≭":t.MO.REL,"≮":t.MO.REL,"≯":t.MO.REL,"≰":t.MO.REL,"≱":t.MO.REL,"≲":t.MO.REL,"≳":t.MO.REL,"≴":t.MO.REL,"≵":t.MO.REL,"≶":t.MO.REL,"≷":t.MO.REL,"≸":t.MO.REL,"≹":t.MO.REL,"≺":t.MO.REL,"≻":t.MO.REL,"≼":t.MO.REL,"≽":t.MO.REL,"≾":t.MO.REL,"≿":t.MO.REL,"≿̸":t.MO.REL,"⊀":t.MO.REL,"⊁":t.MO.REL,"⊂":t.MO.REL,"⊂⃒":t.MO.REL,"⊃":t.MO.REL,"⊃⃒":t.MO.REL,"⊄":t.MO.REL,"⊅":t.MO.REL,"⊆":t.MO.REL,"⊇":t.MO.REL,"⊈":t.MO.REL,"⊉":t.MO.REL,"⊊":t.MO.REL,"⊋":t.MO.REL,"⊌":t.MO.BIN4,"⊍":t.MO.BIN4,"⊎":t.MO.BIN4,"⊏":t.MO.REL,"⊏̸":t.MO.REL,"⊐":t.MO.REL,"⊐̸":t.MO.REL,"⊑":t.MO.REL,"⊒":t.MO.REL,"⊓":t.MO.BIN4,"⊔":t.MO.BIN4,"⊕":t.MO.BIN4,"⊖":t.MO.BIN4,"⊗":t.MO.BIN4,"⊘":t.MO.BIN4,"⊙":t.MO.BIN4,"⊚":t.MO.BIN4,"⊛":t.MO.BIN4,"⊜":t.MO.BIN4,"⊝":t.MO.BIN4,"⊞":t.MO.BIN4,"⊟":t.MO.BIN4,"⊠":t.MO.BIN4,"⊡":t.MO.BIN4,"⊢":t.MO.REL,"⊣":t.MO.REL,"⊤":t.MO.ORD55,"⊥":t.MO.REL,"⊦":t.MO.REL,"⊧":t.MO.REL,"⊨":t.MO.REL,"⊩":t.MO.REL,"⊪":t.MO.REL,"⊫":t.MO.REL,"⊬":t.MO.REL,"⊭":t.MO.REL,"⊮":t.MO.REL,"⊯":t.MO.REL,"⊰":t.MO.REL,"⊱":t.MO.REL,"⊲":t.MO.REL,"⊳":t.MO.REL,"⊴":t.MO.REL,"⊵":t.MO.REL,"⊶":t.MO.REL,"⊷":t.MO.REL,"⊸":t.MO.REL,"⊹":t.MO.REL,"⊺":t.MO.BIN4,"⊻":t.MO.BIN4,"⊼":t.MO.BIN4,"⊽":t.MO.BIN4,"⊾":t.MO.BIN3,"⊿":t.MO.BIN3,"⋄":t.MO.BIN4,"⋅":t.MO.BIN4,"⋆":t.MO.BIN4,"⋇":t.MO.BIN4,"⋈":t.MO.REL,"⋉":t.MO.BIN4,"⋊":t.MO.BIN4,"⋋":t.MO.BIN4,"⋌":t.MO.BIN4,"⋍":t.MO.REL,"⋎":t.MO.BIN4,"⋏":t.MO.BIN4,"⋐":t.MO.REL,"⋑":t.MO.REL,"⋒":t.MO.BIN4,"⋓":t.MO.BIN4,"⋔":t.MO.REL,"⋕":t.MO.REL,"⋖":t.MO.REL,"⋗":t.MO.REL,"⋘":t.MO.REL,"⋙":t.MO.REL,"⋚":t.MO.REL,"⋛":t.MO.REL,"⋜":t.MO.REL,"⋝":t.MO.REL,"⋞":t.MO.REL,"⋟":t.MO.REL,"⋠":t.MO.REL,"⋡":t.MO.REL,"⋢":t.MO.REL,"⋣":t.MO.REL,"⋤":t.MO.REL,"⋥":t.MO.REL,"⋦":t.MO.REL,"⋧":t.MO.REL,"⋨":t.MO.REL,"⋩":t.MO.REL,"⋪":t.MO.REL,"⋫":t.MO.REL,"⋬":t.MO.REL,"⋭":t.MO.REL,"⋮":t.MO.ORD55,"⋯":t.MO.INNER,"⋰":t.MO.REL,"⋱":[5,5,e.TEXCLASS.INNER,null],"⋲":t.MO.REL,"⋳":t.MO.REL,"⋴":t.MO.REL,"⋵":t.MO.REL,"⋶":t.MO.REL,"⋷":t.MO.REL,"⋸":t.MO.REL,"⋹":t.MO.REL,"⋺":t.MO.REL,"⋻":t.MO.REL,"⋼":t.MO.REL,"⋽":t.MO.REL,"⋾":t.MO.REL,"⋿":t.MO.REL,"⌅":t.MO.BIN3,"⌆":t.MO.BIN3,"⌢":t.MO.REL4,"⌣":t.MO.REL4,"〈":t.MO.OPEN,"〉":t.MO.CLOSE,"⎪":t.MO.ORD,"⎯":[0,0,e.TEXCLASS.ORD,{stretchy:!0}],"⎰":t.MO.OPEN,"⎱":t.MO.CLOSE,"─":t.MO.ORD,"△":t.MO.BIN4,"▵":t.MO.BIN4,"▹":t.MO.BIN4,"▽":t.MO.BIN4,"▿":t.MO.BIN4,"◃":t.MO.BIN4,"◯":t.MO.BIN3,"♠":t.MO.ORD,"♡":t.MO.ORD,"♢":t.MO.ORD,"♣":t.MO.ORD,"❘":t.MO.REL,"⟰":t.MO.RELSTRETCH,"⟱":t.MO.RELSTRETCH,"⟵":t.MO.WIDEREL,"⟶":t.MO.WIDEREL,"⟷":t.MO.WIDEREL,"⟸":t.MO.WIDEREL,"⟹":t.MO.WIDEREL,"⟺":t.MO.WIDEREL,"⟻":t.MO.WIDEREL,"⟼":t.MO.WIDEREL,"⟽":t.MO.WIDEREL,"⟾":t.MO.WIDEREL,"⟿":t.MO.WIDEREL,"⤀":t.MO.RELACCENT,"⤁":t.MO.RELACCENT,"⤂":t.MO.RELACCENT,"⤃":t.MO.RELACCENT,"⤄":t.MO.RELACCENT,"⤅":t.MO.RELACCENT,"⤆":t.MO.RELACCENT,"⤇":t.MO.RELACCENT,"⤈":t.MO.REL,"⤉":t.MO.REL,"⤊":t.MO.RELSTRETCH,"⤋":t.MO.RELSTRETCH,"⤌":t.MO.WIDEREL,"⤍":t.MO.WIDEREL,"⤎":t.MO.WIDEREL,"⤏":t.MO.WIDEREL,"⤐":t.MO.WIDEREL,"⤑":t.MO.RELACCENT,"⤒":t.MO.RELSTRETCH,"⤓":t.MO.RELSTRETCH,"⤔":t.MO.RELACCENT,"⤕":t.MO.RELACCENT,"⤖":t.MO.RELACCENT,"⤗":t.MO.RELACCENT,"⤘":t.MO.RELACCENT,"⤙":t.MO.RELACCENT,"⤚":t.MO.RELACCENT,"⤛":t.MO.RELACCENT,"⤜":t.MO.RELACCENT,"⤝":t.MO.RELACCENT,"⤞":t.MO.RELACCENT,"⤟":t.MO.RELACCENT,"⤠":t.MO.RELACCENT,"⤡":t.MO.RELSTRETCH,"⤢":t.MO.RELSTRETCH,"⤣":t.MO.REL,"⤤":t.MO.REL,"⤥":t.MO.REL,"⤦":t.MO.REL,"⤧":t.MO.REL,"⤨":t.MO.REL,"⤩":t.MO.REL,"⤪":t.MO.REL,"⤫":t.MO.REL,"⤬":t.MO.REL,"⤭":t.MO.REL,"⤮":t.MO.REL,"⤯":t.MO.REL,"⤰":t.MO.REL,"⤱":t.MO.REL,"⤲":t.MO.REL,"⤳":t.MO.RELACCENT,"⤴":t.MO.REL,"⤵":t.MO.REL,"⤶":t.MO.REL,"⤷":t.MO.REL,"⤸":t.MO.REL,"⤹":t.MO.REL,"⤺":t.MO.RELACCENT,"⤻":t.MO.RELACCENT,"⤼":t.MO.RELACCENT,"⤽":t.MO.RELACCENT,"⤾":t.MO.REL,"⤿":t.MO.REL,"⥀":t.MO.REL,"⥁":t.MO.REL,"⥂":t.MO.RELACCENT,"⥃":t.MO.RELACCENT,"⥄":t.MO.RELACCENT,"⥅":t.MO.RELACCENT,"⥆":t.MO.RELACCENT,"⥇":t.MO.RELACCENT,"⥈":t.MO.RELACCENT,"⥉":t.MO.REL,"⥊":t.MO.RELACCENT,"⥋":t.MO.RELACCENT,"⥌":t.MO.REL,"⥍":t.MO.REL,"⥎":t.MO.WIDEREL,"⥏":t.MO.RELSTRETCH,"⥐":t.MO.WIDEREL,"⥑":t.MO.RELSTRETCH,"⥒":t.MO.WIDEREL,"⥓":t.MO.WIDEREL,"⥔":t.MO.RELSTRETCH,"⥕":t.MO.RELSTRETCH,"⥖":t.MO.RELSTRETCH,"⥗":t.MO.RELSTRETCH,"⥘":t.MO.RELSTRETCH,"⥙":t.MO.RELSTRETCH,"⥚":t.MO.WIDEREL,"⥛":t.MO.WIDEREL,"⥜":t.MO.RELSTRETCH,"⥝":t.MO.RELSTRETCH,"⥞":t.MO.WIDEREL,"⥟":t.MO.WIDEREL,"⥠":t.MO.RELSTRETCH,"⥡":t.MO.RELSTRETCH,"⥢":t.MO.RELACCENT,"⥣":t.MO.REL,"⥤":t.MO.RELACCENT,"⥥":t.MO.REL,"⥦":t.MO.RELACCENT,"⥧":t.MO.RELACCENT,"⥨":t.MO.RELACCENT,"⥩":t.MO.RELACCENT,"⥪":t.MO.RELACCENT,"⥫":t.MO.RELACCENT,"⥬":t.MO.RELACCENT,"⥭":t.MO.RELACCENT,"⥮":t.MO.RELSTRETCH,"⥯":t.MO.RELSTRETCH,"⥰":t.MO.RELACCENT,"⥱":t.MO.RELACCENT,"⥲":t.MO.RELACCENT,"⥳":t.MO.RELACCENT,"⥴":t.MO.RELACCENT,"⥵":t.MO.RELACCENT,"⥶":t.MO.RELACCENT,"⥷":t.MO.RELACCENT,"⥸":t.MO.RELACCENT,"⥹":t.MO.RELACCENT,"⥺":t.MO.RELACCENT,"⥻":t.MO.RELACCENT,"⥼":t.MO.RELACCENT,"⥽":t.MO.RELACCENT,"⥾":t.MO.REL,"⥿":t.MO.REL,"⦁":t.MO.BIN3,"⦂":t.MO.BIN3,"⦙":t.MO.BIN3,"⦚":t.MO.BIN3,"⦛":t.MO.BIN3,"⦜":t.MO.BIN3,"⦝":t.MO.BIN3,"⦞":t.MO.BIN3,"⦟":t.MO.BIN3,"⦠":t.MO.BIN3,"⦡":t.MO.BIN3,"⦢":t.MO.BIN3,"⦣":t.MO.BIN3,"⦤":t.MO.BIN3,"⦥":t.MO.BIN3,"⦦":t.MO.BIN3,"⦧":t.MO.BIN3,"⦨":t.MO.BIN3,"⦩":t.MO.BIN3,"⦪":t.MO.BIN3,"⦫":t.MO.BIN3,"⦬":t.MO.BIN3,"⦭":t.MO.BIN3,"⦮":t.MO.BIN3,"⦯":t.MO.BIN3,"⦰":t.MO.BIN3,"⦱":t.MO.BIN3,"⦲":t.MO.BIN3,"⦳":t.MO.BIN3,"⦴":t.MO.BIN3,"⦵":t.MO.BIN3,"⦶":t.MO.BIN4,"⦷":t.MO.BIN4,"⦸":t.MO.BIN4,"⦹":t.MO.BIN4,"⦺":t.MO.BIN4,"⦻":t.MO.BIN4,"⦼":t.MO.BIN4,"⦽":t.MO.BIN4,"⦾":t.MO.BIN4,"⦿":t.MO.BIN4,"⧀":t.MO.REL,"⧁":t.MO.REL,"⧂":t.MO.BIN3,"⧃":t.MO.BIN3,"⧄":t.MO.BIN4,"⧅":t.MO.BIN4,"⧆":t.MO.BIN4,"⧇":t.MO.BIN4,"⧈":t.MO.BIN4,"⧉":t.MO.BIN3,"⧊":t.MO.BIN3,"⧋":t.MO.BIN3,"⧌":t.MO.BIN3,"⧍":t.MO.BIN3,"⧎":t.MO.REL,"⧏":t.MO.REL,"⧏̸":t.MO.REL,"⧐":t.MO.REL,"⧐̸":t.MO.REL,"⧑":t.MO.REL,"⧒":t.MO.REL,"⧓":t.MO.REL,"⧔":t.MO.REL,"⧕":t.MO.REL,"⧖":t.MO.BIN4,"⧗":t.MO.BIN4,"⧘":t.MO.BIN3,"⧙":t.MO.BIN3,"⧛":t.MO.BIN3,"⧜":t.MO.BIN3,"⧝":t.MO.BIN3,"⧞":t.MO.REL,"⧟":t.MO.BIN3,"⧠":t.MO.BIN3,"⧡":t.MO.REL,"⧢":t.MO.BIN4,"⧣":t.MO.REL,"⧤":t.MO.REL,"⧥":t.MO.REL,"⧦":t.MO.REL,"⧧":t.MO.BIN3,"⧨":t.MO.BIN3,"⧩":t.MO.BIN3,"⧪":t.MO.BIN3,"⧫":t.MO.BIN3,"⧬":t.MO.BIN3,"⧭":t.MO.BIN3,"⧮":t.MO.BIN3,"⧯":t.MO.BIN3,"⧰":t.MO.BIN3,"⧱":t.MO.BIN3,"⧲":t.MO.BIN3,"⧳":t.MO.BIN3,"⧴":t.MO.REL,"⧵":t.MO.BIN4,"⧶":t.MO.BIN4,"⧷":t.MO.BIN4,"⧸":t.MO.BIN3,"⧹":t.MO.BIN3,"⧺":t.MO.BIN3,"⧻":t.MO.BIN3,"⧾":t.MO.BIN4,"⧿":t.MO.BIN4,"⨝":t.MO.BIN3,"⨞":t.MO.BIN3,"⨟":t.MO.BIN3,"⨠":t.MO.BIN3,"⨡":t.MO.BIN3,"⨢":t.MO.BIN4,"⨣":t.MO.BIN4,"⨤":t.MO.BIN4,"⨥":t.MO.BIN4,"⨦":t.MO.BIN4,"⨧":t.MO.BIN4,"⨨":t.MO.BIN4,"⨩":t.MO.BIN4,"⨪":t.MO.BIN4,"⨫":t.MO.BIN4,"⨬":t.MO.BIN4,"⨭":t.MO.BIN4,"⨮":t.MO.BIN4,"⨯":t.MO.BIN4,"⨰":t.MO.BIN4,"⨱":t.MO.BIN4,"⨲":t.MO.BIN4,"⨳":t.MO.BIN4,"⨴":t.MO.BIN4,"⨵":t.MO.BIN4,"⨶":t.MO.BIN4,"⨷":t.MO.BIN4,"⨸":t.MO.BIN4,"⨹":t.MO.BIN4,"⨺":t.MO.BIN4,"⨻":t.MO.BIN4,"⨼":t.MO.BIN4,"⨽":t.MO.BIN4,"⨾":t.MO.BIN4,"⨿":t.MO.BIN4,"⩀":t.MO.BIN4,"⩁":t.MO.BIN4,"⩂":t.MO.BIN4,"⩃":t.MO.BIN4,"⩄":t.MO.BIN4,"⩅":t.MO.BIN4,"⩆":t.MO.BIN4,"⩇":t.MO.BIN4,"⩈":t.MO.BIN4,"⩉":t.MO.BIN4,"⩊":t.MO.BIN4,"⩋":t.MO.BIN4,"⩌":t.MO.BIN4,"⩍":t.MO.BIN4,"⩎":t.MO.BIN4,"⩏":t.MO.BIN4,"⩐":t.MO.BIN4,"⩑":t.MO.BIN4,"⩒":t.MO.BIN4,"⩓":t.MO.BIN4,"⩔":t.MO.BIN4,"⩕":t.MO.BIN4,"⩖":t.MO.BIN4,"⩗":t.MO.BIN4,"⩘":t.MO.BIN4,"⩙":t.MO.REL,"⩚":t.MO.BIN4,"⩛":t.MO.BIN4,"⩜":t.MO.BIN4,"⩝":t.MO.BIN4,"⩞":t.MO.BIN4,"⩟":t.MO.BIN4,"⩠":t.MO.BIN4,"⩡":t.MO.BIN4,"⩢":t.MO.BIN4,"⩣":t.MO.BIN4,"⩤":t.MO.BIN4,"⩥":t.MO.BIN4,"⩦":t.MO.REL,"⩧":t.MO.REL,"⩨":t.MO.REL,"⩩":t.MO.REL,"⩪":t.MO.REL,"⩫":t.MO.REL,"⩬":t.MO.REL,"⩭":t.MO.REL,"⩮":t.MO.REL,"⩯":t.MO.REL,"⩰":t.MO.REL,"⩱":t.MO.BIN4,"⩲":t.MO.BIN4,"⩳":t.MO.REL,"⩴":t.MO.REL,"⩵":t.MO.REL,"⩶":t.MO.REL,"⩷":t.MO.REL,"⩸":t.MO.REL,"⩹":t.MO.REL,"⩺":t.MO.REL,"⩻":t.MO.REL,"⩼":t.MO.REL,"⩽":t.MO.REL,"⩽̸":t.MO.REL,"⩾":t.MO.REL,"⩾̸":t.MO.REL,"⩿":t.MO.REL,"⪀":t.MO.REL,"⪁":t.MO.REL,"⪂":t.MO.REL,"⪃":t.MO.REL,"⪄":t.MO.REL,"⪅":t.MO.REL,"⪆":t.MO.REL,"⪇":t.MO.REL,"⪈":t.MO.REL,"⪉":t.MO.REL,"⪊":t.MO.REL,"⪋":t.MO.REL,"⪌":t.MO.REL,"⪍":t.MO.REL,"⪎":t.MO.REL,"⪏":t.MO.REL,"⪐":t.MO.REL,"⪑":t.MO.REL,"⪒":t.MO.REL,"⪓":t.MO.REL,"⪔":t.MO.REL,"⪕":t.MO.REL,"⪖":t.MO.REL,"⪗":t.MO.REL,"⪘":t.MO.REL,"⪙":t.MO.REL,"⪚":t.MO.REL,"⪛":t.MO.REL,"⪜":t.MO.REL,"⪝":t.MO.REL,"⪞":t.MO.REL,"⪟":t.MO.REL,"⪠":t.MO.REL,"⪡":t.MO.REL,"⪡̸":t.MO.REL,"⪢":t.MO.REL,"⪢̸":t.MO.REL,"⪣":t.MO.REL,"⪤":t.MO.REL,"⪥":t.MO.REL,"⪦":t.MO.REL,"⪧":t.MO.REL,"⪨":t.MO.REL,"⪩":t.MO.REL,"⪪":t.MO.REL,"⪫":t.MO.REL,"⪬":t.MO.REL,"⪭":t.MO.REL,"⪮":t.MO.REL,"⪯":t.MO.REL,"⪯̸":t.MO.REL,"⪰":t.MO.REL,"⪰̸":t.MO.REL,"⪱":t.MO.REL,"⪲":t.MO.REL,"⪳":t.MO.REL,"⪴":t.MO.REL,"⪵":t.MO.REL,"⪶":t.MO.REL,"⪷":t.MO.REL,"⪸":t.MO.REL,"⪹":t.MO.REL,"⪺":t.MO.REL,"⪻":t.MO.REL,"⪼":t.MO.REL,"⪽":t.MO.REL,"⪾":t.MO.REL,"⪿":t.MO.REL,"⫀":t.MO.REL,"⫁":t.MO.REL,"⫂":t.MO.REL,"⫃":t.MO.REL,"⫄":t.MO.REL,"⫅":t.MO.REL,"⫆":t.MO.REL,"⫇":t.MO.REL,"⫈":t.MO.REL,"⫉":t.MO.REL,"⫊":t.MO.REL,"⫋":t.MO.REL,"⫌":t.MO.REL,"⫍":t.MO.REL,"⫎":t.MO.REL,"⫏":t.MO.REL,"⫐":t.MO.REL,"⫑":t.MO.REL,"⫒":t.MO.REL,"⫓":t.MO.REL,"⫔":t.MO.REL,"⫕":t.MO.REL,"⫖":t.MO.REL,"⫗":t.MO.REL,"⫘":t.MO.REL,"⫙":t.MO.REL,"⫚":t.MO.REL,"⫛":t.MO.REL,"⫝":t.MO.REL,"⫝̸":t.MO.REL,"⫞":t.MO.REL,"⫟":t.MO.REL,"⫠":t.MO.REL,"⫡":t.MO.REL,"⫢":t.MO.REL,"⫣":t.MO.REL,"⫤":t.MO.REL,"⫥":t.MO.REL,"⫦":t.MO.REL,"⫧":t.MO.REL,"⫨":t.MO.REL,"⫩":t.MO.REL,"⫪":t.MO.REL,"⫫":t.MO.REL,"⫬":t.MO.REL,"⫭":t.MO.REL,"⫮":t.MO.REL,"⫯":t.MO.REL,"⫰":t.MO.REL,"⫱":t.MO.REL,"⫲":t.MO.REL,"⫳":t.MO.REL,"⫴":t.MO.BIN4,"⫵":t.MO.BIN4,"⫶":t.MO.BIN4,"⫷":t.MO.REL,"⫸":t.MO.REL,"⫹":t.MO.REL,"⫺":t.MO.REL,"⫻":t.MO.BIN4,"⫽":t.MO.BIN4,"⫾":t.MO.BIN3,"⭅":t.MO.RELSTRETCH,"⭆":t.MO.RELSTRETCH,"〈":t.MO.OPEN,"〉":t.MO.CLOSE,"︷":t.MO.WIDEACCENT,"︸":t.MO.WIDEACCENT}},t.OPTABLE.infix["^"]=t.MO.WIDEREL,t.OPTABLE.infix._=t.MO.WIDEREL,t.OPTABLE.infix["⫝̸"]=t.MO.REL})(OperatorDictionary);var __extends$1K=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$D=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$D=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$D.apply(this,arguments)},__read$J=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__values$G=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mo,"__esModule",{value:!0});mo.MmlMo=void 0;var MmlNode_js_1$J=MmlNode,OperatorDictionary_js_1$1=OperatorDictionary,string_js_1$8=string,MmlMo=function(t){__extends$1K(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e._texClass=null,e.lspace=5/18,e.rspace=5/18,e}return Object.defineProperty(r.prototype,"texClass",{get:function(){if(this._texClass===null){var e=this.getText(),n=__read$J(this.handleExplicitForm(this.getForms()),3),i=n[0],o=n[1],a=n[2],s=this.constructor.OPTABLE,l=s[i][e]||s[o][e]||s[a][e];return l?l[2]:MmlNode_js_1$J.TEXCLASS.REL}return this._texClass},set:function(e){this._texClass=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"kind",{get:function(){return"mo"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isEmbellished",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasNewLine",{get:function(){return this.attributes.get("linebreak")==="newline"},enumerable:!1,configurable:!0}),r.prototype.coreParent=function(){for(var e=this,n=this,i=this.factory.getNodeClass("math");n&&n.isEmbellished&&n.coreMO()===this&&!(n instanceof i);)e=n,n=n.parent;return e},r.prototype.coreText=function(e){if(!e)return"";if(e.isEmbellished)return e.coreMO().getText();for(;((e.isKind("mrow")||e.isKind("TeXAtom")&&e.texClass!==MmlNode_js_1$J.TEXCLASS.VCENTER||e.isKind("mstyle")||e.isKind("mphantom"))&&e.childNodes.length===1||e.isKind("munderover"))&&e.childNodes[0];)e=e.childNodes[0];return e.isToken?e.getText():""},r.prototype.hasSpacingAttributes=function(){return this.attributes.isSet("lspace")||this.attributes.isSet("rspace")},Object.defineProperty(r.prototype,"isAccent",{get:function(){var e=!1,n=this.coreParent().parent;if(n){var i=n.isKind("mover")?n.childNodes[n.over].coreMO()?"accent":"":n.isKind("munder")?n.childNodes[n.under].coreMO()?"accentunder":"":n.isKind("munderover")?this===n.childNodes[n.over].coreMO()?"accent":this===n.childNodes[n.under].coreMO()?"accentunder":"":"";if(i){var o=n.attributes.getExplicit(i);e=o!==void 0?e:this.attributes.get("accent")}}return e},enumerable:!1,configurable:!0}),r.prototype.setTeXclass=function(e){var n=this.attributes.getList("form","fence"),i=n.form,o=n.fence;return this.getProperty("texClass")===void 0&&(this.attributes.isSet("lspace")||this.attributes.isSet("rspace"))?null:(o&&this.texClass===MmlNode_js_1$J.TEXCLASS.REL&&(i==="prefix"&&(this.texClass=MmlNode_js_1$J.TEXCLASS.OPEN),i==="postfix"&&(this.texClass=MmlNode_js_1$J.TEXCLASS.CLOSE)),this.adjustTeXclass(e))},r.prototype.adjustTeXclass=function(e){var n=this.texClass,i=this.prevClass;if(n===MmlNode_js_1$J.TEXCLASS.NONE)return e;if(e?(e.getProperty("autoOP")&&(n===MmlNode_js_1$J.TEXCLASS.BIN||n===MmlNode_js_1$J.TEXCLASS.REL)&&(i=e.texClass=MmlNode_js_1$J.TEXCLASS.ORD),i=this.prevClass=e.texClass||MmlNode_js_1$J.TEXCLASS.ORD,this.prevLevel=this.attributes.getInherited("scriptlevel")):i=this.prevClass=MmlNode_js_1$J.TEXCLASS.NONE,n===MmlNode_js_1$J.TEXCLASS.BIN&&(i===MmlNode_js_1$J.TEXCLASS.NONE||i===MmlNode_js_1$J.TEXCLASS.BIN||i===MmlNode_js_1$J.TEXCLASS.OP||i===MmlNode_js_1$J.TEXCLASS.REL||i===MmlNode_js_1$J.TEXCLASS.OPEN||i===MmlNode_js_1$J.TEXCLASS.PUNCT))this.texClass=MmlNode_js_1$J.TEXCLASS.ORD;else if(i===MmlNode_js_1$J.TEXCLASS.BIN&&(n===MmlNode_js_1$J.TEXCLASS.REL||n===MmlNode_js_1$J.TEXCLASS.CLOSE||n===MmlNode_js_1$J.TEXCLASS.PUNCT))e.texClass=this.prevClass=MmlNode_js_1$J.TEXCLASS.ORD;else if(n===MmlNode_js_1$J.TEXCLASS.BIN){for(var o=this,a=this.parent;a&&a.parent&&a.isEmbellished&&(a.childNodes.length===1||!a.isKind("mrow")&&a.core()===o);)o=a,a=a.parent;a.childNodes[a.childNodes.length-1]===o&&(this.texClass=MmlNode_js_1$J.TEXCLASS.ORD)}return this},r.prototype.setInheritedAttributes=function(e,n,i,o){e===void 0&&(e={}),n===void 0&&(n=!1),i===void 0&&(i=0),o===void 0&&(o=!1),t.prototype.setInheritedAttributes.call(this,e,n,i,o);var a=this.getText();this.checkOperatorTable(a),this.checkPseudoScripts(a),this.checkPrimes(a),this.checkMathAccent(a)},r.prototype.checkOperatorTable=function(e){var n,i,o=__read$J(this.handleExplicitForm(this.getForms()),3),a=o[0],s=o[1],l=o[2];this.attributes.setInherited("form",a);var c=this.constructor.OPTABLE,f=c[a][e]||c[s][e]||c[l][e];if(f){this.getProperty("texClass")===void 0&&(this.texClass=f[2]);try{for(var d=__values$G(Object.keys(f[3]||{})),u=d.next();!u.done;u=d.next()){var m=u.value;this.attributes.setInherited(m,f[3][m])}}catch(y){n={error:y}}finally{try{u&&!u.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}this.lspace=(f[0]+1)/18,this.rspace=(f[1]+1)/18}else{var p=(0,OperatorDictionary_js_1$1.getRange)(e);if(p){this.getProperty("texClass")===void 0&&(this.texClass=p[2]);var _=this.constructor.MMLSPACING[p[2]];this.lspace=(_[0]+1)/18,this.rspace=(_[1]+1)/18}}},r.prototype.getForms=function(){for(var e=this,n=this.parent,i=this.Parent;i&&i.isEmbellished;)e=n,n=i.parent,i=i.Parent;if(n&&n.isKind("mrow")&&n.nonSpaceLength()!==1){if(n.firstNonSpace()===e)return["prefix","infix","postfix"];if(n.lastNonSpace()===e)return["postfix","infix","prefix"]}return["infix","prefix","postfix"]},r.prototype.handleExplicitForm=function(e){if(this.attributes.isSet("form")){var n=this.attributes.get("form");e=[n].concat(e.filter(function(i){return i!==n}))}return e},r.prototype.checkPseudoScripts=function(e){var n=this.constructor.pseudoScripts;if(e.match(n)){var i=this.coreParent().Parent,o=!i||!(i.isKind("msubsup")&&!i.isKind("msub"));this.setProperty("pseudoscript",o),o&&(this.attributes.setInherited("lspace",0),this.attributes.setInherited("rspace",0))}},r.prototype.checkPrimes=function(e){var n=this.constructor.primes;if(e.match(n)){var i=this.constructor.remapPrimes,o=(0,string_js_1$8.unicodeString)((0,string_js_1$8.unicodeChars)(e).map(function(a){return i[a]}));this.setProperty("primes",o)}},r.prototype.checkMathAccent=function(e){var n=this.Parent;if(!(this.getProperty("mathaccent")!==void 0||!n||!n.isKind("munderover"))){var i=n.childNodes[0];if(!(i.isEmbellished&&i.coreMO()===this)){var o=this.constructor.mathaccents;e.match(o)&&this.setProperty("mathaccent",!0)}}},r.defaults=__assign$D(__assign$D({},MmlNode_js_1$J.AbstractMmlTokenNode.defaults),{form:"infix",fence:!1,separator:!1,lspace:"thickmathspace",rspace:"thickmathspace",stretchy:!1,symmetric:!1,maxsize:"infinity",minsize:"0em",largeop:!1,movablelimits:!1,accent:!1,linebreak:"auto",lineleading:"1ex",linebreakstyle:"before",indentalign:"auto",indentshift:"0",indenttarget:"",indentalignfirst:"indentalign",indentshiftfirst:"indentshift",indentalignlast:"indentalign",indentshiftlast:"indentshift"}),r.MMLSPACING=OperatorDictionary_js_1$1.MMLSPACING,r.OPTABLE=OperatorDictionary_js_1$1.OPTABLE,r.pseudoScripts=new RegExp(["^[\"'*`","ª","°","²-´","¹","º","‘-‟","′-‷⁗","⁰ⁱ","⁴-ⁿ","₀-₎","]+$"].join("")),r.primes=new RegExp(["^[\"'`","‘-‟","]+$"].join("")),r.remapPrimes={34:8243,39:8242,96:8245,8216:8245,8217:8242,8218:8242,8219:8245,8220:8246,8221:8243,8222:8243,8223:8246},r.mathaccents=new RegExp(["^[","´́ˊ","`̀ˋ","¨̈","~̃˜","¯̄ˉ","˘̆","ˇ̌","^̂ˆ","→⃗","˙̇","˚̊","⃛","⃜","]$"].join("")),r}(MmlNode_js_1$J.AbstractMmlTokenNode);mo.MmlMo=MmlMo;var __extends$1J=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__values$F=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mo$2,"__esModule",{value:!0});mo$2.CHTMLmo=void 0;var Wrapper_js_1$k=Wrapper$2,mo_js_1$4=mo$1,mo_js_2=mo,CHTMLmo=function(t){__extends$1J(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){var n,i,o=this.node.attributes,a=o.get("symmetric")&&this.stretch.dir!==2,s=this.stretch.dir!==0;s&&this.size===null&&this.getStretchedVariant([]);var l=this.standardCHTMLnode(e);if(s&&this.size<0)this.stretchHTML(l);else{if(a||o.get("largeop")){var c=this.em(this.getCenterOffset());c!=="0"&&this.adaptor.setStyle(l,"verticalAlign",c)}this.node.getProperty("mathaccent")&&(this.adaptor.setStyle(l,"width","0"),this.adaptor.setStyle(l,"margin-left",this.em(this.getAccentOffset())));try{for(var f=__values$F(this.childNodes),d=f.next();!d.done;d=f.next()){var u=d.value;u.toCHTML(l)}}catch(m){n={error:m}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}}},r.prototype.stretchHTML=function(e){var n=this.getText().codePointAt(0);this.font.delimUsage.add(n),this.childNodes[0].markUsed();var i=this.stretch,o=i.stretch,a=[];o[0]&&a.push(this.html("mjx-beg",{},[this.html("mjx-c")])),a.push(this.html("mjx-ext",{},[this.html("mjx-c")])),o.length===4&&a.push(this.html("mjx-mid",{},[this.html("mjx-c")]),this.html("mjx-ext",{},[this.html("mjx-c")])),o[2]&&a.push(this.html("mjx-end",{},[this.html("mjx-c")]));var s={},l=this.bbox,c=l.h,f=l.d,d=l.w;i.dir===1?(a.push(this.html("mjx-mark")),s.height=this.em(c+f),s.verticalAlign=this.em(-f)):s.width=this.em(d);var u=mo_js_1$4.DirectionVH[i.dir],m={class:this.char(i.c||n),style:s},p=this.html("mjx-stretchy-"+u,m,a);this.adaptor.append(e,p)},r.kind=mo_js_2.MmlMo.prototype.kind,r.styles={"mjx-stretchy-h":{display:"inline-table",width:"100%"},"mjx-stretchy-h > *":{display:"table-cell",width:0},"mjx-stretchy-h > * > mjx-c":{display:"inline-block",transform:"scalex(1.0000001)"},"mjx-stretchy-h > * > mjx-c::before":{display:"inline-block",width:"initial"},"mjx-stretchy-h > mjx-ext":{"/* IE */ overflow":"hidden","/* others */ overflow":"clip visible",width:"100%"},"mjx-stretchy-h > mjx-ext > mjx-c::before":{transform:"scalex(500)"},"mjx-stretchy-h > mjx-ext > mjx-c":{width:0},"mjx-stretchy-h > mjx-beg > mjx-c":{"margin-right":"-.1em"},"mjx-stretchy-h > mjx-end > mjx-c":{"margin-left":"-.1em"},"mjx-stretchy-v":{display:"inline-block"},"mjx-stretchy-v > *":{display:"block"},"mjx-stretchy-v > mjx-beg":{height:0},"mjx-stretchy-v > mjx-end > mjx-c":{display:"block"},"mjx-stretchy-v > * > mjx-c":{transform:"scaley(1.0000001)","transform-origin":"left center",overflow:"hidden"},"mjx-stretchy-v > mjx-ext":{display:"block",height:"100%","box-sizing":"border-box",border:"0px solid transparent","/* IE */ overflow":"hidden","/* others */ overflow":"visible clip"},"mjx-stretchy-v > mjx-ext > mjx-c::before":{width:"initial","box-sizing":"border-box"},"mjx-stretchy-v > mjx-ext > mjx-c":{transform:"scaleY(500) translateY(.075em)",overflow:"visible"},"mjx-mark":{display:"inline-block",height:"0px"}},r}((0,mo_js_1$4.CommonMoMixin)(Wrapper_js_1$k.CHTMLWrapper));mo$2.CHTMLmo=CHTMLmo;var mn$2={},mn$1={},__extends$1I=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mn$1,"__esModule",{value:!0});mn$1.CommonMnMixin=void 0;function CommonMnMixin(t){return function(r){__extends$1I(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.remapChars=function(n){if(n.length){var i=this.font.getRemappedChar("mn",n[0]);if(i){var o=this.unicodeChars(i,this.variant);o.length===1?n[0]=o[0]:n=o.concat(n.slice(1))}}return n},e}(t)}mn$1.CommonMnMixin=CommonMnMixin;var mn={},__extends$1H=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$C=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$C=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$C.apply(this,arguments)};Object.defineProperty(mn,"__esModule",{value:!0});mn.MmlMn=void 0;var MmlNode_js_1$I=MmlNode,MmlMn=function(t){__extends$1H(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.texclass=MmlNode_js_1$I.TEXCLASS.ORD,e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mn"},enumerable:!1,configurable:!0}),r.defaults=__assign$C({},MmlNode_js_1$I.AbstractMmlTokenNode.defaults),r}(MmlNode_js_1$I.AbstractMmlTokenNode);mn.MmlMn=MmlMn;var __extends$1G=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mn$2,"__esModule",{value:!0});mn$2.CHTMLmn=void 0;var Wrapper_js_1$j=Wrapper$2,mn_js_1$2=mn$1,mn_js_2=mn,CHTMLmn=function(t){__extends$1G(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.kind=mn_js_2.MmlMn.prototype.kind,r}((0,mn_js_1$2.CommonMnMixin)(Wrapper_js_1$j.CHTMLWrapper));mn$2.CHTMLmn=CHTMLmn;var ms$2={},ms$1={},__extends$1F=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$I=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$q=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(ms$1,"__esModule",{value:!0});ms$1.CommonMsMixin=void 0;function CommonMsMixin(t){return function(r){__extends$1F(e,r);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(this,__spreadArray$q([],__read$I(n),!1))||this,a=o.node.attributes,s=a.getList("lquote","rquote");return o.variant!=="monospace"&&(!a.isSet("lquote")&&s.lquote==='"'&&(s.lquote="“"),!a.isSet("rquote")&&s.rquote==='"'&&(s.rquote="”")),o.childNodes.unshift(o.createText(s.lquote)),o.childNodes.push(o.createText(s.rquote)),o}return e.prototype.createText=function(n){var i=this.wrap(this.mmlText(n));return i.parent=this,i},e}(t)}ms$1.CommonMsMixin=CommonMsMixin;var ms={},__extends$1E=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$B=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$B=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$B.apply(this,arguments)};Object.defineProperty(ms,"__esModule",{value:!0});ms.MmlMs=void 0;var MmlNode_js_1$H=MmlNode,MmlMs=function(t){__extends$1E(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.texclass=MmlNode_js_1$H.TEXCLASS.ORD,e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"ms"},enumerable:!1,configurable:!0}),r.defaults=__assign$B(__assign$B({},MmlNode_js_1$H.AbstractMmlTokenNode.defaults),{lquote:'"',rquote:'"'}),r}(MmlNode_js_1$H.AbstractMmlTokenNode);ms.MmlMs=MmlMs;var __extends$1D=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(ms$2,"__esModule",{value:!0});ms$2.CHTMLms=void 0;var Wrapper_js_1$i=Wrapper$2,ms_js_1$2=ms$1,ms_js_2=ms,CHTMLms=function(t){__extends$1D(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.kind=ms_js_2.MmlMs.prototype.kind,r}((0,ms_js_1$2.CommonMsMixin)(Wrapper_js_1$i.CHTMLWrapper));ms$2.CHTMLms=CHTMLms;var mtext$2={},mtext$1={},__extends$1C=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mtext$1,"__esModule",{value:!0});mtext$1.CommonMtextMixin=void 0;function CommonMtextMixin(t){var r;return r=function(e){__extends$1C(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.getVariant=function(){var i=this.jax.options,o=this.jax.math.outputData,a=(!!o.merrorFamily||!!i.merrorFont)&&this.node.Parent.isKind("merror");if(o.mtextFamily||i.mtextFont||a){var s=this.node.attributes.get("mathvariant"),l=this.constructor.INHERITFONTS[s]||this.jax.font.getCssFont(s),c=l[0]||(a?o.merrorFamily||i.merrorFont:o.mtextFamily||i.mtextFont);this.variant=this.explicitVariant(c,l[2]?"bold":"",l[1]?"italic":"");return}e.prototype.getVariant.call(this)},n}(t),r.INHERITFONTS={normal:["",!1,!1],bold:["",!1,!0],italic:["",!0,!1],"bold-italic":["",!0,!0]},r}mtext$1.CommonMtextMixin=CommonMtextMixin;var mtext={},__extends$1B=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$A=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$A=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$A.apply(this,arguments)};Object.defineProperty(mtext,"__esModule",{value:!0});mtext.MmlMtext=void 0;var MmlNode_js_1$G=MmlNode,MmlMtext=function(t){__extends$1B(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.texclass=MmlNode_js_1$G.TEXCLASS.ORD,e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mtext"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSpacelike",{get:function(){return!0},enumerable:!1,configurable:!0}),r.defaults=__assign$A({},MmlNode_js_1$G.AbstractMmlTokenNode.defaults),r}(MmlNode_js_1$G.AbstractMmlTokenNode);mtext.MmlMtext=MmlMtext;var __extends$1A=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mtext$2,"__esModule",{value:!0});mtext$2.CHTMLmtext=void 0;var Wrapper_js_1$h=Wrapper$2,mtext_js_1$2=mtext$1,mtext_js_2=mtext,CHTMLmtext=function(t){__extends$1A(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.kind=mtext_js_2.MmlMtext.prototype.kind,r}((0,mtext_js_1$2.CommonMtextMixin)(Wrapper_js_1$h.CHTMLWrapper));mtext$2.CHTMLmtext=CHTMLmtext;var mspace$2={},mspace$1={},__extends$1z=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mspace$1,"__esModule",{value:!0});mspace$1.CommonMspaceMixin=void 0;function CommonMspaceMixin(t){return function(r){__extends$1z(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.computeBBox=function(n,i){var o=this.node.attributes;n.w=this.length2em(o.get("width"),0),n.h=this.length2em(o.get("height"),0),n.d=this.length2em(o.get("depth"),0)},e.prototype.handleVariant=function(){},e}(t)}mspace$1.CommonMspaceMixin=CommonMspaceMixin;var mspace={},__extends$1y=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$z=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$z=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$z.apply(this,arguments)};Object.defineProperty(mspace,"__esModule",{value:!0});mspace.MmlMspace=void 0;var MmlNode_js_1$F=MmlNode,MmlMspace=function(t){__extends$1y(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.texclass=MmlNode_js_1$F.TEXCLASS.NONE,e}return r.prototype.setTeXclass=function(e){return e},Object.defineProperty(r.prototype,"kind",{get:function(){return"mspace"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSpacelike",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasNewline",{get:function(){var e=this.attributes;return e.getExplicit("width")==null&&e.getExplicit("height")==null&&e.getExplicit("depth")==null&&e.get("linebreak")==="newline"},enumerable:!1,configurable:!0}),r.defaults=__assign$z(__assign$z({},MmlNode_js_1$F.AbstractMmlTokenNode.defaults),{width:"0em",height:"0ex",depth:"0ex",linebreak:"auto"}),r}(MmlNode_js_1$F.AbstractMmlTokenNode);mspace.MmlMspace=MmlMspace;var __extends$1x=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mspace$2,"__esModule",{value:!0});mspace$2.CHTMLmspace=void 0;var Wrapper_js_1$g=Wrapper$2,mspace_js_1$2=mspace$1,mspace_js_2=mspace,CHTMLmspace=function(t){__extends$1x(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){var n=this.standardCHTMLnode(e),i=this.getBBox(),o=i.w,a=i.h,s=i.d;o<0&&(this.adaptor.setStyle(n,"marginRight",this.em(o)),o=0),o&&this.adaptor.setStyle(n,"width",this.em(o)),a=Math.max(0,a+s),a&&this.adaptor.setStyle(n,"height",this.em(Math.max(0,a))),s&&this.adaptor.setStyle(n,"verticalAlign",this.em(-s))},r.kind=mspace_js_2.MmlMspace.prototype.kind,r}((0,mspace_js_1$2.CommonMspaceMixin)(Wrapper_js_1$g.CHTMLWrapper));mspace$2.CHTMLmspace=CHTMLmspace;var mpadded$2={},mpadded$1={},__extends$1w=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$H=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(mpadded$1,"__esModule",{value:!0});mpadded$1.CommonMpaddedMixin=void 0;function CommonMpaddedMixin(t){return function(r){__extends$1w(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getDimens=function(){var n=this.node.attributes.getList("width","height","depth","lspace","voffset"),i=this.childNodes[0].getBBox(),o=i.w,a=i.h,s=i.d,l=o,c=a,f=s,d=0,u=0,m=0;n.width!==""&&(o=this.dimen(n.width,i,"w",0)),n.height!==""&&(a=this.dimen(n.height,i,"h",0)),n.depth!==""&&(s=this.dimen(n.depth,i,"d",0)),n.voffset!==""&&(u=this.dimen(n.voffset,i)),n.lspace!==""&&(d=this.dimen(n.lspace,i));var p=this.node.attributes.get("data-align");return p&&(m=this.getAlignX(o,i,p)),[c,f,l,a-c,s-f,o-l,d,u,m]},e.prototype.dimen=function(n,i,o,a){o===void 0&&(o=""),a===void 0&&(a=null),n=String(n);var s=n.match(/width|height|depth/),l=s?i[s[0].charAt(0)]:o?i[o]:0,c=this.length2em(n,l)||0;return n.match(/^[-+]/)&&o&&(c+=l),a!=null&&(c=Math.max(a,c)),c},e.prototype.computeBBox=function(n,i){i===void 0&&(i=!1);var o=__read$H(this.getDimens(),6),a=o[0],s=o[1],l=o[2],c=o[3],f=o[4],d=o[5];n.w=l+d,n.h=a+c,n.d=s+f,this.setChildPWidths(i,n.w)},e.prototype.getWrapWidth=function(n){return this.getBBox().w},e.prototype.getChildAlign=function(n){return this.node.attributes.get("data-align")||"left"},e}(t)}mpadded$1.CommonMpaddedMixin=CommonMpaddedMixin;var mpadded={},__extends$1v=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$y=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$y=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$y.apply(this,arguments)};Object.defineProperty(mpadded,"__esModule",{value:!0});mpadded.MmlMpadded=void 0;var MmlNode_js_1$E=MmlNode,MmlMpadded=function(t){__extends$1v(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mpadded"},enumerable:!1,configurable:!0}),r.defaults=__assign$y(__assign$y({},MmlNode_js_1$E.AbstractMmlLayoutNode.defaults),{width:"",height:"",depth:"",lspace:0,voffset:0}),r}(MmlNode_js_1$E.AbstractMmlLayoutNode);mpadded.MmlMpadded=MmlMpadded;var __extends$1u=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$G=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__values$E=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mpadded$2,"__esModule",{value:!0});mpadded$2.CHTMLmpadded=void 0;var Wrapper_js_1$f=Wrapper$2,mpadded_js_1$2=mpadded$1,mpadded_js_2=mpadded,CHTMLmpadded=function(t){__extends$1u(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){var n,i,o=this.standardCHTMLnode(e),a=[],s={},l=__read$G(this.getDimens(),9),c=l[2],f=l[3],d=l[4],u=l[5],m=l[6],p=l[7],_=l[8];if(u&&(s.width=this.em(c+u)),(f||d)&&(s.margin=this.em(f)+" 0 "+this.em(d)),m+_||p){s.position="relative";var y=this.html("mjx-rbox",{style:{left:this.em(m+_),top:this.em(-p),"max-width":s.width}});m+_&&this.childNodes[0].getBBox().pwidth&&(this.adaptor.setAttribute(y,"width","full"),this.adaptor.setStyle(y,"left",this.em(m))),a.push(y)}o=this.adaptor.append(o,this.html("mjx-block",{style:s},a));try{for(var g=__values$E(this.childNodes),v=g.next();!v.done;v=g.next()){var x=v.value;x.toCHTML(a[0]||o)}}catch(b){n={error:b}}finally{try{v&&!v.done&&(i=g.return)&&i.call(g)}finally{if(n)throw n.error}}},r.kind=mpadded_js_2.MmlMpadded.prototype.kind,r.styles={"mjx-mpadded":{display:"inline-block"},"mjx-rbox":{display:"inline-block",position:"relative"}},r}((0,mpadded_js_1$2.CommonMpaddedMixin)(Wrapper_js_1$f.CHTMLWrapper));mpadded$2.CHTMLmpadded=CHTMLmpadded;var menclose$2={},menclose$1={},Notation$3={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__read||function(f,d){var u=typeof Symbol=="function"&&f[Symbol.iterator];if(!u)return f;var m=u.call(f),p,_=[],y;try{for(;(d===void 0||d-- >0)&&!(p=m.next()).done;)_.push(p.value)}catch(g){y={error:g}}finally{try{p&&!p.done&&(u=m.return)&&u.call(m)}finally{if(y)throw y.error}}return _};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonArrow=t.CommonDiagonalArrow=t.CommonDiagonalStrike=t.CommonBorder2=t.CommonBorder=t.arrowBBox=t.diagonalArrowDef=t.arrowDef=t.arrowBBoxW=t.arrowBBoxHD=t.arrowHead=t.fullBorder=t.fullPadding=t.fullBBox=t.sideNames=t.sideIndex=t.SOLID=t.PADDING=t.THICKNESS=t.ARROWY=t.ARROWDX=t.ARROWX=void 0,t.ARROWX=4,t.ARROWDX=1,t.ARROWY=2,t.THICKNESS=.067,t.PADDING=.2,t.SOLID=t.THICKNESS+"em solid",t.sideIndex={top:0,right:1,bottom:2,left:3},t.sideNames=Object.keys(t.sideIndex),t.fullBBox=function(f){return new Array(4).fill(f.thickness+f.padding)},t.fullPadding=function(f){return new Array(4).fill(f.padding)},t.fullBorder=function(f){return new Array(4).fill(f.thickness)};var e=function(f){return Math.max(f.padding,f.thickness*(f.arrowhead.x+f.arrowhead.dx+1))};t.arrowHead=e;var n=function(f,d){if(f.childNodes[0]){var u=f.childNodes[0].getBBox(),m=u.h,p=u.d;d[0]=d[2]=Math.max(0,f.thickness*f.arrowhead.y-(m+p)/2)}return d};t.arrowBBoxHD=n;var i=function(f,d){if(f.childNodes[0]){var u=f.childNodes[0].getBBox().w;d[1]=d[3]=Math.max(0,f.thickness*f.arrowhead.y-u/2)}return d};t.arrowBBoxW=i,t.arrowDef={up:[-Math.PI/2,!1,!0,"verticalstrike"],down:[Math.PI/2,!1,!0,"verticakstrike"],right:[0,!1,!1,"horizontalstrike"],left:[Math.PI,!1,!1,"horizontalstrike"],updown:[Math.PI/2,!0,!0,"verticalstrike uparrow downarrow"],leftright:[0,!0,!1,"horizontalstrike leftarrow rightarrow"]},t.diagonalArrowDef={updiagonal:[-1,0,!1,"updiagonalstrike northeastarrow"],northeast:[-1,0,!1,"updiagonalstrike updiagonalarrow"],southeast:[1,0,!1,"downdiagonalstrike"],northwest:[1,Math.PI,!1,"downdiagonalstrike"],southwest:[-1,Math.PI,!1,"updiagonalstrike"],northeastsouthwest:[-1,0,!0,"updiagonalstrike northeastarrow updiagonalarrow southwestarrow"],northwestsoutheast:[1,0,!0,"downdiagonalstrike northwestarrow southeastarrow"]},t.arrowBBox={up:function(f){return(0,t.arrowBBoxW)(f,[(0,t.arrowHead)(f),0,f.padding,0])},down:function(f){return(0,t.arrowBBoxW)(f,[f.padding,0,(0,t.arrowHead)(f),0])},right:function(f){return(0,t.arrowBBoxHD)(f,[0,(0,t.arrowHead)(f),0,f.padding])},left:function(f){return(0,t.arrowBBoxHD)(f,[0,f.padding,0,(0,t.arrowHead)(f)])},updown:function(f){return(0,t.arrowBBoxW)(f,[(0,t.arrowHead)(f),0,(0,t.arrowHead)(f),0])},leftright:function(f){return(0,t.arrowBBoxHD)(f,[0,(0,t.arrowHead)(f),0,(0,t.arrowHead)(f)])}};var o=function(f){return function(d){var u=t.sideIndex[d];return[d,{renderer:f,bbox:function(m){var p=[0,0,0,0];return p[u]=m.thickness+m.padding,p},border:function(m){var p=[0,0,0,0];return p[u]=m.thickness,p}}]}};t.CommonBorder=o;var a=function(f){return function(d,u,m){var p=t.sideIndex[u],_=t.sideIndex[m];return[d,{renderer:f,bbox:function(y){var g=y.thickness+y.padding,v=[0,0,0,0];return v[p]=v[_]=g,v},border:function(y){var g=[0,0,0,0];return g[p]=g[_]=y.thickness,g},remove:u+" "+m}]}};t.CommonBorder2=a;var s=function(f){return function(d){var u="mjx-"+d.charAt(0)+"strike";return[d+"diagonalstrike",{renderer:f(u),bbox:t.fullBBox}]}};t.CommonDiagonalStrike=s;var l=function(f){return function(d){var u=r(t.diagonalArrowDef[d],4),m=u[0],p=u[1],_=u[2],y=u[3];return[d+"arrow",{renderer:function(g,v){var x=r(g.arrowAW(),2),b=x[0],S=x[1],M=g.arrow(S,m*(b-p),_);f(g,M)},bbox:function(g){var v=g.arrowData(),x=v.a,b=v.x,S=v.y,M=r([g.arrowhead.x,g.arrowhead.y,g.arrowhead.dx],3),C=M[0],A=M[1],E=M[2],$=r(g.getArgMod(C+E,A),2),D=$[0],B=$[1],F=S+(D>x?g.thickness*B*Math.sin(D-x):0),I=b+(D>Math.PI/2-x?g.thickness*B*Math.sin(D+x-Math.PI/2):0);return[F,I,F,I]},remove:y}]}};t.CommonDiagonalArrow=l;var c=function(f){return function(d){var u=r(t.arrowDef[d],4),m=u[0],p=u[1],_=u[2],y=u[3];return[d+"arrow",{renderer:function(g,v){var x=g.getBBox(),b=x.w,S=x.h,M=x.d,C=r(_?[S+M,"X"]:[b,"Y"],2),A=C[0],E=C[1],$=g.getOffset(E),D=g.arrow(A,m,p,E,$);f(g,D)},bbox:t.arrowBBox[d],remove:y}]}};t.CommonArrow=c})(Notation$3);var __extends$1t=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__createBinding$b=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,r,e,n){n===void 0&&(n=e);var i=Object.getOwnPropertyDescriptor(r,e);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,i)}:function(t,r,e,n){n===void 0&&(n=e),t[n]=r[e]}),__setModuleDefault$b=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),__importStar$b=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var e in t)e!=="default"&&Object.prototype.hasOwnProperty.call(t,e)&&__createBinding$b(r,t,e);return __setModuleDefault$b(r,t),r},__read$F=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$p=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__values$D=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(menclose$1,"__esModule",{value:!0});menclose$1.CommonMencloseMixin=void 0;var Notation$2=__importStar$b(Notation$3),string_js_1$7=string;function CommonMencloseMixin(t){return function(r){__extends$1t(e,r);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(this,__spreadArray$p([],__read$F(n),!1))||this;return o.notations={},o.renderChild=null,o.msqrt=null,o.padding=Notation$2.PADDING,o.thickness=Notation$2.THICKNESS,o.arrowhead={x:Notation$2.ARROWX,y:Notation$2.ARROWY,dx:Notation$2.ARROWDX},o.TRBL=[0,0,0,0],o.getParameters(),o.getNotations(),o.removeRedundantNotations(),o.initializeNotations(),o.TRBL=o.getBBoxExtenders(),o}return e.prototype.getParameters=function(){var n=this.node.attributes,i=n.get("data-padding");i!==void 0&&(this.padding=this.length2em(i,Notation$2.PADDING));var o=n.get("data-thickness");o!==void 0&&(this.thickness=this.length2em(o,Notation$2.THICKNESS));var a=n.get("data-arrowhead");if(a!==void 0){var s=__read$F((0,string_js_1$7.split)(a),3),l=s[0],c=s[1],f=s[2];this.arrowhead={x:l?parseFloat(l):Notation$2.ARROWX,y:c?parseFloat(c):Notation$2.ARROWY,dx:f?parseFloat(f):Notation$2.ARROWDX}}},e.prototype.getNotations=function(){var n,i,o=this.constructor.notations;try{for(var a=__values$D((0,string_js_1$7.split)(this.node.attributes.get("notation"))),s=a.next();!s.done;s=a.next()){var l=s.value,c=o.get(l);c&&(this.notations[l]=c,c.renderChild&&(this.renderChild=c.renderer))}}catch(f){n={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},e.prototype.removeRedundantNotations=function(){var n,i,o,a;try{for(var s=__values$D(Object.keys(this.notations)),l=s.next();!l.done;l=s.next()){var c=l.value;if(this.notations[c]){var f=this.notations[c].remove||"";try{for(var d=(o=void 0,__values$D(f.split(/ /))),u=d.next();!u.done;u=d.next()){var m=u.value;delete this.notations[m]}}catch(p){o={error:p}}finally{try{u&&!u.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}}}}catch(p){n={error:p}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},e.prototype.initializeNotations=function(){var n,i;try{for(var o=__values$D(Object.keys(this.notations)),a=o.next();!a.done;a=o.next()){var s=a.value,l=this.notations[s].init;l&&l(this)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e.prototype.computeBBox=function(n,i){i===void 0&&(i=!1);var o=__read$F(this.TRBL,4),a=o[0],s=o[1],l=o[2],c=o[3],f=this.childNodes[0].getBBox();n.combine(f,c,0),n.h+=a,n.d+=l,n.w+=s,this.setChildPWidths(i)},e.prototype.getBBoxExtenders=function(){var n,i,o=[0,0,0,0];try{for(var a=__values$D(Object.keys(this.notations)),s=a.next();!s.done;s=a.next()){var l=s.value;this.maximizeEntries(o,this.notations[l].bbox(this))}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o},e.prototype.getPadding=function(){var n,i,o=this,a=[0,0,0,0];try{for(var s=__values$D(Object.keys(this.notations)),l=s.next();!l.done;l=s.next()){var c=l.value,f=this.notations[c].border;f&&this.maximizeEntries(a,f(this))}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return[0,1,2,3].map(function(d){return o.TRBL[d]-a[d]})},e.prototype.maximizeEntries=function(n,i){for(var o=0;o<n.length;o++)n[o]<i[o]&&(n[o]=i[o])},e.prototype.getOffset=function(n){var i=__read$F(this.TRBL,4),o=i[0],a=i[1],s=i[2],l=i[3],c=(n==="X"?a-l:s-o)/2;return Math.abs(c)>.001?c:0},e.prototype.getArgMod=function(n,i){return[Math.atan2(i,n),Math.sqrt(n*n+i*i)]},e.prototype.arrow=function(n,i,o,a,s){return null},e.prototype.arrowData=function(){var n=__read$F([this.padding,this.thickness],2),i=n[0],o=n[1],a=o*(this.arrowhead.x+Math.max(1,this.arrowhead.dx)),s=this.childNodes[0].getBBox(),l=s.h,c=s.d,f=s.w,d=l+c,u=Math.sqrt(d*d+f*f),m=Math.max(i,a*f/u),p=Math.max(i,a*d/u),_=__read$F(this.getArgMod(f+2*m,d+2*p),2),y=_[0],g=_[1];return{a:y,W:g,x:m,y:p}},e.prototype.arrowAW=function(){var n=this.childNodes[0].getBBox(),i=n.h,o=n.d,a=n.w,s=__read$F(this.TRBL,4),l=s[0],c=s[1],f=s[2],d=s[3];return this.getArgMod(d+a+c,l+i+o+f)},e.prototype.createMsqrt=function(n){var i=this.node.factory,o=i.create("msqrt");o.inheritAttributesFrom(this.node),o.childNodes[0]=n.node;var a=this.wrap(o);return a.parent=this,a},e.prototype.sqrtTRBL=function(){var n=this.msqrt.getBBox(),i=this.msqrt.childNodes[0].getBBox();return[n.h-i.h,0,n.d-i.d,n.w-i.w]},e}(t)}menclose$1.CommonMencloseMixin=CommonMencloseMixin;var Notation$1={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(m,p,_,y){y===void 0&&(y=_);var g=Object.getOwnPropertyDescriptor(p,_);(!g||("get"in g?!p.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return p[_]}}),Object.defineProperty(m,y,g)}:function(m,p,_,y){y===void 0&&(y=_),m[y]=p[_]}),e=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(m,p){Object.defineProperty(m,"default",{enumerable:!0,value:p})}:function(m,p){m.default=p}),n=commonjsGlobal&&commonjsGlobal.__importStar||function(m){if(m&&m.__esModule)return m;var p={};if(m!=null)for(var _ in m)_!=="default"&&Object.prototype.hasOwnProperty.call(m,_)&&r(p,m,_);return e(p,m),p},i=commonjsGlobal&&commonjsGlobal.__exportStar||function(m,p){for(var _ in m)_!=="default"&&!Object.prototype.hasOwnProperty.call(p,_)&&r(p,m,_)},o=commonjsGlobal&&commonjsGlobal.__read||function(m,p){var _=typeof Symbol=="function"&&m[Symbol.iterator];if(!_)return m;var y=_.call(m),g,v=[],x;try{for(;(p===void 0||p-- >0)&&!(g=y.next()).done;)v.push(g.value)}catch(b){x={error:b}}finally{try{g&&!g.done&&(_=y.return)&&_.call(y)}finally{if(x)throw x.error}}return v};Object.defineProperty(t,"__esModule",{value:!0}),t.Arrow=t.DiagonalArrow=t.DiagonalStrike=t.Border2=t.Border=t.RenderElement=void 0;var a=n(Notation$3);i(Notation$3,t);var s=function(m,p){return p===void 0&&(p=""),function(_,y){var g=_.adjustBorder(_.html("mjx-"+m));if(p){var v=_.getOffset(p);if(_.thickness!==a.THICKNESS||v){var x="translate".concat(p,"(").concat(_.em(_.thickness/2-v),")");_.adaptor.setStyle(g,"transform",x)}}_.adaptor.append(_.chtml,g)}};t.RenderElement=s;var l=function(m){return a.CommonBorder(function(p,_){p.adaptor.setStyle(_,"border-"+m,p.em(p.thickness)+" solid")})(m)};t.Border=l;var c=function(m,p,_){return a.CommonBorder2(function(y,g){var v=y.em(y.thickness)+" solid";y.adaptor.setStyle(g,"border-"+p,v),y.adaptor.setStyle(g,"border-"+_,v)})(m,p,_)};t.Border2=c;var f=function(m,p){return a.CommonDiagonalStrike(function(_){return function(y,g){var v=y.getBBox(),x=v.w,b=v.h,S=v.d,M=o(y.getArgMod(x,b+S),2),C=M[0],A=M[1],E=p*y.thickness/2,$=y.adjustBorder(y.html(_,{style:{width:y.em(A),transform:"rotate("+y.fixed(-p*C)+"rad) translateY("+E+"em)"}}));y.adaptor.append(y.chtml,$)}})(m)};t.DiagonalStrike=f;var d=function(m){return a.CommonDiagonalArrow(function(p,_){p.adaptor.append(p.chtml,_)})(m)};t.DiagonalArrow=d;var u=function(m){return a.CommonArrow(function(p,_){p.adaptor.append(p.chtml,_)})(m)};t.Arrow=u})(Notation$1);var menclose={},__extends$1s=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$x=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$x=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$x.apply(this,arguments)};Object.defineProperty(menclose,"__esModule",{value:!0});menclose.MmlMenclose=void 0;var MmlNode_js_1$D=MmlNode,MmlMenclose=function(t){__extends$1s(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.texclass=MmlNode_js_1$D.TEXCLASS.ORD,e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"menclose"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linebreakContininer",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.setTeXclass=function(e){return e=this.childNodes[0].setTeXclass(e),this.updateTeXclass(this.childNodes[0]),e},r.defaults=__assign$x(__assign$x({},MmlNode_js_1$D.AbstractMmlNode.defaults),{notation:"longdiv"}),r}(MmlNode_js_1$D.AbstractMmlNode);menclose.MmlMenclose=MmlMenclose;var __extends$1r=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__createBinding$a=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,r,e,n){n===void 0&&(n=e);var i=Object.getOwnPropertyDescriptor(r,e);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,i)}:function(t,r,e,n){n===void 0&&(n=e),t[n]=r[e]}),__setModuleDefault$a=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),__importStar$a=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var e in t)e!=="default"&&Object.prototype.hasOwnProperty.call(t,e)&&__createBinding$a(r,t,e);return __setModuleDefault$a(r,t),r},__values$C=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$E=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(menclose$2,"__esModule",{value:!0});menclose$2.CHTMLmenclose=void 0;var Wrapper_js_1$e=Wrapper$2,menclose_js_1$2=menclose$1,Notation=__importStar$a(Notation$1),menclose_js_2=menclose,lengths_js_1$4=lengths;function Angle(t,r){return Math.atan2(t,r).toFixed(3).replace(/\.?0+$/,"")}var ANGLE=Angle(Notation.ARROWDX,Notation.ARROWY),CHTMLmenclose=function(t){__extends$1r(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){var n,i,o,a,s=this.adaptor,l=this.standardCHTMLnode(e),c=s.append(l,this.html("mjx-box"));this.renderChild?this.renderChild(this,c):this.childNodes[0].toCHTML(c);try{for(var f=__values$C(Object.keys(this.notations)),d=f.next();!d.done;d=f.next()){var u=d.value,m=this.notations[u];!m.renderChild&&m.renderer(this,c)}}catch(x){n={error:x}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}var p=this.getPadding();try{for(var _=__values$C(Notation.sideNames),y=_.next();!y.done;y=_.next()){var g=y.value,v=Notation.sideIndex[g];p[v]>0&&s.setStyle(c,"padding-"+g,this.em(p[v]))}}catch(x){o={error:x}}finally{try{y&&!y.done&&(a=_.return)&&a.call(_)}finally{if(o)throw o.error}}},r.prototype.arrow=function(e,n,i,o,a){o===void 0&&(o=""),a===void 0&&(a=0);var s=this.getBBox().w,l={width:this.em(e)};s!==e&&(l.left=this.em((s-e)/2)),n&&(l.transform="rotate("+this.fixed(n)+"rad)");var c=this.html("mjx-arrow",{style:l},[this.html("mjx-aline"),this.html("mjx-rthead"),this.html("mjx-rbhead")]);return i&&(this.adaptor.append(c,this.html("mjx-lthead")),this.adaptor.append(c,this.html("mjx-lbhead")),this.adaptor.setAttribute(c,"double","true")),this.adjustArrow(c,i),this.moveArrow(c,o,a),c},r.prototype.adjustArrow=function(e,n){var i=this,o=this.thickness,a=this.arrowhead;if(!(a.x===Notation.ARROWX&&a.y===Notation.ARROWY&&a.dx===Notation.ARROWDX&&o===Notation.THICKNESS)){var s=__read$E([o*a.x,o*a.y].map(function(g){return i.em(g)}),2),l=s[0],c=s[1],f=Angle(a.dx,a.y),d=__read$E(this.adaptor.childNodes(e),5),u=d[0],m=d[1],p=d[2],_=d[3],y=d[4];this.adjustHead(m,[c,"0","1px",l],f),this.adjustHead(p,["1px","0",c,l],"-"+f),this.adjustHead(_,[c,l,"1px","0"],"-"+f),this.adjustHead(y,["1px",l,c,"0"],f),this.adjustLine(u,o,a.x,n)}},r.prototype.adjustHead=function(e,n,i){e&&(this.adaptor.setStyle(e,"border-width",n.join(" ")),this.adaptor.setStyle(e,"transform","skewX("+i+"rad)"))},r.prototype.adjustLine=function(e,n,i,o){this.adaptor.setStyle(e,"borderTop",this.em(n)+" solid"),this.adaptor.setStyle(e,"top",this.em(-n/2)),this.adaptor.setStyle(e,"right",this.em(n*(i-1))),o&&this.adaptor.setStyle(e,"left",this.em(n*(i-1)))},r.prototype.moveArrow=function(e,n,i){if(i){var o=this.adaptor.getStyle(e,"transform");this.adaptor.setStyle(e,"transform","translate".concat(n,"(").concat(this.em(-i),")").concat(o?" "+o:""))}},r.prototype.adjustBorder=function(e){return this.thickness!==Notation.THICKNESS&&this.adaptor.setStyle(e,"borderWidth",this.em(this.thickness)),e},r.prototype.adjustThickness=function(e){return this.thickness!==Notation.THICKNESS&&this.adaptor.setStyle(e,"strokeWidth",this.fixed(this.thickness)),e},r.prototype.fixed=function(e,n){return n===void 0&&(n=3),Math.abs(e)<6e-4?"0":e.toFixed(n).replace(/\.?0+$/,"")},r.prototype.em=function(e){return t.prototype.em.call(this,e)},r.kind=menclose_js_2.MmlMenclose.prototype.kind,r.styles={"mjx-menclose":{position:"relative"},"mjx-menclose > mjx-dstrike":{display:"inline-block",left:0,top:0,position:"absolute","border-top":Notation.SOLID,"transform-origin":"top left"},"mjx-menclose > mjx-ustrike":{display:"inline-block",left:0,bottom:0,position:"absolute","border-top":Notation.SOLID,"transform-origin":"bottom left"},"mjx-menclose > mjx-hstrike":{"border-top":Notation.SOLID,position:"absolute",left:0,right:0,bottom:"50%",transform:"translateY("+(0,lengths_js_1$4.em)(Notation.THICKNESS/2)+")"},"mjx-menclose > mjx-vstrike":{"border-left":Notation.SOLID,position:"absolute",top:0,bottom:0,right:"50%",transform:"translateX("+(0,lengths_js_1$4.em)(Notation.THICKNESS/2)+")"},"mjx-menclose > mjx-rbox":{position:"absolute",top:0,bottom:0,right:0,left:0,border:Notation.SOLID,"border-radius":(0,lengths_js_1$4.em)(Notation.THICKNESS+Notation.PADDING)},"mjx-menclose > mjx-cbox":{position:"absolute",top:0,bottom:0,right:0,left:0,border:Notation.SOLID,"border-radius":"50%"},"mjx-menclose > mjx-arrow":{position:"absolute",left:0,bottom:"50%",height:0,width:0},"mjx-menclose > mjx-arrow > *":{display:"block",position:"absolute","transform-origin":"bottom","border-left":(0,lengths_js_1$4.em)(Notation.THICKNESS*Notation.ARROWX)+" solid","border-right":0,"box-sizing":"border-box"},"mjx-menclose > mjx-arrow > mjx-aline":{left:0,top:(0,lengths_js_1$4.em)(-Notation.THICKNESS/2),right:(0,lengths_js_1$4.em)(Notation.THICKNESS*(Notation.ARROWX-1)),height:0,"border-top":(0,lengths_js_1$4.em)(Notation.THICKNESS)+" solid","border-left":0},"mjx-menclose > mjx-arrow[double] > mjx-aline":{left:(0,lengths_js_1$4.em)(Notation.THICKNESS*(Notation.ARROWX-1)),height:0},"mjx-menclose > mjx-arrow > mjx-rthead":{transform:"skewX("+ANGLE+"rad)",right:0,bottom:"-1px","border-bottom":"1px solid transparent","border-top":(0,lengths_js_1$4.em)(Notation.THICKNESS*Notation.ARROWY)+" solid transparent"},"mjx-menclose > mjx-arrow > mjx-rbhead":{transform:"skewX(-"+ANGLE+"rad)","transform-origin":"top",right:0,top:"-1px","border-top":"1px solid transparent","border-bottom":(0,lengths_js_1$4.em)(Notation.THICKNESS*Notation.ARROWY)+" solid transparent"},"mjx-menclose > mjx-arrow > mjx-lthead":{transform:"skewX(-"+ANGLE+"rad)",left:0,bottom:"-1px","border-left":0,"border-right":(0,lengths_js_1$4.em)(Notation.THICKNESS*Notation.ARROWX)+" solid","border-bottom":"1px solid transparent","border-top":(0,lengths_js_1$4.em)(Notation.THICKNESS*Notation.ARROWY)+" solid transparent"},"mjx-menclose > mjx-arrow > mjx-lbhead":{transform:"skewX("+ANGLE+"rad)","transform-origin":"top",left:0,top:"-1px","border-left":0,"border-right":(0,lengths_js_1$4.em)(Notation.THICKNESS*Notation.ARROWX)+" solid","border-top":"1px solid transparent","border-bottom":(0,lengths_js_1$4.em)(Notation.THICKNESS*Notation.ARROWY)+" solid transparent"},"mjx-menclose > dbox":{position:"absolute",top:0,bottom:0,left:(0,lengths_js_1$4.em)(-1.5*Notation.PADDING),width:(0,lengths_js_1$4.em)(3*Notation.PADDING),border:(0,lengths_js_1$4.em)(Notation.THICKNESS)+" solid","border-radius":"50%","clip-path":"inset(0 0 0 "+(0,lengths_js_1$4.em)(1.5*Notation.PADDING)+")","box-sizing":"border-box"}},r.notations=new Map([Notation.Border("top"),Notation.Border("right"),Notation.Border("bottom"),Notation.Border("left"),Notation.Border2("actuarial","top","right"),Notation.Border2("madruwb","bottom","right"),Notation.DiagonalStrike("up",1),Notation.DiagonalStrike("down",-1),["horizontalstrike",{renderer:Notation.RenderElement("hstrike","Y"),bbox:function(e){return[0,e.padding,0,e.padding]}}],["verticalstrike",{renderer:Notation.RenderElement("vstrike","X"),bbox:function(e){return[e.padding,0,e.padding,0]}}],["box",{renderer:function(e,n){e.adaptor.setStyle(n,"border",e.em(e.thickness)+" solid")},bbox:Notation.fullBBox,border:Notation.fullBorder,remove:"left right top bottom"}],["roundedbox",{renderer:Notation.RenderElement("rbox"),bbox:Notation.fullBBox}],["circle",{renderer:Notation.RenderElement("cbox"),bbox:Notation.fullBBox}],["phasorangle",{renderer:function(e,n){var i=e.getBBox(),o=i.h,a=i.d,s=__read$E(e.getArgMod(1.75*e.padding,o+a),2),l=s[0],c=s[1],f=e.thickness*Math.sin(l)*.9;e.adaptor.setStyle(n,"border-bottom",e.em(e.thickness)+" solid");var d=e.adjustBorder(e.html("mjx-ustrike",{style:{width:e.em(c),transform:"translateX("+e.em(f)+") rotate("+e.fixed(-l)+"rad)"}}));e.adaptor.append(e.chtml,d)},bbox:function(e){var n=e.padding/2,i=e.thickness;return[2*n,n,n+i,3*n+i]},border:function(e){return[0,0,e.thickness,0]},remove:"bottom"}],Notation.Arrow("up"),Notation.Arrow("down"),Notation.Arrow("left"),Notation.Arrow("right"),Notation.Arrow("updown"),Notation.Arrow("leftright"),Notation.DiagonalArrow("updiagonal"),Notation.DiagonalArrow("northeast"),Notation.DiagonalArrow("southeast"),Notation.DiagonalArrow("northwest"),Notation.DiagonalArrow("southwest"),Notation.DiagonalArrow("northeastsouthwest"),Notation.DiagonalArrow("northwestsoutheast"),["longdiv",{renderer:function(e,n){var i=e.adaptor;i.setStyle(n,"border-top",e.em(e.thickness)+" solid");var o=i.append(e.chtml,e.html("dbox")),a=e.thickness,s=e.padding;a!==Notation.THICKNESS&&i.setStyle(o,"border-width",e.em(a)),s!==Notation.PADDING&&(i.setStyle(o,"left",e.em(-1.5*s)),i.setStyle(o,"width",e.em(3*s)),i.setStyle(o,"clip-path","inset(0 0 0 "+e.em(1.5*s)+")"))},bbox:function(e){var n=e.padding,i=e.thickness;return[n+i,n,n,2*n+i/2]}}],["radical",{renderer:function(e,n){e.msqrt.toCHTML(n);var i=e.sqrtTRBL();e.adaptor.setStyle(e.msqrt.chtml,"margin",i.map(function(o){return e.em(-o)}).join(" "))},init:function(e){e.msqrt=e.createMsqrt(e.childNodes[0])},bbox:function(e){return e.sqrtTRBL()},renderChild:!0}]]),r}((0,menclose_js_1$2.CommonMencloseMixin)(Wrapper_js_1$e.CHTMLWrapper));menclose$2.CHTMLmenclose=CHTMLmenclose;var mrow$2={},mrow$1={},__extends$1q=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$D=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$o=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__values$B=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mrow$1,"__esModule",{value:!0});mrow$1.CommonInferredMrowMixin=mrow$1.CommonMrowMixin=void 0;var BBox_js_1$2=BBox$1;function CommonMrowMixin(t){return function(r){__extends$1q(e,r);function e(){for(var n,i,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var s=r.apply(this,__spreadArray$o([],__read$D(o),!1))||this;s.stretchChildren();try{for(var l=__values$B(s.childNodes),c=l.next();!c.done;c=l.next()){var f=c.value;if(f.bbox.pwidth){s.bbox.pwidth=BBox_js_1$2.BBox.fullWidth;break}}}catch(d){n={error:d}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return s}return Object.defineProperty(e.prototype,"fixesPWidth",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.stretchChildren=function(){var n,i,o,a,s,l,c=[];try{for(var f=__values$B(this.childNodes),d=f.next();!d.done;d=f.next()){var u=d.value;u.canStretch(1)&&c.push(u)}}catch(D){n={error:D}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}var m=c.length,p=this.childNodes.length;if(m&&p>1){var _=0,y=0,g=m>1&&m===p;try{for(var v=__values$B(this.childNodes),x=v.next();!x.done;x=v.next()){var u=x.value,b=u.stretch.dir===0;if(g||b){var S=u.getOuterBBox(b),M=S.h,C=S.d,A=S.rscale;M*=A,C*=A,M>_&&(_=M),C>y&&(y=C)}}}catch(D){o={error:D}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(o)throw o.error}}try{for(var E=__values$B(c),$=E.next();!$.done;$=E.next()){var u=$.value;u.coreMO().getStretchedVariant([_,y])}}catch(D){s={error:D}}finally{try{$&&!$.done&&(l=E.return)&&l.call(E)}finally{if(s)throw s.error}}}},e}(t)}mrow$1.CommonMrowMixin=CommonMrowMixin;function CommonInferredMrowMixin(t){return function(r){__extends$1q(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.getScale=function(){this.bbox.scale=this.parent.bbox.scale,this.bbox.rscale=1},e}(t)}mrow$1.CommonInferredMrowMixin=CommonInferredMrowMixin;var mrow={},__extends$1p=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$w=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$w=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$w.apply(this,arguments)},__values$A=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mrow,"__esModule",{value:!0});mrow.MmlInferredMrow=mrow.MmlMrow=void 0;var MmlNode_js_1$C=MmlNode,MmlMrow=function(t){__extends$1p(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e._core=null,e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mrow"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSpacelike",{get:function(){var e,n;try{for(var i=__values$A(this.childNodes),o=i.next();!o.done;o=i.next()){var a=o.value;if(!a.isSpacelike)return!1}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isEmbellished",{get:function(){var e,n,i=!1,o=0;try{for(var a=__values$A(this.childNodes),s=a.next();!s.done;s=a.next()){var l=s.value;if(l){if(l.isEmbellished){if(i)return!1;i=!0,this._core=o}else if(!l.isSpacelike)return!1}o++}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i},enumerable:!1,configurable:!0}),r.prototype.core=function(){return!this.isEmbellished||this._core==null?this:this.childNodes[this._core]},r.prototype.coreMO=function(){return!this.isEmbellished||this._core==null?this:this.childNodes[this._core].coreMO()},r.prototype.nonSpaceLength=function(){var e,n,i=0;try{for(var o=__values$A(this.childNodes),a=o.next();!a.done;a=o.next()){var s=a.value;s&&!s.isSpacelike&&i++}}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i},r.prototype.firstNonSpace=function(){var e,n;try{for(var i=__values$A(this.childNodes),o=i.next();!o.done;o=i.next()){var a=o.value;if(a&&!a.isSpacelike)return a}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return null},r.prototype.lastNonSpace=function(){for(var e=this.childNodes.length;--e>=0;){var n=this.childNodes[e];if(n&&!n.isSpacelike)return n}return null},r.prototype.setTeXclass=function(e){var n,i,o,a;if(this.getProperty("open")!=null||this.getProperty("close")!=null){this.getPrevClass(e),e=null;try{for(var s=__values$A(this.childNodes),l=s.next();!l.done;l=s.next()){var c=l.value;e=c.setTeXclass(e)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}this.texClass==null&&(this.texClass=MmlNode_js_1$C.TEXCLASS.INNER)}else{try{for(var f=__values$A(this.childNodes),d=f.next();!d.done;d=f.next()){var c=d.value;e=c.setTeXclass(e)}}catch(u){o={error:u}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}this.childNodes[0]&&this.updateTeXclass(this.childNodes[0])}return e},r.defaults=__assign$w({},MmlNode_js_1$C.AbstractMmlNode.defaults),r}(MmlNode_js_1$C.AbstractMmlNode);mrow.MmlMrow=MmlMrow;var MmlInferredMrow=function(t){__extends$1p(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"inferredMrow"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isInferred",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"notParent",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.toString=function(){return"["+this.childNodes.join(",")+"]"},r.defaults=MmlMrow.defaults,r}(MmlMrow);mrow.MmlInferredMrow=MmlInferredMrow;var __extends$1o=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__values$z=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mrow$2,"__esModule",{value:!0});mrow$2.CHTMLinferredMrow=mrow$2.CHTMLmrow=void 0;var Wrapper_js_1$d=Wrapper$2,mrow_js_1$2=mrow$1,mrow_js_2=mrow$1,mrow_js_3=mrow,CHTMLmrow=function(t){__extends$1o(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){var n,i,o=this.node.isInferred?this.chtml=e:this.standardCHTMLnode(e),a=!1;try{for(var s=__values$z(this.childNodes),l=s.next();!l.done;l=s.next()){var c=l.value;c.toCHTML(o),c.bbox.w<0&&(a=!0)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}if(a){var f=this.getBBox().w;f&&(this.adaptor.setStyle(o,"width",this.em(Math.max(0,f))),f<0&&this.adaptor.setStyle(o,"marginRight",this.em(f)))}},r.kind=mrow_js_3.MmlMrow.prototype.kind,r}((0,mrow_js_1$2.CommonMrowMixin)(Wrapper_js_1$d.CHTMLWrapper));mrow$2.CHTMLmrow=CHTMLmrow;var CHTMLinferredMrow=function(t){__extends$1o(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.kind=mrow_js_3.MmlInferredMrow.prototype.kind,r}((0,mrow_js_2.CommonInferredMrowMixin)(CHTMLmrow));mrow$2.CHTMLinferredMrow=CHTMLinferredMrow;var mfenced$2={},mfenced$1={},__extends$1n=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$C=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$n=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__values$y=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mfenced$1,"__esModule",{value:!0});mfenced$1.CommonMfencedMixin=void 0;function CommonMfencedMixin(t){return function(r){__extends$1n(e,r);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(this,__spreadArray$n([],__read$C(n),!1))||this;return o.mrow=null,o.createMrow(),o.addMrowChildren(),o}return e.prototype.createMrow=function(){var n=this.node.factory,i=n.create("inferredMrow");i.inheritAttributesFrom(this.node),this.mrow=this.wrap(i),this.mrow.parent=this},e.prototype.addMrowChildren=function(){var n,i,o=this.node,a=this.mrow;this.addMo(o.open),this.childNodes.length&&a.childNodes.push(this.childNodes[0]);var s=0;try{for(var l=__values$y(this.childNodes.slice(1)),c=l.next();!c.done;c=l.next()){var f=c.value;this.addMo(o.separators[s++]),a.childNodes.push(f)}}catch(d){n={error:d}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}this.addMo(o.close),a.stretchChildren()},e.prototype.addMo=function(n){if(n){var i=this.wrap(n);this.mrow.childNodes.push(i),i.parent=this.mrow}},e.prototype.computeBBox=function(n,i){i===void 0&&(i=!1),n.updateFrom(this.mrow.getOuterBBox()),this.setChildPWidths(i)},e}(t)}mfenced$1.CommonMfencedMixin=CommonMfencedMixin;var mfenced={},__extends$1m=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$v=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$v=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$v.apply(this,arguments)},__values$x=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mfenced,"__esModule",{value:!0});mfenced.MmlMfenced=void 0;var MmlNode_js_1$B=MmlNode,MmlMfenced=function(t){__extends$1m(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.texclass=MmlNode_js_1$B.TEXCLASS.INNER,e.separators=[],e.open=null,e.close=null,e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mfenced"},enumerable:!1,configurable:!0}),r.prototype.setTeXclass=function(e){this.getPrevClass(e),this.open&&(e=this.open.setTeXclass(e)),this.childNodes[0]&&(e=this.childNodes[0].setTeXclass(e));for(var n=1,i=this.childNodes.length;n<i;n++)this.separators[n-1]&&(e=this.separators[n-1].setTeXclass(e)),this.childNodes[n]&&(e=this.childNodes[n].setTeXclass(e));return this.close&&(e=this.close.setTeXclass(e)),this.updateTeXclass(this.open),e},r.prototype.setChildInheritedAttributes=function(e,n,i,o){var a,s;this.addFakeNodes();try{for(var l=__values$x([this.open,this.close].concat(this.separators)),c=l.next();!c.done;c=l.next()){var f=c.value;f&&f.setInheritedAttributes(e,n,i,o)}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}t.prototype.setChildInheritedAttributes.call(this,e,n,i,o)},r.prototype.addFakeNodes=function(){var e,n,i=this.attributes.getList("open","close","separators"),o=i.open,a=i.close,s=i.separators;if(o=o.replace(/[ \t\n\r]/g,""),a=a.replace(/[ \t\n\r]/g,""),s=s.replace(/[ \t\n\r]/g,""),o&&(this.open=this.fakeNode(o,{fence:!0,form:"prefix"},MmlNode_js_1$B.TEXCLASS.OPEN)),s){for(;s.length<this.childNodes.length-1;)s+=s.charAt(s.length-1);var l=0;try{for(var c=__values$x(this.childNodes.slice(1)),f=c.next();!f.done;f=c.next()){var d=f.value;d&&this.separators.push(this.fakeNode(s.charAt(l++)))}}catch(u){e={error:u}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}}a&&(this.close=this.fakeNode(a,{fence:!0,form:"postfix"},MmlNode_js_1$B.TEXCLASS.CLOSE))},r.prototype.fakeNode=function(e,n,i){n===void 0&&(n={}),i===void 0&&(i=null);var o=this.factory.create("text").setText(e),a=this.factory.create("mo",n,[o]);return a.texClass=i,a.parent=this,a},r.defaults=__assign$v(__assign$v({},MmlNode_js_1$B.AbstractMmlNode.defaults),{open:"(",close:")",separators:","}),r}(MmlNode_js_1$B.AbstractMmlNode);mfenced.MmlMfenced=MmlMfenced;var __extends$1l=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mfenced$2,"__esModule",{value:!0});mfenced$2.CHTMLmfenced=void 0;var Wrapper_js_1$c=Wrapper$2,mfenced_js_1$2=mfenced$1,mfenced_js_2=mfenced,CHTMLmfenced=function(t){__extends$1l(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){var n=this.standardCHTMLnode(e);this.mrow.toCHTML(n)},r.kind=mfenced_js_2.MmlMfenced.prototype.kind,r}((0,mfenced_js_1$2.CommonMfencedMixin)(Wrapper_js_1$c.CHTMLWrapper));mfenced$2.CHTMLmfenced=CHTMLmfenced;var mfrac$2={},mfrac$1={},__extends$1k=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$B=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$m=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(mfrac$1,"__esModule",{value:!0});mfrac$1.CommonMfracMixin=void 0;function CommonMfracMixin(t){return function(r){__extends$1k(e,r);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(this,__spreadArray$m([],__read$B(n),!1))||this;if(o.bevel=null,o.pad=o.node.getProperty("withDelims")?0:o.font.params.nulldelimiterspace,o.node.attributes.get("bevelled")){var a=o.getBevelData(o.isDisplay()).H,s=o.bevel=o.createMo("/");s.node.attributes.set("symmetric",!0),s.canStretch(1),s.getStretchedVariant([a],!0)}return o}return e.prototype.computeBBox=function(n,i){i===void 0&&(i=!1),n.empty();var o=this.node.attributes.getList("linethickness","bevelled"),a=o.linethickness,s=o.bevelled,l=this.isDisplay(),c=null;if(s)this.getBevelledBBox(n,l);else{var f=this.length2em(String(a),.06);c=-2*this.pad,f===0?this.getAtopBBox(n,l):(this.getFractionBBox(n,l,f),c-=.2),c+=n.w}n.clean(),this.setChildPWidths(i,c)},e.prototype.getFractionBBox=function(n,i,o){var a=this.childNodes[0].getOuterBBox(),s=this.childNodes[1].getOuterBBox(),l=this.font.params,c=l.axis_height,f=this.getTUV(i,o),d=f.T,u=f.u,m=f.v;n.combine(a,0,c+d+Math.max(a.d*a.rscale,u)),n.combine(s,0,c-d-Math.max(s.h*s.rscale,m)),n.w+=2*this.pad+.2},e.prototype.getTUV=function(n,i){var o=this.font.params,a=o.axis_height,s=(n?3.5:1.5)*i;return{T:(n?3.5:1.5)*i,u:(n?o.num1:o.num2)-a-s,v:(n?o.denom1:o.denom2)+a-s}},e.prototype.getAtopBBox=function(n,i){var o=this.getUVQ(i),a=o.u,s=o.v,l=o.nbox,c=o.dbox;n.combine(l,0,a),n.combine(c,0,-s),n.w+=2*this.pad},e.prototype.getUVQ=function(n){var i=this.childNodes[0].getOuterBBox(),o=this.childNodes[1].getOuterBBox(),a=this.font.params,s=__read$B(n?[a.num1,a.denom1]:[a.num3,a.denom2],2),l=s[0],c=s[1],f=(n?7:3)*a.rule_thickness,d=l-i.d*i.scale-(o.h*o.scale-c);return d<f&&(l+=(f-d)/2,c+=(f-d)/2,d=f),{u:l,v:c,q:d,nbox:i,dbox:o}},e.prototype.getBevelledBBox=function(n,i){var o=this.getBevelData(i),a=o.u,s=o.v,l=o.delta,c=o.nbox,f=o.dbox,d=this.bevel.getOuterBBox();n.combine(c,0,a),n.combine(d,n.w-l/2,0),n.combine(f,n.w-l/2,s)},e.prototype.getBevelData=function(n){var i=this.childNodes[0].getOuterBBox(),o=this.childNodes[1].getOuterBBox(),a=n?.4:.15,s=Math.max(i.scale*(i.h+i.d),o.scale*(o.h+o.d))+2*a,l=this.font.params.axis_height,c=i.scale*(i.d-i.h)/2+l+a,f=o.scale*(o.d-o.h)/2+l-a;return{H:s,delta:a,u:c,v:f,nbox:i,dbox:o}},e.prototype.canStretch=function(n){return!1},e.prototype.isDisplay=function(){var n=this.node.attributes.getList("displaystyle","scriptlevel"),i=n.displaystyle,o=n.scriptlevel;return i&&o===0},e.prototype.getWrapWidth=function(n){var i=this.node.attributes;if(i.get("bevelled"))return this.childNodes[n].getOuterBBox().w;var o=this.getBBox().w,a=this.length2em(i.get("linethickness"));return o-(a?.2:0)-2*this.pad},e.prototype.getChildAlign=function(n){var i=this.node.attributes;return i.get("bevelled")?"left":i.get(["numalign","denomalign"][n])},e}(t)}mfrac$1.CommonMfracMixin=CommonMfracMixin;var mfrac={},__extends$1j=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$u=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$u=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$u.apply(this,arguments)},__values$w=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mfrac,"__esModule",{value:!0});mfrac.MmlMfrac=void 0;var MmlNode_js_1$A=MmlNode,MmlMfrac=function(t){__extends$1j(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mfrac"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.setTeXclass=function(e){var n,i;this.getPrevClass(e);try{for(var o=__values$w(this.childNodes),a=o.next();!a.done;a=o.next()){var s=a.value;s.setTeXclass(null)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return this},r.prototype.setChildInheritedAttributes=function(e,n,i,o){(!n||i>0)&&i++,this.childNodes[0].setInheritedAttributes(e,!1,i,o),this.childNodes[1].setInheritedAttributes(e,!1,i,!0)},r.defaults=__assign$u(__assign$u({},MmlNode_js_1$A.AbstractMmlBaseNode.defaults),{linethickness:"medium",numalign:"center",denomalign:"center",bevelled:!1}),r}(MmlNode_js_1$A.AbstractMmlBaseNode);mfrac.MmlMfrac=MmlMfrac;var __extends$1i=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$t=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$t=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$t.apply(this,arguments)};Object.defineProperty(mfrac$2,"__esModule",{value:!0});mfrac$2.CHTMLmfrac=void 0;var Wrapper_js_1$b=Wrapper$2,mfrac_js_1$2=mfrac$1,mfrac_js_2=mfrac,CHTMLmfrac=function(t){__extends$1i(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){this.standardCHTMLnode(e);var n=this.node.attributes.getList("linethickness","bevelled"),i=n.linethickness,o=n.bevelled,a=this.isDisplay();if(o)this.makeBevelled(a);else{var s=this.length2em(String(i),.06);s===0?this.makeAtop(a):this.makeFraction(a,s)}},r.prototype.makeFraction=function(e,n){var i=this.node.attributes.getList("numalign","denomalign"),o=i.numalign,a=i.denomalign,s=this.node.getProperty("withDelims"),l=e?{type:"d"}:{},c=s?__assign$t(__assign$t({},l),{delims:"true"}):__assign$t({},l),f=o!=="center"?{align:o}:{},d=a!=="center"?{align:a}:{},u=__assign$t({},l),m=__assign$t({},l),p=this.font.params;if(n!==.06){var _=p.axis_height,y=this.em(n),g=this.getTUV(e,n),v=g.T,x=g.u,b=g.v,S=(e?this.em(3*n):y)+" -.1em";l.style={height:y,"border-top":y+" solid",margin:S};var M=this.em(Math.max(0,x));m.style={height:M,"vertical-align":"-"+M},u.style={height:this.em(Math.max(0,b))},c.style={"vertical-align":this.em(_-v)}}var C,A;this.adaptor.append(this.chtml,this.html("mjx-frac",c,[C=this.html("mjx-num",f,[this.html("mjx-nstrut",m)]),this.html("mjx-dbox",{},[this.html("mjx-dtable",{},[this.html("mjx-line",l),this.html("mjx-row",{},[A=this.html("mjx-den",d,[this.html("mjx-dstrut",u)])])])])])),this.childNodes[0].toCHTML(C),this.childNodes[1].toCHTML(A)},r.prototype.makeAtop=function(e){var n=this.node.attributes.getList("numalign","denomalign"),i=n.numalign,o=n.denomalign,a=this.node.getProperty("withDelims"),s=e?{type:"d",atop:!0}:{atop:!0},l=a?__assign$t(__assign$t({},s),{delims:!0}):__assign$t({},s),c=i!=="center"?{align:i}:{},f=o!=="center"?{align:o}:{},d=this.getUVQ(e),u=d.v,m=d.q;c.style={"padding-bottom":this.em(m)},l.style={"vertical-align":this.em(-u)};var p,_;this.adaptor.append(this.chtml,this.html("mjx-frac",l,[p=this.html("mjx-num",c),_=this.html("mjx-den",f)])),this.childNodes[0].toCHTML(p),this.childNodes[1].toCHTML(_)},r.prototype.makeBevelled=function(e){var n=this.adaptor;n.setAttribute(this.chtml,"bevelled","ture");var i=n.append(this.chtml,this.html("mjx-num"));this.childNodes[0].toCHTML(i),this.bevel.toCHTML(this.chtml);var o=n.append(this.chtml,this.html("mjx-den"));this.childNodes[1].toCHTML(o);var a=this.getBevelData(e),s=a.u,l=a.v,c=a.delta,f=a.nbox,d=a.dbox;s&&n.setStyle(i,"verticalAlign",this.em(s/f.scale)),l&&n.setStyle(o,"verticalAlign",this.em(l/d.scale));var u=this.em(-c/2);n.setStyle(this.bevel.chtml,"marginLeft",u),n.setStyle(this.bevel.chtml,"marginRight",u)},r.kind=mfrac_js_2.MmlMfrac.prototype.kind,r.styles={"mjx-frac":{display:"inline-block","vertical-align":"0.17em",padding:"0 .22em"},'mjx-frac[type="d"]':{"vertical-align":".04em"},"mjx-frac[delims]":{padding:"0 .1em"},"mjx-frac[atop]":{padding:"0 .12em"},"mjx-frac[atop][delims]":{padding:"0"},"mjx-dtable":{display:"inline-table",width:"100%"},"mjx-dtable > *":{"font-size":"2000%"},"mjx-dbox":{display:"block","font-size":"5%"},"mjx-num":{display:"block","text-align":"center"},"mjx-den":{display:"block","text-align":"center"},"mjx-mfrac[bevelled] > mjx-num":{display:"inline-block"},"mjx-mfrac[bevelled] > mjx-den":{display:"inline-block"},'mjx-den[align="right"], mjx-num[align="right"]':{"text-align":"right"},'mjx-den[align="left"], mjx-num[align="left"]':{"text-align":"left"},"mjx-nstrut":{display:"inline-block",height:".054em",width:0,"vertical-align":"-.054em"},'mjx-nstrut[type="d"]':{height:".217em","vertical-align":"-.217em"},"mjx-dstrut":{display:"inline-block",height:".505em",width:0},'mjx-dstrut[type="d"]':{height:".726em"},"mjx-line":{display:"block","box-sizing":"border-box","min-height":"1px",height:".06em","border-top":".06em solid",margin:".06em -.1em",overflow:"hidden"},'mjx-line[type="d"]':{margin:".18em -.1em"}},r}((0,mfrac_js_1$2.CommonMfracMixin)(Wrapper_js_1$b.CHTMLWrapper));mfrac$2.CHTMLmfrac=CHTMLmfrac;var msqrt$2={},msqrt$1={},__extends$1h=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$A=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$l=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(msqrt$1,"__esModule",{value:!0});msqrt$1.CommonMsqrtMixin=void 0;var BBox_js_1$1=BBox$1;function CommonMsqrtMixin(t){return function(r){__extends$1h(e,r);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(this,__spreadArray$l([],__read$A(n),!1))||this,a=o.createMo("√");a.canStretch(1);var s=o.childNodes[o.base].getOuterBBox(),l=s.h,c=s.d,f=o.font.params.rule_thickness,d=o.node.attributes.get("displaystyle")?o.font.params.x_height:f;return o.surdH=l+c+2*f+d/4,a.getStretchedVariant([o.surdH-c,c],!0),o}return Object.defineProperty(e.prototype,"base",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"surd",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.createMo=function(n){var i=r.prototype.createMo.call(this,n);return this.childNodes.push(i),i},e.prototype.computeBBox=function(n,i){i===void 0&&(i=!1);var o=this.childNodes[this.surd].getBBox(),a=new BBox_js_1$1.BBox(this.childNodes[this.base].getOuterBBox()),s=this.getPQ(o)[1],l=this.font.params.rule_thickness,c=a.h+s+l,f=__read$A(this.getRootDimens(o,c),1),d=f[0];n.h=c+l,this.combineRootBBox(n,o,c),n.combine(o,d,c-o.h),n.combine(a,d+o.w,0),n.clean(),this.setChildPWidths(i)},e.prototype.combineRootBBox=function(n,i,o){},e.prototype.getPQ=function(n){var i=this.font.params.rule_thickness,o=this.node.attributes.get("displaystyle")?this.font.params.x_height:i,a=n.h+n.d>this.surdH?(n.h+n.d-(this.surdH-2*i-o/2))/2:i+o/4;return[o,a]},e.prototype.getRootDimens=function(n,i){return[0,0,0,0]},e}(t)}msqrt$1.CommonMsqrtMixin=CommonMsqrtMixin;var msqrt={},__extends$1g=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$s=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$s=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$s.apply(this,arguments)};Object.defineProperty(msqrt,"__esModule",{value:!0});msqrt.MmlMsqrt=void 0;var MmlNode_js_1$z=MmlNode,MmlMsqrt=function(t){__extends$1g(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.texclass=MmlNode_js_1$z.TEXCLASS.ORD,e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"msqrt"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.setTeXclass=function(e){return this.getPrevClass(e),this.childNodes[0].setTeXclass(null),this},r.prototype.setChildInheritedAttributes=function(e,n,i,o){this.childNodes[0].setInheritedAttributes(e,n,i,!0)},r.defaults=__assign$s({},MmlNode_js_1$z.AbstractMmlNode.defaults),r}(MmlNode_js_1$z.AbstractMmlNode);msqrt.MmlMsqrt=MmlMsqrt;var __extends$1f=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$z=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(msqrt$2,"__esModule",{value:!0});msqrt$2.CHTMLmsqrt=void 0;var Wrapper_js_1$a=Wrapper$2,msqrt_js_1$3=msqrt$1,msqrt_js_2=msqrt,CHTMLmsqrt=function(t){__extends$1f(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){var n=this.childNodes[this.surd],i=this.childNodes[this.base],o=n.getBBox(),a=i.getOuterBBox(),s=__read$z(this.getPQ(o),2),l=s[1],c=this.font.params.rule_thickness,f=a.h+l+c,d=this.standardCHTMLnode(e),u,m,p,_;this.root!=null&&(p=this.adaptor.append(d,this.html("mjx-root")),_=this.childNodes[this.root]);var y=this.adaptor.append(d,this.html("mjx-sqrt",{},[u=this.html("mjx-surd"),m=this.html("mjx-box",{style:{paddingTop:this.em(l)}})]));this.addRoot(p,_,o,f),n.toCHTML(u),i.toCHTML(m),n.size<0&&this.adaptor.addClass(y,"mjx-tall")},r.prototype.addRoot=function(e,n,i,o){},r.kind=msqrt_js_2.MmlMsqrt.prototype.kind,r.styles={"mjx-root":{display:"inline-block","white-space":"nowrap"},"mjx-surd":{display:"inline-block","vertical-align":"top"},"mjx-sqrt":{display:"inline-block","padding-top":".07em"},"mjx-sqrt > mjx-box":{"border-top":".07em solid"},"mjx-sqrt.mjx-tall > mjx-box":{"padding-left":".3em","margin-left":"-.3em"}},r}((0,msqrt_js_1$3.CommonMsqrtMixin)(Wrapper_js_1$a.CHTMLWrapper));msqrt$2.CHTMLmsqrt=CHTMLmsqrt;var mroot$2={},mroot$1={},__extends$1e=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mroot$1,"__esModule",{value:!0});mroot$1.CommonMrootMixin=void 0;function CommonMrootMixin(t){return function(r){__extends$1e(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"surd",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return 1},enumerable:!1,configurable:!0}),e.prototype.combineRootBBox=function(n,i,o){var a=this.childNodes[this.root].getOuterBBox(),s=this.getRootDimens(i,o)[1];n.combine(a,0,s)},e.prototype.getRootDimens=function(n,i){var o=this.childNodes[this.surd],a=this.childNodes[this.root].getOuterBBox(),s=(o.size<0?.5:.6)*n.w,l=a.w,c=a.rscale,f=Math.max(l,s/c),d=Math.max(0,f-l),u=this.rootHeight(a,n,o.size,i),m=f*c-s;return[m,u,d]},e.prototype.rootHeight=function(n,i,o,a){var s=i.h+i.d,l=(o<0?1.9:.55*s)-(s-a);return l+Math.max(0,n.d*n.rscale)},e}(t)}mroot$1.CommonMrootMixin=CommonMrootMixin;var mroot={},__extends$1d=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$r=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$r=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$r.apply(this,arguments)};Object.defineProperty(mroot,"__esModule",{value:!0});mroot.MmlMroot=void 0;var MmlNode_js_1$y=MmlNode,MmlMroot=function(t){__extends$1d(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.texclass=MmlNode_js_1$y.TEXCLASS.ORD,e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mroot"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 2},enumerable:!1,configurable:!0}),r.prototype.setTeXclass=function(e){return this.getPrevClass(e),this.childNodes[0].setTeXclass(null),this.childNodes[1].setTeXclass(null),this},r.prototype.setChildInheritedAttributes=function(e,n,i,o){this.childNodes[0].setInheritedAttributes(e,n,i,!0),this.childNodes[1].setInheritedAttributes(e,!1,i+2,o)},r.defaults=__assign$r({},MmlNode_js_1$y.AbstractMmlNode.defaults),r}(MmlNode_js_1$y.AbstractMmlNode);mroot.MmlMroot=MmlMroot;var __extends$1c=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$y=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(mroot$2,"__esModule",{value:!0});mroot$2.CHTMLmroot=void 0;var msqrt_js_1$2=msqrt$2,mroot_js_1$2=mroot$1,mroot_js_2=mroot,CHTMLmroot=function(t){__extends$1c(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.addRoot=function(e,n,i,o){n.toCHTML(e);var a=__read$y(this.getRootDimens(i,o),3),s=a[0],l=a[1],c=a[2];this.adaptor.setStyle(e,"verticalAlign",this.em(l)),this.adaptor.setStyle(e,"width",this.em(s)),c&&this.adaptor.setStyle(this.adaptor.firstChild(e),"paddingLeft",this.em(c))},r.kind=mroot_js_2.MmlMroot.prototype.kind,r}((0,mroot_js_1$2.CommonMrootMixin)(msqrt_js_1$2.CHTMLmsqrt));mroot$2.CHTMLmroot=CHTMLmroot;var msubsup$2={},scriptbase$1={},scriptbase={},__extends$1b=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$x=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$k=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__values$v=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(scriptbase,"__esModule",{value:!0});scriptbase.CommonScriptbaseMixin=void 0;var MmlNode_js_1$x=MmlNode;function CommonScriptbaseMixin(t){var r;return r=function(e){__extends$1b(n,e);function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=e.apply(this,__spreadArray$k([],__read$x(i),!1))||this;a.baseScale=1,a.baseIc=0,a.baseRemoveIc=!1,a.baseIsChar=!1,a.baseHasAccentOver=null,a.baseHasAccentUnder=null,a.isLineAbove=!1,a.isLineBelow=!1,a.isMathAccent=!1;var s=a.baseCore=a.getBaseCore();return s&&(a.setBaseAccentsFor(s),a.baseScale=a.getBaseScale(),a.baseIc=a.getBaseIc(),a.baseIsChar=a.isCharBase(),a.isMathAccent=a.baseIsChar&&a.scriptChild&&!!a.scriptChild.coreMO().node.getProperty("mathaccent"),a.checkLineAccents(),a.baseRemoveIc=!a.isLineAbove&&!a.isLineBelow&&(!a.constructor.useIC||a.isMathAccent)),a}return Object.defineProperty(n.prototype,"baseChild",{get:function(){return this.childNodes[this.node.base]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"scriptChild",{get:function(){return this.childNodes[1]},enumerable:!1,configurable:!0}),n.prototype.getBaseCore=function(){for(var i=this.getSemanticBase()||this.childNodes[0];i&&(i.childNodes.length===1&&(i.node.isKind("mrow")||i.node.isKind("TeXAtom")&&i.node.texClass!==MmlNode_js_1$x.TEXCLASS.VCENTER||i.node.isKind("mstyle")||i.node.isKind("mpadded")||i.node.isKind("mphantom")||i.node.isKind("semantics"))||i.node.isKind("munderover")&&i.isMathAccent);)this.setBaseAccentsFor(i),i=i.childNodes[0];return i||(this.baseHasAccentOver=this.baseHasAccentUnder=!1),i||this.childNodes[0]},n.prototype.setBaseAccentsFor=function(i){i.node.isKind("munderover")&&(this.baseHasAccentOver===null&&(this.baseHasAccentOver=!!i.node.attributes.get("accent")),this.baseHasAccentUnder===null&&(this.baseHasAccentUnder=!!i.node.attributes.get("accentunder")))},n.prototype.getSemanticBase=function(){var i=this.node.attributes.getExplicit("data-semantic-fencepointer");return this.getBaseFence(this.baseChild,i)},n.prototype.getBaseFence=function(i,o){var a,s;if(!i||!i.node.attributes||!o)return null;if(i.node.attributes.getExplicit("data-semantic-id")===o)return i;try{for(var l=__values$v(i.childNodes),c=l.next();!c.done;c=l.next()){var f=c.value,d=this.getBaseFence(f,o);if(d)return d}}catch(u){a={error:u}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}return null},n.prototype.getBaseScale=function(){for(var i=this.baseCore,o=1;i&&i!==this;){var a=i.getOuterBBox();o*=a.rscale,i=i.parent}return o},n.prototype.getBaseIc=function(){return this.baseCore.getOuterBBox().ic*this.baseScale},n.prototype.getAdjustedIc=function(){var i=this.baseCore.getOuterBBox();return(i.ic?1.05*i.ic+.05:0)*this.baseScale},n.prototype.isCharBase=function(){var i=this.baseCore;return(i.node.isKind("mo")&&i.size===null||i.node.isKind("mi")||i.node.isKind("mn"))&&i.bbox.rscale===1&&Array.from(i.getText()).length===1},n.prototype.checkLineAccents=function(){if(this.node.isKind("munderover"))if(this.node.isKind("mover"))this.isLineAbove=this.isLineAccent(this.scriptChild);else if(this.node.isKind("munder"))this.isLineBelow=this.isLineAccent(this.scriptChild);else{var i=this;this.isLineAbove=this.isLineAccent(i.overChild),this.isLineBelow=this.isLineAccent(i.underChild)}},n.prototype.isLineAccent=function(i){var o=i.coreMO().node;return o.isToken&&o.getText()==="―"},n.prototype.getBaseWidth=function(){var i=this.baseChild.getOuterBBox();return i.w*i.rscale-(this.baseRemoveIc?this.baseIc:0)+this.font.params.extra_ic},n.prototype.computeBBox=function(i,o){o===void 0&&(o=!1);var a=this.getBaseWidth(),s=__read$x(this.getOffset(),2),l=s[0],c=s[1];i.append(this.baseChild.getOuterBBox()),i.combine(this.scriptChild.getOuterBBox(),a+l,c),i.w+=this.font.params.scriptspace,i.clean(),this.setChildPWidths(o)},n.prototype.getOffset=function(){return[0,0]},n.prototype.baseCharZero=function(i){var o=!!this.baseCore.node.attributes.get("largeop"),a=this.baseScale;return this.baseIsChar&&!o&&a===1?0:i},n.prototype.getV=function(){var i=this.baseCore.getOuterBBox(),o=this.scriptChild.getOuterBBox(),a=this.font.params,s=this.length2em(this.node.attributes.get("subscriptshift"),a.sub1);return Math.max(this.baseCharZero(i.d*this.baseScale+a.sub_drop*o.rscale),s,o.h*o.rscale-4/5*a.x_height)},n.prototype.getU=function(){var i=this.baseCore.getOuterBBox(),o=this.scriptChild.getOuterBBox(),a=this.font.params,s=this.node.attributes.getList("displaystyle","superscriptshift"),l=this.node.getProperty("texprimestyle"),c=l?a.sup3:s.displaystyle?a.sup1:a.sup2,f=this.length2em(s.superscriptshift,c);return Math.max(this.baseCharZero(i.h*this.baseScale-a.sup_drop*o.rscale),f,o.d*o.rscale+1/4*a.x_height)},n.prototype.hasMovableLimits=function(){var i=this.node.attributes.get("displaystyle"),o=this.baseChild.coreMO().node;return!i&&!!o.attributes.get("movablelimits")},n.prototype.getOverKU=function(i,o){var a=this.node.attributes.get("accent"),s=this.font.params,l=o.d*o.rscale,c=s.rule_thickness*s.separation_factor,f=this.baseHasAccentOver?c:0,d=this.isLineAbove?3*s.rule_thickness:c,u=(a?d:Math.max(s.big_op_spacing1,s.big_op_spacing3-Math.max(0,l)))-f;return[u,i.h*i.rscale+u+l]},n.prototype.getUnderKV=function(i,o){var a=this.node.attributes.get("accentunder"),s=this.font.params,l=o.h*o.rscale,c=s.rule_thickness*s.separation_factor,f=this.baseHasAccentUnder?c:0,d=this.isLineBelow?3*s.rule_thickness:c,u=(a?d:Math.max(s.big_op_spacing2,s.big_op_spacing4-l))-f;return[u,-(i.d*i.rscale+u+l)]},n.prototype.getDeltaW=function(i,o){var a,s,l,c;o===void 0&&(o=[0,0,0]);var f=this.node.attributes.get("align"),d=i.map(function(b){return b.w*b.rscale});d[0]-=this.baseRemoveIc&&!this.baseCore.node.attributes.get("largeop")?this.baseIc:0;var u=Math.max.apply(Math,__spreadArray$k([],__read$x(d),!1)),m=[],p=0;try{for(var _=__values$v(d.keys()),y=_.next();!y.done;y=_.next()){var g=y.value;m[g]=(f==="center"?(u-d[g])/2:f==="right"?u-d[g]:0)+o[g],m[g]<p&&(p=-m[g])}}catch(b){a={error:b}}finally{try{y&&!y.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}if(p)try{for(var v=__values$v(m.keys()),x=v.next();!x.done;x=v.next()){var g=x.value;m[g]+=p}}catch(b){l={error:b}}finally{try{x&&!x.done&&(c=v.return)&&c.call(v)}finally{if(l)throw l.error}}return[1,2].map(function(b){return m[b]+=i[b]?i[b].dx*i[0].scale:0}),m},n.prototype.getDelta=function(i){i===void 0&&(i=!1);var o=this.node.attributes.get("accent"),a=this.baseCore.getOuterBBox(),s=a.sk,l=a.ic;return((o&&!i?s:0)+this.font.skewIcFactor*l)*this.baseScale},n.prototype.stretchChildren=function(){var i,o,a,s,l,c,f=[];try{for(var d=__values$v(this.childNodes),u=d.next();!u.done;u=d.next()){var m=u.value;m.canStretch(2)&&f.push(m)}}catch($){i={error:$}}finally{try{u&&!u.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}var p=f.length,_=this.childNodes.length;if(p&&_>1){var y=0,g=p>1&&p===_;try{for(var v=__values$v(this.childNodes),x=v.next();!x.done;x=v.next()){var m=x.value,b=m.stretch.dir===0;if(g||b){var S=m.getOuterBBox(b),M=S.w,C=S.rscale;M*C>y&&(y=M*C)}}}catch($){a={error:$}}finally{try{x&&!x.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}try{for(var A=__values$v(f),E=A.next();!E.done;E=A.next()){var m=E.value;m.coreMO().getStretchedVariant([y/m.bbox.rscale])}}catch($){l={error:$}}finally{try{E&&!E.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}}},n}(t),r.useIC=!0,r}scriptbase.CommonScriptbaseMixin=CommonScriptbaseMixin;var __extends$1a=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$w=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__values$u=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(scriptbase$1,"__esModule",{value:!0});scriptbase$1.CHTMLscriptbase=void 0;var Wrapper_js_1$9=Wrapper$2,scriptbase_js_1$1=scriptbase,CHTMLscriptbase=function(t){__extends$1a(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){this.chtml=this.standardCHTMLnode(e);var n=__read$w(this.getOffset(),2),i=n[0],o=n[1],a=i-(this.baseRemoveIc?this.baseIc:0),s={"vertical-align":this.em(o)};a&&(s["margin-left"]=this.em(a)),this.baseChild.toCHTML(this.chtml),this.scriptChild.toCHTML(this.adaptor.append(this.chtml,this.html("mjx-script",{style:s})))},r.prototype.setDeltaW=function(e,n){for(var i=0;i<n.length;i++)n[i]&&this.adaptor.setStyle(e[i],"paddingLeft",this.em(n[i]))},r.prototype.adjustOverDepth=function(e,n){n.d>=0||this.adaptor.setStyle(e,"marginBottom",this.em(n.d*n.rscale))},r.prototype.adjustUnderDepth=function(e,n){var i,o;if(!(n.d>=0)){var a=this.adaptor,s=this.em(n.d),l=this.html("mjx-box",{style:{"margin-bottom":s,"vertical-align":s}});try{for(var c=__values$u(a.childNodes(a.firstChild(e))),f=c.next();!f.done;f=c.next()){var d=f.value;a.append(l,d)}}catch(u){i={error:u}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}a.append(a.firstChild(e),l)}},r.prototype.adjustBaseHeight=function(e,n){if(this.node.attributes.get("accent")){var i=this.font.params.x_height*n.scale;n.h<i&&(this.adaptor.setStyle(e,"paddingTop",this.em(i-n.h)),n.h=i)}},r.kind="scriptbase",r}((0,scriptbase_js_1$1.CommonScriptbaseMixin)(Wrapper_js_1$9.CHTMLWrapper));scriptbase$1.CHTMLscriptbase=CHTMLscriptbase;var msubsup$1={},__extends$19=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$v=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(msubsup$1,"__esModule",{value:!0});msubsup$1.CommonMsubsupMixin=msubsup$1.CommonMsupMixin=msubsup$1.CommonMsubMixin=void 0;function CommonMsubMixin(t){var r;return r=function(e){__extends$19(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(n.prototype,"scriptChild",{get:function(){return this.childNodes[this.node.sub]},enumerable:!1,configurable:!0}),n.prototype.getOffset=function(){return[0,-this.getV()]},n}(t),r.useIC=!1,r}msubsup$1.CommonMsubMixin=CommonMsubMixin;function CommonMsupMixin(t){return function(r){__extends$19(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"scriptChild",{get:function(){return this.childNodes[this.node.sup]},enumerable:!1,configurable:!0}),e.prototype.getOffset=function(){var n=this.getAdjustedIc()-(this.baseRemoveIc?0:this.baseIc);return[n,this.getU()]},e}(t)}msubsup$1.CommonMsupMixin=CommonMsupMixin;function CommonMsubsupMixin(t){var r;return r=function(e){__extends$19(n,e);function n(){var i=e!==null&&e.apply(this,arguments)||this;return i.UVQ=null,i}return Object.defineProperty(n.prototype,"subChild",{get:function(){return this.childNodes[this.node.sub]},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"supChild",{get:function(){return this.childNodes[this.node.sup]},enumerable:!1,configurable:!0}),n.prototype.computeBBox=function(i,o){o===void 0&&(o=!1);var a=this.baseChild.getOuterBBox(),s=__read$v([this.subChild.getOuterBBox(),this.supChild.getOuterBBox()],2),l=s[0],c=s[1];i.empty(),i.append(a);var f=this.getBaseWidth(),d=this.getAdjustedIc(),u=__read$v(this.getUVQ(),2),m=u[0],p=u[1];i.combine(l,f,p),i.combine(c,f+d,m),i.w+=this.font.params.scriptspace,i.clean(),this.setChildPWidths(o)},n.prototype.getUVQ=function(i,o){i===void 0&&(i=this.subChild.getOuterBBox()),o===void 0&&(o=this.supChild.getOuterBBox());var a=this.baseCore.getOuterBBox();if(this.UVQ)return this.UVQ;var s=this.font.params,l=3*s.rule_thickness,c=this.length2em(this.node.attributes.get("subscriptshift"),s.sub2),f=this.baseCharZero(a.d*this.baseScale+s.sub_drop*i.rscale),d=__read$v([this.getU(),Math.max(f,c)],2),u=d[0],m=d[1],p=u-o.d*o.rscale-(i.h*i.rscale-m);if(p<l){m+=l-p;var _=4/5*s.x_height-(u-o.d*o.rscale);_>0&&(u+=_,m-=_)}return u=Math.max(this.length2em(this.node.attributes.get("superscriptshift"),u),u),m=Math.max(this.length2em(this.node.attributes.get("subscriptshift"),m),m),p=u-o.d*o.rscale-(i.h*i.rscale-m),this.UVQ=[u,-m,p],this.UVQ},n}(t),r.useIC=!1,r}msubsup$1.CommonMsubsupMixin=CommonMsubsupMixin;var msubsup={},__extends$18=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$q=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$q=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$q.apply(this,arguments)};Object.defineProperty(msubsup,"__esModule",{value:!0});msubsup.MmlMsup=msubsup.MmlMsub=msubsup.MmlMsubsup=void 0;var MmlNode_js_1$w=MmlNode,MmlMsubsup=function(t){__extends$18(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"msubsup"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 3},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"base",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sub",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sup",{get:function(){return 2},enumerable:!1,configurable:!0}),r.prototype.setChildInheritedAttributes=function(e,n,i,o){var a=this.childNodes;a[0].setInheritedAttributes(e,n,i,o),a[1].setInheritedAttributes(e,!1,i+1,o||this.sub===1),a[2]&&a[2].setInheritedAttributes(e,!1,i+1,o||this.sub===2)},r.defaults=__assign$q(__assign$q({},MmlNode_js_1$w.AbstractMmlBaseNode.defaults),{subscriptshift:"",superscriptshift:""}),r}(MmlNode_js_1$w.AbstractMmlBaseNode);msubsup.MmlMsubsup=MmlMsubsup;var MmlMsub=function(t){__extends$18(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"msub"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 2},enumerable:!1,configurable:!0}),r.defaults=__assign$q({},MmlMsubsup.defaults),r}(MmlMsubsup);msubsup.MmlMsub=MmlMsub;var MmlMsup=function(t){__extends$18(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"msup"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sup",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sub",{get:function(){return 2},enumerable:!1,configurable:!0}),r.defaults=__assign$q({},MmlMsubsup.defaults),r}(MmlMsubsup);msubsup.MmlMsup=MmlMsup;var __extends$17=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$u=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(msubsup$2,"__esModule",{value:!0});msubsup$2.CHTMLmsubsup=msubsup$2.CHTMLmsup=msubsup$2.CHTMLmsub=void 0;var scriptbase_js_1=scriptbase$1,msubsup_js_1$5=msubsup$1,msubsup_js_2=msubsup$1,msubsup_js_3=msubsup$1,msubsup_js_4=msubsup,CHTMLmsub=function(t){__extends$17(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.kind=msubsup_js_4.MmlMsub.prototype.kind,r}((0,msubsup_js_1$5.CommonMsubMixin)(scriptbase_js_1.CHTMLscriptbase));msubsup$2.CHTMLmsub=CHTMLmsub;var CHTMLmsup=function(t){__extends$17(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.kind=msubsup_js_4.MmlMsup.prototype.kind,r}((0,msubsup_js_2.CommonMsupMixin)(scriptbase_js_1.CHTMLscriptbase));msubsup$2.CHTMLmsup=CHTMLmsup;var CHTMLmsubsup=function(t){__extends$17(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){var n=this.adaptor,i=this.standardCHTMLnode(e),o=__read$u([this.baseChild,this.supChild,this.subChild],3),a=o[0],s=o[1],l=o[2],c=__read$u(this.getUVQ(),3),f=c[1],d=c[2],u={"vertical-align":this.em(f)};a.toCHTML(i);var m=n.append(i,this.html("mjx-script",{style:u}));s.toCHTML(m),n.append(m,this.html("mjx-spacer",{style:{"margin-top":this.em(d)}})),l.toCHTML(m);var p=this.getAdjustedIc();p&&n.setStyle(s.chtml,"marginLeft",this.em(p/s.bbox.rscale)),this.baseRemoveIc&&n.setStyle(m,"marginLeft",this.em(-this.baseIc))},r.kind=msubsup_js_4.MmlMsubsup.prototype.kind,r.styles={"mjx-script":{display:"inline-block","padding-right":".05em","padding-left":".033em"},"mjx-script > mjx-spacer":{display:"block"}},r}((0,msubsup_js_3.CommonMsubsupMixin)(scriptbase_js_1.CHTMLscriptbase));msubsup$2.CHTMLmsubsup=CHTMLmsubsup;var munderover$2={},munderover$1={},__extends$16=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$t=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$j=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(munderover$1,"__esModule",{value:!0});munderover$1.CommonMunderoverMixin=munderover$1.CommonMoverMixin=munderover$1.CommonMunderMixin=void 0;function CommonMunderMixin(t){return function(r){__extends$16(e,r);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(this,__spreadArray$j([],__read$t(n),!1))||this;return o.stretchChildren(),o}return Object.defineProperty(e.prototype,"scriptChild",{get:function(){return this.childNodes[this.node.under]},enumerable:!1,configurable:!0}),e.prototype.computeBBox=function(n,i){if(i===void 0&&(i=!1),this.hasMovableLimits()){r.prototype.computeBBox.call(this,n,i);return}n.empty();var o=this.baseChild.getOuterBBox(),a=this.scriptChild.getOuterBBox(),s=this.getUnderKV(o,a)[1],l=this.isLineBelow?0:this.getDelta(!0),c=__read$t(this.getDeltaW([o,a],[0,-l]),2),f=c[0],d=c[1];n.combine(o,f,0),n.combine(a,d,s),n.d+=this.font.params.big_op_spacing5,n.clean(),this.setChildPWidths(i)},e}(t)}munderover$1.CommonMunderMixin=CommonMunderMixin;function CommonMoverMixin(t){return function(r){__extends$16(e,r);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(this,__spreadArray$j([],__read$t(n),!1))||this;return o.stretchChildren(),o}return Object.defineProperty(e.prototype,"scriptChild",{get:function(){return this.childNodes[this.node.over]},enumerable:!1,configurable:!0}),e.prototype.computeBBox=function(n){if(this.hasMovableLimits()){r.prototype.computeBBox.call(this,n);return}n.empty();var i=this.baseChild.getOuterBBox(),o=this.scriptChild.getOuterBBox();this.node.attributes.get("accent")&&(i.h=Math.max(i.h,this.font.params.x_height*i.scale));var a=this.getOverKU(i,o)[1],s=this.isLineAbove?0:this.getDelta(),l=__read$t(this.getDeltaW([i,o],[0,s]),2),c=l[0],f=l[1];n.combine(i,c,0),n.combine(o,f,a),n.h+=this.font.params.big_op_spacing5,n.clean()},e}(t)}munderover$1.CommonMoverMixin=CommonMoverMixin;function CommonMunderoverMixin(t){return function(r){__extends$16(e,r);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(this,__spreadArray$j([],__read$t(n),!1))||this;return o.stretchChildren(),o}return Object.defineProperty(e.prototype,"underChild",{get:function(){return this.childNodes[this.node.under]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"overChild",{get:function(){return this.childNodes[this.node.over]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subChild",{get:function(){return this.underChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supChild",{get:function(){return this.overChild},enumerable:!1,configurable:!0}),e.prototype.computeBBox=function(n){if(this.hasMovableLimits()){r.prototype.computeBBox.call(this,n);return}n.empty();var i=this.overChild.getOuterBBox(),o=this.baseChild.getOuterBBox(),a=this.underChild.getOuterBBox();this.node.attributes.get("accent")&&(o.h=Math.max(o.h,this.font.params.x_height*o.scale));var s=this.getOverKU(o,i)[1],l=this.getUnderKV(o,a)[1],c=this.getDelta(),f=__read$t(this.getDeltaW([o,a,i],[0,this.isLineBelow?0:-c,this.isLineAbove?0:c]),3),d=f[0],u=f[1],m=f[2];n.combine(o,d,0),n.combine(i,m,s),n.combine(a,u,l);var p=this.font.params.big_op_spacing5;n.h+=p,n.d+=p,n.clean()},e}(t)}munderover$1.CommonMunderoverMixin=CommonMunderoverMixin;var munderover={},__extends$15=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$p=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$p=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$p.apply(this,arguments)};Object.defineProperty(munderover,"__esModule",{value:!0});munderover.MmlMover=munderover.MmlMunder=munderover.MmlMunderover=void 0;var MmlNode_js_1$v=MmlNode,MmlMunderover=function(t){__extends$15(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"munderover"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 3},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"base",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"under",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"over",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.setChildInheritedAttributes=function(e,n,i,o){var a=this.childNodes;a[0].setInheritedAttributes(e,n,i,o||!!a[this.over]);var s=!!(!n&&a[0].coreMO().attributes.get("movablelimits")),l=this.constructor.ACCENTS;a[1].setInheritedAttributes(e,!1,this.getScriptlevel(l[1],s,i),o||this.under===1),this.setInheritedAccent(1,l[1],n,i,o,s),a[2]&&(a[2].setInheritedAttributes(e,!1,this.getScriptlevel(l[2],s,i),o||this.under===2),this.setInheritedAccent(2,l[2],n,i,o,s))},r.prototype.getScriptlevel=function(e,n,i){return(n||!this.attributes.get(e))&&i++,i},r.prototype.setInheritedAccent=function(e,n,i,o,a,s){var l=this.childNodes[e];if(this.attributes.getExplicit(n)==null&&l.isEmbellished){var c=l.coreMO().attributes.get("accent");this.attributes.setInherited(n,c),c!==this.attributes.getDefault(n)&&l.setInheritedAttributes({},i,this.getScriptlevel(n,s,o),a)}},r.defaults=__assign$p(__assign$p({},MmlNode_js_1$v.AbstractMmlBaseNode.defaults),{accent:!1,accentunder:!1,align:"center"}),r.ACCENTS=["","accentunder","accent"],r}(MmlNode_js_1$v.AbstractMmlBaseNode);munderover.MmlMunderover=MmlMunderover;var MmlMunder=function(t){__extends$15(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"munder"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 2},enumerable:!1,configurable:!0}),r.defaults=__assign$p({},MmlMunderover.defaults),r}(MmlMunderover);munderover.MmlMunder=MmlMunder;var MmlMover=function(t){__extends$15(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mover"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 2},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"over",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"under",{get:function(){return 2},enumerable:!1,configurable:!0}),r.defaults=__assign$p({},MmlMunderover.defaults),r.ACCENTS=["","accent","accentunder"],r}(MmlMunderover);munderover.MmlMover=MmlMover;var __extends$14=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(munderover$2,"__esModule",{value:!0});munderover$2.CHTMLmunderover=munderover$2.CHTMLmover=munderover$2.CHTMLmunder=void 0;var msubsup_js_1$4=msubsup$2,munderover_js_1$2=munderover$1,munderover_js_2=munderover$1,munderover_js_3=munderover$1,munderover_js_4=munderover,CHTMLmunder=function(t){__extends$14(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){if(this.hasMovableLimits()){t.prototype.toCHTML.call(this,e),this.adaptor.setAttribute(this.chtml,"limits","false");return}this.chtml=this.standardCHTMLnode(e);var n=this.adaptor.append(this.adaptor.append(this.chtml,this.html("mjx-row")),this.html("mjx-base")),i=this.adaptor.append(this.adaptor.append(this.chtml,this.html("mjx-row")),this.html("mjx-under"));this.baseChild.toCHTML(n),this.scriptChild.toCHTML(i);var o=this.baseChild.getOuterBBox(),a=this.scriptChild.getOuterBBox(),s=this.getUnderKV(o,a)[0],l=this.isLineBelow?0:this.getDelta(!0);this.adaptor.setStyle(i,"paddingTop",this.em(s)),this.setDeltaW([n,i],this.getDeltaW([o,a],[0,-l])),this.adjustUnderDepth(i,a)},r.kind=munderover_js_4.MmlMunder.prototype.kind,r.styles={"mjx-over":{"text-align":"left"},'mjx-munder:not([limits="false"])':{display:"inline-table"},"mjx-munder > mjx-row":{"text-align":"left"},"mjx-under":{"padding-bottom":".1em"}},r}((0,munderover_js_1$2.CommonMunderMixin)(msubsup_js_1$4.CHTMLmsub));munderover$2.CHTMLmunder=CHTMLmunder;var CHTMLmover=function(t){__extends$14(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){if(this.hasMovableLimits()){t.prototype.toCHTML.call(this,e),this.adaptor.setAttribute(this.chtml,"limits","false");return}this.chtml=this.standardCHTMLnode(e);var n=this.adaptor.append(this.chtml,this.html("mjx-over")),i=this.adaptor.append(this.chtml,this.html("mjx-base"));this.scriptChild.toCHTML(n),this.baseChild.toCHTML(i);var o=this.scriptChild.getOuterBBox(),a=this.baseChild.getOuterBBox();this.adjustBaseHeight(i,a);var s=this.getOverKU(a,o)[0],l=this.isLineAbove?0:this.getDelta();this.adaptor.setStyle(n,"paddingBottom",this.em(s)),this.setDeltaW([i,n],this.getDeltaW([a,o],[0,l])),this.adjustOverDepth(n,o)},r.kind=munderover_js_4.MmlMover.prototype.kind,r.styles={'mjx-mover:not([limits="false"])':{"padding-top":".1em"},'mjx-mover:not([limits="false"]) > *':{display:"block","text-align":"left"}},r}((0,munderover_js_2.CommonMoverMixin)(msubsup_js_1$4.CHTMLmsup));munderover$2.CHTMLmover=CHTMLmover;var CHTMLmunderover=function(t){__extends$14(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){if(this.hasMovableLimits()){t.prototype.toCHTML.call(this,e),this.adaptor.setAttribute(this.chtml,"limits","false");return}this.chtml=this.standardCHTMLnode(e);var n=this.adaptor.append(this.chtml,this.html("mjx-over")),i=this.adaptor.append(this.adaptor.append(this.chtml,this.html("mjx-box")),this.html("mjx-munder")),o=this.adaptor.append(this.adaptor.append(i,this.html("mjx-row")),this.html("mjx-base")),a=this.adaptor.append(this.adaptor.append(i,this.html("mjx-row")),this.html("mjx-under"));this.overChild.toCHTML(n),this.baseChild.toCHTML(o),this.underChild.toCHTML(a);var s=this.overChild.getOuterBBox(),l=this.baseChild.getOuterBBox(),c=this.underChild.getOuterBBox();this.adjustBaseHeight(o,l);var f=this.getOverKU(l,s)[0],d=this.getUnderKV(l,c)[0],u=this.getDelta();this.adaptor.setStyle(n,"paddingBottom",this.em(f)),this.adaptor.setStyle(a,"paddingTop",this.em(d)),this.setDeltaW([o,a,n],this.getDeltaW([l,c,s],[0,this.isLineBelow?0:-u,this.isLineAbove?0:u])),this.adjustOverDepth(n,s),this.adjustUnderDepth(a,c)},r.prototype.markUsed=function(){t.prototype.markUsed.call(this),this.jax.wrapperUsage.add(msubsup_js_1$4.CHTMLmsubsup.kind)},r.kind=munderover_js_4.MmlMunderover.prototype.kind,r.styles={'mjx-munderover:not([limits="false"])':{"padding-top":".1em"},'mjx-munderover:not([limits="false"]) > *':{display:"block"}},r}((0,munderover_js_3.CommonMunderoverMixin)(msubsup_js_1$4.CHTMLmsubsup));munderover$2.CHTMLmunderover=CHTMLmunderover;var mmultiscripts$2={},mmultiscripts$1={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var s=function(l,c){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var u in d)Object.prototype.hasOwnProperty.call(d,u)&&(f[u]=d[u])},s(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");s(l,c);function f(){this.constructor=l}l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}}(),e=commonjsGlobal&&commonjsGlobal.__read||function(s,l){var c=typeof Symbol=="function"&&s[Symbol.iterator];if(!c)return s;var f=c.call(s),d,u=[],m;try{for(;(l===void 0||l-- >0)&&!(d=f.next()).done;)u.push(d.value)}catch(p){m={error:p}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(m)throw m.error}}return u},n=commonjsGlobal&&commonjsGlobal.__spreadArray||function(s,l,c){if(c||arguments.length===2)for(var f=0,d=l.length,u;f<d;f++)(u||!(f in l))&&(u||(u=Array.prototype.slice.call(l,0,f)),u[f]=l[f]);return s.concat(u||Array.prototype.slice.call(l))},i=commonjsGlobal&&commonjsGlobal.__values||function(s){var l=typeof Symbol=="function"&&Symbol.iterator,c=l&&s[l],f=0;if(c)return c.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&f>=s.length&&(s=void 0),{value:s&&s[f++],done:!s}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonMmultiscriptsMixin=t.ScriptNames=t.NextScript=void 0;var o=BBox$1;t.NextScript={base:"subList",subList:"supList",supList:"subList",psubList:"psupList",psupList:"psubList"},t.ScriptNames=["sup","sup","psup","psub"];function a(s){return function(l){r(c,l);function c(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];var u=l.apply(this,n([],e(f),!1))||this;return u.scriptData=null,u.firstPrescript=0,u.getScriptData(),u}return c.prototype.combinePrePost=function(f,d){var u=new o.BBox(f);return u.combine(d,0,0),u},c.prototype.computeBBox=function(f,d){d===void 0&&(d=!1);var u=this.font.params.scriptspace,m=this.scriptData,p=this.combinePrePost(m.sub,m.psub),_=this.combinePrePost(m.sup,m.psup),y=e(this.getUVQ(p,_),2),g=y[0],v=y[1];if(f.empty(),m.numPrescripts&&(f.combine(m.psup,u,g),f.combine(m.psub,u,v)),f.append(m.base),m.numScripts){var x=f.w;f.combine(m.sup,x,g),f.combine(m.sub,x,v),f.w+=u}f.clean(),this.setChildPWidths(d)},c.prototype.getScriptData=function(){var f=this.scriptData={base:null,sub:o.BBox.empty(),sup:o.BBox.empty(),psub:o.BBox.empty(),psup:o.BBox.empty(),numPrescripts:0,numScripts:0},d=this.getScriptBBoxLists();this.combineBBoxLists(f.sub,f.sup,d.subList,d.supList),this.combineBBoxLists(f.psub,f.psup,d.psubList,d.psupList),f.base=d.base[0],f.numPrescripts=d.psubList.length,f.numScripts=d.subList.length},c.prototype.getScriptBBoxLists=function(){var f,d,u={base:[],subList:[],supList:[],psubList:[],psupList:[]},m="base";try{for(var p=i(this.childNodes),_=p.next();!_.done;_=p.next()){var y=_.value;y.node.isKind("mprescripts")?m="psubList":(u[m].push(y.getOuterBBox()),m=t.NextScript[m])}}catch(g){f={error:g}}finally{try{_&&!_.done&&(d=p.return)&&d.call(p)}finally{if(f)throw f.error}}return this.firstPrescript=u.subList.length+u.supList.length+2,this.padLists(u.subList,u.supList),this.padLists(u.psubList,u.psupList),u},c.prototype.padLists=function(f,d){f.length>d.length&&d.push(o.BBox.empty())},c.prototype.combineBBoxLists=function(f,d,u,m){for(var p=0;p<u.length;p++){var _=e(this.getScaledWHD(u[p]),3),y=_[0],g=_[1],v=_[2],x=e(this.getScaledWHD(m[p]),3),b=x[0],S=x[1],M=x[2],C=Math.max(y,b);f.w+=C,d.w+=C,g>f.h&&(f.h=g),v>f.d&&(f.d=v),S>d.h&&(d.h=S),M>d.d&&(d.d=M)}},c.prototype.getScaledWHD=function(f){var d=f.w,u=f.h,m=f.d,p=f.rscale;return[d*p,u*p,m*p]},c.prototype.getUVQ=function(f,d){var u;if(!this.UVQ){var m=e([0,0,0],3),p=m[0],_=m[1],y=m[2];f.h===0&&f.d===0?p=this.getU():d.h===0&&d.d===0?p=-this.getV():(u=e(l.prototype.getUVQ.call(this,f,d),3),p=u[0],_=u[1],y=u[2]),this.UVQ=[p,_,y]}return this.UVQ},c}(s)}t.CommonMmultiscriptsMixin=a})(mmultiscripts$1);var mmultiscripts={},__extends$13=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$o=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$o=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$o.apply(this,arguments)};Object.defineProperty(mmultiscripts,"__esModule",{value:!0});mmultiscripts.MmlNone=mmultiscripts.MmlMprescripts=mmultiscripts.MmlMmultiscripts=void 0;var MmlNode_js_1$u=MmlNode,msubsup_js_1$3=msubsup,MmlMmultiscripts=function(t){__extends$13(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mmultiscripts"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 1},enumerable:!1,configurable:!0}),r.prototype.setChildInheritedAttributes=function(e,n,i,o){this.childNodes[0].setInheritedAttributes(e,n,i,o);for(var a=!1,s=1,l=0;s<this.childNodes.length;s++){var c=this.childNodes[s];if(c.isKind("mprescripts")){if(!a&&(a=!0,s%2===0)){var f=this.factory.create("mrow");this.childNodes.splice(s,0,f),f.parent=this,s++}}else{var d=o||l%2===0;c.setInheritedAttributes(e,!1,i+1,d),l++}}this.childNodes.length%2===(a?1:0)&&(this.appendChild(this.factory.create("mrow")),this.childNodes[this.childNodes.length-1].setInheritedAttributes(e,!1,i+1,o))},r.prototype.verifyChildren=function(e){for(var n=!1,i=e.fixMmultiscripts,o=0;o<this.childNodes.length;o++){var a=this.childNodes[o];a.isKind("mprescripts")&&(n?a.mError(a.kind+" can only appear once in "+this.kind,e,!0):(n=!0,o%2===0&&!i&&this.mError("There must be an equal number of prescripts of each type",e)))}this.childNodes.length%2===(n?1:0)&&!i&&this.mError("There must be an equal number of scripts of each type",e),t.prototype.verifyChildren.call(this,e)},r.defaults=__assign$o({},msubsup_js_1$3.MmlMsubsup.defaults),r}(msubsup_js_1$3.MmlMsubsup);mmultiscripts.MmlMmultiscripts=MmlMmultiscripts;var MmlMprescripts=function(t){__extends$13(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mprescripts"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 0},enumerable:!1,configurable:!0}),r.prototype.verifyTree=function(e){t.prototype.verifyTree.call(this,e),this.parent&&!this.parent.isKind("mmultiscripts")&&this.mError(this.kind+" must be a child of mmultiscripts",e,!0)},r.defaults=__assign$o({},MmlNode_js_1$u.AbstractMmlNode.defaults),r}(MmlNode_js_1$u.AbstractMmlNode);mmultiscripts.MmlMprescripts=MmlMprescripts;var MmlNone=function(t){__extends$13(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"none"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 0},enumerable:!1,configurable:!0}),r.prototype.verifyTree=function(e){t.prototype.verifyTree.call(this,e),this.parent&&!this.parent.isKind("mmultiscripts")&&this.mError(this.kind+" must be a child of mmultiscripts",e,!0)},r.defaults=__assign$o({},MmlNode_js_1$u.AbstractMmlNode.defaults),r}(MmlNode_js_1$u.AbstractMmlNode);mmultiscripts.MmlNone=MmlNone;var __extends$12=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$s=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(mmultiscripts$2,"__esModule",{value:!0});mmultiscripts$2.CHTMLmmultiscripts=void 0;var msubsup_js_1$2=msubsup$2,mmultiscripts_js_1$2=mmultiscripts$1,mmultiscripts_js_2=mmultiscripts,string_js_1$6=string,CHTMLmmultiscripts=function(t){__extends$12(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){var n=this.standardCHTMLnode(e),i=this.scriptData,o=this.node.getProperty("scriptalign")||"right left",a=__read$s((0,string_js_1$6.split)(o+" "+o),2),s=a[0],l=a[1],c=this.combinePrePost(i.sub,i.psub),f=this.combinePrePost(i.sup,i.psup),d=__read$s(this.getUVQ(c,f),2),u=d[0],m=d[1];if(i.numPrescripts){var p=this.addScripts(u,-m,!0,i.psub,i.psup,this.firstPrescript,i.numPrescripts);s!=="right"&&this.adaptor.setAttribute(p,"script-align",s)}if(this.childNodes[0].toCHTML(n),i.numScripts){var p=this.addScripts(u,-m,!1,i.sub,i.sup,1,i.numScripts);l!=="left"&&this.adaptor.setAttribute(p,"script-align",l)}},r.prototype.addScripts=function(e,n,i,o,a,s,l){for(var c=this.adaptor,f=e-a.d+(n-o.h),d=e<0&&n===0?o.h+e:e,u=f>0?{style:{height:this.em(f)}}:{},m=d?{style:{"vertical-align":this.em(d)}}:{},p=this.html("mjx-row"),_=this.html("mjx-row",u),y=this.html("mjx-row"),g="mjx-"+(i?"pre":"")+"scripts",v=s+2*l;s<v;)this.childNodes[s++].toCHTML(c.append(y,this.html("mjx-cell"))),this.childNodes[s++].toCHTML(c.append(p,this.html("mjx-cell")));return c.append(this.chtml,this.html(g,m,[p,_,y]))},r.kind=mmultiscripts_js_2.MmlMmultiscripts.prototype.kind,r.styles={"mjx-prescripts":{display:"inline-table","padding-left":".05em"},"mjx-scripts":{display:"inline-table","padding-right":".05em"},"mjx-prescripts > mjx-row > mjx-cell":{"text-align":"right"},'[script-align="left"] > mjx-row > mjx-cell':{"text-align":"left"},'[script-align="center"] > mjx-row > mjx-cell':{"text-align":"center"},'[script-align="right"] > mjx-row > mjx-cell':{"text-align":"right"}},r}((0,mmultiscripts_js_1$2.CommonMmultiscriptsMixin)(msubsup_js_1$2.CHTMLmsubsup));mmultiscripts$2.CHTMLmmultiscripts=CHTMLmmultiscripts;var mtable$2={},mtable$1={},numeric={};Object.defineProperty(numeric,"__esModule",{value:!0});numeric.max=numeric.sum=void 0;function sum(t){return t.reduce(function(r,e){return r+e},0)}numeric.sum=sum;function max$1(t){return t.reduce(function(r,e){return Math.max(r,e)},0)}numeric.max=max$1;var __extends$11=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$r=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$i=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__values$t=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mtable$1,"__esModule",{value:!0});mtable$1.CommonMtableMixin=void 0;var BBox_js_1=BBox$1,string_js_1$5=string,numeric_js_1=numeric;function CommonMtableMixin(t){return function(r){__extends$11(e,r);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(this,__spreadArray$i([],__read$r(n),!1))||this;o.numCols=0,o.numRows=0,o.data=null,o.pwidthCells=[],o.pWidth=0,o.numCols=(0,numeric_js_1.max)(o.tableRows.map(function(s){return s.numCells})),o.numRows=o.childNodes.length,o.hasLabels=o.childNodes.reduce(function(s,l){return s||l.node.isKind("mlabeledtr")},!1),o.findContainer(),o.isTop=!o.container||o.container.node.isKind("math")&&!o.container.parent,o.isTop&&(o.jax.table=o),o.getPercentageWidth();var a=o.node.attributes;return o.frame=a.get("frame")!=="none",o.fLine=o.frame&&a.get("frame")?.07:0,o.fSpace=o.frame?o.convertLengths(o.getAttributeArray("framespacing")):[0,0],o.cSpace=o.convertLengths(o.getColumnAttributes("columnspacing")),o.rSpace=o.convertLengths(o.getRowAttributes("rowspacing")),o.cLines=o.getColumnAttributes("columnlines").map(function(s){return s==="none"?0:.07}),o.rLines=o.getRowAttributes("rowlines").map(function(s){return s==="none"?0:.07}),o.cWidths=o.getColumnWidths(),o.stretchRows(),o.stretchColumns(),o}return Object.defineProperty(e.prototype,"tableRows",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),e.prototype.findContainer=function(){for(var n=this,i=n.parent;i&&(i.node.notParent||i.node.isKind("mrow"));)n=i,i=i.parent;this.container=i,this.containerI=n.node.childPosition()},e.prototype.getPercentageWidth=function(){if(this.hasLabels)this.bbox.pwidth=BBox_js_1.BBox.fullWidth;else{var n=this.node.attributes.get("width");(0,string_js_1$5.isPercent)(n)&&(this.bbox.pwidth=n)}},e.prototype.stretchRows=function(){for(var n=this.node.attributes.get("equalrows"),i=n?this.getEqualRowHeight():0,o=n?this.getTableData():{H:[0],D:[0]},a=o.H,s=o.D,l=this.tableRows,c=0;c<this.numRows;c++){var f=n?[(i+a[c]-s[c])/2,(i-a[c]+s[c])/2]:null;l[c].stretchChildren(f)}},e.prototype.stretchColumns=function(){for(var n=0;n<this.numCols;n++){var i=typeof this.cWidths[n]=="number"?this.cWidths[n]:null;this.stretchColumn(n,i)}},e.prototype.stretchColumn=function(n,i){var o,a,s,l,c,f,d=[];try{for(var u=__values$t(this.tableRows),m=u.next();!m.done;m=u.next()){var p=m.value,_=p.getChild(n);if(_){var y=_.childNodes[0];y.stretch.dir===0&&y.canStretch(2)&&d.push(y)}}}catch($){o={error:$}}finally{try{m&&!m.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}var g=d.length,v=this.childNodes.length;if(g&&v>1){if(i===null){i=0;var x=g>1&&g===v;try{for(var b=__values$t(this.tableRows),S=b.next();!S.done;S=b.next()){var p=S.value,_=p.getChild(n);if(_){var y=_.childNodes[0],M=y.stretch.dir===0;if(x||M){var C=y.getBBox(M).w;C>i&&(i=C)}}}}catch($){s={error:$}}finally{try{S&&!S.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}}try{for(var A=__values$t(d),E=A.next();!E.done;E=A.next()){var y=E.value;y.coreMO().getStretchedVariant([i])}}catch($){c={error:$}}finally{try{E&&!E.done&&(f=A.return)&&f.call(A)}finally{if(c)throw c.error}}}},e.prototype.getTableData=function(){if(this.data)return this.data;for(var n=new Array(this.numRows).fill(0),i=new Array(this.numRows).fill(0),o=new Array(this.numCols).fill(0),a=new Array(this.numRows),s=new Array(this.numRows),l=[0],c=this.tableRows,f=0;f<c.length;f++){for(var d=0,u=c[f],m=u.node.attributes.get("rowalign"),p=0;p<u.numCells;p++){var _=u.getChild(p);d=this.updateHDW(_,p,f,m,n,i,o,d),this.recordPWidthCell(_,p)}a[f]=n[f],s[f]=i[f],u.labeled&&(d=this.updateHDW(u.childNodes[0],0,f,m,n,i,l,d)),this.extendHD(f,n,i,d),this.extendHD(f,a,s,d)}var y=l[0];return this.data={H:n,D:i,W:o,NH:a,ND:s,L:y},this.data},e.prototype.updateHDW=function(n,i,o,a,s,l,c,f){var d=n.getBBox(),u=d.h,m=d.d,p=d.w,_=n.parent.bbox.rscale;n.parent.bbox.rscale!==1&&(u*=_,m*=_,p*=_),this.node.getProperty("useHeight")&&(u<.75&&(u=.75),m<.25&&(m=.25));var y=0;return a=n.node.attributes.get("rowalign")||a,a!=="baseline"&&a!=="axis"&&(y=u+m,u=m=0),u>s[o]&&(s[o]=u),m>l[o]&&(l[o]=m),y>f&&(f=y),c&&p>c[i]&&(c[i]=p),f},e.prototype.extendHD=function(n,i,o,a){var s=(a-(i[n]+o[n]))/2;s<1e-5||(i[n]+=s,o[n]+=s)},e.prototype.recordPWidthCell=function(n,i){n.childNodes[0]&&n.childNodes[0].getBBox().pwidth&&this.pwidthCells.push([n,i])},e.prototype.computeBBox=function(n,i){var o=this.getTableData(),a=o.H,s=o.D,l,c;if(this.node.attributes.get("equalrows")){var f=this.getEqualRowHeight();l=(0,numeric_js_1.sum)([].concat(this.rLines,this.rSpace))+f*this.numRows}else l=(0,numeric_js_1.sum)(a.concat(s,this.rLines,this.rSpace));l+=2*(this.fLine+this.fSpace[1]);var d=this.getComputedWidths();c=(0,numeric_js_1.sum)(d.concat(this.cLines,this.cSpace))+2*(this.fLine+this.fSpace[0]);var u=this.node.attributes.get("width");u!=="auto"&&(c=Math.max(this.length2em(u,0)+2*this.fLine,c));var m=__read$r(this.getBBoxHD(l),2),p=m[0],_=m[1];n.h=p,n.d=_,n.w=c;var y=__read$r(this.getBBoxLR(),2),g=y[0],v=y[1];n.L=g,n.R=v,(0,string_js_1$5.isPercent)(u)||this.setColumnPWidths()},e.prototype.setChildPWidths=function(n,i,o){var a=this.node.attributes.get("width");if(!(0,string_js_1$5.isPercent)(a))return!1;this.hasLabels||(this.bbox.pwidth="",this.container.bbox.pwidth="");var s=this.bbox,l=s.w,c=s.L,f=s.R,d=this.node.attributes.get("data-width-includes-label"),u=Math.max(l,this.length2em(a,Math.max(i,c+l+f)))-(d?c+f:0),m=this.node.attributes.get("equalcolumns")?Array(this.numCols).fill(this.percent(1/Math.max(1,this.numCols))):this.getColumnAttributes("columnwidth",0);this.cWidths=this.getColumnWidthsFixed(m,u);var p=this.getComputedWidths();return this.pWidth=(0,numeric_js_1.sum)(p.concat(this.cLines,this.cSpace))+2*(this.fLine+this.fSpace[0]),this.isTop&&(this.bbox.w=this.pWidth),this.setColumnPWidths(),this.pWidth!==l&&this.parent.invalidateBBox(),this.pWidth!==l},e.prototype.setColumnPWidths=function(){var n,i,o=this.cWidths;try{for(var a=__values$t(this.pwidthCells),s=a.next();!s.done;s=a.next()){var l=__read$r(s.value,2),c=l[0],f=l[1];c.setChildPWidths(!1,o[f])&&(c.invalidateBBox(),c.getBBox())}}catch(d){n={error:d}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},e.prototype.getBBoxHD=function(n){var i=__read$r(this.getAlignmentRow(),2),o=i[0],a=i[1];if(a===null){var s=this.font.params.axis_height,l=n/2,c={top:[0,n],center:[l,l],bottom:[n,0],baseline:[l,l],axis:[l+s,l-s]};return c[o]||[l,l]}else{var f=this.getVerticalPosition(a,o);return[f,n-f]}},e.prototype.getBBoxLR=function(){if(this.hasLabels){var n=this.node.attributes,i=n.get("side"),o=__read$r(this.getPadAlignShift(i),2),a=o[0],s=o[1],l=this.hasLabels&&!!n.get("data-width-includes-label");return l&&this.frame&&this.fSpace[0]&&(a-=this.fSpace[0]),s==="center"&&!l?[a,a]:i==="left"?[a,0]:[0,a]}return[0,0]},e.prototype.getPadAlignShift=function(n){var i=this.getTableData().L,o=this.length2em(this.node.attributes.get("minlabelspacing")),a=i+o,s=__read$r(this.styles==null?["",""]:[this.styles.get("padding-left"),this.styles.get("padding-right")],2),l=s[0],c=s[1];(l||c)&&(a=Math.max(a,this.length2em(l||"0"),this.length2em(c||"0")));var f=__read$r(this.getAlignShift(),2),d=f[0],u=f[1];return d===n&&(u=n==="left"?Math.max(a,u)-a:Math.min(-a,u)+a),[a,d,u]},e.prototype.getAlignShift=function(){return this.isTop?r.prototype.getAlignShift.call(this):[this.container.getChildAlign(this.containerI),0]},e.prototype.getWidth=function(){return this.pWidth||this.getBBox().w},e.prototype.getEqualRowHeight=function(){var n=this.getTableData(),i=n.H,o=n.D,a=Array.from(i.keys()).map(function(s){return i[s]+o[s]});return Math.max.apply(Math,a)},e.prototype.getComputedWidths=function(){var n=this,i=this.getTableData().W,o=Array.from(i.keys()).map(function(a){return typeof n.cWidths[a]=="number"?n.cWidths[a]:i[a]});return this.node.attributes.get("equalcolumns")&&(o=Array(o.length).fill((0,numeric_js_1.max)(o))),o},e.prototype.getColumnWidths=function(){var n=this.node.attributes.get("width");if(this.node.attributes.get("equalcolumns"))return this.getEqualColumns(n);var i=this.getColumnAttributes("columnwidth",0);return n==="auto"?this.getColumnWidthsAuto(i):(0,string_js_1$5.isPercent)(n)?this.getColumnWidthsPercent(i):this.getColumnWidthsFixed(i,this.length2em(n))},e.prototype.getEqualColumns=function(n){var i=Math.max(1,this.numCols),o;if(n==="auto"){var a=this.getTableData().W;o=(0,numeric_js_1.max)(a)}else if((0,string_js_1$5.isPercent)(n))o=this.percent(1/i);else{var s=(0,numeric_js_1.sum)([].concat(this.cLines,this.cSpace))+2*this.fSpace[0];o=Math.max(0,this.length2em(n)-s)/i}return Array(this.numCols).fill(o)},e.prototype.getColumnWidthsAuto=function(n){var i=this;return n.map(function(o){return o==="auto"||o==="fit"?null:(0,string_js_1$5.isPercent)(o)?o:i.length2em(o)})},e.prototype.getColumnWidthsPercent=function(n){var i=this,o=n.indexOf("fit")>=0,a=(o?this.getTableData():{W:null}).W;return Array.from(n.keys()).map(function(s){var l=n[s];return l==="fit"?null:l==="auto"?o?a[s]:null:(0,string_js_1$5.isPercent)(l)?l:i.length2em(l)})},e.prototype.getColumnWidthsFixed=function(n,i){var o=this,a=Array.from(n.keys()),s=a.filter(function(p){return n[p]==="fit"}),l=a.filter(function(p){return n[p]==="auto"}),c=s.length||l.length,f=(c?this.getTableData():{W:null}).W,d=i-(0,numeric_js_1.sum)([].concat(this.cLines,this.cSpace))-2*this.fSpace[0],u=d;a.forEach(function(p){var _=n[p];u-=_==="fit"||_==="auto"?f[p]:o.length2em(_,d)});var m=c&&u>0?u/c:0;return a.map(function(p){var _=n[p];return _==="fit"?f[p]+m:_==="auto"?f[p]+(s.length===0?m:0):o.length2em(_,d)})},e.prototype.getVerticalPosition=function(n,i){for(var o=this.node.attributes.get("equalrows"),a=this.getTableData(),s=a.H,l=a.D,c=o?this.getEqualRowHeight():0,f=this.getRowHalfSpacing(),d=this.fLine,u=0;u<n;u++)d+=f[u]+(o?c:s[u]+l[u])+f[u+1]+this.rLines[u];var m=__read$r(o?[(c+s[n]-l[n])/2,(c-s[n]+l[n])/2]:[s[n],l[n]],2),p=m[0],_=m[1],y={top:0,center:f[n]+(p+_)/2,bottom:f[n]+p+_+f[n+1],baseline:f[n]+p,axis:f[n]+p-.25};return d+=y[i]||0,d},e.prototype.getEmHalfSpacing=function(n,i,o){o===void 0&&(o=1);var a=this.em(n*o),s=this.addEm(i,2/o);return s.unshift(a),s.push(a),s},e.prototype.getRowHalfSpacing=function(){var n=this.rSpace.map(function(i){return i/2});return n.unshift(this.fSpace[1]),n.push(this.fSpace[1]),n},e.prototype.getColumnHalfSpacing=function(){var n=this.cSpace.map(function(i){return i/2});return n.unshift(this.fSpace[0]),n.push(this.fSpace[0]),n},e.prototype.getAlignmentRow=function(){var n=__read$r((0,string_js_1$5.split)(this.node.attributes.get("align")),2),i=n[0],o=n[1];if(o==null)return[i,null];var a=parseInt(o);return a<0&&(a+=this.numRows+1),[i,a<1||a>this.numRows?null:a-1]},e.prototype.getColumnAttributes=function(n,i){i===void 0&&(i=1);var o=this.numCols-i,a=this.getAttributeArray(n);if(a.length===0)return null;for(;a.length<o;)a.push(a[a.length-1]);return a.length>o&&a.splice(o),a},e.prototype.getRowAttributes=function(n,i){i===void 0&&(i=1);var o=this.numRows-i,a=this.getAttributeArray(n);if(a.length===0)return null;for(;a.length<o;)a.push(a[a.length-1]);return a.length>o&&a.splice(o),a},e.prototype.getAttributeArray=function(n){var i=this.node.attributes.get(n);return i?(0,string_js_1$5.split)(i):[this.node.attributes.getDefault(n)]},e.prototype.addEm=function(n,i){var o=this;return i===void 0&&(i=1),n?n.map(function(a){return o.em(a/i)}):null},e.prototype.convertLengths=function(n){var i=this;return n?n.map(function(o){return i.length2em(o)}):null},e}(t)}mtable$1.CommonMtableMixin=CommonMtableMixin;var mtable={},__extends$10=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$n=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$n=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$n.apply(this,arguments)},__values$s=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mtable,"__esModule",{value:!0});mtable.MmlMtable=void 0;var MmlNode_js_1$t=MmlNode,string_js_1$4=string,MmlMtable=function(t){__extends$10(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.properties={useHeight:!0},e.texclass=MmlNode_js_1$t.TEXCLASS.ORD,e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mtable"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.setInheritedAttributes=function(e,n,i,o){var a,s;try{for(var l=__values$s(MmlNode_js_1$t.indentAttributes),c=l.next();!c.done;c=l.next()){var f=c.value;e[f]&&this.attributes.setInherited(f,e[f][1]),this.attributes.getExplicit(f)!==void 0&&delete this.attributes.getAllAttributes()[f]}}catch(d){a={error:d}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}t.prototype.setInheritedAttributes.call(this,e,n,i,o)},r.prototype.setChildInheritedAttributes=function(e,n,i,o){var a,s,l,c;try{for(var f=__values$s(this.childNodes),d=f.next();!d.done;d=f.next()){var u=d.value;u.isKind("mtr")||this.replaceChild(this.factory.create("mtr"),u).appendChild(u)}}catch(g){a={error:g}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}i=this.getProperty("scriptlevel")||i,n=!!(this.attributes.getExplicit("displaystyle")||this.attributes.getDefault("displaystyle")),e=this.addInheritedAttributes(e,{columnalign:this.attributes.get("columnalign"),rowalign:"center"});var m=this.attributes.getExplicit("data-cramped"),p=(0,string_js_1$4.split)(this.attributes.get("rowalign"));try{for(var _=__values$s(this.childNodes),y=_.next();!y.done;y=_.next()){var u=y.value;e.rowalign[1]=p.shift()||e.rowalign[1],u.setInheritedAttributes(e,n,i,!!m)}}catch(g){l={error:g}}finally{try{y&&!y.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}},r.prototype.verifyChildren=function(e){for(var n=null,i=this.factory,o=0;o<this.childNodes.length;o++){var a=this.childNodes[o];if(a.isKind("mtr"))n=null;else{var s=a.isKind("mtd");if(n?(this.removeChild(a),o--):n=this.replaceChild(i.create("mtr"),a),n.appendChild(s?a:i.create("mtd",{},[a])),!e.fixMtables){a.parent.removeChild(a),a.parent=this,s&&n.appendChild(i.create("mtd"));var l=a.mError("Children of "+this.kind+" must be mtr or mlabeledtr",e,s);n.childNodes[n.childNodes.length-1].appendChild(l)}}}t.prototype.verifyChildren.call(this,e)},r.prototype.setTeXclass=function(e){var n,i;this.getPrevClass(e);try{for(var o=__values$s(this.childNodes),a=o.next();!a.done;a=o.next()){var s=a.value;s.setTeXclass(null)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return this},r.defaults=__assign$n(__assign$n({},MmlNode_js_1$t.AbstractMmlNode.defaults),{align:"axis",rowalign:"baseline",columnalign:"center",groupalign:"{left}",alignmentscope:!0,columnwidth:"auto",width:"auto",rowspacing:"1ex",columnspacing:".8em",rowlines:"none",columnlines:"none",frame:"none",framespacing:"0.4em 0.5ex",equalrows:!1,equalcolumns:!1,displaystyle:!1,side:"right",minlabelspacing:"0.8em"}),r}(MmlNode_js_1$t.AbstractMmlNode);mtable.MmlMtable=MmlMtable;var __extends$$=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__values$r=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$q=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(mtable$2,"__esModule",{value:!0});mtable$2.CHTMLmtable=void 0;var Wrapper_js_1$8=Wrapper$2,mtable_js_1$2=mtable$1,mtable_js_2=mtable,string_js_1$3=string,CHTMLmtable=function(t){__extends$$(r,t);function r(e,n,i){i===void 0&&(i=null);var o=t.call(this,e,n,i)||this;return o.itable=o.html("mjx-itable"),o.labels=o.html("mjx-itable"),o}return r.prototype.getAlignShift=function(){var e=t.prototype.getAlignShift.call(this);return this.isTop||(e[1]=0),e},r.prototype.toCHTML=function(e){var n,i,o=this.standardCHTMLnode(e);this.adaptor.append(o,this.html("mjx-table",{},[this.itable]));try{for(var a=__values$r(this.childNodes),s=a.next();!s.done;s=a.next()){var l=s.value;l.toCHTML(this.itable)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}this.padRows(),this.handleColumnSpacing(),this.handleColumnLines(),this.handleColumnWidths(),this.handleRowSpacing(),this.handleRowLines(),this.handleRowHeights(),this.handleFrame(),this.handleWidth(),this.handleLabels(),this.handleAlign(),this.handleJustify(),this.shiftColor()},r.prototype.shiftColor=function(){var e=this.adaptor,n=e.getStyle(this.chtml,"backgroundColor");n&&(e.setStyle(this.chtml,"backgroundColor",""),e.setStyle(this.itable,"backgroundColor",n))},r.prototype.padRows=function(){var e,n,i=this.adaptor;try{for(var o=__values$r(i.childNodes(this.itable)),a=o.next();!a.done;a=o.next())for(var s=a.value;i.childNodes(s).length<this.numCols;)i.append(s,this.html("mjx-mtd",{extra:!0}))}catch(l){e={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}},r.prototype.handleColumnSpacing=function(){var e,n,i,o,a=this.childNodes[0]?1/this.childNodes[0].getBBox().rscale:1,s=this.getEmHalfSpacing(this.fSpace[0],this.cSpace,a),l=this.frame;try{for(var c=__values$r(this.tableRows),f=c.next();!f.done;f=c.next()){var d=f.value,u=0;try{for(var m=(i=void 0,__values$r(d.tableCells)),p=m.next();!p.done;p=m.next()){var _=p.value,y=s[u++],g=s[u],v=_?_.chtml:this.adaptor.childNodes(d.chtml)[u];(u>1&&y!=="0.4em"||l&&u===1)&&this.adaptor.setStyle(v,"paddingLeft",y),(u<this.numCols&&g!=="0.4em"||l&&u===this.numCols)&&this.adaptor.setStyle(v,"paddingRight",g)}}catch(x){i={error:x}}finally{try{p&&!p.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}}}catch(x){e={error:x}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}},r.prototype.handleColumnLines=function(){var e,n,i,o;if(this.node.attributes.get("columnlines")!=="none"){var a=this.getColumnAttributes("columnlines");try{for(var s=__values$r(this.childNodes),l=s.next();!l.done;l=s.next()){var c=l.value,f=0;try{for(var d=(i=void 0,__values$r(this.adaptor.childNodes(c.chtml).slice(1))),u=d.next();!u.done;u=d.next()){var m=u.value,p=a[f++];p!=="none"&&this.adaptor.setStyle(m,"borderLeft",".07em "+p)}}catch(_){i={error:_}}finally{try{u&&!u.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}}catch(_){e={error:_}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},r.prototype.handleColumnWidths=function(){var e,n,i,o;try{for(var a=__values$r(this.childNodes),s=a.next();!s.done;s=a.next()){var l=s.value,c=0;try{for(var f=(i=void 0,__values$r(this.adaptor.childNodes(l.chtml))),d=f.next();!d.done;d=f.next()){var u=d.value,m=this.cWidths[c++];if(m!==null){var p=typeof m=="number"?this.em(m):m;this.adaptor.setStyle(u,"width",p),this.adaptor.setStyle(u,"maxWidth",p),this.adaptor.setStyle(u,"minWidth",p)}}}catch(_){i={error:_}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}}}catch(_){e={error:_}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}},r.prototype.handleRowSpacing=function(){var e,n,i,o,a=this.childNodes[0]?1/this.childNodes[0].getBBox().rscale:1,s=this.getEmHalfSpacing(this.fSpace[1],this.rSpace,a),l=this.frame,c=0;try{for(var f=__values$r(this.childNodes),d=f.next();!d.done;d=f.next()){var u=d.value,m=s[c++],p=s[c];try{for(var _=(i=void 0,__values$r(u.childNodes)),y=_.next();!y.done;y=_.next()){var g=y.value;(c>1&&m!=="0.215em"||l&&c===1)&&this.adaptor.setStyle(g.chtml,"paddingTop",m),(c<this.numRows&&p!=="0.215em"||l&&c===this.numRows)&&this.adaptor.setStyle(g.chtml,"paddingBottom",p)}}catch(v){i={error:v}}finally{try{y&&!y.done&&(o=_.return)&&o.call(_)}finally{if(i)throw i.error}}}}catch(v){e={error:v}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(e)throw e.error}}},r.prototype.handleRowLines=function(){var e,n,i,o;if(this.node.attributes.get("rowlines")!=="none"){var a=this.getRowAttributes("rowlines"),s=0;try{for(var l=__values$r(this.childNodes.slice(1)),c=l.next();!c.done;c=l.next()){var f=c.value,d=a[s++];if(d!=="none")try{for(var u=(i=void 0,__values$r(this.adaptor.childNodes(f.chtml))),m=u.next();!m.done;m=u.next()){var p=m.value;this.adaptor.setStyle(p,"borderTop",".07em "+d)}}catch(_){i={error:_}}finally{try{m&&!m.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}}}catch(_){e={error:_}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}}},r.prototype.handleRowHeights=function(){this.node.attributes.get("equalrows")&&this.handleEqualRows()},r.prototype.handleEqualRows=function(){for(var e=this.getRowHalfSpacing(),n=this.getTableData(),i=n.H,o=n.D,a=n.NH,s=n.ND,l=this.getEqualRowHeight(),c=0;c<this.numRows;c++){var f=this.childNodes[c];this.setRowHeight(f,l+e[c]+e[c+1]+this.rLines[c]),l!==a[c]+s[c]&&this.setRowBaseline(f,l,(l-i[c]+o[c])/2)}},r.prototype.setRowHeight=function(e,n){this.adaptor.setStyle(e.chtml,"height",this.em(n))},r.prototype.setRowBaseline=function(e,n,i){var o,a,s=e.node.attributes.get("rowalign");try{for(var l=__values$r(e.childNodes),c=l.next();!c.done;c=l.next()){var f=c.value;if(this.setCellBaseline(f,s,n,i))break}}catch(d){o={error:d}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}},r.prototype.setCellBaseline=function(e,n,i,o){var a=e.node.attributes.get("rowalign");if(a==="baseline"||a==="axis"){var s=this.adaptor,l=s.lastChild(e.chtml);s.setStyle(l,"height",this.em(i)),s.setStyle(l,"verticalAlign",this.em(-o));var c=e.parent;if((!c.node.isKind("mlabeledtr")||e!==c.childNodes[0])&&(n==="baseline"||n==="axis"))return!0}return!1},r.prototype.handleFrame=function(){this.frame&&this.fLine&&this.adaptor.setStyle(this.itable,"border",".07em "+this.node.attributes.get("frame"))},r.prototype.handleWidth=function(){var e=this.adaptor,n=this.getBBox(),i=n.w,o=n.L,a=n.R;e.setStyle(this.chtml,"minWidth",this.em(o+i+a));var s=this.node.attributes.get("width");if((0,string_js_1$3.isPercent)(s))e.setStyle(this.chtml,"width",""),e.setAttribute(this.chtml,"width","full");else if(!this.hasLabels){if(s==="auto")return;s=this.em(this.length2em(s)+2*this.fLine)}var l=e.firstChild(this.chtml);if(e.setStyle(l,"width",s),e.setStyle(l,"minWidth",this.em(i)),o||a){e.setStyle(this.chtml,"margin","");var c=this.node.attributes.get("data-width-includes-label")?"padding":"margin";o===a?e.setStyle(l,c,"0 "+this.em(a)):e.setStyle(l,c,"0 "+this.em(a)+" 0 "+this.em(o))}e.setAttribute(this.itable,"width","full")},r.prototype.handleAlign=function(){var e=__read$q(this.getAlignmentRow(),2),n=e[0],i=e[1];if(i===null)n!=="axis"&&this.adaptor.setAttribute(this.chtml,"align",n);else{var o=this.getVerticalPosition(i,n);this.adaptor.setAttribute(this.chtml,"align","top"),this.adaptor.setStyle(this.chtml,"verticalAlign",this.em(o))}},r.prototype.handleJustify=function(){var e=this.getAlignShift()[0];e!=="center"&&this.adaptor.setAttribute(this.chtml,"justify",e)},r.prototype.handleLabels=function(){if(this.hasLabels){var e=this.labels,n=this.node.attributes,i=this.adaptor,o=n.get("side");i.setAttribute(this.chtml,"side",o),i.setAttribute(e,"align",o),i.setStyle(e,o,"0");var a=__read$q(this.addLabelPadding(o),2),s=a[0],l=a[1];if(l){var c=i.firstChild(this.chtml);this.setIndent(c,s,l)}this.updateRowHeights(),this.addLabelSpacing()}},r.prototype.addLabelPadding=function(e){var n=__read$q(this.getPadAlignShift(e),3),i=n[1],o=n[2],a={};if(e==="right"&&!this.node.attributes.get("data-width-includes-label")){var s=this.node.attributes.get("width"),l=this.getBBox(),c=l.w,f=l.L,d=l.R;a.style={width:(0,string_js_1$3.isPercent)(s)?"calc("+s+" + "+this.em(f+d)+")":this.em(f+c+d)}}return this.adaptor.append(this.chtml,this.html("mjx-labels",a,[this.labels])),[i,o]},r.prototype.updateRowHeights=function(){for(var e=this.getTableData(),n=e.H,i=e.D,o=e.NH,a=e.ND,s=this.getRowHalfSpacing(),l=0;l<this.numRows;l++){var c=this.childNodes[l];this.setRowHeight(c,n[l]+i[l]+s[l]+s[l+1]+this.rLines[l]),n[l]!==o[l]||i[l]!==a[l]?this.setRowBaseline(c,n[l]+i[l],i[l]):c.node.isKind("mlabeledtr")&&this.setCellBaseline(c.childNodes[0],"",n[l]+i[l],i[l])}},r.prototype.addLabelSpacing=function(){for(var e=this.adaptor,n=this.node.attributes.get("equalrows"),i=this.getTableData(),o=i.H,a=i.D,s=n?this.getEqualRowHeight():0,l=this.getRowHalfSpacing(),c=this.fLine,f=e.firstChild(this.labels),d=0;d<this.numRows;d++){var u=this.childNodes[d];u.node.isKind("mlabeledtr")?(c&&e.insert(this.html("mjx-mtr",{style:{height:this.em(c)}}),f),e.setStyle(f,"height",this.em((n?s:o[d]+a[d])+l[d]+l[d+1])),f=e.next(f),c=this.rLines[d]):c+=l[d]+(n?s:o[d]+a[d])+l[d+1]+this.rLines[d]}},r.kind=mtable_js_2.MmlMtable.prototype.kind,r.styles={"mjx-mtable":{"vertical-align":".25em","text-align":"center",position:"relative","box-sizing":"border-box","border-spacing":0,"border-collapse":"collapse"},'mjx-mstyle[size="s"] mjx-mtable':{"vertical-align":".354em"},"mjx-labels":{position:"absolute",left:0,top:0},"mjx-table":{display:"inline-block","vertical-align":"-.5ex","box-sizing":"border-box"},"mjx-table > mjx-itable":{"vertical-align":"middle","text-align":"left","box-sizing":"border-box"},"mjx-labels > mjx-itable":{position:"absolute",top:0},'mjx-mtable[justify="left"]':{"text-align":"left"},'mjx-mtable[justify="right"]':{"text-align":"right"},'mjx-mtable[justify="left"][side="left"]':{"padding-right":"0 ! important"},'mjx-mtable[justify="left"][side="right"]':{"padding-left":"0 ! important"},'mjx-mtable[justify="right"][side="left"]':{"padding-right":"0 ! important"},'mjx-mtable[justify="right"][side="right"]':{"padding-left":"0 ! important"},"mjx-mtable[align]":{"vertical-align":"baseline"},'mjx-mtable[align="top"] > mjx-table':{"vertical-align":"top"},'mjx-mtable[align="bottom"] > mjx-table':{"vertical-align":"bottom"},'mjx-mtable[side="right"] mjx-labels':{"min-width":"100%"}},r}((0,mtable_js_1$2.CommonMtableMixin)(Wrapper_js_1$8.CHTMLWrapper));mtable$2.CHTMLmtable=CHTMLmtable;var mtr$2={},mtr$1={},__extends$_=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__values$q=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mtr$1,"__esModule",{value:!0});mtr$1.CommonMlabeledtrMixin=mtr$1.CommonMtrMixin=void 0;function CommonMtrMixin(t){return function(r){__extends$_(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"fixesPWidth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numCells",{get:function(){return this.childNodes.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labeled",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tableCells",{get:function(){return this.childNodes},enumerable:!1,configurable:!0}),e.prototype.getChild=function(n){return this.childNodes[n]},e.prototype.getChildBBoxes=function(){return this.childNodes.map(function(n){return n.getBBox()})},e.prototype.stretchChildren=function(n){var i,o,a,s,l,c;n===void 0&&(n=null);var f=[],d=this.labeled?this.childNodes.slice(1):this.childNodes;try{for(var u=__values$q(d),m=u.next();!m.done;m=u.next()){var p=m.value,_=p.childNodes[0];_.canStretch(1)&&f.push(_)}}catch(F){i={error:F}}finally{try{m&&!m.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}var y=f.length,g=this.childNodes.length;if(y&&g>1){if(n===null){var v=0,x=0,b=y>1&&y===g;try{for(var S=__values$q(d),M=S.next();!M.done;M=S.next()){var p=M.value,_=p.childNodes[0],C=_.stretch.dir===0;if(b||C){var A=_.getBBox(C),E=A.h,$=A.d;E>v&&(v=E),$>x&&(x=$)}}}catch(F){a={error:F}}finally{try{M&&!M.done&&(s=S.return)&&s.call(S)}finally{if(a)throw a.error}}n=[v,x]}try{for(var D=__values$q(f),B=D.next();!B.done;B=D.next()){var _=B.value;_.coreMO().getStretchedVariant(n)}}catch(F){l={error:F}}finally{try{B&&!B.done&&(c=D.return)&&c.call(D)}finally{if(l)throw l.error}}}},e}(t)}mtr$1.CommonMtrMixin=CommonMtrMixin;function CommonMlabeledtrMixin(t){return function(r){__extends$_(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"numCells",{get:function(){return Math.max(0,this.childNodes.length-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labeled",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tableCells",{get:function(){return this.childNodes.slice(1)},enumerable:!1,configurable:!0}),e.prototype.getChild=function(n){return this.childNodes[n+1]},e.prototype.getChildBBoxes=function(){return this.childNodes.slice(1).map(function(n){return n.getBBox()})},e}(t)}mtr$1.CommonMlabeledtrMixin=CommonMlabeledtrMixin;var mtr={},__extends$Z=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$m=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$m=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$m.apply(this,arguments)},__values$p=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(mtr,"__esModule",{value:!0});mtr.MmlMlabeledtr=mtr.MmlMtr=void 0;var MmlNode_js_1$s=MmlNode,Attributes_js_1$3=Attributes,string_js_1$2=string,MmlMtr=function(t){__extends$Z(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mtr"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.setChildInheritedAttributes=function(e,n,i,o){var a,s,l,c;try{for(var f=__values$p(this.childNodes),d=f.next();!d.done;d=f.next()){var u=d.value;u.isKind("mtd")||this.replaceChild(this.factory.create("mtd"),u).appendChild(u)}}catch(y){a={error:y}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}var m=(0,string_js_1$2.split)(this.attributes.get("columnalign"));this.arity===1&&m.unshift(this.parent.attributes.get("side")),e=this.addInheritedAttributes(e,{rowalign:this.attributes.get("rowalign"),columnalign:"center"});try{for(var p=__values$p(this.childNodes),_=p.next();!_.done;_=p.next()){var u=_.value;e.columnalign[1]=m.shift()||e.columnalign[1],u.setInheritedAttributes(e,n,i,o)}}catch(y){l={error:y}}finally{try{_&&!_.done&&(c=p.return)&&c.call(p)}finally{if(l)throw l.error}}},r.prototype.verifyChildren=function(e){var n,i;if(this.parent&&!this.parent.isKind("mtable")){this.mError(this.kind+" can only be a child of an mtable",e,!0);return}try{for(var o=__values$p(this.childNodes),a=o.next();!a.done;a=o.next()){var s=a.value;if(!s.isKind("mtd")){var l=this.replaceChild(this.factory.create("mtd"),s);l.appendChild(s),e.fixMtables||s.mError("Children of "+this.kind+" must be mtd",e)}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}t.prototype.verifyChildren.call(this,e)},r.prototype.setTeXclass=function(e){var n,i;this.getPrevClass(e);try{for(var o=__values$p(this.childNodes),a=o.next();!a.done;a=o.next()){var s=a.value;s.setTeXclass(null)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return this},r.defaults=__assign$m(__assign$m({},MmlNode_js_1$s.AbstractMmlNode.defaults),{rowalign:Attributes_js_1$3.INHERIT,columnalign:Attributes_js_1$3.INHERIT,groupalign:Attributes_js_1$3.INHERIT}),r}(MmlNode_js_1$s.AbstractMmlNode);mtr.MmlMtr=MmlMtr;var MmlMlabeledtr=function(t){__extends$Z(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mlabeledtr"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 1},enumerable:!1,configurable:!0}),r}(MmlMtr);mtr.MmlMlabeledtr=MmlMlabeledtr;var __extends$Y=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mtr$2,"__esModule",{value:!0});mtr$2.CHTMLmlabeledtr=mtr$2.CHTMLmtr=void 0;var Wrapper_js_1$7=Wrapper$2,mtr_js_1$2=mtr$1,mtr_js_2=mtr$1,mtr_js_3=mtr,CHTMLmtr=function(t){__extends$Y(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){t.prototype.toCHTML.call(this,e);var n=this.node.attributes.get("rowalign");n!=="baseline"&&this.adaptor.setAttribute(this.chtml,"rowalign",n)},r.kind=mtr_js_3.MmlMtr.prototype.kind,r.styles={"mjx-mtr":{display:"table-row"},'mjx-mtr[rowalign="top"] > mjx-mtd':{"vertical-align":"top"},'mjx-mtr[rowalign="center"] > mjx-mtd':{"vertical-align":"middle"},'mjx-mtr[rowalign="bottom"] > mjx-mtd':{"vertical-align":"bottom"},'mjx-mtr[rowalign="baseline"] > mjx-mtd':{"vertical-align":"baseline"},'mjx-mtr[rowalign="axis"] > mjx-mtd':{"vertical-align":".25em"}},r}((0,mtr_js_1$2.CommonMtrMixin)(Wrapper_js_1$7.CHTMLWrapper));mtr$2.CHTMLmtr=CHTMLmtr;var CHTMLmlabeledtr=function(t){__extends$Y(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){t.prototype.toCHTML.call(this,e);var n=this.adaptor.firstChild(this.chtml);if(n){this.adaptor.remove(n);var i=this.node.attributes.get("rowalign"),o=i!=="baseline"&&i!=="axis"?{rowalign:i}:{},a=this.html("mjx-mtr",o,[n]);this.adaptor.append(this.parent.labels,a)}},r.prototype.markUsed=function(){t.prototype.markUsed.call(this),this.jax.wrapperUsage.add(CHTMLmtr.kind)},r.kind=mtr_js_3.MmlMlabeledtr.prototype.kind,r.styles={"mjx-mlabeledtr":{display:"table-row"},'mjx-mlabeledtr[rowalign="top"] > mjx-mtd':{"vertical-align":"top"},'mjx-mlabeledtr[rowalign="center"] > mjx-mtd':{"vertical-align":"middle"},'mjx-mlabeledtr[rowalign="bottom"] > mjx-mtd':{"vertical-align":"bottom"},'mjx-mlabeledtr[rowalign="baseline"] > mjx-mtd':{"vertical-align":"baseline"},'mjx-mlabeledtr[rowalign="axis"] > mjx-mtd':{"vertical-align":".25em"}},r}((0,mtr_js_2.CommonMlabeledtrMixin)(CHTMLmtr));mtr$2.CHTMLmlabeledtr=CHTMLmlabeledtr;var mtd$2={},mtd$1={},__extends$X=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mtd$1,"__esModule",{value:!0});mtd$1.CommonMtdMixin=void 0;function CommonMtdMixin(t){return function(r){__extends$X(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"fixesPWidth",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.invalidateBBox=function(){this.bboxComputed=!1},e.prototype.getWrapWidth=function(n){var i=this.parent.parent,o=this.parent,a=this.node.childPosition()-(o.labeled?1:0);return typeof i.cWidths[a]=="number"?i.cWidths[a]:i.getTableData().W[a]},e.prototype.getChildAlign=function(n){return this.node.attributes.get("columnalign")},e}(t)}mtd$1.CommonMtdMixin=CommonMtdMixin;var mtd={},__extends$W=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$l=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$l=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$l.apply(this,arguments)};Object.defineProperty(mtd,"__esModule",{value:!0});mtd.MmlMtd=void 0;var MmlNode_js_1$r=MmlNode,Attributes_js_1$2=Attributes,MmlMtd=function(t){__extends$W(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mtd"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.verifyChildren=function(e){if(this.parent&&!this.parent.isKind("mtr")){this.mError(this.kind+" can only be a child of an mtr or mlabeledtr",e,!0);return}t.prototype.verifyChildren.call(this,e)},r.prototype.setTeXclass=function(e){return this.getPrevClass(e),this.childNodes[0].setTeXclass(null),this},r.defaults=__assign$l(__assign$l({},MmlNode_js_1$r.AbstractMmlBaseNode.defaults),{rowspan:1,columnspan:1,rowalign:Attributes_js_1$2.INHERIT,columnalign:Attributes_js_1$2.INHERIT,groupalign:Attributes_js_1$2.INHERIT}),r}(MmlNode_js_1$r.AbstractMmlBaseNode);mtd.MmlMtd=MmlMtd;var __extends$V=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mtd$2,"__esModule",{value:!0});mtd$2.CHTMLmtd=void 0;var Wrapper_js_1$6=Wrapper$2,mtd_js_1$2=mtd$1,mtd_js_2=mtd,CHTMLmtd=function(t){__extends$V(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){t.prototype.toCHTML.call(this,e);var n=this.node.attributes.get("rowalign"),i=this.node.attributes.get("columnalign"),o=this.parent.node.attributes.get("rowalign");n!==o&&this.adaptor.setAttribute(this.chtml,"rowalign",n),i!=="center"&&(this.parent.kind!=="mlabeledtr"||this!==this.parent.childNodes[0]||i!==this.parent.parent.node.attributes.get("side"))&&this.adaptor.setStyle(this.chtml,"textAlign",i),this.parent.parent.node.getProperty("useHeight")&&this.adaptor.append(this.chtml,this.html("mjx-tstrut"))},r.kind=mtd_js_2.MmlMtd.prototype.kind,r.styles={"mjx-mtd":{display:"table-cell","text-align":"center",padding:".215em .4em"},"mjx-mtd:first-child":{"padding-left":0},"mjx-mtd:last-child":{"padding-right":0},"mjx-mtable > * > mjx-itable > *:first-child > mjx-mtd":{"padding-top":0},"mjx-mtable > * > mjx-itable > *:last-child > mjx-mtd":{"padding-bottom":0},"mjx-tstrut":{display:"inline-block",height:"1em","vertical-align":"-.25em"},'mjx-labels[align="left"] > mjx-mtr > mjx-mtd':{"text-align":"left"},'mjx-labels[align="right"] > mjx-mtr > mjx-mtd':{"text-align":"right"},"mjx-mtd[extra]":{padding:0},'mjx-mtd[rowalign="top"]':{"vertical-align":"top"},'mjx-mtd[rowalign="center"]':{"vertical-align":"middle"},'mjx-mtd[rowalign="bottom"]':{"vertical-align":"bottom"},'mjx-mtd[rowalign="baseline"]':{"vertical-align":"baseline"},'mjx-mtd[rowalign="axis"]':{"vertical-align":".25em"}},r}((0,mtd_js_1$2.CommonMtdMixin)(Wrapper_js_1$6.CHTMLWrapper));mtd$2.CHTMLmtd=CHTMLmtd;var maction$2={},maction$1={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var a=function(s,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},a(s,l)};return function(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");a(s,l);function c(){this.constructor=s}s.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}}(),e=commonjsGlobal&&commonjsGlobal.__read||function(a,s){var l=typeof Symbol=="function"&&a[Symbol.iterator];if(!l)return a;var c=l.call(a),f,d=[],u;try{for(;(s===void 0||s-- >0)&&!(f=c.next()).done;)d.push(f.value)}catch(m){u={error:m}}finally{try{f&&!f.done&&(l=c.return)&&l.call(c)}finally{if(u)throw u.error}}return d},n=commonjsGlobal&&commonjsGlobal.__spreadArray||function(a,s,l){if(l||arguments.length===2)for(var c=0,f=s.length,d;c<f;c++)(d||!(c in s))&&(d||(d=Array.prototype.slice.call(s,0,c)),d[c]=s[c]);return a.concat(d||Array.prototype.slice.call(s))};Object.defineProperty(t,"__esModule",{value:!0}),t.CommonMactionMixin=t.TooltipData=void 0;var i=string;t.TooltipData={dx:".2em",dy:".1em",postDelay:600,clearDelay:100,hoverTimer:new Map,clearTimer:new Map,stopTimers:function(a,s){s.clearTimer.has(a)&&(clearTimeout(s.clearTimer.get(a)),s.clearTimer.delete(a)),s.hoverTimer.has(a)&&(clearTimeout(s.hoverTimer.get(a)),s.hoverTimer.delete(a))}};function o(a){return function(s){r(l,s);function l(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var d=s.apply(this,n([],e(c),!1))||this,u=d.constructor.actions,m=d.node.attributes.get("actiontype"),p=e(u.get(m)||[function(g,v){},{}],2),_=p[0],y=p[1];return d.action=_,d.data=y,d.getParameters(),d}return Object.defineProperty(l.prototype,"selected",{get:function(){var c=this.node.attributes.get("selection"),f=Math.max(1,Math.min(this.childNodes.length,c))-1;return this.childNodes[f]||this.wrap(this.node.selected)},enumerable:!1,configurable:!0}),l.prototype.getParameters=function(){var c=this.node.attributes.get("data-offsets"),f=e((0,i.split)(c||""),2),d=f[0],u=f[1];this.dx=this.length2em(d||t.TooltipData.dx),this.dy=this.length2em(u||t.TooltipData.dy)},l.prototype.computeBBox=function(c,f){f===void 0&&(f=!1),c.updateFrom(this.selected.getOuterBBox()),this.selected.setChildPWidths(f)},l}(a)}t.CommonMactionMixin=o})(maction$1);var maction={},__extends$U=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$k=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$k=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$k.apply(this,arguments)};Object.defineProperty(maction,"__esModule",{value:!0});maction.MmlMaction=void 0;var MmlNode_js_1$q=MmlNode,MmlMaction=function(t){__extends$U(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"maction"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selected",{get:function(){var e=this.attributes.get("selection"),n=Math.max(1,Math.min(this.childNodes.length,e))-1;return this.childNodes[n]||this.factory.create("mrow")},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isEmbellished",{get:function(){return this.selected.isEmbellished},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSpacelike",{get:function(){return this.selected.isSpacelike},enumerable:!1,configurable:!0}),r.prototype.core=function(){return this.selected.core()},r.prototype.coreMO=function(){return this.selected.coreMO()},r.prototype.verifyAttributes=function(e){if(t.prototype.verifyAttributes.call(this,e),this.attributes.get("actiontype")!=="toggle"&&this.attributes.getExplicit("selection")!==void 0){var n=this.attributes.getAllAttributes();delete n.selection}},r.prototype.setTeXclass=function(e){this.attributes.get("actiontype")==="tooltip"&&this.childNodes[1]&&this.childNodes[1].setTeXclass(null);var n=this.selected;return e=n.setTeXclass(e),this.updateTeXclass(n),e},r.prototype.nextToggleSelection=function(){var e=Math.max(1,this.attributes.get("selection")+1);e>this.childNodes.length&&(e=1),this.attributes.set("selection",e)},r.defaults=__assign$k(__assign$k({},MmlNode_js_1$q.AbstractMmlNode.defaults),{actiontype:"toggle",selection:1}),r}(MmlNode_js_1$q.AbstractMmlNode);maction.MmlMaction=MmlMaction;var __extends$T=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(maction$2,"__esModule",{value:!0});maction$2.CHTMLmaction=void 0;var Wrapper_js_1$5=Wrapper$2,maction_js_1$2=maction$1,maction_js_2=maction$1,maction_js_3=maction,CHTMLmaction=function(t){__extends$T(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){var n=this.standardCHTMLnode(e),i=this.selected;i.toCHTML(n),this.action(this,this.data)},r.prototype.setEventHandler=function(e,n){this.chtml.addEventListener(e,n)},r.kind=maction_js_3.MmlMaction.prototype.kind,r.styles={"mjx-maction":{position:"relative"},"mjx-maction > mjx-tool":{display:"none",position:"absolute",bottom:0,right:0,width:0,height:0,"z-index":500},"mjx-tool > mjx-tip":{display:"inline-block",padding:".2em",border:"1px solid #888","font-size":"70%","background-color":"#F8F8F8",color:"black","box-shadow":"2px 2px 5px #AAAAAA"},"mjx-maction[toggle]":{cursor:"pointer"},"mjx-status":{display:"block",position:"fixed",left:"1em",bottom:"1em","min-width":"25%",padding:".2em .4em",border:"1px solid #888","font-size":"90%","background-color":"#F8F8F8",color:"black"}},r.actions=new Map([["toggle",[function(e,n){e.adaptor.setAttribute(e.chtml,"toggle",e.node.attributes.get("selection"));var i=e.factory.jax.math,o=e.factory.jax.document,a=e.node;e.setEventHandler("click",function(s){i.end.node||(i.start.node=i.end.node=i.typesetRoot,i.start.n=i.end.n=0),a.nextToggleSelection(),i.rerender(o),s.stopPropagation()})},{}]],["tooltip",[function(e,n){var i=e.childNodes[1];if(i)if(i.node.isKind("mtext")){var o=i.node.getText();e.adaptor.setAttribute(e.chtml,"title",o)}else{var a=e.adaptor,s=a.append(e.chtml,e.html("mjx-tool",{style:{bottom:e.em(-e.dy),right:e.em(-e.dx)}},[e.html("mjx-tip")]));i.toCHTML(a.firstChild(s)),e.setEventHandler("mouseover",function(l){n.stopTimers(e,n);var c=setTimeout(function(){return a.setStyle(s,"display","block")},n.postDelay);n.hoverTimer.set(e,c),l.stopPropagation()}),e.setEventHandler("mouseout",function(l){n.stopTimers(e,n);var c=setTimeout(function(){return a.setStyle(s,"display","")},n.clearDelay);n.clearTimer.set(e,c),l.stopPropagation()})}},maction_js_2.TooltipData]],["statusline",[function(e,n){var i=e.childNodes[1];if(i&&i.node.isKind("mtext")){var o=e.adaptor,a=i.node.getText();o.setAttribute(e.chtml,"statusline",a),e.setEventHandler("mouseover",function(s){if(n.status===null){var l=o.body(o.document);n.status=o.append(l,e.html("mjx-status",{},[e.text(a)]))}s.stopPropagation()}),e.setEventHandler("mouseout",function(s){n.status&&(o.remove(n.status),n.status=null),s.stopPropagation()})}},{status:null}]]]),r}((0,maction_js_1$2.CommonMactionMixin)(Wrapper_js_1$5.CHTMLWrapper));maction$2.CHTMLmaction=CHTMLmaction;var mglyph$2={},mglyph$1={},__extends$S=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$p=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$h=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(mglyph$1,"__esModule",{value:!0});mglyph$1.CommonMglyphMixin=void 0;function CommonMglyphMixin(t){return function(r){__extends$S(e,r);function e(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=r.apply(this,__spreadArray$h([],__read$p(n),!1))||this;return o.getParameters(),o}return e.prototype.getParameters=function(){var n=this.node.attributes.getList("width","height","valign","src","index"),i=n.width,o=n.height,a=n.valign,s=n.src,l=n.index;if(s)this.width=i==="auto"?1:this.length2em(i),this.height=o==="auto"?1:this.length2em(o),this.valign=this.length2em(a||"0");else{var c=String.fromCodePoint(parseInt(l)),f=this.node.factory;this.charWrapper=this.wrap(f.create("text").setText(c)),this.charWrapper.parent=this}},e.prototype.computeBBox=function(n,i){this.charWrapper?n.updateFrom(this.charWrapper.getBBox()):(n.w=this.width,n.h=this.height+this.valign,n.d=-this.valign)},e}(t)}mglyph$1.CommonMglyphMixin=CommonMglyphMixin;var mglyph={},__extends$R=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$j=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$j=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$j.apply(this,arguments)};Object.defineProperty(mglyph,"__esModule",{value:!0});mglyph.MmlMglyph=void 0;var MmlNode_js_1$p=MmlNode,MmlMglyph=function(t){__extends$R(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.texclass=MmlNode_js_1$p.TEXCLASS.ORD,e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mglyph"},enumerable:!1,configurable:!0}),r.prototype.verifyAttributes=function(e){var n=this.attributes.getList("src","fontfamily","index"),i=n.src,o=n.fontfamily,a=n.index;i===""&&(o===""||a==="")?this.mError("mglyph must have either src or fontfamily and index attributes",e,!0):t.prototype.verifyAttributes.call(this,e)},r.defaults=__assign$j(__assign$j({},MmlNode_js_1$p.AbstractMmlTokenNode.defaults),{alt:"",src:"",index:"",width:"auto",height:"auto",valign:"0em"}),r}(MmlNode_js_1$p.AbstractMmlTokenNode);mglyph.MmlMglyph=MmlMglyph;var __extends$Q=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(mglyph$2,"__esModule",{value:!0});mglyph$2.CHTMLmglyph=void 0;var Wrapper_js_1$4=Wrapper$2,mglyph_js_1$2=mglyph$1,mglyph_js_2=mglyph,CHTMLmglyph=function(t){__extends$Q(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){var n=this.standardCHTMLnode(e);if(this.charWrapper){this.charWrapper.toCHTML(n);return}var i=this.node.attributes.getList("src","alt"),o=i.src,a=i.alt,s={width:this.em(this.width),height:this.em(this.height)};this.valign&&(s.verticalAlign=this.em(this.valign));var l=this.html("img",{src:o,style:s,alt:a,title:a});this.adaptor.append(n,l)},r.kind=mglyph_js_2.MmlMglyph.prototype.kind,r.styles={"mjx-mglyph > img":{display:"inline-block",border:0,padding:0}},r}((0,mglyph_js_1$2.CommonMglyphMixin)(Wrapper_js_1$4.CHTMLWrapper));mglyph$2.CHTMLmglyph=CHTMLmglyph;var semantics$2={},semantics$1={},__extends$P=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(semantics$1,"__esModule",{value:!0});semantics$1.CommonSemanticsMixin=void 0;function CommonSemanticsMixin(t){return function(r){__extends$P(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.computeBBox=function(n,i){if(this.childNodes.length){var o=this.childNodes[0].getBBox(),a=o.w,s=o.h,l=o.d;n.w=a,n.h=s,n.d=l}},e}(t)}semantics$1.CommonSemanticsMixin=CommonSemanticsMixin;var semantics={},__extends$O=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$i=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$i=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$i.apply(this,arguments)};Object.defineProperty(semantics,"__esModule",{value:!0});semantics.MmlAnnotation=semantics.MmlAnnotationXML=semantics.MmlSemantics=void 0;var MmlNode_js_1$o=MmlNode,MmlSemantics=function(t){__extends$O(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"semantics"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"notParent",{get:function(){return!0},enumerable:!1,configurable:!0}),r.defaults=__assign$i(__assign$i({},MmlNode_js_1$o.AbstractMmlBaseNode.defaults),{definitionUrl:null,encoding:null}),r}(MmlNode_js_1$o.AbstractMmlBaseNode);semantics.MmlSemantics=MmlSemantics;var MmlAnnotationXML=function(t){__extends$O(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"annotation-xml"},enumerable:!1,configurable:!0}),r.prototype.setChildInheritedAttributes=function(){},r.defaults=__assign$i(__assign$i({},MmlNode_js_1$o.AbstractMmlNode.defaults),{definitionUrl:null,encoding:null,cd:"mathmlkeys",name:"",src:null}),r}(MmlNode_js_1$o.AbstractMmlNode);semantics.MmlAnnotationXML=MmlAnnotationXML;var MmlAnnotation=function(t){__extends$O(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.properties={isChars:!0},e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"annotation"},enumerable:!1,configurable:!0}),r.defaults=__assign$i({},MmlAnnotationXML.defaults),r}(MmlAnnotationXML);semantics.MmlAnnotation=MmlAnnotation;var __extends$N=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(semantics$2,"__esModule",{value:!0});semantics$2.CHTMLxml=semantics$2.CHTMLannotationXML=semantics$2.CHTMLannotation=semantics$2.CHTMLsemantics=void 0;var Wrapper_js_1$3=Wrapper$2,semantics_js_1$2=semantics$1,semantics_js_2=semantics,MmlNode_js_1$n=MmlNode,CHTMLsemantics=function(t){__extends$N(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){var n=this.standardCHTMLnode(e);this.childNodes.length&&this.childNodes[0].toCHTML(n)},r.kind=semantics_js_2.MmlSemantics.prototype.kind,r}((0,semantics_js_1$2.CommonSemanticsMixin)(Wrapper_js_1$3.CHTMLWrapper));semantics$2.CHTMLsemantics=CHTMLsemantics;var CHTMLannotation=function(t){__extends$N(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){t.prototype.toCHTML.call(this,e)},r.prototype.computeBBox=function(){return this.bbox},r.kind=semantics_js_2.MmlAnnotation.prototype.kind,r}(Wrapper_js_1$3.CHTMLWrapper);semantics$2.CHTMLannotation=CHTMLannotation;var CHTMLannotationXML=function(t){__extends$N(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.kind=semantics_js_2.MmlAnnotationXML.prototype.kind,r.styles={"mjx-annotation-xml":{"font-family":"initial","line-height":"normal"}},r}(Wrapper_js_1$3.CHTMLWrapper);semantics$2.CHTMLannotationXML=CHTMLannotationXML;var CHTMLxml=function(t){__extends$N(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){this.chtml=this.adaptor.append(e,this.adaptor.clone(this.node.getXML()))},r.prototype.computeBBox=function(e,n){var i=this.jax.measureXMLnode(this.node.getXML()),o=i.w,a=i.h,s=i.d;e.w=o,e.h=a,e.d=s},r.prototype.getStyles=function(){},r.prototype.getScale=function(){},r.prototype.getVariant=function(){},r.kind=MmlNode_js_1$n.XMLNode.prototype.kind,r.autoStyle=!1,r}(Wrapper_js_1$3.CHTMLWrapper);semantics$2.CHTMLxml=CHTMLxml;var TeXAtom$3={},TeXAtom$2={},__extends$M=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(TeXAtom$2,"__esModule",{value:!0});TeXAtom$2.CommonTeXAtomMixin=void 0;var MmlNode_js_1$m=MmlNode;function CommonTeXAtomMixin(t){return function(r){__extends$M(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.computeBBox=function(n,i){if(i===void 0&&(i=!1),r.prototype.computeBBox.call(this,n,i),this.childNodes[0]&&this.childNodes[0].bbox.ic&&(n.ic=this.childNodes[0].bbox.ic),this.node.texClass===MmlNode_js_1$m.TEXCLASS.VCENTER){var o=n.h,a=n.d,s=this.font.params.axis_height,l=(o+a)/2+s-o;n.h+=l,n.d-=l}},e}(t)}TeXAtom$2.CommonTeXAtomMixin=CommonTeXAtomMixin;var TeXAtom$1={},__extends$L=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$h=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$h=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$h.apply(this,arguments)};Object.defineProperty(TeXAtom$1,"__esModule",{value:!0});TeXAtom$1.TeXAtom=void 0;var MmlNode_js_1$l=MmlNode,mo_js_1$3=mo,TeXAtom=function(t){__extends$L(r,t);function r(e,n,i){var o=t.call(this,e,n,i)||this;return o.texclass=MmlNode_js_1$l.TEXCLASS.ORD,o.setProperty("texClass",o.texClass),o}return Object.defineProperty(r.prototype,"kind",{get:function(){return"TeXAtom"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"notParent",{get:function(){return this.childNodes[0]&&this.childNodes[0].childNodes.length===1},enumerable:!1,configurable:!0}),r.prototype.setTeXclass=function(e){return this.childNodes[0].setTeXclass(null),this.adjustTeXclass(e)},r.prototype.adjustTeXclass=function(e){return e},r.defaults=__assign$h({},MmlNode_js_1$l.AbstractMmlBaseNode.defaults),r}(MmlNode_js_1$l.AbstractMmlBaseNode);TeXAtom$1.TeXAtom=TeXAtom;TeXAtom.prototype.adjustTeXclass=mo_js_1$3.MmlMo.prototype.adjustTeXclass;var __extends$K=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(TeXAtom$3,"__esModule",{value:!0});TeXAtom$3.CHTMLTeXAtom=void 0;var Wrapper_js_1$2=Wrapper$2,TeXAtom_js_1$2=TeXAtom$2,TeXAtom_js_2=TeXAtom$1,MmlNode_js_1$k=MmlNode,CHTMLTeXAtom=function(t){__extends$K(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){if(t.prototype.toCHTML.call(this,e),this.adaptor.setAttribute(this.chtml,"texclass",MmlNode_js_1$k.TEXCLASSNAMES[this.node.texClass]),this.node.texClass===MmlNode_js_1$k.TEXCLASS.VCENTER){var n=this.childNodes[0].getBBox(),i=n.h,o=n.d,a=this.font.params.axis_height,s=(i+o)/2+a-i;this.adaptor.setStyle(this.chtml,"verticalAlign",this.em(s))}},r.kind=TeXAtom_js_2.TeXAtom.prototype.kind,r}((0,TeXAtom_js_1$2.CommonTeXAtomMixin)(Wrapper_js_1$2.CHTMLWrapper));TeXAtom$3.CHTMLTeXAtom=CHTMLTeXAtom;var TextNode$1={},TextNode={},__extends$J=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__values$o=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$o=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(TextNode,"__esModule",{value:!0});TextNode.CommonTextNodeMixin=void 0;function CommonTextNodeMixin(t){return function(r){__extends$J(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.computeBBox=function(n,i){var o,a,s=this.parent.variant,l=this.node.getText();if(s==="-explicitFont"){var c=this.jax.getFontData(this.parent.styles),f=this.jax.measureText(l,s,c),d=f.w,u=f.h,m=f.d;n.h=u,n.d=m,n.w=d}else{var p=this.remappedText(l,s);n.empty();try{for(var _=__values$o(p),y=_.next();!y.done;y=_.next()){var g=y.value,v=__read$o(this.getVariantChar(s,g),4),u=v[0],m=v[1],d=v[2],x=v[3];if(x.unknown){var b=this.jax.measureText(String.fromCodePoint(g),s);d=b.w,u=b.h,m=b.d}n.w+=d,u>n.h&&(n.h=u),m>n.d&&(n.d=m),n.ic=x.ic||0,n.sk=x.sk||0,n.dx=x.dx||0}}catch(S){o={error:S}}finally{try{y&&!y.done&&(a=_.return)&&a.call(_)}finally{if(o)throw o.error}}p.length>1&&(n.sk=0),n.clean()}},e.prototype.remappedText=function(n,i){var o=this.parent.stretch.c;return o?[o]:this.parent.remapChars(this.unicodeChars(n,i))},e.prototype.getStyles=function(){},e.prototype.getVariant=function(){},e.prototype.getScale=function(){},e.prototype.getSpace=function(){},e}(t)}TextNode.CommonTextNodeMixin=CommonTextNodeMixin;var __extends$I=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__values$n=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(TextNode$1,"__esModule",{value:!0});TextNode$1.CHTMLTextNode=void 0;var MmlNode_js_1$j=MmlNode,Wrapper_js_1$1=Wrapper$2,TextNode_js_1$1=TextNode,CHTMLTextNode=function(t){__extends$I(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.toCHTML=function(e){var n,i;this.markUsed();var o=this.adaptor,a=this.parent.variant,s=this.node.getText();if(s.length!==0)if(a==="-explicitFont")o.append(e,this.jax.unknownText(s,a,this.getBBox().w));else{var l=this.remappedText(s,a);try{for(var c=__values$n(l),f=c.next();!f.done;f=c.next()){var d=f.value,u=this.getVariantChar(a,d)[3],m=u.f?" TEX-"+u.f:"",p=u.unknown?this.jax.unknownText(String.fromCodePoint(d),a):this.html("mjx-c",{class:this.char(d)+m});o.append(e,p),!u.unknown&&this.font.charUsage.add([a,d])}}catch(_){n={error:_}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}},r.kind=MmlNode_js_1$j.TextNode.prototype.kind,r.autoStyle=!1,r.styles={"mjx-c":{display:"inline-block"},"mjx-utext":{display:"inline-block",padding:".75em 0 .2em 0"}},r}((0,TextNode_js_1$1.CommonTextNodeMixin)(Wrapper_js_1$1.CHTMLWrapper));TextNode$1.CHTMLTextNode=CHTMLTextNode;var _a$a;Object.defineProperty(Wrappers,"__esModule",{value:!0});Wrappers.CHTMLWrappers=void 0;var Wrapper_js_1=Wrapper$2,math_js_1$1=math$2,mi_js_1$1=mi$2,mo_js_1$2=mo$2,mn_js_1$1=mn$2,ms_js_1$1=ms$2,mtext_js_1$1=mtext$2,mspace_js_1$1=mspace$2,mpadded_js_1$1=mpadded$2,menclose_js_1$1=menclose$2,mrow_js_1$1=mrow$2,mfenced_js_1$1=mfenced$2,mfrac_js_1$1=mfrac$2,msqrt_js_1$1=msqrt$2,mroot_js_1$1=mroot$2,msubsup_js_1$1=msubsup$2,munderover_js_1$1=munderover$2,mmultiscripts_js_1$1=mmultiscripts$2,mtable_js_1$1=mtable$2,mtr_js_1$1=mtr$2,mtd_js_1$1=mtd$2,maction_js_1$1=maction$2,mglyph_js_1$1=mglyph$2,semantics_js_1$1=semantics$2,TeXAtom_js_1$1=TeXAtom$3,TextNode_js_1=TextNode$1;Wrappers.CHTMLWrappers=(_a$a={},_a$a[math_js_1$1.CHTMLmath.kind]=math_js_1$1.CHTMLmath,_a$a[mrow_js_1$1.CHTMLmrow.kind]=mrow_js_1$1.CHTMLmrow,_a$a[mrow_js_1$1.CHTMLinferredMrow.kind]=mrow_js_1$1.CHTMLinferredMrow,_a$a[mi_js_1$1.CHTMLmi.kind]=mi_js_1$1.CHTMLmi,_a$a[mo_js_1$2.CHTMLmo.kind]=mo_js_1$2.CHTMLmo,_a$a[mn_js_1$1.CHTMLmn.kind]=mn_js_1$1.CHTMLmn,_a$a[ms_js_1$1.CHTMLms.kind]=ms_js_1$1.CHTMLms,_a$a[mtext_js_1$1.CHTMLmtext.kind]=mtext_js_1$1.CHTMLmtext,_a$a[mspace_js_1$1.CHTMLmspace.kind]=mspace_js_1$1.CHTMLmspace,_a$a[mpadded_js_1$1.CHTMLmpadded.kind]=mpadded_js_1$1.CHTMLmpadded,_a$a[menclose_js_1$1.CHTMLmenclose.kind]=menclose_js_1$1.CHTMLmenclose,_a$a[mfrac_js_1$1.CHTMLmfrac.kind]=mfrac_js_1$1.CHTMLmfrac,_a$a[msqrt_js_1$1.CHTMLmsqrt.kind]=msqrt_js_1$1.CHTMLmsqrt,_a$a[mroot_js_1$1.CHTMLmroot.kind]=mroot_js_1$1.CHTMLmroot,_a$a[msubsup_js_1$1.CHTMLmsub.kind]=msubsup_js_1$1.CHTMLmsub,_a$a[msubsup_js_1$1.CHTMLmsup.kind]=msubsup_js_1$1.CHTMLmsup,_a$a[msubsup_js_1$1.CHTMLmsubsup.kind]=msubsup_js_1$1.CHTMLmsubsup,_a$a[munderover_js_1$1.CHTMLmunder.kind]=munderover_js_1$1.CHTMLmunder,_a$a[munderover_js_1$1.CHTMLmover.kind]=munderover_js_1$1.CHTMLmover,_a$a[munderover_js_1$1.CHTMLmunderover.kind]=munderover_js_1$1.CHTMLmunderover,_a$a[mmultiscripts_js_1$1.CHTMLmmultiscripts.kind]=mmultiscripts_js_1$1.CHTMLmmultiscripts,_a$a[mfenced_js_1$1.CHTMLmfenced.kind]=mfenced_js_1$1.CHTMLmfenced,_a$a[mtable_js_1$1.CHTMLmtable.kind]=mtable_js_1$1.CHTMLmtable,_a$a[mtr_js_1$1.CHTMLmtr.kind]=mtr_js_1$1.CHTMLmtr,_a$a[mtr_js_1$1.CHTMLmlabeledtr.kind]=mtr_js_1$1.CHTMLmlabeledtr,_a$a[mtd_js_1$1.CHTMLmtd.kind]=mtd_js_1$1.CHTMLmtd,_a$a[maction_js_1$1.CHTMLmaction.kind]=maction_js_1$1.CHTMLmaction,_a$a[mglyph_js_1$1.CHTMLmglyph.kind]=mglyph_js_1$1.CHTMLmglyph,_a$a[semantics_js_1$1.CHTMLsemantics.kind]=semantics_js_1$1.CHTMLsemantics,_a$a[semantics_js_1$1.CHTMLannotation.kind]=semantics_js_1$1.CHTMLannotation,_a$a[semantics_js_1$1.CHTMLannotationXML.kind]=semantics_js_1$1.CHTMLannotationXML,_a$a[semantics_js_1$1.CHTMLxml.kind]=semantics_js_1$1.CHTMLxml,_a$a[TeXAtom_js_1$1.CHTMLTeXAtom.kind]=TeXAtom_js_1$1.CHTMLTeXAtom,_a$a[TextNode_js_1.CHTMLTextNode.kind]=TextNode_js_1.CHTMLTextNode,_a$a[Wrapper_js_1.CHTMLWrapper.kind]=Wrapper_js_1.CHTMLWrapper,_a$a);var __extends$H=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(WrapperFactory$2,"__esModule",{value:!0});WrapperFactory$2.CHTMLWrapperFactory=void 0;var WrapperFactory_js_1$1=WrapperFactory$1,Wrappers_js_1=Wrappers,CHTMLWrapperFactory=function(t){__extends$H(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.defaultNodes=Wrappers_js_1.CHTMLWrappers,r}(WrapperFactory_js_1$1.CommonWrapperFactory);WrapperFactory$2.CHTMLWrapperFactory=CHTMLWrapperFactory;var Usage$1={};Object.defineProperty(Usage$1,"__esModule",{value:!0});Usage$1.Usage=void 0;var Usage=function(){function t(){this.used=new Set,this.needsUpdate=[]}return t.prototype.add=function(r){var e=JSON.stringify(r);this.used.has(e)||this.needsUpdate.push(r),this.used.add(e)},t.prototype.has=function(r){return this.used.has(JSON.stringify(r))},t.prototype.clear=function(){this.used.clear(),this.needsUpdate=[]},t.prototype.update=function(){var r=this.needsUpdate;return this.needsUpdate=[],r},t}();Usage$1.Usage=Usage;var tex$2={},FontData={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var u=function(m,p){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,y){_.__proto__=y}||function(_,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(_[g]=y[g])},u(m,p)};return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");u(m,p);function _(){this.constructor=m}m.prototype=p===null?Object.create(p):(_.prototype=p.prototype,new _)}}(),e=commonjsGlobal&&commonjsGlobal.__assign||function(){return e=Object.assign||function(u){for(var m,p=1,_=arguments.length;p<_;p++){m=arguments[p];for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&(u[y]=m[y])}return u},e.apply(this,arguments)},n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(u,m,p,_){_===void 0&&(_=p);var y=Object.getOwnPropertyDescriptor(m,p);(!y||("get"in y?!m.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return m[p]}}),Object.defineProperty(u,_,y)}:function(u,m,p,_){_===void 0&&(_=p),u[_]=m[p]}),i=commonjsGlobal&&commonjsGlobal.__exportStar||function(u,m){for(var p in u)p!=="default"&&!Object.prototype.hasOwnProperty.call(m,p)&&n(m,u,p)},o=commonjsGlobal&&commonjsGlobal.__values||function(u){var m=typeof Symbol=="function"&&Symbol.iterator,p=m&&u[m],_=0;if(p)return p.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")},a=commonjsGlobal&&commonjsGlobal.__read||function(u,m){var p=typeof Symbol=="function"&&u[Symbol.iterator];if(!p)return u;var _=p.call(u),y,g=[],v;try{for(;(m===void 0||m-- >0)&&!(y=_.next()).done;)g.push(y.value)}catch(x){v={error:x}}finally{try{y&&!y.done&&(p=_.return)&&p.call(_)}finally{if(v)throw v.error}}return g};Object.defineProperty(t,"__esModule",{value:!0}),t.AddCSS=t.CHTMLFontData=void 0;var s=FontData$2,l=Usage$1,c=lengths;i(FontData$2,t);var f=function(u){r(m,u);function m(){var p=u!==null&&u.apply(this,arguments)||this;return p.charUsage=new l.Usage,p.delimUsage=new l.Usage,p}return m.charOptions=function(p,_){return u.charOptions.call(this,p,_)},m.prototype.adaptiveCSS=function(p){this.options.adaptiveCSS=p},m.prototype.clearCache=function(){this.options.adaptiveCSS&&(this.charUsage.clear(),this.delimUsage.clear())},m.prototype.createVariant=function(p,_,y){_===void 0&&(_=null),y===void 0&&(y=null),u.prototype.createVariant.call(this,p,_,y);var g=this.constructor;this.variant[p].classes=g.defaultVariantClasses[p],this.variant[p].letter=g.defaultVariantLetters[p]},m.prototype.defineChars=function(p,_){var y,g;u.prototype.defineChars.call(this,p,_);var v=this.variant[p].letter;try{for(var x=o(Object.keys(_)),b=x.next();!b.done;b=x.next()){var S=b.value,M=m.charOptions(_,parseInt(S));M.f===void 0&&(M.f=v)}}catch(C){y={error:C}}finally{try{b&&!b.done&&(g=x.return)&&g.call(x)}finally{if(y)throw y.error}}},Object.defineProperty(m.prototype,"styles",{get:function(){var p=this.constructor,_=e({},p.defaultStyles);return this.addFontURLs(_,p.defaultFonts,this.options.fontURL),this.options.adaptiveCSS?this.updateStyles(_):this.allStyles(_),_},enumerable:!1,configurable:!0}),m.prototype.updateStyles=function(p){var _,y,g,v;try{for(var x=o(this.delimUsage.update()),b=x.next();!b.done;b=x.next()){var S=b.value;this.addDelimiterStyles(p,S,this.delimiters[S])}}catch(D){_={error:D}}finally{try{b&&!b.done&&(y=x.return)&&y.call(x)}finally{if(_)throw _.error}}try{for(var M=o(this.charUsage.update()),C=M.next();!C.done;C=M.next()){var A=a(C.value,2),E=A[0],S=A[1],$=this.variant[E];this.addCharStyles(p,$.letter,S,$.chars[S])}}catch(D){g={error:D}}finally{try{C&&!C.done&&(v=M.return)&&v.call(M)}finally{if(g)throw g.error}}return p},m.prototype.allStyles=function(p){var _,y,g,v,x,b;try{for(var S=o(Object.keys(this.delimiters)),M=S.next();!M.done;M=S.next()){var C=M.value,A=parseInt(C);this.addDelimiterStyles(p,A,this.delimiters[A])}}catch(Z){_={error:Z}}finally{try{M&&!M.done&&(y=S.return)&&y.call(S)}finally{if(_)throw _.error}}try{for(var E=o(Object.keys(this.variant)),$=E.next();!$.done;$=E.next()){var D=$.value,B=this.variant[D],F=B.letter;try{for(var I=(x=void 0,o(Object.keys(B.chars))),H=I.next();!H.done;H=I.next()){var C=H.value,A=parseInt(C),W=B.chars[A];(W[3]||{}).smp||(W.length<4&&(W[3]={}),this.addCharStyles(p,F,A,W))}}catch(Z){x={error:Z}}finally{try{H&&!H.done&&(b=I.return)&&b.call(I)}finally{if(x)throw x.error}}}}catch(Z){g={error:Z}}finally{try{$&&!$.done&&(v=E.return)&&v.call(E)}finally{if(g)throw g.error}}},m.prototype.addFontURLs=function(p,_,y){var g,v;try{for(var x=o(Object.keys(_)),b=x.next();!b.done;b=x.next()){var S=b.value,M=e({},_[S]);M.src=M.src.replace(/%%URL%%/,y),p[S]=M}}catch(C){g={error:C}}finally{try{b&&!b.done&&(v=x.return)&&v.call(x)}finally{if(g)throw g.error}}},m.prototype.addDelimiterStyles=function(p,_,y){var g=this.charSelector(_);y.c&&y.c!==_&&(g=this.charSelector(y.c),p[".mjx-stretched mjx-c"+g+"::before"]={content:this.charContent(y.c)}),y.stretch&&(y.dir===1?this.addDelimiterVStyles(p,g,y):this.addDelimiterHStyles(p,g,y))},m.prototype.addDelimiterVStyles=function(p,_,y){var g=y.HDW,v=a(y.stretch,4),x=v[0],b=v[1],S=v[2],M=v[3],C=this.addDelimiterVPart(p,_,"beg",x,g);this.addDelimiterVPart(p,_,"ext",b,g);var A=this.addDelimiterVPart(p,_,"end",S,g),E={};if(M){var $=this.addDelimiterVPart(p,_,"mid",M,g);E.height="50%",p["mjx-stretchy-v"+_+" > mjx-mid"]={"margin-top":this.em(-$/2),"margin-bottom":this.em(-$/2)}}C&&(E["border-top-width"]=this.em0(C-.03)),A&&(E["border-bottom-width"]=this.em0(A-.03),p["mjx-stretchy-v"+_+" > mjx-end"]={"margin-top":this.em(-A)}),Object.keys(E).length&&(p["mjx-stretchy-v"+_+" > mjx-ext"]=E)},m.prototype.addDelimiterVPart=function(p,_,y,g,v){if(!g)return 0;var x=this.getDelimiterData(g),b=(v[2]-x[2])/2,S={content:this.charContent(g)};return y!=="ext"?S.padding=this.padding(x,b):(S.width=this.em0(v[2]),b&&(S["padding-left"]=this.em0(b))),p["mjx-stretchy-v"+_+" mjx-"+y+" mjx-c::before"]=S,x[0]+x[1]},m.prototype.addDelimiterHStyles=function(p,_,y){var g=a(y.stretch,4),v=g[0],x=g[1],b=g[2],S=g[3],M=y.HDW;this.addDelimiterHPart(p,_,"beg",v,M),this.addDelimiterHPart(p,_,"ext",x,M),this.addDelimiterHPart(p,_,"end",b,M),S&&(this.addDelimiterHPart(p,_,"mid",S,M),p["mjx-stretchy-h"+_+" > mjx-ext"]={width:"50%"})},m.prototype.addDelimiterHPart=function(p,_,y,g,v){if(g){var x=this.getDelimiterData(g),b=x[3],S={content:b&&b.c?'"'+b.c+'"':this.charContent(g)};S.padding=this.padding(v,0,-v[2]),p["mjx-stretchy-h"+_+" mjx-"+y+" mjx-c::before"]=S}},m.prototype.addCharStyles=function(p,_,y,g){var v=g[3],x=v.f!==void 0?v.f:_,b="mjx-c"+this.charSelector(y)+(x?".TEX-"+x:"");p[b+"::before"]={padding:this.padding(g,0,v.ic||0),content:v.c!=null?'"'+v.c+'"':this.charContent(y)}},m.prototype.getDelimiterData=function(p){return this.getChar("-smallop",p)},m.prototype.em=function(p){return(0,c.em)(p)},m.prototype.em0=function(p){return(0,c.em)(Math.max(0,p))},m.prototype.padding=function(p,_,y){var g=a(p,3),v=g[0],x=g[1],b=g[2];return _===void 0&&(_=0),y===void 0&&(y=0),[v,b+y,x,_].map(this.em0).join(" ")},m.prototype.charContent=function(p){return'"'+(p>=32&&p<=126&&p!==34&&p!==39&&p!==92?String.fromCharCode(p):"\\"+p.toString(16).toUpperCase())+'"'},m.prototype.charSelector=function(p){return".mjx-c"+p.toString(16).toUpperCase()},m.OPTIONS=e(e({},s.FontData.OPTIONS),{fontURL:"js/output/chtml/fonts/tex-woff-v2"}),m.JAX="CHTML",m.defaultVariantClasses={},m.defaultVariantLetters={},m.defaultStyles={"mjx-c::before":{display:"block",width:0}},m.defaultFonts={"@font-face /* 0 */":{"font-family":"MJXZERO",src:'url("%%URL%%/MathJax_Zero.woff") format("woff")'}},m}(s.FontData);t.CHTMLFontData=f;function d(u,m){var p,_;try{for(var y=o(Object.keys(m)),g=y.next();!g.done;g=y.next()){var v=g.value,x=parseInt(v);Object.assign(s.FontData.charOptions(u,x),m[x])}}catch(b){p={error:b}}finally{try{g&&!g.done&&(_=y.return)&&_.call(y)}finally{if(p)throw p.error}}return u}t.AddCSS=d})(FontData);var tex$1={},__extends$G=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$g=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$g=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$g.apply(this,arguments)},__read$n=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$g=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(tex$1,"__esModule",{value:!0});tex$1.CommonTeXFontMixin=void 0;function CommonTeXFontMixin(t){var r;return r=function(e){__extends$G(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.prototype.getDelimiterData=function(i){return this.getChar("-smallop",i)||this.getChar("-size4",i)},n}(t),r.NAME="TeX",r.defaultVariants=__spreadArray$g(__spreadArray$g([],__read$n(t.defaultVariants),!1),[["-smallop","normal"],["-largeop","normal"],["-size3","normal"],["-size4","normal"],["-tex-calligraphic","italic"],["-tex-bold-calligraphic","bold-italic"],["-tex-oldstyle","normal"],["-tex-bold-oldstyle","bold"],["-tex-mathit","italic"],["-tex-variant","normal"]],!1),r.defaultCssFonts=__assign$g(__assign$g({},t.defaultCssFonts),{"-smallop":["serif",!1,!1],"-largeop":["serif",!1,!1],"-size3":["serif",!1,!1],"-size4":["serif",!1,!1],"-tex-calligraphic":["cursive",!0,!1],"-tex-bold-calligraphic":["cursive",!0,!0],"-tex-oldstyle":["serif",!1,!1],"-tex-bold-oldstyle":["serif",!1,!0],"-tex-mathit":["serif",!0,!1]}),r.defaultSizeVariants=["normal","-smallop","-largeop","-size3","-size4","-tex-variant"],r.defaultStretchVariants=["-size4"],r}tex$1.CommonTeXFontMixin=CommonTeXFontMixin;var boldItalic$1={},boldItalic={};Object.defineProperty(boldItalic,"__esModule",{value:!0});boldItalic.boldItalic=void 0;boldItalic.boldItalic={47:[.711,.21,.894],305:[.452,.008,.394,{sk:.0319}],567:[.451,.201,.439,{sk:.0958}],8260:[.711,.21,.894],8710:[.711,0,.958,{sk:.192}],10744:[.711,.21,.894]};Object.defineProperty(boldItalic$1,"__esModule",{value:!0});boldItalic$1.boldItalic=void 0;var FontData_js_1$h=FontData,bold_italic_js_1$1=boldItalic;boldItalic$1.boldItalic=(0,FontData_js_1$h.AddCSS)(bold_italic_js_1$1.boldItalic,{305:{f:"B"},567:{f:"B"},8260:{c:"/"},8710:{c:"\\394"},10744:{c:"/"}});var bold$1={},bold={};Object.defineProperty(bold,"__esModule",{value:!0});bold.bold=void 0;bold.bold={33:[.705,0,.35],34:[.694,-.329,.603],35:[.694,.193,.958],36:[.75,.056,.575],37:[.75,.056,.958],38:[.705,.011,.894],39:[.694,-.329,.319],40:[.75,.249,.447],41:[.75,.249,.447],42:[.75,-.306,.575],43:[.633,.131,.894],44:[.171,.194,.319],45:[.278,-.166,.383],46:[.171,0,.319],47:[.75,.25,.575],58:[.444,0,.319],59:[.444,.194,.319],60:[.587,.085,.894],61:[.393,-.109,.894],62:[.587,.085,.894],63:[.7,0,.543],64:[.699,.006,.894],91:[.75,.25,.319],92:[.75,.25,.575],93:[.75,.25,.319],94:[.694,-.52,.575],95:[-.01,.061,.575],96:[.706,-.503,.575],123:[.75,.25,.575],124:[.75,.249,.319],125:[.75,.25,.575],126:[.344,-.202,.575],168:[.695,-.535,.575],172:[.371,-.061,.767],175:[.607,-.54,.575],176:[.702,-.536,.575],177:[.728,.035,.894],180:[.706,-.503,.575],183:[.336,-.166,.319],215:[.53,.028,.894],247:[.597,.096,.894],305:[.442,0,.278,{sk:.0278}],567:[.442,.205,.306,{sk:.0833}],697:[.563,-.033,.344],710:[.694,-.52,.575],711:[.66,-.515,.575],713:[.607,-.54,.575],714:[.706,-.503,.575],715:[.706,-.503,.575],728:[.694,-.5,.575],729:[.695,-.525,.575],730:[.702,-.536,.575],732:[.694,-.552,.575],768:[.706,-.503,0],769:[.706,-.503,0],770:[.694,-.52,0],771:[.694,-.552,0],772:[.607,-.54,0],774:[.694,-.5,0],775:[.695,-.525,0],776:[.695,-.535,0],778:[.702,-.536,0],779:[.714,-.511,0],780:[.66,-.515,0],824:[.711,.21,0],8194:[0,0,.5],8195:[0,0,.999],8196:[0,0,.333],8197:[0,0,.25],8198:[0,0,.167],8201:[0,0,.167],8202:[0,0,.083],8211:[.3,-.249,.575],8212:[.3,-.249,1.15],8213:[.3,-.249,1.15],8214:[.75,.248,.575],8215:[-.01,.061,.575],8216:[.694,-.329,.319],8217:[.694,-.329,.319],8220:[.694,-.329,.603],8221:[.694,-.329,.603],8224:[.702,.211,.511],8225:[.702,.202,.511],8226:[.474,-.028,.575],8230:[.171,0,1.295],8242:[.563,-.033,.344],8243:[.563,0,.688],8244:[.563,0,1.032],8254:[.607,-.54,.575],8260:[.75,.25,.575],8279:[.563,0,1.376],8407:[.723,-.513,.575],8463:[.694,.008,.668,{sk:-.0319}],8467:[.702,.019,.474,{sk:.128}],8472:[.461,.21,.74],8501:[.694,0,.703],8592:[.518,.017,1.15],8593:[.694,.193,.575],8594:[.518,.017,1.15],8595:[.694,.194,.575],8596:[.518,.017,1.15],8597:[.767,.267,.575],8598:[.724,.194,1.15],8599:[.724,.193,1.15],8600:[.694,.224,1.15],8601:[.694,.224,1.15],8602:[.711,.21,1.15],8603:[.711,.21,1.15],8614:[.518,.017,1.15],8617:[.518,.017,1.282],8618:[.518,.017,1.282],8622:[.711,.21,1.15],8636:[.518,-.22,1.15],8637:[.281,.017,1.15],8640:[.518,-.22,1.15],8641:[.281,.017,1.15],8652:[.718,.017,1.15],8653:[.711,.21,1.15],8654:[.711,.21,1.15],8655:[.711,.21,1.15],8656:[.547,.046,1.15],8657:[.694,.193,.703],8658:[.547,.046,1.15],8659:[.694,.194,.703],8660:[.547,.046,1.15],8661:[.767,.267,.703],8704:[.694,.016,.639],8707:[.694,0,.639],8708:[.711,.21,.639],8709:[.767,.073,.575],8710:[.698,0,.958],8712:[.587,.086,.767],8713:[.711,.21,.767],8715:[.587,.086,.767],8716:[.711,.21,.767],8722:[.281,-.221,.894],8723:[.537,.227,.894],8725:[.75,.25,.575],8726:[.75,.25,.575],8727:[.472,-.028,.575],8728:[.474,-.028,.575],8729:[.474,-.028,.575],8730:[.82,.18,.958,{ic:.03}],8733:[.451,.008,.894],8734:[.452,.008,1.15],8736:[.714,0,.722],8739:[.75,.249,.319],8740:[.75,.249,.319],8741:[.75,.248,.575],8742:[.75,.248,.575],8743:[.604,.017,.767],8744:[.604,.016,.767],8745:[.603,.016,.767],8746:[.604,.016,.767],8747:[.711,.211,.569,{ic:.063}],8764:[.391,-.109,.894],8768:[.583,.082,.319],8769:[.711,.21,.894],8771:[.502,0,.894],8772:[.711,.21,.894],8773:[.638,.027,.894],8775:[.711,.21,.894],8776:[.524,-.032,.894],8777:[.711,.21,.894],8781:[.533,.032,.894],8784:[.721,-.109,.894],8800:[.711,.21,.894],8801:[.505,0,.894],8802:[.711,.21,.894],8804:[.697,.199,.894],8805:[.697,.199,.894],8810:[.617,.116,1.15],8811:[.618,.116,1.15],8813:[.711,.21,.894],8814:[.711,.21,.894],8815:[.711,.21,.894],8816:[.711,.21,.894],8817:[.711,.21,.894],8826:[.585,.086,.894],8827:[.586,.086,.894],8832:[.711,.21,.894],8833:[.711,.21,.894],8834:[.587,.085,.894],8835:[.587,.086,.894],8836:[.711,.21,.894],8837:[.711,.21,.894],8838:[.697,.199,.894],8839:[.697,.199,.894],8840:[.711,.21,.894],8841:[.711,.21,.894],8846:[.604,.016,.767],8849:[.697,.199,.894],8850:[.697,.199,.894],8851:[.604,0,.767],8852:[.604,0,.767],8853:[.632,.132,.894],8854:[.632,.132,.894],8855:[.632,.132,.894],8856:[.632,.132,.894],8857:[.632,.132,.894],8866:[.693,0,.703],8867:[.693,0,.703],8868:[.694,0,.894],8869:[.693,0,.894],8872:[.75,.249,.974],8876:[.711,.21,.703],8877:[.75,.249,.974],8900:[.523,.021,.575],8901:[.336,-.166,.319],8902:[.502,0,.575],8904:[.54,.039,1],8930:[.711,.21,.894],8931:[.711,.21,.894],8942:[.951,.029,.319],8943:[.336,-.166,1.295],8945:[.871,-.101,1.323],8968:[.75,.248,.511],8969:[.75,.248,.511],8970:[.749,.248,.511],8971:[.749,.248,.511],8994:[.405,-.108,1.15],8995:[.392,-.126,1.15],9001:[.75,.249,.447],9002:[.75,.249,.447],9651:[.711,0,1.022],9653:[.711,0,1.022],9657:[.54,.039,.575],9661:[.5,.21,1.022],9663:[.5,.21,1.022],9667:[.539,.038,.575],9711:[.711,.211,1.15],9824:[.719,.129,.894],9825:[.711,.024,.894],9826:[.719,.154,.894],9827:[.719,.129,.894],9837:[.75,.017,.447],9838:[.741,.223,.447],9839:[.724,.224,.447],10072:[.75,.249,.319],10216:[.75,.249,.447],10217:[.75,.249,.447],10229:[.518,.017,1.805],10230:[.518,.017,1.833],10231:[.518,.017,2.126],10232:[.547,.046,1.868],10233:[.547,.046,1.87],10234:[.547,.046,2.126],10236:[.518,.017,1.833],10744:[.711,.21,.894],10799:[.53,.028,.894],10815:[.686,0,.9],10927:[.696,.199,.894],10928:[.697,.199,.894],12296:[.75,.249,.447],12297:[.75,.249,.447]};Object.defineProperty(bold$1,"__esModule",{value:!0});bold$1.bold=void 0;var FontData_js_1$g=FontData,bold_js_1$1=bold;bold$1.bold=(0,FontData_js_1$g.AddCSS)(bold_js_1$1.bold,{183:{c:"\\22C5"},305:{f:""},567:{f:""},697:{c:"\\2032"},8194:{c:""},8195:{c:""},8196:{c:""},8197:{c:""},8198:{c:""},8201:{c:""},8202:{c:""},8213:{c:"\\2014"},8214:{c:"\\2225"},8215:{c:"_"},8226:{c:"\\2219"},8243:{c:"\\2032\\2032"},8244:{c:"\\2032\\2032\\2032"},8254:{c:"\\2C9"},8260:{c:"/"},8279:{c:"\\2032\\2032\\2032\\2032"},8407:{c:"\\2192",f:"VB"},8602:{c:"\\2190\\338"},8603:{c:"\\2192\\338"},8622:{c:"\\2194\\338"},8653:{c:"\\21D0\\338"},8654:{c:"\\21D4\\338"},8655:{c:"\\21D2\\338"},8708:{c:"\\2203\\338"},8710:{c:"\\394"},8716:{c:"\\220B\\338"},8740:{c:"\\2223\\338"},8742:{c:"\\2225\\338"},8769:{c:"\\223C\\338"},8772:{c:"\\2243\\338"},8775:{c:"\\2245\\338"},8777:{c:"\\2248\\338"},8802:{c:"\\2261\\338"},8813:{c:"\\224D\\338"},8814:{c:"<\\338"},8815:{c:">\\338"},8816:{c:"\\2264\\338"},8817:{c:"\\2265\\338"},8832:{c:"\\227A\\338"},8833:{c:"\\227B\\338"},8836:{c:"\\2282\\338"},8837:{c:"\\2283\\338"},8840:{c:"\\2286\\338"},8841:{c:"\\2287\\338"},8876:{c:"\\22A2\\338"},8877:{c:"\\22A8\\338"},8930:{c:"\\2291\\338"},8931:{c:"\\2292\\338"},9001:{c:"\\27E8"},9002:{c:"\\27E9"},9653:{c:"\\25B3"},9663:{c:"\\25BD"},10072:{c:"\\2223"},10744:{c:"/",f:"BI"},10799:{c:"\\D7"},12296:{c:"\\27E8"},12297:{c:"\\27E9"}});var doubleStruck$1={},doubleStruck={};Object.defineProperty(doubleStruck,"__esModule",{value:!0});doubleStruck.doubleStruck=void 0;doubleStruck.doubleStruck={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.doubleStruck=void 0;var r=doubleStruck;Object.defineProperty(t,"doubleStruck",{enumerable:!0,get:function(){return r.doubleStruck}})})(doubleStruck$1);var frakturBold$1={},frakturBold={};Object.defineProperty(frakturBold,"__esModule",{value:!0});frakturBold.frakturBold=void 0;frakturBold.frakturBold={33:[.689,.012,.349],34:[.695,-.432,.254],38:[.696,.016,.871],39:[.695,-.436,.25],40:[.737,.186,.459],41:[.735,.187,.459],42:[.692,-.449,.328],43:[.598,.082,.893],44:[.107,.191,.328],45:[.275,-.236,.893],46:[.102,.015,.328],47:[.721,.182,.593],48:[.501,.012,.593],49:[.489,0,.593],50:[.491,0,.593],51:[.487,.193,.593],52:[.495,.196,.593],53:[.481,.19,.593],54:[.704,.012,.593],55:[.479,.197,.593],56:[.714,.005,.593],57:[.487,.195,.593],58:[.457,.012,.255],59:[.458,.19,.255],61:[.343,-.168,.582],63:[.697,.014,.428],91:[.74,.13,.257],93:[.738,.132,.257],94:[.734,-.452,.59],8216:[.708,-.411,.254],8217:[.692,-.394,.254],8260:[.721,.182,.593],58113:[.63,.027,.587],58114:[.693,.212,.394,{ic:.014}],58115:[.681,.219,.387],58116:[.473,.212,.593],58117:[.684,.027,.393],58120:[.679,.22,.981],58121:[.717,.137,.727]};Object.defineProperty(frakturBold$1,"__esModule",{value:!0});frakturBold$1.frakturBold=void 0;var FontData_js_1$f=FontData,fraktur_bold_js_1$1=frakturBold;frakturBold$1.frakturBold=(0,FontData_js_1$f.AddCSS)(fraktur_bold_js_1$1.frakturBold,{8260:{c:"/"}});var fraktur$1={},fraktur={};Object.defineProperty(fraktur,"__esModule",{value:!0});fraktur.fraktur=void 0;fraktur.fraktur={33:[.689,.012,.296],34:[.695,-.432,.215],38:[.698,.011,.738],39:[.695,-.436,.212],40:[.737,.186,.389],41:[.735,.187,.389],42:[.692,-.449,.278],43:[.598,.082,.756],44:[.107,.191,.278],45:[.275,-.236,.756],46:[.102,.015,.278],47:[.721,.182,.502],48:[.492,.013,.502],49:[.468,0,.502],50:[.474,0,.502],51:[.473,.182,.502],52:[.476,.191,.502],53:[.458,.184,.502],54:[.7,.013,.502],55:[.468,.181,.502],56:[.705,.01,.502],57:[.469,.182,.502],58:[.457,.012,.216],59:[.458,.189,.216],61:[.368,-.132,.756],63:[.693,.011,.362],91:[.74,.13,.278],93:[.738,.131,.278],94:[.734,-.452,.5],8216:[.708,-.41,.215],8217:[.692,-.395,.215],8260:[.721,.182,.502],58112:[.683,.032,.497],58113:[.616,.03,.498],58114:[.68,.215,.333],58115:[.679,.224,.329],58116:[.471,.214,.503],58117:[.686,.02,.333],58118:[.577,.021,.334,{ic:.013}],58119:[.475,.022,.501,{ic:.013}]};Object.defineProperty(fraktur$1,"__esModule",{value:!0});fraktur$1.fraktur=void 0;var FontData_js_1$e=FontData,fraktur_js_1$1=fraktur;fraktur$1.fraktur=(0,FontData_js_1$e.AddCSS)(fraktur_js_1$1.fraktur,{8260:{c:"/"}});var italic$1={},italic={};Object.defineProperty(italic,"__esModule",{value:!0});italic.italic=void 0;italic.italic={33:[.716,0,.307,{ic:.073}],34:[.694,-.379,.514,{ic:.024}],35:[.694,.194,.818,{ic:.01}],37:[.75,.056,.818,{ic:.029}],38:[.716,.022,.767,{ic:.035}],39:[.694,-.379,.307,{ic:.07}],40:[.75,.25,.409,{ic:.108}],41:[.75,.25,.409],42:[.75,-.32,.511,{ic:.073}],43:[.557,.057,.767],44:[.121,.194,.307],45:[.251,-.18,.358],46:[.121,0,.307],47:[.716,.215,.778],48:[.665,.021,.511,{ic:.051}],49:[.666,0,.511],50:[.666,.022,.511,{ic:.04}],51:[.666,.022,.511,{ic:.051}],52:[.666,.194,.511],53:[.666,.022,.511,{ic:.056}],54:[.665,.022,.511,{ic:.054}],55:[.666,.022,.511,{ic:.123}],56:[.666,.021,.511,{ic:.042}],57:[.666,.022,.511,{ic:.042}],58:[.431,0,.307],59:[.431,.194,.307],61:[.367,-.133,.767],63:[.716,0,.511,{ic:.04}],64:[.705,.011,.767,{ic:.022}],91:[.75,.25,.307,{ic:.139}],93:[.75,.25,.307,{ic:.052}],94:[.694,-.527,.511,{ic:.017}],95:[-.025,.062,.511,{ic:.043}],126:[.318,-.208,.511,{ic:.06}],305:[.441,.01,.307,{ic:.033}],567:[.442,.204,.332],768:[.697,-.5,0],769:[.697,-.5,0,{ic:.039}],770:[.694,-.527,0,{ic:.017}],771:[.668,-.558,0,{ic:.06}],772:[.589,-.544,0,{ic:.054}],774:[.694,-.515,0,{ic:.062}],775:[.669,-.548,0],776:[.669,-.554,0,{ic:.045}],778:[.716,-.542,0],779:[.697,-.503,0,{ic:.065}],780:[.638,-.502,0,{ic:.029}],989:[.605,.085,.778],8211:[.285,-.248,.511,{ic:.043}],8212:[.285,-.248,1.022,{ic:.016}],8213:[.285,-.248,1.022,{ic:.016}],8215:[-.025,.062,.511,{ic:.043}],8216:[.694,-.379,.307,{ic:.055}],8217:[.694,-.379,.307,{ic:.07}],8220:[.694,-.379,.514,{ic:.092}],8221:[.694,-.379,.514,{ic:.024}],8260:[.716,.215,.778],8463:[.695,.013,.54,{ic:.022}],8710:[.716,0,.833,{sk:.167}],10744:[.716,.215,.778]};Object.defineProperty(italic$1,"__esModule",{value:!0});italic$1.italic=void 0;var FontData_js_1$d=FontData,italic_js_1$1=italic;italic$1.italic=(0,FontData_js_1$d.AddCSS)(italic_js_1$1.italic,{47:{f:"I"},989:{c:"\\E008",f:"A"},8213:{c:"\\2014"},8215:{c:"_"},8260:{c:"/",f:"I"},8710:{c:"\\394",f:"I"},10744:{c:"/",f:"I"}});var largeop$1={},largeop={};Object.defineProperty(largeop,"__esModule",{value:!0});largeop.largeop=void 0;largeop.largeop={40:[1.15,.649,.597],41:[1.15,.649,.597],47:[1.15,.649,.811],91:[1.15,.649,.472],92:[1.15,.649,.811],93:[1.15,.649,.472],123:[1.15,.649,.667],125:[1.15,.649,.667],710:[.772,-.565,1],732:[.75,-.611,1],770:[.772,-.565,0],771:[.75,-.611,0],8214:[.602,0,.778],8260:[1.15,.649,.811],8593:[.6,0,.667],8595:[.6,0,.667],8657:[.599,0,.778],8659:[.6,0,.778],8719:[.95,.45,1.278],8720:[.95,.45,1.278],8721:[.95,.45,1.444],8730:[1.15,.65,1,{ic:.02}],8739:[.627,.015,.333],8741:[.627,.015,.556],8747:[1.36,.862,.556,{ic:.388}],8748:[1.36,.862,1.084,{ic:.388}],8749:[1.36,.862,1.592,{ic:.388}],8750:[1.36,.862,.556,{ic:.388}],8896:[.95,.45,1.111],8897:[.95,.45,1.111],8898:[.949,.45,1.111],8899:[.95,.449,1.111],8968:[1.15,.649,.528],8969:[1.15,.649,.528],8970:[1.15,.649,.528],8971:[1.15,.649,.528],9001:[1.15,.649,.611],9002:[1.15,.649,.611],9168:[.602,0,.667],10072:[.627,.015,.333],10216:[1.15,.649,.611],10217:[1.15,.649,.611],10752:[.949,.449,1.511],10753:[.949,.449,1.511],10754:[.949,.449,1.511],10756:[.95,.449,1.111],10758:[.95,.45,1.111],10764:[1.36,.862,2.168,{ic:.388}],12296:[1.15,.649,.611],12297:[1.15,.649,.611]};Object.defineProperty(largeop$1,"__esModule",{value:!0});largeop$1.largeop=void 0;var FontData_js_1$c=FontData,largeop_js_1$1=largeop;largeop$1.largeop=(0,FontData_js_1$c.AddCSS)(largeop_js_1$1.largeop,{8214:{f:"S1"},8260:{c:"/"},8593:{f:"S1"},8595:{f:"S1"},8657:{f:"S1"},8659:{f:"S1"},8739:{f:"S1"},8741:{f:"S1"},9001:{c:"\\27E8"},9002:{c:"\\27E9"},9168:{f:"S1"},10072:{c:"\\2223",f:"S1"},10764:{c:"\\222C\\222C"},12296:{c:"\\27E8"},12297:{c:"\\27E9"}});var monospace$1={},monospace={};Object.defineProperty(monospace,"__esModule",{value:!0});monospace.monospace=void 0;monospace.monospace={32:[0,0,.525],33:[.622,0,.525],34:[.623,-.333,.525],35:[.611,0,.525],36:[.694,.082,.525],37:[.694,.083,.525],38:[.622,.011,.525],39:[.611,-.287,.525],40:[.694,.082,.525],41:[.694,.082,.525],42:[.52,-.09,.525],43:[.531,-.081,.525],44:[.14,.139,.525],45:[.341,-.271,.525],46:[.14,0,.525],47:[.694,.083,.525],58:[.431,0,.525],59:[.431,.139,.525],60:[.557,-.055,.525],61:[.417,-.195,.525],62:[.557,-.055,.525],63:[.617,0,.525],64:[.617,.006,.525],91:[.694,.082,.525],92:[.694,.083,.525],93:[.694,.082,.525],94:[.611,-.46,.525],95:[-.025,.095,.525],96:[.681,-.357,.525],123:[.694,.083,.525],124:[.694,.082,.525],125:[.694,.083,.525],126:[.611,-.466,.525],127:[.612,-.519,.525],160:[0,0,.525],305:[.431,0,.525],567:[.431,.228,.525],697:[.623,-.334,.525],768:[.611,-.485,0],769:[.611,-.485,0],770:[.611,-.46,0],771:[.611,-.466,0],772:[.577,-.5,0],774:[.611,-.504,0],776:[.612,-.519,0],778:[.619,-.499,0],780:[.577,-.449,0],913:[.623,0,.525],914:[.611,0,.525],915:[.611,0,.525],916:[.623,0,.525],917:[.611,0,.525],918:[.611,0,.525],919:[.611,0,.525],920:[.621,.01,.525],921:[.611,0,.525],922:[.611,0,.525],923:[.623,0,.525],924:[.611,0,.525],925:[.611,0,.525],926:[.611,0,.525],927:[.621,.01,.525],928:[.611,0,.525],929:[.611,0,.525],931:[.611,0,.525],932:[.611,0,.525],933:[.622,0,.525],934:[.611,0,.525],935:[.611,0,.525],936:[.611,0,.525],937:[.622,0,.525],8215:[-.025,.095,.525],8242:[.623,-.334,.525],8243:[.623,0,1.05],8244:[.623,0,1.575],8260:[.694,.083,.525],8279:[.623,0,2.1],8710:[.623,0,.525]};Object.defineProperty(monospace$1,"__esModule",{value:!0});monospace$1.monospace=void 0;var FontData_js_1$b=FontData,monospace_js_1$1=monospace;monospace$1.monospace=(0,FontData_js_1$b.AddCSS)(monospace_js_1$1.monospace,{697:{c:"\\2032"},913:{c:"A"},914:{c:"B"},917:{c:"E"},918:{c:"Z"},919:{c:"H"},921:{c:"I"},922:{c:"K"},924:{c:"M"},925:{c:"N"},927:{c:"O"},929:{c:"P"},932:{c:"T"},935:{c:"X"},8215:{c:"_"},8243:{c:"\\2032\\2032"},8244:{c:"\\2032\\2032\\2032"},8260:{c:"/"},8279:{c:"\\2032\\2032\\2032\\2032"},8710:{c:"\\394"}});var normal$1={},normal={};Object.defineProperty(normal,"__esModule",{value:!0});normal.normal=void 0;normal.normal={32:[0,0,.25],33:[.716,0,.278],34:[.694,-.379,.5],35:[.694,.194,.833],36:[.75,.056,.5],37:[.75,.056,.833],38:[.716,.022,.778],39:[.694,-.379,.278],40:[.75,.25,.389],41:[.75,.25,.389],42:[.75,-.32,.5],43:[.583,.082,.778],44:[.121,.194,.278],45:[.252,-.179,.333],46:[.12,0,.278],47:[.75,.25,.5],48:[.666,.022,.5],49:[.666,0,.5],50:[.666,0,.5],51:[.665,.022,.5],52:[.677,0,.5],53:[.666,.022,.5],54:[.666,.022,.5],55:[.676,.022,.5],56:[.666,.022,.5],57:[.666,.022,.5],58:[.43,0,.278],59:[.43,.194,.278],60:[.54,.04,.778],61:[.583,.082,.778],62:[.54,.04,.778],63:[.705,0,.472],64:[.705,.011,.778],65:[.716,0,.75],66:[.683,0,.708],67:[.705,.021,.722],68:[.683,0,.764],69:[.68,0,.681],70:[.68,0,.653],71:[.705,.022,.785],72:[.683,0,.75],73:[.683,0,.361],74:[.683,.022,.514],75:[.683,0,.778],76:[.683,0,.625],77:[.683,0,.917],78:[.683,0,.75],79:[.705,.022,.778],80:[.683,0,.681],81:[.705,.193,.778],82:[.683,.022,.736],83:[.705,.022,.556],84:[.677,0,.722],85:[.683,.022,.75],86:[.683,.022,.75],87:[.683,.022,1.028],88:[.683,0,.75],89:[.683,0,.75],90:[.683,0,.611],91:[.75,.25,.278],92:[.75,.25,.5],93:[.75,.25,.278],94:[.694,-.531,.5],95:[-.025,.062,.5],96:[.699,-.505,.5],97:[.448,.011,.5],98:[.694,.011,.556],99:[.448,.011,.444],100:[.694,.011,.556],101:[.448,.011,.444],102:[.705,0,.306,{ic:.066}],103:[.453,.206,.5],104:[.694,0,.556],105:[.669,0,.278],106:[.669,.205,.306],107:[.694,0,.528],108:[.694,0,.278],109:[.442,0,.833],110:[.442,0,.556],111:[.448,.01,.5],112:[.442,.194,.556],113:[.442,.194,.528],114:[.442,0,.392],115:[.448,.011,.394],116:[.615,.01,.389],117:[.442,.011,.556],118:[.431,.011,.528],119:[.431,.011,.722],120:[.431,0,.528],121:[.431,.204,.528],122:[.431,0,.444],123:[.75,.25,.5],124:[.75,.249,.278],125:[.75,.25,.5],126:[.318,-.215,.5],160:[0,0,.25],163:[.714,.011,.769],165:[.683,0,.75],168:[.669,-.554,.5],172:[.356,-.089,.667],174:[.709,.175,.947],175:[.59,-.544,.5],176:[.715,-.542,.5],177:[.666,0,.778],180:[.699,-.505,.5],183:[.31,-.19,.278],215:[.491,-.009,.778],240:[.749,.021,.556],247:[.537,.036,.778],305:[.442,0,.278,{sk:.0278}],567:[.442,.205,.306,{sk:.0833}],697:[.56,-.043,.275],710:[.694,-.531,.5],711:[.644,-.513,.5],713:[.59,-.544,.5],714:[.699,-.505,.5],715:[.699,-.505,.5],728:[.694,-.515,.5],729:[.669,-.549,.5],730:[.715,-.542,.5],732:[.668,-.565,.5],768:[.699,-.505,0],769:[.699,-.505,0],770:[.694,-.531,0],771:[.668,-.565,0],772:[.59,-.544,0],774:[.694,-.515,0],775:[.669,-.549,0],776:[.669,-.554,0],778:[.715,-.542,0],779:[.701,-.51,0],780:[.644,-.513,0],824:[.716,.215,0],913:[.716,0,.75],914:[.683,0,.708],915:[.68,0,.625],916:[.716,0,.833],917:[.68,0,.681],918:[.683,0,.611],919:[.683,0,.75],920:[.705,.022,.778],921:[.683,0,.361],922:[.683,0,.778],923:[.716,0,.694],924:[.683,0,.917],925:[.683,0,.75],926:[.677,0,.667],927:[.705,.022,.778],928:[.68,0,.75],929:[.683,0,.681],931:[.683,0,.722],932:[.677,0,.722],933:[.705,0,.778],934:[.683,0,.722],935:[.683,0,.75],936:[.683,0,.778],937:[.704,0,.722],8192:[0,0,.5],8193:[0,0,1],8194:[0,0,.5],8195:[0,0,1],8196:[0,0,.333],8197:[0,0,.25],8198:[0,0,.167],8201:[0,0,.167],8202:[0,0,.1],8203:[0,0,0],8204:[0,0,0],8211:[.285,-.248,.5],8212:[.285,-.248,1],8213:[.285,-.248,1],8214:[.75,.25,.5],8215:[-.025,.062,.5],8216:[.694,-.379,.278],8217:[.694,-.379,.278],8220:[.694,-.379,.5],8221:[.694,-.379,.5],8224:[.705,.216,.444],8225:[.705,.205,.444],8226:[.444,-.055,.5],8230:[.12,0,1.172],8242:[.56,-.043,.275],8243:[.56,0,.55],8244:[.56,0,.825],8245:[.56,-.043,.275],8246:[.56,0,.55],8247:[.56,0,.825],8254:[.59,-.544,.5],8260:[.75,.25,.5],8279:[.56,0,1.1],8288:[0,0,0],8289:[0,0,0],8290:[0,0,0],8291:[0,0,0],8292:[0,0,0],8407:[.714,-.516,.5],8450:[.702,.019,.722],8459:[.717,.036,.969,{ic:.272,sk:.333}],8460:[.666,.133,.72],8461:[.683,0,.778],8462:[.694,.011,.576,{sk:-.0278}],8463:[.695,.013,.54,{ic:.022}],8464:[.717,.017,.809,{ic:.137,sk:.333}],8465:[.686,.026,.554],8466:[.717,.017,.874,{ic:.161,sk:.306}],8467:[.705,.02,.417,{sk:.111}],8469:[.683,.02,.722],8472:[.453,.216,.636,{sk:.111}],8473:[.683,0,.611],8474:[.701,.181,.778],8475:[.717,.017,.85,{ic:.037,sk:.194}],8476:[.686,.026,.828],8477:[.683,0,.722],8484:[.683,0,.667],8486:[.704,0,.722],8487:[.684,.022,.722],8488:[.729,.139,.602],8492:[.708,.028,.908,{ic:.02,sk:.194}],8493:[.685,.024,.613],8496:[.707,.008,.562,{ic:.156,sk:.139}],8497:[.735,.036,.895,{ic:.095,sk:.222}],8498:[.695,0,.556],8499:[.721,.05,1.08,{ic:.136,sk:.444}],8501:[.694,0,.611],8502:[.763,.021,.667,{ic:.02}],8503:[.764,.043,.444],8504:[.764,.043,.667],8513:[.705,.023,.639],8592:[.511,.011,1],8593:[.694,.193,.5],8594:[.511,.011,1],8595:[.694,.194,.5],8596:[.511,.011,1],8597:[.772,.272,.5],8598:[.72,.195,1],8599:[.72,.195,1],8600:[.695,.22,1],8601:[.695,.22,1],8602:[.437,-.06,1],8603:[.437,-.06,1],8606:[.417,-.083,1],8608:[.417,-.083,1],8610:[.417,-.083,1.111],8611:[.417,-.083,1.111],8614:[.511,.011,1],8617:[.511,.011,1.126],8618:[.511,.011,1.126],8619:[.575,.041,1],8620:[.575,.041,1],8621:[.417,-.083,1.389],8622:[.437,-.06,1],8624:[.722,0,.5],8625:[.722,0,.5],8630:[.461,0,1],8631:[.46,0,1],8634:[.65,.083,.778],8635:[.65,.083,.778],8636:[.511,-.23,1],8637:[.27,.011,1],8638:[.694,.194,.417],8639:[.694,.194,.417],8640:[.511,-.23,1],8641:[.27,.011,1],8642:[.694,.194,.417],8643:[.694,.194,.417],8644:[.667,0,1],8646:[.667,0,1],8647:[.583,.083,1],8648:[.694,.193,.833],8649:[.583,.083,1],8650:[.694,.194,.833],8651:[.514,.014,1],8652:[.671,.011,1],8653:[.534,.035,1],8654:[.534,.037,1],8655:[.534,.035,1],8656:[.525,.024,1],8657:[.694,.194,.611],8658:[.525,.024,1],8659:[.694,.194,.611],8660:[.526,.025,1],8661:[.772,.272,.611],8666:[.611,.111,1],8667:[.611,.111,1],8669:[.417,-.083,1],8672:[.437,-.064,1.334],8674:[.437,-.064,1.334],8704:[.694,.022,.556],8705:[.846,.021,.5],8706:[.715,.022,.531,{ic:.035,sk:.0833}],8707:[.694,0,.556],8708:[.716,.215,.556],8709:[.772,.078,.5],8710:[.716,0,.833],8711:[.683,.033,.833],8712:[.54,.04,.667],8713:[.716,.215,.667],8715:[.54,.04,.667],8716:[.716,.215,.667],8717:[.44,0,.429,{ic:.027}],8719:[.75,.25,.944],8720:[.75,.25,.944],8721:[.75,.25,1.056],8722:[.583,.082,.778],8723:[.5,.166,.778],8724:[.766,.093,.778],8725:[.75,.25,.5],8726:[.75,.25,.5],8727:[.465,-.035,.5],8728:[.444,-.055,.5],8729:[.444,-.055,.5],8730:[.8,.2,.833,{ic:.02}],8733:[.442,.011,.778],8734:[.442,.011,1],8736:[.694,0,.722],8737:[.714,.02,.722],8738:[.551,.051,.722],8739:[.75,.249,.278],8740:[.75,.252,.278,{ic:.019}],8741:[.75,.25,.5],8742:[.75,.25,.5,{ic:.018}],8743:[.598,.022,.667],8744:[.598,.022,.667],8745:[.598,.022,.667],8746:[.598,.022,.667],8747:[.716,.216,.417,{ic:.055}],8748:[.805,.306,.819,{ic:.138}],8749:[.805,.306,1.166,{ic:.138}],8750:[.805,.306,.472,{ic:.138}],8756:[.471,.082,.667],8757:[.471,.082,.667],8764:[.367,-.133,.778],8765:[.367,-.133,.778],8768:[.583,.083,.278],8769:[.467,-.032,.778],8770:[.463,-.034,.778],8771:[.464,-.036,.778],8772:[.716,.215,.778],8773:[.589,-.022,.778],8775:[.652,.155,.778],8776:[.483,-.055,.778],8777:[.716,.215,.778],8778:[.579,.039,.778],8781:[.484,-.016,.778],8782:[.492,-.008,.778],8783:[.492,-.133,.778],8784:[.67,-.133,.778],8785:[.609,.108,.778],8786:[.601,.101,.778],8787:[.601,.102,.778],8790:[.367,-.133,.778],8791:[.721,-.133,.778],8796:[.859,-.133,.778],8800:[.716,.215,.778],8801:[.464,-.036,.778],8802:[.716,.215,.778],8804:[.636,.138,.778],8805:[.636,.138,.778],8806:[.753,.175,.778],8807:[.753,.175,.778],8808:[.752,.286,.778],8809:[.752,.286,.778],8810:[.568,.067,1],8811:[.567,.067,1],8812:[.75,.25,.5],8813:[.716,.215,.778],8814:[.708,.209,.778],8815:[.708,.209,.778],8816:[.801,.303,.778],8817:[.801,.303,.778],8818:[.732,.228,.778],8819:[.732,.228,.778],8820:[.732,.228,.778],8821:[.732,.228,.778],8822:[.681,.253,.778],8823:[.681,.253,.778],8824:[.716,.253,.778],8825:[.716,.253,.778],8826:[.539,.041,.778],8827:[.539,.041,.778],8828:[.58,.153,.778],8829:[.58,.154,.778],8830:[.732,.228,.778],8831:[.732,.228,.778],8832:[.705,.208,.778],8833:[.705,.208,.778],8834:[.54,.04,.778],8835:[.54,.04,.778],8836:[.716,.215,.778],8837:[.716,.215,.778],8838:[.636,.138,.778],8839:[.636,.138,.778],8840:[.801,.303,.778],8841:[.801,.303,.778],8842:[.635,.241,.778],8843:[.635,.241,.778],8846:[.598,.022,.667],8847:[.539,.041,.778],8848:[.539,.041,.778],8849:[.636,.138,.778],8850:[.636,.138,.778],8851:[.598,0,.667],8852:[.598,0,.667],8853:[.583,.083,.778],8854:[.583,.083,.778],8855:[.583,.083,.778],8856:[.583,.083,.778],8857:[.583,.083,.778],8858:[.582,.082,.778],8859:[.582,.082,.778],8861:[.582,.082,.778],8862:[.689,0,.778],8863:[.689,0,.778],8864:[.689,0,.778],8865:[.689,0,.778],8866:[.694,0,.611],8867:[.694,0,.611],8868:[.668,0,.778],8869:[.668,0,.778],8872:[.75,.249,.867],8873:[.694,0,.722],8874:[.694,0,.889],8876:[.695,0,.611],8877:[.695,0,.611],8878:[.695,0,.722],8879:[.695,0,.722],8882:[.539,.041,.778],8883:[.539,.041,.778],8884:[.636,.138,.778],8885:[.636,.138,.778],8888:[.408,-.092,1.111],8890:[.431,.212,.556],8891:[.716,0,.611],8892:[.716,0,.611],8896:[.75,.249,.833],8897:[.75,.249,.833],8898:[.75,.249,.833],8899:[.75,.249,.833],8900:[.488,-.012,.5],8901:[.31,-.19,.278],8902:[.486,-.016,.5],8903:[.545,.044,.778],8904:[.505,.005,.9],8905:[.492,-.008,.778],8906:[.492,-.008,.778],8907:[.694,.022,.778],8908:[.694,.022,.778],8909:[.464,-.036,.778],8910:[.578,.021,.76],8911:[.578,.022,.76],8912:[.54,.04,.778],8913:[.54,.04,.778],8914:[.598,.022,.667],8915:[.598,.022,.667],8916:[.736,.022,.667],8918:[.541,.041,.778],8919:[.541,.041,.778],8920:[.568,.067,1.333],8921:[.568,.067,1.333],8922:[.886,.386,.778],8923:[.886,.386,.778],8926:[.734,0,.778],8927:[.734,0,.778],8928:[.801,.303,.778],8929:[.801,.303,.778],8930:[.716,.215,.778],8931:[.716,.215,.778],8934:[.73,.359,.778],8935:[.73,.359,.778],8936:[.73,.359,.778],8937:[.73,.359,.778],8938:[.706,.208,.778],8939:[.706,.208,.778],8940:[.802,.303,.778],8941:[.801,.303,.778],8942:[1.3,.03,.278],8943:[.31,-.19,1.172],8945:[1.52,-.1,1.282],8965:[.716,0,.611],8966:[.813,.097,.611],8968:[.75,.25,.444],8969:[.75,.25,.444],8970:[.75,.25,.444],8971:[.75,.25,.444],8988:[.694,-.306,.5],8989:[.694,-.306,.5],8990:[.366,.022,.5],8991:[.366,.022,.5],8994:[.388,-.122,1],8995:[.378,-.134,1],9001:[.75,.25,.389],9002:[.75,.25,.389],9136:[.744,.244,.412],9137:[.744,.244,.412],9168:[.602,0,.667],9416:[.709,.175,.902],9484:[.694,-.306,.5],9488:[.694,-.306,.5],9492:[.366,.022,.5],9496:[.366,.022,.5],9585:[.694,.195,.889],9586:[.694,.195,.889],9632:[.689,0,.778],9633:[.689,0,.778],9642:[.689,0,.778],9650:[.575,.02,.722],9651:[.716,0,.889],9652:[.575,.02,.722],9653:[.716,0,.889],9654:[.539,.041,.778],9656:[.539,.041,.778],9657:[.505,.005,.5],9660:[.576,.019,.722],9661:[.5,.215,.889],9662:[.576,.019,.722],9663:[.5,.215,.889],9664:[.539,.041,.778],9666:[.539,.041,.778],9667:[.505,.005,.5],9674:[.716,.132,.667],9711:[.715,.215,1],9723:[.689,0,.778],9724:[.689,0,.778],9733:[.694,.111,.944],9824:[.727,.13,.778],9825:[.716,.033,.778],9826:[.727,.162,.778],9827:[.726,.13,.778],9837:[.75,.022,.389],9838:[.734,.223,.389],9839:[.723,.223,.389],10003:[.706,.034,.833],10016:[.716,.022,.833],10072:[.75,.249,.278],10216:[.75,.25,.389],10217:[.75,.25,.389],10222:[.744,.244,.412],10223:[.744,.244,.412],10229:[.511,.011,1.609],10230:[.511,.011,1.638],10231:[.511,.011,1.859],10232:[.525,.024,1.609],10233:[.525,.024,1.638],10234:[.525,.024,1.858],10236:[.511,.011,1.638],10731:[.716,.132,.667],10744:[.716,.215,.778],10752:[.75,.25,1.111],10753:[.75,.25,1.111],10754:[.75,.25,1.111],10756:[.75,.249,.833],10758:[.75,.249,.833],10764:[.805,.306,1.638,{ic:.138}],10799:[.491,-.009,.778],10815:[.683,0,.75],10846:[.813,.097,.611],10877:[.636,.138,.778],10878:[.636,.138,.778],10885:[.762,.29,.778],10886:[.762,.29,.778],10887:[.635,.241,.778],10888:[.635,.241,.778],10889:[.761,.387,.778],10890:[.761,.387,.778],10891:[1.003,.463,.778],10892:[1.003,.463,.778],10901:[.636,.138,.778],10902:[.636,.138,.778],10927:[.636,.138,.778],10928:[.636,.138,.778],10933:[.752,.286,.778],10934:[.752,.286,.778],10935:[.761,.294,.778],10936:[.761,.294,.778],10937:[.761,.337,.778],10938:[.761,.337,.778],10949:[.753,.215,.778],10950:[.753,.215,.778],10955:[.783,.385,.778],10956:[.783,.385,.778],12296:[.75,.25,.389],12297:[.75,.25,.389],57350:[.43,.023,.222,{ic:.018}],57351:[.431,.024,.389,{ic:.018}],57352:[.605,.085,.778],57353:[.434,.006,.667,{ic:.067}],57356:[.752,.284,.778],57357:[.752,.284,.778],57358:[.919,.421,.778],57359:[.801,.303,.778],57360:[.801,.303,.778],57361:[.919,.421,.778],57366:[.828,.33,.778],57367:[.752,.332,.778],57368:[.828,.33,.778],57369:[.752,.333,.778],57370:[.634,.255,.778],57371:[.634,.254,.778],119808:[.698,0,.869],119809:[.686,0,.818],119810:[.697,.011,.831],119811:[.686,0,.882],119812:[.68,0,.756],119813:[.68,0,.724],119814:[.697,.01,.904],119815:[.686,0,.9],119816:[.686,0,.436],119817:[.686,.011,.594],119818:[.686,0,.901],119819:[.686,0,.692],119820:[.686,0,1.092],119821:[.686,0,.9],119822:[.696,.01,.864],119823:[.686,0,.786],119824:[.696,.193,.864],119825:[.686,.011,.862],119826:[.697,.011,.639],119827:[.675,0,.8],119828:[.686,.011,.885],119829:[.686,.007,.869],119830:[.686,.007,1.189],119831:[.686,0,.869],119832:[.686,0,.869],119833:[.686,0,.703],119834:[.453,.006,.559],119835:[.694,.006,.639],119836:[.453,.006,.511],119837:[.694,.006,.639],119838:[.452,.006,.527],119839:[.7,0,.351,{ic:.101}],119840:[.455,.201,.575],119841:[.694,0,.639],119842:[.695,0,.319],119843:[.695,.2,.351],119844:[.694,0,.607],119845:[.694,0,.319],119846:[.45,0,.958],119847:[.45,0,.639],119848:[.452,.005,.575],119849:[.45,.194,.639],119850:[.45,.194,.607],119851:[.45,0,.474],119852:[.453,.006,.454],119853:[.635,.005,.447],119854:[.45,.006,.639],119855:[.444,0,.607],119856:[.444,0,.831],119857:[.444,0,.607],119858:[.444,.2,.607],119859:[.444,0,.511],119860:[.716,0,.75,{sk:.139}],119861:[.683,0,.759,{sk:.0833}],119862:[.705,.022,.715,{ic:.045,sk:.0833}],119863:[.683,0,.828,{sk:.0556}],119864:[.68,0,.738,{ic:.026,sk:.0833}],119865:[.68,0,.643,{ic:.106,sk:.0833}],119866:[.705,.022,.786,{sk:.0833}],119867:[.683,0,.831,{ic:.057,sk:.0556}],119868:[.683,0,.44,{ic:.064,sk:.111}],119869:[.683,.022,.555,{ic:.078,sk:.167}],119870:[.683,0,.849,{ic:.04,sk:.0556}],119871:[.683,0,.681,{sk:.0278}],119872:[.683,0,.97,{ic:.081,sk:.0833}],119873:[.683,0,.803,{ic:.085,sk:.0833}],119874:[.704,.022,.763,{sk:.0833}],119875:[.683,0,.642,{ic:.109,sk:.0833}],119876:[.704,.194,.791,{sk:.0833}],119877:[.683,.021,.759,{sk:.0833}],119878:[.705,.022,.613,{ic:.032,sk:.0833}],119879:[.677,0,.584,{ic:.12,sk:.0833}],119880:[.683,.022,.683,{ic:.084,sk:.0278}],119881:[.683,.022,.583,{ic:.186}],119882:[.683,.022,.944,{ic:.104}],119883:[.683,0,.828,{ic:.024,sk:.0833}],119884:[.683,0,.581,{ic:.182}],119885:[.683,0,.683,{ic:.04,sk:.0833}],119886:[.441,.01,.529],119887:[.694,.011,.429],119888:[.442,.011,.433,{sk:.0556}],119889:[.694,.01,.52,{sk:.167}],119890:[.442,.011,.466,{sk:.0556}],119891:[.705,.205,.49,{ic:.06,sk:.167}],119892:[.442,.205,.477,{sk:.0278}],119894:[.661,.011,.345],119895:[.661,.204,.412],119896:[.694,.011,.521],119897:[.694,.011,.298,{sk:.0833}],119898:[.442,.011,.878],119899:[.442,.011,.6],119900:[.441,.011,.485,{sk:.0556}],119901:[.442,.194,.503,{sk:.0833}],119902:[.442,.194,.446,{ic:.014,sk:.0833}],119903:[.442,.011,.451,{sk:.0556}],119904:[.442,.01,.469,{sk:.0556}],119905:[.626,.011,.361,{sk:.0833}],119906:[.442,.011,.572,{sk:.0278}],119907:[.443,.011,.485,{sk:.0278}],119908:[.443,.011,.716,{sk:.0833}],119909:[.442,.011,.572,{sk:.0278}],119910:[.442,.205,.49,{sk:.0556}],119911:[.442,.011,.465,{sk:.0556}],119912:[.711,0,.869,{sk:.16}],119913:[.686,0,.866,{sk:.0958}],119914:[.703,.017,.817,{ic:.038,sk:.0958}],119915:[.686,0,.938,{sk:.0639}],119916:[.68,0,.81,{ic:.015,sk:.0958}],119917:[.68,0,.689,{ic:.12,sk:.0958}],119918:[.703,.016,.887,{sk:.0958}],119919:[.686,0,.982,{ic:.045,sk:.0639}],119920:[.686,0,.511,{ic:.062,sk:.128}],119921:[.686,.017,.631,{ic:.063,sk:.192}],119922:[.686,0,.971,{ic:.032,sk:.0639}],119923:[.686,0,.756,{sk:.0319}],119924:[.686,0,1.142,{ic:.077,sk:.0958}],119925:[.686,0,.95,{ic:.077,sk:.0958}],119926:[.703,.017,.837,{sk:.0958}],119927:[.686,0,.723,{ic:.124,sk:.0958}],119928:[.703,.194,.869,{sk:.0958}],119929:[.686,.017,.872,{sk:.0958}],119930:[.703,.017,.693,{ic:.021,sk:.0958}],119931:[.675,0,.637,{ic:.135,sk:.0958}],119932:[.686,.016,.8,{ic:.077,sk:.0319}],119933:[.686,.016,.678,{ic:.208}],119934:[.686,.017,1.093,{ic:.114}],119935:[.686,0,.947,{sk:.0958}],119936:[.686,0,.675,{ic:.201}],119937:[.686,0,.773,{ic:.032,sk:.0958}],119938:[.452,.008,.633],119939:[.694,.008,.521],119940:[.451,.008,.513,{sk:.0639}],119941:[.694,.008,.61,{sk:.192}],119942:[.452,.008,.554,{sk:.0639}],119943:[.701,.201,.568,{ic:.056,sk:.192}],119944:[.452,.202,.545,{sk:.0319}],119945:[.694,.008,.668,{sk:-.0319}],119946:[.694,.008,.405],119947:[.694,.202,.471],119948:[.694,.008,.604],119949:[.694,.008,.348,{sk:.0958}],119950:[.452,.008,1.032],119951:[.452,.008,.713],119952:[.452,.008,.585,{sk:.0639}],119953:[.452,.194,.601,{sk:.0958}],119954:[.452,.194,.542,{sk:.0958}],119955:[.452,.008,.529,{sk:.0639}],119956:[.451,.008,.531,{sk:.0639}],119957:[.643,.007,.415,{sk:.0958}],119958:[.452,.008,.681,{sk:.0319}],119959:[.453,.008,.567,{sk:.0319}],119960:[.453,.008,.831,{sk:.0958}],119961:[.452,.008,.659,{sk:.0319}],119962:[.452,.202,.59,{sk:.0639}],119963:[.452,.008,.555,{sk:.0639}],119964:[.717,.008,.803,{ic:.213,sk:.389}],119966:[.728,.026,.666,{ic:.153,sk:.278}],119967:[.708,.031,.774,{ic:.081,sk:.111}],119970:[.717,.037,.61,{ic:.128,sk:.25}],119973:[.717,.314,1.052,{ic:.081,sk:.417}],119974:[.717,.037,.914,{ic:.29,sk:.361}],119977:[.726,.036,.902,{ic:.306,sk:.389}],119978:[.707,.008,.738,{ic:.067,sk:.167}],119979:[.716,.037,1.013,{ic:.018,sk:.222}],119980:[.717,.017,.883,{sk:.278}],119982:[.708,.036,.868,{ic:.148,sk:.333}],119983:[.735,.037,.747,{ic:.249,sk:.222}],119984:[.717,.017,.8,{ic:.16,sk:.25}],119985:[.717,.017,.622,{ic:.228,sk:.222}],119986:[.717,.017,.805,{ic:.221,sk:.25}],119987:[.717,.017,.944,{ic:.187,sk:.278}],119988:[.716,.017,.71,{ic:.249,sk:.194}],119989:[.717,.016,.821,{ic:.211,sk:.306}],120068:[.696,.026,.718],120069:[.691,.027,.884],120071:[.685,.027,.832],120072:[.685,.024,.663],120073:[.686,.153,.611],120074:[.69,.026,.785],120077:[.686,.139,.552],120078:[.68,.027,.668,{ic:.014}],120079:[.686,.026,.666],120080:[.692,.027,1.05],120081:[.686,.025,.832],120082:[.729,.027,.827],120083:[.692,.218,.828],120084:[.729,.069,.827],120086:[.692,.027,.829],120087:[.701,.027,.669],120088:[.697,.027,.646,{ic:.019}],120089:[.686,.026,.831],120090:[.686,.027,1.046],120091:[.688,.027,.719],120092:[.686,.218,.833],120094:[.47,.035,.5],120095:[.685,.031,.513],120096:[.466,.029,.389],120097:[.609,.033,.499],120098:[.467,.03,.401],120099:[.681,.221,.326],120100:[.47,.209,.504],120101:[.688,.205,.521],120102:[.673,.02,.279],120103:[.672,.208,.281],120104:[.689,.025,.389],120105:[.685,.02,.28],120106:[.475,.026,.767],120107:[.475,.022,.527],120108:[.48,.028,.489],120109:[.541,.212,.5],120110:[.479,.219,.489],120111:[.474,.021,.389],120112:[.478,.029,.443],120113:[.64,.02,.333,{ic:.015}],120114:[.474,.023,.517],120115:[.53,.028,.512],120116:[.532,.028,.774],120117:[.472,.188,.389],120118:[.528,.218,.499],120119:[.471,.214,.391],120120:[.701,0,.722],120121:[.683,0,.667],120123:[.683,0,.722],120124:[.683,0,.667],120125:[.683,0,.611],120126:[.702,.019,.778],120128:[.683,0,.389],120129:[.683,.077,.5],120130:[.683,0,.778],120131:[.683,0,.667],120132:[.683,0,.944],120134:[.701,.019,.778],120138:[.702,.012,.556],120139:[.683,0,.667],120140:[.683,.019,.722],120141:[.683,.02,.722],120142:[.683,.019,1],120143:[.683,0,.722],120144:[.683,0,.722],120172:[.686,.031,.847],120173:[.684,.031,1.044],120174:[.676,.032,.723],120175:[.683,.029,.982],120176:[.686,.029,.783],120177:[.684,.146,.722],120178:[.687,.029,.927],120179:[.683,.126,.851],120180:[.681,.025,.655],120181:[.68,.141,.652],120182:[.681,.026,.789,{ic:.017}],120183:[.683,.028,.786],120184:[.683,.032,1.239],120185:[.679,.03,.983],120186:[.726,.03,.976],120187:[.688,.223,.977],120188:[.726,.083,.976],120189:[.688,.028,.978],120190:[.685,.031,.978],120191:[.686,.03,.79,{ic:.012}],120192:[.688,.039,.851,{ic:.02}],120193:[.685,.029,.982],120194:[.683,.03,1.235],120195:[.681,.035,.849],120196:[.688,.214,.984],120197:[.677,.148,.711],120198:[.472,.032,.603],120199:[.69,.032,.59],120200:[.473,.026,.464],120201:[.632,.028,.589],120202:[.471,.027,.472],120203:[.687,.222,.388],120204:[.472,.208,.595],120205:[.687,.207,.615],120206:[.686,.025,.331],120207:[.682,.203,.332],120208:[.682,.025,.464],120209:[.681,.024,.337],120210:[.476,.031,.921],120211:[.473,.028,.654],120212:[.482,.034,.609],120213:[.557,.207,.604],120214:[.485,.211,.596],120215:[.472,.026,.46],120216:[.479,.034,.523],120217:[.648,.027,.393,{ic:.014}],120218:[.472,.032,.589,{ic:.014}],120219:[.546,.027,.604],120220:[.549,.032,.918],120221:[.471,.188,.459],120222:[.557,.221,.589],120223:[.471,.214,.461],120224:[.694,0,.667],120225:[.694,0,.667],120226:[.705,.011,.639],120227:[.694,0,.722],120228:[.691,0,.597],120229:[.691,0,.569],120230:[.704,.011,.667],120231:[.694,0,.708],120232:[.694,0,.278],120233:[.694,.022,.472],120234:[.694,0,.694],120235:[.694,0,.542],120236:[.694,0,.875],120237:[.694,0,.708],120238:[.715,.022,.736],120239:[.694,0,.639],120240:[.715,.125,.736],120241:[.694,0,.646],120242:[.716,.022,.556],120243:[.688,0,.681],120244:[.694,.022,.688],120245:[.694,0,.667],120246:[.694,0,.944],120247:[.694,0,.667],120248:[.694,0,.667],120249:[.694,0,.611],120250:[.46,.01,.481],120251:[.694,.011,.517],120252:[.46,.01,.444],120253:[.694,.01,.517],120254:[.461,.01,.444],120255:[.705,0,.306,{ic:.041}],120256:[.455,.206,.5],120257:[.694,0,.517],120258:[.68,0,.239],120259:[.68,.205,.267],120260:[.694,0,.489],120261:[.694,0,.239],120262:[.455,0,.794],120263:[.455,0,.517],120264:[.46,.01,.5],120265:[.455,.194,.517],120266:[.455,.194,.517],120267:[.455,0,.342],120268:[.46,.01,.383],120269:[.571,.01,.361],120270:[.444,.01,.517],120271:[.444,0,.461],120272:[.444,0,.683],120273:[.444,0,.461],120274:[.444,.204,.461],120275:[.444,0,.435],120276:[.694,0,.733],120277:[.694,0,.733],120278:[.704,.011,.703],120279:[.694,0,.794],120280:[.691,0,.642],120281:[.691,0,.611],120282:[.705,.011,.733],120283:[.694,0,.794],120284:[.694,0,.331],120285:[.694,.022,.519],120286:[.694,0,.764],120287:[.694,0,.581],120288:[.694,0,.978],120289:[.694,0,.794],120290:[.716,.022,.794],120291:[.694,0,.703],120292:[.716,.106,.794],120293:[.694,0,.703],120294:[.716,.022,.611],120295:[.688,0,.733],120296:[.694,.022,.764],120297:[.694,0,.733],120298:[.694,0,1.039],120299:[.694,0,.733],120300:[.694,0,.733],120301:[.694,0,.672],120302:[.475,.011,.525],120303:[.694,.01,.561],120304:[.475,.011,.489],120305:[.694,.011,.561],120306:[.474,.01,.511],120307:[.705,0,.336,{ic:.045}],120308:[.469,.206,.55],120309:[.694,0,.561],120310:[.695,0,.256],120311:[.695,.205,.286],120312:[.694,0,.531],120313:[.694,0,.256],120314:[.469,0,.867],120315:[.468,0,.561],120316:[.474,.011,.55],120317:[.469,.194,.561],120318:[.469,.194,.561],120319:[.469,0,.372],120320:[.474,.01,.422],120321:[.589,.01,.404],120322:[.458,.011,.561],120323:[.458,0,.5],120324:[.458,0,.744],120325:[.458,0,.5],120326:[.458,.205,.5],120327:[.458,0,.476],120328:[.694,0,.667],120329:[.694,0,.667,{ic:.029}],120330:[.705,.01,.639,{ic:.08}],120331:[.694,0,.722,{ic:.025}],120332:[.691,0,.597,{ic:.091}],120333:[.691,0,.569,{ic:.104}],120334:[.705,.011,.667,{ic:.063}],120335:[.694,0,.708,{ic:.06}],120336:[.694,0,.278,{ic:.06}],120337:[.694,.022,.472,{ic:.063}],120338:[.694,0,.694,{ic:.091}],120339:[.694,0,.542],120340:[.694,0,.875,{ic:.054}],120341:[.694,0,.708,{ic:.058}],120342:[.716,.022,.736,{ic:.027}],120343:[.694,0,.639,{ic:.051}],120344:[.716,.125,.736,{ic:.027}],120345:[.694,0,.646,{ic:.052}],120346:[.716,.022,.556,{ic:.053}],120347:[.688,0,.681,{ic:.109}],120348:[.694,.022,.688,{ic:.059}],120349:[.694,0,.667,{ic:.132}],120350:[.694,0,.944,{ic:.132}],120351:[.694,0,.667,{ic:.091}],120352:[.694,0,.667,{ic:.143}],120353:[.694,0,.611,{ic:.091}],120354:[.461,.01,.481],120355:[.694,.011,.517,{ic:.022}],120356:[.46,.011,.444,{ic:.055}],120357:[.694,.01,.517,{ic:.071}],120358:[.46,.011,.444,{ic:.028}],120359:[.705,0,.306,{ic:.188}],120360:[.455,.206,.5,{ic:.068}],120361:[.694,0,.517],120362:[.68,0,.239,{ic:.076}],120363:[.68,.204,.267,{ic:.069}],120364:[.694,0,.489,{ic:.054}],120365:[.694,0,.239,{ic:.072}],120366:[.455,0,.794],120367:[.454,0,.517],120368:[.461,.011,.5,{ic:.023}],120369:[.455,.194,.517,{ic:.021}],120370:[.455,.194,.517,{ic:.021}],120371:[.455,0,.342,{ic:.082}],120372:[.461,.011,.383,{ic:.053}],120373:[.571,.011,.361,{ic:.049}],120374:[.444,.01,.517,{ic:.02}],120375:[.444,0,.461,{ic:.079}],120376:[.444,0,.683,{ic:.079}],120377:[.444,0,.461,{ic:.076}],120378:[.444,.205,.461,{ic:.079}],120379:[.444,0,.435,{ic:.059}],120432:[.623,0,.525],120433:[.611,0,.525],120434:[.622,.011,.525],120435:[.611,0,.525],120436:[.611,0,.525],120437:[.611,0,.525],120438:[.622,.011,.525],120439:[.611,0,.525],120440:[.611,0,.525],120441:[.611,.011,.525],120442:[.611,0,.525],120443:[.611,0,.525],120444:[.611,0,.525],120445:[.611,0,.525],120446:[.621,.01,.525],120447:[.611,0,.525],120448:[.621,.138,.525],120449:[.611,.011,.525],120450:[.622,.011,.525],120451:[.611,0,.525],120452:[.611,.011,.525],120453:[.611,.007,.525],120454:[.611,.007,.525],120455:[.611,0,.525],120456:[.611,0,.525],120457:[.611,0,.525],120458:[.439,.006,.525],120459:[.611,.006,.525],120460:[.44,.006,.525],120461:[.611,.006,.525],120462:[.44,.006,.525],120463:[.617,0,.525],120464:[.442,.229,.525],120465:[.611,0,.525],120466:[.612,0,.525],120467:[.612,.228,.525],120468:[.611,0,.525],120469:[.611,0,.525],120470:[.436,0,.525,{ic:.011}],120471:[.436,0,.525],120472:[.44,.006,.525],120473:[.437,.221,.525],120474:[.437,.221,.525,{ic:.02}],120475:[.437,0,.525],120476:[.44,.006,.525],120477:[.554,.006,.525],120478:[.431,.005,.525],120479:[.431,0,.525],120480:[.431,0,.525],120481:[.431,0,.525],120482:[.431,.228,.525],120483:[.431,0,.525],120488:[.698,0,.869],120489:[.686,0,.818],120490:[.68,0,.692],120491:[.698,0,.958],120492:[.68,0,.756],120493:[.686,0,.703],120494:[.686,0,.9],120495:[.696,.01,.894],120496:[.686,0,.436],120497:[.686,0,.901],120498:[.698,0,.806],120499:[.686,0,1.092],120500:[.686,0,.9],120501:[.675,0,.767],120502:[.696,.01,.864],120503:[.68,0,.9],120504:[.686,0,.786],120506:[.686,0,.831],120507:[.675,0,.8],120508:[.697,0,.894],120509:[.686,0,.831],120510:[.686,0,.869],120511:[.686,0,.894],120512:[.696,0,.831],120513:[.686,.024,.958],120546:[.716,0,.75,{sk:.139}],120547:[.683,0,.759,{sk:.0833}],120548:[.68,0,.615,{ic:.106,sk:.0833}],120549:[.716,0,.833,{sk:.167}],120550:[.68,0,.738,{ic:.026,sk:.0833}],120551:[.683,0,.683,{ic:.04,sk:.0833}],120552:[.683,0,.831,{ic:.057,sk:.0556}],120553:[.704,.022,.763,{sk:.0833}],120554:[.683,0,.44,{ic:.064,sk:.111}],120555:[.683,0,.849,{ic:.04,sk:.0556}],120556:[.716,0,.694,{sk:.167}],120557:[.683,0,.97,{ic:.081,sk:.0833}],120558:[.683,0,.803,{ic:.085,sk:.0833}],120559:[.677,0,.742,{ic:.035,sk:.0833}],120560:[.704,.022,.763,{sk:.0833}],120561:[.68,0,.831,{ic:.056,sk:.0556}],120562:[.683,0,.642,{ic:.109,sk:.0833}],120564:[.683,0,.78,{ic:.026,sk:.0833}],120565:[.677,0,.584,{ic:.12,sk:.0833}],120566:[.705,0,.583,{ic:.117,sk:.0556}],120567:[.683,0,.667,{sk:.0833}],120568:[.683,0,.828,{ic:.024,sk:.0833}],120569:[.683,0,.612,{ic:.08,sk:.0556}],120570:[.704,0,.772,{ic:.014,sk:.0833}],120572:[.442,.011,.64,{sk:.0278}],120573:[.705,.194,.566,{sk:.0833}],120574:[.441,.216,.518,{ic:.025}],120575:[.717,.01,.444,{sk:.0556}],120576:[.452,.022,.466,{sk:.0833}],120577:[.704,.204,.438,{ic:.033,sk:.0833}],120578:[.442,.216,.497,{sk:.0556}],120579:[.705,.01,.469,{sk:.0833}],120580:[.442,.01,.354,{sk:.0556}],120581:[.442,.011,.576],120582:[.694,.012,.583],120583:[.442,.216,.603,{sk:.0278}],120584:[.442,0,.494,{ic:.036,sk:.0278}],120585:[.704,.205,.438,{sk:.111}],120586:[.441,.011,.485,{sk:.0556}],120587:[.431,.011,.57],120588:[.442,.216,.517,{sk:.0833}],120589:[.442,.107,.363,{ic:.042,sk:.0833}],120590:[.431,.011,.571],120591:[.431,.013,.437,{ic:.08,sk:.0278}],120592:[.443,.01,.54,{sk:.0278}],120593:[.442,.218,.654,{sk:.0833}],120594:[.442,.204,.626,{sk:.0556}],120595:[.694,.205,.651,{sk:.111}],120596:[.443,.011,.622],120597:[.715,.022,.531,{ic:.035,sk:.0833}],120598:[.431,.011,.406,{sk:.0556}],120599:[.705,.011,.591,{sk:.0833}],120600:[.434,.006,.667,{ic:.067}],120601:[.694,.205,.596,{sk:.0833}],120602:[.442,.194,.517,{sk:.0833}],120603:[.431,.01,.828],120604:[.711,0,.869,{sk:.16}],120605:[.686,0,.866,{sk:.0958}],120606:[.68,0,.657,{ic:.12,sk:.0958}],120607:[.711,0,.958,{sk:.192}],120608:[.68,0,.81,{ic:.015,sk:.0958}],120609:[.686,0,.773,{ic:.032,sk:.0958}],120610:[.686,0,.982,{ic:.045,sk:.0639}],120611:[.702,.017,.867,{sk:.0958}],120612:[.686,0,.511,{ic:.062,sk:.128}],120613:[.686,0,.971,{ic:.032,sk:.0639}],120614:[.711,0,.806,{sk:.192}],120615:[.686,0,1.142,{ic:.077,sk:.0958}],120616:[.686,0,.95,{ic:.077,sk:.0958}],120617:[.675,0,.841,{ic:.026,sk:.0958}],120618:[.703,.017,.837,{sk:.0958}],120619:[.68,0,.982,{ic:.044,sk:.0639}],120620:[.686,0,.723,{ic:.124,sk:.0958}],120622:[.686,0,.885,{ic:.017,sk:.0958}],120623:[.675,0,.637,{ic:.135,sk:.0958}],120624:[.703,0,.671,{ic:.131,sk:.0639}],120625:[.686,0,.767,{sk:.0958}],120626:[.686,0,.947,{sk:.0958}],120627:[.686,0,.714,{ic:.076,sk:.0639}],120628:[.703,0,.879,{sk:.0958}],120630:[.452,.008,.761,{sk:.0319}],120631:[.701,.194,.66,{sk:.0958}],120632:[.451,.211,.59,{ic:.027}],120633:[.725,.008,.522,{sk:.0639}],120634:[.461,.017,.529,{sk:.0958}],120635:[.711,.202,.508,{ic:.013,sk:.0958}],120636:[.452,.211,.6,{sk:.0639}],120637:[.702,.008,.562,{sk:.0958}],120638:[.452,.008,.412,{sk:.0639}],120639:[.452,.008,.668],120640:[.694,.013,.671],120641:[.452,.211,.708,{sk:.0319}],120642:[.452,0,.577,{ic:.031,sk:.0319}],120643:[.711,.201,.508,{sk:.128}],120644:[.452,.008,.585,{sk:.0639}],120645:[.444,.008,.682],120646:[.451,.211,.612,{sk:.0958}],120647:[.451,.105,.424,{ic:.033,sk:.0958}],120648:[.444,.008,.686],120649:[.444,.013,.521,{ic:.089,sk:.0319}],120650:[.453,.008,.631,{sk:.0319}],120651:[.452,.216,.747,{sk:.0958}],120652:[.452,.201,.718,{sk:.0639}],120653:[.694,.202,.758,{sk:.128}],120654:[.453,.008,.718],120655:[.71,.017,.628,{ic:.029,sk:.0958}],120656:[.444,.007,.483,{sk:.0639}],120657:[.701,.008,.692,{sk:.0958}],120658:[.434,.006,.667,{ic:.067}],120659:[.694,.202,.712,{sk:.0958}],120660:[.451,.194,.612,{sk:.0958}],120661:[.444,.008,.975],120662:[.694,0,.733],120663:[.694,0,.733],120664:[.691,0,.581],120665:[.694,0,.917],120666:[.691,0,.642],120667:[.694,0,.672],120668:[.694,0,.794],120669:[.716,.022,.856],120670:[.694,0,.331],120671:[.694,0,.764],120672:[.694,0,.672],120673:[.694,0,.978],120674:[.694,0,.794],120675:[.688,0,.733],120676:[.716,.022,.794],120677:[.691,0,.794],120678:[.694,0,.703],120680:[.694,0,.794],120681:[.688,0,.733],120682:[.715,0,.856],120683:[.694,0,.794],120684:[.694,0,.733],120685:[.694,0,.856],120686:[.716,0,.794],120782:[.654,.01,.575],120783:[.655,0,.575],120784:[.654,0,.575],120785:[.655,.011,.575],120786:[.656,0,.575],120787:[.655,.011,.575],120788:[.655,.011,.575],120789:[.676,.011,.575],120790:[.654,.011,.575],120791:[.654,.011,.575],120802:[.678,.022,.5],120803:[.678,0,.5],120804:[.677,0,.5],120805:[.678,.022,.5],120806:[.656,0,.5],120807:[.656,.021,.5],120808:[.677,.022,.5],120809:[.656,.011,.5],120810:[.678,.022,.5],120811:[.677,.022,.5],120812:[.715,.022,.55],120813:[.716,0,.55],120814:[.716,0,.55],120815:[.716,.022,.55],120816:[.694,0,.55],120817:[.694,.022,.55],120818:[.716,.022,.55],120819:[.695,.011,.55],120820:[.715,.022,.55],120821:[.716,.022,.55],120822:[.621,.01,.525],120823:[.622,0,.525],120824:[.622,0,.525],120825:[.622,.011,.525],120826:[.624,0,.525],120827:[.611,.01,.525],120828:[.622,.011,.525],120829:[.627,.01,.525],120830:[.621,.01,.525],120831:[.622,.011,.525]};Object.defineProperty(normal$1,"__esModule",{value:!0});normal$1.normal=void 0;var FontData_js_1$a=FontData,normal_js_1$1=normal;normal$1.normal=(0,FontData_js_1$a.AddCSS)(normal_js_1$1.normal,{163:{f:"MI"},165:{f:"A"},174:{f:"A"},183:{c:"\\22C5"},240:{f:"A"},697:{c:"\\2032"},913:{c:"A"},914:{c:"B"},917:{c:"E"},918:{c:"Z"},919:{c:"H"},921:{c:"I"},922:{c:"K"},924:{c:"M"},925:{c:"N"},927:{c:"O"},929:{c:"P"},932:{c:"T"},935:{c:"X"},8192:{c:""},8193:{c:""},8194:{c:""},8195:{c:""},8196:{c:""},8197:{c:""},8198:{c:""},8201:{c:""},8202:{c:""},8203:{c:""},8204:{c:""},8213:{c:"\\2014"},8214:{c:"\\2225"},8215:{c:"_"},8226:{c:"\\2219"},8243:{c:"\\2032\\2032"},8244:{c:"\\2032\\2032\\2032"},8245:{f:"A"},8246:{c:"\\2035\\2035",f:"A"},8247:{c:"\\2035\\2035\\2035",f:"A"},8254:{c:"\\2C9"},8260:{c:"/"},8279:{c:"\\2032\\2032\\2032\\2032"},8288:{c:""},8289:{c:""},8290:{c:""},8291:{c:""},8292:{c:""},8407:{c:"\\2192",f:"V"},8450:{c:"C",f:"A"},8459:{c:"H",f:"SC"},8460:{c:"H",f:"FR"},8461:{c:"H",f:"A"},8462:{c:"h",f:"I"},8463:{f:"A"},8464:{c:"I",f:"SC"},8465:{c:"I",f:"FR"},8466:{c:"L",f:"SC"},8469:{c:"N",f:"A"},8473:{c:"P",f:"A"},8474:{c:"Q",f:"A"},8475:{c:"R",f:"SC"},8476:{c:"R",f:"FR"},8477:{c:"R",f:"A"},8484:{c:"Z",f:"A"},8486:{c:"\\3A9"},8487:{f:"A"},8488:{c:"Z",f:"FR"},8492:{c:"B",f:"SC"},8493:{c:"C",f:"FR"},8496:{c:"E",f:"SC"},8497:{c:"F",f:"SC"},8498:{f:"A"},8499:{c:"M",f:"SC"},8502:{f:"A"},8503:{f:"A"},8504:{f:"A"},8513:{f:"A"},8602:{f:"A"},8603:{f:"A"},8606:{f:"A"},8608:{f:"A"},8610:{f:"A"},8611:{f:"A"},8619:{f:"A"},8620:{f:"A"},8621:{f:"A"},8622:{f:"A"},8624:{f:"A"},8625:{f:"A"},8630:{f:"A"},8631:{f:"A"},8634:{f:"A"},8635:{f:"A"},8638:{f:"A"},8639:{f:"A"},8642:{f:"A"},8643:{f:"A"},8644:{f:"A"},8646:{f:"A"},8647:{f:"A"},8648:{f:"A"},8649:{f:"A"},8650:{f:"A"},8651:{f:"A"},8653:{f:"A"},8654:{f:"A"},8655:{f:"A"},8666:{f:"A"},8667:{f:"A"},8669:{f:"A"},8672:{f:"A"},8674:{f:"A"},8705:{f:"A"},8708:{c:"\\2203\\338"},8710:{c:"\\394"},8716:{c:"\\220B\\338"},8717:{f:"A"},8719:{f:"S1"},8720:{f:"S1"},8721:{f:"S1"},8724:{f:"A"},8737:{f:"A"},8738:{f:"A"},8740:{f:"A"},8742:{f:"A"},8748:{f:"S1"},8749:{f:"S1"},8750:{f:"S1"},8756:{f:"A"},8757:{f:"A"},8765:{f:"A"},8769:{f:"A"},8770:{f:"A"},8772:{c:"\\2243\\338"},8775:{c:"\\2246",f:"A"},8777:{c:"\\2248\\338"},8778:{f:"A"},8782:{f:"A"},8783:{f:"A"},8785:{f:"A"},8786:{f:"A"},8787:{f:"A"},8790:{f:"A"},8791:{f:"A"},8796:{f:"A"},8802:{c:"\\2261\\338"},8806:{f:"A"},8807:{f:"A"},8808:{f:"A"},8809:{f:"A"},8812:{f:"A"},8813:{c:"\\224D\\338"},8814:{f:"A"},8815:{f:"A"},8816:{f:"A"},8817:{f:"A"},8818:{f:"A"},8819:{f:"A"},8820:{c:"\\2272\\338"},8821:{c:"\\2273\\338"},8822:{f:"A"},8823:{f:"A"},8824:{c:"\\2276\\338"},8825:{c:"\\2277\\338"},8828:{f:"A"},8829:{f:"A"},8830:{f:"A"},8831:{f:"A"},8832:{f:"A"},8833:{f:"A"},8836:{c:"\\2282\\338"},8837:{c:"\\2283\\338"},8840:{f:"A"},8841:{f:"A"},8842:{f:"A"},8843:{f:"A"},8847:{f:"A"},8848:{f:"A"},8858:{f:"A"},8859:{f:"A"},8861:{f:"A"},8862:{f:"A"},8863:{f:"A"},8864:{f:"A"},8865:{f:"A"},8873:{f:"A"},8874:{f:"A"},8876:{f:"A"},8877:{f:"A"},8878:{f:"A"},8879:{f:"A"},8882:{f:"A"},8883:{f:"A"},8884:{f:"A"},8885:{f:"A"},8888:{f:"A"},8890:{f:"A"},8891:{f:"A"},8892:{f:"A"},8896:{f:"S1"},8897:{f:"S1"},8898:{f:"S1"},8899:{f:"S1"},8903:{f:"A"},8905:{f:"A"},8906:{f:"A"},8907:{f:"A"},8908:{f:"A"},8909:{f:"A"},8910:{f:"A"},8911:{f:"A"},8912:{f:"A"},8913:{f:"A"},8914:{f:"A"},8915:{f:"A"},8916:{f:"A"},8918:{f:"A"},8919:{f:"A"},8920:{f:"A"},8921:{f:"A"},8922:{f:"A"},8923:{f:"A"},8926:{f:"A"},8927:{f:"A"},8928:{f:"A"},8929:{f:"A"},8930:{c:"\\2291\\338"},8931:{c:"\\2292\\338"},8934:{f:"A"},8935:{f:"A"},8936:{f:"A"},8937:{f:"A"},8938:{f:"A"},8939:{f:"A"},8940:{f:"A"},8941:{f:"A"},8965:{c:"\\22BC",f:"A"},8966:{c:"\\2A5E",f:"A"},8988:{c:"\\250C",f:"A"},8989:{c:"\\2510",f:"A"},8990:{c:"\\2514",f:"A"},8991:{c:"\\2518",f:"A"},9001:{c:"\\27E8"},9002:{c:"\\27E9"},9168:{f:"S1"},9416:{f:"A"},9484:{f:"A"},9488:{f:"A"},9492:{f:"A"},9496:{f:"A"},9585:{f:"A"},9586:{f:"A"},9632:{f:"A"},9633:{f:"A"},9642:{c:"\\25A0",f:"A"},9650:{f:"A"},9652:{c:"\\25B2",f:"A"},9653:{c:"\\25B3"},9654:{f:"A"},9656:{c:"\\25B6",f:"A"},9660:{f:"A"},9662:{c:"\\25BC",f:"A"},9663:{c:"\\25BD"},9664:{f:"A"},9666:{c:"\\25C0",f:"A"},9674:{f:"A"},9723:{c:"\\25A1",f:"A"},9724:{c:"\\25A0",f:"A"},9733:{f:"A"},10003:{f:"A"},10016:{f:"A"},10072:{c:"\\2223"},10731:{f:"A"},10744:{c:"/",f:"I"},10752:{f:"S1"},10753:{f:"S1"},10754:{f:"S1"},10756:{f:"S1"},10758:{f:"S1"},10764:{c:"\\222C\\222C",f:"S1"},10799:{c:"\\D7"},10846:{f:"A"},10877:{f:"A"},10878:{f:"A"},10885:{f:"A"},10886:{f:"A"},10887:{f:"A"},10888:{f:"A"},10889:{f:"A"},10890:{f:"A"},10891:{f:"A"},10892:{f:"A"},10901:{f:"A"},10902:{f:"A"},10933:{f:"A"},10934:{f:"A"},10935:{f:"A"},10936:{f:"A"},10937:{f:"A"},10938:{f:"A"},10949:{f:"A"},10950:{f:"A"},10955:{f:"A"},10956:{f:"A"},12296:{c:"\\27E8"},12297:{c:"\\27E9"},57350:{f:"A"},57351:{f:"A"},57352:{f:"A"},57353:{f:"A"},57356:{f:"A"},57357:{f:"A"},57358:{f:"A"},57359:{f:"A"},57360:{f:"A"},57361:{f:"A"},57366:{f:"A"},57367:{f:"A"},57368:{f:"A"},57369:{f:"A"},57370:{f:"A"},57371:{f:"A"},119808:{c:"A",f:"B"},119809:{c:"B",f:"B"},119810:{c:"C",f:"B"},119811:{c:"D",f:"B"},119812:{c:"E",f:"B"},119813:{c:"F",f:"B"},119814:{c:"G",f:"B"},119815:{c:"H",f:"B"},119816:{c:"I",f:"B"},119817:{c:"J",f:"B"},119818:{c:"K",f:"B"},119819:{c:"L",f:"B"},119820:{c:"M",f:"B"},119821:{c:"N",f:"B"},119822:{c:"O",f:"B"},119823:{c:"P",f:"B"},119824:{c:"Q",f:"B"},119825:{c:"R",f:"B"},119826:{c:"S",f:"B"},119827:{c:"T",f:"B"},119828:{c:"U",f:"B"},119829:{c:"V",f:"B"},119830:{c:"W",f:"B"},119831:{c:"X",f:"B"},119832:{c:"Y",f:"B"},119833:{c:"Z",f:"B"},119834:{c:"a",f:"B"},119835:{c:"b",f:"B"},119836:{c:"c",f:"B"},119837:{c:"d",f:"B"},119838:{c:"e",f:"B"},119839:{c:"f",f:"B"},119840:{c:"g",f:"B"},119841:{c:"h",f:"B"},119842:{c:"i",f:"B"},119843:{c:"j",f:"B"},119844:{c:"k",f:"B"},119845:{c:"l",f:"B"},119846:{c:"m",f:"B"},119847:{c:"n",f:"B"},119848:{c:"o",f:"B"},119849:{c:"p",f:"B"},119850:{c:"q",f:"B"},119851:{c:"r",f:"B"},119852:{c:"s",f:"B"},119853:{c:"t",f:"B"},119854:{c:"u",f:"B"},119855:{c:"v",f:"B"},119856:{c:"w",f:"B"},119857:{c:"x",f:"B"},119858:{c:"y",f:"B"},119859:{c:"z",f:"B"},119860:{c:"A",f:"I"},119861:{c:"B",f:"I"},119862:{c:"C",f:"I"},119863:{c:"D",f:"I"},119864:{c:"E",f:"I"},119865:{c:"F",f:"I"},119866:{c:"G",f:"I"},119867:{c:"H",f:"I"},119868:{c:"I",f:"I"},119869:{c:"J",f:"I"},119870:{c:"K",f:"I"},119871:{c:"L",f:"I"},119872:{c:"M",f:"I"},119873:{c:"N",f:"I"},119874:{c:"O",f:"I"},119875:{c:"P",f:"I"},119876:{c:"Q",f:"I"},119877:{c:"R",f:"I"},119878:{c:"S",f:"I"},119879:{c:"T",f:"I"},119880:{c:"U",f:"I"},119881:{c:"V",f:"I"},119882:{c:"W",f:"I"},119883:{c:"X",f:"I"},119884:{c:"Y",f:"I"},119885:{c:"Z",f:"I"},119886:{c:"a",f:"I"},119887:{c:"b",f:"I"},119888:{c:"c",f:"I"},119889:{c:"d",f:"I"},119890:{c:"e",f:"I"},119891:{c:"f",f:"I"},119892:{c:"g",f:"I"},119894:{c:"i",f:"I"},119895:{c:"j",f:"I"},119896:{c:"k",f:"I"},119897:{c:"l",f:"I"},119898:{c:"m",f:"I"},119899:{c:"n",f:"I"},119900:{c:"o",f:"I"},119901:{c:"p",f:"I"},119902:{c:"q",f:"I"},119903:{c:"r",f:"I"},119904:{c:"s",f:"I"},119905:{c:"t",f:"I"},119906:{c:"u",f:"I"},119907:{c:"v",f:"I"},119908:{c:"w",f:"I"},119909:{c:"x",f:"I"},119910:{c:"y",f:"I"},119911:{c:"z",f:"I"},119912:{c:"A",f:"BI"},119913:{c:"B",f:"BI"},119914:{c:"C",f:"BI"},119915:{c:"D",f:"BI"},119916:{c:"E",f:"BI"},119917:{c:"F",f:"BI"},119918:{c:"G",f:"BI"},119919:{c:"H",f:"BI"},119920:{c:"I",f:"BI"},119921:{c:"J",f:"BI"},119922:{c:"K",f:"BI"},119923:{c:"L",f:"BI"},119924:{c:"M",f:"BI"},119925:{c:"N",f:"BI"},119926:{c:"O",f:"BI"},119927:{c:"P",f:"BI"},119928:{c:"Q",f:"BI"},119929:{c:"R",f:"BI"},119930:{c:"S",f:"BI"},119931:{c:"T",f:"BI"},119932:{c:"U",f:"BI"},119933:{c:"V",f:"BI"},119934:{c:"W",f:"BI"},119935:{c:"X",f:"BI"},119936:{c:"Y",f:"BI"},119937:{c:"Z",f:"BI"},119938:{c:"a",f:"BI"},119939:{c:"b",f:"BI"},119940:{c:"c",f:"BI"},119941:{c:"d",f:"BI"},119942:{c:"e",f:"BI"},119943:{c:"f",f:"BI"},119944:{c:"g",f:"BI"},119945:{c:"h",f:"BI"},119946:{c:"i",f:"BI"},119947:{c:"j",f:"BI"},119948:{c:"k",f:"BI"},119949:{c:"l",f:"BI"},119950:{c:"m",f:"BI"},119951:{c:"n",f:"BI"},119952:{c:"o",f:"BI"},119953:{c:"p",f:"BI"},119954:{c:"q",f:"BI"},119955:{c:"r",f:"BI"},119956:{c:"s",f:"BI"},119957:{c:"t",f:"BI"},119958:{c:"u",f:"BI"},119959:{c:"v",f:"BI"},119960:{c:"w",f:"BI"},119961:{c:"x",f:"BI"},119962:{c:"y",f:"BI"},119963:{c:"z",f:"BI"},119964:{c:"A",f:"SC"},119966:{c:"C",f:"SC"},119967:{c:"D",f:"SC"},119970:{c:"G",f:"SC"},119973:{c:"J",f:"SC"},119974:{c:"K",f:"SC"},119977:{c:"N",f:"SC"},119978:{c:"O",f:"SC"},119979:{c:"P",f:"SC"},119980:{c:"Q",f:"SC"},119982:{c:"S",f:"SC"},119983:{c:"T",f:"SC"},119984:{c:"U",f:"SC"},119985:{c:"V",f:"SC"},119986:{c:"W",f:"SC"},119987:{c:"X",f:"SC"},119988:{c:"Y",f:"SC"},119989:{c:"Z",f:"SC"},120068:{c:"A",f:"FR"},120069:{c:"B",f:"FR"},120071:{c:"D",f:"FR"},120072:{c:"E",f:"FR"},120073:{c:"F",f:"FR"},120074:{c:"G",f:"FR"},120077:{c:"J",f:"FR"},120078:{c:"K",f:"FR"},120079:{c:"L",f:"FR"},120080:{c:"M",f:"FR"},120081:{c:"N",f:"FR"},120082:{c:"O",f:"FR"},120083:{c:"P",f:"FR"},120084:{c:"Q",f:"FR"},120086:{c:"S",f:"FR"},120087:{c:"T",f:"FR"},120088:{c:"U",f:"FR"},120089:{c:"V",f:"FR"},120090:{c:"W",f:"FR"},120091:{c:"X",f:"FR"},120092:{c:"Y",f:"FR"},120094:{c:"a",f:"FR"},120095:{c:"b",f:"FR"},120096:{c:"c",f:"FR"},120097:{c:"d",f:"FR"},120098:{c:"e",f:"FR"},120099:{c:"f",f:"FR"},120100:{c:"g",f:"FR"},120101:{c:"h",f:"FR"},120102:{c:"i",f:"FR"},120103:{c:"j",f:"FR"},120104:{c:"k",f:"FR"},120105:{c:"l",f:"FR"},120106:{c:"m",f:"FR"},120107:{c:"n",f:"FR"},120108:{c:"o",f:"FR"},120109:{c:"p",f:"FR"},120110:{c:"q",f:"FR"},120111:{c:"r",f:"FR"},120112:{c:"s",f:"FR"},120113:{c:"t",f:"FR"},120114:{c:"u",f:"FR"},120115:{c:"v",f:"FR"},120116:{c:"w",f:"FR"},120117:{c:"x",f:"FR"},120118:{c:"y",f:"FR"},120119:{c:"z",f:"FR"},120120:{c:"A",f:"A"},120121:{c:"B",f:"A"},120123:{c:"D",f:"A"},120124:{c:"E",f:"A"},120125:{c:"F",f:"A"},120126:{c:"G",f:"A"},120128:{c:"I",f:"A"},120129:{c:"J",f:"A"},120130:{c:"K",f:"A"},120131:{c:"L",f:"A"},120132:{c:"M",f:"A"},120134:{c:"O",f:"A"},120138:{c:"S",f:"A"},120139:{c:"T",f:"A"},120140:{c:"U",f:"A"},120141:{c:"V",f:"A"},120142:{c:"W",f:"A"},120143:{c:"X",f:"A"},120144:{c:"Y",f:"A"},120172:{c:"A",f:"FRB"},120173:{c:"B",f:"FRB"},120174:{c:"C",f:"FRB"},120175:{c:"D",f:"FRB"},120176:{c:"E",f:"FRB"},120177:{c:"F",f:"FRB"},120178:{c:"G",f:"FRB"},120179:{c:"H",f:"FRB"},120180:{c:"I",f:"FRB"},120181:{c:"J",f:"FRB"},120182:{c:"K",f:"FRB"},120183:{c:"L",f:"FRB"},120184:{c:"M",f:"FRB"},120185:{c:"N",f:"FRB"},120186:{c:"O",f:"FRB"},120187:{c:"P",f:"FRB"},120188:{c:"Q",f:"FRB"},120189:{c:"R",f:"FRB"},120190:{c:"S",f:"FRB"},120191:{c:"T",f:"FRB"},120192:{c:"U",f:"FRB"},120193:{c:"V",f:"FRB"},120194:{c:"W",f:"FRB"},120195:{c:"X",f:"FRB"},120196:{c:"Y",f:"FRB"},120197:{c:"Z",f:"FRB"},120198:{c:"a",f:"FRB"},120199:{c:"b",f:"FRB"},120200:{c:"c",f:"FRB"},120201:{c:"d",f:"FRB"},120202:{c:"e",f:"FRB"},120203:{c:"f",f:"FRB"},120204:{c:"g",f:"FRB"},120205:{c:"h",f:"FRB"},120206:{c:"i",f:"FRB"},120207:{c:"j",f:"FRB"},120208:{c:"k",f:"FRB"},120209:{c:"l",f:"FRB"},120210:{c:"m",f:"FRB"},120211:{c:"n",f:"FRB"},120212:{c:"o",f:"FRB"},120213:{c:"p",f:"FRB"},120214:{c:"q",f:"FRB"},120215:{c:"r",f:"FRB"},120216:{c:"s",f:"FRB"},120217:{c:"t",f:"FRB"},120218:{c:"u",f:"FRB"},120219:{c:"v",f:"FRB"},120220:{c:"w",f:"FRB"},120221:{c:"x",f:"FRB"},120222:{c:"y",f:"FRB"},120223:{c:"z",f:"FRB"},120224:{c:"A",f:"SS"},120225:{c:"B",f:"SS"},120226:{c:"C",f:"SS"},120227:{c:"D",f:"SS"},120228:{c:"E",f:"SS"},120229:{c:"F",f:"SS"},120230:{c:"G",f:"SS"},120231:{c:"H",f:"SS"},120232:{c:"I",f:"SS"},120233:{c:"J",f:"SS"},120234:{c:"K",f:"SS"},120235:{c:"L",f:"SS"},120236:{c:"M",f:"SS"},120237:{c:"N",f:"SS"},120238:{c:"O",f:"SS"},120239:{c:"P",f:"SS"},120240:{c:"Q",f:"SS"},120241:{c:"R",f:"SS"},120242:{c:"S",f:"SS"},120243:{c:"T",f:"SS"},120244:{c:"U",f:"SS"},120245:{c:"V",f:"SS"},120246:{c:"W",f:"SS"},120247:{c:"X",f:"SS"},120248:{c:"Y",f:"SS"},120249:{c:"Z",f:"SS"},120250:{c:"a",f:"SS"},120251:{c:"b",f:"SS"},120252:{c:"c",f:"SS"},120253:{c:"d",f:"SS"},120254:{c:"e",f:"SS"},120255:{c:"f",f:"SS"},120256:{c:"g",f:"SS"},120257:{c:"h",f:"SS"},120258:{c:"i",f:"SS"},120259:{c:"j",f:"SS"},120260:{c:"k",f:"SS"},120261:{c:"l",f:"SS"},120262:{c:"m",f:"SS"},120263:{c:"n",f:"SS"},120264:{c:"o",f:"SS"},120265:{c:"p",f:"SS"},120266:{c:"q",f:"SS"},120267:{c:"r",f:"SS"},120268:{c:"s",f:"SS"},120269:{c:"t",f:"SS"},120270:{c:"u",f:"SS"},120271:{c:"v",f:"SS"},120272:{c:"w",f:"SS"},120273:{c:"x",f:"SS"},120274:{c:"y",f:"SS"},120275:{c:"z",f:"SS"},120276:{c:"A",f:"SSB"},120277:{c:"B",f:"SSB"},120278:{c:"C",f:"SSB"},120279:{c:"D",f:"SSB"},120280:{c:"E",f:"SSB"},120281:{c:"F",f:"SSB"},120282:{c:"G",f:"SSB"},120283:{c:"H",f:"SSB"},120284:{c:"I",f:"SSB"},120285:{c:"J",f:"SSB"},120286:{c:"K",f:"SSB"},120287:{c:"L",f:"SSB"},120288:{c:"M",f:"SSB"},120289:{c:"N",f:"SSB"},120290:{c:"O",f:"SSB"},120291:{c:"P",f:"SSB"},120292:{c:"Q",f:"SSB"},120293:{c:"R",f:"SSB"},120294:{c:"S",f:"SSB"},120295:{c:"T",f:"SSB"},120296:{c:"U",f:"SSB"},120297:{c:"V",f:"SSB"},120298:{c:"W",f:"SSB"},120299:{c:"X",f:"SSB"},120300:{c:"Y",f:"SSB"},120301:{c:"Z",f:"SSB"},120302:{c:"a",f:"SSB"},120303:{c:"b",f:"SSB"},120304:{c:"c",f:"SSB"},120305:{c:"d",f:"SSB"},120306:{c:"e",f:"SSB"},120307:{c:"f",f:"SSB"},120308:{c:"g",f:"SSB"},120309:{c:"h",f:"SSB"},120310:{c:"i",f:"SSB"},120311:{c:"j",f:"SSB"},120312:{c:"k",f:"SSB"},120313:{c:"l",f:"SSB"},120314:{c:"m",f:"SSB"},120315:{c:"n",f:"SSB"},120316:{c:"o",f:"SSB"},120317:{c:"p",f:"SSB"},120318:{c:"q",f:"SSB"},120319:{c:"r",f:"SSB"},120320:{c:"s",f:"SSB"},120321:{c:"t",f:"SSB"},120322:{c:"u",f:"SSB"},120323:{c:"v",f:"SSB"},120324:{c:"w",f:"SSB"},120325:{c:"x",f:"SSB"},120326:{c:"y",f:"SSB"},120327:{c:"z",f:"SSB"},120328:{c:"A",f:"SSI"},120329:{c:"B",f:"SSI"},120330:{c:"C",f:"SSI"},120331:{c:"D",f:"SSI"},120332:{c:"E",f:"SSI"},120333:{c:"F",f:"SSI"},120334:{c:"G",f:"SSI"},120335:{c:"H",f:"SSI"},120336:{c:"I",f:"SSI"},120337:{c:"J",f:"SSI"},120338:{c:"K",f:"SSI"},120339:{c:"L",f:"SSI"},120340:{c:"M",f:"SSI"},120341:{c:"N",f:"SSI"},120342:{c:"O",f:"SSI"},120343:{c:"P",f:"SSI"},120344:{c:"Q",f:"SSI"},120345:{c:"R",f:"SSI"},120346:{c:"S",f:"SSI"},120347:{c:"T",f:"SSI"},120348:{c:"U",f:"SSI"},120349:{c:"V",f:"SSI"},120350:{c:"W",f:"SSI"},120351:{c:"X",f:"SSI"},120352:{c:"Y",f:"SSI"},120353:{c:"Z",f:"SSI"},120354:{c:"a",f:"SSI"},120355:{c:"b",f:"SSI"},120356:{c:"c",f:"SSI"},120357:{c:"d",f:"SSI"},120358:{c:"e",f:"SSI"},120359:{c:"f",f:"SSI"},120360:{c:"g",f:"SSI"},120361:{c:"h",f:"SSI"},120362:{c:"i",f:"SSI"},120363:{c:"j",f:"SSI"},120364:{c:"k",f:"SSI"},120365:{c:"l",f:"SSI"},120366:{c:"m",f:"SSI"},120367:{c:"n",f:"SSI"},120368:{c:"o",f:"SSI"},120369:{c:"p",f:"SSI"},120370:{c:"q",f:"SSI"},120371:{c:"r",f:"SSI"},120372:{c:"s",f:"SSI"},120373:{c:"t",f:"SSI"},120374:{c:"u",f:"SSI"},120375:{c:"v",f:"SSI"},120376:{c:"w",f:"SSI"},120377:{c:"x",f:"SSI"},120378:{c:"y",f:"SSI"},120379:{c:"z",f:"SSI"},120432:{c:"A",f:"T"},120433:{c:"B",f:"T"},120434:{c:"C",f:"T"},120435:{c:"D",f:"T"},120436:{c:"E",f:"T"},120437:{c:"F",f:"T"},120438:{c:"G",f:"T"},120439:{c:"H",f:"T"},120440:{c:"I",f:"T"},120441:{c:"J",f:"T"},120442:{c:"K",f:"T"},120443:{c:"L",f:"T"},120444:{c:"M",f:"T"},120445:{c:"N",f:"T"},120446:{c:"O",f:"T"},120447:{c:"P",f:"T"},120448:{c:"Q",f:"T"},120449:{c:"R",f:"T"},120450:{c:"S",f:"T"},120451:{c:"T",f:"T"},120452:{c:"U",f:"T"},120453:{c:"V",f:"T"},120454:{c:"W",f:"T"},120455:{c:"X",f:"T"},120456:{c:"Y",f:"T"},120457:{c:"Z",f:"T"},120458:{c:"a",f:"T"},120459:{c:"b",f:"T"},120460:{c:"c",f:"T"},120461:{c:"d",f:"T"},120462:{c:"e",f:"T"},120463:{c:"f",f:"T"},120464:{c:"g",f:"T"},120465:{c:"h",f:"T"},120466:{c:"i",f:"T"},120467:{c:"j",f:"T"},120468:{c:"k",f:"T"},120469:{c:"l",f:"T"},120470:{c:"m",f:"T"},120471:{c:"n",f:"T"},120472:{c:"o",f:"T"},120473:{c:"p",f:"T"},120474:{c:"q",f:"T"},120475:{c:"r",f:"T"},120476:{c:"s",f:"T"},120477:{c:"t",f:"T"},120478:{c:"u",f:"T"},120479:{c:"v",f:"T"},120480:{c:"w",f:"T"},120481:{c:"x",f:"T"},120482:{c:"y",f:"T"},120483:{c:"z",f:"T"},120488:{c:"A",f:"B"},120489:{c:"B",f:"B"},120490:{c:"\\393",f:"B"},120491:{c:"\\394",f:"B"},120492:{c:"E",f:"B"},120493:{c:"Z",f:"B"},120494:{c:"H",f:"B"},120495:{c:"\\398",f:"B"},120496:{c:"I",f:"B"},120497:{c:"K",f:"B"},120498:{c:"\\39B",f:"B"},120499:{c:"M",f:"B"},120500:{c:"N",f:"B"},120501:{c:"\\39E",f:"B"},120502:{c:"O",f:"B"},120503:{c:"\\3A0",f:"B"},120504:{c:"P",f:"B"},120506:{c:"\\3A3",f:"B"},120507:{c:"T",f:"B"},120508:{c:"\\3A5",f:"B"},120509:{c:"\\3A6",f:"B"},120510:{c:"X",f:"B"},120511:{c:"\\3A8",f:"B"},120512:{c:"\\3A9",f:"B"},120513:{c:"\\2207",f:"B"},120546:{c:"A",f:"I"},120547:{c:"B",f:"I"},120548:{c:"\\393",f:"I"},120549:{c:"\\394",f:"I"},120550:{c:"E",f:"I"},120551:{c:"Z",f:"I"},120552:{c:"H",f:"I"},120553:{c:"\\398",f:"I"},120554:{c:"I",f:"I"},120555:{c:"K",f:"I"},120556:{c:"\\39B",f:"I"},120557:{c:"M",f:"I"},120558:{c:"N",f:"I"},120559:{c:"\\39E",f:"I"},120560:{c:"O",f:"I"},120561:{c:"\\3A0",f:"I"},120562:{c:"P",f:"I"},120564:{c:"\\3A3",f:"I"},120565:{c:"T",f:"I"},120566:{c:"\\3A5",f:"I"},120567:{c:"\\3A6",f:"I"},120568:{c:"X",f:"I"},120569:{c:"\\3A8",f:"I"},120570:{c:"\\3A9",f:"I"},120572:{c:"\\3B1",f:"I"},120573:{c:"\\3B2",f:"I"},120574:{c:"\\3B3",f:"I"},120575:{c:"\\3B4",f:"I"},120576:{c:"\\3B5",f:"I"},120577:{c:"\\3B6",f:"I"},120578:{c:"\\3B7",f:"I"},120579:{c:"\\3B8",f:"I"},120580:{c:"\\3B9",f:"I"},120581:{c:"\\3BA",f:"I"},120582:{c:"\\3BB",f:"I"},120583:{c:"\\3BC",f:"I"},120584:{c:"\\3BD",f:"I"},120585:{c:"\\3BE",f:"I"},120586:{c:"\\3BF",f:"I"},120587:{c:"\\3C0",f:"I"},120588:{c:"\\3C1",f:"I"},120589:{c:"\\3C2",f:"I"},120590:{c:"\\3C3",f:"I"},120591:{c:"\\3C4",f:"I"},120592:{c:"\\3C5",f:"I"},120593:{c:"\\3C6",f:"I"},120594:{c:"\\3C7",f:"I"},120595:{c:"\\3C8",f:"I"},120596:{c:"\\3C9",f:"I"},120597:{c:"\\2202"},120598:{c:"\\3F5",f:"I"},120599:{c:"\\3D1",f:"I"},120600:{c:"\\E009",f:"A"},120601:{c:"\\3D5",f:"I"},120602:{c:"\\3F1",f:"I"},120603:{c:"\\3D6",f:"I"},120604:{c:"A",f:"BI"},120605:{c:"B",f:"BI"},120606:{c:"\\393",f:"BI"},120607:{c:"\\394",f:"BI"},120608:{c:"E",f:"BI"},120609:{c:"Z",f:"BI"},120610:{c:"H",f:"BI"},120611:{c:"\\398",f:"BI"},120612:{c:"I",f:"BI"},120613:{c:"K",f:"BI"},120614:{c:"\\39B",f:"BI"},120615:{c:"M",f:"BI"},120616:{c:"N",f:"BI"},120617:{c:"\\39E",f:"BI"},120618:{c:"O",f:"BI"},120619:{c:"\\3A0",f:"BI"},120620:{c:"P",f:"BI"},120622:{c:"\\3A3",f:"BI"},120623:{c:"T",f:"BI"},120624:{c:"\\3A5",f:"BI"},120625:{c:"\\3A6",f:"BI"},120626:{c:"X",f:"BI"},120627:{c:"\\3A8",f:"BI"},120628:{c:"\\3A9",f:"BI"},120630:{c:"\\3B1",f:"BI"},120631:{c:"\\3B2",f:"BI"},120632:{c:"\\3B3",f:"BI"},120633:{c:"\\3B4",f:"BI"},120634:{c:"\\3B5",f:"BI"},120635:{c:"\\3B6",f:"BI"},120636:{c:"\\3B7",f:"BI"},120637:{c:"\\3B8",f:"BI"},120638:{c:"\\3B9",f:"BI"},120639:{c:"\\3BA",f:"BI"},120640:{c:"\\3BB",f:"BI"},120641:{c:"\\3BC",f:"BI"},120642:{c:"\\3BD",f:"BI"},120643:{c:"\\3BE",f:"BI"},120644:{c:"\\3BF",f:"BI"},120645:{c:"\\3C0",f:"BI"},120646:{c:"\\3C1",f:"BI"},120647:{c:"\\3C2",f:"BI"},120648:{c:"\\3C3",f:"BI"},120649:{c:"\\3C4",f:"BI"},120650:{c:"\\3C5",f:"BI"},120651:{c:"\\3C6",f:"BI"},120652:{c:"\\3C7",f:"BI"},120653:{c:"\\3C8",f:"BI"},120654:{c:"\\3C9",f:"BI"},120655:{c:"\\2202",f:"B"},120656:{c:"\\3F5",f:"BI"},120657:{c:"\\3D1",f:"BI"},120658:{c:"\\E009",f:"A"},120659:{c:"\\3D5",f:"BI"},120660:{c:"\\3F1",f:"BI"},120661:{c:"\\3D6",f:"BI"},120662:{c:"A",f:"SSB"},120663:{c:"B",f:"SSB"},120664:{c:"\\393",f:"SSB"},120665:{c:"\\394",f:"SSB"},120666:{c:"E",f:"SSB"},120667:{c:"Z",f:"SSB"},120668:{c:"H",f:"SSB"},120669:{c:"\\398",f:"SSB"},120670:{c:"I",f:"SSB"},120671:{c:"K",f:"SSB"},120672:{c:"\\39B",f:"SSB"},120673:{c:"M",f:"SSB"},120674:{c:"N",f:"SSB"},120675:{c:"\\39E",f:"SSB"},120676:{c:"O",f:"SSB"},120677:{c:"\\3A0",f:"SSB"},120678:{c:"P",f:"SSB"},120680:{c:"\\3A3",f:"SSB"},120681:{c:"T",f:"SSB"},120682:{c:"\\3A5",f:"SSB"},120683:{c:"\\3A6",f:"SSB"},120684:{c:"X",f:"SSB"},120685:{c:"\\3A8",f:"SSB"},120686:{c:"\\3A9",f:"SSB"},120782:{c:"0",f:"B"},120783:{c:"1",f:"B"},120784:{c:"2",f:"B"},120785:{c:"3",f:"B"},120786:{c:"4",f:"B"},120787:{c:"5",f:"B"},120788:{c:"6",f:"B"},120789:{c:"7",f:"B"},120790:{c:"8",f:"B"},120791:{c:"9",f:"B"},120802:{c:"0",f:"SS"},120803:{c:"1",f:"SS"},120804:{c:"2",f:"SS"},120805:{c:"3",f:"SS"},120806:{c:"4",f:"SS"},120807:{c:"5",f:"SS"},120808:{c:"6",f:"SS"},120809:{c:"7",f:"SS"},120810:{c:"8",f:"SS"},120811:{c:"9",f:"SS"},120812:{c:"0",f:"SSB"},120813:{c:"1",f:"SSB"},120814:{c:"2",f:"SSB"},120815:{c:"3",f:"SSB"},120816:{c:"4",f:"SSB"},120817:{c:"5",f:"SSB"},120818:{c:"6",f:"SSB"},120819:{c:"7",f:"SSB"},120820:{c:"8",f:"SSB"},120821:{c:"9",f:"SSB"},120822:{c:"0",f:"T"},120823:{c:"1",f:"T"},120824:{c:"2",f:"T"},120825:{c:"3",f:"T"},120826:{c:"4",f:"T"},120827:{c:"5",f:"T"},120828:{c:"6",f:"T"},120829:{c:"7",f:"T"},120830:{c:"8",f:"T"},120831:{c:"9",f:"T"}});var sansSerifBoldItalic$1={},sansSerifBoldItalic={};Object.defineProperty(sansSerifBoldItalic,"__esModule",{value:!0});sansSerifBoldItalic.sansSerifBoldItalic=void 0;sansSerifBoldItalic.sansSerifBoldItalic={305:[.458,0,.256],567:[.458,.205,.286]};Object.defineProperty(sansSerifBoldItalic$1,"__esModule",{value:!0});sansSerifBoldItalic$1.sansSerifBoldItalic=void 0;var FontData_js_1$9=FontData,sans_serif_bold_italic_js_1$1=sansSerifBoldItalic;sansSerifBoldItalic$1.sansSerifBoldItalic=(0,FontData_js_1$9.AddCSS)(sans_serif_bold_italic_js_1$1.sansSerifBoldItalic,{305:{f:"SSB"},567:{f:"SSB"}});var sansSerifBold$1={},sansSerifBold={};Object.defineProperty(sansSerifBold,"__esModule",{value:!0});sansSerifBold.sansSerifBold=void 0;sansSerifBold.sansSerifBold={33:[.694,0,.367],34:[.694,-.442,.558],35:[.694,.193,.917],36:[.75,.056,.55],37:[.75,.056,1.029],38:[.716,.022,.831],39:[.694,-.442,.306],40:[.75,.249,.428],41:[.75,.25,.428],42:[.75,-.293,.55],43:[.617,.116,.856],44:[.146,.106,.306],45:[.273,-.186,.367],46:[.146,0,.306],47:[.75,.249,.55],58:[.458,0,.306],59:[.458,.106,.306],61:[.407,-.094,.856],63:[.705,0,.519],64:[.704,.011,.733],91:[.75,.25,.343],93:[.75,.25,.343],94:[.694,-.537,.55],95:[-.023,.11,.55],126:[.344,-.198,.55],305:[.458,0,.256],567:[.458,.205,.286],768:[.694,-.537,0],769:[.694,-.537,0],770:[.694,-.537,0],771:[.694,-.548,0],772:[.66,-.56,0],774:[.694,-.552,0],775:[.695,-.596,0],776:[.695,-.595,0],778:[.694,-.538,0],779:[.694,-.537,0],780:[.657,-.5,0],8211:[.327,-.24,.55],8212:[.327,-.24,1.1],8213:[.327,-.24,1.1],8215:[-.023,.11,.55],8216:[.694,-.443,.306],8217:[.694,-.442,.306],8220:[.694,-.443,.558],8221:[.694,-.442,.558],8260:[.75,.249,.55],8710:[.694,0,.917]};Object.defineProperty(sansSerifBold$1,"__esModule",{value:!0});sansSerifBold$1.sansSerifBold=void 0;var FontData_js_1$8=FontData,sans_serif_bold_js_1$1=sansSerifBold;sansSerifBold$1.sansSerifBold=(0,FontData_js_1$8.AddCSS)(sans_serif_bold_js_1$1.sansSerifBold,{8213:{c:"\\2014"},8215:{c:"_"},8260:{c:"/"},8710:{c:"\\394"}});var sansSerifItalic$1={},sansSerifItalic={};Object.defineProperty(sansSerifItalic,"__esModule",{value:!0});sansSerifItalic.sansSerifItalic=void 0;sansSerifItalic.sansSerifItalic={33:[.694,0,.319,{ic:.036}],34:[.694,-.471,.5],35:[.694,.194,.833,{ic:.018}],36:[.75,.056,.5,{ic:.065}],37:[.75,.056,.833],38:[.716,.022,.758],39:[.694,-.471,.278,{ic:.057}],40:[.75,.25,.389,{ic:.102}],41:[.75,.25,.389],42:[.75,-.306,.5,{ic:.068}],43:[.583,.083,.778],44:[.098,.125,.278],45:[.259,-.186,.333],46:[.098,0,.278],47:[.75,.25,.5,{ic:.1}],48:[.678,.022,.5,{ic:.049}],49:[.678,0,.5],50:[.678,0,.5,{ic:.051}],51:[.678,.022,.5,{ic:.044}],52:[.656,0,.5,{ic:.021}],53:[.656,.022,.5,{ic:.055}],54:[.678,.022,.5,{ic:.048}],55:[.656,.011,.5,{ic:.096}],56:[.678,.022,.5,{ic:.054}],57:[.677,.022,.5,{ic:.045}],58:[.444,0,.278],59:[.444,.125,.278],61:[.37,-.13,.778,{ic:.018}],63:[.704,0,.472,{ic:.064}],64:[.705,.01,.667,{ic:.04}],91:[.75,.25,.289,{ic:.136}],93:[.75,.25,.289,{ic:.064}],94:[.694,-.527,.5,{ic:.033}],95:[-.038,.114,.5,{ic:.065}],126:[.327,-.193,.5,{ic:.06}],305:[.444,0,.239,{ic:.019}],567:[.444,.204,.267,{ic:.019}],768:[.694,-.527,0],769:[.694,-.527,0,{ic:.063}],770:[.694,-.527,0,{ic:.033}],771:[.677,-.543,0,{ic:.06}],772:[.631,-.552,0,{ic:.064}],774:[.694,-.508,0,{ic:.073}],775:[.68,-.576,0],776:[.68,-.582,0,{ic:.04}],778:[.693,-.527,0],779:[.694,-.527,0,{ic:.063}],780:[.654,-.487,0,{ic:.06}],913:[.694,0,.667],914:[.694,0,.667,{ic:.029}],915:[.691,0,.542,{ic:.104}],916:[.694,0,.833],917:[.691,0,.597,{ic:.091}],918:[.694,0,.611,{ic:.091}],919:[.694,0,.708,{ic:.06}],920:[.715,.022,.778,{ic:.026}],921:[.694,0,.278,{ic:.06}],922:[.694,0,.694,{ic:.091}],923:[.694,0,.611],924:[.694,0,.875,{ic:.054}],925:[.694,0,.708,{ic:.058}],926:[.688,0,.667,{ic:.098}],927:[.716,.022,.736,{ic:.027}],928:[.691,0,.708,{ic:.06}],929:[.694,0,.639,{ic:.051}],931:[.694,0,.722,{ic:.091}],932:[.688,0,.681,{ic:.109}],933:[.716,0,.778,{ic:.065}],934:[.694,0,.722,{ic:.021}],935:[.694,0,.667,{ic:.091}],936:[.694,0,.778,{ic:.076}],937:[.716,0,.722,{ic:.047}],8211:[.312,-.236,.5,{ic:.065}],8212:[.312,-.236,1,{ic:.065}],8213:[.312,-.236,1,{ic:.065}],8215:[-.038,.114,.5,{ic:.065}],8216:[.694,-.471,.278,{ic:.058}],8217:[.694,-.471,.278,{ic:.057}],8220:[.694,-.471,.5,{ic:.114}],8221:[.694,-.471,.5],8260:[.75,.25,.5,{ic:.1}],8710:[.694,0,.833]};Object.defineProperty(sansSerifItalic$1,"__esModule",{value:!0});sansSerifItalic$1.sansSerifItalic=void 0;var FontData_js_1$7=FontData,sans_serif_italic_js_1$1=sansSerifItalic;sansSerifItalic$1.sansSerifItalic=(0,FontData_js_1$7.AddCSS)(sans_serif_italic_js_1$1.sansSerifItalic,{913:{c:"A"},914:{c:"B"},917:{c:"E"},918:{c:"Z"},919:{c:"H"},921:{c:"I"},922:{c:"K"},924:{c:"M"},925:{c:"N"},927:{c:"O"},929:{c:"P"},932:{c:"T"},935:{c:"X"},8213:{c:"\\2014"},8215:{c:"_"},8260:{c:"/"},8710:{c:"\\394"}});var sansSerif$1={},sansSerif={};Object.defineProperty(sansSerif,"__esModule",{value:!0});sansSerif.sansSerif=void 0;sansSerif.sansSerif={33:[.694,0,.319],34:[.694,-.471,.5],35:[.694,.194,.833],36:[.75,.056,.5],37:[.75,.056,.833],38:[.716,.022,.758],39:[.694,-.471,.278],40:[.75,.25,.389],41:[.75,.25,.389],42:[.75,-.306,.5],43:[.583,.082,.778],44:[.098,.125,.278],45:[.259,-.186,.333],46:[.098,0,.278],47:[.75,.25,.5],58:[.444,0,.278],59:[.444,.125,.278],61:[.37,-.13,.778],63:[.704,0,.472],64:[.704,.011,.667],91:[.75,.25,.289],93:[.75,.25,.289],94:[.694,-.527,.5],95:[-.038,.114,.5],126:[.327,-.193,.5],305:[.444,0,.239],567:[.444,.205,.267],768:[.694,-.527,0],769:[.694,-.527,0],770:[.694,-.527,0],771:[.677,-.543,0],772:[.631,-.552,0],774:[.694,-.508,0],775:[.68,-.576,0],776:[.68,-.582,0],778:[.694,-.527,0],779:[.694,-.527,0],780:[.654,-.487,0],913:[.694,0,.667],914:[.694,0,.667],915:[.691,0,.542],916:[.694,0,.833],917:[.691,0,.597],918:[.694,0,.611],919:[.694,0,.708],920:[.716,.021,.778],921:[.694,0,.278],922:[.694,0,.694],923:[.694,0,.611],924:[.694,0,.875],925:[.694,0,.708],926:[.688,0,.667],927:[.715,.022,.736],928:[.691,0,.708],929:[.694,0,.639],931:[.694,0,.722],932:[.688,0,.681],933:[.716,0,.778],934:[.694,0,.722],935:[.694,0,.667],936:[.694,0,.778],937:[.716,0,.722],8211:[.312,-.236,.5],8212:[.312,-.236,1],8213:[.312,-.236,1],8215:[-.038,.114,.5],8216:[.694,-.471,.278],8217:[.694,-.471,.278],8220:[.694,-.471,.5],8221:[.694,-.471,.5],8260:[.75,.25,.5],8710:[.694,0,.833]};Object.defineProperty(sansSerif$1,"__esModule",{value:!0});sansSerif$1.sansSerif=void 0;var FontData_js_1$6=FontData,sans_serif_js_1$1=sansSerif;sansSerif$1.sansSerif=(0,FontData_js_1$6.AddCSS)(sans_serif_js_1$1.sansSerif,{913:{c:"A"},914:{c:"B"},917:{c:"E"},918:{c:"Z"},919:{c:"H"},921:{c:"I"},922:{c:"K"},924:{c:"M"},925:{c:"N"},927:{c:"O"},929:{c:"P"},932:{c:"T"},935:{c:"X"},8213:{c:"\\2014"},8215:{c:"_"},8260:{c:"/"},8710:{c:"\\394"}});var scriptBold$1={},scriptBold={};Object.defineProperty(scriptBold,"__esModule",{value:!0});scriptBold.scriptBold=void 0;scriptBold.scriptBold={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.scriptBold=void 0;var r=scriptBold;Object.defineProperty(t,"scriptBold",{enumerable:!0,get:function(){return r.scriptBold}})})(scriptBold$1);var script$1={},script={};Object.defineProperty(script,"__esModule",{value:!0});script.script=void 0;script.script={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.script=void 0;var r=script;Object.defineProperty(t,"script",{enumerable:!0,get:function(){return r.script}})})(script$1);var smallop$1={},smallop={};Object.defineProperty(smallop,"__esModule",{value:!0});smallop.smallop=void 0;smallop.smallop={40:[.85,.349,.458],41:[.85,.349,.458],47:[.85,.349,.578],91:[.85,.349,.417],92:[.85,.349,.578],93:[.85,.349,.417],123:[.85,.349,.583],125:[.85,.349,.583],710:[.744,-.551,.556],732:[.722,-.597,.556],770:[.744,-.551,0],771:[.722,-.597,0],8214:[.602,0,.778],8260:[.85,.349,.578],8593:[.6,0,.667],8595:[.6,0,.667],8657:[.599,0,.778],8659:[.6,0,.778],8719:[.75,.25,.944],8720:[.75,.25,.944],8721:[.75,.25,1.056],8730:[.85,.35,1,{ic:.02}],8739:[.627,.015,.333],8741:[.627,.015,.556],8747:[.805,.306,.472,{ic:.138}],8748:[.805,.306,.819,{ic:.138}],8749:[.805,.306,1.166,{ic:.138}],8750:[.805,.306,.472,{ic:.138}],8896:[.75,.249,.833],8897:[.75,.249,.833],8898:[.75,.249,.833],8899:[.75,.249,.833],8968:[.85,.349,.472],8969:[.85,.349,.472],8970:[.85,.349,.472],8971:[.85,.349,.472],9001:[.85,.35,.472],9002:[.85,.35,.472],9168:[.602,0,.667],10072:[.627,.015,.333],10216:[.85,.35,.472],10217:[.85,.35,.472],10752:[.75,.25,1.111],10753:[.75,.25,1.111],10754:[.75,.25,1.111],10756:[.75,.249,.833],10758:[.75,.249,.833],10764:[.805,.306,1.638,{ic:.138}],12296:[.85,.35,.472],12297:[.85,.35,.472]};Object.defineProperty(smallop$1,"__esModule",{value:!0});smallop$1.smallop=void 0;var FontData_js_1$5=FontData,smallop_js_1$1=smallop;smallop$1.smallop=(0,FontData_js_1$5.AddCSS)(smallop_js_1$1.smallop,{8260:{c:"/"},9001:{c:"\\27E8"},9002:{c:"\\27E9"},10072:{c:"\\2223"},10764:{c:"\\222C\\222C"},12296:{c:"\\27E8"},12297:{c:"\\27E9"}});var texCalligraphicBold$1={},texCalligraphicBold={};Object.defineProperty(texCalligraphicBold,"__esModule",{value:!0});texCalligraphicBold.texCalligraphicBold=void 0;texCalligraphicBold.texCalligraphicBold={65:[.751,.049,.921,{ic:.068,sk:.224}],66:[.705,.017,.748,{sk:.16}],67:[.703,.02,.613,{sk:.16}],68:[.686,0,.892,{sk:.0958}],69:[.703,.016,.607,{ic:.02,sk:.128}],70:[.686,.03,.814,{ic:.116,sk:.128}],71:[.703,.113,.682,{sk:.128}],72:[.686,.048,.987,{sk:.128}],73:[.686,0,.642,{ic:.104,sk:.0319}],74:[.686,.114,.779,{ic:.158,sk:.192}],75:[.703,.017,.871,{sk:.0639}],76:[.703,.017,.788,{sk:.16}],77:[.703,.049,1.378,{sk:.16}],78:[.84,.049,.937,{ic:.168,sk:.0958}],79:[.703,.017,.906,{sk:.128}],80:[.686,.067,.81,{ic:.036,sk:.0958}],81:[.703,.146,.939,{sk:.128}],82:[.686,.017,.99,{sk:.0958}],83:[.703,.016,.696,{ic:.025,sk:.16}],84:[.72,.069,.644,{ic:.303,sk:.0319}],85:[.686,.024,.715,{ic:.056,sk:.0958}],86:[.686,.077,.737,{ic:.037,sk:.0319}],87:[.686,.077,1.169,{ic:.037,sk:.0958}],88:[.686,0,.817,{ic:.089,sk:.16}],89:[.686,.164,.759,{ic:.038,sk:.0958}],90:[.686,0,.818,{ic:.035,sk:.16}],305:[.452,.008,.394,{sk:.0319}],567:[.451,.201,.439,{sk:.0958}]};Object.defineProperty(texCalligraphicBold$1,"__esModule",{value:!0});texCalligraphicBold$1.texCalligraphicBold=void 0;var FontData_js_1$4=FontData,tex_calligraphic_bold_js_1$1=texCalligraphicBold;texCalligraphicBold$1.texCalligraphicBold=(0,FontData_js_1$4.AddCSS)(tex_calligraphic_bold_js_1$1.texCalligraphicBold,{305:{f:"B"},567:{f:"B"}});var texCalligraphic$1={},texCalligraphic={};Object.defineProperty(texCalligraphic,"__esModule",{value:!0});texCalligraphic.texCalligraphic=void 0;texCalligraphic.texCalligraphic={65:[.728,.05,.798,{ic:.021,sk:.194}],66:[.705,.022,.657,{sk:.139}],67:[.705,.025,.527,{sk:.139}],68:[.683,0,.771,{sk:.0833}],69:[.705,.022,.528,{ic:.036,sk:.111}],70:[.683,.032,.719,{ic:.11,sk:.111}],71:[.704,.119,.595,{sk:.111}],72:[.683,.048,.845,{sk:.111}],73:[.683,0,.545,{ic:.097,sk:.0278}],74:[.683,.119,.678,{ic:.161,sk:.167}],75:[.705,.022,.762,{sk:.0556}],76:[.705,.022,.69,{sk:.139}],77:[.705,.05,1.201,{sk:.139}],78:[.789,.05,.82,{ic:.159,sk:.0833}],79:[.705,.022,.796,{sk:.111}],80:[.683,.057,.696,{ic:.037,sk:.0833}],81:[.705,.131,.817,{sk:.111}],82:[.682,.022,.848,{sk:.0833}],83:[.705,.022,.606,{ic:.036,sk:.139}],84:[.717,.068,.545,{ic:.288,sk:.0278}],85:[.683,.028,.626,{ic:.061,sk:.0833}],86:[.683,.052,.613,{ic:.045,sk:.0278}],87:[.683,.053,.988,{ic:.046,sk:.0833}],88:[.683,0,.713,{ic:.094,sk:.139}],89:[.683,.143,.668,{ic:.046,sk:.0833}],90:[.683,0,.725,{ic:.042,sk:.139}]};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.texCalligraphic=void 0;var r=texCalligraphic;Object.defineProperty(t,"texCalligraphic",{enumerable:!0,get:function(){return r.texCalligraphic}})})(texCalligraphic$1);var texMathit$1={},texMathit={};Object.defineProperty(texMathit,"__esModule",{value:!0});texMathit.texMathit=void 0;texMathit.texMathit={65:[.716,0,.743],66:[.683,0,.704],67:[.705,.021,.716],68:[.683,0,.755],69:[.68,0,.678],70:[.68,0,.653],71:[.705,.022,.774],72:[.683,0,.743],73:[.683,0,.386],74:[.683,.021,.525],75:[.683,0,.769],76:[.683,0,.627],77:[.683,0,.897],78:[.683,0,.743],79:[.704,.022,.767],80:[.683,0,.678],81:[.704,.194,.767],82:[.683,.022,.729],83:[.705,.022,.562],84:[.677,0,.716],85:[.683,.022,.743],86:[.683,.022,.743],87:[.683,.022,.999],88:[.683,0,.743],89:[.683,0,.743],90:[.683,0,.613],97:[.442,.011,.511],98:[.694,.011,.46],99:[.441,.01,.46],100:[.694,.011,.511],101:[.442,.01,.46],102:[.705,.204,.307],103:[.442,.205,.46],104:[.694,.011,.511],105:[.656,.01,.307],106:[.656,.204,.307],107:[.694,.011,.46],108:[.694,.011,.256],109:[.442,.011,.818],110:[.442,.011,.562],111:[.442,.011,.511],112:[.442,.194,.511],113:[.442,.194,.46],114:[.442,.011,.422],115:[.442,.011,.409],116:[.626,.011,.332],117:[.441,.011,.537],118:[.443,.01,.46],119:[.443,.011,.664],120:[.442,.011,.464],121:[.441,.205,.486],122:[.442,.011,.409]};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.texMathit=void 0;var r=texMathit;Object.defineProperty(t,"texMathit",{enumerable:!0,get:function(){return r.texMathit}})})(texMathit$1);var texOldstyleBold$1={},texOldstyleBold={};Object.defineProperty(texOldstyleBold,"__esModule",{value:!0});texOldstyleBold.texOldstyleBold=void 0;texOldstyleBold.texOldstyleBold={48:[.46,.017,.575],49:[.461,0,.575],50:[.46,0,.575],51:[.461,.211,.575],52:[.469,.194,.575],53:[.461,.211,.575],54:[.66,.017,.575],55:[.476,.211,.575],56:[.661,.017,.575],57:[.461,.21,.575],65:[.751,.049,.921,{ic:.068,sk:.224}],66:[.705,.017,.748,{sk:.16}],67:[.703,.02,.613,{sk:.16}],68:[.686,0,.892,{sk:.0958}],69:[.703,.016,.607,{ic:.02,sk:.128}],70:[.686,.03,.814,{ic:.116,sk:.128}],71:[.703,.113,.682,{sk:.128}],72:[.686,.048,.987,{sk:.128}],73:[.686,0,.642,{ic:.104,sk:.0319}],74:[.686,.114,.779,{ic:.158,sk:.192}],75:[.703,.017,.871,{sk:.0639}],76:[.703,.017,.788,{sk:.16}],77:[.703,.049,1.378,{sk:.16}],78:[.84,.049,.937,{ic:.168,sk:.0958}],79:[.703,.017,.906,{sk:.128}],80:[.686,.067,.81,{ic:.036,sk:.0958}],81:[.703,.146,.939,{sk:.128}],82:[.686,.017,.99,{sk:.0958}],83:[.703,.016,.696,{ic:.025,sk:.16}],84:[.72,.069,.644,{ic:.303,sk:.0319}],85:[.686,.024,.715,{ic:.056,sk:.0958}],86:[.686,.077,.737,{ic:.037,sk:.0319}],87:[.686,.077,1.169,{ic:.037,sk:.0958}],88:[.686,0,.817,{ic:.089,sk:.16}],89:[.686,.164,.759,{ic:.038,sk:.0958}],90:[.686,0,.818,{ic:.035,sk:.16}]};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.texOldstyleBold=void 0;var r=texOldstyleBold;Object.defineProperty(t,"texOldstyleBold",{enumerable:!0,get:function(){return r.texOldstyleBold}})})(texOldstyleBold$1);var texOldstyle$1={},texOldstyle={};Object.defineProperty(texOldstyle,"__esModule",{value:!0});texOldstyle.texOldstyle=void 0;texOldstyle.texOldstyle={48:[.452,.022,.5],49:[.453,0,.5],50:[.453,0,.5],51:[.452,.216,.5],52:[.464,.194,.5],53:[.453,.216,.5],54:[.665,.022,.5],55:[.463,.216,.5],56:[.666,.021,.5],57:[.453,.216,.5],65:[.728,.05,.798,{ic:.021,sk:.194}],66:[.705,.022,.657,{sk:.139}],67:[.705,.025,.527,{sk:.139}],68:[.683,0,.771,{sk:.0833}],69:[.705,.022,.528,{ic:.036,sk:.111}],70:[.683,.032,.719,{ic:.11,sk:.111}],71:[.704,.119,.595,{sk:.111}],72:[.683,.048,.845,{sk:.111}],73:[.683,0,.545,{ic:.097,sk:.0278}],74:[.683,.119,.678,{ic:.161,sk:.167}],75:[.705,.022,.762,{sk:.0556}],76:[.705,.022,.69,{sk:.139}],77:[.705,.05,1.201,{sk:.139}],78:[.789,.05,.82,{ic:.159,sk:.0833}],79:[.705,.022,.796,{sk:.111}],80:[.683,.057,.696,{ic:.037,sk:.0833}],81:[.705,.131,.817,{sk:.111}],82:[.682,.022,.848,{sk:.0833}],83:[.705,.022,.606,{ic:.036,sk:.139}],84:[.717,.068,.545,{ic:.288,sk:.0278}],85:[.683,.028,.626,{ic:.061,sk:.0833}],86:[.683,.052,.613,{ic:.045,sk:.0278}],87:[.683,.053,.988,{ic:.046,sk:.0833}],88:[.683,0,.713,{ic:.094,sk:.139}],89:[.683,.143,.668,{ic:.046,sk:.0833}],90:[.683,0,.725,{ic:.042,sk:.139}]};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.texOldstyle=void 0;var r=texOldstyle;Object.defineProperty(t,"texOldstyle",{enumerable:!0,get:function(){return r.texOldstyle}})})(texOldstyle$1);var texSize3$1={},texSize3={};Object.defineProperty(texSize3,"__esModule",{value:!0});texSize3.texSize3=void 0;texSize3.texSize3={40:[1.45,.949,.736],41:[1.45,.949,.736],47:[1.45,.949,1.044],91:[1.45,.949,.528],92:[1.45,.949,1.044],93:[1.45,.949,.528],123:[1.45,.949,.75],125:[1.45,.949,.75],710:[.772,-.564,1.444],732:[.749,-.61,1.444],770:[.772,-.564,0],771:[.749,-.61,0],8260:[1.45,.949,1.044],8730:[1.45,.95,1,{ic:.02}],8968:[1.45,.949,.583],8969:[1.45,.949,.583],8970:[1.45,.949,.583],8971:[1.45,.949,.583],9001:[1.45,.95,.75],9002:[1.45,.949,.75],10216:[1.45,.95,.75],10217:[1.45,.949,.75],12296:[1.45,.95,.75],12297:[1.45,.949,.75]};Object.defineProperty(texSize3$1,"__esModule",{value:!0});texSize3$1.texSize3=void 0;var FontData_js_1$3=FontData,tex_size3_js_1$1=texSize3;texSize3$1.texSize3=(0,FontData_js_1$3.AddCSS)(tex_size3_js_1$1.texSize3,{8260:{c:"/"},9001:{c:"\\27E8"},9002:{c:"\\27E9"},12296:{c:"\\27E8"},12297:{c:"\\27E9"}});var texSize4$1={},texSize4={};Object.defineProperty(texSize4,"__esModule",{value:!0});texSize4.texSize4=void 0;texSize4.texSize4={40:[1.75,1.249,.792],41:[1.75,1.249,.792],47:[1.75,1.249,1.278],91:[1.75,1.249,.583],92:[1.75,1.249,1.278],93:[1.75,1.249,.583],123:[1.75,1.249,.806],125:[1.75,1.249,.806],710:[.845,-.561,1.889,{ic:.013}],732:[.823,-.583,1.889],770:[.845,-.561,0,{ic:.013}],771:[.823,-.583,0],8260:[1.75,1.249,1.278],8730:[1.75,1.25,1,{ic:.02}],8968:[1.75,1.249,.639],8969:[1.75,1.249,.639],8970:[1.75,1.249,.639],8971:[1.75,1.249,.639],9001:[1.75,1.248,.806],9002:[1.75,1.248,.806],9115:[1.154,.655,.875],9116:[.61,.01,.875],9117:[1.165,.644,.875],9118:[1.154,.655,.875],9119:[.61,.01,.875],9120:[1.165,.644,.875],9121:[1.154,.645,.667],9122:[.602,0,.667],9123:[1.155,.644,.667],9124:[1.154,.645,.667],9125:[.602,0,.667],9126:[1.155,.644,.667],9127:[.899,.01,.889],9128:[1.16,.66,.889],9129:[.01,.899,.889],9130:[.29,.015,.889],9131:[.899,.01,.889],9132:[1.16,.66,.889],9133:[.01,.899,.889],9143:[.935,.885,1.056],10216:[1.75,1.248,.806],10217:[1.75,1.248,.806],12296:[1.75,1.248,.806],12297:[1.75,1.248,.806],57344:[.625,.014,1.056],57345:[.605,.014,1.056,{ic:.02}],57680:[.12,.213,.45,{ic:.01}],57681:[.12,.213,.45,{ic:.024}],57682:[.333,0,.45,{ic:.01}],57683:[.333,0,.45,{ic:.024}],57684:[.32,.2,.4,{ic:.01}],57685:[.333,0,.9,{ic:.01}],57686:[.12,.213,.9,{ic:.01}]};Object.defineProperty(texSize4$1,"__esModule",{value:!0});texSize4$1.texSize4=void 0;var FontData_js_1$2=FontData,tex_size4_js_1$1=texSize4;texSize4$1.texSize4=(0,FontData_js_1$2.AddCSS)(tex_size4_js_1$1.texSize4,{8260:{c:"/"},9001:{c:"\\27E8"},9002:{c:"\\27E9"},12296:{c:"\\27E8"},12297:{c:"\\27E9"},57685:{c:"\\E153\\E152"},57686:{c:"\\E151\\E150"}});var texVariant$1={},texVariant={};Object.defineProperty(texVariant,"__esModule",{value:!0});texVariant.texVariant=void 0;texVariant.texVariant={710:[.845,-.561,2.333,{ic:.013}],732:[.899,-.628,2.333],770:[.845,-.561,0,{ic:.013}],771:[.899,-.628,0],1008:[.434,.006,.667,{ic:.067}],8463:[.695,.013,.54,{ic:.022}],8592:[.437,-.064,.5],8594:[.437,-.064,.5],8652:[.514,.014,1],8708:[.86,.166,.556],8709:[.587,0,.778],8722:[.27,-.23,.5],8726:[.43,.023,.778],8733:[.472,-.028,.778],8739:[.43,.023,.222],8740:[.43,.023,.222,{ic:.018}],8741:[.431,.023,.389],8742:[.431,.024,.389,{ic:.018}],8764:[.365,-.132,.778],8776:[.481,-.05,.778],8808:[.752,.284,.778],8809:[.752,.284,.778],8816:[.919,.421,.778],8817:[.919,.421,.778],8840:[.828,.33,.778],8841:[.828,.33,.778],8842:[.634,.255,.778],8843:[.634,.254,.778],8872:[.694,0,.611],8901:[.189,0,.278],8994:[.378,-.122,.778],8995:[.378,-.143,.778],9651:[.575,.02,.722],9661:[.576,.019,.722],10887:[.801,.303,.778],10888:[.801,.303,.778],10955:[.752,.332,.778],10956:[.752,.333,.778]};Object.defineProperty(texVariant$1,"__esModule",{value:!0});texVariant$1.texVariant=void 0;var FontData_js_1$1=FontData,tex_variant_js_1$1=texVariant;texVariant$1.texVariant=(0,FontData_js_1$1.AddCSS)(tex_variant_js_1$1.texVariant,{1008:{c:"\\E009"},8463:{f:""},8740:{c:"\\E006"},8742:{c:"\\E007"},8808:{c:"\\E00C"},8809:{c:"\\E00D"},8816:{c:"\\E011"},8817:{c:"\\E00E"},8840:{c:"\\E016"},8841:{c:"\\E018"},8842:{c:"\\E01A"},8843:{c:"\\E01B"},10887:{c:"\\E010"},10888:{c:"\\E00F"},10955:{c:"\\E017"},10956:{c:"\\E019"}});var delimiters={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.delimiters=t.VSIZES=t.HDW3=t.HDW2=t.HDW1=void 0;var r=FontData$2;t.HDW1=[.75,.25,.875],t.HDW2=[.85,.349,.667],t.HDW3=[.583,.082,.5],t.VSIZES=[1,1.2,1.8,2.4,3];var e={c:47,dir:r.V,sizes:t.VSIZES},n={c:175,dir:r.H,sizes:[.5],stretch:[0,175],HDW:[.59,-.544,.5]},i={c:710,dir:r.H,sizes:[.5,.556,1,1.444,1.889]},o={c:732,dir:r.H,sizes:[.5,.556,1,1.444,1.889]},a={c:8211,dir:r.H,sizes:[.5],stretch:[0,8211],HDW:[.285,-.248,.5]},s={c:8592,dir:r.H,sizes:[1],stretch:[8592,8722],HDW:t.HDW3},l={c:8594,dir:r.H,sizes:[1],stretch:[0,8722,8594],HDW:t.HDW3},c={c:8596,dir:r.H,sizes:[1],stretch:[8592,8722,8594],HDW:t.HDW3},f={c:8612,dir:r.H,stretch:[8592,8722,8739],HDW:t.HDW3,min:1.278},d={c:8614,dir:r.H,sizes:[1],stretch:[8739,8722,8594],HDW:t.HDW3},u={c:8656,dir:r.H,sizes:[1],stretch:[8656,61],HDW:t.HDW3},m={c:8658,dir:r.H,sizes:[1],stretch:[0,61,8658],HDW:t.HDW3},p={c:8660,dir:r.H,sizes:[1],stretch:[8656,61,8658],HDW:t.HDW3},_={c:8722,dir:r.H,sizes:[.778],stretch:[0,8722],HDW:t.HDW3},y={c:8739,dir:r.V,sizes:[1],stretch:[0,8739],HDW:[.627,.015,.333]},g={c:9180,dir:r.H,sizes:[.778,1],schar:[8994,8994],variants:[5,0],stretch:[57680,57684,57681],HDW:[.32,.2,.5]},v={c:9181,dir:r.H,sizes:[.778,1],schar:[8995,8995],variants:[5,0],stretch:[57682,57684,57683],HDW:[.32,.2,.5]},x={c:9182,dir:r.H,stretch:[57680,57684,57681,57685],HDW:[.32,.2,.5],min:1.8},b={c:9183,dir:r.H,stretch:[57682,57684,57683,57686],HDW:[.32,.2,.5],min:1.8},S={c:10216,dir:r.V,sizes:t.VSIZES},M={c:10217,dir:r.V,sizes:t.VSIZES},C={c:10502,dir:r.H,stretch:[8656,61,8739],HDW:t.HDW3,min:1.278},A={c:10503,dir:r.H,stretch:[8872,61,8658],HDW:t.HDW3,min:1.278};t.delimiters={40:{dir:r.V,sizes:t.VSIZES,stretch:[9115,9116,9117],HDW:[.85,.349,.875]},41:{dir:r.V,sizes:t.VSIZES,stretch:[9118,9119,9120],HDW:[.85,.349,.875]},45:_,47:e,61:{dir:r.H,sizes:[.778],stretch:[0,61],HDW:t.HDW3},91:{dir:r.V,sizes:t.VSIZES,stretch:[9121,9122,9123],HDW:t.HDW2},92:{dir:r.V,sizes:t.VSIZES},93:{dir:r.V,sizes:t.VSIZES,stretch:[9124,9125,9126],HDW:t.HDW2},94:i,95:a,123:{dir:r.V,sizes:t.VSIZES,stretch:[9127,9130,9129,9128],HDW:[.85,.349,.889]},124:{dir:r.V,sizes:[1],stretch:[0,8739],HDW:[.75,.25,.333]},125:{dir:r.V,sizes:t.VSIZES,stretch:[9131,9130,9133,9132],HDW:[.85,.349,.889]},126:o,175:n,710:i,713:n,732:o,770:i,771:o,818:a,8211:a,8212:a,8213:a,8214:{dir:r.V,sizes:[.602,1],schar:[0,8741],variants:[1,0],stretch:[0,8741],HDW:[.602,0,.556]},8215:a,8254:n,8407:l,8592:s,8593:{dir:r.V,sizes:[.888],stretch:[8593,9168],HDW:[.6,0,.667]},8594:l,8595:{dir:r.V,sizes:[.888],stretch:[0,9168,8595],HDW:[.6,0,.667]},8596:c,8597:{dir:r.V,sizes:[1.044],stretch:[8593,9168,8595],HDW:t.HDW1},8606:{dir:r.H,sizes:[1],stretch:[8606,8722],HDW:t.HDW3},8608:{dir:r.H,sizes:[1],stretch:[0,8722,8608],HDW:t.HDW3},8612:f,8613:{dir:r.V,stretch:[8593,9168,8869],HDW:t.HDW1,min:1.555},8614:d,8615:{dir:r.V,stretch:[8868,9168,8595],HDW:t.HDW1,min:1.555},8624:{dir:r.V,sizes:[.722],stretch:[8624,9168],HDW:t.HDW1},8625:{dir:r.V,sizes:[.722],stretch:[8625,9168],HDW:t.HDW1},8636:{dir:r.H,sizes:[1],stretch:[8636,8722],HDW:t.HDW3},8637:{dir:r.H,sizes:[1],stretch:[8637,8722],HDW:t.HDW3},8638:{dir:r.V,sizes:[.888],stretch:[8638,9168],HDW:t.HDW1},8639:{dir:r.V,sizes:[.888],stretch:[8639,9168],HDW:t.HDW1},8640:{dir:r.H,sizes:[1],stretch:[0,8722,8640],HDW:t.HDW3},8641:{dir:r.H,sizes:[1],stretch:[0,8722,8641],HDW:t.HDW3},8642:{dir:r.V,sizes:[.888],stretch:[0,9168,8642],HDW:t.HDW1},8643:{dir:r.V,sizes:[.888],stretch:[0,9168,8643],HDW:t.HDW1},8656:u,8657:{dir:r.V,sizes:[.888],stretch:[8657,8214],HDW:[.599,0,.778]},8658:m,8659:{dir:r.V,sizes:[.888],stretch:[0,8214,8659],HDW:[.6,0,.778]},8660:p,8661:{dir:r.V,sizes:[1.044],stretch:[8657,8214,8659],HDW:[.75,.25,.778]},8666:{dir:r.H,sizes:[1],stretch:[8666,8801],HDW:[.464,-.036,.5]},8667:{dir:r.H,sizes:[1],stretch:[0,8801,8667],HDW:[.464,-.036,.5]},8722:_,8725:e,8730:{dir:r.V,sizes:t.VSIZES,stretch:[57345,57344,9143],fullExt:[.65,2.3],HDW:[.85,.35,1.056]},8739:y,8741:{dir:r.V,sizes:[1],stretch:[0,8741],HDW:[.627,.015,.556]},8968:{dir:r.V,sizes:t.VSIZES,stretch:[9121,9122],HDW:t.HDW2},8969:{dir:r.V,sizes:t.VSIZES,stretch:[9124,9125],HDW:t.HDW2},8970:{dir:r.V,sizes:t.VSIZES,stretch:[0,9122,9123],HDW:t.HDW2},8971:{dir:r.V,sizes:t.VSIZES,stretch:[0,9125,9126],HDW:t.HDW2},8978:g,8994:g,8995:v,9001:S,9002:M,9130:{dir:r.V,sizes:[.32],stretch:[9130,9130,9130],HDW:[.29,.015,.889]},9135:a,9136:{dir:r.V,sizes:[.989],stretch:[9127,9130,9133],HDW:[.75,.25,.889]},9137:{dir:r.V,sizes:[.989],stretch:[9131,9130,9129],HDW:[.75,.25,.889]},9140:{dir:r.H,stretch:[9484,8722,9488],HDW:t.HDW3,min:1},9141:{dir:r.H,stretch:[9492,8722,9496],HDW:t.HDW3,min:1},9168:{dir:r.V,sizes:[.602,1],schar:[0,8739],variants:[1,0],stretch:[0,8739],HDW:[.602,0,.333]},9180:g,9181:v,9182:x,9183:b,9184:{dir:r.H,stretch:[714,713,715],HDW:[.59,-.544,.5],min:1},9185:{dir:r.H,stretch:[715,713,714],HDW:[.59,-.544,.5],min:1},9472:a,10072:y,10216:S,10217:M,10222:{dir:r.V,sizes:[.989],stretch:[9127,9130,9129],HDW:[.75,.25,.889]},10223:{dir:r.V,sizes:[.989],stretch:[9131,9130,9133],HDW:[.75,.25,.889]},10229:s,10230:l,10231:c,10232:u,10233:m,10234:p,10235:f,10236:d,10237:C,10238:A,10502:C,10503:A,10574:{dir:r.H,stretch:[8636,8722,8640],HDW:t.HDW3,min:2},10575:{dir:r.V,stretch:[8638,9168,8642],HDW:t.HDW1,min:1.776},10576:{dir:r.H,stretch:[8637,8722,8641],HDW:t.HDW3,min:2},10577:{dir:r.V,stretch:[8639,9168,8643],HDW:t.HDW1,min:.5},10586:{dir:r.H,stretch:[8636,8722,8739],HDW:t.HDW3,min:1.278},10587:{dir:r.H,stretch:[8739,8722,8640],HDW:t.HDW3,min:1.278},10588:{dir:r.V,stretch:[8638,9168,8869],HDW:t.HDW1,min:1.556},10589:{dir:r.V,stretch:[8868,9168,8642],HDW:t.HDW1,min:1.556},10590:{dir:r.H,stretch:[8637,8722,8739],HDW:t.HDW3,min:1.278},10591:{dir:r.H,stretch:[8739,8722,8641],HDW:t.HDW3,min:1.278},10592:{dir:r.V,stretch:[8639,9168,8869],HDW:t.HDW1,min:1.776},10593:{dir:r.V,stretch:[8868,9168,8643],HDW:t.HDW1,min:1.776},12296:S,12297:M,65079:x,65080:b}})(delimiters);var __extends$F=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$f=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$f=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$f.apply(this,arguments)};Object.defineProperty(tex$2,"__esModule",{value:!0});tex$2.TeXFont=void 0;var FontData_js_1=FontData,tex_js_1$1=tex$1,bold_italic_js_1=boldItalic$1,bold_js_1=bold$1,double_struck_js_1=doubleStruck$1,fraktur_bold_js_1=frakturBold$1,fraktur_js_1=fraktur$1,italic_js_1=italic$1,largeop_js_1=largeop$1,monospace_js_1=monospace$1,normal_js_1=normal$1,sans_serif_bold_italic_js_1=sansSerifBoldItalic$1,sans_serif_bold_js_1=sansSerifBold$1,sans_serif_italic_js_1=sansSerifItalic$1,sans_serif_js_1=sansSerif$1,script_bold_js_1=scriptBold$1,script_js_1=script$1,smallop_js_1=smallop$1,tex_calligraphic_bold_js_1=texCalligraphicBold$1,tex_calligraphic_js_1=texCalligraphic$1,tex_mathit_js_1=texMathit$1,tex_oldstyle_bold_js_1=texOldstyleBold$1,tex_oldstyle_js_1=texOldstyle$1,tex_size3_js_1=texSize3$1,tex_size4_js_1=texSize4$1,tex_variant_js_1=texVariant$1,delimiters_js_1=delimiters,TeXFont=function(t){__extends$F(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.defaultCssFamilyPrefix="MJXZERO",r.defaultVariantClasses={normal:"mjx-n",bold:"mjx-b",italic:"mjx-i","bold-italic":"mjx-b mjx-i","double-struck":"mjx-ds mjx-b",fraktur:"mjx-fr","bold-fraktur":"mjx-fr mjx-b",script:"mjx-sc mjx-i","bold-script":"mjx-sc mjx-b mjx-i","sans-serif":"mjx-ss","bold-sans-serif":"mjx-ss mjx-b","sans-serif-italic":"mjx-ss mjx-i","sans-serif-bold-italic":"mjx-ss mjx-b mjx-i",monospace:"mjx-ty","-smallop":"mjx-sop","-largeop":"mjx-lop","-size3":"mjx-s3","-size4":"mjx-s4","-tex-calligraphic":"mjx-cal mjx-i","-tex-bold-calligraphic":"mjx-cal mjx-b","-tex-mathit":"mjx-mit mjx-i","-tex-oldstyle":"mjx-os","-tex-bold-oldstyle":"mjx-os mjx-b","-tex-variant":"mjx-var"},r.defaultVariantLetters={normal:"",bold:"B",italic:"MI","bold-italic":"BI","double-struck":"A",fraktur:"FR","bold-fraktur":"FRB",script:"SC","bold-script":"SCB","sans-serif":"SS","bold-sans-serif":"SSB","sans-serif-italic":"SSI","sans-serif-bold-italic":"SSBI",monospace:"T","-smallop":"S1","-largeop":"S2","-size3":"S3","-size4":"S4","-tex-calligraphic":"C","-tex-bold-calligraphic":"CB","-tex-mathit":"MI","-tex-oldstyle":"C","-tex-bold-oldstyle":"CB","-tex-variant":"A"},r.defaultDelimiters=delimiters_js_1.delimiters,r.defaultChars={normal:normal_js_1.normal,bold:bold_js_1.bold,italic:italic_js_1.italic,"bold-italic":bold_italic_js_1.boldItalic,"double-struck":double_struck_js_1.doubleStruck,fraktur:fraktur_js_1.fraktur,"bold-fraktur":fraktur_bold_js_1.frakturBold,script:script_js_1.script,"bold-script":script_bold_js_1.scriptBold,"sans-serif":sans_serif_js_1.sansSerif,"bold-sans-serif":sans_serif_bold_js_1.sansSerifBold,"sans-serif-italic":sans_serif_italic_js_1.sansSerifItalic,"sans-serif-bold-italic":sans_serif_bold_italic_js_1.sansSerifBoldItalic,monospace:monospace_js_1.monospace,"-smallop":smallop_js_1.smallop,"-largeop":largeop_js_1.largeop,"-size3":tex_size3_js_1.texSize3,"-size4":tex_size4_js_1.texSize4,"-tex-calligraphic":tex_calligraphic_js_1.texCalligraphic,"-tex-bold-calligraphic":tex_calligraphic_bold_js_1.texCalligraphicBold,"-tex-mathit":tex_mathit_js_1.texMathit,"-tex-oldstyle":tex_oldstyle_js_1.texOldstyle,"-tex-bold-oldstyle":tex_oldstyle_bold_js_1.texOldstyleBold,"-tex-variant":tex_variant_js_1.texVariant},r.defaultStyles=__assign$f(__assign$f({},FontData_js_1.CHTMLFontData.defaultStyles),{".MJX-TEX":{"font-family":"MJXZERO, MJXTEX"},".TEX-B":{"font-family":"MJXZERO, MJXTEX-B"},".TEX-I":{"font-family":"MJXZERO, MJXTEX-I"},".TEX-MI":{"font-family":"MJXZERO, MJXTEX-MI"},".TEX-BI":{"font-family":"MJXZERO, MJXTEX-BI"},".TEX-S1":{"font-family":"MJXZERO, MJXTEX-S1"},".TEX-S2":{"font-family":"MJXZERO, MJXTEX-S2"},".TEX-S3":{"font-family":"MJXZERO, MJXTEX-S3"},".TEX-S4":{"font-family":"MJXZERO, MJXTEX-S4"},".TEX-A":{"font-family":"MJXZERO, MJXTEX-A"},".TEX-C":{"font-family":"MJXZERO, MJXTEX-C"},".TEX-CB":{"font-family":"MJXZERO, MJXTEX-CB"},".TEX-FR":{"font-family":"MJXZERO, MJXTEX-FR"},".TEX-FRB":{"font-family":"MJXZERO, MJXTEX-FRB"},".TEX-SS":{"font-family":"MJXZERO, MJXTEX-SS"},".TEX-SSB":{"font-family":"MJXZERO, MJXTEX-SSB"},".TEX-SSI":{"font-family":"MJXZERO, MJXTEX-SSI"},".TEX-SC":{"font-family":"MJXZERO, MJXTEX-SC"},".TEX-T":{"font-family":"MJXZERO, MJXTEX-T"},".TEX-V":{"font-family":"MJXZERO, MJXTEX-V"},".TEX-VB":{"font-family":"MJXZERO, MJXTEX-VB"},"mjx-stretchy-v mjx-c, mjx-stretchy-h mjx-c":{"font-family":"MJXZERO, MJXTEX-S1, MJXTEX-S4, MJXTEX, MJXTEX-A ! important"}}),r.defaultFonts=__assign$f(__assign$f({},FontData_js_1.CHTMLFontData.defaultFonts),{"@font-face /* 1 */":{"font-family":"MJXTEX",src:'url("%%URL%%/MathJax_Main-Regular.woff") format("woff")'},"@font-face /* 2 */":{"font-family":"MJXTEX-B",src:'url("%%URL%%/MathJax_Main-Bold.woff") format("woff")'},"@font-face /* 3 */":{"font-family":"MJXTEX-I",src:'url("%%URL%%/MathJax_Math-Italic.woff") format("woff")'},"@font-face /* 4 */":{"font-family":"MJXTEX-MI",src:'url("%%URL%%/MathJax_Main-Italic.woff") format("woff")'},"@font-face /* 5 */":{"font-family":"MJXTEX-BI",src:'url("%%URL%%/MathJax_Math-BoldItalic.woff") format("woff")'},"@font-face /* 6 */":{"font-family":"MJXTEX-S1",src:'url("%%URL%%/MathJax_Size1-Regular.woff") format("woff")'},"@font-face /* 7 */":{"font-family":"MJXTEX-S2",src:'url("%%URL%%/MathJax_Size2-Regular.woff") format("woff")'},"@font-face /* 8 */":{"font-family":"MJXTEX-S3",src:'url("%%URL%%/MathJax_Size3-Regular.woff") format("woff")'},"@font-face /* 9 */":{"font-family":"MJXTEX-S4",src:'url("%%URL%%/MathJax_Size4-Regular.woff") format("woff")'},"@font-face /* 10 */":{"font-family":"MJXTEX-A",src:'url("%%URL%%/MathJax_AMS-Regular.woff") format("woff")'},"@font-face /* 11 */":{"font-family":"MJXTEX-C",src:'url("%%URL%%/MathJax_Calligraphic-Regular.woff") format("woff")'},"@font-face /* 12 */":{"font-family":"MJXTEX-CB",src:'url("%%URL%%/MathJax_Calligraphic-Bold.woff") format("woff")'},"@font-face /* 13 */":{"font-family":"MJXTEX-FR",src:'url("%%URL%%/MathJax_Fraktur-Regular.woff") format("woff")'},"@font-face /* 14 */":{"font-family":"MJXTEX-FRB",src:'url("%%URL%%/MathJax_Fraktur-Bold.woff") format("woff")'},"@font-face /* 15 */":{"font-family":"MJXTEX-SS",src:'url("%%URL%%/MathJax_SansSerif-Regular.woff") format("woff")'},"@font-face /* 16 */":{"font-family":"MJXTEX-SSB",src:'url("%%URL%%/MathJax_SansSerif-Bold.woff") format("woff")'},"@font-face /* 17 */":{"font-family":"MJXTEX-SSI",src:'url("%%URL%%/MathJax_SansSerif-Italic.woff") format("woff")'},"@font-face /* 18 */":{"font-family":"MJXTEX-SC",src:'url("%%URL%%/MathJax_Script-Regular.woff") format("woff")'},"@font-face /* 19 */":{"font-family":"MJXTEX-T",src:'url("%%URL%%/MathJax_Typewriter-Regular.woff") format("woff")'},"@font-face /* 20 */":{"font-family":"MJXTEX-V",src:'url("%%URL%%/MathJax_Vector-Regular.woff") format("woff")'},"@font-face /* 21 */":{"font-family":"MJXTEX-VB",src:'url("%%URL%%/MathJax_Vector-Bold.woff") format("woff")'}}),r}((0,tex_js_1$1.CommonTeXFontMixin)(FontData_js_1.CHTMLFontData));tex$2.TeXFont=TeXFont;var __extends$E=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$e=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$e=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$e.apply(this,arguments)},__createBinding$9=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,r,e,n){n===void 0&&(n=e);var i=Object.getOwnPropertyDescriptor(r,e);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,i)}:function(t,r,e,n){n===void 0&&(n=e),t[n]=r[e]}),__setModuleDefault$9=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),__importStar$9=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var e in t)e!=="default"&&Object.prototype.hasOwnProperty.call(t,e)&&__createBinding$9(r,t,e);return __setModuleDefault$9(r,t),r},__values$m=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(chtml,"__esModule",{value:!0});chtml.CHTML=void 0;var OutputJax_js_1=OutputJax$1,StyleList_js_1=StyleList,WrapperFactory_js_1=WrapperFactory$2,Usage_js_1=Usage$1,tex_js_1=tex$2,LENGTHS=__importStar$9(lengths),string_js_1$1=string,CHTML=function(t){__extends$E(r,t);function r(e){e===void 0&&(e=null);var n=t.call(this,e,WrapperFactory_js_1.CHTMLWrapperFactory,tex_js_1.TeXFont)||this;return n.chtmlStyles=null,n.font.adaptiveCSS(n.options.adaptiveCSS),n.wrapperUsage=new Usage_js_1.Usage,n}return r.prototype.escaped=function(e,n){return this.setDocument(n),this.html("span",{},[this.text(e.math)])},r.prototype.styleSheet=function(e){if(this.chtmlStyles){if(this.options.adaptiveCSS){var n=new StyleList_js_1.CssStyles;this.addWrapperStyles(n),this.updateFontStyles(n),this.adaptor.insertRules(this.chtmlStyles,n.getStyleRules())}return this.chtmlStyles}var i=this.chtmlStyles=t.prototype.styleSheet.call(this,e);return this.adaptor.setAttribute(i,"id",r.STYLESHEETID),this.wrapperUsage.update(),i},r.prototype.updateFontStyles=function(e){e.addStyles(this.font.updateStyles({}))},r.prototype.addWrapperStyles=function(e){var n,i;if(!this.options.adaptiveCSS){t.prototype.addWrapperStyles.call(this,e);return}try{for(var o=__values$m(this.wrapperUsage.update()),a=o.next();!a.done;a=o.next()){var s=a.value,l=this.factory.getNodeClass(s);l&&this.addClassStyles(l,e)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},r.prototype.addClassStyles=function(e,n){var i,o=e;o.autoStyle&&o.kind!=="unknown"&&n.addStyles((i={},i["mjx-"+o.kind]={display:"inline-block","text-align":"left"},i)),this.wrapperUsage.add(o.kind),t.prototype.addClassStyles.call(this,e,n)},r.prototype.processMath=function(e,n){this.factory.wrap(e).toCHTML(n)},r.prototype.clearCache=function(){this.cssStyles.clear(),this.font.clearCache(),this.wrapperUsage.clear(),this.chtmlStyles=null},r.prototype.reset=function(){this.clearCache()},r.prototype.unknownText=function(e,n,i){i===void 0&&(i=null);var o={},a=100/this.math.metrics.scale;if(a!==100&&(o["font-size"]=this.fixed(a,1)+"%",o.padding=LENGTHS.em(75/a)+" 0 "+LENGTHS.em(20/a)+" 0"),n!=="-explicitFont"){var s=(0,string_js_1$1.unicodeChars)(e);(s.length!==1||s[0]<119808||s[0]>120831)&&this.cssFontStyles(this.font.getCssFont(n),o)}if(i!==null){var l=this.math.metrics;o.width=Math.round(i*l.em*l.scale)+"px"}return this.html("mjx-utext",{variant:n,style:o},[this.text(e)])},r.prototype.measureTextNode=function(e){var n=this.adaptor,i=n.clone(e);n.setStyle(i,"font-family",n.getStyle(i,"font-family").replace(/MJXZERO, /g,""));var o={position:"absolute","white-space":"nowrap"},a=this.html("mjx-measure-text",{style:o},[i]);n.append(n.parent(this.math.start.node),this.container),n.append(this.container,a);var s=n.nodeSize(i,this.math.metrics.em)[0]/this.math.metrics.scale;return n.remove(this.container),n.remove(a),{w:s,h:.75,d:.2}},r.NAME="CHTML",r.OPTIONS=__assign$e(__assign$e({},OutputJax_js_1.CommonOutputJax.OPTIONS),{adaptiveCSS:!0,matchFontHeight:!0}),r.commonStyles={'mjx-container[jax="CHTML"]':{"line-height":0},'mjx-container [space="1"]':{"margin-left":".111em"},'mjx-container [space="2"]':{"margin-left":".167em"},'mjx-container [space="3"]':{"margin-left":".222em"},'mjx-container [space="4"]':{"margin-left":".278em"},'mjx-container [space="5"]':{"margin-left":".333em"},'mjx-container [rspace="1"]':{"margin-right":".111em"},'mjx-container [rspace="2"]':{"margin-right":".167em"},'mjx-container [rspace="3"]':{"margin-right":".222em"},'mjx-container [rspace="4"]':{"margin-right":".278em"},'mjx-container [rspace="5"]':{"margin-right":".333em"},'mjx-container [size="s"]':{"font-size":"70.7%"},'mjx-container [size="ss"]':{"font-size":"50%"},'mjx-container [size="Tn"]':{"font-size":"60%"},'mjx-container [size="sm"]':{"font-size":"85%"},'mjx-container [size="lg"]':{"font-size":"120%"},'mjx-container [size="Lg"]':{"font-size":"144%"},'mjx-container [size="LG"]':{"font-size":"173%"},'mjx-container [size="hg"]':{"font-size":"207%"},'mjx-container [size="HG"]':{"font-size":"249%"},'mjx-container [width="full"]':{width:"100%"},"mjx-box":{display:"inline-block"},"mjx-block":{display:"block"},"mjx-itable":{display:"inline-table"},"mjx-row":{display:"table-row"},"mjx-row > *":{display:"table-cell"},"mjx-mtext":{display:"inline-block"},"mjx-mstyle":{display:"inline-block"},"mjx-merror":{display:"inline-block",color:"red","background-color":"yellow"},"mjx-mphantom":{visibility:"hidden"},"_::-webkit-full-page-media, _:future, :root mjx-container":{"will-change":"opacity"}},r.STYLESHEETID="MJX-CHTML-styles",r}(OutputJax_js_1.CommonOutputJax);chtml.CHTML=CHTML;var assistiveMml={},SerializedMmlVisitor={},MmlVisitor$1={},MmlFactory$1={},NodeFactory$2={},__extends$D=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(NodeFactory$2,"__esModule",{value:!0});NodeFactory$2.AbstractNodeFactory=void 0;var Factory_js_1$1=Factory,AbstractNodeFactory=function(t){__extends$D(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.create=function(e,n,i){return n===void 0&&(n={}),i===void 0&&(i=[]),this.node[e](n,i)},r}(Factory_js_1$1.AbstractFactory);NodeFactory$2.AbstractNodeFactory=AbstractNodeFactory;var MML={},mstyle={},__extends$C=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$d=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$d=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$d.apply(this,arguments)};Object.defineProperty(mstyle,"__esModule",{value:!0});mstyle.MmlMstyle=void 0;var MmlNode_js_1$i=MmlNode,Attributes_js_1$1=Attributes,MmlMstyle=function(t){__extends$C(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mstyle"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"notParent",{get:function(){return this.childNodes[0]&&this.childNodes[0].childNodes.length===1},enumerable:!1,configurable:!0}),r.prototype.setChildInheritedAttributes=function(e,n,i,o){var a=this.attributes.getExplicit("scriptlevel");a!=null&&(a=a.toString(),a.match(/^\s*[-+]/)?i+=parseInt(a):i=parseInt(a),o=!1);var s=this.attributes.getExplicit("displaystyle");s!=null&&(n=s===!0,o=!1);var l=this.attributes.getExplicit("data-cramped");l!=null&&(o=l),e=this.addInheritedAttributes(e,this.attributes.getAllAttributes()),this.childNodes[0].setInheritedAttributes(e,n,i,o)},r.defaults=__assign$d(__assign$d({},MmlNode_js_1$i.AbstractMmlLayoutNode.defaults),{scriptlevel:Attributes_js_1$1.INHERIT,displaystyle:Attributes_js_1$1.INHERIT,scriptsizemultiplier:1/Math.sqrt(2),scriptminsize:"8px",mathbackground:Attributes_js_1$1.INHERIT,mathcolor:Attributes_js_1$1.INHERIT,dir:Attributes_js_1$1.INHERIT,infixlinebreakstyle:"before"}),r}(MmlNode_js_1$i.AbstractMmlLayoutNode);mstyle.MmlMstyle=MmlMstyle;var merror={},__extends$B=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$c=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$c=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$c.apply(this,arguments)};Object.defineProperty(merror,"__esModule",{value:!0});merror.MmlMerror=void 0;var MmlNode_js_1$h=MmlNode,MmlMerror=function(t){__extends$B(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.texclass=MmlNode_js_1$h.TEXCLASS.ORD,e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"merror"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return-1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linebreakContainer",{get:function(){return!0},enumerable:!1,configurable:!0}),r.defaults=__assign$c({},MmlNode_js_1$h.AbstractMmlNode.defaults),r}(MmlNode_js_1$h.AbstractMmlNode);merror.MmlMerror=MmlMerror;var mphantom={},__extends$A=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$b=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$b=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$b.apply(this,arguments)};Object.defineProperty(mphantom,"__esModule",{value:!0});mphantom.MmlMphantom=void 0;var MmlNode_js_1$g=MmlNode,MmlMphantom=function(t){__extends$A(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.texclass=MmlNode_js_1$g.TEXCLASS.ORD,e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"mphantom"},enumerable:!1,configurable:!0}),r.defaults=__assign$b({},MmlNode_js_1$g.AbstractMmlLayoutNode.defaults),r}(MmlNode_js_1$g.AbstractMmlLayoutNode);mphantom.MmlMphantom=MmlMphantom;var maligngroup={},__extends$z=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$a=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$a=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$a.apply(this,arguments)};Object.defineProperty(maligngroup,"__esModule",{value:!0});maligngroup.MmlMaligngroup=void 0;var MmlNode_js_1$f=MmlNode,Attributes_js_1=Attributes,MmlMaligngroup=function(t){__extends$z(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"maligngroup"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSpacelike",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.setChildInheritedAttributes=function(e,n,i,o){e=this.addInheritedAttributes(e,this.attributes.getAllAttributes()),t.prototype.setChildInheritedAttributes.call(this,e,n,i,o)},r.defaults=__assign$a(__assign$a({},MmlNode_js_1$f.AbstractMmlLayoutNode.defaults),{groupalign:Attributes_js_1.INHERIT}),r}(MmlNode_js_1$f.AbstractMmlLayoutNode);maligngroup.MmlMaligngroup=MmlMaligngroup;var malignmark={},__extends$y=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$9=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$9=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$9.apply(this,arguments)};Object.defineProperty(malignmark,"__esModule",{value:!0});malignmark.MmlMalignmark=void 0;var MmlNode_js_1$e=MmlNode,MmlMalignmark=function(t){__extends$y(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"malignmark"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isSpacelike",{get:function(){return!0},enumerable:!1,configurable:!0}),r.defaults=__assign$9(__assign$9({},MmlNode_js_1$e.AbstractMmlNode.defaults),{edge:"left"}),r}(MmlNode_js_1$e.AbstractMmlNode);malignmark.MmlMalignmark=MmlMalignmark;var mathchoice={},__extends$x=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$8=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$8=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$8.apply(this,arguments)};Object.defineProperty(mathchoice,"__esModule",{value:!0});mathchoice.MathChoice=void 0;var MmlNode_js_1$d=MmlNode,MathChoice=function(t){__extends$x(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"MathChoice"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"arity",{get:function(){return 4},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"notParent",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.setInheritedAttributes=function(e,n,i,o){var a=n?0:Math.max(0,Math.min(i,2))+1,s=this.childNodes[a]||this.factory.create("mrow");this.parent.replaceChild(s,this),s.setInheritedAttributes(e,n,i,o)},r.defaults=__assign$8({},MmlNode_js_1$d.AbstractMmlBaseNode.defaults),r}(MmlNode_js_1$d.AbstractMmlBaseNode);mathchoice.MathChoice=MathChoice;var _a$9;Object.defineProperty(MML,"__esModule",{value:!0});MML.MML=void 0;var MmlNode_js_1$c=MmlNode,math_js_1=math,mi_js_1=mi,mn_js_1=mn,mo_js_1$1=mo,mtext_js_1=mtext,mspace_js_1=mspace,ms_js_1=ms,mrow_js_1=mrow,mfrac_js_1=mfrac,msqrt_js_1=msqrt,mroot_js_1=mroot,mstyle_js_1=mstyle,merror_js_1=merror,mpadded_js_1=mpadded,mphantom_js_1=mphantom,mfenced_js_1=mfenced,menclose_js_1=menclose,maction_js_1=maction,msubsup_js_1=msubsup,munderover_js_1=munderover,mmultiscripts_js_1=mmultiscripts,mtable_js_1=mtable,mtr_js_1=mtr,mtd_js_1=mtd,maligngroup_js_1=maligngroup,malignmark_js_1=malignmark,mglyph_js_1=mglyph,semantics_js_1=semantics,TeXAtom_js_1=TeXAtom$1,mathchoice_js_1=mathchoice;MML.MML=(_a$9={},_a$9[math_js_1.MmlMath.prototype.kind]=math_js_1.MmlMath,_a$9[mi_js_1.MmlMi.prototype.kind]=mi_js_1.MmlMi,_a$9[mn_js_1.MmlMn.prototype.kind]=mn_js_1.MmlMn,_a$9[mo_js_1$1.MmlMo.prototype.kind]=mo_js_1$1.MmlMo,_a$9[mtext_js_1.MmlMtext.prototype.kind]=mtext_js_1.MmlMtext,_a$9[mspace_js_1.MmlMspace.prototype.kind]=mspace_js_1.MmlMspace,_a$9[ms_js_1.MmlMs.prototype.kind]=ms_js_1.MmlMs,_a$9[mrow_js_1.MmlMrow.prototype.kind]=mrow_js_1.MmlMrow,_a$9[mrow_js_1.MmlInferredMrow.prototype.kind]=mrow_js_1.MmlInferredMrow,_a$9[mfrac_js_1.MmlMfrac.prototype.kind]=mfrac_js_1.MmlMfrac,_a$9[msqrt_js_1.MmlMsqrt.prototype.kind]=msqrt_js_1.MmlMsqrt,_a$9[mroot_js_1.MmlMroot.prototype.kind]=mroot_js_1.MmlMroot,_a$9[mstyle_js_1.MmlMstyle.prototype.kind]=mstyle_js_1.MmlMstyle,_a$9[merror_js_1.MmlMerror.prototype.kind]=merror_js_1.MmlMerror,_a$9[mpadded_js_1.MmlMpadded.prototype.kind]=mpadded_js_1.MmlMpadded,_a$9[mphantom_js_1.MmlMphantom.prototype.kind]=mphantom_js_1.MmlMphantom,_a$9[mfenced_js_1.MmlMfenced.prototype.kind]=mfenced_js_1.MmlMfenced,_a$9[menclose_js_1.MmlMenclose.prototype.kind]=menclose_js_1.MmlMenclose,_a$9[maction_js_1.MmlMaction.prototype.kind]=maction_js_1.MmlMaction,_a$9[msubsup_js_1.MmlMsub.prototype.kind]=msubsup_js_1.MmlMsub,_a$9[msubsup_js_1.MmlMsup.prototype.kind]=msubsup_js_1.MmlMsup,_a$9[msubsup_js_1.MmlMsubsup.prototype.kind]=msubsup_js_1.MmlMsubsup,_a$9[munderover_js_1.MmlMunder.prototype.kind]=munderover_js_1.MmlMunder,_a$9[munderover_js_1.MmlMover.prototype.kind]=munderover_js_1.MmlMover,_a$9[munderover_js_1.MmlMunderover.prototype.kind]=munderover_js_1.MmlMunderover,_a$9[mmultiscripts_js_1.MmlMmultiscripts.prototype.kind]=mmultiscripts_js_1.MmlMmultiscripts,_a$9[mmultiscripts_js_1.MmlMprescripts.prototype.kind]=mmultiscripts_js_1.MmlMprescripts,_a$9[mmultiscripts_js_1.MmlNone.prototype.kind]=mmultiscripts_js_1.MmlNone,_a$9[mtable_js_1.MmlMtable.prototype.kind]=mtable_js_1.MmlMtable,_a$9[mtr_js_1.MmlMlabeledtr.prototype.kind]=mtr_js_1.MmlMlabeledtr,_a$9[mtr_js_1.MmlMtr.prototype.kind]=mtr_js_1.MmlMtr,_a$9[mtd_js_1.MmlMtd.prototype.kind]=mtd_js_1.MmlMtd,_a$9[maligngroup_js_1.MmlMaligngroup.prototype.kind]=maligngroup_js_1.MmlMaligngroup,_a$9[malignmark_js_1.MmlMalignmark.prototype.kind]=malignmark_js_1.MmlMalignmark,_a$9[mglyph_js_1.MmlMglyph.prototype.kind]=mglyph_js_1.MmlMglyph,_a$9[semantics_js_1.MmlSemantics.prototype.kind]=semantics_js_1.MmlSemantics,_a$9[semantics_js_1.MmlAnnotation.prototype.kind]=semantics_js_1.MmlAnnotation,_a$9[semantics_js_1.MmlAnnotationXML.prototype.kind]=semantics_js_1.MmlAnnotationXML,_a$9[TeXAtom_js_1.TeXAtom.prototype.kind]=TeXAtom_js_1.TeXAtom,_a$9[mathchoice_js_1.MathChoice.prototype.kind]=mathchoice_js_1.MathChoice,_a$9[MmlNode_js_1$c.TextNode.prototype.kind]=MmlNode_js_1$c.TextNode,_a$9[MmlNode_js_1$c.XMLNode.prototype.kind]=MmlNode_js_1$c.XMLNode,_a$9);var __extends$w=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(MmlFactory$1,"__esModule",{value:!0});MmlFactory$1.MmlFactory=void 0;var NodeFactory_js_1$2=NodeFactory$2,MML_js_1=MML,MmlFactory=function(t){__extends$w(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"MML",{get:function(){return this.node},enumerable:!1,configurable:!0}),r.defaultNodes=MML_js_1.MML,r}(NodeFactory_js_1$2.AbstractNodeFactory);MmlFactory$1.MmlFactory=MmlFactory;var Visitor={},__values$l=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$m=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$f=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(Visitor,"__esModule",{value:!0});Visitor.AbstractVisitor=void 0;var Node_js_1=Node$1,AbstractVisitor=function(){function t(r){var e,n;this.nodeHandlers=new Map;try{for(var i=__values$l(r.getKinds()),o=i.next();!o.done;o=i.next()){var a=o.value,s=this[t.methodName(a)];s&&this.nodeHandlers.set(a,s)}}catch(l){e={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}return t.methodName=function(r){return"visit"+(r.charAt(0).toUpperCase()+r.substr(1)).replace(/[^a-z0-9_]/ig,"_")+"Node"},t.prototype.visitTree=function(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.visitNode.apply(this,__spreadArray$f([r],__read$m(e),!1))},t.prototype.visitNode=function(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this.nodeHandlers.get(r.kind)||this.visitDefault;return i.call.apply(i,__spreadArray$f([this,r],__read$m(e),!1))},t.prototype.visitDefault=function(r){for(var e,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];if(r instanceof Node_js_1.AbstractNode)try{for(var a=__values$l(r.childNodes),s=a.next();!s.done;s=a.next()){var l=s.value;this.visitNode.apply(this,__spreadArray$f([l],__read$m(i),!1))}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}},t.prototype.setNodeHandler=function(r,e){this.nodeHandlers.set(r,e)},t.prototype.removeNodeHandler=function(r){this.nodeHandlers.delete(r)},t}();Visitor.AbstractVisitor=AbstractVisitor;var __extends$v=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(MmlVisitor$1,"__esModule",{value:!0});MmlVisitor$1.MmlVisitor=void 0;var MmlFactory_js_1=MmlFactory$1,Visitor_js_1=Visitor,MmlVisitor=function(t){__extends$v(r,t);function r(e){return e===void 0&&(e=null),e||(e=new MmlFactory_js_1.MmlFactory),t.call(this,e)||this}return r.prototype.visitTextNode=function(e){},r.prototype.visitXMLNode=function(e){},r}(Visitor_js_1.AbstractVisitor);MmlVisitor$1.MmlVisitor=MmlVisitor;(function(t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var c=function(f,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,m){u.__proto__=m}||function(u,m){for(var p in m)Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])},c(f,d)};return function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");c(f,d);function u(){this.constructor=f}f.prototype=d===null?Object.create(d):(u.prototype=d.prototype,new u)}}(),e=commonjsGlobal&&commonjsGlobal.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,d=f&&c[f],u=0;if(d)return d.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&u>=c.length&&(c=void 0),{value:c&&c[u++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},n=commonjsGlobal&&commonjsGlobal.__read||function(c,f){var d=typeof Symbol=="function"&&c[Symbol.iterator];if(!d)return c;var u=d.call(c),m,p=[],_;try{for(;(f===void 0||f-- >0)&&!(m=u.next()).done;)p.push(m.value)}catch(y){_={error:y}}finally{try{m&&!m.done&&(d=u.return)&&d.call(u)}finally{if(_)throw _.error}}return p};Object.defineProperty(t,"__esModule",{value:!0}),t.SerializedMmlVisitor=t.toEntity=t.DATAMJX=void 0;var i=MmlVisitor$1,o=MmlNode,a=mi;t.DATAMJX="data-mjx-";var s=function(c){return"&#x"+c.codePointAt(0).toString(16).toUpperCase()+";"};t.toEntity=s;var l=function(c){r(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.prototype.visitTree=function(d){return this.visitNode(d,"")},f.prototype.visitTextNode=function(d,u){return this.quoteHTML(d.getText())},f.prototype.visitXMLNode=function(d,u){return u+d.getSerializedXML()},f.prototype.visitInferredMrowNode=function(d,u){var m,p,_=[];try{for(var y=e(d.childNodes),g=y.next();!g.done;g=y.next()){var v=g.value;_.push(this.visitNode(v,u))}}catch(x){m={error:x}}finally{try{g&&!g.done&&(p=y.return)&&p.call(y)}finally{if(m)throw m.error}}return _.join(`
`)},f.prototype.visitTeXAtomNode=function(d,u){var m=this.childNodeMml(d,u+"  ",`
`),p=u+"<mrow"+this.getAttributes(d)+">"+(m.match(/\S/)?`
`+m+u:"")+"</mrow>";return p},f.prototype.visitAnnotationNode=function(d,u){return u+"<annotation"+this.getAttributes(d)+">"+this.childNodeMml(d,"","")+"</annotation>"},f.prototype.visitDefault=function(d,u){var m=d.kind,p=n(d.isToken||d.childNodes.length===0?["",""]:[`
`,u],2),_=p[0],y=p[1],g=this.childNodeMml(d,u+"  ",_);return u+"<"+m+this.getAttributes(d)+">"+(g.match(/\S/)?_+g+y:"")+"</"+m+">"},f.prototype.childNodeMml=function(d,u,m){var p,_,y="";try{for(var g=e(d.childNodes),v=g.next();!v.done;v=g.next()){var x=v.value;y+=this.visitNode(x,u)+m}}catch(b){p={error:b}}finally{try{v&&!v.done&&(_=g.return)&&_.call(g)}finally{if(p)throw p.error}}return y},f.prototype.getAttributes=function(d){var u,m,p=[],_=this.constructor.defaultAttributes[d.kind]||{},y=Object.assign({},_,this.getDataAttributes(d),d.attributes.getAllAttributes()),g=this.constructor.variants;y.hasOwnProperty("mathvariant")&&g.hasOwnProperty(y.mathvariant)&&(y.mathvariant=g[y.mathvariant]);try{for(var v=e(Object.keys(y)),x=v.next();!x.done;x=v.next()){var b=x.value,S=String(y[b]);S!==void 0&&p.push(b+'="'+this.quoteHTML(S)+'"')}}catch(M){u={error:M}}finally{try{x&&!x.done&&(m=v.return)&&m.call(v)}finally{if(u)throw u.error}}return p.length?" "+p.join(" "):""},f.prototype.getDataAttributes=function(d){var u={},m=d.attributes.getExplicit("mathvariant"),p=this.constructor.variants;m&&p.hasOwnProperty(m)&&this.setDataAttribute(u,"variant",m),d.getProperty("variantForm")&&this.setDataAttribute(u,"alternate","1"),d.getProperty("pseudoscript")&&this.setDataAttribute(u,"pseudoscript","true"),d.getProperty("autoOP")===!1&&this.setDataAttribute(u,"auto-op","false");var _=d.getProperty("scriptalign");_&&this.setDataAttribute(u,"script-align",_);var y=d.getProperty("texClass");if(y!==void 0){var g=!0;if(y===o.TEXCLASS.OP&&d.isKind("mi")){var v=d.getText();g=!(v.length>1&&v.match(a.MmlMi.operatorName))}g&&this.setDataAttribute(u,"texclass",y<0?"NONE":o.TEXCLASSNAMES[y])}return d.getProperty("scriptlevel")&&d.getProperty("useHeight")===!1&&this.setDataAttribute(u,"smallmatrix","true"),u},f.prototype.setDataAttribute=function(d,u,m){d[t.DATAMJX+u]=m},f.prototype.quoteHTML=function(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/[\uD800-\uDBFF]./g,t.toEntity).replace(/[\u0080-\uD7FF\uE000-\uFFFF]/g,t.toEntity)},f.variants={"-tex-calligraphic":"script","-tex-bold-calligraphic":"bold-script","-tex-oldstyle":"normal","-tex-bold-oldstyle":"bold","-tex-mathit":"italic"},f.defaultAttributes={math:{xmlns:"http://www.w3.org/1998/Math/MathML"}},f}(i.MmlVisitor);t.SerializedMmlVisitor=l})(SerializedMmlVisitor);var __extends$u=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$7=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$7=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$7.apply(this,arguments)},__read$l=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$e=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__values$k=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(assistiveMml,"__esModule",{value:!0});assistiveMml.AssistiveMmlHandler=assistiveMml.AssistiveMmlMathDocumentMixin=assistiveMml.AssistiveMmlMathItemMixin=assistiveMml.LimitedMmlVisitor=void 0;var MathItem_js_1$3=MathItem,SerializedMmlVisitor_js_1=SerializedMmlVisitor,Options_js_1$8=Options$1,LimitedMmlVisitor=function(t){__extends$u(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.getAttributes=function(e){return t.prototype.getAttributes.call(this,e).replace(/ ?id=".*?"/,"")},r}(SerializedMmlVisitor_js_1.SerializedMmlVisitor);assistiveMml.LimitedMmlVisitor=LimitedMmlVisitor;(0,MathItem_js_1$3.newState)("ASSISTIVEMML",153);function AssistiveMmlMathItemMixin(t){return function(r){__extends$u(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.assistiveMml=function(n,i){if(i===void 0&&(i=!1),!(this.state()>=MathItem_js_1$3.STATE.ASSISTIVEMML)){if(!this.isEscaped&&(n.options.enableAssistiveMml||i)){var o=n.adaptor,a=n.toMML(this.root).replace(/\n */g,"").replace(/<!--.*?-->/g,""),s=o.firstChild(o.body(o.parse(a,"text/html"))),l=o.node("mjx-assistive-mml",{unselectable:"on",display:this.display?"block":"inline"},[s]);o.setAttribute(o.firstChild(this.typesetRoot),"aria-hidden","true"),o.setStyle(this.typesetRoot,"position","relative"),o.append(this.typesetRoot,l)}this.state(MathItem_js_1$3.STATE.ASSISTIVEMML)}},e}(t)}assistiveMml.AssistiveMmlMathItemMixin=AssistiveMmlMathItemMixin;function AssistiveMmlMathDocumentMixin(t){var r;return r=function(e){__extends$u(n,e);function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=e.apply(this,__spreadArray$e([],__read$l(i),!1))||this,s=a.constructor,l=s.ProcessBits;return l.has("assistive-mml")||l.allocate("assistive-mml"),a.visitor=new LimitedMmlVisitor(a.mmlFactory),a.options.MathItem=AssistiveMmlMathItemMixin(a.options.MathItem),"addStyles"in a&&a.addStyles(s.assistiveStyles),a}return n.prototype.toMML=function(i){return this.visitor.visitTree(i)},n.prototype.assistiveMml=function(){var i,o;if(!this.processed.isSet("assistive-mml")){try{for(var a=__values$k(this.math),s=a.next();!s.done;s=a.next()){var l=s.value;l.assistiveMml(this)}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}this.processed.set("assistive-mml")}return this},n.prototype.state=function(i,o){return o===void 0&&(o=!1),e.prototype.state.call(this,i,o),i<MathItem_js_1$3.STATE.ASSISTIVEMML&&this.processed.clear("assistive-mml"),this},n}(t),r.OPTIONS=__assign$7(__assign$7({},t.OPTIONS),{enableAssistiveMml:!0,renderActions:(0,Options_js_1$8.expandable)(__assign$7(__assign$7({},t.OPTIONS.renderActions),{assistiveMml:[MathItem_js_1$3.STATE.ASSISTIVEMML]}))}),r.assistiveStyles={"mjx-assistive-mml":{position:"absolute !important",top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)",padding:"1px 0px 0px 0px !important",border:"0px !important",display:"block !important",width:"auto !important",overflow:"hidden !important","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},'mjx-assistive-mml[display="block"]':{width:"100% !important"}},r}assistiveMml.AssistiveMmlMathDocumentMixin=AssistiveMmlMathDocumentMixin;function AssistiveMmlHandler(t){return t.documentClass=AssistiveMmlMathDocumentMixin(t.documentClass),t}assistiveMml.AssistiveMmlHandler=AssistiveMmlHandler;var html$1={},mathjax={},version={};Object.defineProperty(version,"__esModule",{value:!0});version.VERSION=void 0;version.VERSION="3.2.2";var HandlerList$1={},__extends$t=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__values$j=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(HandlerList$1,"__esModule",{value:!0});HandlerList$1.HandlerList=void 0;var PrioritizedList_js_1=PrioritizedList$1,HandlerList=function(t){__extends$t(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.register=function(e){return this.add(e,e.priority)},r.prototype.unregister=function(e){this.remove(e)},r.prototype.handlesDocument=function(e){var n,i;try{for(var o=__values$j(this),a=o.next();!a.done;a=o.next()){var s=a.value,l=s.item;if(l.handlesDocument(e))return l}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}throw new Error("Can't find handler for document")},r.prototype.document=function(e,n){return n===void 0&&(n=null),this.handlesDocument(e).create(e,n)},r}(PrioritizedList_js_1.PrioritizedList);HandlerList$1.HandlerList=HandlerList;var Retries={};Object.defineProperty(Retries,"__esModule",{value:!0});Retries.retryAfter=Retries.handleRetriesFor=void 0;function handleRetriesFor(t){return new Promise(function r(e,n){try{e(t())}catch(i){i.retry&&i.retry instanceof Promise?i.retry.then(function(){return r(e,n)}).catch(function(o){return n(o)}):i.restart&&i.restart.isCallback?MathJax.Callback.After(function(){return r(e,n)},i.restart):n(i)}})}Retries.handleRetriesFor=handleRetriesFor;function retryAfter(t){var r=new Error("MathJax retry");throw r.retry=t,r}Retries.retryAfter=retryAfter;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.mathjax=void 0;var r=version,e=HandlerList$1,n=Retries;t.mathjax={version:r.VERSION,handlers:new e.HandlerList,document:function(i,o){return t.mathjax.handlers.document(i,o)},handleRetriesFor:n.handleRetriesFor,retryAfter:n.retryAfter,asyncLoad:null}})(mathjax);var HTMLHandler$1={},Handler={},MathDocument={},InputJax$1={};Object.defineProperty(InputJax$1,"__esModule",{value:!0});InputJax$1.AbstractInputJax=void 0;var Options_js_1$7=Options$1,FunctionList_js_1=FunctionList$1,AbstractInputJax=function(){function t(r){r===void 0&&(r={}),this.adaptor=null,this.mmlFactory=null;var e=this.constructor;this.options=(0,Options_js_1$7.userOptions)((0,Options_js_1$7.defaultOptions)({},e.OPTIONS),r),this.preFilters=new FunctionList_js_1.FunctionList,this.postFilters=new FunctionList_js_1.FunctionList}return Object.defineProperty(t.prototype,"name",{get:function(){return this.constructor.NAME},enumerable:!1,configurable:!0}),t.prototype.setAdaptor=function(r){this.adaptor=r},t.prototype.setMmlFactory=function(r){this.mmlFactory=r},t.prototype.initialize=function(){},t.prototype.reset=function(){},Object.defineProperty(t.prototype,"processStrings",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.findMath=function(r,e){return[]},t.prototype.executeFilters=function(r,e,n,i){var o={math:e,document:n,data:i};return r.execute(o),o.data},t.NAME="generic",t.OPTIONS={},t}();InputJax$1.AbstractInputJax=AbstractInputJax;var MathList={},LinkedList={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__generator||function(s,l){var c={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},f,d,u,m;return m={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function p(y){return function(g){return _([y,g])}}function _(y){if(f)throw new TypeError("Generator is already executing.");for(;c;)try{if(f=1,d&&(u=y[0]&2?d.return:y[0]?d.throw||((u=d.return)&&u.call(d),0):d.next)&&!(u=u.call(d,y[1])).done)return u;switch(d=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return c.label++,{value:y[1],done:!1};case 5:c.label++,d=y[1],y=[0];continue;case 7:y=c.ops.pop(),c.trys.pop();continue;default:if(u=c.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){c=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){c.label=y[1];break}if(y[0]===6&&c.label<u[1]){c.label=u[1],u=y;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(y);break}u[2]&&c.ops.pop(),c.trys.pop();continue}y=l.call(s,c)}catch(g){y=[6,g],d=0}finally{f=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}},e=commonjsGlobal&&commonjsGlobal.__read||function(s,l){var c=typeof Symbol=="function"&&s[Symbol.iterator];if(!c)return s;var f=c.call(s),d,u=[],m;try{for(;(l===void 0||l-- >0)&&!(d=f.next()).done;)u.push(d.value)}catch(p){m={error:p}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(m)throw m.error}}return u},n=commonjsGlobal&&commonjsGlobal.__spreadArray||function(s,l,c){if(c||arguments.length===2)for(var f=0,d=l.length,u;f<d;f++)(u||!(f in l))&&(u||(u=Array.prototype.slice.call(l,0,f)),u[f]=l[f]);return s.concat(u||Array.prototype.slice.call(l))},i=commonjsGlobal&&commonjsGlobal.__values||function(s){var l=typeof Symbol=="function"&&Symbol.iterator,c=l&&s[l],f=0;if(c)return c.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&f>=s.length&&(s=void 0),{value:s&&s[f++],done:!s}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedList=t.ListItem=t.END=void 0,t.END=Symbol();var o=function(){function s(l){l===void 0&&(l=null),this.next=null,this.prev=null,this.data=l}return s}();t.ListItem=o;var a=function(){function s(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];this.list=new o(t.END),this.list.next=this.list.prev=this.list,this.push.apply(this,n([],e(l),!1))}return s.prototype.isBefore=function(l,c){return l<c},s.prototype.push=function(){for(var l,c,f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];try{for(var u=i(f),m=u.next();!m.done;m=u.next()){var p=m.value,_=new o(p);_.next=this.list,_.prev=this.list.prev,this.list.prev=_,_.prev.next=_}}catch(y){l={error:y}}finally{try{m&&!m.done&&(c=u.return)&&c.call(u)}finally{if(l)throw l.error}}return this},s.prototype.pop=function(){var l=this.list.prev;return l.data===t.END?null:(this.list.prev=l.prev,l.prev.next=this.list,l.next=l.prev=null,l.data)},s.prototype.unshift=function(){for(var l,c,f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];try{for(var u=i(f.slice(0).reverse()),m=u.next();!m.done;m=u.next()){var p=m.value,_=new o(p);_.next=this.list.next,_.prev=this.list,this.list.next=_,_.next.prev=_}}catch(y){l={error:y}}finally{try{m&&!m.done&&(c=u.return)&&c.call(u)}finally{if(l)throw l.error}}return this},s.prototype.shift=function(){var l=this.list.next;return l.data===t.END?null:(this.list.next=l.next,l.next.prev=this.list,l.next=l.prev=null,l.data)},s.prototype.remove=function(){for(var l,c,f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];var u=new Map;try{for(var m=i(f),p=m.next();!p.done;p=m.next()){var _=p.value;u.set(_,!0)}}catch(v){l={error:v}}finally{try{p&&!p.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}for(var y=this.list.next;y.data!==t.END;){var g=y.next;u.has(y.data)&&(y.prev.next=y.next,y.next.prev=y.prev,y.next=y.prev=null),y=g}},s.prototype.clear=function(){return this.list.next.prev=this.list.prev.next=null,this.list.next=this.list.prev=this.list,this},s.prototype[Symbol.iterator]=function(){var l;return r(this,function(c){switch(c.label){case 0:l=this.list.next,c.label=1;case 1:return l.data===t.END?[3,3]:[4,l.data];case 2:return c.sent(),l=l.next,[3,1];case 3:return[2]}})},s.prototype.reversed=function(){var l;return r(this,function(c){switch(c.label){case 0:l=this.list.prev,c.label=1;case 1:return l.data===t.END?[3,3]:[4,l.data];case 2:return c.sent(),l=l.prev,[3,1];case 3:return[2]}})},s.prototype.insert=function(l,c){c===void 0&&(c=null),c===null&&(c=this.isBefore.bind(this));for(var f=new o(l),d=this.list.next;d.data!==t.END&&c(d.data,f.data);)d=d.next;return f.prev=d.prev,f.next=d,d.prev.next=d.prev=f,this},s.prototype.sort=function(l){var c,f;l===void 0&&(l=null),l===null&&(l=this.isBefore.bind(this));var d=[];try{for(var u=i(this),m=u.next();!m.done;m=u.next()){var p=m.value;d.push(new s(p))}}catch(g){c={error:g}}finally{try{m&&!m.done&&(f=u.return)&&f.call(u)}finally{if(c)throw c.error}}for(this.list.next=this.list.prev=this.list;d.length>1;){var _=d.shift(),y=d.shift();_.merge(y,l),d.push(_)}return d.length&&(this.list=d[0].list),this},s.prototype.merge=function(l,c){var f,d,u,m,p;c===void 0&&(c=null),c===null&&(c=this.isBefore.bind(this));for(var _=this.list.next,y=l.list.next;_.data!==t.END&&y.data!==t.END;)c(y.data,_.data)?(f=e([_,y],2),y.prev.next=f[0],_.prev.next=f[1],d=e([_.prev,y.prev],2),y.prev=d[0],_.prev=d[1],u=e([l.list,this.list],2),this.list.prev.next=u[0],l.list.prev.next=u[1],m=e([l.list.prev,this.list.prev],2),this.list.prev=m[0],l.list.prev=m[1],p=e([y.next,_],2),_=p[0],y=p[1]):_=_.next;return y.data!==t.END&&(this.list.prev.next=l.list.next,l.list.next.prev=this.list.prev,l.list.prev.next=this.list,this.list.prev=l.list.prev,l.list.next=l.list.prev=l.list),this},s}();t.LinkedList=a})(LinkedList);var __extends$s=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(MathList,"__esModule",{value:!0});MathList.AbstractMathList=void 0;var LinkedList_js_1=LinkedList,AbstractMathList=function(t){__extends$s(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.isBefore=function(e,n){return e.start.i<n.start.i||e.start.i===n.start.i&&e.start.n<n.start.n},r}(LinkedList_js_1.LinkedList);MathList.AbstractMathList=AbstractMathList;var BitField$1={},__extends$r=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__values$i=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$k=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$d=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(BitField$1,"__esModule",{value:!0});BitField$1.BitFieldClass=BitField$1.BitField=void 0;var BitField=function(){function t(){this.bits=0}return t.allocate=function(){for(var r,e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{for(var o=__values$i(n),a=o.next();!a.done;a=o.next()){var s=a.value;if(this.has(s))throw new Error("Bit already allocated for "+s);if(this.next===t.MAXBIT)throw new Error("Maximum number of bits already allocated");this.names.set(s,this.next),this.next<<=1}}catch(l){r={error:l}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}},t.has=function(r){return this.names.has(r)},t.prototype.set=function(r){this.bits|=this.getBit(r)},t.prototype.clear=function(r){this.bits&=~this.getBit(r)},t.prototype.isSet=function(r){return!!(this.bits&this.getBit(r))},t.prototype.reset=function(){this.bits=0},t.prototype.getBit=function(r){var e=this.constructor.names.get(r);if(!e)throw new Error("Unknown bit-field name: "+r);return e},t.MAXBIT=1<<31,t.next=1,t.names=new Map,t}();BitField$1.BitField=BitField;function BitFieldClass(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=function(n){__extends$r(i,n);function i(){return n!==null&&n.apply(this,arguments)||this}return i}(BitField);return e.allocate.apply(e,__spreadArray$d([],__read$k(t),!1)),e}BitField$1.BitFieldClass=BitFieldClass;(function(t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var x=function(b,S){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,C){M.__proto__=C}||function(M,C){for(var A in C)Object.prototype.hasOwnProperty.call(C,A)&&(M[A]=C[A])},x(b,S)};return function(b,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");x(b,S);function M(){this.constructor=b}b.prototype=S===null?Object.create(S):(M.prototype=S.prototype,new M)}}(),e=commonjsGlobal&&commonjsGlobal.__values||function(x){var b=typeof Symbol=="function"&&Symbol.iterator,S=b&&x[b],M=0;if(S)return S.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&M>=x.length&&(x=void 0),{value:x&&x[M++],done:!x}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")},n=commonjsGlobal&&commonjsGlobal.__read||function(x,b){var S=typeof Symbol=="function"&&x[Symbol.iterator];if(!S)return x;var M=S.call(x),C,A=[],E;try{for(;(b===void 0||b-- >0)&&!(C=M.next()).done;)A.push(C.value)}catch($){E={error:$}}finally{try{C&&!C.done&&(S=M.return)&&S.call(M)}finally{if(E)throw E.error}}return A},i=commonjsGlobal&&commonjsGlobal.__spreadArray||function(x,b,S){if(S||arguments.length===2)for(var M=0,C=b.length,A;M<C;M++)(A||!(M in b))&&(A||(A=Array.prototype.slice.call(b,0,M)),A[M]=b[M]);return x.concat(A||Array.prototype.slice.call(b))};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMathDocument=t.resetAllOptions=t.resetOptions=t.RenderList=void 0;var o=Options$1,a=InputJax$1,s=OutputJax,l=MathList,c=MathItem,f=MmlFactory$1,d=BitField$1,u=PrioritizedList$1,m=function(x){r(b,x);function b(){return x!==null&&x.apply(this,arguments)||this}return b.create=function(S){var M,C,A=new this;try{for(var E=e(Object.keys(S)),$=E.next();!$.done;$=E.next()){var D=$.value,B=n(this.action(D,S[D]),2),F=B[0],I=B[1];I&&A.add(F,I)}}catch(H){M={error:H}}finally{try{$&&!$.done&&(C=E.return)&&C.call(E)}finally{if(M)throw M.error}}return A},b.action=function(S,M){var C,A,E,$,D,B,F=!0,I=M[0];if(M.length===1||typeof M[1]=="boolean")M.length===2&&(F=M[1]),C=n(this.methodActions(S),2),D=C[0],B=C[1];else if(typeof M[1]=="string")if(typeof M[2]=="string"){M.length===4&&(F=M[3]);var H=n(M.slice(1),2),W=H[0],Z=H[1];A=n(this.methodActions(W,Z),2),D=A[0],B=A[1]}else M.length===3&&(F=M[2]),E=n(this.methodActions(M[1]),2),D=E[0],B=E[1];else M.length===4&&(F=M[3]),$=n(M.slice(1),2),D=$[0],B=$[1];return[{id:S,renderDoc:D,renderMath:B,convert:F},I]},b.methodActions=function(S,M){return M===void 0&&(M=S),[function(C){return S&&C[S](),!1},function(C,A){return M&&C[M](A),!1}]},b.prototype.renderDoc=function(S,M){var C,A;M===void 0&&(M=c.STATE.UNPROCESSED);try{for(var E=e(this.items),$=E.next();!$.done;$=E.next()){var D=$.value;if(D.priority>=M&&D.item.renderDoc(S))return}}catch(B){C={error:B}}finally{try{$&&!$.done&&(A=E.return)&&A.call(E)}finally{if(C)throw C.error}}},b.prototype.renderMath=function(S,M,C){var A,E;C===void 0&&(C=c.STATE.UNPROCESSED);try{for(var $=e(this.items),D=$.next();!D.done;D=$.next()){var B=D.value;if(B.priority>=C&&B.item.renderMath(S,M))return}}catch(F){A={error:F}}finally{try{D&&!D.done&&(E=$.return)&&E.call($)}finally{if(A)throw A.error}}},b.prototype.renderConvert=function(S,M,C){var A,E;C===void 0&&(C=c.STATE.LAST);try{for(var $=e(this.items),D=$.next();!D.done;D=$.next()){var B=D.value;if(B.priority>C||B.item.convert&&B.item.renderMath(S,M))return}}catch(F){A={error:F}}finally{try{D&&!D.done&&(E=$.return)&&E.call($)}finally{if(A)throw A.error}}},b.prototype.findID=function(S){var M,C;try{for(var A=e(this.items),E=A.next();!E.done;E=A.next()){var $=E.value;if($.item.id===S)return $.item}}catch(D){M={error:D}}finally{try{E&&!E.done&&(C=A.return)&&C.call(A)}finally{if(M)throw M.error}}return null},b}(u.PrioritizedList);t.RenderList=m,t.resetOptions={all:!1,processed:!1,inputJax:null,outputJax:null},t.resetAllOptions={all:!0,processed:!0,inputJax:[],outputJax:[]};var p=function(x){r(b,x);function b(){return x!==null&&x.apply(this,arguments)||this}return b.prototype.compile=function(S){return null},b}(a.AbstractInputJax),_=function(x){r(b,x);function b(){return x!==null&&x.apply(this,arguments)||this}return b.prototype.typeset=function(S,M){return null},b.prototype.escaped=function(S,M){return null},b}(s.AbstractOutputJax),y=function(x){r(b,x);function b(){return x!==null&&x.apply(this,arguments)||this}return b}(l.AbstractMathList),g=function(x){r(b,x);function b(){return x!==null&&x.apply(this,arguments)||this}return b}(c.AbstractMathItem),v=function(){function x(b,S,M){var C=this,A=this.constructor;this.document=b,this.options=(0,o.userOptions)((0,o.defaultOptions)({},A.OPTIONS),M),this.math=new(this.options.MathList||y),this.renderActions=m.create(this.options.renderActions),this.processed=new x.ProcessBits,this.outputJax=this.options.OutputJax||new _;var E=this.options.InputJax||[new p];Array.isArray(E)||(E=[E]),this.inputJax=E,this.adaptor=S,this.outputJax.setAdaptor(S),this.inputJax.map(function($){return $.setAdaptor(S)}),this.mmlFactory=this.options.MmlFactory||new f.MmlFactory,this.inputJax.map(function($){return $.setMmlFactory(C.mmlFactory)}),this.outputJax.initialize(),this.inputJax.map(function($){return $.initialize()})}return Object.defineProperty(x.prototype,"kind",{get:function(){return this.constructor.KIND},enumerable:!1,configurable:!0}),x.prototype.addRenderAction=function(b){for(var S=[],M=1;M<arguments.length;M++)S[M-1]=arguments[M];var C=n(m.action(b,S),2),A=C[0],E=C[1];this.renderActions.add(A,E)},x.prototype.removeRenderAction=function(b){var S=this.renderActions.findID(b);S&&this.renderActions.remove(S)},x.prototype.render=function(){return this.renderActions.renderDoc(this),this},x.prototype.rerender=function(b){return b===void 0&&(b=c.STATE.RERENDER),this.state(b-1),this.render(),this},x.prototype.convert=function(b,S){S===void 0&&(S={});var M=(0,o.userOptions)({format:this.inputJax[0].name,display:!0,end:c.STATE.LAST,em:16,ex:8,containerWidth:null,lineWidth:1e6,scale:1,family:""},S),C=M.format,A=M.display,E=M.end,$=M.ex,D=M.em,B=M.containerWidth,F=M.lineWidth,I=M.scale,H=M.family;B===null&&(B=80*$);var W=this.inputJax.reduce(function(et,lt){return lt.name===C?lt:et},null),Z=new this.options.MathItem(b,W,A);return Z.start.node=this.adaptor.body(this.document),Z.setMetrics(D,$,B,F,I),this.outputJax.options.mtextInheritFont&&(Z.outputData.mtextFamily=H),this.outputJax.options.merrorInheritFont&&(Z.outputData.merrorFamily=H),Z.convert(this,E),Z.typesetRoot||Z.root},x.prototype.findMath=function(b){return this.processed.set("findMath"),this},x.prototype.compile=function(){var b,S,M,C;if(!this.processed.isSet("compile")){var A=[];try{for(var E=e(this.math),$=E.next();!$.done;$=E.next()){var D=$.value;this.compileMath(D),D.inputData.recompile!==void 0&&A.push(D)}}catch(H){b={error:H}}finally{try{$&&!$.done&&(S=E.return)&&S.call(E)}finally{if(b)throw b.error}}try{for(var B=e(A),F=B.next();!F.done;F=B.next()){var D=F.value,I=D.inputData.recompile;D.state(I.state),D.inputData.recompile=I,this.compileMath(D)}}catch(H){M={error:H}}finally{try{F&&!F.done&&(C=B.return)&&C.call(B)}finally{if(M)throw M.error}}this.processed.set("compile")}return this},x.prototype.compileMath=function(b){try{b.compile(this)}catch(S){if(S.retry||S.restart)throw S;this.options.compileError(this,b,S),b.inputData.error=S}},x.prototype.compileError=function(b,S){b.root=this.mmlFactory.create("math",null,[this.mmlFactory.create("merror",{"data-mjx-error":S.message,title:S.message},[this.mmlFactory.create("mtext",null,[this.mmlFactory.create("text").setText("Math input error")])])]),b.display&&b.root.attributes.set("display","block"),b.inputData.error=S.message},x.prototype.typeset=function(){var b,S;if(!this.processed.isSet("typeset")){try{for(var M=e(this.math),C=M.next();!C.done;C=M.next()){var A=C.value;try{A.typeset(this)}catch(E){if(E.retry||E.restart)throw E;this.options.typesetError(this,A,E),A.outputData.error=E}}}catch(E){b={error:E}}finally{try{C&&!C.done&&(S=M.return)&&S.call(M)}finally{if(b)throw b.error}}this.processed.set("typeset")}return this},x.prototype.typesetError=function(b,S){b.typesetRoot=this.adaptor.node("mjx-container",{class:"MathJax mjx-output-error",jax:this.outputJax.name},[this.adaptor.node("span",{"data-mjx-error":S.message,title:S.message,style:{color:"red","background-color":"yellow","line-height":"normal"}},[this.adaptor.text("Math output error")])]),b.display&&this.adaptor.setAttributes(b.typesetRoot,{style:{display:"block",margin:"1em 0","text-align":"center"}}),b.outputData.error=S.message},x.prototype.getMetrics=function(){return this.processed.isSet("getMetrics")||(this.outputJax.getMetrics(this),this.processed.set("getMetrics")),this},x.prototype.updateDocument=function(){var b,S;if(!this.processed.isSet("updateDocument")){try{for(var M=e(this.math.reversed()),C=M.next();!C.done;C=M.next()){var A=C.value;A.updateDocument(this)}}catch(E){b={error:E}}finally{try{C&&!C.done&&(S=M.return)&&S.call(M)}finally{if(b)throw b.error}}this.processed.set("updateDocument")}return this},x.prototype.removeFromDocument=function(b){return this},x.prototype.state=function(b,S){var M,C;S===void 0&&(S=!1);try{for(var A=e(this.math),E=A.next();!E.done;E=A.next()){var $=E.value;$.state(b,S)}}catch(D){M={error:D}}finally{try{E&&!E.done&&(C=A.return)&&C.call(A)}finally{if(M)throw M.error}}return b<c.STATE.INSERTED&&this.processed.clear("updateDocument"),b<c.STATE.TYPESET&&(this.processed.clear("typeset"),this.processed.clear("getMetrics")),b<c.STATE.COMPILED&&this.processed.clear("compile"),this},x.prototype.reset=function(b){var S;return b===void 0&&(b={processed:!0}),b=(0,o.userOptions)(Object.assign({},t.resetOptions),b),b.all&&Object.assign(b,t.resetAllOptions),b.processed&&this.processed.reset(),b.inputJax&&this.inputJax.forEach(function(M){return M.reset.apply(M,i([],n(b.inputJax),!1))}),b.outputJax&&(S=this.outputJax).reset.apply(S,i([],n(b.outputJax),!1)),this},x.prototype.clear=function(){return this.reset(),this.math.clear(),this},x.prototype.concat=function(b){return this.math.merge(b),this},x.prototype.clearMathItemsWithin=function(b){var S,M=this.getMathItemsWithin(b);return(S=this.math).remove.apply(S,i([],n(M),!1)),M},x.prototype.getMathItemsWithin=function(b){var S,M,C,A;Array.isArray(b)||(b=[b]);var E=this.adaptor,$=[],D=E.getElements(b,this.document);try{t:for(var B=e(this.math),F=B.next();!F.done;F=B.next()){var I=F.value;try{for(var H=(C=void 0,e(D)),W=H.next();!W.done;W=H.next()){var Z=W.value;if(I.start.node&&E.contains(Z,I.start.node)){$.push(I);continue t}}}catch(et){C={error:et}}finally{try{W&&!W.done&&(A=H.return)&&A.call(H)}finally{if(C)throw C.error}}}}catch(et){S={error:et}}finally{try{F&&!F.done&&(M=B.return)&&M.call(B)}finally{if(S)throw S.error}}return $},x.KIND="MathDocument",x.OPTIONS={OutputJax:null,InputJax:null,MmlFactory:null,MathList:y,MathItem:g,compileError:function(b,S,M){b.compileError(S,M)},typesetError:function(b,S,M){b.typesetError(S,M)},renderActions:(0,o.expandable)({find:[c.STATE.FINDMATH,"findMath","",!1],compile:[c.STATE.COMPILED],metrics:[c.STATE.METRICS,"getMetrics","",!1],typeset:[c.STATE.TYPESET],update:[c.STATE.INSERTED,"updateDocument",!1]})},x.ProcessBits=(0,d.BitFieldClass)("findMath","compile","getMetrics","typeset","updateDocument"),x}();t.AbstractMathDocument=v})(MathDocument);var __extends$q=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Handler,"__esModule",{value:!0});Handler.AbstractHandler=void 0;var MathDocument_js_1$1=MathDocument,DefaultMathDocument=function(t){__extends$q(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}(MathDocument_js_1$1.AbstractMathDocument),AbstractHandler=function(){function t(r,e){e===void 0&&(e=5),this.documentClass=DefaultMathDocument,this.adaptor=r,this.priority=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this.constructor.NAME},enumerable:!1,configurable:!0}),t.prototype.handlesDocument=function(r){return!1},t.prototype.create=function(r,e){return new this.documentClass(r,this.adaptor,e)},t.NAME="generic",t}();Handler.AbstractHandler=AbstractHandler;var HTMLDocument$1={},HTMLMathItem$1={},__extends$p=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(HTMLMathItem$1,"__esModule",{value:!0});HTMLMathItem$1.HTMLMathItem=void 0;var MathItem_js_1$2=MathItem,HTMLMathItem=function(t){__extends$p(r,t);function r(e,n,i,o,a){return i===void 0&&(i=!0),o===void 0&&(o={node:null,n:0,delim:""}),a===void 0&&(a={node:null,n:0,delim:""}),t.call(this,e,n,i,o,a)||this}return Object.defineProperty(r.prototype,"adaptor",{get:function(){return this.inputJax.adaptor},enumerable:!1,configurable:!0}),r.prototype.updateDocument=function(e){if(this.state()<MathItem_js_1$2.STATE.INSERTED){if(this.inputJax.processStrings){var n=this.start.node;if(n===this.end.node)this.end.n&&this.end.n<this.adaptor.value(this.end.node).length&&this.adaptor.split(this.end.node,this.end.n),this.start.n&&(n=this.adaptor.split(this.start.node,this.start.n)),this.adaptor.replace(this.typesetRoot,n);else{for(this.start.n&&(n=this.adaptor.split(n,this.start.n));n!==this.end.node;){var i=this.adaptor.next(n);this.adaptor.remove(n),n=i}this.adaptor.insert(this.typesetRoot,n),this.end.n<this.adaptor.value(n).length&&this.adaptor.split(n,this.end.n),this.adaptor.remove(n)}}else this.adaptor.replace(this.typesetRoot,this.start.node);this.start.node=this.end.node=this.typesetRoot,this.start.n=this.end.n=0,this.state(MathItem_js_1$2.STATE.INSERTED)}},r.prototype.updateStyleSheet=function(e){e.addStyleSheet()},r.prototype.removeFromDocument=function(e){if(e===void 0&&(e=!1),this.state()>=MathItem_js_1$2.STATE.TYPESET){var n=this.adaptor,i=this.start.node,o=n.text("");if(e){var a=this.start.delim+this.math+this.end.delim;if(this.inputJax.processStrings)o=n.text(a);else{var s=n.parse(a,"text/html");o=n.firstChild(n.body(s))}}n.parent(i)&&n.replace(o,i),this.start.node=this.end.node=o,this.start.n=this.end.n=0}},r}(MathItem_js_1$2.AbstractMathItem);HTMLMathItem$1.HTMLMathItem=HTMLMathItem;var HTMLMathList$1={},__extends$o=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(HTMLMathList$1,"__esModule",{value:!0});HTMLMathList$1.HTMLMathList=void 0;var MathList_js_1=MathList,HTMLMathList=function(t){__extends$o(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}(MathList_js_1.AbstractMathList);HTMLMathList$1.HTMLMathList=HTMLMathList;var HTMLDomStrings$1={},__read$j=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(HTMLDomStrings$1,"__esModule",{value:!0});HTMLDomStrings$1.HTMLDomStrings=void 0;var Options_js_1$6=Options$1,HTMLDomStrings=function(){function t(r){r===void 0&&(r=null);var e=this.constructor;this.options=(0,Options_js_1$6.userOptions)((0,Options_js_1$6.defaultOptions)({},e.OPTIONS),r),this.init(),this.getPatterns()}return t.prototype.init=function(){this.strings=[],this.string="",this.snodes=[],this.nodes=[],this.stack=[]},t.prototype.getPatterns=function(){var r=(0,Options_js_1$6.makeArray)(this.options.skipHtmlTags),e=(0,Options_js_1$6.makeArray)(this.options.ignoreHtmlClass),n=(0,Options_js_1$6.makeArray)(this.options.processHtmlClass);this.skipHtmlTags=new RegExp("^(?:"+r.join("|")+")$","i"),this.ignoreHtmlClass=new RegExp("(?:^| )(?:"+e.join("|")+")(?: |$)"),this.processHtmlClass=new RegExp("(?:^| )(?:"+n+")(?: |$)")},t.prototype.pushString=function(){this.string.match(/\S/)&&(this.strings.push(this.string),this.nodes.push(this.snodes)),this.string="",this.snodes=[]},t.prototype.extendString=function(r,e){this.snodes.push([r,e.length]),this.string+=e},t.prototype.handleText=function(r,e){return e||this.extendString(r,this.adaptor.value(r)),this.adaptor.next(r)},t.prototype.handleTag=function(r,e){if(!e){var n=this.options.includeHtmlTags[this.adaptor.kind(r)];this.extendString(r,n)}return this.adaptor.next(r)},t.prototype.handleContainer=function(r,e){this.pushString();var n=this.adaptor.getAttribute(r,"class")||"",i=this.adaptor.kind(r)||"",o=this.processHtmlClass.exec(n),a=r;return this.adaptor.firstChild(r)&&!this.adaptor.getAttribute(r,"data-MJX")&&(o||!this.skipHtmlTags.exec(i))?(this.adaptor.next(r)&&this.stack.push([this.adaptor.next(r),e]),a=this.adaptor.firstChild(r),e=(e||this.ignoreHtmlClass.exec(n))&&!o):a=this.adaptor.next(r),[a,e]},t.prototype.handleOther=function(r,e){return this.pushString(),this.adaptor.next(r)},t.prototype.find=function(r){var e,n;this.init();for(var i=this.adaptor.next(r),o=!1,a=this.options.includeHtmlTags;r&&r!==i;){var s=this.adaptor.kind(r);s==="#text"?r=this.handleText(r,o):a.hasOwnProperty(s)?r=this.handleTag(r,o):s?(e=__read$j(this.handleContainer(r,o),2),r=e[0],o=e[1]):r=this.handleOther(r,o),!r&&this.stack.length&&(this.pushString(),n=__read$j(this.stack.pop(),2),r=n[0],o=n[1])}this.pushString();var l=[this.strings,this.nodes];return this.init(),l},t.OPTIONS={skipHtmlTags:["script","noscript","style","textarea","pre","code","annotation","annotation-xml"],includeHtmlTags:{br:`
`,wbr:"","#comment":""},ignoreHtmlClass:"mathjax_ignore",processHtmlClass:"mathjax_process"},t}();HTMLDomStrings$1.HTMLDomStrings=HTMLDomStrings;var __extends$n=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$6=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$6=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$6.apply(this,arguments)},__read$i=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__values$h=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(HTMLDocument$1,"__esModule",{value:!0});HTMLDocument$1.HTMLDocument=void 0;var MathDocument_js_1=MathDocument,Options_js_1$5=Options$1,HTMLMathItem_js_1=HTMLMathItem$1,HTMLMathList_js_1=HTMLMathList$1,HTMLDomStrings_js_1=HTMLDomStrings$1,MathItem_js_1$1=MathItem,HTMLDocument=function(t){__extends$n(r,t);function r(e,n,i){var o=this,a=__read$i((0,Options_js_1$5.separateOptions)(i,HTMLDomStrings_js_1.HTMLDomStrings.OPTIONS),2),s=a[0],l=a[1];return o=t.call(this,e,n,s)||this,o.domStrings=o.options.DomStrings||new HTMLDomStrings_js_1.HTMLDomStrings(l),o.domStrings.adaptor=n,o.styles=[],o}return r.prototype.findPosition=function(e,n,i,o){var a,s,l=this.adaptor;try{for(var c=__values$h(o[e]),f=c.next();!f.done;f=c.next()){var d=f.value,u=__read$i(d,2),m=u[0],p=u[1];if(n<=p&&l.kind(m)==="#text")return{node:m,n:Math.max(n,0),delim:i};n-=p}}catch(_){a={error:_}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}return{node:null,n:0,delim:i}},r.prototype.mathItem=function(e,n,i){var o=e.math,a=this.findPosition(e.n,e.start.n,e.open,i),s=this.findPosition(e.n,e.end.n,e.close,i);return new this.options.MathItem(o,n,e.display,a,s)},r.prototype.findMath=function(e){var n,i,o,a,s,l,c,f,d;if(!this.processed.isSet("findMath")){this.adaptor.document=this.document,e=(0,Options_js_1$5.userOptions)({elements:this.options.elements||[this.adaptor.body(this.document)]},e);try{for(var u=__values$h(this.adaptor.getElements(e.elements,this.document)),m=u.next();!m.done;m=u.next()){var p=m.value,_=__read$i([null,null],2),y=_[0],g=_[1];try{for(var v=(o=void 0,__values$h(this.inputJax)),x=v.next();!x.done;x=v.next()){var b=x.value,S=new this.options.MathList;if(b.processStrings){y===null&&(s=__read$i(this.domStrings.find(p),2),y=s[0],g=s[1]);try{for(var M=(l=void 0,__values$h(b.findMath(y))),C=M.next();!C.done;C=M.next()){var A=C.value;S.push(this.mathItem(A,b,g))}}catch(B){l={error:B}}finally{try{C&&!C.done&&(c=M.return)&&c.call(M)}finally{if(l)throw l.error}}}else try{for(var E=(f=void 0,__values$h(b.findMath(p))),$=E.next();!$.done;$=E.next()){var A=$.value,D=new this.options.MathItem(A.math,b,A.display,A.start,A.end);S.push(D)}}catch(B){f={error:B}}finally{try{$&&!$.done&&(d=E.return)&&d.call(E)}finally{if(f)throw f.error}}this.math.merge(S)}}catch(B){o={error:B}}finally{try{x&&!x.done&&(a=v.return)&&a.call(v)}finally{if(o)throw o.error}}}}catch(B){n={error:B}}finally{try{m&&!m.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}this.processed.set("findMath")}return this},r.prototype.updateDocument=function(){return this.processed.isSet("updateDocument")||(this.addPageElements(),this.addStyleSheet(),t.prototype.updateDocument.call(this),this.processed.set("updateDocument")),this},r.prototype.addPageElements=function(){var e=this.adaptor.body(this.document),n=this.documentPageElements();n&&this.adaptor.append(e,n)},r.prototype.addStyleSheet=function(){var e=this.documentStyleSheet(),n=this.adaptor;if(e&&!n.parent(e)){var i=n.head(this.document),o=this.findSheet(i,n.getAttribute(e,"id"));o?n.replace(e,o):n.append(i,e)}},r.prototype.findSheet=function(e,n){var i,o;if(n)try{for(var a=__values$h(this.adaptor.tags(e,"style")),s=a.next();!s.done;s=a.next()){var l=s.value;if(this.adaptor.getAttribute(l,"id")===n)return l}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return null},r.prototype.removeFromDocument=function(e){var n,i;if(e===void 0&&(e=!1),this.processed.isSet("updateDocument"))try{for(var o=__values$h(this.math),a=o.next();!a.done;a=o.next()){var s=a.value;s.state()>=MathItem_js_1$1.STATE.INSERTED&&s.state(MathItem_js_1$1.STATE.TYPESET,e)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return this.processed.clear("updateDocument"),this},r.prototype.documentStyleSheet=function(){return this.outputJax.styleSheet(this)},r.prototype.documentPageElements=function(){return this.outputJax.pageElements(this)},r.prototype.addStyles=function(e){this.styles.push(e)},r.prototype.getStyles=function(){return this.styles},r.KIND="HTML",r.OPTIONS=__assign$6(__assign$6({},MathDocument_js_1.AbstractMathDocument.OPTIONS),{renderActions:(0,Options_js_1$5.expandable)(__assign$6(__assign$6({},MathDocument_js_1.AbstractMathDocument.OPTIONS.renderActions),{styles:[MathItem_js_1$1.STATE.INSERTED+1,"","updateStyleSheet",!1]})),MathList:HTMLMathList_js_1.HTMLMathList,MathItem:HTMLMathItem_js_1.HTMLMathItem,DomStrings:null}),r}(MathDocument_js_1.AbstractMathDocument);HTMLDocument$1.HTMLDocument=HTMLDocument;var __extends$m=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(HTMLHandler$1,"__esModule",{value:!0});HTMLHandler$1.HTMLHandler=void 0;var Handler_js_1=Handler,HTMLDocument_js_1=HTMLDocument$1,HTMLHandler=function(t){__extends$m(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.documentClass=HTMLDocument_js_1.HTMLDocument,e}return r.prototype.handlesDocument=function(e){var n=this.adaptor;if(typeof e=="string")try{e=n.parse(e,"text/html")}catch{}return e instanceof n.window.Document||e instanceof n.window.HTMLElement||e instanceof n.window.DocumentFragment},r.prototype.create=function(e,n){var i=this.adaptor;if(typeof e=="string")e=i.parse(e,"text/html");else if(e instanceof i.window.HTMLElement||e instanceof i.window.DocumentFragment){var o=e;e=i.parse("","text/html"),i.append(i.body(e),o)}return t.prototype.create.call(this,e,n)},r}(Handler_js_1.AbstractHandler);HTMLHandler$1.HTMLHandler=HTMLHandler;Object.defineProperty(html$1,"__esModule",{value:!0});html$1.RegisterHTMLHandler=void 0;var mathjax_js_1$1=mathjax,HTMLHandler_js_1=HTMLHandler$1;function RegisterHTMLHandler(t){var r=new HTMLHandler_js_1.HTMLHandler(t);return mathjax_js_1$1.mathjax.handlers.register(r),r}html$1.RegisterHTMLHandler=RegisterHTMLHandler;var browserAdaptor$1={},HTMLAdaptor$1={},DOMAdaptor={},__values$g=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(DOMAdaptor,"__esModule",{value:!0});DOMAdaptor.AbstractDOMAdaptor=void 0;var AbstractDOMAdaptor=function(){function t(r){r===void 0&&(r=null),this.document=r}return t.prototype.node=function(r,e,n,i){var o,a;e===void 0&&(e={}),n===void 0&&(n=[]);var s=this.create(r,i);this.setAttributes(s,e);try{for(var l=__values$g(n),c=l.next();!c.done;c=l.next()){var f=c.value;this.append(s,f)}}catch(d){o={error:d}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return s},t.prototype.setAttributes=function(r,e){var n,i,o,a,s,l;if(e.style&&typeof e.style!="string")try{for(var c=__values$g(Object.keys(e.style)),f=c.next();!f.done;f=c.next()){var d=f.value;this.setStyle(r,d.replace(/-([a-z])/g,function(y,g){return g.toUpperCase()}),e.style[d])}}catch(y){n={error:y}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}if(e.properties)try{for(var u=__values$g(Object.keys(e.properties)),m=u.next();!m.done;m=u.next()){var d=m.value;r[d]=e.properties[d]}}catch(y){o={error:y}}finally{try{m&&!m.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}try{for(var p=__values$g(Object.keys(e)),_=p.next();!_.done;_=p.next()){var d=_.value;(d!=="style"||typeof e.style=="string")&&d!=="properties"&&this.setAttribute(r,d,e[d])}}catch(y){s={error:y}}finally{try{_&&!_.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}},t.prototype.replace=function(r,e){return this.insert(r,e),this.remove(e),e},t.prototype.childNode=function(r,e){return this.childNodes(r)[e]},t.prototype.allClasses=function(r){var e=this.getAttribute(r,"class");return e?e.replace(/  +/g," ").replace(/^ /,"").replace(/ $/,"").split(/ /):[]},t}();DOMAdaptor.AbstractDOMAdaptor=AbstractDOMAdaptor;var __extends$l=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__values$f=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(HTMLAdaptor$1,"__esModule",{value:!0});HTMLAdaptor$1.HTMLAdaptor=void 0;var DOMAdaptor_js_1$1=DOMAdaptor,HTMLAdaptor=function(t){__extends$l(r,t);function r(e){var n=t.call(this,e.document)||this;return n.window=e,n.parser=new e.DOMParser,n}return r.prototype.parse=function(e,n){return n===void 0&&(n="text/html"),this.parser.parseFromString(e,n)},r.prototype.create=function(e,n){return n?this.document.createElementNS(n,e):this.document.createElement(e)},r.prototype.text=function(e){return this.document.createTextNode(e)},r.prototype.head=function(e){return e.head||e},r.prototype.body=function(e){return e.body||e},r.prototype.root=function(e){return e.documentElement||e},r.prototype.doctype=function(e){return e.doctype?"<!DOCTYPE ".concat(e.doctype.name,">"):""},r.prototype.tags=function(e,n,i){i===void 0&&(i=null);var o=i?e.getElementsByTagNameNS(i,n):e.getElementsByTagName(n);return Array.from(o)},r.prototype.getElements=function(e,n){var i,o,a=[];try{for(var s=__values$f(e),l=s.next();!l.done;l=s.next()){var c=l.value;typeof c=="string"?a=a.concat(Array.from(this.document.querySelectorAll(c))):Array.isArray(c)||c instanceof this.window.NodeList||c instanceof this.window.HTMLCollection?a=a.concat(Array.from(c)):a.push(c)}}catch(f){i={error:f}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return a},r.prototype.contains=function(e,n){return e.contains(n)},r.prototype.parent=function(e){return e.parentNode},r.prototype.append=function(e,n){return e.appendChild(n)},r.prototype.insert=function(e,n){return this.parent(n).insertBefore(e,n)},r.prototype.remove=function(e){return this.parent(e).removeChild(e)},r.prototype.replace=function(e,n){return this.parent(n).replaceChild(e,n)},r.prototype.clone=function(e){return e.cloneNode(!0)},r.prototype.split=function(e,n){return e.splitText(n)},r.prototype.next=function(e){return e.nextSibling},r.prototype.previous=function(e){return e.previousSibling},r.prototype.firstChild=function(e){return e.firstChild},r.prototype.lastChild=function(e){return e.lastChild},r.prototype.childNodes=function(e){return Array.from(e.childNodes)},r.prototype.childNode=function(e,n){return e.childNodes[n]},r.prototype.kind=function(e){var n=e.nodeType;return n===1||n===3||n===8?e.nodeName.toLowerCase():""},r.prototype.value=function(e){return e.nodeValue||""},r.prototype.textContent=function(e){return e.textContent},r.prototype.innerHTML=function(e){return e.innerHTML},r.prototype.outerHTML=function(e){return e.outerHTML},r.prototype.serializeXML=function(e){var n=new this.window.XMLSerializer;return n.serializeToString(e)},r.prototype.setAttribute=function(e,n,i,o){return o===void 0&&(o=null),o?(n=o.replace(/.*\//,"")+":"+n.replace(/^.*:/,""),e.setAttributeNS(o,n,i)):e.setAttribute(n,i)},r.prototype.getAttribute=function(e,n){return e.getAttribute(n)},r.prototype.removeAttribute=function(e,n){return e.removeAttribute(n)},r.prototype.hasAttribute=function(e,n){return e.hasAttribute(n)},r.prototype.allAttributes=function(e){return Array.from(e.attributes).map(function(n){return{name:n.name,value:n.value}})},r.prototype.addClass=function(e,n){e.classList?e.classList.add(n):e.className=(e.className+" "+n).trim()},r.prototype.removeClass=function(e,n){e.classList?e.classList.remove(n):e.className=e.className.split(/ /).filter(function(i){return i!==n}).join(" ")},r.prototype.hasClass=function(e,n){return e.classList?e.classList.contains(n):e.className.split(/ /).indexOf(n)>=0},r.prototype.setStyle=function(e,n,i){e.style[n]=i},r.prototype.getStyle=function(e,n){return e.style[n]},r.prototype.allStyles=function(e){return e.style.cssText},r.prototype.insertRules=function(e,n){var i,o;try{for(var a=__values$f(n.reverse()),s=a.next();!s.done;s=a.next()){var l=s.value;try{e.sheet.insertRule(l,0)}catch(c){console.warn("MathJax: can't insert css rule '".concat(l,"': ").concat(c.message))}}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}},r.prototype.fontSize=function(e){var n=this.window.getComputedStyle(e);return parseFloat(n.fontSize)},r.prototype.fontFamily=function(e){var n=this.window.getComputedStyle(e);return n.fontFamily||""},r.prototype.nodeSize=function(e,n,i){if(n===void 0&&(n=1),i===void 0&&(i=!1),i&&e.getBBox){var o=e.getBBox(),a=o.width,s=o.height;return[a/n,s/n]}return[e.offsetWidth/n,e.offsetHeight/n]},r.prototype.nodeBBox=function(e){var n=e.getBoundingClientRect(),i=n.left,o=n.right,a=n.top,s=n.bottom;return{left:i,right:o,top:a,bottom:s}},r}(DOMAdaptor_js_1$1.AbstractDOMAdaptor);HTMLAdaptor$1.HTMLAdaptor=HTMLAdaptor;Object.defineProperty(browserAdaptor$1,"__esModule",{value:!0});browserAdaptor$1.browserAdaptor=void 0;var HTMLAdaptor_js_1=HTMLAdaptor$1;function browserAdaptor(){return new HTMLAdaptor_js_1.HTMLAdaptor(window)}browserAdaptor$1.browserAdaptor=browserAdaptor;var tex={},FindTeX$1={},FindMath={};Object.defineProperty(FindMath,"__esModule",{value:!0});FindMath.AbstractFindMath=void 0;var Options_js_1$4=Options$1,AbstractFindMath=function(){function t(r){var e=this.constructor;this.options=(0,Options_js_1$4.userOptions)((0,Options_js_1$4.defaultOptions)({},e.OPTIONS),r)}return t.OPTIONS={},t}();FindMath.AbstractFindMath=AbstractFindMath;var __extends$k=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$h=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(FindTeX$1,"__esModule",{value:!0});FindTeX$1.FindTeX=void 0;var FindMath_js_1=FindMath,string_js_1=string,MathItem_js_1=MathItem,FindTeX=function(t){__extends$k(r,t);function r(e){var n=t.call(this,e)||this;return n.getPatterns(),n}return r.prototype.getPatterns=function(){var e=this,n=this.options,i=[],o=[],a=[];this.end={},this.env=this.sub=0;var s=1;n.inlineMath.forEach(function(l){return e.addPattern(i,l,!1)}),n.displayMath.forEach(function(l){return e.addPattern(i,l,!0)}),i.length&&o.push(i.sort(string_js_1.sortLength).join("|")),n.processEnvironments&&(o.push("\\\\begin\\s*\\{([^}]*)\\}"),this.env=s,s++),n.processEscapes&&a.push("\\\\([\\\\$])"),n.processRefs&&a.push("(\\\\(?:eq)?ref\\s*\\{[^}]*\\})"),a.length&&(o.push("("+a.join("|")+")"),this.sub=s),this.start=new RegExp(o.join("|"),"g"),this.hasPatterns=o.length>0},r.prototype.addPattern=function(e,n,i){var o=__read$h(n,2),a=o[0],s=o[1];e.push((0,string_js_1.quotePattern)(a)),this.end[a]=[s,i,this.endPattern(s)]},r.prototype.endPattern=function(e,n){return new RegExp((n||(0,string_js_1.quotePattern)(e))+"|\\\\(?:[a-zA-Z]|.)|[{}]","g")},r.prototype.findEnd=function(e,n,i,o){for(var a=__read$h(o,3),s=a[0],l=a[1],c=a[2],f=c.lastIndex=i.index+i[0].length,d,u=0;d=c.exec(e);){if((d[1]||d[0])===s&&u===0)return(0,MathItem_js_1.protoItem)(i[0],e.substr(f,d.index-f),d[0],n,i.index,d.index+d[0].length,l);d[0]==="{"?u++:d[0]==="}"&&u&&u--}return null},r.prototype.findMathInString=function(e,n,i){var o,a;for(this.start.lastIndex=0;o=this.start.exec(i);){if(o[this.env]!==void 0&&this.env){var s="\\\\end\\s*(\\{"+(0,string_js_1.quotePattern)(o[this.env])+"\\})";a=this.findEnd(i,n,o,["{"+o[this.env]+"}",!0,this.endPattern(null,s)]),a&&(a.math=a.open+a.math+a.close,a.open=a.close="")}else if(o[this.sub]!==void 0&&this.sub){var l=o[this.sub],s=o.index+o[this.sub].length;l.length===2?a=(0,MathItem_js_1.protoItem)("",l.substr(1),"",n,o.index,s):a=(0,MathItem_js_1.protoItem)("",l,"",n,o.index,s,!1)}else a=this.findEnd(i,n,o,this.end[o[0]]);a&&(e.push(a),this.start.lastIndex=a.end.n)}},r.prototype.findMath=function(e){var n=[];if(this.hasPatterns)for(var i=0,o=e.length;i<o;i++)this.findMathInString(n,i,e[i]);return n},r.OPTIONS={inlineMath:[["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0,processEnvironments:!0,processRefs:!0},r}(FindMath_js_1.AbstractFindMath);FindTeX$1.FindTeX=FindTeX;var FilterUtil$1={},NodeUtil$1={},__values$e=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$g=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$c=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(NodeUtil$1,"__esModule",{value:!0});var MmlNode_js_1$b=MmlNode,mo_js_1=mo,NodeUtil;(function(t){var r=new Map([["autoOP",!0],["fnOP",!0],["movesupsub",!0],["subsupOK",!0],["texprimestyle",!0],["useHeight",!0],["variantForm",!0],["withDelims",!0],["mathaccent",!0],["open",!0],["close",!0]]);function e(C){return String.fromCodePoint(parseInt(C,16))}t.createEntity=e;function n(C){return C.childNodes}t.getChildren=n;function i(C){return C.getText()}t.getText=i;function o(C,A){var E,$;try{for(var D=__values$e(A),B=D.next();!B.done;B=D.next()){var F=B.value;C.appendChild(F)}}catch(I){E={error:I}}finally{try{B&&!B.done&&($=D.return)&&$.call(D)}finally{if(E)throw E.error}}}t.appendChildren=o;function a(C,A,E){C.attributes.set(A,E)}t.setAttribute=a;function s(C,A,E){C.setProperty(A,E)}t.setProperty=s;function l(C,A){var E,$;try{for(var D=__values$e(Object.keys(A)),B=D.next();!B.done;B=D.next()){var F=B.value,I=A[F];F==="texClass"?(C.texClass=I,C.setProperty(F,I)):F==="movablelimits"?(C.setProperty("movablelimits",I),(C.isKind("mo")||C.isKind("mstyle"))&&C.attributes.set("movablelimits",I)):F==="inferred"||(r.has(F)?C.setProperty(F,I):C.attributes.set(F,I))}}catch(H){E={error:H}}finally{try{B&&!B.done&&($=D.return)&&$.call(D)}finally{if(E)throw E.error}}}t.setProperties=l;function c(C,A){return C.getProperty(A)}t.getProperty=c;function f(C,A){return C.attributes.get(A)}t.getAttribute=f;function d(C){for(var A=[],E=1;E<arguments.length;E++)A[E-1]=arguments[E];C.removeProperty.apply(C,__spreadArray$c([],__read$g(A),!1))}t.removeProperties=d;function u(C,A){return C.childNodes[A]}t.getChildAt=u;function m(C,A,E){var $=C.childNodes;$[A]=E,E&&(E.parent=C)}t.setChild=m;function p(C,A){for(var E=C.childNodes,$=0;$<E.length;$++)m(A,$,E[$])}t.copyChildren=p;function _(C,A){A.attributes=C.attributes,l(A,C.getAllProperties())}t.copyAttributes=_;function y(C,A){return C.isKind(A)}t.isType=y;function g(C){return C.isEmbellished}t.isEmbellished=g;function v(C){return C.texClass}t.getTexClass=v;function x(C){return C.coreMO()}t.getCoreMO=x;function b(C){return C instanceof MmlNode_js_1$b.AbstractMmlNode||C instanceof MmlNode_js_1$b.AbstractMmlEmptyNode}t.isNode=b;function S(C){return C.isInferred}t.isInferred=S;function M(C){var A,E;if(!y(C,"mo"))return null;var $=C,D=$.getForms();try{for(var B=__values$e(D),F=B.next();!F.done;F=B.next()){var I=F.value,H=mo_js_1.MmlMo.OPTABLE[I][$.getText()];if(H)return H}}catch(W){A={error:W}}finally{try{F&&!F.done&&(E=B.return)&&E.call(B)}finally{if(A)throw A.error}}return null}t.getForm=M})(NodeUtil||(NodeUtil={}));NodeUtil$1.default=NodeUtil;var __values$d=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__importDefault$G=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(FilterUtil$1,"__esModule",{value:!0});var MmlNode_js_1$a=MmlNode,NodeUtil_js_1$g=__importDefault$G(NodeUtil$1),FilterUtil;(function(t){t.cleanStretchy=function(o){var a,s,l=o.data;try{for(var c=__values$d(l.getList("fixStretchy")),f=c.next();!f.done;f=c.next()){var d=f.value;if(NodeUtil_js_1$g.default.getProperty(d,"fixStretchy")){var u=NodeUtil_js_1$g.default.getForm(d);u&&u[3]&&u[3].stretchy&&NodeUtil_js_1$g.default.setAttribute(d,"stretchy",!1);var m=d.parent;if(!NodeUtil_js_1$g.default.getTexClass(d)&&(!u||!u[2])){var p=l.nodeFactory.create("node","TeXAtom",[d]);m.replaceChild(p,d),p.inheritAttributesFrom(d)}NodeUtil_js_1$g.default.removeProperties(d,"fixStretchy")}}}catch(_){a={error:_}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}},t.cleanAttributes=function(o){var a=o.data.root;a.walkTree(function(s,l){var c,f,d=s.attributes;if(d){var u=new Set((d.get("mjx-keep-attrs")||"").split(/ /));delete d.getAllAttributes()["mjx-keep-attrs"];try{for(var m=__values$d(d.getExplicitNames()),p=m.next();!p.done;p=m.next()){var _=p.value;!u.has(_)&&d.attributes[_]===s.attributes.getInherited(_)&&delete d.attributes[_]}}catch(y){c={error:y}}finally{try{p&&!p.done&&(f=m.return)&&f.call(m)}finally{if(c)throw c.error}}}},{})},t.combineRelations=function(o){var a,s,l,c,f=[];try{for(var d=__values$d(o.data.getList("mo")),u=d.next();!u.done;u=d.next()){var m=u.value;if(!(m.getProperty("relationsCombined")||!m.parent||m.parent&&!NodeUtil_js_1$g.default.isType(m.parent,"mrow")||NodeUtil_js_1$g.default.getTexClass(m)!==MmlNode_js_1$a.TEXCLASS.REL)){for(var p=m.parent,_=void 0,y=p.childNodes,g=y.indexOf(m)+1,v=NodeUtil_js_1$g.default.getProperty(m,"variantForm");g<y.length&&(_=y[g])&&NodeUtil_js_1$g.default.isType(_,"mo")&&NodeUtil_js_1$g.default.getTexClass(_)===MmlNode_js_1$a.TEXCLASS.REL;)if(v===NodeUtil_js_1$g.default.getProperty(_,"variantForm")&&e(m,_)){NodeUtil_js_1$g.default.appendChildren(m,NodeUtil_js_1$g.default.getChildren(_)),r(["stretchy","rspace"],m,_);try{for(var x=(l=void 0,__values$d(_.getPropertyNames())),b=x.next();!b.done;b=x.next()){var S=b.value;m.setProperty(S,_.getProperty(S))}}catch(M){l={error:M}}finally{try{b&&!b.done&&(c=x.return)&&c.call(x)}finally{if(l)throw l.error}}y.splice(g,1),f.push(_),_.parent=null,_.setProperty("relationsCombined",!0)}else{m.attributes.getExplicit("rspace")==null&&NodeUtil_js_1$g.default.setAttribute(m,"rspace","0pt"),_.attributes.getExplicit("lspace")==null&&NodeUtil_js_1$g.default.setAttribute(_,"lspace","0pt");break}m.attributes.setInherited("form",m.getForms()[0])}}}catch(M){a={error:M}}finally{try{u&&!u.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}o.data.removeFromList("mo",f)};var r=function(o,a,s){var l=a.attributes,c=s.attributes;o.forEach(function(f){var d=c.getExplicit(f);d!=null&&l.set(f,d)})},e=function(o,a){var s,l,c=function(g,v){var x=g.getExplicitNames();return x.filter(function(b){return b!==v&&(b!=="stretchy"||g.getExplicit("stretchy"))})},f=o.attributes,d=a.attributes,u=c(f,"lspace"),m=c(d,"rspace");if(u.length!==m.length)return!1;try{for(var p=__values$d(u),_=p.next();!_.done;_=p.next()){var y=_.value;if(f.getExplicit(y)!==d.getExplicit(y))return!1}}catch(g){s={error:g}}finally{try{_&&!_.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}return!0},n=function(o,a,s){var l,c,f=[];try{for(var d=__values$d(o.getList("m"+a+s)),u=d.next();!u.done;u=d.next()){var m=u.value,p=m.childNodes;if(!(p[m[a]]&&p[m[s]])){var _=m.parent,y=p[m[a]]?o.nodeFactory.create("node","m"+a,[p[m.base],p[m[a]]]):o.nodeFactory.create("node","m"+s,[p[m.base],p[m[s]]]);NodeUtil_js_1$g.default.copyAttributes(m,y),_?_.replaceChild(y,m):o.root=y,f.push(m)}}}catch(g){l={error:g}}finally{try{u&&!u.done&&(c=d.return)&&c.call(d)}finally{if(l)throw l.error}}o.removeFromList("m"+a+s,f)};t.cleanSubSup=function(o){var a=o.data;a.error||(n(a,"sub","sup"),n(a,"under","over"))};var i=function(o,a,s){var l,c,f=[];try{for(var d=__values$d(o.getList(a)),u=d.next();!u.done;u=d.next()){var m=u.value;if(!m.attributes.get("displaystyle")){var p=m.childNodes[m.base],_=p.coreMO();if(p.getProperty("movablelimits")&&!_.attributes.getExplicit("movablelimits")){var y=o.nodeFactory.create("node",s,m.childNodes);NodeUtil_js_1$g.default.copyAttributes(m,y),m.parent?m.parent.replaceChild(y,m):o.root=y,f.push(m)}}}}catch(g){l={error:g}}finally{try{u&&!u.done&&(c=d.return)&&c.call(d)}finally{if(l)throw l.error}}o.removeFromList(a,f)};t.moveLimits=function(o){var a=o.data;i(a,"munderover","msubsup"),i(a,"munder","msub"),i(a,"mover","msup")},t.setInherited=function(o){o.data.root.setInheritedAttributes({},o.math.display,0,!1)}})(FilterUtil||(FilterUtil={}));FilterUtil$1.default=FilterUtil;var TexParser={},ParseUtil={},TexError$1={};Object.defineProperty(TexError$1,"__esModule",{value:!0});var TexError=function(){function t(r,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];this.id=r,this.message=t.processString(e,n)}return t.processString=function(r,e){for(var n=r.split(t.pattern),i=1,o=n.length;i<o;i+=2){var a=n[i].charAt(0);if(a>="0"&&a<="9")n[i]=e[parseInt(n[i],10)-1],typeof n[i]=="number"&&(n[i]=n[i].toString());else if(a==="{")if(a=n[i].substr(1),a>="0"&&a<="9")n[i]=e[parseInt(n[i].substr(1,n[i].length-2),10)-1],typeof n[i]=="number"&&(n[i]=n[i].toString());else{var s=n[i].match(/^\{([a-z]+):%(\d+)\|(.*)\}$/);s&&(n[i]="%"+n[i])}n[i]==null&&(n[i]="???")}return n.join("")},t.pattern=/%(\d+|\{\d+\}|\{[a-z]+:\%\d+(?:\|(?:%\{\d+\}|%.|[^\}])*)+\}|.)/g,t}();TexError$1.default=TexError;var Entities={},AsyncLoad={};Object.defineProperty(AsyncLoad,"__esModule",{value:!0});AsyncLoad.asyncLoad=void 0;var mathjax_js_1=mathjax;function asyncLoad(t){return mathjax_js_1.mathjax.asyncLoad?new Promise(function(r,e){var n=mathjax_js_1.mathjax.asyncLoad(t);n instanceof Promise?n.then(function(i){return r(i)}).catch(function(i){return e(i)}):r(n)}):Promise.reject("Can't load '".concat(t,"': No asyncLoad method specified"))}AsyncLoad.asyncLoad=asyncLoad;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.numeric=t.translate=t.remove=t.add=t.entities=t.options=void 0;var r=Retries,e=AsyncLoad;t.options={loadMissingEntities:!0},t.entities={ApplyFunction:"⁡",Backslash:"∖",Because:"∵",Breve:"˘",Cap:"⋒",CenterDot:"·",CircleDot:"⊙",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",Congruent:"≡",ContourIntegral:"∮",Coproduct:"∐",Cross:"⨯",Cup:"⋓",CupCap:"≍",Dagger:"‡",Del:"∇",Delta:"Δ",Diamond:"⋄",DifferentialD:"ⅆ",DotEqual:"≐",DoubleDot:"¨",DoubleRightTee:"⊨",DoubleVerticalBar:"∥",DownArrow:"↓",DownLeftVector:"↽",DownRightVector:"⇁",DownTee:"⊤",Downarrow:"⇓",Element:"∈",EqualTilde:"≂",Equilibrium:"⇌",Exists:"∃",ExponentialE:"ⅇ",FilledVerySmallSquare:"▪",ForAll:"∀",Gamma:"Γ",Gg:"⋙",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Hacek:"ˇ",Hat:"^",HumpDownHump:"≎",HumpEqual:"≏",Im:"ℑ",ImaginaryI:"ⅈ",Integral:"∫",Intersection:"⋂",InvisibleComma:"⁣",InvisibleTimes:"⁢",Lambda:"Λ",Larr:"↞",LeftAngleBracket:"⟨",LeftArrow:"←",LeftArrowRightArrow:"⇆",LeftCeiling:"⌈",LeftDownVector:"⇃",LeftFloor:"⌊",LeftRightArrow:"↔",LeftTee:"⊣",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpVector:"↿",LeftVector:"↼",Leftarrow:"⇐",Leftrightarrow:"⇔",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",LessSlantEqual:"⩽",LessTilde:"≲",Ll:"⋘",Lleftarrow:"⇚",LongLeftArrow:"⟵",LongLeftRightArrow:"⟷",LongRightArrow:"⟶",Longleftarrow:"⟸",Longleftrightarrow:"⟺",Longrightarrow:"⟹",Lsh:"↰",MinusPlus:"∓",NestedGreaterGreater:"≫",NestedLessLess:"≪",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotPrecedes:"⊀",NotPrecedesSlantEqual:"⋠",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsSlantEqual:"⋡",NotSupersetEqual:"⊉",NotTilde:"≁",NotVerticalBar:"∤",Omega:"Ω",OverBar:"‾",OverBrace:"⏞",PartialD:"∂",Phi:"Φ",Pi:"Π",PlusMinus:"±",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",Product:"∏",Proportional:"∝",Psi:"Ψ",Rarr:"↠",Re:"ℜ",ReverseEquilibrium:"⇋",RightAngleBracket:"⟩",RightArrow:"→",RightArrowLeftArrow:"⇄",RightCeiling:"⌉",RightDownVector:"⇂",RightFloor:"⌋",RightTee:"⊢",RightTeeArrow:"↦",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpVector:"↾",RightVector:"⇀",Rightarrow:"⇒",Rrightarrow:"⇛",Rsh:"↱",Sigma:"Σ",SmallCircle:"∘",Sqrt:"√",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",Star:"⋆",Subset:"⋐",SubsetEqual:"⊆",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",SuchThat:"∋",Sum:"∑",Superset:"⊃",SupersetEqual:"⊇",Supset:"⋑",Therefore:"∴",Theta:"Θ",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",UnderBar:"_",UnderBrace:"⏟",Union:"⋃",UnionPlus:"⊎",UpArrow:"↑",UpDownArrow:"↕",UpTee:"⊥",Uparrow:"⇑",Updownarrow:"⇕",Upsilon:"Υ",Vdash:"⊩",Vee:"⋁",VerticalBar:"∣",VerticalTilde:"≀",Vvdash:"⊪",Wedge:"⋀",Xi:"Ξ",amp:"&",acute:"´",aleph:"ℵ",alpha:"α",amalg:"⨿",and:"∧",ang:"∠",angmsd:"∡",angsph:"∢",ape:"≊",backprime:"‵",backsim:"∽",backsimeq:"⋍",beta:"β",beth:"ℶ",between:"≬",bigcirc:"◯",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",blacklozenge:"⧫",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",bowtie:"⋈",boxdl:"┐",boxdr:"┌",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxur:"└",bsol:"\\",bull:"•",cap:"∩",check:"✓",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledR:"®",circledS:"Ⓢ",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",clubs:"♣",colon:":",comp:"∁",ctdot:"⋯",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cup:"∪",curarr:"↷",curlyvee:"⋎",curlywedge:"⋏",dagger:"†",daleth:"ℸ",ddarr:"⇊",deg:"°",delta:"δ",digamma:"ϝ",div:"÷",divideontimes:"⋇",dot:"˙",doteqdot:"≑",dotplus:"∔",dotsquare:"⊡",dtdot:"⋱",ecir:"≖",efDot:"≒",egs:"⪖",ell:"ℓ",els:"⪕",empty:"∅",epsi:"ε",epsiv:"ϵ",erDot:"≓",eta:"η",eth:"ð",flat:"♭",fork:"⋔",frown:"⌢",gEl:"⪌",gamma:"γ",gap:"⪆",gimel:"ℷ",gnE:"≩",gnap:"⪊",gne:"⪈",gnsim:"⋧",gt:">",gtdot:"⋗",harrw:"↭",hbar:"ℏ",hellip:"…",hookleftarrow:"↩",hookrightarrow:"↪",imath:"ı",infin:"∞",intcal:"⊺",iota:"ι",jmath:"ȷ",kappa:"κ",kappav:"ϰ",lEg:"⪋",lambda:"λ",lap:"⪅",larrlp:"↫",larrtl:"↢",lbrace:"{",lbrack:"[",le:"≤",leftleftarrows:"⇇",leftthreetimes:"⋋",lessdot:"⋖",lmoust:"⎰",lnE:"≨",lnap:"⪉",lne:"⪇",lnsim:"⋦",longmapsto:"⟼",looparrowright:"↬",lowast:"∗",loz:"◊",lt:"<",ltimes:"⋉",ltri:"◃",macr:"¯",malt:"✠",mho:"℧",mu:"μ",multimap:"⊸",nLeftarrow:"⇍",nLeftrightarrow:"⇎",nRightarrow:"⇏",nVDash:"⊯",nVdash:"⊮",natur:"♮",nearr:"↗",nharr:"↮",nlarr:"↚",not:"¬",nrarr:"↛",nu:"ν",nvDash:"⊭",nvdash:"⊬",nwarr:"↖",omega:"ω",omicron:"ο",or:"∨",osol:"⊘",period:".",phi:"φ",phiv:"ϕ",pi:"π",piv:"ϖ",prap:"⪷",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",prime:"′",psi:"ψ",quot:'"',rarrtl:"↣",rbrace:"}",rbrack:"]",rho:"ρ",rhov:"ϱ",rightrightarrows:"⇉",rightthreetimes:"⋌",ring:"˚",rmoust:"⎱",rtimes:"⋊",rtri:"▹",scap:"⪸",scnE:"⪶",scnap:"⪺",scnsim:"⋩",sdot:"⋅",searr:"↘",sect:"§",sharp:"♯",sigma:"σ",sigmav:"ς",simne:"≆",smile:"⌣",spades:"♠",sub:"⊂",subE:"⫅",subnE:"⫋",subne:"⊊",supE:"⫆",supnE:"⫌",supne:"⊋",swarr:"↙",tau:"τ",theta:"θ",thetav:"ϑ",tilde:"˜",times:"×",triangle:"▵",triangleq:"≜",upsi:"υ",upuparrows:"⇈",veebar:"⊻",vellip:"⋮",weierp:"℘",xi:"ξ",yen:"¥",zeta:"ζ",zigrarr:"⇝",nbsp:" ",rsquo:"’",lsquo:"‘"};var n={};function i(c,f){Object.assign(t.entities,c),n[f]=!0}t.add=i;function o(c){delete t.entities[c]}t.remove=o;function a(c){return c.replace(/&([a-z][a-z0-9]*|#(?:[0-9]+|x[0-9a-f]+));/ig,s)}t.translate=a;function s(c,f){if(f.charAt(0)==="#")return l(f.slice(1));if(t.entities[f])return t.entities[f];if(t.options.loadMissingEntities){var d=f.match(/^[a-zA-Z](fr|scr|opf)$/)?RegExp.$1:f.charAt(0).toLowerCase();n[d]||(n[d]=!0,(0,r.retryAfter)((0,e.asyncLoad)("./util/entities/"+d+".js")))}return c}function l(c){var f=c.charAt(0)==="x"?parseInt(c.slice(1),16):parseInt(c);return String.fromCodePoint(f)}t.numeric=l})(Entities);var hasRequiredParseUtil;function requireParseUtil(){if(hasRequiredParseUtil)return ParseUtil;hasRequiredParseUtil=1;var t=commonjsGlobal&&commonjsGlobal.__read||function(c,f){var d=typeof Symbol=="function"&&c[Symbol.iterator];if(!d)return c;var u=d.call(c),m,p=[],_;try{for(;(f===void 0||f-- >0)&&!(m=u.next()).done;)p.push(m.value)}catch(y){_={error:y}}finally{try{m&&!m.done&&(d=u.return)&&d.call(u)}finally{if(_)throw _.error}}return p},r=commonjsGlobal&&commonjsGlobal.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,d=f&&c[f],u=0;if(d)return d.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&u>=c.length&&(c=void 0),{value:c&&c[u++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},e=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ParseUtil,"__esModule",{value:!0});var n=MmlNode,i=e(NodeUtil$1),o=e(requireTexParser()),a=e(TexError$1),s=Entities,l;return function(c){var f=7.2,d=72,u={em:function(T){return T},ex:function(T){return T*.43},pt:function(T){return T/10},pc:function(T){return T*1.2},px:function(T){return T*f/d},in:function(T){return T*f},cm:function(T){return T*f/2.54},mm:function(T){return T*f/25.4},mu:function(T){return T/18}},m="([-+]?([.,]\\d+|\\d+([.,]\\d*)?))",p="(pt|em|ex|mu|px|mm|cm|in|pc)",_=RegExp("^\\s*"+m+"\\s*"+p+"\\s*$"),y=RegExp("^\\s*"+m+"\\s*"+p+" ?");function g(T,j){j===void 0&&(j=!1);var P=T.match(j?y:_);return P?v([P[1].replace(/,/,"."),P[4],P[0].length]):[null,null,0]}c.matchDimen=g;function v(T){var j=t(T,3),P=j[0],O=j[1],k=j[2];if(O!=="mu")return[P,O,k];var V=b(u[O](parseFloat(P||"1")));return[V.slice(0,-2),"em",k]}function x(T){var j=t(g(T),2),P=j[0],O=j[1],k=parseFloat(P||"1"),V=u[O];return V?V(k):0}c.dimen2em=x;function b(T){return Math.abs(T)<6e-4?"0em":T.toFixed(3).replace(/\.?0+$/,"")+"em"}c.Em=b;function S(){for(var T=[],j=0;j<arguments.length;j++)T[j]=arguments[j];return T.map(function(P){return b(P)}).join(" ")}c.cols=S;function M(T,j,P,O,k,V){k===void 0&&(k=""),V===void 0&&(V="");var z=T.nodeFactory,X=z.create("node","mrow",[],{open:j,close:O,texClass:n.TEXCLASS.INNER}),Y;if(k)Y=new o.default("\\"+k+"l"+j,T.parser.stack.env,T).mml();else{var st=z.create("text",j);Y=z.create("node","mo",[],{fence:!0,stretchy:!0,symmetric:!0,texClass:n.TEXCLASS.OPEN},st)}if(i.default.appendChildren(X,[Y,P]),k)Y=new o.default("\\"+k+"r"+O,T.parser.stack.env,T).mml();else{var ft=z.create("text",O);Y=z.create("node","mo",[],{fence:!0,stretchy:!0,symmetric:!0,texClass:n.TEXCLASS.CLOSE},ft)}return V&&Y.attributes.set("mathcolor",V),i.default.appendChildren(X,[Y]),X}c.fenced=M;function C(T,j,P,O){var k=T.nodeFactory.create("node","mrow",[],{open:j,close:O,texClass:n.TEXCLASS.ORD});return j&&i.default.appendChildren(k,[A(T,j,"l")]),i.default.isType(P,"mrow")?i.default.appendChildren(k,i.default.getChildren(P)):i.default.appendChildren(k,[P]),O&&i.default.appendChildren(k,[A(T,O,"r")]),k}c.fixedFence=C;function A(T,j,P){(j==="{"||j==="}")&&(j="\\"+j);var O="{\\bigg"+P+" "+j+"}",k="{\\big"+P+" "+j+"}";return new o.default("\\mathchoice"+O+k+k+k,{},T).mml()}c.mathPalette=A;function E(T,j){for(var P=0,O=j.length;P<O;P++){var k=j[P];if(k&&!i.default.isType(k,"mspace")&&(!i.default.isType(k,"TeXAtom")||i.default.getChildren(k)[0]&&i.default.getChildren(i.default.getChildren(k)[0]).length)){if(i.default.isEmbellished(k)||i.default.isType(k,"TeXAtom")&&i.default.getTexClass(k)===n.TEXCLASS.REL){var V=T.nodeFactory.create("node","mi");j.unshift(V)}break}}}c.fixInitialMO=E;function $(T,j,P,O){if(T.configuration.options.internalMath)return T.configuration.options.internalMath(T,j,P,O);var k=O||T.stack.env.font,V=k?{mathvariant:k}:{},z=[],X=0,Y=0,st,ft,ct="",ht=0;if(j.match(/\\?[${}\\]|\\\(|\\(eq)?ref\s*\{/)){for(;X<j.length;)if(st=j.charAt(X++),st==="$")ct==="$"&&ht===0?(ft=T.create("node","TeXAtom",[new o.default(j.slice(Y,X-1),{},T.configuration).mml()]),z.push(ft),ct="",Y=X):ct===""&&(Y<X-1&&z.push(D(T,j.slice(Y,X-1),V)),ct="$",Y=X);else if(st==="{"&&ct!=="")ht++;else if(st==="}")if(ct==="}"&&ht===0){var gt=new o.default(j.slice(Y,X),{},T.configuration).mml();ft=T.create("node","TeXAtom",[gt],V),z.push(ft),ct="",Y=X}else ct!==""&&ht&&ht--;else if(st==="\\")if(ct===""&&j.substr(X).match(/^(eq)?ref\s*\{/)){var U=RegExp["$&"].length;Y<X-1&&z.push(D(T,j.slice(Y,X-1),V)),ct="}",Y=X-1,X+=U}else st=j.charAt(X++),st==="("&&ct===""?(Y<X-2&&z.push(D(T,j.slice(Y,X-2),V)),ct=")",Y=X):st===")"&&ct===")"&&ht===0?(ft=T.create("node","TeXAtom",[new o.default(j.slice(Y,X-2),{},T.configuration).mml()]),z.push(ft),ct="",Y=X):st.match(/[${}\\]/)&&ct===""&&(X--,j=j.substr(0,X-1)+j.substr(X));if(ct!=="")throw new a.default("MathNotTerminated","Math not terminated in text box")}return Y<j.length&&z.push(D(T,j.slice(Y),V)),P!=null?z=[T.create("node","mstyle",z,{displaystyle:!1,scriptlevel:P})]:z.length>1&&(z=[T.create("node","mrow",z)]),z}c.internalMath=$;function D(T,j,P){j=j.replace(/^\s+/,s.entities.nbsp).replace(/\s+$/,s.entities.nbsp);var O=T.create("text",j);return T.create("node","mtext",[],P,O)}c.internalText=D;function B(T,j,P,O,k){if(c.checkMovableLimits(j),i.default.isType(j,"munderover")&&i.default.isEmbellished(j)){i.default.setProperties(i.default.getCoreMO(j),{lspace:0,rspace:0});var V=T.create("node","mo",[],{rspace:0});j=T.create("node","mrow",[V,j])}var z=T.create("node","munderover",[j]);i.default.setChild(z,O==="over"?z.over:z.under,P);var X=z;return k&&(X=T.create("node","TeXAtom",[z],{texClass:n.TEXCLASS.OP,movesupsub:!0})),i.default.setProperty(X,"subsupOK",!0),X}c.underOver=B;function F(T){var j=i.default.isType(T,"mo")?i.default.getForm(T):null;(i.default.getProperty(T,"movablelimits")||j&&j[3]&&j[3].movablelimits)&&i.default.setProperties(T,{movablelimits:!1})}c.checkMovableLimits=F;function I(T){if(typeof T!="string")return T;var j=T.trim();return j.match(/\\$/)&&T.match(/ $/)&&(j+=" "),j}c.trimSpaces=I;function H(T,j){return j=c.trimSpaces(j||""),j==="t"?T.arraydef.align="baseline 1":j==="b"?T.arraydef.align="baseline -1":j==="c"?T.arraydef.align="axis":j&&(T.arraydef.align=j),T}c.setArrayAlign=H;function W(T,j,P){for(var O="",k="",V=0;V<P.length;){var z=P.charAt(V++);if(z==="\\")O+=z+P.charAt(V++);else if(z==="#")if(z=P.charAt(V++),z==="#")O+=z;else{if(!z.match(/[1-9]/)||parseInt(z,10)>j.length)throw new a.default("IllegalMacroParam","Illegal macro parameter reference");k=Z(T,Z(T,k,O),j[parseInt(z,10)-1]),O=""}else O+=z}return Z(T,k,O)}c.substituteArgs=W;function Z(T,j,P){if(P.match(/^[a-z]/i)&&j.match(/(^|[^\\])(\\\\)*\\[a-z]+$/i)&&(j+=" "),j.length+P.length>T.configuration.options.maxBuffer)throw new a.default("MaxBufferSize","MathJax internal buffer size exceeded; is there a recursive macro call?");return j+P}c.addArgs=Z;function et(T,j){if(j===void 0&&(j=!0),!(++T.macroCount<=T.configuration.options.maxMacros))throw j?new a.default("MaxMacroSub1","MathJax maximum macro substitution count exceeded; is here a recursive macro call?"):new a.default("MaxMacroSub2","MathJax maximum substitution count exceeded; is there a recursive latex environment?")}c.checkMaxMacros=et;function lt(T){if(T.stack.global.eqnenv)throw new a.default("ErroneousNestingEq","Erroneous nesting of equation structures");T.stack.global.eqnenv=!0}c.checkEqnEnv=lt;function G(T,j){var P=T.copy(),O=j.configuration;return P.walkTree(function(k){var V,z;O.addNode(k.kind,k);var X=(k.getProperty("in-lists")||"").split(/,/);try{for(var Y=r(X),st=Y.next();!st.done;st=Y.next()){var ft=st.value;ft&&O.addNode(ft,k)}}catch(ct){V={error:ct}}finally{try{st&&!st.done&&(z=Y.return)&&z.call(Y)}finally{if(V)throw V.error}}}),P}c.copyNode=G;function q(T,j,P){return P}c.MmlFilterAttribute=q;function Q(T){var j=T.stack.env.font;return j?{mathvariant:j}:{}}c.getFontDef=Q;function K(T,j,P){var O,k;j===void 0&&(j=null),P===void 0&&(P=!1);var V=tt(T);if(j)try{for(var z=r(Object.keys(V)),X=z.next();!X.done;X=z.next()){var Y=X.value;if(!j.hasOwnProperty(Y)){if(P)throw new a.default("InvalidOption","Invalid option: %1",Y);delete V[Y]}}}catch(st){O={error:st}}finally{try{X&&!X.done&&(k=z.return)&&k.call(z)}finally{if(O)throw O.error}}return V}c.keyvalOptions=K;function tt(T){for(var j,P,O={},k=T,V,z,X;k;)j=t(N(k,["=",","]),3),z=j[0],V=j[1],k=j[2],V==="="?(P=t(N(k,[","]),3),X=P[0],V=P[1],k=P[2],X=X==="false"||X==="true"?JSON.parse(X):X,O[z]=X):z&&(O[z]=!0);return O}function w(T,j){for(;j>0;)T=T.trim().slice(1,-1),j--;return T.trim()}function N(T,j){for(var P=T.length,O=0,k="",V=0,z=0,X=!0,Y=!1;V<P;){var st=T[V++];switch(st){case" ":break;case"{":X?z++:(Y=!1,z>O&&(z=O)),O++;break;case"}":O&&O--,(X||Y)&&(z--,Y=!0),X=!1;break;default:if(!O&&j.indexOf(st)!==-1)return[Y?"true":w(k,z),st,T.slice(V)];X=!1,Y=!1}k+=st}if(O)throw new a.default("ExtraOpenMissingClose","Extra open brace or missing close brace");return[Y?"true":w(k,z),"",T.slice(V)]}}(l||(l={})),ParseUtil.default=l,ParseUtil}var Stack$1={},__values$c=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$f=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$b=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__importDefault$F=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Stack$1,"__esModule",{value:!0});var NodeUtil_js_1$f=__importDefault$F(NodeUtil$1),Stack=function(){function t(r,e,n){this._factory=r,this._env=e,this.global={},this.stack=[],this.global={isInner:n},this.stack=[this._factory.create("start",this.global)],e&&(this.stack[0].env=e),this.env=this.stack[0].env}return Object.defineProperty(t.prototype,"env",{get:function(){return this._env},set:function(r){this._env=r},enumerable:!1,configurable:!0}),t.prototype.Push=function(){for(var r,e,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{for(var o=__values$c(n),a=o.next();!a.done;a=o.next()){var s=a.value;if(s){var l=NodeUtil_js_1$f.default.isNode(s)?this._factory.create("mml",s):s;l.global=this.global;var c=__read$f(this.stack.length?this.Top().checkItem(l):[null,!0],2),f=c[0],d=c[1];if(d){if(f){this.Pop(),this.Push.apply(this,__spreadArray$b([],__read$f(f),!1));continue}this.stack.push(l),l.env?(l.copyEnv&&Object.assign(l.env,this.env),this.env=l.env):l.env=this.env}}}}catch(u){r={error:u}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}},t.prototype.Pop=function(){var r=this.stack.pop();return r.isOpen||delete r.env,this.env=this.stack.length?this.Top().env:{},r},t.prototype.Top=function(r){return r===void 0&&(r=1),this.stack.length<r?null:this.stack[this.stack.length-r]},t.prototype.Prev=function(r){var e=this.Top();return r?e.First:e.Pop()},t.prototype.toString=function(){return`stack[
  `+this.stack.join(`
  `)+`
]`},t}();Stack$1.default=Stack;var hasRequiredTexParser;function requireTexParser(){if(hasRequiredTexParser)return TexParser;hasRequiredTexParser=1;var t=commonjsGlobal&&commonjsGlobal.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,d=f&&c[f],u=0;if(d)return d.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&u>=c.length&&(c=void 0),{value:c&&c[u++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},r=commonjsGlobal&&commonjsGlobal.__read||function(c,f){var d=typeof Symbol=="function"&&c[Symbol.iterator];if(!d)return c;var u=d.call(c),m,p=[],_;try{for(;(f===void 0||f-- >0)&&!(m=u.next()).done;)p.push(m.value)}catch(y){_={error:y}}finally{try{m&&!m.done&&(d=u.return)&&d.call(u)}finally{if(_)throw _.error}}return p},e=commonjsGlobal&&commonjsGlobal.__spreadArray||function(c,f,d){if(d||arguments.length===2)for(var u=0,m=f.length,p;u<m;u++)(p||!(u in f))&&(p||(p=Array.prototype.slice.call(f,0,u)),p[u]=f[u]);return c.concat(p||Array.prototype.slice.call(f))},n=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(TexParser,"__esModule",{value:!0});var i=n(requireParseUtil()),o=n(Stack$1),a=n(TexError$1),s=MmlNode,l=function(){function c(f,d,u){var m,p;this._string=f,this.configuration=u,this.macroCount=0,this.i=0,this.currentCS="";var _=d.hasOwnProperty("isInner"),y=d.isInner;delete d.isInner;var g;if(d){g={};try{for(var v=t(Object.keys(d)),x=v.next();!x.done;x=v.next()){var b=x.value;g[b]=d[b]}}catch(S){m={error:S}}finally{try{x&&!x.done&&(p=v.return)&&p.call(v)}finally{if(m)throw m.error}}}this.configuration.pushParser(this),this.stack=new o.default(this.itemFactory,g,_?y:!0),this.Parse(),this.Push(this.itemFactory.create("stop"))}return Object.defineProperty(c.prototype,"options",{get:function(){return this.configuration.options},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"itemFactory",{get:function(){return this.configuration.itemFactory},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"tags",{get:function(){return this.configuration.tags},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"string",{get:function(){return this._string},set:function(f){this._string=f},enumerable:!1,configurable:!0}),c.prototype.parse=function(f,d){return this.configuration.handlers.get(f).parse(d)},c.prototype.lookup=function(f,d){return this.configuration.handlers.get(f).lookup(d)},c.prototype.contains=function(f,d){return this.configuration.handlers.get(f).contains(d)},c.prototype.toString=function(){var f,d,u="";try{for(var m=t(Array.from(this.configuration.handlers.keys())),p=m.next();!p.done;p=m.next()){var _=p.value;u+=_+": "+this.configuration.handlers.get(_)+`
`}}catch(y){f={error:y}}finally{try{p&&!p.done&&(d=m.return)&&d.call(m)}finally{if(f)throw f.error}}return u},c.prototype.Parse=function(){for(var f;this.i<this.string.length;)f=this.getCodePoint(),this.i+=f.length,this.parse("character",[this,f])},c.prototype.Push=function(f){f instanceof s.AbstractMmlNode&&f.isInferred?this.PushAll(f.childNodes):this.stack.Push(f)},c.prototype.PushAll=function(f){var d,u;try{for(var m=t(f),p=m.next();!p.done;p=m.next()){var _=p.value;this.stack.Push(_)}}catch(y){d={error:y}}finally{try{p&&!p.done&&(u=m.return)&&u.call(m)}finally{if(d)throw d.error}}},c.prototype.mml=function(){if(!this.stack.Top().isKind("mml"))return null;var f=this.stack.Top().First;return this.configuration.popParser(),f},c.prototype.convertDelimiter=function(f){var d=this.lookup("delimiter",f);return d?d.char:null},c.prototype.getCodePoint=function(){var f=this.string.codePointAt(this.i);return f===void 0?"":String.fromCodePoint(f)},c.prototype.nextIsSpace=function(){return!!this.string.charAt(this.i).match(/\s/)},c.prototype.GetNext=function(){for(;this.nextIsSpace();)this.i++;return this.getCodePoint()},c.prototype.GetCS=function(){var f=this.string.slice(this.i).match(/^(([a-z]+) ?|[\uD800-\uDBFF].|.)/i);return f?(this.i+=f[0].length,f[2]||f[1]):(this.i++," ")},c.prototype.GetArgument=function(f,d){switch(this.GetNext()){case"":if(!d)throw new a.default("MissingArgFor","Missing argument for %1",this.currentCS);return null;case"}":if(!d)throw new a.default("ExtraCloseMissingOpen","Extra close brace or missing open brace");return null;case"\\":return this.i++,"\\"+this.GetCS();case"{":for(var u=++this.i,m=1;this.i<this.string.length;)switch(this.string.charAt(this.i++)){case"\\":this.i++;break;case"{":m++;break;case"}":if(--m===0)return this.string.slice(u,this.i-1);break}throw new a.default("MissingCloseBrace","Missing close brace")}var p=this.getCodePoint();return this.i+=p.length,p},c.prototype.GetBrackets=function(f,d){if(this.GetNext()!=="[")return d;for(var u=++this.i,m=0;this.i<this.string.length;)switch(this.string.charAt(this.i++)){case"{":m++;break;case"\\":this.i++;break;case"}":if(m--<=0)throw new a.default("ExtraCloseLooking","Extra close brace while looking for %1","']'");break;case"]":if(m===0)return this.string.slice(u,this.i-1);break}throw new a.default("MissingCloseBracket","Could not find closing ']' for argument to %1",this.currentCS)},c.prototype.GetDelimiter=function(f,d){var u=this.GetNext();if(this.i+=u.length,this.i<=this.string.length&&(u==="\\"?u+=this.GetCS():u==="{"&&d&&(this.i--,u=this.GetArgument(f).trim()),this.contains("delimiter",u)))return this.convertDelimiter(u);throw new a.default("MissingOrUnrecognizedDelim","Missing or unrecognized delimiter for %1",this.currentCS)},c.prototype.GetDimen=function(f){if(this.GetNext()==="{"){var d=this.GetArgument(f),u=r(i.default.matchDimen(d),2),m=u[0],p=u[1];if(m)return m+p}else{var d=this.string.slice(this.i),_=r(i.default.matchDimen(d,!0),3),m=_[0],p=_[1],y=_[2];if(m)return this.i+=y,m+p}throw new a.default("MissingDimOrUnits","Missing dimension or its units for %1",this.currentCS)},c.prototype.GetUpTo=function(f,d){for(;this.nextIsSpace();)this.i++;for(var u=this.i,m=0;this.i<this.string.length;){var p=this.i,_=this.GetNext();switch(this.i+=_.length,_){case"\\":_+=this.GetCS();break;case"{":m++;break;case"}":if(m===0)throw new a.default("ExtraCloseLooking","Extra close brace while looking for %1",d);m--;break}if(m===0&&_===d)return this.string.slice(u,p)}throw new a.default("TokenNotFoundForCommand","Could not find %1 for %2",d,this.currentCS)},c.prototype.ParseArg=function(f){return new c(this.GetArgument(f),this.stack.env,this.configuration).mml()},c.prototype.ParseUpTo=function(f,d){return new c(this.GetUpTo(f,d),this.stack.env,this.configuration).mml()},c.prototype.GetDelimiterArg=function(f){var d=i.default.trimSpaces(this.GetArgument(f));if(d==="")return null;if(this.contains("delimiter",d))return d;throw new a.default("MissingOrUnrecognizedDelim","Missing or unrecognized delimiter for %1",this.currentCS)},c.prototype.GetStar=function(){var f=this.GetNext()==="*";return f&&this.i++,f},c.prototype.create=function(f){for(var d,u=[],m=1;m<arguments.length;m++)u[m-1]=arguments[m];return(d=this.configuration.nodeFactory).create.apply(d,e([f],r(u),!1))},c}();return TexParser.default=l,TexParser}var ParseOptions$1={},StackItemFactory$1={},StackItem={},__extends$j=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$e=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$a=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__values$b=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__importDefault$E=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(StackItem,"__esModule",{value:!0});StackItem.BaseItem=StackItem.MmlStack=void 0;var TexError_js_1$h=__importDefault$E(TexError$1),MmlStack=function(){function t(r){this._nodes=r}return Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!1,configurable:!0}),t.prototype.Push=function(){for(var r,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(r=this._nodes).push.apply(r,__spreadArray$a([],__read$e(e),!1))},t.prototype.Pop=function(){return this._nodes.pop()},Object.defineProperty(t.prototype,"First",{get:function(){return this._nodes[this.Size()-1]},set:function(r){this._nodes[this.Size()-1]=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Last",{get:function(){return this._nodes[0]},set:function(r){this._nodes[0]=r},enumerable:!1,configurable:!0}),t.prototype.Peek=function(r){return r==null&&(r=1),this._nodes.slice(this.Size()-r)},t.prototype.Size=function(){return this._nodes.length},t.prototype.Clear=function(){this._nodes=[]},t.prototype.toMml=function(r,e){return r===void 0&&(r=!0),this._nodes.length===1&&!e?this.First:this.create("node",r?"inferredMrow":"mrow",this._nodes,{})},t.prototype.create=function(r){for(var e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return(e=this.factory.configuration.nodeFactory).create.apply(e,__spreadArray$a([r],__read$e(n),!1))},t}();StackItem.MmlStack=MmlStack;var BaseItem=function(t){__extends$j(r,t);function r(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=t.call(this,n)||this;return o.factory=e,o.global={},o._properties={},o.isOpen&&(o._env={}),o}return Object.defineProperty(r.prototype,"kind",{get:function(){return"base"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"env",{get:function(){return this._env},set:function(e){this._env=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"copyEnv",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.getProperty=function(e){return this._properties[e]},r.prototype.setProperty=function(e,n){return this._properties[e]=n,this},Object.defineProperty(r.prototype,"isOpen",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isClose",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isFinal",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.isKind=function(e){return e===this.kind},r.prototype.checkItem=function(e){if(e.isKind("over")&&this.isOpen&&(e.setProperty("num",this.toMml(!1)),this.Clear()),e.isKind("cell")&&this.isOpen){if(e.getProperty("linebreak"))return r.fail;throw new TexError_js_1$h.default("Misplaced","Misplaced %1",e.getName())}if(e.isClose&&this.getErrors(e.kind)){var n=__read$e(this.getErrors(e.kind),2),i=n[0],o=n[1];throw new TexError_js_1$h.default(i,o,e.getName())}return e.isFinal?(this.Push(e.First),r.fail):r.success},r.prototype.clearEnv=function(){var e,n;try{for(var i=__values$b(Object.keys(this.env)),o=i.next();!o.done;o=i.next()){var a=o.value;delete this.env[a]}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},r.prototype.setProperties=function(e){return Object.assign(this._properties,e),this},r.prototype.getName=function(){return this.getProperty("name")},r.prototype.toString=function(){return this.kind+"["+this.nodes.join("; ")+"]"},r.prototype.getErrors=function(e){var n=this.constructor;return(n.errors||{})[e]||r.errors[e]},r.fail=[null,!1],r.success=[null,!0],r.errors={end:["MissingBeginExtraEnd","Missing \\begin{%1} or extra \\end{%1}"],close:["ExtraCloseMissingOpen","Extra close brace or missing open brace"],right:["MissingLeftExtraRight","Missing \\left or extra \\right"],middle:["ExtraMiddle","Extra \\middle"]},r}(MmlStack);StackItem.BaseItem=BaseItem;var __extends$i=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_a$8;Object.defineProperty(StackItemFactory$1,"__esModule",{value:!0});var StackItem_js_1$5=StackItem,Factory_js_1=Factory,DummyItem=function(t){__extends$i(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}(StackItem_js_1$5.BaseItem),StackItemFactory=function(t){__extends$i(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.defaultKind="dummy",e.configuration=null,e}return r.DefaultStackItems=(_a$8={},_a$8[DummyItem.prototype.kind]=DummyItem,_a$8),r}(Factory_js_1.AbstractFactory);StackItemFactory$1.default=StackItemFactory;var NodeFactory$1={},__read$d=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$9=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__importDefault$D=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(NodeFactory$1,"__esModule",{value:!0});NodeFactory$1.NodeFactory=void 0;var NodeUtil_js_1$e=__importDefault$D(NodeUtil$1),NodeFactory=function(){function t(){this.mmlFactory=null,this.factory={node:t.createNode,token:t.createToken,text:t.createText,error:t.createError}}return t.createNode=function(r,e,n,i,o){n===void 0&&(n=[]),i===void 0&&(i={});var a=r.mmlFactory.create(e);return a.setChildren(n),o&&a.appendChild(o),NodeUtil_js_1$e.default.setProperties(a,i),a},t.createToken=function(r,e,n,i){n===void 0&&(n={}),i===void 0&&(i="");var o=r.create("text",i);return r.create("node",e,[],n,o)},t.createText=function(r,e){return e==null?null:r.mmlFactory.create("text").setText(e)},t.createError=function(r,e){var n=r.create("text",e),i=r.create("node","mtext",[],{},n),o=r.create("node","merror",[i],{"data-mjx-error":e});return o},t.prototype.setMmlFactory=function(r){this.mmlFactory=r},t.prototype.set=function(r,e){this.factory[r]=e},t.prototype.setCreators=function(r){for(var e in r)this.set(e,r[e])},t.prototype.create=function(r){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var i=this.factory[r]||this.factory.node,o=i.apply(void 0,__spreadArray$9([this,e[0]],__read$d(e.slice(1)),!1));return r==="node"&&this.configuration.addNode(e[0],o),o},t.prototype.get=function(r){return this.factory[r]},t}();NodeFactory$1.NodeFactory=NodeFactory;var __read$c=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$8=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__values$a=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__importDefault$C=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ParseOptions$1,"__esModule",{value:!0});var StackItemFactory_js_1=__importDefault$C(StackItemFactory$1),NodeFactory_js_1$1=NodeFactory$1,NodeUtil_js_1$d=__importDefault$C(NodeUtil$1),Options_js_1$3=Options$1,ParseOptions=function(){function t(r,e){e===void 0&&(e=[]),this.options={},this.packageData=new Map,this.parsers=[],this.root=null,this.nodeLists={},this.error=!1,this.handlers=r.handlers,this.nodeFactory=new NodeFactory_js_1$1.NodeFactory,this.nodeFactory.configuration=this,this.nodeFactory.setCreators(r.nodes),this.itemFactory=new StackItemFactory_js_1.default(r.items),this.itemFactory.configuration=this,Options_js_1$3.defaultOptions.apply(void 0,__spreadArray$8([this.options],__read$c(e),!1)),(0,Options_js_1$3.defaultOptions)(this.options,r.options)}return t.prototype.pushParser=function(r){this.parsers.unshift(r)},t.prototype.popParser=function(){this.parsers.shift()},Object.defineProperty(t.prototype,"parser",{get:function(){return this.parsers[0]},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.parsers=[],this.root=null,this.nodeLists={},this.error=!1,this.tags.resetTag()},t.prototype.addNode=function(r,e){var n=this.nodeLists[r];if(n||(n=this.nodeLists[r]=[]),n.push(e),e.kind!==r){var i=NodeUtil_js_1$d.default.getProperty(e,"in-lists")||"",o=(i?i.split(/,/):[]).concat(r).join(",");NodeUtil_js_1$d.default.setProperty(e,"in-lists",o)}},t.prototype.getList=function(r){var e,n,i=this.nodeLists[r]||[],o=[];try{for(var a=__values$a(i),s=a.next();!s.done;s=a.next()){var l=s.value;this.inTree(l)&&o.push(l)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return this.nodeLists[r]=o,o},t.prototype.removeFromList=function(r,e){var n,i,o=this.nodeLists[r]||[];try{for(var a=__values$a(e),s=a.next();!s.done;s=a.next()){var l=s.value,c=o.indexOf(l);c>=0&&o.splice(c,1)}}catch(f){n={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.inTree=function(r){for(;r&&r!==this.root;)r=r.parent;return!!r},t}();ParseOptions$1.default=ParseOptions;var Tags={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var f=function(d,u){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var _ in p)Object.prototype.hasOwnProperty.call(p,_)&&(m[_]=p[_])},f(d,u)};return function(d,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");f(d,u);function m(){this.constructor=d}d.prototype=u===null?Object.create(u):(m.prototype=u.prototype,new m)}}(),e=commonjsGlobal&&commonjsGlobal.__values||function(f){var d=typeof Symbol=="function"&&Symbol.iterator,u=d&&f[d],m=0;if(u)return u.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&m>=f.length&&(f=void 0),{value:f&&f[m++],done:!f}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},n=commonjsGlobal&&commonjsGlobal.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(t,"__esModule",{value:!0}),t.TagsFactory=t.AllTags=t.NoTags=t.AbstractTags=t.TagInfo=t.Label=void 0;var i=n(requireTexParser()),o=function(){function f(d,u){d===void 0&&(d="???"),u===void 0&&(u=""),this.tag=d,this.id=u}return f}();t.Label=o;var a=function(){function f(d,u,m,p,_,y,g,v){d===void 0&&(d=""),u===void 0&&(u=!1),m===void 0&&(m=!1),p===void 0&&(p=null),_===void 0&&(_=""),y===void 0&&(y=""),g===void 0&&(g=!1),v===void 0&&(v=""),this.env=d,this.taggable=u,this.defaultTags=m,this.tag=p,this.tagId=_,this.tagFormat=y,this.noTag=g,this.labelId=v}return f}();t.TagInfo=a;var s=function(){function f(){this.counter=0,this.allCounter=0,this.configuration=null,this.ids={},this.allIds={},this.labels={},this.allLabels={},this.redo=!1,this.refUpdate=!1,this.currentTag=new a,this.history=[],this.stack=[],this.enTag=function(d,u){var m=this.configuration.nodeFactory,p=m.create("node","mtd",[d]),_=m.create("node","mlabeledtr",[u,p]),y=m.create("node","mtable",[_],{side:this.configuration.options.tagSide,minlabelspacing:this.configuration.options.tagIndent,displaystyle:!0});return y}}return f.prototype.start=function(d,u,m){this.currentTag&&this.stack.push(this.currentTag),this.currentTag=new a(d,u,m)},Object.defineProperty(f.prototype,"env",{get:function(){return this.currentTag.env},enumerable:!1,configurable:!0}),f.prototype.end=function(){this.history.push(this.currentTag),this.currentTag=this.stack.pop()},f.prototype.tag=function(d,u){this.currentTag.tag=d,this.currentTag.tagFormat=u?d:this.formatTag(d),this.currentTag.noTag=!1},f.prototype.notag=function(){this.tag("",!0),this.currentTag.noTag=!0},Object.defineProperty(f.prototype,"noTag",{get:function(){return this.currentTag.noTag},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"label",{get:function(){return this.currentTag.labelId},set:function(d){this.currentTag.labelId=d},enumerable:!1,configurable:!0}),f.prototype.formatUrl=function(d,u){return u+"#"+encodeURIComponent(d)},f.prototype.formatTag=function(d){return"("+d+")"},f.prototype.formatId=function(d){return"mjx-eqn:"+d.replace(/\s/g,"_")},f.prototype.formatNumber=function(d){return d.toString()},f.prototype.autoTag=function(){this.currentTag.tag==null&&(this.counter++,this.tag(this.formatNumber(this.counter),!1))},f.prototype.clearTag=function(){this.label="",this.tag(null,!0),this.currentTag.tagId=""},f.prototype.getTag=function(d){if(d===void 0&&(d=!1),d)return this.autoTag(),this.makeTag();var u=this.currentTag;return u.taggable&&!u.noTag&&(u.defaultTags&&this.autoTag(),u.tag)?this.makeTag():null},f.prototype.resetTag=function(){this.history=[],this.redo=!1,this.refUpdate=!1,this.clearTag()},f.prototype.reset=function(d){d===void 0&&(d=0),this.resetTag(),this.counter=this.allCounter=d,this.allLabels={},this.allIds={}},f.prototype.startEquation=function(d){this.history=[],this.stack=[],this.clearTag(),this.currentTag=new a("",void 0,void 0),this.labels={},this.ids={},this.counter=this.allCounter,this.redo=!1;var u=d.inputData.recompile;u&&(this.refUpdate=!0,this.counter=u.counter)},f.prototype.finishEquation=function(d){this.redo&&(d.inputData.recompile={state:d.state(),counter:this.allCounter}),this.refUpdate||(this.allCounter=this.counter),Object.assign(this.allIds,this.ids),Object.assign(this.allLabels,this.labels)},f.prototype.finalize=function(d,u){if(!u.display||this.currentTag.env||this.currentTag.tag==null)return d;var m=this.makeTag(),p=this.enTag(d,m);return p},f.prototype.makeId=function(){this.currentTag.tagId=this.formatId(this.configuration.options.useLabelIds?this.label||this.currentTag.tag:this.currentTag.tag)},f.prototype.makeTag=function(){this.makeId(),this.label&&(this.labels[this.label]=new o(this.currentTag.tag,this.currentTag.tagId));var d=new i.default("\\text{"+this.currentTag.tagFormat+"}",{},this.configuration).mml();return this.configuration.nodeFactory.create("node","mtd",[d],{id:this.currentTag.tagId})},f}();t.AbstractTags=s;var l=function(f){r(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return d.prototype.autoTag=function(){},d.prototype.getTag=function(){return this.currentTag.tag?f.prototype.getTag.call(this):null},d}(s);t.NoTags=l;var c=function(f){r(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return d.prototype.finalize=function(u,m){if(!m.display||this.history.find(function(_){return _.taggable}))return u;var p=this.getTag(!0);return this.enTag(u,p)},d}(s);t.AllTags=c,function(f){var d=new Map([["none",l],["all",c]]),u="none";f.OPTIONS={tags:u,tagSide:"right",tagIndent:"0.8em",useLabelIds:!0,ignoreDuplicateLabels:!1},f.add=function(m,p){d.set(m,p)},f.addTags=function(m){var p,_;try{for(var y=e(Object.keys(m)),g=y.next();!g.done;g=y.next()){var v=g.value;f.add(v,m[v])}}catch(x){p={error:x}}finally{try{g&&!g.done&&(_=y.return)&&_.call(y)}finally{if(p)throw p.error}}},f.create=function(m){var p=d.get(m)||d.get(u);if(!p)throw Error("Unknown tags class");return new p},f.setDefault=function(m){u=m},f.getDefault=function(){return f.create(u)}}(t.TagsFactory||(t.TagsFactory={}))})(Tags);var Configuration={},MapHandler={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__values||function(l){var c=typeof Symbol=="function"&&Symbol.iterator,f=c&&l[c],d=0;if(f)return f.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&d>=l.length&&(l=void 0),{value:l&&l[d++],done:!l}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")},e=commonjsGlobal&&commonjsGlobal.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var d=f.call(l),u,m=[],p;try{for(;(c===void 0||c-- >0)&&!(u=d.next()).done;)m.push(u.value)}catch(_){p={error:_}}finally{try{u&&!u.done&&(f=d.return)&&f.call(d)}finally{if(p)throw p.error}}return m};Object.defineProperty(t,"__esModule",{value:!0}),t.SubHandlers=t.SubHandler=t.MapHandler=void 0;var n=PrioritizedList$1,i=FunctionList$1,o;(function(l){var c=new Map;l.register=function(f){c.set(f.name,f)},l.getMap=function(f){return c.get(f)}})(o=t.MapHandler||(t.MapHandler={}));var a=function(){function l(){this._configuration=new n.PrioritizedList,this._fallback=new i.FunctionList}return l.prototype.add=function(c,f,d){var u,m;d===void 0&&(d=n.PrioritizedList.DEFAULTPRIORITY);try{for(var p=r(c.slice().reverse()),_=p.next();!_.done;_=p.next()){var y=_.value,g=o.getMap(y);if(!g){this.warn("Configuration "+y+" not found! Omitted.");return}this._configuration.add(g,d)}}catch(v){u={error:v}}finally{try{_&&!_.done&&(m=p.return)&&m.call(p)}finally{if(u)throw u.error}}f&&this._fallback.add(f,d)},l.prototype.parse=function(c){var f,d;try{for(var u=r(this._configuration),m=u.next();!m.done;m=u.next()){var p=m.value.item,_=p.parse(c);if(_)return _}}catch(x){f={error:x}}finally{try{m&&!m.done&&(d=u.return)&&d.call(u)}finally{if(f)throw f.error}}var y=e(c,2),g=y[0],v=y[1];Array.from(this._fallback)[0].item(g,v)},l.prototype.lookup=function(c){var f=this.applicable(c);return f?f.lookup(c):null},l.prototype.contains=function(c){return!!this.applicable(c)},l.prototype.toString=function(){var c,f,d=[];try{for(var u=r(this._configuration),m=u.next();!m.done;m=u.next()){var p=m.value.item;d.push(p.name)}}catch(_){c={error:_}}finally{try{m&&!m.done&&(f=u.return)&&f.call(u)}finally{if(c)throw c.error}}return d.join(", ")},l.prototype.applicable=function(c){var f,d;try{for(var u=r(this._configuration),m=u.next();!m.done;m=u.next()){var p=m.value.item;if(p.contains(c))return p}}catch(_){f={error:_}}finally{try{m&&!m.done&&(d=u.return)&&d.call(u)}finally{if(f)throw f.error}}return null},l.prototype.retrieve=function(c){var f,d;try{for(var u=r(this._configuration),m=u.next();!m.done;m=u.next()){var p=m.value.item;if(p.name===c)return p}}catch(_){f={error:_}}finally{try{m&&!m.done&&(d=u.return)&&d.call(u)}finally{if(f)throw f.error}}return null},l.prototype.warn=function(c){console.log("TexParser Warning: "+c)},l}();t.SubHandler=a;var s=function(){function l(){this.map=new Map}return l.prototype.add=function(c,f,d){var u,m;d===void 0&&(d=n.PrioritizedList.DEFAULTPRIORITY);try{for(var p=r(Object.keys(c)),_=p.next();!_.done;_=p.next()){var y=_.value,g=y,v=this.get(g);v||(v=new a,this.set(g,v)),v.add(c[g],f[g],d)}}catch(x){u={error:x}}finally{try{_&&!_.done&&(m=p.return)&&m.call(p)}finally{if(u)throw u.error}}},l.prototype.set=function(c,f){this.map.set(c,f)},l.prototype.get=function(c){return this.map.get(c)},l.prototype.retrieve=function(c){var f,d;try{for(var u=r(this.map.values()),m=u.next();!m.done;m=u.next()){var p=m.value,_=p.retrieve(c);if(_)return _}}catch(y){f={error:y}}finally{try{m&&!m.done&&(d=u.return)&&d.call(u)}finally{if(f)throw f.error}}return null},l.prototype.keys=function(){return this.map.keys()},l}();t.SubHandlers=s})(MapHandler);(function(t){var r=commonjsGlobal&&commonjsGlobal.__values||function(d){var u=typeof Symbol=="function"&&Symbol.iterator,m=u&&d[u],p=0;if(m)return m.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&p>=d.length&&(d=void 0),{value:d&&d[p++],done:!d}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},e=commonjsGlobal&&commonjsGlobal.__read||function(d,u){var m=typeof Symbol=="function"&&d[Symbol.iterator];if(!m)return d;var p=m.call(d),_,y=[],g;try{for(;(u===void 0||u-- >0)&&!(_=p.next()).done;)y.push(_.value)}catch(v){g={error:v}}finally{try{_&&!_.done&&(m=p.return)&&m.call(p)}finally{if(g)throw g.error}}return y};Object.defineProperty(t,"__esModule",{value:!0}),t.ParserConfiguration=t.ConfigurationHandler=t.Configuration=void 0;var n=Options$1,i=MapHandler,o=FunctionList$1,a=PrioritizedList$1,s=Tags,l=function(){function d(u,m,p,_,y,g,v,x,b,S,M,C,A){m===void 0&&(m={}),p===void 0&&(p={}),_===void 0&&(_={}),y===void 0&&(y={}),g===void 0&&(g={}),v===void 0&&(v={}),x===void 0&&(x=[]),b===void 0&&(b=[]),S===void 0&&(S=null),M===void 0&&(M=null),this.name=u,this.handler=m,this.fallback=p,this.items=_,this.tags=y,this.options=g,this.nodes=v,this.preprocessors=x,this.postprocessors=b,this.initMethod=S,this.configMethod=M,this.priority=C,this.parser=A,this.handler=Object.assign({character:[],delimiter:[],macro:[],environment:[]},m)}return d.makeProcessor=function(u,m){return Array.isArray(u)?u:[u,m]},d._create=function(u,m){var p=this;m===void 0&&(m={});var _=m.priority||a.PrioritizedList.DEFAULTPRIORITY,y=m.init?this.makeProcessor(m.init,_):null,g=m.config?this.makeProcessor(m.config,_):null,v=(m.preprocessors||[]).map(function(S){return p.makeProcessor(S,_)}),x=(m.postprocessors||[]).map(function(S){return p.makeProcessor(S,_)}),b=m.parser||"tex";return new d(u,m.handler||{},m.fallback||{},m.items||{},m.tags||{},m.options||{},m.nodes||{},v,x,y,g,_,b)},d.create=function(u,m){m===void 0&&(m={});var p=d._create(u,m);return c.set(u,p),p},d.local=function(u){return u===void 0&&(u={}),d._create("",u)},Object.defineProperty(d.prototype,"init",{get:function(){return this.initMethod?this.initMethod[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"config",{get:function(){return this.configMethod?this.configMethod[0]:null},enumerable:!1,configurable:!0}),d}();t.Configuration=l;var c;(function(d){var u=new Map;d.set=function(m,p){u.set(m,p)},d.get=function(m){return u.get(m)},d.keys=function(){return u.keys()}})(c=t.ConfigurationHandler||(t.ConfigurationHandler={}));var f=function(){function d(u,m){var p,_,y,g;m===void 0&&(m=["tex"]),this.initMethod=new o.FunctionList,this.configMethod=new o.FunctionList,this.configurations=new a.PrioritizedList,this.parsers=[],this.handlers=new i.SubHandlers,this.items={},this.tags={},this.options={},this.nodes={},this.parsers=m;try{for(var v=r(u.slice().reverse()),x=v.next();!x.done;x=v.next()){var b=x.value;this.addPackage(b)}}catch($){p={error:$}}finally{try{x&&!x.done&&(_=v.return)&&_.call(v)}finally{if(p)throw p.error}}try{for(var S=r(this.configurations),M=S.next();!M.done;M=S.next()){var C=M.value,A=C.item,E=C.priority;this.append(A,E)}}catch($){y={error:$}}finally{try{M&&!M.done&&(g=S.return)&&g.call(S)}finally{if(y)throw y.error}}}return d.prototype.init=function(){this.initMethod.execute(this)},d.prototype.config=function(u){var m,p;this.configMethod.execute(this,u);try{for(var _=r(this.configurations),y=_.next();!y.done;y=_.next()){var g=y.value;this.addFilters(u,g.item)}}catch(v){m={error:v}}finally{try{y&&!y.done&&(p=_.return)&&p.call(_)}finally{if(m)throw m.error}}},d.prototype.addPackage=function(u){var m=typeof u=="string"?u:u[0],p=this.getPackage(m);p&&this.configurations.add(p,typeof u=="string"?p.priority:u[1])},d.prototype.add=function(u,m,p){var _,y;p===void 0&&(p={});var g=this.getPackage(u);this.append(g),this.configurations.add(g,g.priority),this.init();var v=m.parseOptions;v.nodeFactory.setCreators(g.nodes);try{for(var x=r(Object.keys(g.items)),b=x.next();!b.done;b=x.next()){var S=b.value;v.itemFactory.setNodeClass(S,g.items[S])}}catch(M){_={error:M}}finally{try{b&&!b.done&&(y=x.return)&&y.call(x)}finally{if(_)throw _.error}}s.TagsFactory.addTags(g.tags),(0,n.defaultOptions)(v.options,g.options),(0,n.userOptions)(v.options,p),this.addFilters(m,g),g.config&&g.config(this,m)},d.prototype.getPackage=function(u){var m=c.get(u);if(m&&this.parsers.indexOf(m.parser)<0)throw Error("Package ".concat(u," doesn't target the proper parser"));return m},d.prototype.append=function(u,m){m=m||u.priority,u.initMethod&&this.initMethod.add(u.initMethod[0],u.initMethod[1]),u.configMethod&&this.configMethod.add(u.configMethod[0],u.configMethod[1]),this.handlers.add(u.handler,u.fallback,m),Object.assign(this.items,u.items),Object.assign(this.tags,u.tags),(0,n.defaultOptions)(this.options,u.options),Object.assign(this.nodes,u.nodes)},d.prototype.addFilters=function(u,m){var p,_,y,g;try{for(var v=r(m.preprocessors),x=v.next();!x.done;x=v.next()){var b=e(x.value,2),S=b[0],M=b[1];u.preFilters.add(S,M)}}catch(D){p={error:D}}finally{try{x&&!x.done&&(_=v.return)&&_.call(v)}finally{if(p)throw p.error}}try{for(var C=r(m.postprocessors),A=C.next();!A.done;A=C.next()){var E=e(A.value,2),$=E[0],M=E[1];u.postFilters.add($,M)}}catch(D){y={error:D}}finally{try{A&&!A.done&&(g=C.return)&&g.call(C)}finally{if(y)throw y.error}}},d}();t.ParserConfiguration=f})(Configuration);var BaseConfiguration={},SymbolMap={},_Symbol={};Object.defineProperty(_Symbol,"__esModule",{value:!0});_Symbol.Macro=_Symbol.Symbol=void 0;var Symbol$1=function(){function t(r,e,n){this._symbol=r,this._char=e,this._attributes=n}return Object.defineProperty(t.prototype,"symbol",{get:function(){return this._symbol},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"char",{get:function(){return this._char},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){return this._attributes},enumerable:!1,configurable:!0}),t}();_Symbol.Symbol=Symbol$1;var Macro=function(){function t(r,e,n){n===void 0&&(n=[]),this._symbol=r,this._func=e,this._args=n}return Object.defineProperty(t.prototype,"symbol",{get:function(){return this._symbol},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"func",{get:function(){return this._func},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"args",{get:function(){return this._args},enumerable:!1,configurable:!0}),t}();_Symbol.Macro=Macro;var __extends$h=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$b=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__values$9=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__spreadArray$7=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(SymbolMap,"__esModule",{value:!0});SymbolMap.EnvironmentMap=SymbolMap.CommandMap=SymbolMap.MacroMap=SymbolMap.DelimiterMap=SymbolMap.CharacterMap=SymbolMap.AbstractParseMap=SymbolMap.RegExpMap=SymbolMap.AbstractSymbolMap=SymbolMap.parseResult=void 0;var Symbol_js_1$2=_Symbol,MapHandler_js_1$2=MapHandler;function parseResult(t){return t===void 0?!0:t}SymbolMap.parseResult=parseResult;var AbstractSymbolMap=function(){function t(r,e){this._name=r,this._parser=e,MapHandler_js_1$2.MapHandler.register(this)}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t.prototype.parserFor=function(r){return this.contains(r)?this.parser:null},t.prototype.parse=function(r){var e=__read$b(r,2),n=e[0],i=e[1],o=this.parserFor(i),a=this.lookup(i);return o&&a?parseResult(o(n,a)):null},Object.defineProperty(t.prototype,"parser",{get:function(){return this._parser},set:function(r){this._parser=r},enumerable:!1,configurable:!0}),t}();SymbolMap.AbstractSymbolMap=AbstractSymbolMap;var RegExpMap=function(t){__extends$h(r,t);function r(e,n,i){var o=t.call(this,e,n)||this;return o._regExp=i,o}return r.prototype.contains=function(e){return this._regExp.test(e)},r.prototype.lookup=function(e){return this.contains(e)?e:null},r}(AbstractSymbolMap);SymbolMap.RegExpMap=RegExpMap;var AbstractParseMap=function(t){__extends$h(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.map=new Map,e}return r.prototype.lookup=function(e){return this.map.get(e)},r.prototype.contains=function(e){return this.map.has(e)},r.prototype.add=function(e,n){this.map.set(e,n)},r.prototype.remove=function(e){this.map.delete(e)},r}(AbstractSymbolMap);SymbolMap.AbstractParseMap=AbstractParseMap;var CharacterMap=function(t){__extends$h(r,t);function r(e,n,i){var o,a,s=t.call(this,e,n)||this;try{for(var l=__values$9(Object.keys(i)),c=l.next();!c.done;c=l.next()){var f=c.value,d=i[f],u=__read$b(typeof d=="string"?[d,null]:d,2),m=u[0],p=u[1],_=new Symbol_js_1$2.Symbol(f,m,p);s.add(f,_)}}catch(y){o={error:y}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return s}return r}(AbstractParseMap);SymbolMap.CharacterMap=CharacterMap;var DelimiterMap=function(t){__extends$h(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.parse=function(e){var n=__read$b(e,2),i=n[0],o=n[1];return t.prototype.parse.call(this,[i,"\\"+o])},r}(CharacterMap);SymbolMap.DelimiterMap=DelimiterMap;var MacroMap=function(t){__extends$h(r,t);function r(e,n,i){var o,a,s=t.call(this,e,null)||this;try{for(var l=__values$9(Object.keys(n)),c=l.next();!c.done;c=l.next()){var f=c.value,d=n[f],u=__read$b(typeof d=="string"?[d]:d),m=u[0],p=u.slice(1),_=new Symbol_js_1$2.Macro(f,i[m],p);s.add(f,_)}}catch(y){o={error:y}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return s}return r.prototype.parserFor=function(e){var n=this.lookup(e);return n?n.func:null},r.prototype.parse=function(e){var n=__read$b(e,2),i=n[0],o=n[1],a=this.lookup(o),s=this.parserFor(o);return!a||!s?null:parseResult(s.apply(void 0,__spreadArray$7([i,a.symbol],__read$b(a.args),!1)))},r}(AbstractParseMap);SymbolMap.MacroMap=MacroMap;var CommandMap=function(t){__extends$h(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.parse=function(e){var n=__read$b(e,2),i=n[0],o=n[1],a=this.lookup(o),s=this.parserFor(o);if(!a||!s)return null;var l=i.currentCS;i.currentCS="\\"+o;var c=s.apply(void 0,__spreadArray$7([i,"\\"+a.symbol],__read$b(a.args),!1));return i.currentCS=l,parseResult(c)},r}(MacroMap);SymbolMap.CommandMap=CommandMap;var EnvironmentMap=function(t){__extends$h(r,t);function r(e,n,i,o){var a=t.call(this,e,i,o)||this;return a.parser=n,a}return r.prototype.parse=function(e){var n=__read$b(e,2),i=n[0],o=n[1],a=this.lookup(o),s=this.parserFor(o);return!a||!s?null:parseResult(this.parser(i,a.symbol,s,a.args))},r}(MacroMap);SymbolMap.EnvironmentMap=EnvironmentMap;var BaseItems={},__extends$g=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__read$a=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$6=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__importDefault$B=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(BaseItems,"__esModule",{value:!0});BaseItems.EquationItem=BaseItems.EqnArrayItem=BaseItems.ArrayItem=BaseItems.DotsItem=BaseItems.NonscriptItem=BaseItems.NotItem=BaseItems.FnItem=BaseItems.MmlItem=BaseItems.CellItem=BaseItems.PositionItem=BaseItems.StyleItem=BaseItems.EndItem=BaseItems.BeginItem=BaseItems.RightItem=BaseItems.Middle=BaseItems.LeftItem=BaseItems.OverItem=BaseItems.SubsupItem=BaseItems.PrimeItem=BaseItems.CloseItem=BaseItems.OpenItem=BaseItems.StopItem=BaseItems.StartItem=void 0;var MapHandler_js_1$1=MapHandler,Entities_js_1$1=Entities,MmlNode_js_1$9=MmlNode,TexError_js_1$g=__importDefault$B(TexError$1),ParseUtil_js_1$d=__importDefault$B(requireParseUtil()),NodeUtil_js_1$c=__importDefault$B(NodeUtil$1),StackItem_js_1$4=StackItem,StartItem=function(t){__extends$g(r,t);function r(e,n){var i=t.call(this,e)||this;return i.global=n,i}return Object.defineProperty(r.prototype,"kind",{get:function(){return"start"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){if(e.isKind("stop")){var n=this.toMml();return this.global.isInner||(n=this.factory.configuration.tags.finalize(n,this.env)),[[this.factory.create("mml",n)],!0]}return t.prototype.checkItem.call(this,e)},r}(StackItem_js_1$4.BaseItem);BaseItems.StartItem=StartItem;var StopItem=function(t){__extends$g(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"stop"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),r}(StackItem_js_1$4.BaseItem);BaseItems.StopItem=StopItem;var OpenItem=function(t){__extends$g(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"open"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){if(e.isKind("close")){var n=this.toMml(),i=this.create("node","TeXAtom",[n]);return[[this.factory.create("mml",i)],!0]}return t.prototype.checkItem.call(this,e)},r.errors=Object.assign(Object.create(StackItem_js_1$4.BaseItem.errors),{stop:["ExtraOpenMissingClose","Extra open brace or missing close brace"]}),r}(StackItem_js_1$4.BaseItem);BaseItems.OpenItem=OpenItem;var CloseItem=function(t){__extends$g(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"close"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),r}(StackItem_js_1$4.BaseItem);BaseItems.CloseItem=CloseItem;var PrimeItem=function(t){__extends$g(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"prime"},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){var n=__read$a(this.Peek(2),2),i=n[0],o=n[1];if(!NodeUtil_js_1$c.default.isType(i,"msubsup")||NodeUtil_js_1$c.default.isType(i,"msup")){var a=this.create("node","msup",[i,o]);return[[a,e],!0]}return NodeUtil_js_1$c.default.setChild(i,i.sup,o),[[i,e],!0]},r}(StackItem_js_1$4.BaseItem);BaseItems.PrimeItem=PrimeItem;var SubsupItem=function(t){__extends$g(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"subsup"},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){if(e.isKind("open")||e.isKind("left"))return StackItem_js_1$4.BaseItem.success;var n=this.First,i=this.getProperty("position");if(e.isKind("mml")){if(this.getProperty("primes"))if(i!==2)NodeUtil_js_1$c.default.setChild(n,2,this.getProperty("primes"));else{NodeUtil_js_1$c.default.setProperty(this.getProperty("primes"),"variantForm",!0);var o=this.create("node","mrow",[this.getProperty("primes"),e.First]);e.First=o}NodeUtil_js_1$c.default.setChild(n,i,e.First),this.getProperty("movesupsub")!=null&&NodeUtil_js_1$c.default.setProperty(n,"movesupsub",this.getProperty("movesupsub"));var a=this.factory.create("mml",n);return[[a],!0]}if(t.prototype.checkItem.call(this,e)[1]){var s=this.getErrors(["","sub","sup"][i]);throw new(TexError_js_1$g.default.bind.apply(TexError_js_1$g.default,__spreadArray$6([void 0,s[0],s[1]],__read$a(s.splice(2)),!1)))}return null},r.errors=Object.assign(Object.create(StackItem_js_1$4.BaseItem.errors),{stop:["MissingScript","Missing superscript or subscript argument"],sup:["MissingOpenForSup","Missing open brace for superscript"],sub:["MissingOpenForSub","Missing open brace for subscript"]}),r}(StackItem_js_1$4.BaseItem);BaseItems.SubsupItem=SubsupItem;var OverItem=function(t){__extends$g(r,t);function r(e){var n=t.call(this,e)||this;return n.setProperty("name","\\over"),n}return Object.defineProperty(r.prototype,"kind",{get:function(){return"over"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){if(e.isKind("over"))throw new TexError_js_1$g.default("AmbiguousUseOf","Ambiguous use of %1",e.getName());if(e.isClose){var n=this.create("node","mfrac",[this.getProperty("num"),this.toMml(!1)]);return this.getProperty("thickness")!=null&&NodeUtil_js_1$c.default.setAttribute(n,"linethickness",this.getProperty("thickness")),(this.getProperty("open")||this.getProperty("close"))&&(NodeUtil_js_1$c.default.setProperty(n,"withDelims",!0),n=ParseUtil_js_1$d.default.fixedFence(this.factory.configuration,this.getProperty("open"),n,this.getProperty("close"))),[[this.factory.create("mml",n),e],!0]}return t.prototype.checkItem.call(this,e)},r.prototype.toString=function(){return"over["+this.getProperty("num")+" / "+this.nodes.join("; ")+"]"},r}(StackItem_js_1$4.BaseItem);BaseItems.OverItem=OverItem;var LeftItem=function(t){__extends$g(r,t);function r(e,n){var i=t.call(this,e)||this;return i.setProperty("delim",n),i}return Object.defineProperty(r.prototype,"kind",{get:function(){return"left"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){if(e.isKind("right"))return[[this.factory.create("mml",ParseUtil_js_1$d.default.fenced(this.factory.configuration,this.getProperty("delim"),this.toMml(),e.getProperty("delim"),"",e.getProperty("color")))],!0];if(e.isKind("middle")){var n={stretchy:!0};return e.getProperty("color")&&(n.mathcolor=e.getProperty("color")),this.Push(this.create("node","TeXAtom",[],{texClass:MmlNode_js_1$9.TEXCLASS.CLOSE}),this.create("token","mo",n,e.getProperty("delim")),this.create("node","TeXAtom",[],{texClass:MmlNode_js_1$9.TEXCLASS.OPEN})),this.env={},[[this],!0]}return t.prototype.checkItem.call(this,e)},r.errors=Object.assign(Object.create(StackItem_js_1$4.BaseItem.errors),{stop:["ExtraLeftMissingRight","Extra \\left or missing \\right"]}),r}(StackItem_js_1$4.BaseItem);BaseItems.LeftItem=LeftItem;var Middle=function(t){__extends$g(r,t);function r(e,n,i){var o=t.call(this,e)||this;return o.setProperty("delim",n),i&&o.setProperty("color",i),o}return Object.defineProperty(r.prototype,"kind",{get:function(){return"middle"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),r}(StackItem_js_1$4.BaseItem);BaseItems.Middle=Middle;var RightItem=function(t){__extends$g(r,t);function r(e,n,i){var o=t.call(this,e)||this;return o.setProperty("delim",n),i&&o.setProperty("color",i),o}return Object.defineProperty(r.prototype,"kind",{get:function(){return"right"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),r}(StackItem_js_1$4.BaseItem);BaseItems.RightItem=RightItem;var BeginItem=function(t){__extends$g(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"begin"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){if(e.isKind("end")){if(e.getName()!==this.getName())throw new TexError_js_1$g.default("EnvBadEnd","\\begin{%1} ended with \\end{%2}",this.getName(),e.getName());return this.getProperty("end")?StackItem_js_1$4.BaseItem.fail:[[this.factory.create("mml",this.toMml())],!0]}if(e.isKind("stop"))throw new TexError_js_1$g.default("EnvMissingEnd","Missing \\end{%1}",this.getName());return t.prototype.checkItem.call(this,e)},r}(StackItem_js_1$4.BaseItem);BaseItems.BeginItem=BeginItem;var EndItem=function(t){__extends$g(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"end"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),r}(StackItem_js_1$4.BaseItem);BaseItems.EndItem=EndItem;var StyleItem=function(t){__extends$g(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"style"},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){if(!e.isClose)return t.prototype.checkItem.call(this,e);var n=this.create("node","mstyle",this.nodes,this.getProperty("styles"));return[[this.factory.create("mml",n),e],!0]},r}(StackItem_js_1$4.BaseItem);BaseItems.StyleItem=StyleItem;var PositionItem=function(t){__extends$g(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"position"},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){if(e.isClose)throw new TexError_js_1$g.default("MissingBoxFor","Missing box for %1",this.getName());if(e.isFinal){var n=e.toMml();switch(this.getProperty("move")){case"vertical":return n=this.create("node","mpadded",[n],{height:this.getProperty("dh"),depth:this.getProperty("dd"),voffset:this.getProperty("dh")}),[[this.factory.create("mml",n)],!0];case"horizontal":return[[this.factory.create("mml",this.getProperty("left")),e,this.factory.create("mml",this.getProperty("right"))],!0]}}return t.prototype.checkItem.call(this,e)},r}(StackItem_js_1$4.BaseItem);BaseItems.PositionItem=PositionItem;var CellItem=function(t){__extends$g(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"cell"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isClose",{get:function(){return!0},enumerable:!1,configurable:!0}),r}(StackItem_js_1$4.BaseItem);BaseItems.CellItem=CellItem;var MmlItem=function(t){__extends$g(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"isFinal",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"kind",{get:function(){return"mml"},enumerable:!1,configurable:!0}),r}(StackItem_js_1$4.BaseItem);BaseItems.MmlItem=MmlItem;var FnItem=function(t){__extends$g(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"fn"},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){var n=this.First;if(n){if(e.isOpen)return StackItem_js_1$4.BaseItem.success;if(!e.isKind("fn")){var i=e.First;if(!e.isKind("mml")||!i)return[[n,e],!0];if(NodeUtil_js_1$c.default.isType(i,"mstyle")&&i.childNodes.length&&NodeUtil_js_1$c.default.isType(i.childNodes[0].childNodes[0],"mspace")||NodeUtil_js_1$c.default.isType(i,"mspace"))return[[n,e],!0];NodeUtil_js_1$c.default.isEmbellished(i)&&(i=NodeUtil_js_1$c.default.getCoreMO(i));var o=NodeUtil_js_1$c.default.getForm(i);if(o!=null&&[0,0,1,1,0,1,1,0,0,0][o[2]])return[[n,e],!0]}var a=this.create("token","mo",{texClass:MmlNode_js_1$9.TEXCLASS.NONE},Entities_js_1$1.entities.ApplyFunction);return[[n,a,e],!0]}return t.prototype.checkItem.apply(this,arguments)},r}(StackItem_js_1$4.BaseItem);BaseItems.FnItem=FnItem;var NotItem=function(t){__extends$g(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.remap=MapHandler_js_1$1.MapHandler.getMap("not_remap"),e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"not"},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){var n,i,o;if(e.isKind("open")||e.isKind("left"))return StackItem_js_1$4.BaseItem.success;if(e.isKind("mml")&&(NodeUtil_js_1$c.default.isType(e.First,"mo")||NodeUtil_js_1$c.default.isType(e.First,"mi")||NodeUtil_js_1$c.default.isType(e.First,"mtext"))&&(n=e.First,i=NodeUtil_js_1$c.default.getText(n),i.length===1&&!NodeUtil_js_1$c.default.getProperty(n,"movesupsub")&&NodeUtil_js_1$c.default.getChildren(n).length===1))return this.remap.contains(i)?(o=this.create("text",this.remap.lookup(i).char),NodeUtil_js_1$c.default.setChild(n,0,o)):(o=this.create("text","̸"),NodeUtil_js_1$c.default.appendChildren(n,[o])),[[e],!0];o=this.create("text","⧸");var a=this.create("node","mtext",[],{},o),s=this.create("node","mpadded",[a],{width:0});return n=this.create("node","TeXAtom",[s],{texClass:MmlNode_js_1$9.TEXCLASS.REL}),[[n,e],!0]},r}(StackItem_js_1$4.BaseItem);BaseItems.NotItem=NotItem;var NonscriptItem=function(t){__extends$g(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"nonscript"},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){if(e.isKind("mml")&&e.Size()===1){var n=e.First;if(n.isKind("mstyle")&&n.notParent&&(n=NodeUtil_js_1$c.default.getChildren(NodeUtil_js_1$c.default.getChildren(n)[0])[0]),n.isKind("mspace")){if(n!==e.First){var i=this.create("node","mrow",[e.Pop()]);e.Push(i)}this.factory.configuration.addNode("nonscript",e.First)}}return[[e],!0]},r}(StackItem_js_1$4.BaseItem);BaseItems.NonscriptItem=NonscriptItem;var DotsItem=function(t){__extends$g(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"dots"},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){if(e.isKind("open")||e.isKind("left"))return StackItem_js_1$4.BaseItem.success;var n=this.getProperty("ldots"),i=e.First;if(e.isKind("mml")&&NodeUtil_js_1$c.default.isEmbellished(i)){var o=NodeUtil_js_1$c.default.getTexClass(NodeUtil_js_1$c.default.getCoreMO(i));(o===MmlNode_js_1$9.TEXCLASS.BIN||o===MmlNode_js_1$9.TEXCLASS.REL)&&(n=this.getProperty("cdots"))}return[[n,e],!0]},r}(StackItem_js_1$4.BaseItem);BaseItems.DotsItem=DotsItem;var ArrayItem=function(t){__extends$g(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.table=[],e.row=[],e.frame=[],e.hfill=[],e.arraydef={},e.dashed=!1,e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"array"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"copyEnv",{get:function(){return!1},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){if(e.isClose&&!e.isKind("over")){if(e.getProperty("isEntry"))return this.EndEntry(),this.clearEnv(),StackItem_js_1$4.BaseItem.fail;if(e.getProperty("isCR"))return this.EndEntry(),this.EndRow(),this.clearEnv(),StackItem_js_1$4.BaseItem.fail;this.EndTable(),this.clearEnv();var n=this.factory.create("mml",this.createMml());if(this.getProperty("requireClose")){if(e.isKind("close"))return[[n],!0];throw new TexError_js_1$g.default("MissingCloseBrace","Missing close brace")}return[[n,e],!0]}return t.prototype.checkItem.call(this,e)},r.prototype.createMml=function(){var e=this.arraydef.scriptlevel;delete this.arraydef.scriptlevel;var n=this.create("node","mtable",this.table,this.arraydef);return e&&n.setProperty("scriptlevel",e),this.frame.length===4?NodeUtil_js_1$c.default.setAttribute(n,"frame",this.dashed?"dashed":"solid"):this.frame.length&&(this.arraydef.rowlines&&(this.arraydef.rowlines=this.arraydef.rowlines.replace(/none( none)+$/,"none")),NodeUtil_js_1$c.default.setAttribute(n,"frame",""),n=this.create("node","menclose",[n],{notation:this.frame.join(" ")}),((this.arraydef.columnlines||"none")!=="none"||(this.arraydef.rowlines||"none")!=="none")&&NodeUtil_js_1$c.default.setAttribute(n,"data-padding",0)),(this.getProperty("open")||this.getProperty("close"))&&(n=ParseUtil_js_1$d.default.fenced(this.factory.configuration,this.getProperty("open"),n,this.getProperty("close"))),n},r.prototype.EndEntry=function(){var e=this.create("node","mtd",this.nodes);this.hfill.length&&(this.hfill[0]===0&&NodeUtil_js_1$c.default.setAttribute(e,"columnalign","right"),this.hfill[this.hfill.length-1]===this.Size()&&NodeUtil_js_1$c.default.setAttribute(e,"columnalign",NodeUtil_js_1$c.default.getAttribute(e,"columnalign")?"center":"left")),this.row.push(e),this.Clear(),this.hfill=[]},r.prototype.EndRow=function(){var e;this.getProperty("isNumbered")&&this.row.length===3?(this.row.unshift(this.row.pop()),e=this.create("node","mlabeledtr",this.row)):e=this.create("node","mtr",this.row),this.table.push(e),this.row=[]},r.prototype.EndTable=function(){(this.Size()||this.row.length)&&(this.EndEntry(),this.EndRow()),this.checkLines()},r.prototype.checkLines=function(){if(this.arraydef.rowlines){var e=this.arraydef.rowlines.split(/ /);e.length===this.table.length?(this.frame.push("bottom"),e.pop(),this.arraydef.rowlines=e.join(" ")):e.length<this.table.length-1&&(this.arraydef.rowlines+=" none")}if(this.getProperty("rowspacing")){for(var n=this.arraydef.rowspacing.split(/ /);n.length<this.table.length;)n.push(this.getProperty("rowspacing")+"em");this.arraydef.rowspacing=n.join(" ")}},r.prototype.addRowSpacing=function(e){if(this.arraydef.rowspacing){var n=this.arraydef.rowspacing.split(/ /);if(!this.getProperty("rowspacing")){var i=ParseUtil_js_1$d.default.dimen2em(n[0]);this.setProperty("rowspacing",i)}for(var o=this.getProperty("rowspacing");n.length<this.table.length;)n.push(ParseUtil_js_1$d.default.Em(o));n[this.table.length-1]=ParseUtil_js_1$d.default.Em(Math.max(0,o+ParseUtil_js_1$d.default.dimen2em(e))),this.arraydef.rowspacing=n.join(" ")}},r}(StackItem_js_1$4.BaseItem);BaseItems.ArrayItem=ArrayItem;var EqnArrayItem=function(t){__extends$g(r,t);function r(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=t.call(this,e)||this;return o.maxrow=0,o.factory.configuration.tags.start(n[0],n[2],n[1]),o}return Object.defineProperty(r.prototype,"kind",{get:function(){return"eqnarray"},enumerable:!1,configurable:!0}),r.prototype.EndEntry=function(){this.row.length&&ParseUtil_js_1$d.default.fixInitialMO(this.factory.configuration,this.nodes);var e=this.create("node","mtd",this.nodes);this.row.push(e),this.Clear()},r.prototype.EndRow=function(){this.row.length>this.maxrow&&(this.maxrow=this.row.length);var e="mtr",n=this.factory.configuration.tags.getTag();n&&(this.row=[n].concat(this.row),e="mlabeledtr"),this.factory.configuration.tags.clearTag();var i=this.create("node",e,this.row);this.table.push(i),this.row=[]},r.prototype.EndTable=function(){t.prototype.EndTable.call(this),this.factory.configuration.tags.end(),this.extendArray("columnalign",this.maxrow),this.extendArray("columnwidth",this.maxrow),this.extendArray("columnspacing",this.maxrow-1)},r.prototype.extendArray=function(e,n){if(this.arraydef[e]){var i=this.arraydef[e].split(/ /),o=__spreadArray$6([],__read$a(i),!1);if(o.length>1){for(;o.length<n;)o.push.apply(o,__spreadArray$6([],__read$a(i),!1));this.arraydef[e]=o.slice(0,n).join(" ")}}},r}(ArrayItem);BaseItems.EqnArrayItem=EqnArrayItem;var EquationItem=function(t){__extends$g(r,t);function r(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=t.call(this,e)||this;return o.factory.configuration.tags.start("equation",!0,n[0]),o}return Object.defineProperty(r.prototype,"kind",{get:function(){return"equation"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){if(e.isKind("end")){var n=this.toMml(),i=this.factory.configuration.tags.getTag();return this.factory.configuration.tags.end(),[[i?this.factory.configuration.tags.enTag(n,i):n,e],!0]}if(e.isKind("stop"))throw new TexError_js_1$g.default("EnvMissingEnd","Missing \\end{%1}",this.getName());return t.prototype.checkItem.call(this,e)},r}(StackItem_js_1$4.BaseItem);BaseItems.EquationItem=EquationItem;var TexConstants={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TexConstant=void 0,function(r){r.Variant={NORMAL:"normal",BOLD:"bold",ITALIC:"italic",BOLDITALIC:"bold-italic",DOUBLESTRUCK:"double-struck",FRAKTUR:"fraktur",BOLDFRAKTUR:"bold-fraktur",SCRIPT:"script",BOLDSCRIPT:"bold-script",SANSSERIF:"sans-serif",BOLDSANSSERIF:"bold-sans-serif",SANSSERIFITALIC:"sans-serif-italic",SANSSERIFBOLDITALIC:"sans-serif-bold-italic",MONOSPACE:"monospace",INITIAL:"inital",TAILED:"tailed",LOOPED:"looped",STRETCHED:"stretched",CALLIGRAPHIC:"-tex-calligraphic",BOLDCALLIGRAPHIC:"-tex-bold-calligraphic",OLDSTYLE:"-tex-oldstyle",BOLDOLDSTYLE:"-tex-bold-oldstyle",MATHITALIC:"-tex-mathit"},r.Form={PREFIX:"prefix",INFIX:"infix",POSTFIX:"postfix"},r.LineBreak={AUTO:"auto",NEWLINE:"newline",NOBREAK:"nobreak",GOODBREAK:"goodbreak",BADBREAK:"badbreak"},r.LineBreakStyle={BEFORE:"before",AFTER:"after",DUPLICATE:"duplicate",INFIXLINBREAKSTYLE:"infixlinebreakstyle"},r.IndentAlign={LEFT:"left",CENTER:"center",RIGHT:"right",AUTO:"auto",ID:"id",INDENTALIGN:"indentalign"},r.IndentShift={INDENTSHIFT:"indentshift"},r.LineThickness={THIN:"thin",MEDIUM:"medium",THICK:"thick"},r.Notation={LONGDIV:"longdiv",ACTUARIAL:"actuarial",PHASORANGLE:"phasorangle",RADICAL:"radical",BOX:"box",ROUNDEDBOX:"roundedbox",CIRCLE:"circle",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",UPDIAGONALSTRIKE:"updiagonalstrike",DOWNDIAGONALSTRIKE:"downdiagonalstrike",VERTICALSTRIKE:"verticalstrike",HORIZONTALSTRIKE:"horizontalstrike",NORTHEASTARROW:"northeastarrow",MADRUWB:"madruwb",UPDIAGONALARROW:"updiagonalarrow"},r.Align={TOP:"top",BOTTOM:"bottom",CENTER:"center",BASELINE:"baseline",AXIS:"axis",LEFT:"left",RIGHT:"right"},r.Lines={NONE:"none",SOLID:"solid",DASHED:"dashed"},r.Side={LEFT:"left",RIGHT:"right",LEFTOVERLAP:"leftoverlap",RIGHTOVERLAP:"rightoverlap"},r.Width={AUTO:"auto",FIT:"fit"},r.Actiontype={TOGGLE:"toggle",STATUSLINE:"statusline",TOOLTIP:"tooltip",INPUT:"input"},r.Overflow={LINBREAK:"linebreak",SCROLL:"scroll",ELIDE:"elide",TRUNCATE:"truncate",SCALE:"scale"},r.Unit={EM:"em",EX:"ex",PX:"px",IN:"in",CM:"cm",MM:"mm",PT:"pt",PC:"pc"}}(t.TexConstant||(t.TexConstant={}))})(TexConstants);var BaseMethods$1={},__assign$5=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$5=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$5.apply(this,arguments)},__createBinding$8=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,r,e,n){n===void 0&&(n=e);var i=Object.getOwnPropertyDescriptor(r,e);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,i)}:function(t,r,e,n){n===void 0&&(n=e),t[n]=r[e]}),__setModuleDefault$8=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),__importStar$8=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var e in t)e!=="default"&&Object.prototype.hasOwnProperty.call(t,e)&&__createBinding$8(r,t,e);return __setModuleDefault$8(r,t),r},__read$9=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__importDefault$A=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(BaseMethods$1,"__esModule",{value:!0});var sitem=__importStar$8(BaseItems),NodeUtil_js_1$b=__importDefault$A(NodeUtil$1),TexError_js_1$f=__importDefault$A(TexError$1),TexParser_js_1$8=__importDefault$A(requireTexParser()),TexConstants_js_1$a=TexConstants,ParseUtil_js_1$c=__importDefault$A(requireParseUtil()),MmlNode_js_1$8=MmlNode,Tags_js_1$6=Tags,lengths_js_1$3=lengths,Entities_js_1=Entities,Options_js_1$2=Options$1,BaseMethods={},P_HEIGHT=1.2/.85,MmlTokenAllow={fontfamily:1,fontsize:1,fontweight:1,fontstyle:1,color:1,background:1,id:1,class:1,href:1,style:1};BaseMethods.Open=function(t,r){t.Push(t.itemFactory.create("open"))};BaseMethods.Close=function(t,r){t.Push(t.itemFactory.create("close"))};BaseMethods.Tilde=function(t,r){t.Push(t.create("token","mtext",{},Entities_js_1.entities.nbsp))};BaseMethods.Space=function(t,r){};BaseMethods.Superscript=function(t,r){var e;t.GetNext().match(/\d/)&&(t.string=t.string.substr(0,t.i+1)+" "+t.string.substr(t.i+1));var n,i,o=t.stack.Top();o.isKind("prime")?(e=__read$9(o.Peek(2),2),i=e[0],n=e[1],t.stack.Pop()):(i=t.stack.Prev(),i||(i=t.create("token","mi",{},"")));var a=NodeUtil_js_1$b.default.getProperty(i,"movesupsub"),s=NodeUtil_js_1$b.default.isType(i,"msubsup")?i.sup:i.over;if(NodeUtil_js_1$b.default.isType(i,"msubsup")&&!NodeUtil_js_1$b.default.isType(i,"msup")&&NodeUtil_js_1$b.default.getChildAt(i,i.sup)||NodeUtil_js_1$b.default.isType(i,"munderover")&&!NodeUtil_js_1$b.default.isType(i,"mover")&&NodeUtil_js_1$b.default.getChildAt(i,i.over)&&!NodeUtil_js_1$b.default.getProperty(i,"subsupOK"))throw new TexError_js_1$f.default("DoubleExponent","Double exponent: use braces to clarify");(!NodeUtil_js_1$b.default.isType(i,"msubsup")||NodeUtil_js_1$b.default.isType(i,"msup"))&&(a?((!NodeUtil_js_1$b.default.isType(i,"munderover")||NodeUtil_js_1$b.default.isType(i,"mover")||NodeUtil_js_1$b.default.getChildAt(i,i.over))&&(i=t.create("node","munderover",[i],{movesupsub:!0})),s=i.over):(i=t.create("node","msubsup",[i]),s=i.sup)),t.Push(t.itemFactory.create("subsup",i).setProperties({position:s,primes:n,movesupsub:a}))};BaseMethods.Subscript=function(t,r){var e;t.GetNext().match(/\d/)&&(t.string=t.string.substr(0,t.i+1)+" "+t.string.substr(t.i+1));var n,i,o=t.stack.Top();o.isKind("prime")?(e=__read$9(o.Peek(2),2),i=e[0],n=e[1],t.stack.Pop()):(i=t.stack.Prev(),i||(i=t.create("token","mi",{},"")));var a=NodeUtil_js_1$b.default.getProperty(i,"movesupsub"),s=NodeUtil_js_1$b.default.isType(i,"msubsup")?i.sub:i.under;if(NodeUtil_js_1$b.default.isType(i,"msubsup")&&!NodeUtil_js_1$b.default.isType(i,"msup")&&NodeUtil_js_1$b.default.getChildAt(i,i.sub)||NodeUtil_js_1$b.default.isType(i,"munderover")&&!NodeUtil_js_1$b.default.isType(i,"mover")&&NodeUtil_js_1$b.default.getChildAt(i,i.under)&&!NodeUtil_js_1$b.default.getProperty(i,"subsupOK"))throw new TexError_js_1$f.default("DoubleSubscripts","Double subscripts: use braces to clarify");(!NodeUtil_js_1$b.default.isType(i,"msubsup")||NodeUtil_js_1$b.default.isType(i,"msup"))&&(a?((!NodeUtil_js_1$b.default.isType(i,"munderover")||NodeUtil_js_1$b.default.isType(i,"mover")||NodeUtil_js_1$b.default.getChildAt(i,i.under))&&(i=t.create("node","munderover",[i],{movesupsub:!0})),s=i.under):(i=t.create("node","msubsup",[i]),s=i.sub)),t.Push(t.itemFactory.create("subsup",i).setProperties({position:s,primes:n,movesupsub:a}))};BaseMethods.Prime=function(t,r){var e=t.stack.Prev();if(e||(e=t.create("node","mi")),NodeUtil_js_1$b.default.isType(e,"msubsup")&&!NodeUtil_js_1$b.default.isType(e,"msup")&&NodeUtil_js_1$b.default.getChildAt(e,e.sup))throw new TexError_js_1$f.default("DoubleExponentPrime","Prime causes double exponent: use braces to clarify");var n="";t.i--;do n+=Entities_js_1.entities.prime,t.i++,r=t.GetNext();while(r==="'"||r===Entities_js_1.entities.rsquo);n=["","′","″","‴","⁗"][n.length]||n;var i=t.create("token","mo",{variantForm:!0},n);t.Push(t.itemFactory.create("prime",e,i))};BaseMethods.Comment=function(t,r){for(;t.i<t.string.length&&t.string.charAt(t.i)!==`
`;)t.i++};BaseMethods.Hash=function(t,r){throw new TexError_js_1$f.default("CantUseHash1","You can't use 'macro parameter character #' in math mode")};BaseMethods.MathFont=function(t,r,e){var n=t.GetArgument(r),i=new TexParser_js_1$8.default(n,__assign$5(__assign$5({},t.stack.env),{font:e,multiLetterIdentifiers:/^[a-zA-Z]+/,noAutoOP:!0}),t.configuration).mml();t.Push(t.create("node","TeXAtom",[i]))};BaseMethods.SetFont=function(t,r,e){t.stack.env.font=e};BaseMethods.SetStyle=function(t,r,e,n,i){t.stack.env.style=e,t.stack.env.level=i,t.Push(t.itemFactory.create("style").setProperty("styles",{displaystyle:n,scriptlevel:i}))};BaseMethods.SetSize=function(t,r,e){t.stack.env.size=e,t.Push(t.itemFactory.create("style").setProperty("styles",{mathsize:(0,lengths_js_1$3.em)(e)}))};BaseMethods.Spacer=function(t,r,e){var n=t.create("node","mspace",[],{width:(0,lengths_js_1$3.em)(e)}),i=t.create("node","mstyle",[n],{scriptlevel:0});t.Push(i)};BaseMethods.LeftRight=function(t,r){var e=r.substr(1);t.Push(t.itemFactory.create(e,t.GetDelimiter(r),t.stack.env.color))};BaseMethods.NamedFn=function(t,r,e){e||(e=r.substr(1));var n=t.create("token","mi",{texClass:MmlNode_js_1$8.TEXCLASS.OP},e);t.Push(t.itemFactory.create("fn",n))};BaseMethods.NamedOp=function(t,r,e){e||(e=r.substr(1)),e=e.replace(/&thinsp;/," ");var n=t.create("token","mo",{movablelimits:!0,movesupsub:!0,form:TexConstants_js_1$a.TexConstant.Form.PREFIX,texClass:MmlNode_js_1$8.TEXCLASS.OP},e);t.Push(n)};BaseMethods.Limits=function(t,r,e){var n=t.stack.Prev(!0);if(!n||NodeUtil_js_1$b.default.getTexClass(NodeUtil_js_1$b.default.getCoreMO(n))!==MmlNode_js_1$8.TEXCLASS.OP&&NodeUtil_js_1$b.default.getProperty(n,"movesupsub")==null)throw new TexError_js_1$f.default("MisplacedLimits","%1 is allowed only on operators",t.currentCS);var i=t.stack.Top(),o;NodeUtil_js_1$b.default.isType(n,"munderover")&&!e?(o=t.create("node","msubsup"),NodeUtil_js_1$b.default.copyChildren(n,o),n=i.Last=o):NodeUtil_js_1$b.default.isType(n,"msubsup")&&e&&(o=t.create("node","munderover"),NodeUtil_js_1$b.default.copyChildren(n,o),n=i.Last=o),NodeUtil_js_1$b.default.setProperty(n,"movesupsub",!!e),NodeUtil_js_1$b.default.setProperties(NodeUtil_js_1$b.default.getCoreMO(n),{movablelimits:!1}),(NodeUtil_js_1$b.default.getAttribute(n,"movablelimits")||NodeUtil_js_1$b.default.getProperty(n,"movablelimits"))&&NodeUtil_js_1$b.default.setProperties(n,{movablelimits:!1})};BaseMethods.Over=function(t,r,e,n){var i=t.itemFactory.create("over").setProperty("name",t.currentCS);e||n?(i.setProperty("open",e),i.setProperty("close",n)):r.match(/withdelims$/)&&(i.setProperty("open",t.GetDelimiter(r)),i.setProperty("close",t.GetDelimiter(r))),r.match(/^\\above/)?i.setProperty("thickness",t.GetDimen(r)):(r.match(/^\\atop/)||e||n)&&i.setProperty("thickness",0),t.Push(i)};BaseMethods.Frac=function(t,r){var e=t.ParseArg(r),n=t.ParseArg(r),i=t.create("node","mfrac",[e,n]);t.Push(i)};BaseMethods.Sqrt=function(t,r){var e=t.GetBrackets(r),n=t.GetArgument(r);n==="\\frac"&&(n+="{"+t.GetArgument(n)+"}{"+t.GetArgument(n)+"}");var i=new TexParser_js_1$8.default(n,t.stack.env,t.configuration).mml();e?i=t.create("node","mroot",[i,parseRoot(t,e)]):i=t.create("node","msqrt",[i]),t.Push(i)};function parseRoot(t,r){var e=t.stack.env,n=e.inRoot;e.inRoot=!0;var i=new TexParser_js_1$8.default(r,e,t.configuration),o=i.mml(),a=i.stack.global;if(a.leftRoot||a.upRoot){var s={};a.leftRoot&&(s.width=a.leftRoot),a.upRoot&&(s.voffset=a.upRoot,s.height=a.upRoot),o=t.create("node","mpadded",[o],s)}return e.inRoot=n,o}BaseMethods.Root=function(t,r){var e=t.GetUpTo(r,"\\of"),n=t.ParseArg(r),i=t.create("node","mroot",[n,parseRoot(t,e)]);t.Push(i)};BaseMethods.MoveRoot=function(t,r,e){if(!t.stack.env.inRoot)throw new TexError_js_1$f.default("MisplacedMoveRoot","%1 can appear only within a root",t.currentCS);if(t.stack.global[e])throw new TexError_js_1$f.default("MultipleMoveRoot","Multiple use of %1",t.currentCS);var n=t.GetArgument(r);if(!n.match(/-?[0-9]+/))throw new TexError_js_1$f.default("IntegerArg","The argument to %1 must be an integer",t.currentCS);n=parseInt(n,10)/15+"em",n.substr(0,1)!=="-"&&(n="+"+n),t.stack.global[e]=n};BaseMethods.Accent=function(t,r,e,n){var i=t.ParseArg(r),o=__assign$5(__assign$5({},ParseUtil_js_1$c.default.getFontDef(t)),{accent:!0,mathaccent:!0}),a=NodeUtil_js_1$b.default.createEntity(e),s=t.create("token","mo",o,a),l=s;NodeUtil_js_1$b.default.setAttribute(l,"stretchy",!!n);var c=NodeUtil_js_1$b.default.isEmbellished(i)?NodeUtil_js_1$b.default.getCoreMO(i):i;(NodeUtil_js_1$b.default.isType(c,"mo")||NodeUtil_js_1$b.default.getProperty(c,"movablelimits"))&&NodeUtil_js_1$b.default.setProperties(c,{movablelimits:!1});var f=t.create("node","munderover");NodeUtil_js_1$b.default.setChild(f,0,i),NodeUtil_js_1$b.default.setChild(f,1,null),NodeUtil_js_1$b.default.setChild(f,2,l);var d=t.create("node","TeXAtom",[f]);t.Push(d)};BaseMethods.UnderOver=function(t,r,e,n){var i=NodeUtil_js_1$b.default.createEntity(e),o=t.create("token","mo",{stretchy:!0,accent:!0},i),a=r.charAt(1)==="o"?"over":"under",s=t.ParseArg(r);t.Push(ParseUtil_js_1$c.default.underOver(t,s,o,a,n))};BaseMethods.Overset=function(t,r){var e=t.ParseArg(r),n=t.ParseArg(r);ParseUtil_js_1$c.default.checkMovableLimits(n),e.isKind("mo")&&NodeUtil_js_1$b.default.setAttribute(e,"accent",!1);var i=t.create("node","mover",[n,e]);t.Push(i)};BaseMethods.Underset=function(t,r){var e=t.ParseArg(r),n=t.ParseArg(r);ParseUtil_js_1$c.default.checkMovableLimits(n),e.isKind("mo")&&NodeUtil_js_1$b.default.setAttribute(e,"accent",!1);var i=t.create("node","munder",[n,e],{accentunder:!1});t.Push(i)};BaseMethods.Overunderset=function(t,r){var e=t.ParseArg(r),n=t.ParseArg(r),i=t.ParseArg(r);ParseUtil_js_1$c.default.checkMovableLimits(i),e.isKind("mo")&&NodeUtil_js_1$b.default.setAttribute(e,"accent",!1),n.isKind("mo")&&NodeUtil_js_1$b.default.setAttribute(n,"accent",!1);var o=t.create("node","munderover",[i,n,e],{accent:!1,accentunder:!1});t.Push(o)};BaseMethods.TeXAtom=function(t,r,e){var n={texClass:e},i,o,a;if(e===MmlNode_js_1$8.TEXCLASS.OP){n.movesupsub=n.movablelimits=!0;var s=t.GetArgument(r),l=s.match(/^\s*\\rm\s+([a-zA-Z0-9 ]+)$/);l?(n.mathvariant=TexConstants_js_1$a.TexConstant.Variant.NORMAL,o=t.create("token","mi",n,l[1])):(a=new TexParser_js_1$8.default(s,t.stack.env,t.configuration).mml(),o=t.create("node","TeXAtom",[a],n)),i=t.itemFactory.create("fn",o)}else a=t.ParseArg(r),i=t.create("node","TeXAtom",[a],n);t.Push(i)};BaseMethods.MmlToken=function(t,r){var e=t.GetArgument(r),n=t.GetBrackets(r,"").replace(/^\s+/,""),i=t.GetArgument(r),o={},a=[],s;try{s=t.create("node",e)}catch{s=null}if(!s||!s.isToken)throw new TexError_js_1$f.default("NotMathMLToken","%1 is not a token element",e);for(;n!=="";){var l=n.match(/^([a-z]+)\s*=\s*('[^']*'|"[^"]*"|[^ ,]*)\s*,?\s*/i);if(!l)throw new TexError_js_1$f.default("InvalidMathMLAttr","Invalid MathML attribute: %1",n);if(!s.attributes.hasDefault(l[1])&&!MmlTokenAllow[l[1]])throw new TexError_js_1$f.default("UnknownAttrForElement","%1 is not a recognized attribute for %2",l[1],e);var c=ParseUtil_js_1$c.default.MmlFilterAttribute(t,l[1],l[2].replace(/^(['"])(.*)\1$/,"$2"));c&&(c.toLowerCase()==="true"?c=!0:c.toLowerCase()==="false"&&(c=!1),o[l[1]]=c,a.push(l[1])),n=n.substr(l[0].length)}a.length&&(o["mjx-keep-attrs"]=a.join(" "));var f=t.create("text",i);s.appendChild(f),NodeUtil_js_1$b.default.setProperties(s,o),t.Push(s)};BaseMethods.Strut=function(t,r){var e=t.create("node","mrow"),n=t.create("node","mpadded",[e],{height:"8.6pt",depth:"3pt",width:0});t.Push(n)};BaseMethods.Phantom=function(t,r,e,n){var i=t.create("node","mphantom",[t.ParseArg(r)]);(e||n)&&(i=t.create("node","mpadded",[i]),n&&(NodeUtil_js_1$b.default.setAttribute(i,"height",0),NodeUtil_js_1$b.default.setAttribute(i,"depth",0)),e&&NodeUtil_js_1$b.default.setAttribute(i,"width",0));var o=t.create("node","TeXAtom",[i]);t.Push(o)};BaseMethods.Smash=function(t,r){var e=ParseUtil_js_1$c.default.trimSpaces(t.GetBrackets(r,"")),n=t.create("node","mpadded",[t.ParseArg(r)]);switch(e){case"b":NodeUtil_js_1$b.default.setAttribute(n,"depth",0);break;case"t":NodeUtil_js_1$b.default.setAttribute(n,"height",0);break;default:NodeUtil_js_1$b.default.setAttribute(n,"height",0),NodeUtil_js_1$b.default.setAttribute(n,"depth",0)}var i=t.create("node","TeXAtom",[n]);t.Push(i)};BaseMethods.Lap=function(t,r){var e=t.create("node","mpadded",[t.ParseArg(r)],{width:0});r==="\\llap"&&NodeUtil_js_1$b.default.setAttribute(e,"lspace","-1width");var n=t.create("node","TeXAtom",[e]);t.Push(n)};BaseMethods.RaiseLower=function(t,r){var e=t.GetDimen(r),n=t.itemFactory.create("position").setProperties({name:t.currentCS,move:"vertical"});e.charAt(0)==="-"&&(e=e.slice(1),r=r.substr(1)==="raise"?"\\lower":"\\raise"),r==="\\lower"?(n.setProperty("dh","-"+e),n.setProperty("dd","+"+e)):(n.setProperty("dh","+"+e),n.setProperty("dd","-"+e)),t.Push(n)};BaseMethods.MoveLeftRight=function(t,r){var e=t.GetDimen(r),n=e.charAt(0)==="-"?e.slice(1):"-"+e;if(r==="\\moveleft"){var i=e;e=n,n=i}t.Push(t.itemFactory.create("position").setProperties({name:t.currentCS,move:"horizontal",left:t.create("node","mspace",[],{width:e}),right:t.create("node","mspace",[],{width:n})}))};BaseMethods.Hskip=function(t,r){var e=t.create("node","mspace",[],{width:t.GetDimen(r)});t.Push(e)};BaseMethods.Nonscript=function(t,r){t.Push(t.itemFactory.create("nonscript"))};BaseMethods.Rule=function(t,r,e){var n=t.GetDimen(r),i=t.GetDimen(r),o=t.GetDimen(r),a={width:n,height:i,depth:o};e!=="blank"&&(a.mathbackground=t.stack.env.color||"black");var s=t.create("node","mspace",[],a);t.Push(s)};BaseMethods.rule=function(t,r){var e=t.GetBrackets(r),n=t.GetDimen(r),i=t.GetDimen(r),o=t.create("node","mspace",[],{width:n,height:i,mathbackground:t.stack.env.color||"black"});e&&(o=t.create("node","mpadded",[o],{voffset:e}),e.match(/^\-/)?(NodeUtil_js_1$b.default.setAttribute(o,"height",e),NodeUtil_js_1$b.default.setAttribute(o,"depth","+"+e.substr(1))):NodeUtil_js_1$b.default.setAttribute(o,"height","+"+e)),t.Push(o)};BaseMethods.MakeBig=function(t,r,e,n){n*=P_HEIGHT;var i=String(n).replace(/(\.\d\d\d).+/,"$1")+"em",o=t.GetDelimiter(r,!0),a=t.create("token","mo",{minsize:i,maxsize:i,fence:!0,stretchy:!0,symmetric:!0},o),s=t.create("node","TeXAtom",[a],{texClass:e});t.Push(s)};BaseMethods.BuildRel=function(t,r){var e=t.ParseUpTo(r,"\\over"),n=t.ParseArg(r),i=t.create("node","munderover");NodeUtil_js_1$b.default.setChild(i,0,n),NodeUtil_js_1$b.default.setChild(i,1,null),NodeUtil_js_1$b.default.setChild(i,2,e);var o=t.create("node","TeXAtom",[i],{texClass:MmlNode_js_1$8.TEXCLASS.REL});t.Push(o)};BaseMethods.HBox=function(t,r,e,n){t.PushAll(ParseUtil_js_1$c.default.internalMath(t,t.GetArgument(r),e,n))};BaseMethods.FBox=function(t,r){var e=ParseUtil_js_1$c.default.internalMath(t,t.GetArgument(r)),n=t.create("node","menclose",e,{notation:"box"});t.Push(n)};BaseMethods.FrameBox=function(t,r){var e=t.GetBrackets(r),n=t.GetBrackets(r)||"c",i=ParseUtil_js_1$c.default.internalMath(t,t.GetArgument(r));e&&(i=[t.create("node","mpadded",i,{width:e,"data-align":(0,Options_js_1$2.lookup)(n,{l:"left",r:"right"},"center")})]);var o=t.create("node","TeXAtom",[t.create("node","menclose",i,{notation:"box"})],{texClass:MmlNode_js_1$8.TEXCLASS.ORD});t.Push(o)};BaseMethods.Not=function(t,r){t.Push(t.itemFactory.create("not"))};BaseMethods.Dots=function(t,r){var e=NodeUtil_js_1$b.default.createEntity("2026"),n=NodeUtil_js_1$b.default.createEntity("22EF"),i=t.create("token","mo",{stretchy:!1},e),o=t.create("token","mo",{stretchy:!1},n);t.Push(t.itemFactory.create("dots").setProperties({ldots:i,cdots:o}))};BaseMethods.Matrix=function(t,r,e,n,i,o,a,s,l,c){var f=t.GetNext();if(f==="")throw new TexError_js_1$f.default("MissingArgFor","Missing argument for %1",t.currentCS);f==="{"?t.i++:(t.string=f+"}"+t.string.slice(t.i+1),t.i=0);var d=t.itemFactory.create("array").setProperty("requireClose",!0);d.arraydef={rowspacing:a||"4pt",columnspacing:o||"1em"},l&&d.setProperty("isCases",!0),c&&(d.setProperty("isNumbered",!0),d.arraydef.side=c),(e||n)&&(d.setProperty("open",e),d.setProperty("close",n)),s==="D"&&(d.arraydef.displaystyle=!0),i!=null&&(d.arraydef.columnalign=i),t.Push(d)};BaseMethods.Entry=function(t,r){t.Push(t.itemFactory.create("cell").setProperties({isEntry:!0,name:r}));var e=t.stack.Top(),n=e.getProperty("casesEnv"),i=e.getProperty("isCases");if(!(!i&&!n)){for(var o=t.string,a=0,s=-1,l=t.i,c=o.length,f=n?new RegExp("^\\\\end\\s*\\{".concat(n.replace(/\*/,"\\*"),"\\}")):null;l<c;){var d=o.charAt(l);if(d==="{")a++,l++;else if(d==="}")a===0?c=0:(a--,a===0&&s<0&&(s=l-t.i),l++);else{if(d==="&"&&a===0)throw new TexError_js_1$f.default("ExtraAlignTab","Extra alignment tab in \\cases text");if(d==="\\"){var u=o.substr(l);u.match(/^((\\cr)[^a-zA-Z]|\\\\)/)||f&&u.match(f)?c=0:l+=2}else l++}}var m=o.substr(t.i,l-t.i);if(!m.match(/^\s*\\text[^a-zA-Z]/)||s!==m.replace(/\s+$/,"").length-1){var p=ParseUtil_js_1$c.default.internalMath(t,ParseUtil_js_1$c.default.trimSpaces(m),0);t.PushAll(p),t.i=l}}};BaseMethods.Cr=function(t,r){t.Push(t.itemFactory.create("cell").setProperties({isCR:!0,name:r}))};BaseMethods.CrLaTeX=function(t,r,e){e===void 0&&(e=!1);var n;if(!e&&(t.string.charAt(t.i)==="*"&&t.i++,t.string.charAt(t.i)==="[")){var i=t.GetBrackets(r,""),o=__read$9(ParseUtil_js_1$c.default.matchDimen(i),2),a=o[0],s=o[1];if(i&&!a)throw new TexError_js_1$f.default("BracketMustBeDimension","Bracket argument to %1 must be a dimension",t.currentCS);n=a+s}t.Push(t.itemFactory.create("cell").setProperties({isCR:!0,name:r,linebreak:!0}));var l=t.stack.Top(),c;l instanceof sitem.ArrayItem?n&&l.addRowSpacing(n):(n&&(c=t.create("node","mspace",[],{depth:n}),t.Push(c)),c=t.create("node","mspace",[],{linebreak:TexConstants_js_1$a.TexConstant.LineBreak.NEWLINE}),t.Push(c))};BaseMethods.HLine=function(t,r,e){e==null&&(e="solid");var n=t.stack.Top();if(!(n instanceof sitem.ArrayItem)||n.Size())throw new TexError_js_1$f.default("Misplaced","Misplaced %1",t.currentCS);if(!n.table.length)n.frame.push("top");else{for(var i=n.arraydef.rowlines?n.arraydef.rowlines.split(/ /):[];i.length<n.table.length;)i.push("none");i[n.table.length-1]=e,n.arraydef.rowlines=i.join(" ")}};BaseMethods.HFill=function(t,r){var e=t.stack.Top();if(e instanceof sitem.ArrayItem)e.hfill.push(e.Size());else throw new TexError_js_1$f.default("UnsupportedHFill","Unsupported use of %1",t.currentCS)};BaseMethods.BeginEnd=function(t,r){var e=t.GetArgument(r);if(e.match(/\\/i))throw new TexError_js_1$f.default("InvalidEnv","Invalid environment name '%1'",e);var n=t.configuration.handlers.get("environment").lookup(e);if(n&&r==="\\end"){if(!n.args[0]){var i=t.itemFactory.create("end").setProperty("name",e);t.Push(i);return}t.stack.env.closing=e}ParseUtil_js_1$c.default.checkMaxMacros(t,!1),t.parse("environment",[t,e])};BaseMethods.Array=function(t,r,e,n,i,o,a,s,l){i||(i=t.GetArgument("\\begin{"+r.getName()+"}"));var c=("c"+i).replace(/[^clr|:]/g,"").replace(/[^|:]([|:])+/g,"$1");i=i.replace(/[^clr]/g,"").split("").join(" "),i=i.replace(/l/g,"left").replace(/r/g,"right").replace(/c/g,"center");var f=t.itemFactory.create("array");return f.arraydef={columnalign:i,columnspacing:o||"1em",rowspacing:a||"4pt"},c.match(/[|:]/)&&(c.charAt(0).match(/[|:]/)&&(f.frame.push("left"),f.dashed=c.charAt(0)===":"),c.charAt(c.length-1).match(/[|:]/)&&f.frame.push("right"),c=c.substr(1,c.length-2),f.arraydef.columnlines=c.split("").join(" ").replace(/[^|: ]/g,"none").replace(/\|/g,"solid").replace(/:/g,"dashed")),e&&f.setProperty("open",t.convertDelimiter(e)),n&&f.setProperty("close",t.convertDelimiter(n)),(s||"").charAt(1)==="'"&&(f.arraydef["data-cramped"]=!0,s=s.charAt(0)),s==="D"?f.arraydef.displaystyle=!0:s&&(f.arraydef.displaystyle=!1),s==="S"&&(f.arraydef.scriptlevel=1),l&&(f.arraydef.useHeight=!1),t.Push(r),f};BaseMethods.AlignedArray=function(t,r){var e=t.GetBrackets("\\begin{"+r.getName()+"}"),n=BaseMethods.Array(t,r);return ParseUtil_js_1$c.default.setArrayAlign(n,e)};BaseMethods.Equation=function(t,r,e){return t.Push(r),ParseUtil_js_1$c.default.checkEqnEnv(t),t.itemFactory.create("equation",e).setProperty("name",r.getName())};BaseMethods.EqnArray=function(t,r,e,n,i,o){t.Push(r),n&&ParseUtil_js_1$c.default.checkEqnEnv(t),i=i.replace(/[^clr]/g,"").split("").join(" "),i=i.replace(/l/g,"left").replace(/r/g,"right").replace(/c/g,"center");var a=t.itemFactory.create("eqnarray",r.getName(),e,n,t.stack.global);return a.arraydef={displaystyle:!0,columnalign:i,columnspacing:o||"1em",rowspacing:"3pt",side:t.options.tagSide,minlabelspacing:t.options.tagIndent},a};BaseMethods.HandleNoTag=function(t,r){t.tags.notag()};BaseMethods.HandleLabel=function(t,r){var e=t.GetArgument(r);if(e!==""&&!t.tags.refUpdate){if(t.tags.label)throw new TexError_js_1$f.default("MultipleCommand","Multiple %1",t.currentCS);if(t.tags.label=e,(t.tags.allLabels[e]||t.tags.labels[e])&&!t.options.ignoreDuplicateLabels)throw new TexError_js_1$f.default("MultipleLabel","Label '%1' multiply defined",e);t.tags.labels[e]=new Tags_js_1$6.Label}};BaseMethods.HandleRef=function(t,r,e){var n=t.GetArgument(r),i=t.tags.allLabels[n]||t.tags.labels[n];i||(t.tags.refUpdate||(t.tags.redo=!0),i=new Tags_js_1$6.Label);var o=i.tag;e&&(o=t.tags.formatTag(o));var a=t.create("node","mrow",ParseUtil_js_1$c.default.internalMath(t,o),{href:t.tags.formatUrl(i.id,t.options.baseURL),class:"MathJax_ref"});t.Push(a)};BaseMethods.Macro=function(t,r,e,n,i){if(n){var o=[];if(i!=null){var a=t.GetBrackets(r);o.push(a??i)}for(var s=o.length;s<n;s++)o.push(t.GetArgument(r));e=ParseUtil_js_1$c.default.substituteArgs(t,o,e)}t.string=ParseUtil_js_1$c.default.addArgs(t,e,t.string.slice(t.i)),t.i=0,ParseUtil_js_1$c.default.checkMaxMacros(t)};BaseMethods.MathChoice=function(t,r){var e=t.ParseArg(r),n=t.ParseArg(r),i=t.ParseArg(r),o=t.ParseArg(r);t.Push(t.create("node","MathChoice",[e,n,i,o]))};BaseMethods$1.default=BaseMethods;var ParseMethods$1={},__read$8=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$5=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__importDefault$z=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ParseMethods$1,"__esModule",{value:!0});var NodeUtil_js_1$a=__importDefault$z(NodeUtil$1),TexConstants_js_1$9=TexConstants,ParseUtil_js_1$b=__importDefault$z(requireParseUtil()),ParseMethods;(function(t){function r(c,f){var d=ParseUtil_js_1$b.default.getFontDef(c),u=c.stack.env;u.multiLetterIdentifiers&&u.font!==""&&(f=c.string.substr(c.i-1).match(u.multiLetterIdentifiers)[0],c.i+=f.length-1,d.mathvariant===TexConstants_js_1$9.TexConstant.Variant.NORMAL&&u.noAutoOP&&f.length>1&&(d.autoOP=!1));var m=c.create("token","mi",d,f);c.Push(m)}t.variable=r;function e(c,f){var d,u=c.configuration.options.digits,m=c.string.slice(c.i-1).match(u),p=ParseUtil_js_1$b.default.getFontDef(c);m?(d=c.create("token","mn",p,m[0].replace(/[{}]/g,"")),c.i+=m[0].length-1):d=c.create("token","mo",p,f),c.Push(d)}t.digit=e;function n(c,f){var d=c.GetCS();c.parse("macro",[c,d])}t.controlSequence=n;function i(c,f){var d=f.attributes||{mathvariant:TexConstants_js_1$9.TexConstant.Variant.ITALIC},u=c.create("token","mi",d,f.char);c.Push(u)}t.mathchar0mi=i;function o(c,f){var d=f.attributes||{};d.stretchy=!1;var u=c.create("token","mo",d,f.char);NodeUtil_js_1$a.default.setProperty(u,"fixStretchy",!0),c.configuration.addNode("fixStretchy",u),c.Push(u)}t.mathchar0mo=o;function a(c,f){var d=f.attributes||{mathvariant:TexConstants_js_1$9.TexConstant.Variant.NORMAL};c.stack.env.font&&(d.mathvariant=c.stack.env.font);var u=c.create("token","mi",d,f.char);c.Push(u)}t.mathchar7=a;function s(c,f){var d=f.attributes||{};d=Object.assign({fence:!1,stretchy:!1},d);var u=c.create("token","mo",d,f.char);c.Push(u)}t.delimiter=s;function l(c,f,d,u){var m=u[0],p=c.itemFactory.create("begin").setProperties({name:f,end:m});p=d.apply(void 0,__spreadArray$5([c,p],__read$8(u.slice(1)),!1)),c.Push(p)}t.environment=l})(ParseMethods||(ParseMethods={}));ParseMethods$1.default=ParseMethods;var __createBinding$7=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,r,e,n){n===void 0&&(n=e);var i=Object.getOwnPropertyDescriptor(r,e);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,i)}:function(t,r,e,n){n===void 0&&(n=e),t[n]=r[e]}),__setModuleDefault$7=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),__importStar$7=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var e in t)e!=="default"&&Object.prototype.hasOwnProperty.call(t,e)&&__createBinding$7(r,t,e);return __setModuleDefault$7(r,t),r},__importDefault$y=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},sm$4=__importStar$7(SymbolMap),TexConstants_js_1$8=TexConstants,BaseMethods_js_1$6=__importDefault$y(BaseMethods$1),ParseMethods_js_1$6=__importDefault$y(ParseMethods$1),ParseUtil_js_1$a=__importDefault$y(requireParseUtil()),MmlNode_js_1$7=MmlNode,lengths_js_1$2=lengths;new sm$4.RegExpMap("letter",ParseMethods_js_1$6.default.variable,/[a-z]/i);new sm$4.RegExpMap("digit",ParseMethods_js_1$6.default.digit,/[0-9.,]/);new sm$4.RegExpMap("command",ParseMethods_js_1$6.default.controlSequence,/^\\/);new sm$4.MacroMap("special",{"{":"Open","}":"Close","~":"Tilde","^":"Superscript",_:"Subscript"," ":"Space","	":"Space","\r":"Space","\n":"Space","'":"Prime","%":"Comment","&":"Entry","#":"Hash"," ":"Space","’":"Prime"},BaseMethods_js_1$6.default);new sm$4.CharacterMap("mathchar0mi",ParseMethods_js_1$6.default.mathchar0mi,{alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ϵ",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigma:"σ",tau:"τ",upsilon:"υ",phi:"ϕ",chi:"χ",psi:"ψ",omega:"ω",varepsilon:"ε",vartheta:"ϑ",varpi:"ϖ",varrho:"ϱ",varsigma:"ς",varphi:"φ",S:["§",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],aleph:["ℵ",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],hbar:["ℏ",{variantForm:!0}],imath:"ı",jmath:"ȷ",ell:"ℓ",wp:["℘",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],Re:["ℜ",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],Im:["ℑ",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],partial:["∂",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.ITALIC}],infty:["∞",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],prime:["′",{variantForm:!0}],emptyset:["∅",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],nabla:["∇",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],top:["⊤",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],bot:["⊥",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],angle:["∠",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],triangle:["△",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],backslash:["∖",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],forall:["∀",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],exists:["∃",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],neg:["¬",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],lnot:["¬",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],flat:["♭",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],natural:["♮",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],sharp:["♯",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],clubsuit:["♣",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],diamondsuit:["♢",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],heartsuit:["♡",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}],spadesuit:["♠",{mathvariant:TexConstants_js_1$8.TexConstant.Variant.NORMAL}]});new sm$4.CharacterMap("mathchar0mo",ParseMethods_js_1$6.default.mathchar0mo,{surd:"√",coprod:["∐",{texClass:MmlNode_js_1$7.TEXCLASS.OP,movesupsub:!0}],bigvee:["⋁",{texClass:MmlNode_js_1$7.TEXCLASS.OP,movesupsub:!0}],bigwedge:["⋀",{texClass:MmlNode_js_1$7.TEXCLASS.OP,movesupsub:!0}],biguplus:["⨄",{texClass:MmlNode_js_1$7.TEXCLASS.OP,movesupsub:!0}],bigcap:["⋂",{texClass:MmlNode_js_1$7.TEXCLASS.OP,movesupsub:!0}],bigcup:["⋃",{texClass:MmlNode_js_1$7.TEXCLASS.OP,movesupsub:!0}],int:["∫",{texClass:MmlNode_js_1$7.TEXCLASS.OP}],intop:["∫",{texClass:MmlNode_js_1$7.TEXCLASS.OP,movesupsub:!0,movablelimits:!0}],iint:["∬",{texClass:MmlNode_js_1$7.TEXCLASS.OP}],iiint:["∭",{texClass:MmlNode_js_1$7.TEXCLASS.OP}],prod:["∏",{texClass:MmlNode_js_1$7.TEXCLASS.OP,movesupsub:!0}],sum:["∑",{texClass:MmlNode_js_1$7.TEXCLASS.OP,movesupsub:!0}],bigotimes:["⨂",{texClass:MmlNode_js_1$7.TEXCLASS.OP,movesupsub:!0}],bigoplus:["⨁",{texClass:MmlNode_js_1$7.TEXCLASS.OP,movesupsub:!0}],bigodot:["⨀",{texClass:MmlNode_js_1$7.TEXCLASS.OP,movesupsub:!0}],oint:["∮",{texClass:MmlNode_js_1$7.TEXCLASS.OP}],bigsqcup:["⨆",{texClass:MmlNode_js_1$7.TEXCLASS.OP,movesupsub:!0}],smallint:["∫",{largeop:!1}],triangleleft:"◃",triangleright:"▹",bigtriangleup:"△",bigtriangledown:"▽",wedge:"∧",land:"∧",vee:"∨",lor:"∨",cap:"∩",cup:"∪",ddagger:"‡",dagger:"†",sqcap:"⊓",sqcup:"⊔",uplus:"⊎",amalg:"⨿",diamond:"⋄",bullet:"∙",wr:"≀",div:"÷",divsymbol:"÷",odot:["⊙",{largeop:!1}],oslash:["⊘",{largeop:!1}],otimes:["⊗",{largeop:!1}],ominus:["⊖",{largeop:!1}],oplus:["⊕",{largeop:!1}],mp:"∓",pm:"±",circ:"∘",bigcirc:"◯",setminus:"∖",cdot:"⋅",ast:"∗",times:"×",star:"⋆",propto:"∝",sqsubseteq:"⊑",sqsupseteq:"⊒",parallel:"∥",mid:"∣",dashv:"⊣",vdash:"⊢",leq:"≤",le:"≤",geq:"≥",ge:"≥",lt:"<",gt:">",succ:"≻",prec:"≺",approx:"≈",succeq:"⪰",preceq:"⪯",supset:"⊃",subset:"⊂",supseteq:"⊇",subseteq:"⊆",in:"∈",ni:"∋",notin:"∉",owns:"∋",gg:"≫",ll:"≪",sim:"∼",simeq:"≃",perp:"⊥",equiv:"≡",asymp:"≍",smile:"⌣",frown:"⌢",ne:"≠",neq:"≠",cong:"≅",doteq:"≐",bowtie:"⋈",models:"⊨",notChar:"⧸",Leftrightarrow:"⇔",Leftarrow:"⇐",Rightarrow:"⇒",leftrightarrow:"↔",leftarrow:"←",gets:"←",rightarrow:"→",to:["→",{accent:!1}],mapsto:"↦",leftharpoonup:"↼",leftharpoondown:"↽",rightharpoonup:"⇀",rightharpoondown:"⇁",nearrow:"↗",searrow:"↘",nwarrow:"↖",swarrow:"↙",rightleftharpoons:"⇌",hookrightarrow:"↪",hookleftarrow:"↩",longleftarrow:"⟵",Longleftarrow:"⟸",longrightarrow:"⟶",Longrightarrow:"⟹",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",ldots:"…",cdots:"⋯",vdots:"⋮",ddots:"⋱",dotsc:"…",dotsb:"⋯",dotsm:"⋯",dotsi:"⋯",dotso:"…",ldotp:[".",{texClass:MmlNode_js_1$7.TEXCLASS.PUNCT}],cdotp:["⋅",{texClass:MmlNode_js_1$7.TEXCLASS.PUNCT}],colon:[":",{texClass:MmlNode_js_1$7.TEXCLASS.PUNCT}]});new sm$4.CharacterMap("mathchar7",ParseMethods_js_1$6.default.mathchar7,{Gamma:"Γ",Delta:"Δ",Theta:"Θ",Lambda:"Λ",Xi:"Ξ",Pi:"Π",Sigma:"Σ",Upsilon:"Υ",Phi:"Φ",Psi:"Ψ",Omega:"Ω",_:"_","#":"#",$:"$","%":"%","&":"&",And:"&"});new sm$4.DelimiterMap("delimiter",ParseMethods_js_1$6.default.delimiter,{"(":"(",")":")","[":"[","]":"]","<":"⟨",">":"⟩","\\lt":"⟨","\\gt":"⟩","/":"/","|":["|",{texClass:MmlNode_js_1$7.TEXCLASS.ORD}],".":"","\\\\":"\\","\\lmoustache":"⎰","\\rmoustache":"⎱","\\lgroup":"⟮","\\rgroup":"⟯","\\arrowvert":"⏐","\\Arrowvert":"‖","\\bracevert":"⎪","\\Vert":["‖",{texClass:MmlNode_js_1$7.TEXCLASS.ORD}],"\\|":["‖",{texClass:MmlNode_js_1$7.TEXCLASS.ORD}],"\\vert":["|",{texClass:MmlNode_js_1$7.TEXCLASS.ORD}],"\\uparrow":"↑","\\downarrow":"↓","\\updownarrow":"↕","\\Uparrow":"⇑","\\Downarrow":"⇓","\\Updownarrow":"⇕","\\backslash":"\\","\\rangle":"⟩","\\langle":"⟨","\\rbrace":"}","\\lbrace":"{","\\}":"}","\\{":"{","\\rceil":"⌉","\\lceil":"⌈","\\rfloor":"⌋","\\lfloor":"⌊","\\lbrack":"[","\\rbrack":"]"});new sm$4.CommandMap("macros",{displaystyle:["SetStyle","D",!0,0],textstyle:["SetStyle","T",!1,0],scriptstyle:["SetStyle","S",!1,1],scriptscriptstyle:["SetStyle","SS",!1,2],rm:["SetFont",TexConstants_js_1$8.TexConstant.Variant.NORMAL],mit:["SetFont",TexConstants_js_1$8.TexConstant.Variant.ITALIC],oldstyle:["SetFont",TexConstants_js_1$8.TexConstant.Variant.OLDSTYLE],cal:["SetFont",TexConstants_js_1$8.TexConstant.Variant.CALLIGRAPHIC],it:["SetFont",TexConstants_js_1$8.TexConstant.Variant.MATHITALIC],bf:["SetFont",TexConstants_js_1$8.TexConstant.Variant.BOLD],bbFont:["SetFont",TexConstants_js_1$8.TexConstant.Variant.DOUBLESTRUCK],scr:["SetFont",TexConstants_js_1$8.TexConstant.Variant.SCRIPT],frak:["SetFont",TexConstants_js_1$8.TexConstant.Variant.FRAKTUR],sf:["SetFont",TexConstants_js_1$8.TexConstant.Variant.SANSSERIF],tt:["SetFont",TexConstants_js_1$8.TexConstant.Variant.MONOSPACE],mathrm:["MathFont",TexConstants_js_1$8.TexConstant.Variant.NORMAL],mathup:["MathFont",TexConstants_js_1$8.TexConstant.Variant.NORMAL],mathnormal:["MathFont",""],mathbf:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLD],mathbfup:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLD],mathit:["MathFont",TexConstants_js_1$8.TexConstant.Variant.MATHITALIC],mathbfit:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLDITALIC],mathbb:["MathFont",TexConstants_js_1$8.TexConstant.Variant.DOUBLESTRUCK],Bbb:["MathFont",TexConstants_js_1$8.TexConstant.Variant.DOUBLESTRUCK],mathfrak:["MathFont",TexConstants_js_1$8.TexConstant.Variant.FRAKTUR],mathbffrak:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLDFRAKTUR],mathscr:["MathFont",TexConstants_js_1$8.TexConstant.Variant.SCRIPT],mathbfscr:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLDSCRIPT],mathsf:["MathFont",TexConstants_js_1$8.TexConstant.Variant.SANSSERIF],mathsfup:["MathFont",TexConstants_js_1$8.TexConstant.Variant.SANSSERIF],mathbfsf:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLDSANSSERIF],mathbfsfup:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLDSANSSERIF],mathsfit:["MathFont",TexConstants_js_1$8.TexConstant.Variant.SANSSERIFITALIC],mathbfsfit:["MathFont",TexConstants_js_1$8.TexConstant.Variant.SANSSERIFBOLDITALIC],mathtt:["MathFont",TexConstants_js_1$8.TexConstant.Variant.MONOSPACE],mathcal:["MathFont",TexConstants_js_1$8.TexConstant.Variant.CALLIGRAPHIC],mathbfcal:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLDCALLIGRAPHIC],symrm:["MathFont",TexConstants_js_1$8.TexConstant.Variant.NORMAL],symup:["MathFont",TexConstants_js_1$8.TexConstant.Variant.NORMAL],symnormal:["MathFont",""],symbf:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLD],symbfup:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLD],symit:["MathFont",TexConstants_js_1$8.TexConstant.Variant.ITALIC],symbfit:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLDITALIC],symbb:["MathFont",TexConstants_js_1$8.TexConstant.Variant.DOUBLESTRUCK],symfrak:["MathFont",TexConstants_js_1$8.TexConstant.Variant.FRAKTUR],symbffrak:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLDFRAKTUR],symscr:["MathFont",TexConstants_js_1$8.TexConstant.Variant.SCRIPT],symbfscr:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLDSCRIPT],symsf:["MathFont",TexConstants_js_1$8.TexConstant.Variant.SANSSERIF],symsfup:["MathFont",TexConstants_js_1$8.TexConstant.Variant.SANSSERIF],symbfsf:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLDSANSSERIF],symbfsfup:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLDSANSSERIF],symsfit:["MathFont",TexConstants_js_1$8.TexConstant.Variant.SANSSERIFITALIC],symbfsfit:["MathFont",TexConstants_js_1$8.TexConstant.Variant.SANSSERIFBOLDITALIC],symtt:["MathFont",TexConstants_js_1$8.TexConstant.Variant.MONOSPACE],symcal:["MathFont",TexConstants_js_1$8.TexConstant.Variant.CALLIGRAPHIC],symbfcal:["MathFont",TexConstants_js_1$8.TexConstant.Variant.BOLDCALLIGRAPHIC],textrm:["HBox",null,TexConstants_js_1$8.TexConstant.Variant.NORMAL],textup:["HBox",null,TexConstants_js_1$8.TexConstant.Variant.NORMAL],textnormal:["HBox"],textit:["HBox",null,TexConstants_js_1$8.TexConstant.Variant.ITALIC],textbf:["HBox",null,TexConstants_js_1$8.TexConstant.Variant.BOLD],textsf:["HBox",null,TexConstants_js_1$8.TexConstant.Variant.SANSSERIF],texttt:["HBox",null,TexConstants_js_1$8.TexConstant.Variant.MONOSPACE],tiny:["SetSize",.5],Tiny:["SetSize",.6],scriptsize:["SetSize",.7],small:["SetSize",.85],normalsize:["SetSize",1],large:["SetSize",1.2],Large:["SetSize",1.44],LARGE:["SetSize",1.73],huge:["SetSize",2.07],Huge:["SetSize",2.49],arcsin:"NamedFn",arccos:"NamedFn",arctan:"NamedFn",arg:"NamedFn",cos:"NamedFn",cosh:"NamedFn",cot:"NamedFn",coth:"NamedFn",csc:"NamedFn",deg:"NamedFn",det:"NamedOp",dim:"NamedFn",exp:"NamedFn",gcd:"NamedOp",hom:"NamedFn",inf:"NamedOp",ker:"NamedFn",lg:"NamedFn",lim:"NamedOp",liminf:["NamedOp","lim&thinsp;inf"],limsup:["NamedOp","lim&thinsp;sup"],ln:"NamedFn",log:"NamedFn",max:"NamedOp",min:"NamedOp",Pr:"NamedOp",sec:"NamedFn",sin:"NamedFn",sinh:"NamedFn",sup:"NamedOp",tan:"NamedFn",tanh:"NamedFn",limits:["Limits",1],nolimits:["Limits",0],overline:["UnderOver","2015"],underline:["UnderOver","2015"],overbrace:["UnderOver","23DE",1],underbrace:["UnderOver","23DF",1],overparen:["UnderOver","23DC"],underparen:["UnderOver","23DD"],overrightarrow:["UnderOver","2192"],underrightarrow:["UnderOver","2192"],overleftarrow:["UnderOver","2190"],underleftarrow:["UnderOver","2190"],overleftrightarrow:["UnderOver","2194"],underleftrightarrow:["UnderOver","2194"],overset:"Overset",underset:"Underset",overunderset:"Overunderset",stackrel:["Macro","\\mathrel{\\mathop{#2}\\limits^{#1}}",2],stackbin:["Macro","\\mathbin{\\mathop{#2}\\limits^{#1}}",2],over:"Over",overwithdelims:"Over",atop:"Over",atopwithdelims:"Over",above:"Over",abovewithdelims:"Over",brace:["Over","{","}"],brack:["Over","[","]"],choose:["Over","(",")"],frac:"Frac",sqrt:"Sqrt",root:"Root",uproot:["MoveRoot","upRoot"],leftroot:["MoveRoot","leftRoot"],left:"LeftRight",right:"LeftRight",middle:"LeftRight",llap:"Lap",rlap:"Lap",raise:"RaiseLower",lower:"RaiseLower",moveleft:"MoveLeftRight",moveright:"MoveLeftRight",",":["Spacer",lengths_js_1$2.MATHSPACE.thinmathspace],":":["Spacer",lengths_js_1$2.MATHSPACE.mediummathspace],">":["Spacer",lengths_js_1$2.MATHSPACE.mediummathspace],";":["Spacer",lengths_js_1$2.MATHSPACE.thickmathspace],"!":["Spacer",lengths_js_1$2.MATHSPACE.negativethinmathspace],enspace:["Spacer",.5],quad:["Spacer",1],qquad:["Spacer",2],thinspace:["Spacer",lengths_js_1$2.MATHSPACE.thinmathspace],negthinspace:["Spacer",lengths_js_1$2.MATHSPACE.negativethinmathspace],hskip:"Hskip",hspace:"Hskip",kern:"Hskip",mskip:"Hskip",mspace:"Hskip",mkern:"Hskip",rule:"rule",Rule:["Rule"],Space:["Rule","blank"],nonscript:"Nonscript",big:["MakeBig",MmlNode_js_1$7.TEXCLASS.ORD,.85],Big:["MakeBig",MmlNode_js_1$7.TEXCLASS.ORD,1.15],bigg:["MakeBig",MmlNode_js_1$7.TEXCLASS.ORD,1.45],Bigg:["MakeBig",MmlNode_js_1$7.TEXCLASS.ORD,1.75],bigl:["MakeBig",MmlNode_js_1$7.TEXCLASS.OPEN,.85],Bigl:["MakeBig",MmlNode_js_1$7.TEXCLASS.OPEN,1.15],biggl:["MakeBig",MmlNode_js_1$7.TEXCLASS.OPEN,1.45],Biggl:["MakeBig",MmlNode_js_1$7.TEXCLASS.OPEN,1.75],bigr:["MakeBig",MmlNode_js_1$7.TEXCLASS.CLOSE,.85],Bigr:["MakeBig",MmlNode_js_1$7.TEXCLASS.CLOSE,1.15],biggr:["MakeBig",MmlNode_js_1$7.TEXCLASS.CLOSE,1.45],Biggr:["MakeBig",MmlNode_js_1$7.TEXCLASS.CLOSE,1.75],bigm:["MakeBig",MmlNode_js_1$7.TEXCLASS.REL,.85],Bigm:["MakeBig",MmlNode_js_1$7.TEXCLASS.REL,1.15],biggm:["MakeBig",MmlNode_js_1$7.TEXCLASS.REL,1.45],Biggm:["MakeBig",MmlNode_js_1$7.TEXCLASS.REL,1.75],mathord:["TeXAtom",MmlNode_js_1$7.TEXCLASS.ORD],mathop:["TeXAtom",MmlNode_js_1$7.TEXCLASS.OP],mathopen:["TeXAtom",MmlNode_js_1$7.TEXCLASS.OPEN],mathclose:["TeXAtom",MmlNode_js_1$7.TEXCLASS.CLOSE],mathbin:["TeXAtom",MmlNode_js_1$7.TEXCLASS.BIN],mathrel:["TeXAtom",MmlNode_js_1$7.TEXCLASS.REL],mathpunct:["TeXAtom",MmlNode_js_1$7.TEXCLASS.PUNCT],mathinner:["TeXAtom",MmlNode_js_1$7.TEXCLASS.INNER],vcenter:["TeXAtom",MmlNode_js_1$7.TEXCLASS.VCENTER],buildrel:"BuildRel",hbox:["HBox",0],text:"HBox",mbox:["HBox",0],fbox:"FBox",boxed:["Macro","\\fbox{$\\displaystyle{#1}$}",1],framebox:"FrameBox",strut:"Strut",mathstrut:["Macro","\\vphantom{(}"],phantom:"Phantom",vphantom:["Phantom",1,0],hphantom:["Phantom",0,1],smash:"Smash",acute:["Accent","00B4"],grave:["Accent","0060"],ddot:["Accent","00A8"],tilde:["Accent","007E"],bar:["Accent","00AF"],breve:["Accent","02D8"],check:["Accent","02C7"],hat:["Accent","005E"],vec:["Accent","2192"],dot:["Accent","02D9"],widetilde:["Accent","007E",1],widehat:["Accent","005E",1],matrix:"Matrix",array:"Matrix",pmatrix:["Matrix","(",")"],cases:["Matrix","{","","left left",null,".1em",null,!0],eqalign:["Matrix",null,null,"right left",(0,lengths_js_1$2.em)(lengths_js_1$2.MATHSPACE.thickmathspace),".5em","D"],displaylines:["Matrix",null,null,"center",null,".5em","D"],cr:"Cr","\\":"CrLaTeX",newline:["CrLaTeX",!0],hline:["HLine","solid"],hdashline:["HLine","dashed"],eqalignno:["Matrix",null,null,"right left",(0,lengths_js_1$2.em)(lengths_js_1$2.MATHSPACE.thickmathspace),".5em","D",null,"right"],leqalignno:["Matrix",null,null,"right left",(0,lengths_js_1$2.em)(lengths_js_1$2.MATHSPACE.thickmathspace),".5em","D",null,"left"],hfill:"HFill",hfil:"HFill",hfilll:"HFill",bmod:["Macro",'\\mmlToken{mo}[lspace="thickmathspace" rspace="thickmathspace"]{mod}'],pmod:["Macro","\\pod{\\mmlToken{mi}{mod}\\kern 6mu #1}",1],mod:["Macro","\\mathchoice{\\kern18mu}{\\kern12mu}{\\kern12mu}{\\kern12mu}\\mmlToken{mi}{mod}\\,\\,#1",1],pod:["Macro","\\mathchoice{\\kern18mu}{\\kern8mu}{\\kern8mu}{\\kern8mu}(#1)",1],iff:["Macro","\\;\\Longleftrightarrow\\;"],skew:["Macro","{{#2{#3\\mkern#1mu}\\mkern-#1mu}{}}",3],pmb:["Macro","\\rlap{#1}\\kern1px{#1}",1],TeX:["Macro","T\\kern-.14em\\lower.5ex{E}\\kern-.115em X"],LaTeX:["Macro","L\\kern-.325em\\raise.21em{\\scriptstyle{A}}\\kern-.17em\\TeX"]," ":["Macro","\\text{ }"],not:"Not",dots:"Dots",space:"Tilde"," ":"Tilde",begin:"BeginEnd",end:"BeginEnd",label:"HandleLabel",ref:"HandleRef",nonumber:"HandleNoTag",mathchoice:"MathChoice",mmlToken:"MmlToken"},BaseMethods_js_1$6.default);new sm$4.EnvironmentMap("environment",ParseMethods_js_1$6.default.environment,{array:["AlignedArray"],equation:["Equation",null,!0],eqnarray:["EqnArray",null,!0,!0,"rcl",ParseUtil_js_1$a.default.cols(0,lengths_js_1$2.MATHSPACE.thickmathspace),".5em"]},BaseMethods_js_1$6.default);new sm$4.CharacterMap("not_remap",null,{"←":"↚","→":"↛","↔":"↮","⇐":"⇍","⇒":"⇏","⇔":"⇎","∈":"∉","∋":"∌","∣":"∤","∥":"∦","∼":"≁","~":"≁","≃":"≄","≅":"≇","≈":"≉","≍":"≭","=":"≠","≡":"≢","<":"≮",">":"≯","≤":"≰","≥":"≱","≲":"≴","≳":"≵","≶":"≸","≷":"≹","≺":"⊀","≻":"⊁","⊂":"⊄","⊃":"⊅","⊆":"⊈","⊇":"⊉","⊢":"⊬","⊨":"⊭","⊩":"⊮","⊫":"⊯","≼":"⋠","≽":"⋡","⊑":"⋢","⊒":"⋣","⊲":"⋪","⊳":"⋫","⊴":"⋬","⊵":"⋭","∃":"∄"});var __extends$f=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__createBinding$6=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,r,e,n){n===void 0&&(n=e);var i=Object.getOwnPropertyDescriptor(r,e);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,i)}:function(t,r,e,n){n===void 0&&(n=e),t[n]=r[e]}),__setModuleDefault$6=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),__importStar$6=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var e in t)e!=="default"&&Object.prototype.hasOwnProperty.call(t,e)&&__createBinding$6(r,t,e);return __setModuleDefault$6(r,t),r},__values$8=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__importDefault$x=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},_a$7;Object.defineProperty(BaseConfiguration,"__esModule",{value:!0});BaseConfiguration.BaseConfiguration=BaseConfiguration.BaseTags=BaseConfiguration.Other=void 0;var Configuration_js_1$k=Configuration,MapHandler_js_1=MapHandler,TexError_js_1$e=__importDefault$x(TexError$1),NodeUtil_js_1$9=__importDefault$x(NodeUtil$1),SymbolMap_js_1$f=SymbolMap,bitem=__importStar$6(BaseItems),Tags_js_1$5=Tags,OperatorDictionary_js_1=OperatorDictionary;new SymbolMap_js_1$f.CharacterMap("remap",null,{"-":"−","*":"∗","`":"‘"});function Other(t,r){var e=t.stack.env.font,n=e?{mathvariant:t.stack.env.font}:{},i=MapHandler_js_1.MapHandler.getMap("remap").lookup(r),o=(0,OperatorDictionary_js_1.getRange)(r),a=o?o[3]:"mo",s=t.create("token",a,n,i?i.char:r);o[4]&&s.attributes.set("mathvariant",o[4]),a==="mo"&&(NodeUtil_js_1$9.default.setProperty(s,"fixStretchy",!0),t.configuration.addNode("fixStretchy",s)),t.Push(s)}BaseConfiguration.Other=Other;function csUndefined(t,r){throw new TexError_js_1$e.default("UndefinedControlSequence","Undefined control sequence %1","\\"+r)}function envUndefined(t,r){throw new TexError_js_1$e.default("UnknownEnv","Unknown environment '%1'",r)}function filterNonscript(t){var r,e,n=t.data;try{for(var i=__values$8(n.getList("nonscript")),o=i.next();!o.done;o=i.next()){var a=o.value;if(a.attributes.get("scriptlevel")>0){var s=a.parent;if(s.childNodes.splice(s.childIndex(a),1),n.removeFromList(a.kind,[a]),a.isKind("mrow")){var l=a.childNodes[0];n.removeFromList("mstyle",[l]),n.removeFromList("mspace",l.childNodes[0].childNodes)}}else a.isKind("mrow")&&(a.parent.replaceChild(a.childNodes[0],a),n.removeFromList("mrow",[a]))}}catch(c){r={error:c}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(r)throw r.error}}}var BaseTags=function(t){__extends$f(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}(Tags_js_1$5.AbstractTags);BaseConfiguration.BaseTags=BaseTags;BaseConfiguration.BaseConfiguration=Configuration_js_1$k.Configuration.create("base",{handler:{character:["command","special","letter","digit"],delimiter:["delimiter"],macro:["delimiter","macros","mathchar0mi","mathchar0mo","mathchar7"],environment:["environment"]},fallback:{character:Other,macro:csUndefined,environment:envUndefined},items:(_a$7={},_a$7[bitem.StartItem.prototype.kind]=bitem.StartItem,_a$7[bitem.StopItem.prototype.kind]=bitem.StopItem,_a$7[bitem.OpenItem.prototype.kind]=bitem.OpenItem,_a$7[bitem.CloseItem.prototype.kind]=bitem.CloseItem,_a$7[bitem.PrimeItem.prototype.kind]=bitem.PrimeItem,_a$7[bitem.SubsupItem.prototype.kind]=bitem.SubsupItem,_a$7[bitem.OverItem.prototype.kind]=bitem.OverItem,_a$7[bitem.LeftItem.prototype.kind]=bitem.LeftItem,_a$7[bitem.Middle.prototype.kind]=bitem.Middle,_a$7[bitem.RightItem.prototype.kind]=bitem.RightItem,_a$7[bitem.BeginItem.prototype.kind]=bitem.BeginItem,_a$7[bitem.EndItem.prototype.kind]=bitem.EndItem,_a$7[bitem.StyleItem.prototype.kind]=bitem.StyleItem,_a$7[bitem.PositionItem.prototype.kind]=bitem.PositionItem,_a$7[bitem.CellItem.prototype.kind]=bitem.CellItem,_a$7[bitem.MmlItem.prototype.kind]=bitem.MmlItem,_a$7[bitem.FnItem.prototype.kind]=bitem.FnItem,_a$7[bitem.NotItem.prototype.kind]=bitem.NotItem,_a$7[bitem.NonscriptItem.prototype.kind]=bitem.NonscriptItem,_a$7[bitem.DotsItem.prototype.kind]=bitem.DotsItem,_a$7[bitem.ArrayItem.prototype.kind]=bitem.ArrayItem,_a$7[bitem.EqnArrayItem.prototype.kind]=bitem.EqnArrayItem,_a$7[bitem.EquationItem.prototype.kind]=bitem.EquationItem,_a$7),options:{maxMacros:1e3,baseURL:typeof document>"u"||document.getElementsByTagName("base").length===0?"":String(document.location).replace(/#.*$/,"")},tags:{base:BaseTags},postprocessors:[[filterNonscript,-4]]});var __extends$e=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$4=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$4=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$4.apply(this,arguments)},__read$7=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__importDefault$w=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tex,"__esModule",{value:!0});tex.TeX=void 0;var InputJax_js_1=InputJax$1,Options_js_1$1=Options$1,FindTeX_js_1=FindTeX$1,FilterUtil_js_1=__importDefault$w(FilterUtil$1),NodeUtil_js_1$8=__importDefault$w(NodeUtil$1),TexParser_js_1$7=__importDefault$w(requireTexParser()),TexError_js_1$d=__importDefault$w(TexError$1),ParseOptions_js_1$1=__importDefault$w(ParseOptions$1),Tags_js_1$4=Tags,Configuration_js_1$j=Configuration,TeX=function(t){__extends$e(r,t);function r(e){e===void 0&&(e={});var n=this,i=__read$7((0,Options_js_1$1.separateOptions)(e,r.OPTIONS,FindTeX_js_1.FindTeX.OPTIONS),3),o=i[0],a=i[1],s=i[2];n=t.call(this,a)||this,n.findTeX=n.options.FindTeX||new FindTeX_js_1.FindTeX(s);var l=n.options.packages,c=n.configuration=r.configure(l),f=n._parseOptions=new ParseOptions_js_1$1.default(c,[n.options,Tags_js_1$4.TagsFactory.OPTIONS]);return(0,Options_js_1$1.userOptions)(f.options,o),c.config(n),r.tags(f,c),n.postFilters.add(FilterUtil_js_1.default.cleanSubSup,-6),n.postFilters.add(FilterUtil_js_1.default.setInherited,-5),n.postFilters.add(FilterUtil_js_1.default.moveLimits,-4),n.postFilters.add(FilterUtil_js_1.default.cleanStretchy,-3),n.postFilters.add(FilterUtil_js_1.default.cleanAttributes,-2),n.postFilters.add(FilterUtil_js_1.default.combineRelations,-1),n}return r.configure=function(e){var n=new Configuration_js_1$j.ParserConfiguration(e,["tex"]);return n.init(),n},r.tags=function(e,n){Tags_js_1$4.TagsFactory.addTags(n.tags),Tags_js_1$4.TagsFactory.setDefault(e.options.tags),e.tags=Tags_js_1$4.TagsFactory.getDefault(),e.tags.configuration=e},r.prototype.setMmlFactory=function(e){t.prototype.setMmlFactory.call(this,e),this._parseOptions.nodeFactory.setMmlFactory(e)},Object.defineProperty(r.prototype,"parseOptions",{get:function(){return this._parseOptions},enumerable:!1,configurable:!0}),r.prototype.reset=function(e){e===void 0&&(e=0),this.parseOptions.tags.reset(e)},r.prototype.compile=function(e,n){this.parseOptions.clear(),this.executeFilters(this.preFilters,e,n,this.parseOptions);var i=e.display;this.latex=e.math;var o;this.parseOptions.tags.startEquation(e);var a;try{var s=new TexParser_js_1$7.default(this.latex,{display:i,isInner:!1},this.parseOptions);o=s.mml(),a=s.stack.global}catch(l){if(!(l instanceof TexError_js_1$d.default))throw l;this.parseOptions.error=!0,o=this.options.formatError(this,l)}return o=this.parseOptions.nodeFactory.create("node","math",[o]),a!=null&&a.indentalign&&NodeUtil_js_1$8.default.setAttribute(o,"indentalign",a.indentalign),i&&NodeUtil_js_1$8.default.setAttribute(o,"display","block"),this.parseOptions.tags.finishEquation(e),this.parseOptions.root=o,this.executeFilters(this.postFilters,e,n,this.parseOptions),this.mathNode=this.parseOptions.root,this.mathNode},r.prototype.findMath=function(e){return this.findTeX.findMath(e)},r.prototype.formatError=function(e){var n=e.message.replace(/\n.*/,"");return this.parseOptions.nodeFactory.create("error",n,e.id,this.latex)},r.NAME="TeX",r.OPTIONS=__assign$4(__assign$4({},InputJax_js_1.AbstractInputJax.OPTIONS),{FindTeX:null,packages:["base"],digits:/^(?:[0-9]+(?:\{,\}[0-9]{3})*(?:\.[0-9]*)?|\.[0-9]+)/,maxBuffer:5*1024,formatError:function(e,n){return e.formatError(n)}}),r}(InputJax_js_1.AbstractInputJax);tex.TeX=TeX;var preprocessing={},replaceAlignWithAligned$1={};Object.defineProperty(replaceAlignWithAligned$1,"__esModule",{value:!0});replaceAlignWithAligned$1.replaceAlignWithAligned=void 0;function replaceAlignWithAligned(t){return t.replace(/\{align[*]?}/g,"{aligned}")}replaceAlignWithAligned$1.replaceAlignWithAligned=replaceAlignWithAligned;var escapeTextSymbols$1={};Object.defineProperty(escapeTextSymbols$1,"__esModule",{value:!0});escapeTextSymbols$1.escapeTextSymbols=void 0;function escapeTextSymbols(t){const r=/\\text\s*\{((\\\\|\\}|[^}])+)}/g,e=/((\\\\)*)\\?&/g,n=/((\\\\)*)\\?%/g,i=/((\\\\)*)\\?#/g,o=/((\\\\)*)\\textquotedblleft/g,a=/((\\\\)*)\\textquotedblright/g,s=/((\\\\)*)\\textemdash/g;return t.replace(r,(l,c)=>`\\text{${c.replace(e,"$1\\&").replace(n,"$1\\%").replace(i,"$1\\#").replace(o,"$1“").replace(a,"$1”").replace(s,"$1—")}}`)}escapeTextSymbols$1.escapeTextSymbols=escapeTextSymbols;var fixNestedCancelCommands$1={};Object.defineProperty(fixNestedCancelCommands$1,"__esModule",{value:!0});fixNestedCancelCommands$1.fixNestedCancelCommands=void 0;function fixNestedCancelCommands(t){const r=/\\cancel\s*(\\dfrac[{]+[^{}]+}+{[^{}]+}+)/g;t=t.replace(r,"\\cancel{$1}");const e=/\\cancel\s*(\\dfrac{[^{}]*{[^{}]+}[^{}]*}{[^{}]+})/g;t=t.replace(e,"\\cancel{$1}");const n=/\\cancel\s*(\\blue[A-Z]|\\text)(\s+\w|\s*\d)/g;t=t.replace(n,(u,m,p)=>`\\cancel{${m}{${p.trim()}}}`);const i=/\\cancel\s*((?:\\text|\\blue[A-Z]|\\gold[A-Z])[{]+[^}]+[}])/g;t=t.replace(i,"\\cancel{$1}");const o=/(\\cancel(?:\s*\\leq|\s*{\s*\\leq\s*}))/g;t=t.replace(o,"\\nleq ");const a=/(\\cancel(?:\s*\\geq|\s*{\s*\\geq\s*}))/g;t=t.replace(a,"\\ngeq ");const s=/(\\cancel(?:\s*\\gt|\s*{\s*\\gt\s*}))/g;t=t.replace(s,"\\ngtr ");const l=/(\\cancel(?:\s*>|\s*{\s*>\s*}))/g;t=t.replace(l,"\\ngtr ");const c=/(\\cancel(?:\s*\\lt|\s*{\s*\\lt\s*}))/g;t=t.replace(c,"\\nless ");const f=/(\\cancel(?:\s*<|\s*{\s*<\s*}))/g;t=t.replace(f,"\\nless ");const d=/(\\cancel(?:\s*=|\s*{\s*=\s*}))/g;return t=t.replace(d,"\\neq "),t}fixNestedCancelCommands$1.fixNestedCancelCommands=fixNestedCancelCommands;var fixStackrelBraces$1={},texSyntax={};Object.defineProperty(texSyntax,"__esModule",{value:!0});texSyntax.commandWithTextModeFirstArg=texSyntax.color=texSyntax.arg=texSyntax.block=void 0;function block(t){return`\\{${t<=0?"[^{}]":`(?:[^{}]|${block(t-1)})`}*\\}`}texSyntax.block=block;function arg$1(t){return`(?:\\d|\\s*${block(t)}|\\s+[A-Za-z])`}texSyntax.arg=arg$1;texSyntax.color="(?:blue[A-E]?|purple[A-E]?|gold[A-E]|green[A-E]?|maroon[A-E]|red[A-E]?|pink|orange|gray[A-I]?|teal[A-E]|mint[A-E]|kaBlue|kaGreen)";texSyntax.commandWithTextModeFirstArg="(?:[fh]box|text(?:|bf|it|normal|rm|sf|tt|up))";Object.defineProperty(fixStackrelBraces$1,"__esModule",{value:!0});fixStackrelBraces$1.fixStackrelBraces=void 0;const tex_syntax_1$r=texSyntax,stackrelWithUnbracedFirstArg=new RegExp(`(\\\\stackrel)(\\?|\\s*\\\\${tex_syntax_1$r.color}${(0,tex_syntax_1$r.block)(1)})`,"g"),stackrelWithUnbracedSecondArg=new RegExp(`(\\\\stackrel${(0,tex_syntax_1$r.block)(2)})\\s*(\\\\(blueE|purpleD|ce|text)\\s*(${(0,tex_syntax_1$r.block)(1)}| \\w))`,"g"),stackrelWithHydrogenAsSecondArg=new RegExp(`(\\\\stackrel${(0,tex_syntax_1$r.block)(2)})(H)`,"g");function fixStackrelBraces(t){return t.replace(stackrelWithUnbracedFirstArg,"$1{$2}").replace(stackrelWithUnbracedSecondArg,"$1{$2}").replace(stackrelWithHydrogenAsSecondArg,"$1{\\vphantom H}\\!\\!\\!\\!\\!$2").replace(/\\stackrel\\checkmark=/g,"\\stackrel{\\checkmark}{=}")}fixStackrelBraces$1.fixStackrelBraces=fixStackrelBraces;var fixOversetBraces$1={};Object.defineProperty(fixOversetBraces$1,"__esModule",{value:!0});fixOversetBraces$1.fixOversetBraces=void 0;const tex_syntax_1$q=texSyntax,oversetWithMissingBraces=new RegExp(`(\\\\overset${(0,tex_syntax_1$q.block)(3)})(\\\\${tex_syntax_1$q.color}(?:\\d|${(0,tex_syntax_1$q.block)(0)}))`,"g");function fixOversetBraces(t){return t.replace(oversetWithMissingBraces,"$1{$2}")}fixOversetBraces$1.fixOversetBraces=fixOversetBraces;var fixDfracBraces$1={};Object.defineProperty(fixDfracBraces$1,"__esModule",{value:!0});fixDfracBraces$1.fixDfracBraces=void 0;const tex_syntax_1$p=texSyntax,dfracFirstArgWithMissingBraces=new RegExp(`(\\\\dfrac)(\\\\${tex_syntax_1$p.color}${(0,tex_syntax_1$p.arg)(1)}|\\d)`,"g"),dfracSecondArgWithMissingBraces=new RegExp(`(\\\\dfrac${(0,tex_syntax_1$p.block)(2)})(\\s*\\\\${tex_syntax_1$p.color}${(0,tex_syntax_1$p.arg)(1)})`,"g");function fixDfracBraces(t){return t.replace(dfracFirstArgWithMissingBraces,"$1{$2}").replace(dfracSecondArgWithMissingBraces,"$1{$2}")}fixDfracBraces$1.fixDfracBraces=fixDfracBraces;var fixHatBraces$1={};Object.defineProperty(fixHatBraces$1,"__esModule",{value:!0});fixHatBraces$1.fixHatBraces=void 0;const tex_syntax_1$o=texSyntax;function fixHatBraces(t){return t.replace(/\\hat\s*\\bold\s+([a-z])/g,"\\hat{\\bold $1}").replace(new RegExp(`(\\\\hat)(\\\\text${(0,tex_syntax_1$o.block)(0)})`),"$1{$2}")}fixHatBraces$1.fixHatBraces=fixHatBraces;var fixSqrtBraces$1={};Object.defineProperty(fixSqrtBraces$1,"__esModule",{value:!0});fixSqrtBraces$1.fixSqrtBraces=void 0;const tex_syntax_1$n=texSyntax,unaryCommand$1="\\\\(?:blueD|ce)",arg=`(?:\\s+[^{]|${(0,tex_syntax_1$n.block)(2)})`,sqrtWithUnaryCommandArg=new RegExp(`(\\\\sqrt)(\\s*${unaryCommand$1}${arg})`,"g"),sqrtWithDfracArg=new RegExp(`(\\\\sqrt)(\\s*\\\\dfrac${(0,tex_syntax_1$n.block)(2)}${(0,tex_syntax_1$n.block)(1)})`,"g");function fixSqrtBraces(t){return t.replace(sqrtWithUnaryCommandArg,"$1{$2}").replace(sqrtWithDfracArg,"$1{$2}")}fixSqrtBraces$1.fixSqrtBraces=fixSqrtBraces;var fixBold$1={};Object.defineProperty(fixBold$1,"__esModule",{value:!0});fixBold$1.fixBold=void 0;const tex_syntax_1$m=texSyntax;function fixBold(t){return t.replace(new RegExp(`\\\\bold\\s*(\\\\(${tex_syntax_1$m.color})(\\s+[a-zA-Z0-9]|${(0,tex_syntax_1$m.block)(2)}))`,"g"),"\\bold{$1}")}fixBold$1.fixBold=fixBold;var fixColors$1={};Object.defineProperty(fixColors$1,"__esModule",{value:!0});fixColors$1.fixColors=void 0;const tex_syntax_1$l=texSyntax;function fixColors(t){return t.replace(new RegExp(`\\\\${tex_syntax_1$l.color}\\s*\\\\${tex_syntax_1$l.color}`,"g"),"").replace(new RegExp(`\\\\(${tex_syntax_1$l.color})(\\s*\\\\dfrac${(0,tex_syntax_1$l.arg)(4)}${(0,tex_syntax_1$l.arg)(4)})`,"g"),"\\$1{$2}").replace(new RegExp(`\\\\(${tex_syntax_1$l.color})(\\s*\\\\text${(0,tex_syntax_1$l.arg)(4)})`,"g"),"\\$1{$2}").replace(new RegExp(`\\\\(${tex_syntax_1$l.color})(\\s*\\\\operatorname${(0,tex_syntax_1$l.arg)(4)})`,"g"),"\\$1{$2}").replace(new RegExp(`\\\\(${tex_syntax_1$l.color})(\\s*\\\\mathbin${(0,tex_syntax_1$l.arg)(4)})`,"g"),"\\$1{$2}").replace(new RegExp(`\\\\(${tex_syntax_1$l.color})\\\\${tex_syntax_1$l.color}(\\s*\\\\${tex_syntax_1$l.color}${(0,tex_syntax_1$l.arg)(4)})`,"g"),"\\$1{$2}").replace(new RegExp(`\\\\(${tex_syntax_1$l.color})(\\s*\\\\${tex_syntax_1$l.color}${(0,tex_syntax_1$l.arg)(4)})`,"g"),"\\$1{$2}")}fixColors$1.fixColors=fixColors;var removeCommentsInColorBlocks$1={};Object.defineProperty(removeCommentsInColorBlocks$1,"__esModule",{value:!0});removeCommentsInColorBlocks$1.removeCommentsInColorBlocks=removeCommentsInColorBlocks$1.removeEndOfBlockComments=void 0;const tex_syntax_1$k=texSyntax,colorWithBlockArg=new RegExp(`(\\\\${tex_syntax_1$k.color})\\s*(${(0,tex_syntax_1$k.block)(3)})`,"g"),blockOrCommentCharacter=`(${(0,tex_syntax_1$k.block)(0)}|[^\\n}])`,backslashEscapesAndCommentsAtEndsOfBlocks=new RegExp(`\\\\[\\\\%]|\\s*%${blockOrCommentCharacter}*}`,"g");function removeEndOfBlockComments(t){return t.replace(backslashEscapesAndCommentsAtEndsOfBlocks,r=>r[0]==="\\"?r:"}")}removeCommentsInColorBlocks$1.removeEndOfBlockComments=removeEndOfBlockComments;function removeCommentsInColorBlocks(t){return t.replace(colorWithBlockArg,r=>removeEndOfBlockComments(r))}removeCommentsInColorBlocks$1.removeCommentsInColorBlocks=removeCommentsInColorBlocks;var fixCommandsWithMissingArg$1={};Object.defineProperty(fixCommandsWithMissingArg$1,"__esModule",{value:!0});fixCommandsWithMissingArg$1.fixCommandsWithMissingArg=void 0;const tex_syntax_1$j=texSyntax,unaryCommand=`(?:${tex_syntax_1$j.color}|rlap)`;function fixCommandsWithMissingArg(t){return t.replace(new RegExp(`{\\s*(\\\\${unaryCommand}\\s*)+}`,"g"),"{}").replace(new RegExp(`\\s*(\\\\${unaryCommand}\\s*)+$`,"g"),"").replace(new RegExp(`\\s*\\\\${unaryCommand}\\s*}`,"g"),"}")}fixCommandsWithMissingArg$1.fixCommandsWithMissingArg=fixCommandsWithMissingArg;var fixTextUnderscores$1={};Object.defineProperty(fixTextUnderscores$1,"__esModule",{value:!0});fixTextUnderscores$1.fixTextUnderscores=void 0;const tex_syntax_1$i=texSyntax,textWithBlockArg$2=new RegExp(`\\\\(text|textbf)(${(0,tex_syntax_1$i.block)(3)})`,"g");function fixUnderscoresInsideInnerBlock(t){return t.replace(new RegExp("_Multipliziere "),"Multipliziere ").replace(/\$[^$]*\$|\\_|_/g,r=>r==="_"?"\\_":r)}function fixTextUnderscores(t){return t.replace(/^\s*(_+)\s*$/,"\\text{$1}").replace(textWithBlockArg$2,(r,e,n)=>`\\${e}${fixUnderscoresInsideInnerBlock(n)}`)}fixTextUnderscores$1.fixTextUnderscores=fixTextUnderscores;var fixText$1={};Object.defineProperty(fixText$1,"__esModule",{value:!0});fixText$1.fixText=void 0;const tex_syntax_1$h=texSyntax;function fixText(t){return t.replace(new RegExp(`\\\\text\\s*(\\\\(${tex_syntax_1$h.color})${(0,tex_syntax_1$h.arg)(2)})`,"g"),"\\text{$1}")}fixText$1.fixText=fixText;var fixTextInText$1={};Object.defineProperty(fixTextInText$1,"__esModule",{value:!0});fixTextInText$1.fixTextInText=void 0;const tex_syntax_1$g=texSyntax,textWithBlockArg$1=new RegExp(`\\\\\\\\|\\\\text(${(0,tex_syntax_1$g.block)(3)})`,"g");function fixTextInText(t){return t.replace(textWithBlockArg$1,(r,e)=>r.startsWith("\\text")?`\\text${e.replace(/\\\\|\\\$|\$(\\\$|[^$])*\$|(\\text\s*)/g,n=>n.startsWith("\\text")?"":n)}`:r)}fixTextInText$1.fixTextInText=fixTextInText;var fixWidehat$1={};Object.defineProperty(fixWidehat$1,"__esModule",{value:!0});fixWidehat$1.fixWidehat=void 0;const tex_syntax_1$f=texSyntax;function fixWidehat(t){return t.replace("\\widehat\\blueE A =\\widehat\\blueE A%\\cong","\\widehat{\\blueE A} =\\widehat{\\blueE A%\\cong}").replace(new RegExp(`\\\\widehat\\s*(\\\\(${tex_syntax_1$f.color})\\s*${(0,tex_syntax_1$f.arg)(3)})`,"g"),"\\widehat{$1}")}fixWidehat$1.fixWidehat=fixWidehat;var fixVecBraces$1={};Object.defineProperty(fixVecBraces$1,"__esModule",{value:!0});fixVecBraces$1.fixVecBraces=void 0;function fixVecBraces(t){return t.replace(/\\vec\\textbf{v}/g,"\\vec{\\textbf{v}}")}fixVecBraces$1.fixVecBraces=fixVecBraces;var fixUnderline$1={};Object.defineProperty(fixUnderline$1,"__esModule",{value:!0});fixUnderline$1.fixUnderline=void 0;const tex_syntax_1$e=texSyntax,underlineWithMissingBraces=new RegExp(`(\\\\underline)(\\\\(?:${tex_syntax_1$e.color}|text)${(0,tex_syntax_1$e.arg)(2)})`,"g");function fixUnderline(t){return t.replace(underlineWithMissingBraces,"$1{$2}")}fixUnderline$1.fixUnderline=fixUnderline;var fixFbox$1={};Object.defineProperty(fixFbox$1,"__esModule",{value:!0});fixFbox$1.fixFbox=void 0;const tex_syntax_1$d=texSyntax,fboxCommands=RegExp(`(\\\\fbox\\s*)(${(0,tex_syntax_1$d.block)(3)})`,"g");function fixFbox(t){return t.replace(fboxCommands,(r,e,n)=>usesMathModeSyntax(n)&&!wrapsArgumentInDollarSigns(n)?`${e.replace("fbox","boxed")}${n}`:`${e}${n}`)}fixFbox$1.fixFbox=fixFbox;function usesMathModeSyntax(t){return/[_^]|\\dfrac|\\text/.test(t)||new RegExp("\\\\"+tex_syntax_1$d.color).test(t)}function wrapsArgumentInDollarSigns(t){return t.startsWith("{$")&&t.endsWith("$}")}var fixOverbrace={};Object.defineProperty(fixOverbrace,"__esModule",{value:!0});fixOverbrace.fixOverbraces=void 0;const tex_syntax_1$c=texSyntax;function fixOverbraces(t){return t.replace(new RegExp(`(\\\\overbrace)(\\\\${tex_syntax_1$c.color}${(0,tex_syntax_1$c.arg)(1)})`,"g"),"$1{$2}")}fixOverbrace.fixOverbraces=fixOverbraces;var fixLinebreaks$1={};Object.defineProperty(fixLinebreaks$1,"__esModule",{value:!0});fixLinebreaks$1.tokenize=fixLinebreaks$1.fixLinebreaks=void 0;function fixLinebreaks(t){const r=tokenize(t);let e=0,n=!1;const i=r.map(o=>o.startsWith("\\begin")||o==="{"?(e++,o):o.startsWith("\\end")||o==="}"?(e--,e<0&&(e=0),o):e===0&&o.includes("\\\\")?(n=!0,o.replace(/\\\\(?:\s*\\\\)*(\[[^\]]*])?/g,"\\\\$1&")):o).join("");return n?"\\begin{aligned}&"+i+`
\\end{aligned}`:i}fixLinebreaks$1.fixLinebreaks=fixLinebreaks;const environmentDelimiter="\\\\(?:begin|end)\\{[^}]+}",linebreaks$1="(?:\\\\\\\\\\s*)+(?:\\[[^\\]]*])?",escapedCurlyBrace="\\\\\\{|\\\\}",tokens=new RegExp(`(${environmentDelimiter}|${linebreaks$1}|${escapedCurlyBrace}|[{}])`);function tokenize(t){return t.split(tokens)}fixLinebreaks$1.tokenize=tokenize;var escapeUnsupportedUnicode$1={};Object.defineProperty(escapeUnsupportedUnicode$1,"__esModule",{value:!0});escapeUnsupportedUnicode$1.escapeUnsupportedUnicode=void 0;function escapeUnsupportedUnicode(t){return t.replace(/€/g,"\\unicode{0x20AC}").replace(/₹/g,"\\unicode{0x20B9}").replace(/₼/g,"\\unicode{0x20BC}").replace(/ə/g,"\\unicode{0x0259}").replace(/ɛ/g,"\\unicode{0x025B}").replace(/Ɛ/g,"\\unicode{0x0190}").replace(/₸/g,"\\unicode{0x20B8}").replace(/₾/g,"\\unicode{0x20BE}").replace(/₪/g,"\\unicode{0x20AA}")}escapeUnsupportedUnicode$1.escapeUnsupportedUnicode=escapeUnsupportedUnicode;var fixUnicodeTextLayout$1={},textMeasurement={};Object.defineProperty(textMeasurement,"__esModule",{value:!0});textMeasurement.default={measureWidthInEms(t){var r,e;try{const i=document.createElement("span");i.innerText=t,i.style.position="absolute",i.style.visibility="hidden",i.style.left="-9999px",i.style.fontSize="100px",i.style.fontFamily="MJXZERO, serif",(r=document.body)===null||r===void 0||r.appendChild(i);const o=i.offsetWidth/100;return(e=i.parentNode)===null||e===void 0||e.removeChild(i),o}catch{return t.length}}};var __importDefault$v=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fixUnicodeTextLayout$1,"__esModule",{value:!0});fixUnicodeTextLayout$1.fixUnicodeTextLayout=void 0;const text_measurement_1=__importDefault$v(textMeasurement),tex_syntax_1$b=texSyntax,textNodes=`\\\\text(\\s*${(0,tex_syntax_1$b.block)(4)})`,currencySymbols="[¢\\u20a0-\\u20c0]",linebreaks="\\\\\\\\",linebreaksTextNodesAndCurrencySymbols=new RegExp(`(?:${linebreaks}|${textNodes}|${currencySymbols})`,"g");function fixUnicodeTextLayout(t){return t.replace(linebreaksTextNodesAndCurrencySymbols,(r,e)=>{if(r==="\\\\")return r;if(r.startsWith("\\text")){for(const n of r)if(isNonAsciiUnicode(n))return`{\\rlap{${r}\\hphantom.}\\phantom{\\text${replaceUnicodeWithSpacing(e)}}}`;return r}return`{\\rlap{${r}\\hphantom.}${equivalentSpacing(r)}}`})}fixUnicodeTextLayout$1.fixUnicodeTextLayout=fixUnicodeTextLayout;function replaceUnicodeWithSpacing(t){return t.replace(/[^\t\n\r\x20-\x7f]+/g,equivalentSpacing)}function equivalentSpacing(t){return`\\kern{${text_measurement_1.default.measureWidthInEms(t)}em}`}function isNonAsciiUnicode(t){const e=t.codePointAt(0);return e!=null&&e>127}var fixOverline$1={};Object.defineProperty(fixOverline$1,"__esModule",{value:!0});fixOverline$1.fixOverline=void 0;const tex_syntax_1$a=texSyntax,overlineWithMissingBraces=new RegExp(`(\\\\overline)(\\\\(?:text|${tex_syntax_1$a.color})${(0,tex_syntax_1$a.arg)(1)})`,"g");function fixOverline(t){return t.replace(overlineWithMissingBraces,"$1{$2}")}fixOverline$1.fixOverline=fixOverline;var fixXrightarrow$1={};Object.defineProperty(fixXrightarrow$1,"__esModule",{value:!0});fixXrightarrow$1.fixXrightarrow=void 0;const tex_syntax_1$9=texSyntax;function fixXrightarrow(t){const r=new RegExp(`(\\\\xrightarrow\\s*(?:\\[[^\\]]*]\\s*)?)(\\\\text${(0,tex_syntax_1$9.block)(0)})`,"g");return t.replace(r,"$1{$2}")}fixXrightarrow$1.fixXrightarrow=fixXrightarrow;var fixSpaceBlocks$1={};Object.defineProperty(fixSpaceBlocks$1,"__esModule",{value:!0});fixSpaceBlocks$1.fixSpaceBlocks=void 0;const tex_syntax_1$8=texSyntax;function fixSpaceBlocks(t){return t.replace(new RegExp(`\\\\space(${(0,tex_syntax_1$8.block)(0)})`,"g"),(r,e)=>" "+e.replace(new RegExp("[{}]","g"),""))}fixSpaceBlocks$1.fixSpaceBlocks=fixSpaceBlocks;var fixEllipsis$1={};Object.defineProperty(fixEllipsis$1,"__esModule",{value:!0});fixEllipsis$1.fixEllipsis=void 0;const tex_syntax_1$7=texSyntax;function fixEllipsis(t){return t.replace(new RegExp(`\\\\hphantom${(0,tex_syntax_1$7.arg)(4)}|\\\\bond${(0,tex_syntax_1$7.arg)(0)}|\\.\\.\\.`,"g"),r=>r==="..."?"\\unicode{0x2026}":r)}fixEllipsis$1.fixEllipsis=fixEllipsis;var fixHphantomEllipsis={};Object.defineProperty(fixHphantomEllipsis,"__esModule",{value:!0});fixHphantomEllipsis.fixHPhantomEllipsis=void 0;const tex_syntax_1$6=texSyntax;function fixHPhantomEllipsis(t){return t.replace(new RegExp(`\\\\hphantom${(0,tex_syntax_1$6.arg)(4)}`,"g"),r=>r.replace(/{\.}|\./g,e=>e==="."?"{.}":e))}fixHphantomEllipsis.fixHPhantomEllipsis=fixHPhantomEllipsis;var fixTextCaret$1={};Object.defineProperty(fixTextCaret$1,"__esModule",{value:!0});fixTextCaret$1.fixTextCaret=void 0;const tex_syntax_1$5=texSyntax,textWithBlockArg=new RegExp(`\\\\text(${(0,tex_syntax_1$5.block)(3)})`,"g");function fixCaretsInsideInnerBlock(t){return t.replace(/(\$[^$]*\$)|(\\\^[a-z])|([\\^])/g,r=>r==="^"?"\\unicode{0x005e}":r)}function fixTextCaret(t){return t.replace("\\dfrac{27}{25} \\text^2","\\dfrac{27}{25} \\text{^}2").replace("\\text ^+(aq)","\\text{^}+(aq)").replace(textWithBlockArg,(r,e)=>`\\text${fixCaretsInsideInnerBlock(e)}`)}fixTextCaret$1.fixTextCaret=fixTextCaret;var fixCommaInDimension$1={};Object.defineProperty(fixCommaInDimension$1,"__esModule",{value:!0});fixCommaInDimension$1.fixCommaInDimension=void 0;function fixCommaInDimension(t){return t.replace(/(\\\\\[[^\]{]*){,}/g,"$1,")}fixCommaInDimension$1.fixCommaInDimension=fixCommaInDimension;var fixUnderset$1={};Object.defineProperty(fixUnderset$1,"__esModule",{value:!0});fixUnderset$1.fixUnderset=void 0;const tex_syntax_1$4=texSyntax;function fixUnderset(t){return t.replace(new RegExp(`(\\\\underset${(0,tex_syntax_1$4.block)(1)})(\\\\redE\\s*${(0,tex_syntax_1$4.block)(2)})`,"g"),"$1{$2}")}fixUnderset$1.fixUnderset=fixUnderset;var fixRedHearts$1={};Object.defineProperty(fixRedHearts$1,"__esModule",{value:!0});fixRedHearts$1.fixRedHearts=void 0;function fixRedHearts(t){return t.replace(new RegExp("\\\\red\\s*♥","g"),"\\red{♥}")}fixRedHearts$1.fixRedHearts=fixRedHearts;var fixOneoffs$1={};Object.defineProperty(fixOneoffs$1,"__esModule",{value:!0});fixOneoffs$1.fixOneoffs=void 0;function fixOneoffs(t){return t.replace(/[\x00-\x08\v\f\x0e-\x1f\x7f]/g,"").replace(/\\text_/g,"\\text{\\_}").replace(/\\cancel\s*{\s*\\text{}\s*}/g,"").replace("\\text €","\\text{€}").replace(/^\\€/,"€").replace("\\textbf{x_0}","\\mathbf{x_0}").replace("\\overline{}2~367=2×q+r","2~367=2×q+r")}fixOneoffs$1.fixOneoffs=fixOneoffs;var fixTextIt$1={};Object.defineProperty(fixTextIt$1,"__esModule",{value:!0});fixTextIt$1.fixTextIt=void 0;const tex_syntax_1$3=texSyntax;function fixTextIt(t){return t.replace(new RegExp(`\\\\textit\\s*(${(0,tex_syntax_1$3.block)(4)})`,"g"),"\\text{\\it$1}")}fixTextIt$1.fixTextIt=fixTextIt;var fixEmptySqrt$1={};Object.defineProperty(fixEmptySqrt$1,"__esModule",{value:!0});fixEmptySqrt$1.fixEmptySqrt=void 0;function fixEmptySqrt(t){return t.replace(new RegExp("\\\\sqrt\\s*{\\s*}","g"),"\\sqrt{\\vphantom1}")}fixEmptySqrt$1.fixEmptySqrt=fixEmptySqrt;var fixBigBrackets$1={};Object.defineProperty(fixBigBrackets$1,"__esModule",{value:!0});fixBigBrackets$1.fixBigBrackets=void 0;function fixBigBrackets(t){return t.replace(new RegExp("\\\\Big\\s*⟨","g"),"\\Big<").replace(new RegExp("\\\\Big\\s*⟩","g"),"\\Big>")}fixBigBrackets$1.fixBigBrackets=fixBigBrackets;var escapeSquareBracketAfterBegin$1={};Object.defineProperty(escapeSquareBracketAfterBegin$1,"__esModule",{value:!0});escapeSquareBracketAfterBegin$1.escapeSquareBracketAfterBegin=void 0;function escapeSquareBracketAfterBegin(t){return t.replace(/(\\begin{[^}]*}\s*)\[/g,"$1{}[")}escapeSquareBracketAfterBegin$1.escapeSquareBracketAfterBegin=escapeSquareBracketAfterBegin;var fixTh$1={};Object.defineProperty(fixTh$1,"__esModule",{value:!0});fixTh$1.fixTh=void 0;function fixTh(t){return t.replace(new RegExp("\\\\th(\\s+|$)","g"),"\\text{th}$1")}fixTh$1.fixTh=fixTh;var fixBoxedInText$1={};Object.defineProperty(fixBoxedInText$1,"__esModule",{value:!0});fixBoxedInText$1.fixBoxedInText=void 0;function fixBoxedInText(t){return t.replace(new RegExp("\\\\text\\s*{\\s*([^}]*)}","g"),r=>r.replace(new RegExp("[$]?(\\\\boxed{[^}]*})","g"),e=>e.startsWith("$")?e:`$${e}$`))}fixBoxedInText$1.fixBoxedInText=fixBoxedInText;var fixDotsInText$1={};Object.defineProperty(fixDotsInText$1,"__esModule",{value:!0});fixDotsInText$1.fixDotsInText=void 0;function fixDotsInText(t){return t.replace(new RegExp("\\\\text\\s*{\\s*([^}]*)}","g"),r=>r.replace(new RegExp("[$]?\\\\dots","g"),e=>e.startsWith("$")?e:`$${e}$`))}fixDotsInText$1.fixDotsInText=fixDotsInText;var fixDoubleBackslashInColor$1={};Object.defineProperty(fixDoubleBackslashInColor$1,"__esModule",{value:!0});fixDoubleBackslashInColor$1.fixDoubleBackslashInColor=void 0;const tex_syntax_1$2=texSyntax,colorWithDoubleBackslashAtStart=new RegExp(`(\\\\${tex_syntax_1$2.color}\\{)\\\\\\\\`,"g");function fixDoubleBackslashInColor(t){return t.replace(colorWithDoubleBackslashAtStart,"$1")}fixDoubleBackslashInColor$1.fixDoubleBackslashInColor=fixDoubleBackslashInColor;var fixTextInColorbox$1={};Object.defineProperty(fixTextInColorbox$1,"__esModule",{value:!0});fixTextInColorbox$1.fixTextInColorbox=void 0;function fixTextInColorbox(t){return t.replace(/(\\colorbox\{[^}]*}\{)\\text /g,"$1")}fixTextInColorbox$1.fixTextInColorbox=fixTextInColorbox;var fixSubstackColors$1={};Object.defineProperty(fixSubstackColors$1,"__esModule",{value:!0});fixSubstackColors$1.fixSubstackColors=void 0;const tex_syntax_1$1=texSyntax;function fixSubstackColors(t){return t.match(new RegExp(`\\\\substack{\\s*\\\\${tex_syntax_1$1.color}{\\s*\\\\text`))?t.replace(new RegExp(`\\\\substack(${(0,tex_syntax_1$1.block)(3)})`,"g"),(r,e)=>`\\substack{${e.slice(1,-1).replace(new RegExp(`\\\\(${tex_syntax_1$1.color})(${(0,tex_syntax_1$1.block)(3)})`,"g"),(i,o,a)=>a.slice(1,-1).trim().startsWith("\\text")?a.slice(1,-1).replace(new RegExp(`\\\\text(${(0,tex_syntax_1$1.block)(3)})`,"g"),`\\text{\\${o}$1}`):i)}}`):t}fixSubstackColors$1.fixSubstackColors=fixSubstackColors;var fixUnicodeOutsideText$1={};Object.defineProperty(fixUnicodeOutsideText$1,"__esModule",{value:!0});fixUnicodeOutsideText$1.fixUnicodeOutsideText=void 0;const tex_syntax_1=texSyntax;function fixUnicodeOutsideText(t){return t.replace(textWithUnbracedLigatureUnicodeArg,"$1{$2}").replace(ligatureUnicodeInMathMode,r=>r[0]==="\\"?r:`\\text{${r}}`)}fixUnicodeOutsideText$1.fixUnicodeOutsideText=fixUnicodeOutsideText;const character=["\\p{sc=Deva}","\\u0964","\\p{sc=Beng}","\\p{sc=Guru}","\\p{sc=Gujr}","\\p{sc=Taml}","\\p{sc=Telu}","\\p{sc=Knda}","\\p{sc=Thai}","\\p{sc=Mymr}","\\p{sc=Khmr}"].join(""),textWithLigatures=`[${character}][\\s${character}]*`,fcolorbox=`\\\\fcolorbox${(0,tex_syntax_1.arg)(0)}${(0,tex_syntax_1.arg)(0)}${(0,tex_syntax_1.arg)(4)}`,colorbox=`\\\\colorbox${(0,tex_syntax_1.arg)(0)}${(0,tex_syntax_1.arg)(4)}`,otherTextModeCommand=`\\\\${tex_syntax_1.commandWithTextModeFirstArg}${(0,tex_syntax_1.arg)(4)}`,ligatureUnicodeInMathMode=new RegExp(`\\\\\\\\|${fcolorbox}|${colorbox}|${otherTextModeCommand}|${textWithLigatures}`,"ug"),textWithUnbracedLigatureUnicodeArg=new RegExp(`(\\\\text)\\s*([${character}]+)`,"ug");var fixAlignedPhantom$1={};Object.defineProperty(fixAlignedPhantom$1,"__esModule",{value:!0});fixAlignedPhantom$1.fixAlignedPhantom=void 0;function fixAlignedPhantom(t){return t.replace(/&\s*\\phantom\s*(=|\{\s*=\s*})/g,"&\\phantom{{}={}}")}fixAlignedPhantom$1.fixAlignedPhantom=fixAlignedPhantom;var fixSqrtSpacing$1={};Object.defineProperty(fixSqrtSpacing$1,"__esModule",{value:!0});fixSqrtSpacing$1.fixSqrtSpacing=void 0;function fixSqrtSpacing(t){return t.replace(/\\sqrt\[([^\]]*)]\{/g,"\\sqrt[$1]{\\vphantom{A}")}fixSqrtSpacing$1.fixSqrtSpacing=fixSqrtSpacing;Object.defineProperty(preprocessing,"__esModule",{value:!0});preprocessing.MathJaxPreprocessor=void 0;const replace_align_with_aligned_1=replaceAlignWithAligned$1,escape_text_symbols_1=escapeTextSymbols$1,fix_nested_cancel_commands_1=fixNestedCancelCommands$1,fix_stackrel_braces_1=fixStackrelBraces$1,fix_overset_braces_1=fixOversetBraces$1,fix_dfrac_braces_1=fixDfracBraces$1,fix_hat_braces_1=fixHatBraces$1,fix_sqrt_braces_1=fixSqrtBraces$1,fix_bold_1=fixBold$1,fix_colors_1=fixColors$1,remove_comments_in_color_blocks_1=removeCommentsInColorBlocks$1,fix_commands_with_missing_arg_1=fixCommandsWithMissingArg$1,fix_text_underscores_1=fixTextUnderscores$1,fix_text_1=fixText$1,fix_text_in_text_1=fixTextInText$1,fix_widehat_1=fixWidehat$1,fix_vec_braces_1=fixVecBraces$1,fix_underline_1=fixUnderline$1,fix_fbox_1=fixFbox$1,fix_overbrace_1=fixOverbrace,fix_linebreaks_1=fixLinebreaks$1,escape_unsupported_unicode_1=escapeUnsupportedUnicode$1,fix_unicode_text_layout_1=fixUnicodeTextLayout$1,fix_overline_1=fixOverline$1,fix_xrightarrow_1=fixXrightarrow$1,fix_space_blocks_1=fixSpaceBlocks$1,fix_ellipsis_1=fixEllipsis$1,fix_hphantom_ellipsis_1=fixHphantomEllipsis,fix_text_caret_1=fixTextCaret$1,fix_comma_in_dimension_1=fixCommaInDimension$1,fix_underset_1=fixUnderset$1,fix_red_hearts_1=fixRedHearts$1,fix_oneoffs_1=fixOneoffs$1,fix_text_it_1=fixTextIt$1,fix_empty_sqrt_1=fixEmptySqrt$1,fix_big_brackets_1=fixBigBrackets$1,escape_square_bracket_after_begin_1=escapeSquareBracketAfterBegin$1,fix_th_1=fixTh$1,fix_boxed_in_text_1=fixBoxedInText$1,fix_dots_in_text_1=fixDotsInText$1,fix_double_backslash_in_color_1=fixDoubleBackslashInColor$1,fix_text_in_colorbox_1=fixTextInColorbox$1,fix_substack_colors_1=fixSubstackColors$1,fix_unicode_outside_text_1=fixUnicodeOutsideText$1,fix_aligned_phantom_1=fixAlignedPhantom$1,fix_sqrt_spacing_1=fixSqrtSpacing$1,pipe=(...t)=>r=>t.reduce((e,n)=>n(e),r);class MathJaxPreprocessor{constructor({shouldFixUnicodeLayout:r}){this.preprocessTex=e=>{const n=this.fixNonstandardSyntax(e);return{normalizedTex:n,normalizedTexWithMathjaxWorkarounds:this.workAroundMathJaxDeficiencies(n)}},this.fixNonstandardSyntax=pipe(escape_text_symbols_1.escapeTextSymbols,fix_nested_cancel_commands_1.fixNestedCancelCommands,fix_stackrel_braces_1.fixStackrelBraces,fix_overset_braces_1.fixOversetBraces,fix_overbrace_1.fixOverbraces,fix_dfrac_braces_1.fixDfracBraces,fix_hat_braces_1.fixHatBraces,fix_sqrt_braces_1.fixSqrtBraces,fix_bold_1.fixBold,fix_text_in_text_1.fixTextInText,fix_fbox_1.fixFbox,fix_text_1.fixText,fix_unicode_outside_text_1.fixUnicodeOutsideText,fix_colors_1.fixColors,fix_commands_with_missing_arg_1.fixCommandsWithMissingArg,fix_widehat_1.fixWidehat,fix_vec_braces_1.fixVecBraces,fix_overline_1.fixOverline,fix_underline_1.fixUnderline,fix_text_underscores_1.fixTextUnderscores,fix_space_blocks_1.fixSpaceBlocks,fix_xrightarrow_1.fixXrightarrow,fix_ellipsis_1.fixEllipsis,fix_hphantom_ellipsis_1.fixHPhantomEllipsis,fix_text_caret_1.fixTextCaret,fix_comma_in_dimension_1.fixCommaInDimension,fix_underset_1.fixUnderset,fix_empty_sqrt_1.fixEmptySqrt,escape_square_bracket_after_begin_1.escapeSquareBracketAfterBegin,fix_red_hearts_1.fixRedHearts,fix_oneoffs_1.fixOneoffs,fix_text_it_1.fixTextIt,fix_big_brackets_1.fixBigBrackets,fix_th_1.fixTh,fix_boxed_in_text_1.fixBoxedInText,fix_dots_in_text_1.fixDotsInText,fix_double_backslash_in_color_1.fixDoubleBackslashInColor,fix_text_in_colorbox_1.fixTextInColorbox,fix_substack_colors_1.fixSubstackColors,fix_aligned_phantom_1.fixAlignedPhantom),this.workAroundMathJaxDeficiencies=pipe(replace_align_with_aligned_1.replaceAlignWithAligned,fix_linebreaks_1.fixLinebreaks,fix_sqrt_spacing_1.fixSqrtSpacing,e=>this.shouldFixUnicodeLayout?(0,fix_unicode_text_layout_1.fixUnicodeTextLayout)(e):e,escape_unsupported_unicode_1.escapeUnsupportedUnicode,remove_comments_in_color_blocks_1.removeCommentsInColorBlocks),this.shouldFixUnicodeLayout=r}}preprocessing.MathJaxPreprocessor=MathJaxPreprocessor;var postprocessing={},mergeAdjacentUnicodeTextNodes$1={};Object.defineProperty(mergeAdjacentUnicodeTextNodes$1,"__esModule",{value:!0});mergeAdjacentUnicodeTextNodes$1.mergeAdjacentUnicodeTextNodes=void 0;function appendTextContentOnto(t,r){t.firstChild instanceof Text&&r.firstChild instanceof Text&&t.firstChild.textContent!=null&&r.firstChild.textContent!=null&&(t.firstChild.textContent+=r.firstChild.textContent)}function mergeAdjacentUnicodeTextNodes(t){for(const r of t.querySelectorAll("mjx-mtext")){let e=null;const n=[];for(const i of r.childNodes)i instanceof HTMLElement&&i.tagName==="MJX-UTEXT"?e==null?e=i:(appendTextContentOnto(e,i),n.push(i)):e=null;for(const i of n)r.removeChild(i)}return t}mergeAdjacentUnicodeTextNodes$1.mergeAdjacentUnicodeTextNodes=mergeAdjacentUnicodeTextNodes;var addSelectableNode$1={};Object.defineProperty(addSelectableNode$1,"__esModule",{value:!0});addSelectableNode$1.swapSelectableElementForCopyableText=addSelectableNode$1.selectableTextElement=addSelectableNode$1.addSelectableNode=void 0;function addSelectableNode(t){const r=document.createElement("span");return r.className="mathjax-wrapper",r.appendChild(makeMathUnselectable(t)),r.appendChild(makeHiddenButCopyableNode()),r}addSelectableNode$1.addSelectableNode=addSelectableNode;function selectableTextElement(t){return t.querySelector(".mathjax-selectable > svg > text")}addSelectableNode$1.selectableTextElement=selectableTextElement;function swapSelectableElementForCopyableText(t,r){const e=t.querySelector("svg");if(e){const n=document.createElement("span");n.innerText=r,n.style.opacity="0",swap(e,n),t.style.backgroundColor="Highlight",setTimeout(()=>{swap(n,e),t.style.backgroundColor=""},0)}}addSelectableNode$1.swapSelectableElementForCopyableText=swapSelectableElementForCopyableText;function makeMathUnselectable(t){t.style.userSelect="none !important";const r=t.querySelector("math");return r==null||r.setAttribute("style","-webkit-user-select: none !important"),t}function makeHiddenButCopyableNode(){const r=document.createElement("span");r.className="mathjax-selectable",r.style.fontSize="20px",r.setAttribute("aria-hidden","true"),r.addEventListener("pointerdown",a=>{a.pointerType==="touch"&&a.preventDefault()});const i=`<svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 5 ${20*.7}"
        width="100%"
        height="100%"
        preserveAspectRatio="none"
        fill="transparent"
        stroke="transparent"
    ><text
        y="0"
        dominant-baseline="hanging"
        textlength="100%"
        lengthAdjust="spacingAndGlyphs"
    >&nbsp;</text></svg>`,o='<span class="copy-menu-hack">&#8205;</span>';return r.innerHTML=`${o}${i}`,r}function swap(t,r){t.insertAdjacentElement("beforebegin",r),t.remove()}Object.defineProperty(postprocessing,"__esModule",{value:!0});postprocessing.postprocessDom=void 0;const merge_adjacent_unicode_text_nodes_1=mergeAdjacentUnicodeTextNodes$1,add_selectable_node_1=addSelectableNode$1;function postprocessDom(t){return t=(0,merge_adjacent_unicode_text_nodes_1.mergeAdjacentUnicodeTextNodes)(t),t=(0,add_selectable_node_1.addSelectableNode)(t),t}postprocessing.postprocessDom=postprocessDom;var generalPurpose={};Object.defineProperty(generalPurpose,"__esModule",{value:!0});generalPurpose.lazy=generalPurpose.createSpanWithRedText=generalPurpose.convertCaughtValueToError=void 0;function convertCaughtValueToError(t){return t instanceof Error?t:new Error(String(t))}generalPurpose.convertCaughtValueToError=convertCaughtValueToError;function createSpanWithRedText(t){const r=document.createElement("span");return r.appendChild(document.createTextNode(t)),r.style.color="red",r}generalPurpose.createSpanWithRedText=createSpanWithRedText;function lazy(t){let r;return()=>(r==null&&(r=t()),r)}generalPurpose.lazy=lazy;var texInputConfig={},AmsConfiguration={},AmsItems={},__extends$d=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$3=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$3=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$3.apply(this,arguments)},__importDefault$u=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(AmsItems,"__esModule",{value:!0});AmsItems.FlalignItem=AmsItems.MultlineItem=void 0;var BaseItems_js_1$3=BaseItems,ParseUtil_js_1$9=__importDefault$u(requireParseUtil()),NodeUtil_js_1$7=__importDefault$u(NodeUtil$1),TexError_js_1$c=__importDefault$u(TexError$1),TexConstants_js_1$7=TexConstants,MultlineItem=function(t){__extends$d(r,t);function r(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var o=t.call(this,e)||this;return o.factory.configuration.tags.start("multline",!0,n[0]),o}return Object.defineProperty(r.prototype,"kind",{get:function(){return"multline"},enumerable:!1,configurable:!0}),r.prototype.EndEntry=function(){this.table.length&&ParseUtil_js_1$9.default.fixInitialMO(this.factory.configuration,this.nodes);var e=this.getProperty("shove"),n=this.create("node","mtd",this.nodes,e?{columnalign:e}:{});this.setProperty("shove",null),this.row.push(n),this.Clear()},r.prototype.EndRow=function(){if(this.row.length!==1)throw new TexError_js_1$c.default("MultlineRowsOneCol","The rows within the %1 environment must have exactly one column","multline");var e=this.create("node","mtr",this.row);this.table.push(e),this.row=[]},r.prototype.EndTable=function(){if(t.prototype.EndTable.call(this),this.table.length){var e=this.table.length-1,n=-1;NodeUtil_js_1$7.default.getAttribute(NodeUtil_js_1$7.default.getChildren(this.table[0])[0],"columnalign")||NodeUtil_js_1$7.default.setAttribute(NodeUtil_js_1$7.default.getChildren(this.table[0])[0],"columnalign",TexConstants_js_1$7.TexConstant.Align.LEFT),NodeUtil_js_1$7.default.getAttribute(NodeUtil_js_1$7.default.getChildren(this.table[e])[0],"columnalign")||NodeUtil_js_1$7.default.setAttribute(NodeUtil_js_1$7.default.getChildren(this.table[e])[0],"columnalign",TexConstants_js_1$7.TexConstant.Align.RIGHT);var i=this.factory.configuration.tags.getTag();if(i){n=this.arraydef.side===TexConstants_js_1$7.TexConstant.Align.LEFT?0:this.table.length-1;var o=this.table[n],a=this.create("node","mlabeledtr",[i].concat(NodeUtil_js_1$7.default.getChildren(o)));NodeUtil_js_1$7.default.copyAttributes(o,a),this.table[n]=a}}this.factory.configuration.tags.end()},r}(BaseItems_js_1$3.ArrayItem);AmsItems.MultlineItem=MultlineItem;var FlalignItem=function(t){__extends$d(r,t);function r(e,n,i,o,a){var s=t.call(this,e)||this;return s.name=n,s.numbered=i,s.padded=o,s.center=a,s.factory.configuration.tags.start(n,i,i),s}return Object.defineProperty(r.prototype,"kind",{get:function(){return"flalign"},enumerable:!1,configurable:!0}),r.prototype.EndEntry=function(){t.prototype.EndEntry.call(this);var e=this.getProperty("xalignat");if(e&&this.row.length>e)throw new TexError_js_1$c.default("XalignOverflow","Extra %1 in row of %2","&",this.name)},r.prototype.EndRow=function(){for(var e,n=this.row,i=this.getProperty("xalignat");n.length<i;)n.push(this.create("node","mtd"));for(this.row=[],this.padded&&this.row.push(this.create("node","mtd"));e=n.shift();)this.row.push(e),e=n.shift(),e&&this.row.push(e),(n.length||this.padded)&&this.row.push(this.create("node","mtd"));this.row.length>this.maxrow&&(this.maxrow=this.row.length),t.prototype.EndRow.call(this);var o=this.table[this.table.length-1];if(this.getProperty("zeroWidthLabel")&&o.isKind("mlabeledtr")){var a=NodeUtil_js_1$7.default.getChildren(o)[0],s=this.factory.configuration.options.tagSide,l=__assign$3({width:0},s==="right"?{lspace:"-1width"}:{}),c=this.create("node","mpadded",NodeUtil_js_1$7.default.getChildren(a),l);a.setChildren([c])}},r.prototype.EndTable=function(){if(t.prototype.EndTable.call(this),this.center&&this.maxrow<=2){var e=this.arraydef;delete e.width,delete this.global.indentalign}},r}(BaseItems_js_1$3.EqnArrayItem);AmsItems.FlalignItem=FlalignItem;var AmsMethods={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__assign||function(){return r=Object.assign||function(_){for(var y,g=1,v=arguments.length;g<v;g++){y=arguments[g];for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(_[x]=y[x])}return _},r.apply(this,arguments)},e=commonjsGlobal&&commonjsGlobal.__read||function(_,y){var g=typeof Symbol=="function"&&_[Symbol.iterator];if(!g)return _;var v=g.call(_),x,b=[],S;try{for(;(y===void 0||y-- >0)&&!(x=v.next()).done;)b.push(x.value)}catch(M){S={error:M}}finally{try{x&&!x.done&&(g=v.return)&&g.call(v)}finally{if(S)throw S.error}}return b},n=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(t,"__esModule",{value:!0}),t.NEW_OPS=t.AmsMethods=void 0;var i=n(requireParseUtil()),o=n(ParseMethods$1),a=n(NodeUtil$1),s=TexConstants,l=n(requireTexParser()),c=n(TexError$1),f=_Symbol,d=n(BaseMethods$1),u=MmlNode;t.AmsMethods={},t.AmsMethods.AmsEqnArray=function(_,y,g,v,x,b,S){var M=_.GetBrackets("\\begin{"+y.getName()+"}"),C=d.default.EqnArray(_,y,g,v,x,b,S);return i.default.setArrayAlign(C,M)},t.AmsMethods.AlignAt=function(_,y,g,v){var x=y.getName(),b,S,M="",C=[];if(v||(S=_.GetBrackets("\\begin{"+x+"}")),b=_.GetArgument("\\begin{"+x+"}"),b.match(/[^0-9]/))throw new c.default("PositiveIntegerArg","Argument to %1 must me a positive integer","\\begin{"+x+"}");for(var A=parseInt(b,10);A>0;)M+="rl",C.push("0em 0em"),A--;var E=C.join(" ");if(v)return t.AmsMethods.EqnArray(_,y,g,v,M,E);var $=t.AmsMethods.EqnArray(_,y,g,v,M,E);return i.default.setArrayAlign($,S)},t.AmsMethods.Multline=function(_,y,g){_.Push(y),i.default.checkEqnEnv(_);var v=_.itemFactory.create("multline",g,_.stack);return v.arraydef={displaystyle:!0,rowspacing:".5em",columnspacing:"100%",width:_.options.ams.multlineWidth,side:_.options.tagSide,minlabelspacing:_.options.tagIndent,framespacing:_.options.ams.multlineIndent+" 0",frame:"","data-width-includes-label":!0},v},t.AmsMethods.XalignAt=function(_,y,g,v){var x=_.GetArgument("\\begin{"+y.getName()+"}");if(x.match(/[^0-9]/))throw new c.default("PositiveIntegerArg","Argument to %1 must me a positive integer","\\begin{"+y.getName()+"}");var b=v?"crl":"rlc",S=v?"fit auto auto":"auto auto fit",M=t.AmsMethods.FlalignArray(_,y,g,v,!1,b,S,!0);return M.setProperty("xalignat",2*parseInt(x)),M},t.AmsMethods.FlalignArray=function(_,y,g,v,x,b,S,M){M===void 0&&(M=!1),_.Push(y),i.default.checkEqnEnv(_),b=b.split("").join(" ").replace(/r/g,"right").replace(/l/g,"left").replace(/c/g,"center");var C=_.itemFactory.create("flalign",y.getName(),g,v,x,_.stack);return C.arraydef={width:"100%",displaystyle:!0,columnalign:b,columnspacing:"0em",columnwidth:S,rowspacing:"3pt",side:_.options.tagSide,minlabelspacing:M?"0":_.options.tagIndent,"data-width-includes-label":!0},C.setProperty("zeroWidthLabel",M),C},t.NEW_OPS="ams-declare-ops",t.AmsMethods.HandleDeclareOp=function(_,y){var g=_.GetStar()?"*":"",v=i.default.trimSpaces(_.GetArgument(y));v.charAt(0)==="\\"&&(v=v.substr(1));var x=_.GetArgument(y);_.configuration.handlers.retrieve(t.NEW_OPS).add(v,new f.Macro(v,t.AmsMethods.Macro,["\\operatorname".concat(g,"{").concat(x,"}")]))},t.AmsMethods.HandleOperatorName=function(_,y){var g=_.GetStar(),v=i.default.trimSpaces(_.GetArgument(y)),x=new l.default(v,r(r({},_.stack.env),{font:s.TexConstant.Variant.NORMAL,multiLetterIdentifiers:/^[-*a-z]+/i,operatorLetters:!0}),_.configuration).mml();if(x.isKind("mi")||(x=_.create("node","TeXAtom",[x])),a.default.setProperties(x,{movesupsub:g,movablelimits:!0,texClass:u.TEXCLASS.OP}),!g){var b=_.GetNext(),S=_.i;b==="\\"&&++_.i&&_.GetCS()!=="limits"&&(_.i=S)}_.Push(x)},t.AmsMethods.SideSet=function(_,y){var g=e(m(_.ParseArg(y)),2),v=g[0],x=g[1],b=e(m(_.ParseArg(y)),2),S=b[0],M=b[1],C=_.ParseArg(y),A=C;v&&(x?v.replaceChild(_.create("node","mphantom",[_.create("node","mpadded",[i.default.copyNode(C,_)],{width:0})]),a.default.getChildAt(v,0)):(A=_.create("node","mmultiscripts",[C]),S&&a.default.appendChildren(A,[a.default.getChildAt(S,1)||_.create("node","none"),a.default.getChildAt(S,2)||_.create("node","none")]),a.default.setProperty(A,"scriptalign","left"),a.default.appendChildren(A,[_.create("node","mprescripts"),a.default.getChildAt(v,1)||_.create("node","none"),a.default.getChildAt(v,2)||_.create("node","none")]))),S&&A===C&&(S.replaceChild(C,a.default.getChildAt(S,0)),A=S);var E=_.create("node","TeXAtom",[],{texClass:u.TEXCLASS.OP,movesupsub:!0,movablelimits:!0});x&&(v&&E.appendChild(v),E.appendChild(x)),E.appendChild(A),M&&E.appendChild(M),_.Push(E)};function m(_){if(!_||_.isInferred&&_.childNodes.length===0)return[null,null];if(_.isKind("msubsup")&&p(_))return[_,null];var y=a.default.getChildAt(_,0);return _.isInferred&&y&&p(y)?(_.childNodes.splice(0,1),[y,_]):[null,_]}function p(_){var y=_.childNodes[0];return y&&y.isKind("mi")&&y.getText()===""}t.AmsMethods.operatorLetter=function(_,y){return _.stack.env.operatorLetters?o.default.variable(_,y):!1},t.AmsMethods.MultiIntegral=function(_,y,g){var v=_.GetNext();if(v==="\\"){var x=_.i;v=_.GetArgument(y),_.i=x,v==="\\limits"&&(y==="\\idotsint"?g="\\!\\!\\mathop{\\,\\,"+g+"}":g="\\!\\!\\!\\mathop{\\,\\,\\,"+g+"}")}_.string=g+" "+_.string.slice(_.i),_.i=0},t.AmsMethods.xArrow=function(_,y,g,v,x){var b={width:"+"+i.default.Em((v+x)/18),lspace:i.default.Em(v/18)},S=_.GetBrackets(y),M=_.ParseArg(y),C=_.create("node","mspace",[],{depth:".25em"}),A=_.create("token","mo",{stretchy:!0,texClass:u.TEXCLASS.REL},String.fromCodePoint(g));A=_.create("node","mstyle",[A],{scriptlevel:0});var E=_.create("node","munderover",[A]),$=_.create("node","mpadded",[M,C],b);if(a.default.setAttribute($,"voffset","-.2em"),a.default.setAttribute($,"height","-.2em"),a.default.setChild(E,E.over,$),S){var D=new l.default(S,_.stack.env,_.configuration).mml(),B=_.create("node","mspace",[],{height:".75em"});$=_.create("node","mpadded",[D,B],b),a.default.setAttribute($,"voffset",".15em"),a.default.setAttribute($,"depth","-.15em"),a.default.setChild(E,E.under,$)}a.default.setProperty(E,"subsupOK",!0),_.Push(E)},t.AmsMethods.HandleShove=function(_,y,g){var v=_.stack.Top();if(v.kind!=="multline")throw new c.default("CommandOnlyAllowedInEnv","%1 only allowed in %2 environment",_.currentCS,"multline");if(v.Size())throw new c.default("CommandAtTheBeginingOfLine","%1 must come at the beginning of the line",_.currentCS);v.setProperty("shove",g)},t.AmsMethods.CFrac=function(_,y){var g=i.default.trimSpaces(_.GetBrackets(y,"")),v=_.GetArgument(y),x=_.GetArgument(y),b={l:s.TexConstant.Align.LEFT,r:s.TexConstant.Align.RIGHT,"":""},S=new l.default("\\strut\\textstyle{"+v+"}",_.stack.env,_.configuration).mml(),M=new l.default("\\strut\\textstyle{"+x+"}",_.stack.env,_.configuration).mml(),C=_.create("node","mfrac",[S,M]);if(g=b[g],g==null)throw new c.default("IllegalAlign","Illegal alignment specified in %1",_.currentCS);g&&a.default.setProperties(C,{numalign:g,denomalign:g}),_.Push(C)},t.AmsMethods.Genfrac=function(_,y,g,v,x,b){g==null&&(g=_.GetDelimiterArg(y)),v==null&&(v=_.GetDelimiterArg(y)),x==null&&(x=_.GetArgument(y)),b==null&&(b=i.default.trimSpaces(_.GetArgument(y)));var S=_.ParseArg(y),M=_.ParseArg(y),C=_.create("node","mfrac",[S,M]);if(x!==""&&a.default.setAttribute(C,"linethickness",x),(g||v)&&(a.default.setProperty(C,"withDelims",!0),C=i.default.fixedFence(_.configuration,g,C,v)),b!==""){var A=parseInt(b,10),E=["D","T","S","SS"][A];if(E==null)throw new c.default("BadMathStyleFor","Bad math style for %1",_.currentCS);C=_.create("node","mstyle",[C]),E==="D"?a.default.setProperties(C,{displaystyle:!0,scriptlevel:0}):a.default.setProperties(C,{displaystyle:!1,scriptlevel:A-1})}_.Push(C)},t.AmsMethods.HandleTag=function(_,y){if(!_.tags.currentTag.taggable&&_.tags.env)throw new c.default("CommandNotAllowedInEnv","%1 not allowed in %2 environment",_.currentCS,_.tags.env);if(_.tags.currentTag.tag)throw new c.default("MultipleCommand","Multiple %1",_.currentCS);var g=_.GetStar(),v=i.default.trimSpaces(_.GetArgument(y));_.tags.tag(v,g)},t.AmsMethods.HandleNoTag=d.default.HandleNoTag,t.AmsMethods.HandleRef=d.default.HandleRef,t.AmsMethods.Macro=d.default.Macro,t.AmsMethods.Accent=d.default.Accent,t.AmsMethods.Tilde=d.default.Tilde,t.AmsMethods.Array=d.default.Array,t.AmsMethods.Spacer=d.default.Spacer,t.AmsMethods.NamedOp=d.default.NamedOp,t.AmsMethods.EqnArray=d.default.EqnArray,t.AmsMethods.Equation=d.default.Equation})(AmsMethods);var __createBinding$5=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,r,e,n){n===void 0&&(n=e);var i=Object.getOwnPropertyDescriptor(r,e);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,i)}:function(t,r,e,n){n===void 0&&(n=e),t[n]=r[e]}),__setModuleDefault$5=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),__importStar$5=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var e in t)e!=="default"&&Object.prototype.hasOwnProperty.call(t,e)&&__createBinding$5(r,t,e);return __setModuleDefault$5(r,t),r},__importDefault$t=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},AmsMethods_js_1$2=AmsMethods,sm$3=__importStar$5(SymbolMap),TexConstants_js_1$6=TexConstants,ParseMethods_js_1$5=__importDefault$t(ParseMethods$1),ParseUtil_js_1$8=__importDefault$t(requireParseUtil()),MmlNode_js_1$6=MmlNode,lengths_js_1$1=lengths;new sm$3.CharacterMap("AMSmath-mathchar0mo",ParseMethods_js_1$5.default.mathchar0mo,{iiiint:["⨌",{texClass:MmlNode_js_1$6.TEXCLASS.OP}]});new sm$3.RegExpMap("AMSmath-operatorLetter",AmsMethods_js_1$2.AmsMethods.operatorLetter,/[-*]/i);new sm$3.CommandMap("AMSmath-macros",{mathring:["Accent","02DA"],nobreakspace:"Tilde",negmedspace:["Spacer",lengths_js_1$1.MATHSPACE.negativemediummathspace],negthickspace:["Spacer",lengths_js_1$1.MATHSPACE.negativethickmathspace],idotsint:["MultiIntegral","\\int\\cdots\\int"],dddot:["Accent","20DB"],ddddot:["Accent","20DC"],sideset:"SideSet",boxed:["Macro","\\fbox{$\\displaystyle{#1}$}",1],tag:"HandleTag",notag:"HandleNoTag",eqref:["HandleRef",!0],substack:["Macro","\\begin{subarray}{c}#1\\end{subarray}",1],injlim:["NamedOp","inj&thinsp;lim"],projlim:["NamedOp","proj&thinsp;lim"],varliminf:["Macro","\\mathop{\\underline{\\mmlToken{mi}{lim}}}"],varlimsup:["Macro","\\mathop{\\overline{\\mmlToken{mi}{lim}}}"],varinjlim:["Macro","\\mathop{\\underrightarrow{\\mmlToken{mi}{lim}}}"],varprojlim:["Macro","\\mathop{\\underleftarrow{\\mmlToken{mi}{lim}}}"],DeclareMathOperator:"HandleDeclareOp",operatorname:"HandleOperatorName",genfrac:"Genfrac",frac:["Genfrac","","","",""],tfrac:["Genfrac","","","","1"],dfrac:["Genfrac","","","","0"],binom:["Genfrac","(",")","0",""],tbinom:["Genfrac","(",")","0","1"],dbinom:["Genfrac","(",")","0","0"],cfrac:"CFrac",shoveleft:["HandleShove",TexConstants_js_1$6.TexConstant.Align.LEFT],shoveright:["HandleShove",TexConstants_js_1$6.TexConstant.Align.RIGHT],xrightarrow:["xArrow",8594,5,10],xleftarrow:["xArrow",8592,10,5]},AmsMethods_js_1$2.AmsMethods);new sm$3.EnvironmentMap("AMSmath-environment",ParseMethods_js_1$5.default.environment,{"equation*":["Equation",null,!1],"eqnarray*":["EqnArray",null,!1,!0,"rcl",ParseUtil_js_1$8.default.cols(0,lengths_js_1$1.MATHSPACE.thickmathspace),".5em"],align:["EqnArray",null,!0,!0,"rl",ParseUtil_js_1$8.default.cols(0,2)],"align*":["EqnArray",null,!1,!0,"rl",ParseUtil_js_1$8.default.cols(0,2)],multline:["Multline",null,!0],"multline*":["Multline",null,!1],split:["EqnArray",null,!1,!1,"rl",ParseUtil_js_1$8.default.cols(0)],gather:["EqnArray",null,!0,!0,"c"],"gather*":["EqnArray",null,!1,!0,"c"],alignat:["AlignAt",null,!0,!0],"alignat*":["AlignAt",null,!1,!0],alignedat:["AlignAt",null,!1,!1],aligned:["AmsEqnArray",null,null,null,"rl",ParseUtil_js_1$8.default.cols(0,2),".5em","D"],gathered:["AmsEqnArray",null,null,null,"c",null,".5em","D"],xalignat:["XalignAt",null,!0,!0],"xalignat*":["XalignAt",null,!1,!0],xxalignat:["XalignAt",null,!1,!1],flalign:["FlalignArray",null,!0,!1,!0,"rlc","auto auto fit"],"flalign*":["FlalignArray",null,!1,!1,!0,"rlc","auto auto fit"],subarray:["Array",null,null,null,null,ParseUtil_js_1$8.default.cols(0),"0.1em","S",1],smallmatrix:["Array",null,null,null,"c",ParseUtil_js_1$8.default.cols(1/3),".2em","S",1],matrix:["Array",null,null,null,"c"],pmatrix:["Array",null,"(",")","c"],bmatrix:["Array",null,"[","]","c"],Bmatrix:["Array",null,"\\{","\\}","c"],vmatrix:["Array",null,"\\vert","\\vert","c"],Vmatrix:["Array",null,"\\Vert","\\Vert","c"],cases:["Array",null,"\\{",".","ll",null,".2em","T"]},AmsMethods_js_1$2.AmsMethods);new sm$3.DelimiterMap("AMSmath-delimiter",ParseMethods_js_1$5.default.delimiter,{"\\lvert":["|",{texClass:MmlNode_js_1$6.TEXCLASS.OPEN}],"\\rvert":["|",{texClass:MmlNode_js_1$6.TEXCLASS.CLOSE}],"\\lVert":["‖",{texClass:MmlNode_js_1$6.TEXCLASS.OPEN}],"\\rVert":["‖",{texClass:MmlNode_js_1$6.TEXCLASS.CLOSE}]});new sm$3.CharacterMap("AMSsymbols-mathchar0mi",ParseMethods_js_1$5.default.mathchar0mi,{digamma:"ϝ",varkappa:"ϰ",varGamma:["Γ",{mathvariant:TexConstants_js_1$6.TexConstant.Variant.ITALIC}],varDelta:["Δ",{mathvariant:TexConstants_js_1$6.TexConstant.Variant.ITALIC}],varTheta:["Θ",{mathvariant:TexConstants_js_1$6.TexConstant.Variant.ITALIC}],varLambda:["Λ",{mathvariant:TexConstants_js_1$6.TexConstant.Variant.ITALIC}],varXi:["Ξ",{mathvariant:TexConstants_js_1$6.TexConstant.Variant.ITALIC}],varPi:["Π",{mathvariant:TexConstants_js_1$6.TexConstant.Variant.ITALIC}],varSigma:["Σ",{mathvariant:TexConstants_js_1$6.TexConstant.Variant.ITALIC}],varUpsilon:["Υ",{mathvariant:TexConstants_js_1$6.TexConstant.Variant.ITALIC}],varPhi:["Φ",{mathvariant:TexConstants_js_1$6.TexConstant.Variant.ITALIC}],varPsi:["Ψ",{mathvariant:TexConstants_js_1$6.TexConstant.Variant.ITALIC}],varOmega:["Ω",{mathvariant:TexConstants_js_1$6.TexConstant.Variant.ITALIC}],beth:"ℶ",gimel:"ℷ",daleth:"ℸ",backprime:["‵",{variantForm:!0}],hslash:"ℏ",varnothing:["∅",{variantForm:!0}],blacktriangle:"▴",triangledown:["▽",{variantForm:!0}],blacktriangledown:"▾",square:"◻",Box:"◻",blacksquare:"◼",lozenge:"◊",Diamond:"◊",blacklozenge:"⧫",circledS:["Ⓢ",{mathvariant:TexConstants_js_1$6.TexConstant.Variant.NORMAL}],bigstar:"★",sphericalangle:"∢",measuredangle:"∡",nexists:"∄",complement:"∁",mho:"℧",eth:["ð",{mathvariant:TexConstants_js_1$6.TexConstant.Variant.NORMAL}],Finv:"Ⅎ",diagup:"╱",Game:"⅁",diagdown:"╲",Bbbk:["k",{mathvariant:TexConstants_js_1$6.TexConstant.Variant.DOUBLESTRUCK}],yen:"¥",circledR:"®",checkmark:"✓",maltese:"✠"});new sm$3.CharacterMap("AMSsymbols-mathchar0mo",ParseMethods_js_1$5.default.mathchar0mo,{dotplus:"∔",ltimes:"⋉",smallsetminus:["∖",{variantForm:!0}],rtimes:"⋊",Cap:"⋒",doublecap:"⋒",leftthreetimes:"⋋",Cup:"⋓",doublecup:"⋓",rightthreetimes:"⋌",barwedge:"⊼",curlywedge:"⋏",veebar:"⊻",curlyvee:"⋎",doublebarwedge:"⩞",boxminus:"⊟",circleddash:"⊝",boxtimes:"⊠",circledast:"⊛",boxdot:"⊡",circledcirc:"⊚",boxplus:"⊞",centerdot:["⋅",{variantForm:!0}],divideontimes:"⋇",intercal:"⊺",leqq:"≦",geqq:"≧",leqslant:"⩽",geqslant:"⩾",eqslantless:"⪕",eqslantgtr:"⪖",lesssim:"≲",gtrsim:"≳",lessapprox:"⪅",gtrapprox:"⪆",approxeq:"≊",lessdot:"⋖",gtrdot:"⋗",lll:"⋘",llless:"⋘",ggg:"⋙",gggtr:"⋙",lessgtr:"≶",gtrless:"≷",lesseqgtr:"⋚",gtreqless:"⋛",lesseqqgtr:"⪋",gtreqqless:"⪌",doteqdot:"≑",Doteq:"≑",eqcirc:"≖",risingdotseq:"≓",circeq:"≗",fallingdotseq:"≒",triangleq:"≜",backsim:"∽",thicksim:["∼",{variantForm:!0}],backsimeq:"⋍",thickapprox:["≈",{variantForm:!0}],subseteqq:"⫅",supseteqq:"⫆",Subset:"⋐",Supset:"⋑",sqsubset:"⊏",sqsupset:"⊐",preccurlyeq:"≼",succcurlyeq:"≽",curlyeqprec:"⋞",curlyeqsucc:"⋟",precsim:"≾",succsim:"≿",precapprox:"⪷",succapprox:"⪸",vartriangleleft:"⊲",lhd:"⊲",vartriangleright:"⊳",rhd:"⊳",trianglelefteq:"⊴",unlhd:"⊴",trianglerighteq:"⊵",unrhd:"⊵",vDash:["⊨",{variantForm:!0}],Vdash:"⊩",Vvdash:"⊪",smallsmile:["⌣",{variantForm:!0}],shortmid:["∣",{variantForm:!0}],smallfrown:["⌢",{variantForm:!0}],shortparallel:["∥",{variantForm:!0}],bumpeq:"≏",between:"≬",Bumpeq:"≎",pitchfork:"⋔",varpropto:["∝",{variantForm:!0}],backepsilon:"∍",blacktriangleleft:"◂",blacktriangleright:"▸",therefore:"∴",because:"∵",eqsim:"≂",vartriangle:["△",{variantForm:!0}],Join:"⋈",nless:"≮",ngtr:"≯",nleq:"≰",ngeq:"≱",nleqslant:["⪇",{variantForm:!0}],ngeqslant:["⪈",{variantForm:!0}],nleqq:["≰",{variantForm:!0}],ngeqq:["≱",{variantForm:!0}],lneq:"⪇",gneq:"⪈",lneqq:"≨",gneqq:"≩",lvertneqq:["≨",{variantForm:!0}],gvertneqq:["≩",{variantForm:!0}],lnsim:"⋦",gnsim:"⋧",lnapprox:"⪉",gnapprox:"⪊",nprec:"⊀",nsucc:"⊁",npreceq:["⋠",{variantForm:!0}],nsucceq:["⋡",{variantForm:!0}],precneqq:"⪵",succneqq:"⪶",precnsim:"⋨",succnsim:"⋩",precnapprox:"⪹",succnapprox:"⪺",nsim:"≁",ncong:"≇",nshortmid:["∤",{variantForm:!0}],nshortparallel:["∦",{variantForm:!0}],nmid:"∤",nparallel:"∦",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",ntriangleleft:"⋪",ntriangleright:"⋫",ntrianglelefteq:"⋬",ntrianglerighteq:"⋭",nsubseteq:"⊈",nsupseteq:"⊉",nsubseteqq:["⊈",{variantForm:!0}],nsupseteqq:["⊉",{variantForm:!0}],subsetneq:"⊊",supsetneq:"⊋",varsubsetneq:["⊊",{variantForm:!0}],varsupsetneq:["⊋",{variantForm:!0}],subsetneqq:"⫋",supsetneqq:"⫌",varsubsetneqq:["⫋",{variantForm:!0}],varsupsetneqq:["⫌",{variantForm:!0}],leftleftarrows:"⇇",rightrightarrows:"⇉",leftrightarrows:"⇆",rightleftarrows:"⇄",Lleftarrow:"⇚",Rrightarrow:"⇛",twoheadleftarrow:"↞",twoheadrightarrow:"↠",leftarrowtail:"↢",rightarrowtail:"↣",looparrowleft:"↫",looparrowright:"↬",leftrightharpoons:"⇋",rightleftharpoons:["⇌",{variantForm:!0}],curvearrowleft:"↶",curvearrowright:"↷",circlearrowleft:"↺",circlearrowright:"↻",Lsh:"↰",Rsh:"↱",upuparrows:"⇈",downdownarrows:"⇊",upharpoonleft:"↿",upharpoonright:"↾",downharpoonleft:"⇃",restriction:"↾",multimap:"⊸",downharpoonright:"⇂",leftrightsquigarrow:"↭",rightsquigarrow:"⇝",leadsto:"⇝",dashrightarrow:"⇢",dashleftarrow:"⇠",nleftarrow:"↚",nrightarrow:"↛",nLeftarrow:"⇍",nRightarrow:"⇏",nleftrightarrow:"↮",nLeftrightarrow:"⇎"});new sm$3.DelimiterMap("AMSsymbols-delimiter",ParseMethods_js_1$5.default.delimiter,{"\\ulcorner":"⌜","\\urcorner":"⌝","\\llcorner":"⌞","\\lrcorner":"⌟"});new sm$3.CommandMap("AMSsymbols-macros",{implies:["Macro","\\;\\Longrightarrow\\;"],impliedby:["Macro","\\;\\Longleftarrow\\;"]},AmsMethods_js_1$2.AmsMethods);var __extends$c=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),_a$6;Object.defineProperty(AmsConfiguration,"__esModule",{value:!0});AmsConfiguration.AmsConfiguration=AmsConfiguration.AmsTags=void 0;var Configuration_js_1$i=Configuration,AmsItems_js_1$1=AmsItems,Tags_js_1$3=Tags,AmsMethods_js_1$1=AmsMethods,SymbolMap_js_1$e=SymbolMap,AmsTags=function(t){__extends$c(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}(Tags_js_1$3.AbstractTags);AmsConfiguration.AmsTags=AmsTags;var init$1=function(t){new SymbolMap_js_1$e.CommandMap(AmsMethods_js_1$1.NEW_OPS,{},{}),t.append(Configuration_js_1$i.Configuration.local({handler:{macro:[AmsMethods_js_1$1.NEW_OPS]},priority:-1}))};AmsConfiguration.AmsConfiguration=Configuration_js_1$i.Configuration.create("ams",{handler:{character:["AMSmath-operatorLetter"],delimiter:["AMSsymbols-delimiter","AMSmath-delimiter"],macro:["AMSsymbols-mathchar0mi","AMSsymbols-mathchar0mo","AMSsymbols-delimiter","AMSsymbols-macros","AMSmath-mathchar0mo","AMSmath-macros","AMSmath-delimiter"],environment:["AMSmath-environment"]},items:(_a$6={},_a$6[AmsItems_js_1$1.MultlineItem.prototype.kind]=AmsItems_js_1$1.MultlineItem,_a$6[AmsItems_js_1$1.FlalignItem.prototype.kind]=AmsItems_js_1$1.FlalignItem,_a$6),tags:{ams:AmsTags},init:init$1,config:function(t,r){r.parseOptions.options.multlineWidth&&(r.parseOptions.options.ams.multlineWidth=r.parseOptions.options.multlineWidth),delete r.parseOptions.options.multlineWidth},options:{multlineWidth:"",ams:{multlineWidth:"100%",multlineIndent:"1em"}}});var BoldsymbolConfiguration={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__values||function(d){var u=typeof Symbol=="function"&&Symbol.iterator,m=u&&d[u],p=0;if(m)return m.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&p>=d.length&&(d=void 0),{value:d&&d[p++],done:!d}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")},e=commonjsGlobal&&commonjsGlobal.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.BoldsymbolConfiguration=t.rewriteBoldTokens=t.createBoldToken=t.BoldsymbolMethods=void 0;var n=Configuration,i=e(NodeUtil$1),o=TexConstants,a=SymbolMap,s=NodeFactory$1,l={};l[o.TexConstant.Variant.NORMAL]=o.TexConstant.Variant.BOLD,l[o.TexConstant.Variant.ITALIC]=o.TexConstant.Variant.BOLDITALIC,l[o.TexConstant.Variant.FRAKTUR]=o.TexConstant.Variant.BOLDFRAKTUR,l[o.TexConstant.Variant.SCRIPT]=o.TexConstant.Variant.BOLDSCRIPT,l[o.TexConstant.Variant.SANSSERIF]=o.TexConstant.Variant.BOLDSANSSERIF,l["-tex-calligraphic"]="-tex-bold-calligraphic",l["-tex-oldstyle"]="-tex-bold-oldstyle",l["-tex-mathit"]=o.TexConstant.Variant.BOLDITALIC,t.BoldsymbolMethods={},t.BoldsymbolMethods.Boldsymbol=function(d,u){var m=d.stack.env.boldsymbol;d.stack.env.boldsymbol=!0;var p=d.ParseArg(u);d.stack.env.boldsymbol=m,d.Push(p)},new a.CommandMap("boldsymbol",{boldsymbol:"Boldsymbol"},t.BoldsymbolMethods);function c(d,u,m,p){var _=s.NodeFactory.createToken(d,u,m,p);return u!=="mtext"&&d.configuration.parser.stack.env.boldsymbol&&(i.default.setProperty(_,"fixBold",!0),d.configuration.addNode("fixBold",_)),_}t.createBoldToken=c;function f(d){var u,m;try{for(var p=r(d.data.getList("fixBold")),_=p.next();!_.done;_=p.next()){var y=_.value;if(i.default.getProperty(y,"fixBold")){var g=i.default.getAttribute(y,"mathvariant");g==null?i.default.setAttribute(y,"mathvariant",o.TexConstant.Variant.BOLD):i.default.setAttribute(y,"mathvariant",l[g]||g),i.default.removeProperties(y,"fixBold")}}}catch(v){u={error:v}}finally{try{_&&!_.done&&(m=p.return)&&m.call(p)}finally{if(u)throw u.error}}}t.rewriteBoldTokens=f,t.BoldsymbolConfiguration=n.Configuration.create("boldsymbol",{handler:{macro:["boldsymbol"]},nodes:{token:c},postprocessors:[f]})})(BoldsymbolConfiguration);var CancelConfiguration={},EncloseConfiguration={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.EncloseConfiguration=t.EncloseMethods=t.ENCLOSE_OPTIONS=void 0;var e=Configuration,n=SymbolMap,i=r(requireParseUtil());t.ENCLOSE_OPTIONS={"data-arrowhead":1,color:1,mathcolor:1,background:1,mathbackground:1,"data-padding":1,"data-thickness":1},t.EncloseMethods={},t.EncloseMethods.Enclose=function(o,a){var s=o.GetArgument(a).replace(/,/g," "),l=o.GetBrackets(a,""),c=o.ParseArg(a),f=i.default.keyvalOptions(l,t.ENCLOSE_OPTIONS);f.notation=s,o.Push(o.create("node","menclose",[c],f))},new n.CommandMap("enclose",{enclose:"Enclose"},t.EncloseMethods),t.EncloseConfiguration=e.Configuration.create("enclose",{handler:{macro:["enclose"]}})})(EncloseConfiguration);(function(t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelConfiguration=t.CancelMethods=void 0;var e=Configuration,n=TexConstants,i=SymbolMap,o=r(requireParseUtil()),a=EncloseConfiguration;t.CancelMethods={},t.CancelMethods.Cancel=function(s,l,c){var f=s.GetBrackets(l,""),d=s.ParseArg(l),u=o.default.keyvalOptions(f,a.ENCLOSE_OPTIONS);u.notation=c,s.Push(s.create("node","menclose",[d],u))},t.CancelMethods.CancelTo=function(s,l){var c=s.GetBrackets(l,""),f=s.ParseArg(l),d=s.ParseArg(l),u=o.default.keyvalOptions(c,a.ENCLOSE_OPTIONS);u.notation=[n.TexConstant.Notation.UPDIAGONALSTRIKE,n.TexConstant.Notation.UPDIAGONALARROW,n.TexConstant.Notation.NORTHEASTARROW].join(" "),f=s.create("node","mpadded",[f],{depth:"-.1em",height:"+.1em",voffset:".1em"}),s.Push(s.create("node","msup",[s.create("node","menclose",[d],u),f]))},new i.CommandMap("cancel",{cancel:["Cancel",n.TexConstant.Notation.UPDIAGONALSTRIKE],bcancel:["Cancel",n.TexConstant.Notation.DOWNDIAGONALSTRIKE],xcancel:["Cancel",n.TexConstant.Notation.UPDIAGONALSTRIKE+" "+n.TexConstant.Notation.DOWNDIAGONALSTRIKE],cancelto:"CancelTo"},t.CancelMethods),t.CancelConfiguration=e.Configuration.create("cancel",{handler:{macro:["cancel"]}})})(CancelConfiguration);var ColorConfiguration={},ColorMethods={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorMethods=void 0;var e=r(NodeUtil$1),n=r(requireParseUtil());function i(o){var a="+".concat(o),s=o.replace(/^.*?([a-z]*)$/,"$1"),l=2*parseFloat(a);return{width:"+".concat(l).concat(s),height:a,depth:a,lspace:o}}t.ColorMethods={},t.ColorMethods.Color=function(o,a){var s=o.GetBrackets(a,""),l=o.GetArgument(a),c=o.configuration.packageData.get("color").model,f=c.getColor(s,l),d=o.itemFactory.create("style").setProperties({styles:{mathcolor:f}});o.stack.env.color=f,o.Push(d)},t.ColorMethods.TextColor=function(o,a){var s=o.GetBrackets(a,""),l=o.GetArgument(a),c=o.configuration.packageData.get("color").model,f=c.getColor(s,l),d=o.stack.env.color;o.stack.env.color=f;var u=o.ParseArg(a);d?o.stack.env.color=d:delete o.stack.env.color;var m=o.create("node","mstyle",[u],{mathcolor:f});o.Push(m)},t.ColorMethods.DefineColor=function(o,a){var s=o.GetArgument(a),l=o.GetArgument(a),c=o.GetArgument(a),f=o.configuration.packageData.get("color").model;f.defineColor(l,s,c)},t.ColorMethods.ColorBox=function(o,a){var s=o.GetArgument(a),l=n.default.internalMath(o,o.GetArgument(a)),c=o.configuration.packageData.get("color").model,f=o.create("node","mpadded",l,{mathbackground:c.getColor("named",s)});e.default.setProperties(f,i(o.options.color.padding)),o.Push(f)},t.ColorMethods.FColorBox=function(o,a){var s=o.GetArgument(a),l=o.GetArgument(a),c=n.default.internalMath(o,o.GetArgument(a)),f=o.options.color,d=o.configuration.packageData.get("color").model,u=o.create("node","mpadded",c,{mathbackground:d.getColor("named",l),style:"border: ".concat(f.borderWidth," solid ").concat(d.getColor("named",s))});e.default.setProperties(u,i(f.padding)),o.Push(u)}})(ColorMethods);var ColorUtil={},ColorConstants={};Object.defineProperty(ColorConstants,"__esModule",{value:!0});ColorConstants.COLORS=void 0;ColorConstants.COLORS=new Map([["Apricot","#FBB982"],["Aquamarine","#00B5BE"],["Bittersweet","#C04F17"],["Black","#221E1F"],["Blue","#2D2F92"],["BlueGreen","#00B3B8"],["BlueViolet","#473992"],["BrickRed","#B6321C"],["Brown","#792500"],["BurntOrange","#F7921D"],["CadetBlue","#74729A"],["CarnationPink","#F282B4"],["Cerulean","#00A2E3"],["CornflowerBlue","#41B0E4"],["Cyan","#00AEEF"],["Dandelion","#FDBC42"],["DarkOrchid","#A4538A"],["Emerald","#00A99D"],["ForestGreen","#009B55"],["Fuchsia","#8C368C"],["Goldenrod","#FFDF42"],["Gray","#949698"],["Green","#00A64F"],["GreenYellow","#DFE674"],["JungleGreen","#00A99A"],["Lavender","#F49EC4"],["LimeGreen","#8DC73E"],["Magenta","#EC008C"],["Mahogany","#A9341F"],["Maroon","#AF3235"],["Melon","#F89E7B"],["MidnightBlue","#006795"],["Mulberry","#A93C93"],["NavyBlue","#006EB8"],["OliveGreen","#3C8031"],["Orange","#F58137"],["OrangeRed","#ED135A"],["Orchid","#AF72B0"],["Peach","#F7965A"],["Periwinkle","#7977B8"],["PineGreen","#008B72"],["Plum","#92268F"],["ProcessBlue","#00B0F0"],["Purple","#99479B"],["RawSienna","#974006"],["Red","#ED1B23"],["RedOrange","#F26035"],["RedViolet","#A1246B"],["Rhodamine","#EF559F"],["RoyalBlue","#0071BC"],["RoyalPurple","#613F99"],["RubineRed","#ED017D"],["Salmon","#F69289"],["SeaGreen","#3FBC9D"],["Sepia","#671800"],["SkyBlue","#46C5DD"],["SpringGreen","#C6DC67"],["Tan","#DA9D76"],["TealBlue","#00AEB3"],["Thistle","#D883B7"],["Turquoise","#00B4CE"],["Violet","#58429B"],["VioletRed","#EF58A0"],["White","#FFFFFF"],["WildStrawberry","#EE2967"],["Yellow","#FFF200"],["YellowGreen","#98CC70"],["YellowOrange","#FAA21A"]]);var __values$7=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__importDefault$s=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ColorUtil,"__esModule",{value:!0});ColorUtil.ColorModel=void 0;var TexError_js_1$b=__importDefault$s(TexError$1),ColorConstants_js_1=ColorConstants,ColorModelProcessors=new Map,ColorModel=function(){function t(){this.userColors=new Map}return t.prototype.normalizeColor=function(r,e){if(!r||r==="named")return e;if(ColorModelProcessors.has(r)){var n=ColorModelProcessors.get(r);return n(e)}throw new TexError_js_1$b.default("UndefinedColorModel","Color model '%1' not defined",r)},t.prototype.getColor=function(r,e){return!r||r==="named"?this.getColorByName(e):this.normalizeColor(r,e)},t.prototype.getColorByName=function(r){return this.userColors.has(r)?this.userColors.get(r):ColorConstants_js_1.COLORS.has(r)?ColorConstants_js_1.COLORS.get(r):r},t.prototype.defineColor=function(r,e,n){var i=this.normalizeColor(r,n);this.userColors.set(e,i)},t}();ColorUtil.ColorModel=ColorModel;ColorModelProcessors.set("rgb",function(t){var r,e,n=t.trim().split(/\s*,\s*/),i="#";if(n.length!==3)throw new TexError_js_1$b.default("ModelArg1","Color values for the %1 model require 3 numbers","rgb");try{for(var o=__values$7(n),a=o.next();!a.done;a=o.next()){var s=a.value;if(!s.match(/^(\d+(\.\d*)?|\.\d+)$/))throw new TexError_js_1$b.default("InvalidDecimalNumber","Invalid decimal number");var l=parseFloat(s);if(l<0||l>1)throw new TexError_js_1$b.default("ModelArg2","Color values for the %1 model must be between %2 and %3","rgb","0","1");var c=Math.floor(l*255).toString(16);c.length<2&&(c="0"+c),i+=c}}catch(f){r={error:f}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return i});ColorModelProcessors.set("RGB",function(t){var r,e,n=t.trim().split(/\s*,\s*/),i="#";if(n.length!==3)throw new TexError_js_1$b.default("ModelArg1","Color values for the %1 model require 3 numbers","RGB");try{for(var o=__values$7(n),a=o.next();!a.done;a=o.next()){var s=a.value;if(!s.match(/^\d+$/))throw new TexError_js_1$b.default("InvalidNumber","Invalid number");var l=parseInt(s);if(l>255)throw new TexError_js_1$b.default("ModelArg2","Color values for the %1 model must be between %2 and %3","RGB","0","255");var c=l.toString(16);c.length<2&&(c="0"+c),i+=c}}catch(f){r={error:f}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return i});ColorModelProcessors.set("gray",function(t){if(!t.match(/^\s*(\d+(\.\d*)?|\.\d+)\s*$/))throw new TexError_js_1$b.default("InvalidDecimalNumber","Invalid decimal number");var r=parseFloat(t);if(r<0||r>1)throw new TexError_js_1$b.default("ModelArg2","Color values for the %1 model must be between %2 and %3","gray","0","1");var e=Math.floor(r*255).toString(16);return e.length<2&&(e="0"+e),"#".concat(e).concat(e).concat(e)});Object.defineProperty(ColorConfiguration,"__esModule",{value:!0});ColorConfiguration.ColorConfiguration=void 0;var SymbolMap_js_1$d=SymbolMap,Configuration_js_1$h=Configuration,ColorMethods_js_1=ColorMethods,ColorUtil_js_1=ColorUtil;new SymbolMap_js_1$d.CommandMap("color",{color:"Color",textcolor:"TextColor",definecolor:"DefineColor",colorbox:"ColorBox",fcolorbox:"FColorBox"},ColorMethods_js_1.ColorMethods);var config$1=function(t,r){r.parseOptions.packageData.set("color",{model:new ColorUtil_js_1.ColorModel})};ColorConfiguration.ColorConfiguration=Configuration_js_1$h.Configuration.create("color",{handler:{macro:["color"]},options:{color:{padding:"5px",borderWidth:"2px"}},config:config$1});var ConfigMacrosConfiguration={},NewcommandMethods$1={},NewcommandUtil$1={},__importDefault$r=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(NewcommandUtil$1,"__esModule",{value:!0});var ParseUtil_js_1$7=__importDefault$r(requireParseUtil()),TexError_js_1$a=__importDefault$r(TexError$1),Symbol_js_1$1=_Symbol,NewcommandUtil;(function(t){function r(u,m){var p=[u,m.char];if(m.attributes)for(var _ in m.attributes)p.push(_),p.push(m.attributes[_]);return p}t.disassembleSymbol=r;function e(u){for(var m=u[0],p=u[1],_={},y=2;y<u.length;y=y+2)_[u[y]]=u[y+1];return new Symbol_js_1$1.Symbol(m,p,_)}t.assembleSymbol=e;function n(u,m){var p=u.GetNext();if(p!=="\\")throw new TexError_js_1$a.default("MissingCS","%1 must be followed by a control sequence",m);var _=ParseUtil_js_1$7.default.trimSpaces(u.GetArgument(m));return _.substr(1)}t.GetCSname=n;function i(u,m){var p=ParseUtil_js_1$7.default.trimSpaces(u.GetArgument(m));if(p.charAt(0)==="\\"&&(p=p.substr(1)),!p.match(/^(.|[a-z]+)$/i))throw new TexError_js_1$a.default("IllegalControlSequenceName","Illegal control sequence name for %1",m);return p}t.GetCsNameArgument=i;function o(u,m){var p=u.GetBrackets(m);if(p&&(p=ParseUtil_js_1$7.default.trimSpaces(p),!p.match(/^[0-9]+$/)))throw new TexError_js_1$a.default("IllegalParamNumber","Illegal number of parameters specified in %1",m);return p}t.GetArgCount=o;function a(u,m,p){for(var _=u.GetNext(),y=[],g=0,v=u.i;u.i<u.string.length;){if(_=u.GetNext(),_==="#"){if(v!==u.i&&(y[g]=u.string.substr(v,u.i-v)),_=u.string.charAt(++u.i),!_.match(/^[1-9]$/))throw new TexError_js_1$a.default("CantUseHash2","Illegal use of # in template for %1",p);if(parseInt(_)!==++g)throw new TexError_js_1$a.default("SequentialParam","Parameters for %1 must be numbered sequentially",p);v=u.i+1}else if(_==="{")return v!==u.i&&(y[g]=u.string.substr(v,u.i-v)),y.length>0?[g.toString()].concat(y):g;u.i++}throw new TexError_js_1$a.default("MissingReplacementString","Missing replacement string for definition of %1",m)}t.GetTemplate=a;function s(u,m,p){if(p==null)return u.GetArgument(m);for(var _=u.i,y=0,g=0;u.i<u.string.length;){var v=u.string.charAt(u.i);if(v==="{")u.i===_&&(g=1),u.GetArgument(m),y=u.i-_;else{if(l(u,p))return g&&(_++,y-=2),u.string.substr(_,y);if(v==="\\"){u.i++,y++,g=0;var x=u.string.substr(u.i).match(/[a-z]+|./i);x&&(u.i+=x[0].length,y=u.i-_)}else u.i++,y++,g=0}}throw new TexError_js_1$a.default("RunawayArgument","Runaway argument for %1?",m)}t.GetParameter=s;function l(u,m){return u.string.substr(u.i,m.length)!==m||m.match(/\\[a-z]+$/i)&&u.string.charAt(u.i+m.length).match(/[a-z]/i)?0:(u.i+=m.length,1)}t.MatchParam=l;function c(u,m,p,_){var y=u.configuration.handlers,g=y.retrieve(t.NEW_DELIMITER);g.add(m,new Symbol_js_1$1.Symbol(m,p,_))}t.addDelimiter=c;function f(u,m,p,_,y){y===void 0&&(y="");var g=u.configuration.handlers,v=g.retrieve(t.NEW_COMMAND);v.add(m,new Symbol_js_1$1.Macro(y||m,p,_))}t.addMacro=f;function d(u,m,p,_){var y=u.configuration.handlers,g=y.retrieve(t.NEW_ENVIRONMENT);g.add(m,new Symbol_js_1$1.Macro(m,p,_))}t.addEnvironment=d,t.NEW_DELIMITER="new-Delimiter",t.NEW_COMMAND="new-Command",t.NEW_ENVIRONMENT="new-Environment"})(NewcommandUtil||(NewcommandUtil={}));NewcommandUtil$1.default=NewcommandUtil;var __createBinding$4=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,r,e,n){n===void 0&&(n=e);var i=Object.getOwnPropertyDescriptor(r,e);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,i)}:function(t,r,e,n){n===void 0&&(n=e),t[n]=r[e]}),__setModuleDefault$4=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),__importStar$4=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var e in t)e!=="default"&&Object.prototype.hasOwnProperty.call(t,e)&&__createBinding$4(r,t,e);return __setModuleDefault$4(r,t),r},__importDefault$q=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(NewcommandMethods$1,"__esModule",{value:!0});var TexError_js_1$9=__importDefault$q(TexError$1),sm$2=__importStar$4(SymbolMap),BaseMethods_js_1$5=__importDefault$q(BaseMethods$1),ParseUtil_js_1$6=__importDefault$q(requireParseUtil()),NewcommandUtil_js_1$1=__importDefault$q(NewcommandUtil$1),NewcommandMethods={};NewcommandMethods.NewCommand=function(t,r){var e=NewcommandUtil_js_1$1.default.GetCsNameArgument(t,r),n=NewcommandUtil_js_1$1.default.GetArgCount(t,r),i=t.GetBrackets(r),o=t.GetArgument(r);NewcommandUtil_js_1$1.default.addMacro(t,e,NewcommandMethods.Macro,[o,n,i])};NewcommandMethods.NewEnvironment=function(t,r){var e=ParseUtil_js_1$6.default.trimSpaces(t.GetArgument(r)),n=NewcommandUtil_js_1$1.default.GetArgCount(t,r),i=t.GetBrackets(r),o=t.GetArgument(r),a=t.GetArgument(r);NewcommandUtil_js_1$1.default.addEnvironment(t,e,NewcommandMethods.BeginEnv,[!0,o,a,n,i])};NewcommandMethods.MacroDef=function(t,r){var e=NewcommandUtil_js_1$1.default.GetCSname(t,r),n=NewcommandUtil_js_1$1.default.GetTemplate(t,r,"\\"+e),i=t.GetArgument(r);n instanceof Array?NewcommandUtil_js_1$1.default.addMacro(t,e,NewcommandMethods.MacroWithTemplate,[i].concat(n)):NewcommandUtil_js_1$1.default.addMacro(t,e,NewcommandMethods.Macro,[i,n])};NewcommandMethods.Let=function(t,r){var e=NewcommandUtil_js_1$1.default.GetCSname(t,r),n=t.GetNext();n==="="&&(t.i++,n=t.GetNext());var i=t.configuration.handlers;if(n==="\\"){r=NewcommandUtil_js_1$1.default.GetCSname(t,r);var o=i.get("delimiter").lookup("\\"+r);if(o){NewcommandUtil_js_1$1.default.addDelimiter(t,"\\"+e,o.char,o.attributes);return}var a=i.get("macro").applicable(r);if(!a)return;if(a instanceof sm$2.MacroMap){var s=a.lookup(r);NewcommandUtil_js_1$1.default.addMacro(t,e,s.func,s.args,s.symbol);return}o=a.lookup(r);var l=NewcommandUtil_js_1$1.default.disassembleSymbol(e,o),c=function(d,u){for(var m=[],p=2;p<arguments.length;p++)m[p-2]=arguments[p];var _=NewcommandUtil_js_1$1.default.assembleSymbol(m);return a.parser(d,_)};NewcommandUtil_js_1$1.default.addMacro(t,e,c,l);return}t.i++;var f=i.get("delimiter").lookup(n);if(f){NewcommandUtil_js_1$1.default.addDelimiter(t,"\\"+e,f.char,f.attributes);return}NewcommandUtil_js_1$1.default.addMacro(t,e,NewcommandMethods.Macro,[n])};NewcommandMethods.MacroWithTemplate=function(t,r,e,n){for(var i=[],o=4;o<arguments.length;o++)i[o-4]=arguments[o];var a=parseInt(n,10);if(a){var s=[];if(t.GetNext(),i[0]&&!NewcommandUtil_js_1$1.default.MatchParam(t,i[0]))throw new TexError_js_1$9.default("MismatchUseDef","Use of %1 doesn't match its definition",r);for(var l=0;l<a;l++)s.push(NewcommandUtil_js_1$1.default.GetParameter(t,r,i[l+1]));e=ParseUtil_js_1$6.default.substituteArgs(t,s,e)}t.string=ParseUtil_js_1$6.default.addArgs(t,e,t.string.slice(t.i)),t.i=0,ParseUtil_js_1$6.default.checkMaxMacros(t)};NewcommandMethods.BeginEnv=function(t,r,e,n,i,o){if(r.getProperty("end")&&t.stack.env.closing===r.getName()){delete t.stack.env.closing;var a=t.string.slice(t.i);return t.string=n,t.i=0,t.Parse(),t.string=a,t.i=0,t.itemFactory.create("end").setProperty("name",r.getName())}if(i){var s=[];if(o!=null){var l=t.GetBrackets("\\begin{"+r.getName()+"}");s.push(l??o)}for(var c=s.length;c<i;c++)s.push(t.GetArgument("\\begin{"+r.getName()+"}"));e=ParseUtil_js_1$6.default.substituteArgs(t,s,e),n=ParseUtil_js_1$6.default.substituteArgs(t,[],n)}return t.string=ParseUtil_js_1$6.default.addArgs(t,e,t.string.slice(t.i)),t.i=0,t.itemFactory.create("beginEnv").setProperty("name",r.getName())};NewcommandMethods.Macro=BaseMethods_js_1$5.default.Macro;NewcommandMethods$1.default=NewcommandMethods;var NewcommandItems={},__extends$b=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__importDefault$p=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(NewcommandItems,"__esModule",{value:!0});NewcommandItems.BeginEnvItem=void 0;var TexError_js_1$8=__importDefault$p(TexError$1),StackItem_js_1$3=StackItem,BeginEnvItem=function(t){__extends$b(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"beginEnv"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){if(e.isKind("end")){if(e.getName()!==this.getName())throw new TexError_js_1$8.default("EnvBadEnd","\\begin{%1} ended with \\end{%2}",this.getName(),e.getName());return[[this.factory.create("mml",this.toMml())],!0]}if(e.isKind("stop"))throw new TexError_js_1$8.default("EnvMissingEnd","Missing \\end{%1}",this.getName());return t.prototype.checkItem.call(this,e)},r}(StackItem_js_1$3.BaseItem);NewcommandItems.BeginEnvItem=BeginEnvItem;var __values$6=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__importDefault$o=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},_a$5;Object.defineProperty(ConfigMacrosConfiguration,"__esModule",{value:!0});ConfigMacrosConfiguration.ConfigMacrosConfiguration=void 0;var Configuration_js_1$g=Configuration,Options_js_1=Options$1,SymbolMap_js_1$c=SymbolMap,ParseMethods_js_1$4=__importDefault$o(ParseMethods$1),Symbol_js_1=_Symbol,NewcommandMethods_js_1$1=__importDefault$o(NewcommandMethods$1),NewcommandItems_js_1$1=NewcommandItems,MACROSMAP="configmacros-map",ENVIRONMENTMAP="configmacros-env-map";function configmacrosInit(t){new SymbolMap_js_1$c.CommandMap(MACROSMAP,{},{}),new SymbolMap_js_1$c.EnvironmentMap(ENVIRONMENTMAP,ParseMethods_js_1$4.default.environment,{},{}),t.append(Configuration_js_1$g.Configuration.local({handler:{macro:[MACROSMAP],environment:[ENVIRONMENTMAP]},priority:3}))}function configmacrosConfig(t,r){configMacros(r),configEnvironments(r)}function configMacros(t){var r,e,n=t.parseOptions.handlers.retrieve(MACROSMAP),i=t.parseOptions.options.macros;try{for(var o=__values$6(Object.keys(i)),a=o.next();!a.done;a=o.next()){var s=a.value,l=typeof i[s]=="string"?[i[s]]:i[s],c=Array.isArray(l[2])?new Symbol_js_1.Macro(s,NewcommandMethods_js_1$1.default.MacroWithTemplate,l.slice(0,2).concat(l[2])):new Symbol_js_1.Macro(s,NewcommandMethods_js_1$1.default.Macro,l);n.add(s,c)}}catch(f){r={error:f}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}}function configEnvironments(t){var r,e,n=t.parseOptions.handlers.retrieve(ENVIRONMENTMAP),i=t.parseOptions.options.environments;try{for(var o=__values$6(Object.keys(i)),a=o.next();!a.done;a=o.next()){var s=a.value;n.add(s,new Symbol_js_1.Macro(s,NewcommandMethods_js_1$1.default.BeginEnv,[!0].concat(i[s])))}}catch(l){r={error:l}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}}ConfigMacrosConfiguration.ConfigMacrosConfiguration=Configuration_js_1$g.Configuration.create("configmacros",{init:configmacrosInit,config:configmacrosConfig,items:(_a$5={},_a$5[NewcommandItems_js_1$1.BeginEnvItem.prototype.kind]=NewcommandItems_js_1$1.BeginEnvItem,_a$5),options:{macros:(0,Options_js_1.expandable)({}),environments:(0,Options_js_1.expandable)({})}});var GensymbConfiguration={};Object.defineProperty(GensymbConfiguration,"__esModule",{value:!0});GensymbConfiguration.GensymbConfiguration=void 0;var Configuration_js_1$f=Configuration,TexConstants_js_1$5=TexConstants,SymbolMap_js_1$b=SymbolMap;function mathcharUnit(t,r){var e=r.attributes||{};e.mathvariant=TexConstants_js_1$5.TexConstant.Variant.NORMAL,e.class="MathML-Unit";var n=t.create("token","mi",e,r.char);t.Push(n)}new SymbolMap_js_1$b.CharacterMap("gensymb-symbols",mathcharUnit,{ohm:"Ω",degree:"°",celsius:"℃",perthousand:"‰",micro:"µ"});GensymbConfiguration.GensymbConfiguration=Configuration_js_1$f.Configuration.create("gensymb",{handler:{macro:["gensymb-symbols"]}});var MathtoolsConfiguration={},MathtoolsMappings={},MathtoolsMethods={},MathtoolsUtil={},hasRequiredMathtoolsUtil;function requireMathtoolsUtil(){if(hasRequiredMathtoolsUtil)return MathtoolsUtil;hasRequiredMathtoolsUtil=1;var t=commonjsGlobal&&commonjsGlobal.__read||function(f,d){var u=typeof Symbol=="function"&&f[Symbol.iterator];if(!u)return f;var m=u.call(f),p,_=[],y;try{for(;(d===void 0||d-- >0)&&!(p=m.next()).done;)_.push(p.value)}catch(g){y={error:g}}finally{try{p&&!p.done&&(u=m.return)&&u.call(m)}finally{if(y)throw y.error}}return _},r=commonjsGlobal&&commonjsGlobal.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(MathtoolsUtil,"__esModule",{value:!0}),MathtoolsUtil.MathtoolsUtil=void 0;var e=BaseItems,n=r(requireParseUtil()),i=r(requireTexParser()),o=r(TexError$1),a=_Symbol,s=Options$1,l=requireMathtoolsMethods(),c=requireMathtoolsConfiguration();return MathtoolsUtil.MathtoolsUtil={setDisplayLevel:function(f,d){if(d){var u=t((0,s.lookup)(d,{"\\displaystyle":[!0,0],"\\textstyle":[!1,0],"\\scriptstyle":[!1,1],"\\scriptscriptstyle":[!1,2]},[null,null]),2),m=u[0],p=u[1];m!==null&&(f.attributes.set("displaystyle",m),f.attributes.set("scriptlevel",p))}},checkAlignment:function(f,d){var u=f.stack.Top();if(u.kind!==e.EqnArrayItem.prototype.kind)throw new o.default("NotInAlignment","%1 can only be used in aligment environments",d);return u},addPairedDelims:function(f,d,u){var m=f.handlers.retrieve(c.PAIREDDELIMS);m.add(d,new a.Macro(d,l.MathtoolsMethods.PairedDelimiters,u))},spreadLines:function(f,d){if(f.isKind("mtable")){var u=f.attributes.get("rowspacing");if(u){var m=n.default.dimen2em(d);u=u.split(/ /).map(function(p){return n.default.Em(Math.max(0,n.default.dimen2em(p)+m))}).join(" ")}else u=d;f.attributes.set("rowspacing",u)}},plusOrMinus:function(f,d){if(d=d.trim(),!d.match(/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)$/))throw new o.default("NotANumber","Argument to %1 is not a number",f);return d.match(/^[-+]/)?d:"+"+d},getScript:function(f,d,u){var m=n.default.trimSpaces(f.GetArgument(d));if(m==="")return f.create("node","none");var p=f.options.mathtools["prescript-".concat(u,"-format")];return p&&(m="".concat(p,"{").concat(m,"}")),new i.default(m,f.stack.env,f.configuration).mml()}},MathtoolsUtil}var hasRequiredMathtoolsMethods;function requireMathtoolsMethods(){return hasRequiredMathtoolsMethods||(hasRequiredMathtoolsMethods=1,function(t){var r=commonjsGlobal&&commonjsGlobal.__assign||function(){return r=Object.assign||function(g){for(var v,x=1,b=arguments.length;x<b;x++){v=arguments[x];for(var S in v)Object.prototype.hasOwnProperty.call(v,S)&&(g[S]=v[S])}return g},r.apply(this,arguments)},e=commonjsGlobal&&commonjsGlobal.__read||function(g,v){var x=typeof Symbol=="function"&&g[Symbol.iterator];if(!x)return g;var b=x.call(g),S,M=[],C;try{for(;(v===void 0||v-- >0)&&!(S=b.next()).done;)M.push(S.value)}catch(A){C={error:A}}finally{try{S&&!S.done&&(x=b.return)&&x.call(b)}finally{if(C)throw C.error}}return M},n=commonjsGlobal&&commonjsGlobal.__values||function(g){var v=typeof Symbol=="function"&&Symbol.iterator,x=v&&g[v],b=0;if(x)return x.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&b>=g.length&&(g=void 0),{value:g&&g[b++],done:!g}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},i=commonjsGlobal&&commonjsGlobal.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(t,"__esModule",{value:!0}),t.MathtoolsMethods=void 0;var o=i(requireParseUtil()),a=AmsMethods,s=i(BaseMethods$1),l=i(requireTexParser()),c=i(TexError$1),f=i(NodeUtil$1),d=MmlNode,u=lengths,m=Options$1,p=i(NewcommandUtil$1),_=i(NewcommandMethods$1),y=requireMathtoolsUtil();t.MathtoolsMethods={MtMatrix:function(g,v,x,b){var S=g.GetBrackets("\\begin{".concat(v.getName(),"}"),"c");return t.MathtoolsMethods.Array(g,v,x,b,S)},MtSmallMatrix:function(g,v,x,b,S){return S||(S=g.GetBrackets("\\begin{".concat(v.getName(),"}"),g.options.mathtools["smallmatrix-align"])),t.MathtoolsMethods.Array(g,v,x,b,S,o.default.Em(1/3),".2em","S",1)},MtMultlined:function(g,v){var x,b="\\begin{".concat(v.getName(),"}"),S=g.GetBrackets(b,g.options.mathtools["multlined-pos"]||"c"),M=S?g.GetBrackets(b,""):"";S&&!S.match(/^[cbt]$/)&&(x=e([S,M],2),M=x[0],S=x[1]),g.Push(v);var C=g.itemFactory.create("multlined",g,v);return C.arraydef={displaystyle:!0,rowspacing:".5em",width:M||"auto",columnwidth:"100%"},o.default.setArrayAlign(C,S||"c")},HandleShove:function(g,v,x){var b=g.stack.Top();if(b.kind!=="multline"&&b.kind!=="multlined")throw new c.default("CommandInMultlined","%1 can only appear within the multline or multlined environments",v);if(b.Size())throw new c.default("CommandAtTheBeginingOfLine","%1 must come at the beginning of the line",v);b.setProperty("shove",x);var S=g.GetBrackets(v),M=g.ParseArg(v);if(S){var C=g.create("node","mrow",[]),A=g.create("node","mspace",[],{width:S});x==="left"?(C.appendChild(A),C.appendChild(M)):(C.appendChild(M),C.appendChild(A)),M=C}g.Push(M)},SpreadLines:function(g,v){var x,b;if(g.stack.env.closing===v.getName()){delete g.stack.env.closing;var S=g.stack.Pop(),M=S.toMml(),C=S.getProperty("spread");if(M.isInferred)try{for(var A=n(f.default.getChildren(M)),E=A.next();!E.done;E=A.next()){var $=E.value;y.MathtoolsUtil.spreadLines($,C)}}catch(D){x={error:D}}finally{try{E&&!E.done&&(b=A.return)&&b.call(A)}finally{if(x)throw x.error}}else y.MathtoolsUtil.spreadLines(M,C);g.Push(M)}else{var C=g.GetDimen("\\begin{".concat(v.getName(),"}"));v.setProperty("spread",C),g.Push(v)}},Cases:function(g,v,x,b,S){var M=g.itemFactory.create("array").setProperty("casesEnv",v.getName());return M.arraydef={rowspacing:".2em",columnspacing:"1em",columnalign:"left"},S==="D"&&(M.arraydef.displaystyle=!0),M.setProperties({open:x,close:b}),g.Push(v),M},MathLap:function(g,v,x,b){var S=g.GetBrackets(v,"").trim(),M=g.create("node","mstyle",[g.create("node","mpadded",[g.ParseArg(v)],r({width:0},x==="r"?{}:{lspace:x==="l"?"-1width":"-.5width"}))],{"data-cramped":b});y.MathtoolsUtil.setDisplayLevel(M,S),g.Push(g.create("node","TeXAtom",[M]))},Cramped:function(g,v){var x=g.GetBrackets(v,"").trim(),b=g.ParseArg(v),S=g.create("node","mstyle",[b],{"data-cramped":!0});y.MathtoolsUtil.setDisplayLevel(S,x),g.Push(S)},MtLap:function(g,v,x){var b=o.default.internalMath(g,g.GetArgument(v),0),S=g.create("node","mpadded",b,{width:0});x!=="r"&&f.default.setAttribute(S,"lspace",x==="l"?"-1width":"-.5width"),g.Push(S)},MathMakeBox:function(g,v){var x=g.GetBrackets(v),b=g.GetBrackets(v,"c"),S=g.create("node","mpadded",[g.ParseArg(v)]);x&&f.default.setAttribute(S,"width",x);var M=(0,m.lookup)(b,{c:"center",r:"right"},"");M&&f.default.setAttribute(S,"data-align",M),g.Push(S)},MathMBox:function(g,v){g.Push(g.create("node","mrow",[g.ParseArg(v)]))},UnderOverBracket:function(g,v){var x=(0,u.length2em)(g.GetBrackets(v,".1em"),.1),b=g.GetBrackets(v,".2em"),S=g.GetArgument(v),M=e(v.charAt(1)==="o"?["over","accent","bottom"]:["under","accentunder","top"],3),C=M[0],A=M[1],E=M[2],$=(0,u.em)(x),D=new l.default(S,g.stack.env,g.configuration).mml(),B=new l.default(S,g.stack.env,g.configuration).mml(),F=g.create("node","mpadded",[g.create("node","mphantom",[B])],{style:"border: ".concat($," solid; border-").concat(E,": none"),height:b,depth:0}),I=o.default.underOver(g,D,F,C,!0),H=f.default.getChildAt(f.default.getChildAt(I,0),0);f.default.setAttribute(H,A,!0),g.Push(I)},Aboxed:function(g,v){var x=y.MathtoolsUtil.checkAlignment(g,v);x.row.length%2===1&&x.row.push(g.create("node","mtd",[]));var b=g.GetArgument(v),S=g.string.substr(g.i);g.string=b+"&&\\endAboxed",g.i=0;var M=g.GetUpTo(v,"&"),C=g.GetUpTo(v,"&");g.GetUpTo(v,"\\endAboxed");var A=o.default.substituteArgs(g,[M,C],"\\rlap{\\boxed{#1{}#2}}\\kern.267em\\phantom{#1}&\\phantom{{}#2}\\kern.267em");g.string=A+S,g.i=0},ArrowBetweenLines:function(g,v){var x=y.MathtoolsUtil.checkAlignment(g,v);if(x.Size()||x.row.length)throw new c.default("BetweenLines","%1 must be on a row by itself",v);var b=g.GetStar(),S=g.GetBrackets(v,"\\Updownarrow");b&&(x.EndEntry(),x.EndEntry());var M=b?"\\quad"+S:S+"\\quad",C=new l.default(M,g.stack.env,g.configuration).mml();g.Push(C),x.EndEntry(),x.EndRow()},VDotsWithin:function(g,v){var x=g.stack.Top(),b=x.getProperty("flushspaceabove")===x.table.length,S="\\mmlToken{mi}{}"+g.GetArgument(v)+"\\mmlToken{mi}{}",M=new l.default(S,g.stack.env,g.configuration).mml(),C=g.create("node","mpadded",[g.create("node","mpadded",[g.create("node","mo",[g.create("text","⋮")])],r({width:0,lspace:"-.5width"},b?{height:"-.6em",voffset:"-.18em"}:{})),g.create("node","mphantom",[M])],{lspace:".5width"});g.Push(C)},ShortVDotsWithin:function(g,v){var x=g.stack.Top(),b=g.GetStar();t.MathtoolsMethods.FlushSpaceAbove(g,"\\MTFlushSpaceAbove"),!b&&x.EndEntry(),t.MathtoolsMethods.VDotsWithin(g,"\\vdotswithin"),b&&x.EndEntry(),t.MathtoolsMethods.FlushSpaceBelow(g,"\\MTFlushSpaceBelow")},FlushSpaceAbove:function(g,v){var x=y.MathtoolsUtil.checkAlignment(g,v);x.setProperty("flushspaceabove",x.table.length),x.addRowSpacing("-"+g.options.mathtools.shortvdotsadjustabove)},FlushSpaceBelow:function(g,v){var x=y.MathtoolsUtil.checkAlignment(g,v);x.Size()&&x.EndEntry(),x.EndRow(),x.addRowSpacing("-"+g.options.mathtools.shortvdotsadjustbelow)},PairedDelimiters:function(g,v,x,b,S,M,C,A){S===void 0&&(S="#1"),M===void 0&&(M=1),C===void 0&&(C=""),A===void 0&&(A="");var E=g.GetStar(),$=E?"":g.GetBrackets(v),D=e(E?["\\left","\\right"]:$?[$+"l",$+"r"]:["",""],2),B=D[0],F=D[1],I=E?"\\middle":$||"";if(M){for(var H=[],W=H.length;W<M;W++)H.push(g.GetArgument(v));C=o.default.substituteArgs(g,H,C),S=o.default.substituteArgs(g,H,S),A=o.default.substituteArgs(g,H,A)}S=S.replace(/\\delimsize/g,I),g.string=[C,B,x,S,F,b,A,g.string.substr(g.i)].reduce(function(Z,et){return o.default.addArgs(g,Z,et)},""),g.i=0,o.default.checkMaxMacros(g)},DeclarePairedDelimiter:function(g,v){var x=p.default.GetCsNameArgument(g,v),b=g.GetArgument(v),S=g.GetArgument(v);y.MathtoolsUtil.addPairedDelims(g.configuration,x,[b,S])},DeclarePairedDelimiterX:function(g,v){var x=p.default.GetCsNameArgument(g,v),b=p.default.GetArgCount(g,v),S=g.GetArgument(v),M=g.GetArgument(v),C=g.GetArgument(v);y.MathtoolsUtil.addPairedDelims(g.configuration,x,[S,M,C,b])},DeclarePairedDelimiterXPP:function(g,v){var x=p.default.GetCsNameArgument(g,v),b=p.default.GetArgCount(g,v),S=g.GetArgument(v),M=g.GetArgument(v),C=g.GetArgument(v),A=g.GetArgument(v),E=g.GetArgument(v);y.MathtoolsUtil.addPairedDelims(g.configuration,x,[M,C,E,b,S,A])},CenterColon:function(g,v,x,b,S){b===void 0&&(b=!1),S===void 0&&(S=!1);var M=g.options.mathtools,C=g.create("token","mo",{},":");if(x&&(M.centercolon||b)){var A=M["centercolon-offset"];C=g.create("node","mpadded",[C],r({voffset:A,height:"+".concat(A),depth:"-".concat(A)},S?{width:M["thincolon-dw"],lspace:M["thincolon-dx"]}:{}))}g.Push(C)},Relation:function(g,v,x,b){var S=g.options.mathtools;S["use-unicode"]&&b?g.Push(g.create("token","mo",{texClass:d.TEXCLASS.REL},b)):(x="\\mathrel{"+x.replace(/:/g,"\\MTThinColon").replace(/-/g,"\\mathrel{-}")+"}",g.string=o.default.addArgs(g,x,g.string.substr(g.i)),g.i=0)},NArrow:function(g,v,x,b){g.Push(g.create("node","TeXAtom",[g.create("token","mtext",{},x),g.create("node","mpadded",[g.create("node","mpadded",[g.create("node","menclose",[g.create("node","mspace",[],{height:".2em",depth:0,width:".4em"})],{notation:"updiagonalstrike","data-thickness":".05em","data-padding":0})],{width:0,lspace:"-.5width",voffset:b}),g.create("node","mphantom",[g.create("token","mtext",{},x)])],{width:0,lspace:"-.5width"})],{texClass:d.TEXCLASS.REL}))},SplitFrac:function(g,v,x){var b=g.ParseArg(v),S=g.ParseArg(v);g.Push(g.create("node","mstyle",[g.create("node","mfrac",[g.create("node","mstyle",[b,g.create("token","mi"),g.create("token","mspace",{width:"1em"})],{scriptlevel:0}),g.create("node","mstyle",[g.create("token","mspace",{width:"1em"}),g.create("token","mi"),S],{scriptlevel:0})],{linethickness:0,numalign:"left",denomalign:"right"})],{displaystyle:x,scriptlevel:0}))},XMathStrut:function(g,v){var x=g.GetBrackets(v),b=g.GetArgument(v);b=y.MathtoolsUtil.plusOrMinus(v,b),x=y.MathtoolsUtil.plusOrMinus(v,x||b),g.Push(g.create("node","TeXAtom",[g.create("node","mpadded",[g.create("node","mphantom",[g.create("token","mo",{stretchy:!1},"(")])],{width:0,height:b+"height",depth:x+"depth"})],{texClass:d.TEXCLASS.ORD}))},Prescript:function(g,v){var x=y.MathtoolsUtil.getScript(g,v,"sup"),b=y.MathtoolsUtil.getScript(g,v,"sub"),S=y.MathtoolsUtil.getScript(g,v,"arg");if(f.default.isType(x,"none")&&f.default.isType(b,"none")){g.Push(S);return}var M=g.create("node","mmultiscripts",[S]);f.default.getChildren(M).push(null,null),f.default.appendChildren(M,[g.create("node","mprescripts"),b,x]),M.setProperty("fixPrescript",!0),g.Push(M)},NewTagForm:function(g,v,x){x===void 0&&(x=!1);var b=g.tags;if(!("mtFormats"in b))throw new c.default("TagsNotMT","%1 can only be used with ams or mathtools tags",v);var S=g.GetArgument(v).trim();if(!S)throw new c.default("InvalidTagFormID","Tag form name can't be empty");var M=g.GetBrackets(v,""),C=g.GetArgument(v),A=g.GetArgument(v);if(!x&&b.mtFormats.has(S))throw new c.default("DuplicateTagForm","Duplicate tag form: %1",S);b.mtFormats.set(S,[C,A,M])},UseTagForm:function(g,v){var x=g.tags;if(!("mtFormats"in x))throw new c.default("TagsNotMT","%1 can only be used with ams or mathtools tags",v);var b=g.GetArgument(v).trim();if(!b){x.mtCurrent=null;return}if(!x.mtFormats.has(b))throw new c.default("UndefinedTagForm","Undefined tag form: %1",b);x.mtCurrent=x.mtFormats.get(b)},SetOptions:function(g,v){var x,b,S=g.options.mathtools;if(!S["allow-mathtoolsset"])throw new c.default("ForbiddenMathtoolsSet","%1 is disabled",v);var M={};Object.keys(S).forEach(function(B){B!=="pariedDelimiters"&&B!=="tagforms"&&B!=="allow-mathtoolsset"&&(M[B]=1)});var C=g.GetArgument(v),A=o.default.keyvalOptions(C,M,!0);try{for(var E=n(Object.keys(A)),$=E.next();!$.done;$=E.next()){var D=$.value;S[D]=A[D]}}catch(B){x={error:B}}finally{try{$&&!$.done&&(b=E.return)&&b.call(E)}finally{if(x)throw x.error}}},Array:s.default.Array,Macro:s.default.Macro,xArrow:a.AmsMethods.xArrow,HandleRef:a.AmsMethods.HandleRef,AmsEqnArray:a.AmsMethods.AmsEqnArray,MacroWithTemplate:_.default.MacroWithTemplate}}(MathtoolsMethods)),MathtoolsMethods}var hasRequiredMathtoolsMappings;function requireMathtoolsMappings(){if(hasRequiredMathtoolsMappings)return MathtoolsMappings;hasRequiredMathtoolsMappings=1;var t=commonjsGlobal&&commonjsGlobal.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(MathtoolsMappings,"__esModule",{value:!0});var r=t(ParseMethods$1),e=SymbolMap,n=TexConstants,i=requireMathtoolsMethods();return new e.CommandMap("mathtools-macros",{shoveleft:["HandleShove",n.TexConstant.Align.LEFT],shoveright:["HandleShove",n.TexConstant.Align.RIGHT],xleftrightarrow:["xArrow",8596,10,10],xLeftarrow:["xArrow",8656,12,7],xRightarrow:["xArrow",8658,7,12],xLeftrightarrow:["xArrow",8660,12,12],xhookleftarrow:["xArrow",8617,10,5],xhookrightarrow:["xArrow",8618,5,10],xmapsto:["xArrow",8614,10,10],xrightharpoondown:["xArrow",8641,5,10],xleftharpoondown:["xArrow",8637,10,5],xrightleftharpoons:["xArrow",8652,10,10],xrightharpoonup:["xArrow",8640,5,10],xleftharpoonup:["xArrow",8636,10,5],xleftrightharpoons:["xArrow",8651,10,10],mathllap:["MathLap","l",!1],mathrlap:["MathLap","r",!1],mathclap:["MathLap","c",!1],clap:["MtLap","c"],textllap:["MtLap","l"],textrlap:["MtLap","r"],textclap:["MtLap","c"],cramped:"Cramped",crampedllap:["MathLap","l",!0],crampedrlap:["MathLap","r",!0],crampedclap:["MathLap","c",!0],crampedsubstack:["Macro","\\begin{crampedsubarray}{c}#1\\end{crampedsubarray}",1],mathmbox:"MathMBox",mathmakebox:"MathMakeBox",overbracket:"UnderOverBracket",underbracket:"UnderOverBracket",refeq:"HandleRef",MoveEqLeft:["Macro","\\hspace{#1em}&\\hspace{-#1em}",1,"2"],Aboxed:"Aboxed",ArrowBetweenLines:"ArrowBetweenLines",vdotswithin:"VDotsWithin",shortvdotswithin:"ShortVDotsWithin",MTFlushSpaceAbove:"FlushSpaceAbove",MTFlushSpaceBelow:"FlushSpaceBelow",DeclarePairedDelimiter:"DeclarePairedDelimiter",DeclarePairedDelimiterX:"DeclarePairedDelimiterX",DeclarePairedDelimiterXPP:"DeclarePairedDelimiterXPP",DeclarePairedDelimiters:"DeclarePairedDelimiter",DeclarePairedDelimitersX:"DeclarePairedDelimiterX",DeclarePairedDelimitersXPP:"DeclarePairedDelimiterXPP",centercolon:["CenterColon",!0,!0],ordinarycolon:["CenterColon",!1],MTThinColon:["CenterColon",!0,!0,!0],coloneqq:["Relation",":=","≔"],Coloneqq:["Relation","::=","⩴"],coloneq:["Relation",":-"],Coloneq:["Relation","::-"],eqqcolon:["Relation","=:","≕"],Eqqcolon:["Relation","=::"],eqcolon:["Relation","-:","∹"],Eqcolon:["Relation","-::"],colonapprox:["Relation",":\\approx"],Colonapprox:["Relation","::\\approx"],colonsim:["Relation",":\\sim"],Colonsim:["Relation","::\\sim"],dblcolon:["Relation","::","∷"],nuparrow:["NArrow","↑",".06em"],ndownarrow:["NArrow","↓",".25em"],bigtimes:["Macro","\\mathop{\\Large\\kern-.1em\\boldsymbol{\\times}\\kern-.1em}"],splitfrac:["SplitFrac",!1],splitdfrac:["SplitFrac",!0],xmathstrut:"XMathStrut",prescript:"Prescript",newtagform:["NewTagForm",!1],renewtagform:["NewTagForm",!0],usetagform:"UseTagForm",adjustlimits:["MacroWithTemplate","\\mathop{{#1}\\vphantom{{#3}}}_{{#2}\\vphantom{{#4}}}\\mathop{{#3}\\vphantom{{#1}}}_{{#4}\\vphantom{{#2}}}",4,,"_",,"_"],mathtoolsset:"SetOptions"},i.MathtoolsMethods),new e.EnvironmentMap("mathtools-environments",r.default.environment,{dcases:["Array",null,"\\{","","ll",null,".2em","D"],rcases:["Array",null,"","\\}","ll",null,".2em"],drcases:["Array",null,"","\\}","ll",null,".2em","D"],"dcases*":["Cases",null,"{","","D"],"rcases*":["Cases",null,"","}"],"drcases*":["Cases",null,"","}","D"],"cases*":["Cases",null,"{",""],"matrix*":["MtMatrix",null,null,null],"pmatrix*":["MtMatrix",null,"(",")"],"bmatrix*":["MtMatrix",null,"[","]"],"Bmatrix*":["MtMatrix",null,"\\{","\\}"],"vmatrix*":["MtMatrix",null,"\\vert","\\vert"],"Vmatrix*":["MtMatrix",null,"\\Vert","\\Vert"],"smallmatrix*":["MtSmallMatrix",null,null,null],psmallmatrix:["MtSmallMatrix",null,"(",")","c"],"psmallmatrix*":["MtSmallMatrix",null,"(",")"],bsmallmatrix:["MtSmallMatrix",null,"[","]","c"],"bsmallmatrix*":["MtSmallMatrix",null,"[","]"],Bsmallmatrix:["MtSmallMatrix",null,"\\{","\\}","c"],"Bsmallmatrix*":["MtSmallMatrix",null,"\\{","\\}"],vsmallmatrix:["MtSmallMatrix",null,"\\vert","\\vert","c"],"vsmallmatrix*":["MtSmallMatrix",null,"\\vert","\\vert"],Vsmallmatrix:["MtSmallMatrix",null,"\\Vert","\\Vert","c"],"Vsmallmatrix*":["MtSmallMatrix",null,"\\Vert","\\Vert"],crampedsubarray:["Array",null,null,null,null,"0em","0.1em","S'",1],multlined:"MtMultlined",spreadlines:["SpreadLines",!0],lgathered:["AmsEqnArray",null,null,null,"l",null,".5em","D"],rgathered:["AmsEqnArray",null,null,null,"r",null,".5em","D"]},i.MathtoolsMethods),new e.DelimiterMap("mathtools-delimiters",r.default.delimiter,{"\\lparen":"(","\\rparen":")"}),new e.CommandMap("mathtools-characters",{":":["CenterColon",!0]},i.MathtoolsMethods),MathtoolsMappings}var MathtoolsTags={},__extends$a=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__values$5=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$6=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__importDefault$n=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(MathtoolsTags,"__esModule",{value:!0});MathtoolsTags.MathtoolsTagFormat=void 0;var TexError_js_1$7=__importDefault$n(TexError$1),Tags_js_1$2=Tags,tagID$1=0;function MathtoolsTagFormat(t,r){var e=r.parseOptions.options.tags;e!=="base"&&t.tags.hasOwnProperty(e)&&Tags_js_1$2.TagsFactory.add(e,t.tags[e]);var n=Tags_js_1$2.TagsFactory.create(r.parseOptions.options.tags).constructor,i=function(a){__extends$a(s,a);function s(){var l,c,f=a.call(this)||this;f.mtFormats=new Map,f.mtCurrent=null;var d=r.parseOptions.options.mathtools.tagforms;try{for(var u=__values$5(Object.keys(d)),m=u.next();!m.done;m=u.next()){var p=m.value;if(!Array.isArray(d[p])||d[p].length!==3)throw new TexError_js_1$7.default("InvalidTagFormDef",'The tag form definition for "%1" should be an array fo three strings',p);f.mtFormats.set(p,d[p])}}catch(_){l={error:_}}finally{try{m&&!m.done&&(c=u.return)&&c.call(u)}finally{if(l)throw l.error}}return f}return s.prototype.formatTag=function(l){if(this.mtCurrent){var c=__read$6(this.mtCurrent,3),f=c[0],d=c[1],u=c[2];return u?"".concat(f).concat(u,"{").concat(l,"}").concat(d):"".concat(f).concat(l).concat(d)}return a.prototype.formatTag.call(this,l)},s}(n);tagID$1++;var o="MathtoolsTags-"+tagID$1;Tags_js_1$2.TagsFactory.add(o,i),r.parseOptions.options.tags=o}MathtoolsTags.MathtoolsTagFormat=MathtoolsTagFormat;var MathtoolsItems={},__extends$9=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__importDefault$m=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(MathtoolsItems,"__esModule",{value:!0});MathtoolsItems.MultlinedItem=void 0;var AmsItems_js_1=AmsItems,NodeUtil_js_1$6=__importDefault$m(NodeUtil$1),TexConstants_js_1$4=TexConstants,MultlinedItem=function(t){__extends$9(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"multlined"},enumerable:!1,configurable:!0}),r.prototype.EndTable=function(){if((this.Size()||this.row.length)&&(this.EndEntry(),this.EndRow()),this.table.length>1){var e=this.factory.configuration.options.mathtools,n=e.multlinegap,i=e["firstline-afterskip"]||n,o=e["lastline-preskip"]||n,a=NodeUtil_js_1$6.default.getChildren(this.table[0])[0];NodeUtil_js_1$6.default.getAttribute(a,"columnalign")!==TexConstants_js_1$4.TexConstant.Align.RIGHT&&a.appendChild(this.create("node","mspace",[],{width:i}));var s=NodeUtil_js_1$6.default.getChildren(this.table[this.table.length-1])[0];if(NodeUtil_js_1$6.default.getAttribute(s,"columnalign")!==TexConstants_js_1$4.TexConstant.Align.LEFT){var l=NodeUtil_js_1$6.default.getChildren(s)[0];l.childNodes.unshift(null);var c=this.create("node","mspace",[],{width:o});NodeUtil_js_1$6.default.setChild(l,0,c)}}t.prototype.EndTable.call(this)},r}(AmsItems_js_1.MultlineItem);MathtoolsItems.MultlinedItem=MultlinedItem;var hasRequiredMathtoolsConfiguration;function requireMathtoolsConfiguration(){return hasRequiredMathtoolsConfiguration||(hasRequiredMathtoolsConfiguration=1,function(t){var r=commonjsGlobal&&commonjsGlobal.__values||function(p){var _=typeof Symbol=="function"&&Symbol.iterator,y=_&&p[_],g=0;if(y)return y.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&g>=p.length&&(p=void 0),{value:p&&p[g++],done:!p}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},e=commonjsGlobal&&commonjsGlobal.__importDefault||function(p){return p&&p.__esModule?p:{default:p}},n;Object.defineProperty(t,"__esModule",{value:!0}),t.MathtoolsConfiguration=t.fixPrescripts=t.PAIREDDELIMS=void 0;var i=Configuration,o=SymbolMap,a=e(NodeUtil$1),s=Options$1;requireMathtoolsMappings();var l=requireMathtoolsUtil(),c=MathtoolsTags,f=MathtoolsItems;t.PAIREDDELIMS="mathtools-paired-delims";function d(p){new o.CommandMap(t.PAIREDDELIMS,{},{}),p.append(i.Configuration.local({handler:{macro:[t.PAIREDDELIMS]},priority:-5}))}function u(p,_){var y,g,v=_.parseOptions,x=v.options.mathtools.pairedDelimiters;try{for(var b=r(Object.keys(x)),S=b.next();!S.done;S=b.next()){var M=S.value;l.MathtoolsUtil.addPairedDelims(v,M,x[M])}}catch(C){y={error:C}}finally{try{S&&!S.done&&(g=b.return)&&g.call(b)}finally{if(y)throw y.error}}(0,c.MathtoolsTagFormat)(p,_)}function m(p){var _,y,g,v,x,b,S=p.data;try{for(var M=r(S.getList("mmultiscripts")),C=M.next();!C.done;C=M.next()){var A=C.value;if(A.getProperty("fixPrescript")){var E=a.default.getChildren(A),$=0;try{for(var D=(g=void 0,r([1,2])),B=D.next();!B.done;B=D.next()){var F=B.value;E[F]||(a.default.setChild(A,F,S.nodeFactory.create("node","none")),$++)}}catch(W){g={error:W}}finally{try{B&&!B.done&&(v=D.return)&&v.call(D)}finally{if(g)throw g.error}}try{for(var I=(x=void 0,r([4,5])),H=I.next();!H.done;H=I.next()){var F=H.value;a.default.isType(E[F],"mrow")&&a.default.getChildren(E[F]).length===0&&a.default.setChild(A,F,S.nodeFactory.create("node","none"))}}catch(W){x={error:W}}finally{try{H&&!H.done&&(b=I.return)&&b.call(I)}finally{if(x)throw x.error}}$===2&&E.splice(1,2)}}}catch(W){_={error:W}}finally{try{C&&!C.done&&(y=M.return)&&y.call(M)}finally{if(_)throw _.error}}}t.fixPrescripts=m,t.MathtoolsConfiguration=i.Configuration.create("mathtools",{handler:{macro:["mathtools-macros","mathtools-delimiters"],environment:["mathtools-environments"],delimiter:["mathtools-delimiters"],character:["mathtools-characters"]},items:(n={},n[f.MultlinedItem.prototype.kind]=f.MultlinedItem,n),init:d,config:u,postprocessors:[[m,-6]],options:{mathtools:{multlinegap:"1em","multlined-pos":"c","firstline-afterskip":"","lastline-preskip":"","smallmatrix-align":"c",shortvdotsadjustabove:".2em",shortvdotsadjustbelow:".2em",centercolon:!1,"centercolon-offset":".04em","thincolon-dx":"-.04em","thincolon-dw":"-.08em","use-unicode":!1,"prescript-sub-format":"","prescript-sup-format":"","prescript-arg-format":"","allow-mathtoolsset":!0,pairedDelimiters:(0,s.expandable)({}),tagforms:(0,s.expandable)({})}}})}(MathtoolsConfiguration)),MathtoolsConfiguration}var MhchemConfiguration={},mhchemParser$1={};/*!
 *************************************************************************
 *
 *  mhchemParser.ts
 *  4.2.1
 *
 *  Parser for the \ce command and \pu command for MathJax and Co.
 *
 *  mhchem's \ce is a tool for writing beautiful chemical equations easily.
 *  mhchem's \pu is a tool for writing physical units easily.
 *
 *  ----------------------------------------------------------------------
 *
 *  Copyright (c) 2015-2023 Martin Hensel
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 *
 *  ----------------------------------------------------------------------
 *
 *  https://github.com/mhchem/mhchemParser
 *
 */Object.defineProperty(mhchemParser$1,"__esModule",{value:!0});mhchemParser$1.mhchemParser=void 0;var mhchemParser=function(){function t(){}return t.toTex=function(r,e){return _mhchemTexify.go(_mhchemParser.go(r,e),e!=="tex")},t}();mhchemParser$1.mhchemParser=mhchemParser;function _mhchemCreateTransitions(t){var r,e,n={};for(r in t)for(e in t[r]){var i=e.split("|");t[r][e].stateArray=i;for(var o=0;o<i.length;o++)n[i[o]]=[]}for(r in t)for(e in t[r])for(var i=t[r][e].stateArray||[],o=0;o<i.length;o++){var a=t[r][e];a.action_=[].concat(a.action_);for(var s=0;s<a.action_.length;s++)typeof a.action_[s]=="string"&&(a.action_[s]={type_:a.action_[s]});for(var l=r.split("|"),c=0;c<l.length;c++)if(i[o]==="*"){var f=void 0;for(f in n)n[f].push({pattern:l[c],task:a})}else n[i[o]].push({pattern:l[c],task:a})}return n}var _mhchemParser={go:function(t,r){if(!t)return[];r===void 0&&(r="ce");var e="0",n={};n.parenthesisLevel=0,t=t.replace(/\n/g," "),t=t.replace(/[\u2212\u2013\u2014\u2010]/g,"-"),t=t.replace(/[\u2026]/g,"...");for(var i,o=10,a=[];;){i!==t?(o=10,i=t):o--;var s=_mhchemParser.stateMachines[r],l=s.transitions[e]||s.transitions["*"];t:for(var c=0;c<l.length;c++){var f=_mhchemParser.patterns.match_(l[c].pattern,t);if(f){for(var d=l[c].task,u=0;u<d.action_.length;u++){var m=void 0;if(s.actions[d.action_[u].type_])m=s.actions[d.action_[u].type_](n,f.match_,d.action_[u].option);else if(_mhchemParser.actions[d.action_[u].type_])m=_mhchemParser.actions[d.action_[u].type_](n,f.match_,d.action_[u].option);else throw["MhchemBugA","mhchem bug A. Please report. ("+d.action_[u].type_+")"];_mhchemParser.concatArray(a,m)}if(e=d.nextState||e,t.length>0){if(d.revisit||(t=f.remainder),!d.toContinue)break t}else return a}}if(o<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(t,r){if(r)if(Array.isArray(r))for(var e=0;e<r.length;e++)t.push(r[e]);else t.push(r)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(t){var r=t.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:(?:([eE])|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return r&&r[0]?{match_:r.slice(1),remainder:t.substr(r[0].length)}:null},"(-)(9)^(-9)":/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/,"state of aggregation $":function(t){var r=_mhchemParser.patterns.findObserveGroups(t,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(r&&r.remainder.match(/^($|[\s,;\)\]\}])/))return r;var e=t.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return e?{match_:e[0],remainder:t.substr(e[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". __* ":/^([.\u22C5\u00B7\u2022]|[*])\s*/,"...":/^\.\.\.(?=$|[^.])/,"^{(...)}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"^{","","","}")},"^($...$)":function(t){return _mhchemParser.patterns.findObserveGroups(t,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"_{","","","}")},"_($...$)":function(t){return _mhchemParser.patterns.findObserveGroups(t,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}^":/^\{\}(?=\^)/,"{}":/^\{\}/,"{...}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"","{","}","")},"{(...)}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"{","","","}")},"$...$":function(t){return _mhchemParser.patterns.findObserveGroups(t,"","$","$","")},"${(...)}$__$(...)$":function(t){return _mhchemParser.patterns.findObserveGroups(t,"${","","","}$")||_mhchemParser.patterns.findObserveGroups(t,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(t){return _mhchemParser.patterns.findObserveGroups(t,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"\\color{","","","}")},"\\color{(...)}{(...)}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"\\color{","","","}","{","","","}")||_mhchemParser.patterns.findObserveGroups(t,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"\\ce{","","","}")},"\\pu{(...)}":function(t){return _mhchemParser.patterns.findObserveGroups(t,"\\pu{","","","}")},oxidation$:/^(?:[+-][IVX]+|(?:\\pm|\$\\pm\$|\+-|\+\/-)\s*0)$/,"d-oxidation$":/^(?:[+-]?[IVX]+|(?:\\pm|\$\\pm\$|\+-|\+\/-)\s*0)$/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(t){var r;if(r=t.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/),r)return{match_:r[0],remainder:t.substr(r[0].length)};var e=_mhchemParser.patterns.findObserveGroups(t,"","$","$","");return e&&(r=e.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/),r)?{match_:r[0],remainder:t.substr(r[0].length)}:null},amount2:function(t){return this.amount(t)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(t){if(t.match(/^\([a-z]+\)$/))return null;var r=t.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return r?{match_:r[0],remainder:t.substr(r[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(t,r,e,n,i,o,a,s,l,c){var f=function(g,v){if(typeof v=="string")return g.indexOf(v)!==0?null:v;var x=g.match(v);return x?x[0]:null},d=function(g,v,x){for(var b=0;v<g.length;){var S=g.charAt(v),M=f(g.substr(v),x);if(M!==null&&b===0)return{endMatchBegin:v,endMatchEnd:v+M.length};if(S==="{")b++;else if(S==="}"){if(b===0)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];b--}v++}return b>0,null},u=f(t,r);if(u===null||(t=t.substr(u.length),u=f(t,e),u===null))return null;var m=d(t,u.length,n||i);if(m===null)return null;var p=t.substring(0,n?m.endMatchEnd:m.endMatchBegin);if(o||a){var _=this.findObserveGroups(t.substr(m.endMatchEnd),o,a,s,l);if(_===null)return null;var y=[p,_.match_];return{match_:c?y.join(""):y,remainder:_.remainder}}else return{match_:p,remainder:t.substr(m.endMatchEnd)}},match_:function(t,r){var e=_mhchemParser.patterns.patterns[t];if(e===void 0)throw["MhchemBugP","mhchem bug P. Please report. ("+t+")"];if(typeof e=="function")return _mhchemParser.patterns.patterns[t](r);var n=r.match(e);return n?n.length>2?{match_:n.slice(1),remainder:r.substr(n[0].length)}:{match_:n[1]||n[0],remainder:r.substr(n[0].length)}:null}},actions:{"a=":function(t,r){t.a=(t.a||"")+r},"b=":function(t,r){t.b=(t.b||"")+r},"p=":function(t,r){t.p=(t.p||"")+r},"o=":function(t,r){t.o=(t.o||"")+r},"o=+p1":function(t,r,e){t.o=(t.o||"")+e},"q=":function(t,r){t.q=(t.q||"")+r},"d=":function(t,r){t.d=(t.d||"")+r},"rm=":function(t,r){t.rm=(t.rm||"")+r},"text=":function(t,r){t.text_=(t.text_||"")+r},insert:function(t,r,e){return{type_:e}},"insert+p1":function(t,r,e){return{type_:e,p1:r}},"insert+p1+p2":function(t,r,e){return{type_:e,p1:r[0],p2:r[1]}},copy:function(t,r){return r},write:function(t,r,e){return e},rm:function(t,r){return{type_:"rm",p1:r}},text:function(t,r){return _mhchemParser.go(r,"text")},"tex-math":function(t,r){return _mhchemParser.go(r,"tex-math")},"tex-math tight":function(t,r){return _mhchemParser.go(r,"tex-math tight")},bond:function(t,r,e){return{type_:"bond",kind_:e||r}},"color0-output":function(t,r){return{type_:"color0",color:r}},ce:function(t,r){return _mhchemParser.go(r,"ce")},pu:function(t,r){return _mhchemParser.go(r,"pu")},"1/2":function(t,r){var e=[];r.match(/^[+\-]/)&&(e.push(r.substr(0,1)),r=r.substr(1));var n=r.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return n[1]=n[1].replace(/\$/g,""),e.push({type_:"frac",p1:n[1],p2:n[2]}),n[3]&&(n[3]=n[3].replace(/\$/g,""),e.push({type_:"tex-math",p1:n[3]})),e},"9,9":function(t,r){return _mhchemParser.go(r,"9,9")}},stateMachines:{tex:{transitions:_mhchemCreateTransitions({empty:{0:{action_:"copy"}},"\\ce{(...)}":{0:{action_:[{type_:"write",option:"{"},"ce",{type_:"write",option:"}"}]}},"\\pu{(...)}":{0:{action_:[{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},else:{0:{action_:"copy"}}}),actions:{}},ce:{transitions:_mhchemCreateTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{action_:[]}},space:{a:{action_:[],nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". __* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{action_:[]}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}^":{"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"tinySkip"}],nextState:"1"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\pu{(...)}":{"*":{action_:["output",{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}],nextState:"3"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(t,r){var e;if((t.d||"").match(/^[1-9][0-9]*$/)){var n=t.d;t.d=void 0,e=this.output(t),e.push({type_:"tinySkip"}),t.b=n}else e=this.output(t);return _mhchemParser.actions["o="](t,r),e},"d= kv":function(t,r){t.d=r,t.dType="kv"},"charge or bond":function(t,r){if(t.beginsWithBond){var e=[];return _mhchemParser.concatArray(e,this.output(t)),_mhchemParser.concatArray(e,_mhchemParser.actions.bond(t,r,"-")),e}else{t.d=r;return}},"- after o/d":function(t,r,e){var n=_mhchemParser.patterns.match_("orbital",t.o||""),i=_mhchemParser.patterns.match_("one lowercase greek letter $",t.o||""),o=_mhchemParser.patterns.match_("one lowercase latin letter $",t.o||""),a=_mhchemParser.patterns.match_("$one lowercase latin letter$ $",t.o||""),s=r==="-"&&(n&&n.remainder===""||i||o||a);s&&!t.a&&!t.b&&!t.p&&!t.d&&!t.q&&!n&&o&&(t.o="$"+t.o+"$");var l=[];return s?(_mhchemParser.concatArray(l,this.output(t)),l.push({type_:"hyphen"})):(n=_mhchemParser.patterns.match_("digits",t.d||""),e&&n&&n.remainder===""?(_mhchemParser.concatArray(l,_mhchemParser.actions["d="](t,r)),_mhchemParser.concatArray(l,this.output(t))):(_mhchemParser.concatArray(l,this.output(t)),_mhchemParser.concatArray(l,_mhchemParser.actions.bond(t,r,"-")))),l},"a to o":function(t){t.o=t.a,t.a=void 0},"sb=true":function(t){t.sb=!0},"sb=false":function(t){t.sb=!1},"beginsWithBond=true":function(t){t.beginsWithBond=!0},"beginsWithBond=false":function(t){t.beginsWithBond=!1},"parenthesisLevel++":function(t){t.parenthesisLevel++},"parenthesisLevel--":function(t){t.parenthesisLevel--},"state of aggregation":function(t,r){return{type_:"state of aggregation",p1:_mhchemParser.go(r,"o")}},comma:function(t,r){var e=r.replace(/\s*$/,""),n=e!==r;return n&&t.parenthesisLevel===0?{type_:"comma enumeration L",p1:e}:{type_:"comma enumeration M",p1:e}},output:function(t,r,e){var n;if(!t.r)n=[],!t.a&&!t.b&&!t.p&&!t.o&&!t.q&&!t.d&&!e||(t.sb&&n.push({type_:"entitySkip"}),!t.o&&!t.q&&!t.d&&!t.b&&!t.p&&e!==2?(t.o=t.a,t.a=void 0):!t.o&&!t.q&&!t.d&&(t.b||t.p)?(t.o=t.a,t.d=t.b,t.q=t.p,t.a=t.b=t.p=void 0):t.o&&t.dType==="kv"&&_mhchemParser.patterns.match_("d-oxidation$",t.d||"")?t.dType="oxidation":t.o&&t.dType==="kv"&&!t.q&&(t.dType=void 0),n.push({type_:"chemfive",a:_mhchemParser.go(t.a,"a"),b:_mhchemParser.go(t.b,"bd"),p:_mhchemParser.go(t.p,"pq"),o:_mhchemParser.go(t.o,"o"),q:_mhchemParser.go(t.q,"pq"),d:_mhchemParser.go(t.d,t.dType==="oxidation"?"oxidation":"bd"),dType:t.dType}));else{var i=void 0;t.rdt==="M"?i=_mhchemParser.go(t.rd,"tex-math"):t.rdt==="T"?i=[{type_:"text",p1:t.rd||""}]:i=_mhchemParser.go(t.rd,"ce");var o=void 0;t.rqt==="M"?o=_mhchemParser.go(t.rq,"tex-math"):t.rqt==="T"?o=[{type_:"text",p1:t.rq||""}]:o=_mhchemParser.go(t.rq,"ce"),n={type_:"arrow",r:t.r,rd:i,rq:o}}for(var a in t)a!=="parenthesisLevel"&&a!=="beginsWithBond"&&delete t[a];return n},"oxidation-output":function(t,r){var e=["{"];return _mhchemParser.concatArray(e,_mhchemParser.go(r,"oxidation")),e.push("}"),e},"frac-output":function(t,r){return{type_:"frac-ce",p1:_mhchemParser.go(r[0],"ce"),p2:_mhchemParser.go(r[1],"ce")}},"overset-output":function(t,r){return{type_:"overset",p1:_mhchemParser.go(r[0],"ce"),p2:_mhchemParser.go(r[1],"ce")}},"underset-output":function(t,r){return{type_:"underset",p1:_mhchemParser.go(r[0],"ce"),p2:_mhchemParser.go(r[1],"ce")}},"underbrace-output":function(t,r){return{type_:"underbrace",p1:_mhchemParser.go(r[0],"ce"),p2:_mhchemParser.go(r[1],"ce")}},"color-output":function(t,r){return{type_:"color",color1:r[0],color2:_mhchemParser.go(r[1],"ce")}},"r=":function(t,r){t.r=r},"rdt=":function(t,r){t.rdt=r},"rd=":function(t,r){t.rd=r},"rqt=":function(t,r){t.rqt=r},"rq=":function(t,r){t.rq=r},operator:function(t,r,e){return{type_:"operator",kind_:e||r}}}},a:{transitions:_mhchemCreateTransitions({empty:{"*":{action_:[]}},"1/2$":{0:{action_:"1/2"}},else:{0:{action_:[],nextState:"1",revisit:!0}},"${(...)}$__$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:_mhchemCreateTransitions({empty:{"*":{action_:[]}},"1/2$":{0:{action_:"1/2"}},else:{0:{action_:[],nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\pu{(...)}":{"*":{action_:[{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$__$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:[{type_:"write",option:"{"},"text",{type_:"write",option:"}"}]}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:_mhchemCreateTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$__$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\pu{(...)}":{"*":{action_:["output",{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(t){if(t.text_){var r={type_:"text",p1:t.text_};for(var e in t)delete t[e];return r}}}},pq:{transitions:_mhchemCreateTransitions({empty:{"*":{action_:[]}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{action_:[],nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{action_:[],nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{action_:[],nextState:"!f",revisit:!0}},"${(...)}$__$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}":{"*":{action_:"color-output"}},"\\color{(...)}":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\pu{(...)}":{"*":{action_:[{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(t,r){return{type_:"state of aggregation subscript",p1:_mhchemParser.go(r,"o")}},"color-output":function(t,r){return{type_:"color",color1:r[0],color2:_mhchemParser.go(r[1],"pq")}}}},bd:{transitions:_mhchemCreateTransitions({empty:{"*":{action_:[]}},x$:{0:{action_:[],nextState:"!f",revisit:!0}},formula$:{0:{action_:[],nextState:"f",revisit:!0}},else:{0:{action_:[],nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$__$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}":{"*":{action_:"color-output"}},"\\color{(...)}":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\pu{(...)}":{"*":{action_:[{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(t,r){return{type_:"color",color1:r[0],color2:_mhchemParser.go(r[1],"bd")}}}},oxidation:{transitions:_mhchemCreateTransitions({empty:{"*":{action_:"roman-numeral"}},"pm-operator":{"*":{action_:{type_:"o=+p1",option:"\\pm"}}},else:{"*":{action_:"o="}}}),actions:{"roman-numeral":function(t){return{type_:"roman numeral",p1:t.o||""}}}},"tex-math":{transitions:_mhchemCreateTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"\\pu{(...)}":{"*":{action_:["output",{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(t){if(t.o){var r={type_:"tex-math",p1:t.o};for(var e in t)delete t[e];return r}}}},"tex-math tight":{transitions:_mhchemCreateTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"\\pu{(...)}":{"*":{action_:["output",{type_:"write",option:"{"},"pu",{type_:"write",option:"}"}]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(t,r){t.o=(t.o||"")+"{"+r+"}"},output:function(t){if(t.o){var r={type_:"tex-math",p1:t.o};for(var e in t)delete t[e];return r}}}},"9,9":{transitions:_mhchemCreateTransitions({empty:{"*":{action_:[]}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:_mhchemCreateTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{action_:[]}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(t,r){var e=[];return r[0]==="+-"||r[0]==="+/-"?e.push("\\pm "):r[0]&&e.push(r[0]),r[1]&&(_mhchemParser.concatArray(e,_mhchemParser.go(r[1],"pu-9,9")),r[2]&&(r[2].match(/[,.]/)?_mhchemParser.concatArray(e,_mhchemParser.go(r[2],"pu-9,9")):e.push(r[2])),(r[3]||r[4])&&(r[3]==="e"||r[4]==="*"?e.push({type_:"cdot"}):e.push({type_:"times"}))),r[5]&&e.push("10^{"+r[5]+"}"),e},"number^":function(t,r){var e=[];return r[0]==="+-"||r[0]==="+/-"?e.push("\\pm "):r[0]&&e.push(r[0]),_mhchemParser.concatArray(e,_mhchemParser.go(r[1],"pu-9,9")),e.push("^{"+r[2]+"}"),e},operator:function(t,r,e){return{type_:"operator",kind_:e||r}},space:function(){return{type_:"pu-space-1"}},output:function(t){var r,e=_mhchemParser.patterns.match_("{(...)}",t.d||"");e&&e.remainder===""&&(t.d=e.match_);var n=_mhchemParser.patterns.match_("{(...)}",t.q||"");if(n&&n.remainder===""&&(t.q=n.match_),t.d&&(t.d=t.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.d=t.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),t.q){t.q=t.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),t.q=t.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var i={d:_mhchemParser.go(t.d,"pu"),q:_mhchemParser.go(t.q,"pu")};t.o==="//"?r={type_:"pu-frac",p1:i.d,p2:i.q}:(r=i.d,i.d.length>1||i.q.length>1?r.push({type_:" / "}):r.push({type_:"/"}),_mhchemParser.concatArray(r,i.q))}else r=_mhchemParser.go(t.d,"pu-2");for(var o in t)delete t[o];return r}}},"pu-2":{transitions:_mhchemCreateTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(t,r){t.rm+="^{"+r+"}"},space:function(){return{type_:"pu-space-2"}},output:function(t){var r=[];if(t.rm){var e=_mhchemParser.patterns.match_("{(...)}",t.rm||"");e&&e.remainder===""?r=_mhchemParser.go(e.match_,"pu"):r={type_:"rm",p1:t.rm}}for(var n in t)delete t[n];return r}}},"pu-9,9":{transitions:_mhchemCreateTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(t){var r=[];if(t.text_=t.text_||"",t.text_.length>4){var e=t.text_.length%3;e===0&&(e=3);for(var n=t.text_.length-3;n>0;n-=3)r.push(t.text_.substr(n,3)),r.push({type_:"1000 separator"});r.push(t.text_.substr(0,e)),r.reverse()}else r.push(t.text_);for(var i in t)delete t[i];return r},"output-o":function(t){var r=[];if(t.text_=t.text_||"",t.text_.length>4){var e=t.text_.length-3,n=void 0;for(n=0;n<e;n+=3)r.push(t.text_.substr(n,3)),r.push({type_:"1000 separator"});r.push(t.text_.substr(n))}else r.push(t.text_);for(var i in t)delete t[i];return r}}}}},_mhchemTexify={go:function(t,r){if(!t)return"";for(var e="",n=!1,i=0;i<t.length;i++){var o=t[i];typeof o=="string"?e+=o:(e+=_mhchemTexify._go2(o),o.type_==="1st-level escape"&&(n=!0))}return r&&!n&&e&&(e="{"+e+"}"),e},_goInner:function(t){return _mhchemTexify.go(t,!1)},_go2:function(t){var r;switch(t.type_){case"chemfive":r="";var e={a:_mhchemTexify._goInner(t.a),b:_mhchemTexify._goInner(t.b),p:_mhchemTexify._goInner(t.p),o:_mhchemTexify._goInner(t.o),q:_mhchemTexify._goInner(t.q),d:_mhchemTexify._goInner(t.d)};e.a&&(e.a.match(/^[+\-]/)&&(e.a="{"+e.a+"}"),r+=e.a+"\\,"),(e.b||e.p)&&(r+="{\\vphantom{A}}",r+="^{\\hphantom{"+(e.b||"")+"}}_{\\hphantom{"+(e.p||"")+"}}",r+="\\mkern-1.5mu",r+="{\\vphantom{A}}",r+="^{\\smash[t]{\\vphantom{2}}\\llap{"+(e.b||"")+"}}",r+="_{\\vphantom{2}\\llap{\\smash[t]{"+(e.p||"")+"}}}"),e.o&&(e.o.match(/^[+\-]/)&&(e.o="{"+e.o+"}"),r+=e.o),t.dType==="kv"?((e.d||e.q)&&(r+="{\\vphantom{A}}"),e.d&&(r+="^{"+e.d+"}"),e.q&&(r+="_{\\smash[t]{"+e.q+"}}")):t.dType==="oxidation"?(e.d&&(r+="{\\vphantom{A}}",r+="^{"+e.d+"}"),e.q&&(r+="{\\vphantom{A}}",r+="_{\\smash[t]{"+e.q+"}}")):(e.q&&(r+="{\\vphantom{A}}",r+="_{\\smash[t]{"+e.q+"}}"),e.d&&(r+="{\\vphantom{A}}",r+="^{"+e.d+"}"));break;case"rm":r="\\mathrm{"+t.p1+"}";break;case"text":t.p1.match(/[\^_]/)?(t.p1=t.p1.replace(" ","~").replace("-","\\text{-}"),r="\\mathrm{"+t.p1+"}"):r="\\text{"+t.p1+"}";break;case"roman numeral":r="\\mathrm{"+t.p1+"}";break;case"state of aggregation":r="\\mskip2mu "+_mhchemTexify._goInner(t.p1);break;case"state of aggregation subscript":r="\\mskip1mu "+_mhchemTexify._goInner(t.p1);break;case"bond":if(r=_mhchemTexify._getBond(t.kind_),!r)throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+t.kind_+")"];break;case"frac":var n="\\frac{"+t.p1+"}{"+t.p2+"}";r="\\mathchoice{\\textstyle"+n+"}{"+n+"}{"+n+"}{"+n+"}";break;case"pu-frac":var i="\\frac{"+_mhchemTexify._goInner(t.p1)+"}{"+_mhchemTexify._goInner(t.p2)+"}";r="\\mathchoice{\\textstyle"+i+"}{"+i+"}{"+i+"}{"+i+"}";break;case"tex-math":r=t.p1+" ";break;case"frac-ce":r="\\frac{"+_mhchemTexify._goInner(t.p1)+"}{"+_mhchemTexify._goInner(t.p2)+"}";break;case"overset":r="\\overset{"+_mhchemTexify._goInner(t.p1)+"}{"+_mhchemTexify._goInner(t.p2)+"}";break;case"underset":r="\\underset{"+_mhchemTexify._goInner(t.p1)+"}{"+_mhchemTexify._goInner(t.p2)+"}";break;case"underbrace":r="\\underbrace{"+_mhchemTexify._goInner(t.p1)+"}_{"+_mhchemTexify._goInner(t.p2)+"}";break;case"color":r="{\\color{"+t.color1+"}{"+_mhchemTexify._goInner(t.color2)+"}}";break;case"color0":r="\\color{"+t.color+"}";break;case"arrow":var o={rd:_mhchemTexify._goInner(t.rd),rq:_mhchemTexify._goInner(t.rq)},a=_mhchemTexify._getArrow(t.r);o.rd||o.rq?t.r==="<=>"||t.r==="<=>>"||t.r==="<<=>"||t.r==="<-->"?(a="\\long"+a,o.rd&&(a="\\overset{"+o.rd+"}{"+a+"}"),o.rq&&(t.r==="<-->"?a="\\underset{\\lower2mu{"+o.rq+"}}{"+a+"}":a="\\underset{\\lower6mu{"+o.rq+"}}{"+a+"}"),a=" {}\\mathrel{"+a+"}{} "):(o.rq&&(a+="[{"+o.rq+"}]"),a+="{"+o.rd+"}",a=" {}\\mathrel{\\x"+a+"}{} "):a=" {}\\mathrel{\\long"+a+"}{} ",r=a;break;case"operator":r=_mhchemTexify._getOperator(t.kind_);break;case"1st-level escape":r=t.p1+" ";break;case"space":r=" ";break;case"tinySkip":r="\\mkern2mu";break;case"entitySkip":r="~";break;case"pu-space-1":r="~";break;case"pu-space-2":r="\\mkern3mu ";break;case"1000 separator":r="\\mkern2mu ";break;case"commaDecimal":r="{,}";break;case"comma enumeration L":r="{"+t.p1+"}\\mkern6mu ";break;case"comma enumeration M":r="{"+t.p1+"}\\mkern3mu ";break;case"comma enumeration S":r="{"+t.p1+"}\\mkern1mu ";break;case"hyphen":r="\\text{-}";break;case"addition compound":r="\\,{\\cdot}\\,";break;case"electron dot":r="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":r="{\\times}";break;case"prime":r="\\prime ";break;case"cdot":r="\\cdot ";break;case"tight cdot":r="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":r="\\times ";break;case"circa":r="{\\sim}";break;case"^":r="uparrow";break;case"v":r="downarrow";break;case"ellipsis":r="\\ldots ";break;case"/":r="/";break;case" / ":r="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return r},_getArrow:function(t){switch(t){case"->":return"rightarrow";case"→":return"rightarrow";case"⟶":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<-->":return"leftrightarrows";case"<=>":return"rightleftharpoons";case"⇌":return"rightleftharpoons";case"<=>>":return"Rightleftharpoons";case"<<=>":return"Leftrightharpoons";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(t){switch(t){case"-":return"{-}";case"1":return"{-}";case"=":return"{=}";case"2":return"{=}";case"#":return"{\\equiv}";case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\rlap{\\lower.1em{-}}\\raise.1em{\\tripledash}}";case"~=":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"~--":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{\\tripledash}}-}";case"-~-":return"{\\rlap{\\lower.2em{-}}\\rlap{\\raise.2em{-}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(t){switch(t){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":return" {}\\approx{} ";case"$\\approx$":return" {}\\approx{} ";case"v":return" \\downarrow{} ";case"(v)":return" \\downarrow{} ";case"^":return" \\uparrow{} ";case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}},__importDefault$l=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(MhchemConfiguration,"__esModule",{value:!0});MhchemConfiguration.MhchemConfiguration=void 0;var Configuration_js_1$e=Configuration,SymbolMap_js_1$a=SymbolMap,TexError_js_1$6=__importDefault$l(TexError$1),BaseMethods_js_1$4=__importDefault$l(BaseMethods$1),AmsMethods_js_1=AmsMethods,mhchemParser_js_1=mhchemParser$1,MhchemMethods={};MhchemMethods.Macro=BaseMethods_js_1$4.default.Macro;MhchemMethods.xArrow=AmsMethods_js_1.AmsMethods.xArrow;MhchemMethods.Machine=function(t,r,e){var n=t.GetArgument(r),i;try{i=mhchemParser_js_1.mhchemParser.toTex(n,e)}catch(o){throw new TexError_js_1$6.default(o[0],o[1])}t.string=i+t.string.substr(t.i),t.i=0};new SymbolMap_js_1$a.CommandMap("mhchem",{ce:["Machine","ce"],pu:["Machine","pu"],longrightleftharpoons:["Macro","\\stackrel{\\textstyle{-}\\!\\!{\\rightharpoonup}}{\\smash{{\\leftharpoondown}\\!\\!{-}}}"],longRightleftharpoons:["Macro","\\stackrel{\\textstyle{-}\\!\\!{\\rightharpoonup}}{\\smash{\\leftharpoondown}}"],longLeftrightharpoons:["Macro","\\stackrel{\\textstyle\\vphantom{{-}}{\\rightharpoonup}}{\\smash{{\\leftharpoondown}\\!\\!{-}}}"],longleftrightarrows:["Macro","\\stackrel{\\longrightarrow}{\\smash{\\longleftarrow}\\Rule{0px}{.25em}{0px}}"],tripledash:["Macro","\\vphantom{-}\\raise2mu{\\kern2mu\\tiny\\text{-}\\kern1mu\\text{-}\\kern1mu\\text{-}\\kern2mu}"],xleftrightarrow:["xArrow",8596,6,6],xrightleftharpoons:["xArrow",8652,5,7],xRightleftharpoons:["xArrow",8652,5,7],xLeftrightharpoons:["xArrow",8652,5,7]},MhchemMethods);MhchemConfiguration.MhchemConfiguration=Configuration_js_1$e.Configuration.create("mhchem",{handler:{macro:["mhchem"]}});var NoErrorsConfiguration={};Object.defineProperty(NoErrorsConfiguration,"__esModule",{value:!0});NoErrorsConfiguration.NoErrorsConfiguration=void 0;var Configuration_js_1$d=Configuration;function noErrors(t,r,e,n){var i=t.create("token","mtext",{},n.replace(/\n/g," ")),o=t.create("node","merror",[i],{"data-mjx-error":r,title:r});return o}NoErrorsConfiguration.NoErrorsConfiguration=Configuration_js_1$d.Configuration.create("noerrors",{nodes:{error:noErrors}});var NoUndefinedConfiguration={},__values$4=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(NoUndefinedConfiguration,"__esModule",{value:!0});NoUndefinedConfiguration.NoUndefinedConfiguration=void 0;var Configuration_js_1$c=Configuration;function noUndefined(t,r){var e,n,i=t.create("text","\\"+r),o=t.options.noundefined||{},a={};try{for(var s=__values$4(["color","background","size"]),l=s.next();!l.done;l=s.next()){var c=l.value;o[c]&&(a["math"+c]=o[c])}}catch(f){e={error:f}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}t.Push(t.create("node","mtext",[],a,i))}NoUndefinedConfiguration.NoUndefinedConfiguration=Configuration_js_1$c.Configuration.create("noundefined",{fallback:{macro:noUndefined},options:{noundefined:{color:"red",background:"",size:""}},priority:3});var TextMacrosConfiguration={},TextParser$1={},__extends$8=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__values$3=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$5=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$4=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__importDefault$k=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(TextParser$1,"__esModule",{value:!0});TextParser$1.TextParser=void 0;var TexParser_js_1$6=__importDefault$k(requireTexParser()),TexError_js_1$5=__importDefault$k(TexError$1),ParseUtil_js_1$5=__importDefault$k(requireParseUtil()),MmlNode_js_1$5=MmlNode,NodeUtil_js_1$5=__importDefault$k(NodeUtil$1),BaseItems_js_1$2=BaseItems,TextParser=function(t){__extends$8(r,t);function r(e,n,i,o){var a=t.call(this,e,n,i)||this;return a.level=o,a}return Object.defineProperty(r.prototype,"texParser",{get:function(){return this.configuration.packageData.get("textmacros").texParser},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tags",{get:function(){return this.texParser.tags},enumerable:!1,configurable:!0}),r.prototype.mml=function(){return this.level!=null?this.create("node","mstyle",this.nodes,{displaystyle:!1,scriptlevel:this.level}):this.nodes.length===1?this.nodes[0]:this.create("node","mrow",this.nodes)},r.prototype.Parse=function(){this.text="",this.nodes=[],this.envStack=[],t.prototype.Parse.call(this)},r.prototype.saveText=function(){if(this.text){var e=this.stack.env.mathvariant,n=ParseUtil_js_1$5.default.internalText(this,this.text,e?{mathvariant:e}:{});this.text="",this.Push(n)}},r.prototype.Push=function(e){if(this.text&&this.saveText(),e instanceof BaseItems_js_1$2.StopItem)return t.prototype.Push.call(this,e);if(e instanceof BaseItems_js_1$2.StyleItem){this.stack.env.mathcolor=this.stack.env.color;return}e instanceof MmlNode_js_1$5.AbstractMmlNode&&(this.addAttributes(e),this.nodes.push(e))},r.prototype.PushMath=function(e){var n,i,o=this.stack.env;e.isKind("TeXAtom")||(e=this.create("node","TeXAtom",[e]));try{for(var a=__values$3(["mathsize","mathcolor"]),s=a.next();!s.done;s=a.next()){var l=s.value;o[l]&&!e.attributes.getExplicit(l)&&(!e.isToken&&!e.isKind("mstyle")&&(e=this.create("node","mstyle",[e])),NodeUtil_js_1$5.default.setAttribute(e,l,o[l]))}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}e.isInferred&&(e=this.create("node","mrow",e.childNodes)),this.nodes.push(e)},r.prototype.addAttributes=function(e){var n,i,o=this.stack.env;if(e.isToken)try{for(var a=__values$3(["mathsize","mathcolor","mathvariant"]),s=a.next();!s.done;s=a.next()){var l=s.value;o[l]&&!e.attributes.getExplicit(l)&&NodeUtil_js_1$5.default.setAttribute(e,l,o[l])}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},r.prototype.ParseTextArg=function(e,n){var i=this.GetArgument(e);return n=Object.assign(Object.assign({},this.stack.env),n),new r(i,n,this.configuration).mml()},r.prototype.ParseArg=function(e){return new r(this.GetArgument(e),this.stack.env,this.configuration).mml()},r.prototype.Error=function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];throw new(TexError_js_1$5.default.bind.apply(TexError_js_1$5.default,__spreadArray$4([void 0,e,n],__read$5(i),!1)))},r}(TexParser_js_1$6.default);TextParser$1.TextParser=TextParser;var TextMacrosMethods={},__importDefault$j=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(TextMacrosMethods,"__esModule",{value:!0});TextMacrosMethods.TextMacrosMethods=void 0;var TexParser_js_1$5=__importDefault$j(requireTexParser()),Retries_js_1=Retries,BaseMethods_js_1$3=__importDefault$j(BaseMethods$1);TextMacrosMethods.TextMacrosMethods={Comment:function(t,r){for(;t.i<t.string.length&&t.string.charAt(t.i)!==`
`;)t.i++;t.i++},Math:function(t,r){t.saveText();for(var e=t.i,n,i,o=0;i=t.GetNext();)switch(n=t.i++,i){case"\\":var a=t.GetCS();a===")"&&(i="\\(");case"$":if(o===0&&r===i){var s=t.texParser.configuration,l=new TexParser_js_1$5.default(t.string.substr(e,n-e),t.stack.env,s).mml();t.PushMath(l);return}break;case"{":o++;break;case"}":o===0&&t.Error("ExtraCloseMissingOpen","Extra close brace or missing open brace"),o--;break}t.Error("MathNotTerminated","Math-mode is not properly terminated")},MathModeOnly:function(t,r){t.Error("MathModeOnly","'%1' allowed only in math mode",r)},Misplaced:function(t,r){t.Error("Misplaced","'%1' can not be used here",r)},OpenBrace:function(t,r){var e=t.stack.env;t.envStack.push(e),t.stack.env=Object.assign({},e)},CloseBrace:function(t,r){t.envStack.length?(t.saveText(),t.stack.env=t.envStack.pop()):t.Error("ExtraCloseMissingOpen","Extra close brace or missing open brace")},OpenQuote:function(t,r){t.string.charAt(t.i)===r?(t.text+="“",t.i++):t.text+="‘"},CloseQuote:function(t,r){t.string.charAt(t.i)===r?(t.text+="”",t.i++):t.text+="’"},Tilde:function(t,r){t.text+=" "},Space:function(t,r){for(t.text+=" ";t.GetNext().match(/\s/);)t.i++},SelfQuote:function(t,r){t.text+=r.substr(1)},Insert:function(t,r,e){t.text+=e},Accent:function(t,r,e){var n=t.ParseArg(r),i=t.create("token","mo",{},e);t.addAttributes(i),t.Push(t.create("node","mover",[n,i]))},Emph:function(t,r){var e=t.stack.env.mathvariant==="-tex-mathit"?"normal":"-tex-mathit";t.Push(t.ParseTextArg(r,{mathvariant:e}))},SetFont:function(t,r,e){t.saveText(),t.stack.env.mathvariant=e},SetSize:function(t,r,e){t.saveText(),t.stack.env.mathsize=e},CheckAutoload:function(t,r){var e=t.configuration.packageData.get("autoload"),n=t.texParser;r=r.slice(1);var i=n.lookup("macro",r);if(!i||e&&i._func===e.Autoload){if(n.parse("macro",[n,r]),!i)return;(0,Retries_js_1.retryAfter)(Promise.resolve())}n.parse("macro",[t,r])},Macro:BaseMethods_js_1$3.default.Macro,Spacer:BaseMethods_js_1$3.default.Spacer,Hskip:BaseMethods_js_1$3.default.Hskip,rule:BaseMethods_js_1$3.default.rule,Rule:BaseMethods_js_1$3.default.Rule,HandleRef:BaseMethods_js_1$3.default.HandleRef};var SymbolMap_js_1$9=SymbolMap,TexConstants_js_1$3=TexConstants,TextMacrosMethods_js_1$2=TextMacrosMethods,lengths_js_1=lengths;new SymbolMap_js_1$9.MacroMap("text-special",{$:"Math","%":"Comment","^":"MathModeOnly",_:"MathModeOnly","&":"Misplaced","#":"Misplaced","~":"Tilde"," ":"Space","	":"Space","\r":"Space","\n":"Space"," ":"Tilde","{":"OpenBrace","}":"CloseBrace","`":"OpenQuote","'":"CloseQuote"},TextMacrosMethods_js_1$2.TextMacrosMethods);new SymbolMap_js_1$9.CommandMap("text-macros",{"(":"Math",$:"SelfQuote",_:"SelfQuote","%":"SelfQuote","{":"SelfQuote","}":"SelfQuote"," ":"SelfQuote","&":"SelfQuote","#":"SelfQuote","\\":"SelfQuote","'":["Accent","´"],"’":["Accent","´"],"`":["Accent","`"],"‘":["Accent","`"],"^":["Accent","^"],'"':["Accent","¨"],"~":["Accent","~"],"=":["Accent","¯"],".":["Accent","˙"],u:["Accent","˘"],v:["Accent","ˇ"],emph:"Emph",rm:["SetFont",TexConstants_js_1$3.TexConstant.Variant.NORMAL],mit:["SetFont",TexConstants_js_1$3.TexConstant.Variant.ITALIC],oldstyle:["SetFont",TexConstants_js_1$3.TexConstant.Variant.OLDSTYLE],cal:["SetFont",TexConstants_js_1$3.TexConstant.Variant.CALLIGRAPHIC],it:["SetFont","-tex-mathit"],bf:["SetFont",TexConstants_js_1$3.TexConstant.Variant.BOLD],bbFont:["SetFont",TexConstants_js_1$3.TexConstant.Variant.DOUBLESTRUCK],scr:["SetFont",TexConstants_js_1$3.TexConstant.Variant.SCRIPT],frak:["SetFont",TexConstants_js_1$3.TexConstant.Variant.FRAKTUR],sf:["SetFont",TexConstants_js_1$3.TexConstant.Variant.SANSSERIF],tt:["SetFont",TexConstants_js_1$3.TexConstant.Variant.MONOSPACE],tiny:["SetSize",.5],Tiny:["SetSize",.6],scriptsize:["SetSize",.7],small:["SetSize",.85],normalsize:["SetSize",1],large:["SetSize",1.2],Large:["SetSize",1.44],LARGE:["SetSize",1.73],huge:["SetSize",2.07],Huge:["SetSize",2.49],Bbb:["Macro","{\\bbFont #1}",1],textnormal:["Macro","{\\rm #1}",1],textup:["Macro","{\\rm #1}",1],textrm:["Macro","{\\rm #1}",1],textit:["Macro","{\\it #1}",1],textbf:["Macro","{\\bf #1}",1],textsf:["Macro","{\\sf #1}",1],texttt:["Macro","{\\tt #1}",1],dagger:["Insert","†"],ddagger:["Insert","‡"],S:["Insert","§"],",":["Spacer",lengths_js_1.MATHSPACE.thinmathspace],":":["Spacer",lengths_js_1.MATHSPACE.mediummathspace],">":["Spacer",lengths_js_1.MATHSPACE.mediummathspace],";":["Spacer",lengths_js_1.MATHSPACE.thickmathspace],"!":["Spacer",lengths_js_1.MATHSPACE.negativethinmathspace],enspace:["Spacer",.5],quad:["Spacer",1],qquad:["Spacer",2],thinspace:["Spacer",lengths_js_1.MATHSPACE.thinmathspace],negthinspace:["Spacer",lengths_js_1.MATHSPACE.negativethinmathspace],hskip:"Hskip",hspace:"Hskip",kern:"Hskip",mskip:"Hskip",mspace:"Hskip",mkern:"Hskip",rule:"rule",Rule:["Rule"],Space:["Rule","blank"],color:"CheckAutoload",textcolor:"CheckAutoload",colorbox:"CheckAutoload",fcolorbox:"CheckAutoload",href:"CheckAutoload",style:"CheckAutoload",class:"CheckAutoload",cssId:"CheckAutoload",unicode:"CheckAutoload",ref:["HandleRef",!1],eqref:["HandleRef",!0]},TextMacrosMethods_js_1$2.TextMacrosMethods);var __importDefault$i=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},_a$4;Object.defineProperty(TextMacrosConfiguration,"__esModule",{value:!0});TextMacrosConfiguration.TextMacrosConfiguration=TextMacrosConfiguration.TextBaseConfiguration=void 0;var Configuration_js_1$b=Configuration,ParseOptions_js_1=__importDefault$i(ParseOptions$1),Tags_js_1$1=Tags,BaseItems_js_1$1=BaseItems,TextParser_js_1$1=TextParser$1,TextMacrosMethods_js_1$1=TextMacrosMethods;TextMacrosConfiguration.TextBaseConfiguration=Configuration_js_1$b.Configuration.create("text-base",{parser:"text",handler:{character:["command","text-special"],macro:["text-macros"]},fallback:{character:function(t,r){t.text+=r},macro:function(t,r){var e=t.texParser,n=e.lookup("macro",r);n&&n._func!==TextMacrosMethods_js_1$1.TextMacrosMethods.Macro&&t.Error("MathMacro","%1 is only supported in math mode","\\"+r),e.parse("macro",[t,r])}},items:(_a$4={},_a$4[BaseItems_js_1$1.StartItem.prototype.kind]=BaseItems_js_1$1.StartItem,_a$4[BaseItems_js_1$1.StopItem.prototype.kind]=BaseItems_js_1$1.StopItem,_a$4[BaseItems_js_1$1.MmlItem.prototype.kind]=BaseItems_js_1$1.MmlItem,_a$4[BaseItems_js_1$1.StyleItem.prototype.kind]=BaseItems_js_1$1.StyleItem,_a$4)});function internalMath(t,r,e,n){var i=t.configuration.packageData.get("textmacros");return t instanceof TextParser_js_1$1.TextParser||(i.texParser=t),[new TextParser_js_1$1.TextParser(r,n?{mathvariant:n}:{},i.parseOptions,e).mml()]}TextMacrosConfiguration.TextMacrosConfiguration=Configuration_js_1$b.Configuration.create("textmacros",{config:function(t,r){var e=new Configuration_js_1$b.ParserConfiguration(r.parseOptions.options.textmacros.packages,["tex","text"]);e.init();var n=new ParseOptions_js_1.default(e,[]);n.options=r.parseOptions.options,e.config(r),Tags_js_1$1.TagsFactory.addTags(e.tags),n.tags=Tags_js_1$1.TagsFactory.getDefault(),n.tags.configuration=n,n.packageData=r.parseOptions.packageData,n.packageData.set("textmacros",{parseOptions:n,jax:r,texParser:null}),n.options.internalMath=internalMath},preprocessors:[function(t){var r=t.data.packageData.get("textmacros");r.parseOptions.nodeFactory.setMmlFactory(r.jax.mmlFactory)}],options:{textmacros:{packages:["text-base"]}}});var UnicodeConfiguration={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeConfiguration=t.UnicodeMethods=void 0;var e=Configuration,n=r(TexError$1),i=SymbolMap,o=r(requireParseUtil()),a=r(NodeUtil$1),s=Entities;t.UnicodeMethods={};var l={};t.UnicodeMethods.Unicode=function(c,f){var d=c.GetBrackets(f),u=null,m=null;d&&(d.replace(/ /g,"").match(/^(\d+(\.\d*)?|\.\d+),(\d+(\.\d*)?|\.\d+)$/)?(u=d.replace(/ /g,"").split(/,/),m=c.GetBrackets(f)):m=d);var p=o.default.trimSpaces(c.GetArgument(f)).replace(/^0x/,"x");if(!p.match(/^(x[0-9A-Fa-f]+|[0-9]+)$/))throw new n.default("BadUnicode","Argument to \\unicode must be a number");var _=parseInt(p.match(/^x/)?"0"+p:p);l[_]?m||(m=l[_][2]):l[_]=[800,200,m,_],u&&(l[_][0]=Math.floor(parseFloat(u[0])*1e3),l[_][1]=Math.floor(parseFloat(u[1])*1e3));var y=c.stack.env.font,g={};m?(l[_][2]=g.fontfamily=m.replace(/'/g,"'"),y&&(y.match(/bold/)&&(g.fontweight="bold"),y.match(/italic|-mathit/)&&(g.fontstyle="italic"))):y&&(g.mathvariant=y);var v=c.create("token","mtext",g,(0,s.numeric)(p));a.default.setProperty(v,"unicode",!0),c.Push(v)},new i.CommandMap("unicode",{unicode:"Unicode"},t.UnicodeMethods),t.UnicodeConfiguration=e.Configuration.create("unicode",{handler:{macro:["unicode"]}})})(UnicodeConfiguration);const TextParser_1=TextParser$1;Object.assign(TextParser_1.TextParser.prototype,{_mml:TextParser_1.TextParser.prototype.mml,mml(){return this.configuration.clear(),this._mml()}});Object.defineProperty(texInputConfig,"__esModule",{value:!0});texInputConfig.texInputConfig=void 0;requireMathtoolsConfiguration();const blue="3D7586",green="447A53",gray="5D5F66",grayH="3B3D45",grayI="21242C",purple="594094",purpleD="8351E8",pink="B25071",gold="946700",red="D92916";function colorMacro(t){return[`{\\color{##${t}}#1}`,1]}texInputConfig.texInputConfig={packages:["base","ams","boldsymbol","cancel","color","configmacros","enclose","gensymb","mathtools","mhchem","noerrors","noundefined","textmacros","unicode"],macros:{AA:"Å",isin:["\\in"],infin:["\\infty"],inte:["\\int"],footnotesize:["\\small"],arccos:["\\operatorname{arccos}"],arcctg:["\\operatorname{arcctg}"],arctg:["\\operatorname{arctg}"],cosec:["\\operatorname{cosec}"],cossec:["\\operatorname{cossec}"],cotg:["\\operatorname{cotg}"],ctg:["\\operatorname{ctg}"],sen:["\\operatorname{sen}"],tg:["\\operatorname{tg}"],lcm:["\\operatorname{lcm}"],bm:"\\boldsymbol",bold:"\\mathbf",Complex:"\\mathbb{C}",N:"\\mathbb{N}",R:"\\mathbb{R}",RR:"\\mathbb{R}",Z:"\\mathbb{Z}",gcf:["\\mathop{\\rm gcf}"],mathellipsis:"\\dots",oiint:"\\mathop{\\unicode{x222F}}",overgroup:"\\overparen",pounds:"\\unicode{x00a3}",thickspace:"\\;",rarr:"\\rightarrow",rArr:"\\Rightarrow",ratio:"\\centercolon",Alpha:"\\unicode{x0391}",Beta:"\\unicode{x0392}",Epsilon:"\\unicode{x0395}",Zeta:"\\unicode{x0396}",Eta:"\\unicode{x0397}",Iota:"\\unicode{x0399}",Kappa:"\\unicode{x039A}",Mu:"\\unicode{x039C}",Nu:"\\unicode{x039D}",Omicron:"\\unicode{x039F}",Rho:"\\unicode{x03A1}",Tau:"\\unicode{x03A4}",Chi:"\\unicode{x03A7}",sout:["\\enclose{horizontalstrike}{\\!\\vphantom{j}#1\\!}",1],sube:"\\subseteq",def:"",arraystretch:["",1],0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",blue:colorMacro(blue),orange:colorMacro(gold),pink:colorMacro(pink),red:colorMacro(red),green:colorMacro(green),gray:colorMacro(gray),purple:colorMacro(purple),blueA:colorMacro(blue),blueB:colorMacro(blue),blueC:colorMacro(blue),blueD:colorMacro(blue),blueE:colorMacro(blue),tealA:colorMacro(green),tealB:colorMacro(green),tealC:colorMacro(green),tealD:colorMacro(green),tealE:colorMacro(green),greenA:colorMacro(green),greenB:colorMacro(green),greenC:colorMacro(green),greenD:colorMacro(green),greenE:colorMacro(green),goldA:colorMacro(gold),goldB:colorMacro(gold),goldC:colorMacro(gold),goldD:colorMacro(gold),goldE:colorMacro(gold),redA:colorMacro(red),redB:colorMacro(red),redC:colorMacro(red),redD:colorMacro(red),redE:colorMacro(red),maroonA:colorMacro(pink),maroonB:colorMacro(pink),maroonC:colorMacro(pink),maroonD:colorMacro(pink),maroonE:colorMacro(pink),purpleA:colorMacro(purpleD),purpleB:colorMacro(purpleD),purpleC:colorMacro(purpleD),purpleD:colorMacro(purpleD),purpleE:colorMacro(purple),grayA:colorMacro(gray),grayB:colorMacro(gray),grayC:colorMacro(gray),grayD:colorMacro(gray),grayE:colorMacro(gray),grayF:colorMacro(gray),grayG:colorMacro(gray),grayH:colorMacro(grayH),grayI:colorMacro(grayI),kaBlue:colorMacro("314453"),kaGreen:colorMacro("71B307"),mintA:colorMacro("F5F9E8"),mintB:colorMacro("EDF2DF"),mintC:colorMacro("E0E5CC"),"^":["^{\\raise{0.75em}{\\scriptscriptstyle #1}}",1]},environments:{darray:["{\\displaystyle\\begin{array}","\\end{array}}"]}};var sre={},engine={},dynamic_cstr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultComparator=t.DynamicCstrParser=t.DynamicCstr=t.DynamicProperties=t.Axis=void 0;var r;(function(a){a.DOMAIN="domain",a.STYLE="style",a.LOCALE="locale",a.TOPIC="topic",a.MODALITY="modality"})(r=t.Axis||(t.Axis={}));class e{constructor(s,l=Object.keys(s)){this.properties=s,this.order=l}static createProp(...s){const l=n.DEFAULT_ORDER,c={};for(let f=0,d=s.length,u=l.length;f<d&&f<u;f++)c[l[f]]=s[f];return new e(c)}getProperties(){return this.properties}getOrder(){return this.order}getAxes(){return this.order}getProperty(s){return this.properties[s]}updateProperties(s){this.properties=s}allProperties(){const s=[];return this.order.forEach(l=>s.push(this.getProperty(l).slice())),s}toString(){const s=[];return this.order.forEach(l=>s.push(l+": "+this.getProperty(l).toString())),s.join(`
`)}}t.DynamicProperties=e;class n extends e{constructor(s,l){const c={};for(const[f,d]of Object.entries(s))c[f]=[d];super(c,l),this.components=s}static createCstr(...s){const l=n.DEFAULT_ORDER,c={};for(let f=0,d=s.length,u=l.length;f<d&&f<u;f++)c[l[f]]=s[f];return new n(c)}static defaultCstr(){return n.createCstr.apply(null,n.DEFAULT_ORDER.map(function(s){return n.DEFAULT_VALUES[s]}))}static validOrder(s){const l=n.DEFAULT_ORDER.slice();return s.every(c=>{const f=l.indexOf(c);return f!==-1&&l.splice(f,1)})}getComponents(){return this.components}getValue(s){return this.components[s]}getValues(){return this.order.map(s=>this.getValue(s))}allProperties(){const s=super.allProperties();for(let l=0,c,f;c=s[l],f=this.order[l];l++){const d=this.getValue(f);c.indexOf(d)===-1&&c.unshift(d)}return s}toString(){return this.getValues().join(".")}equal(s){const l=s.getAxes();if(this.order.length!==l.length)return!1;for(let c=0,f;f=l[c];c++){const d=this.getValue(f);if(!d||s.getValue(f)!==d)return!1}return!0}}t.DynamicCstr=n,n.DEFAULT_ORDER=[r.LOCALE,r.MODALITY,r.DOMAIN,r.STYLE,r.TOPIC],n.BASE_LOCALE="base",n.DEFAULT_VALUE="default",n.DEFAULT_VALUES={[r.LOCALE]:"en",[r.DOMAIN]:n.DEFAULT_VALUE,[r.STYLE]:n.DEFAULT_VALUE,[r.TOPIC]:n.DEFAULT_VALUE,[r.MODALITY]:"speech"};class i{constructor(s){this.order=s}parse(s){const l=s.split("."),c={};if(l.length>this.order.length)throw new Error("Invalid dynamic constraint: "+c);let f=0;for(let d=0,u;u=this.order[d],l.length;d++,f++){const m=l.shift();c[u]=m}return new n(c,this.order.slice(0,f))}}t.DynamicCstrParser=i;class o{constructor(s,l=new e(s.getProperties(),s.getOrder())){this.reference=s,this.fallback=l,this.order=this.reference.getOrder()}getReference(){return this.reference}setReference(s,l){this.reference=s,this.fallback=l||new e(s.getProperties(),s.getOrder()),this.order=this.reference.getOrder()}match(s){const l=s.getAxes();return l.length===this.reference.getAxes().length&&l.every(c=>{const f=s.getValue(c);return f===this.reference.getValue(c)||this.fallback.getProperty(c).indexOf(f)!==-1})}compare(s,l){let c=!1;for(let f=0,d;d=this.order[f];f++){const u=s.getValue(d),m=l.getValue(d);if(!c){const g=this.reference.getValue(d);if(g===u&&g!==m)return-1;if(g===m&&g!==u)return 1;if(g===u&&g===m)continue;g!==u&&g!==m&&(c=!0)}const p=this.fallback.getProperty(d),_=p.indexOf(u),y=p.indexOf(m);if(_<y)return-1;if(y<_)return 1}return 0}toString(){return this.reference.toString()+`
`+this.fallback.toString()}}t.DefaultComparator=o})(dynamic_cstr);var engine_const={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DOMAIN_TO_STYLES=t.Markup=t.Speech=t.personalityPropList=t.personalityProps=t.Mode=void 0,function(e){e.SYNC="sync",e.ASYNC="async",e.HTTP="http"}(t.Mode||(t.Mode={}));var r;(function(e){e.PITCH="pitch",e.RATE="rate",e.VOLUME="volume",e.PAUSE="pause",e.JOIN="join",e.LAYOUT="layout"})(r=t.personalityProps||(t.personalityProps={})),t.personalityPropList=[r.PITCH,r.RATE,r.VOLUME,r.PAUSE,r.JOIN],function(e){e.NONE="none",e.SHALLOW="shallow",e.DEEP="deep"}(t.Speech||(t.Speech={})),function(e){e.NONE="none",e.LAYOUT="layout",e.PUNCTUATION="punctuation",e.SSML="ssml",e.SSML_STEP="ssml_step",e.ACSS="acss",e.SABLE="sable",e.VOICEXML="voicexml"}(t.Markup||(t.Markup={})),t.DOMAIN_TO_STYLES={mathspeak:"default",clearspeak:"default"}})(engine_const);var _debugger={};function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var system_external={},variables={};Object.defineProperty(variables,"__esModule",{value:!0});variables.Variables=void 0;class Variables{static ensureLocale(r,e){return Variables.LOCALES.get(r)?r:(console.error(`Locale ${r} does not exist! Using ${Variables.LOCALES.get(e)} instead.`),e)}}variables.Variables=Variables;Variables.VERSION="4.0.6";Variables.LOCALES=new Map([["ca","Catalan"],["da","Danish"],["de","German"],["en","English"],["es","Spanish"],["fr","French"],["hi","Hindi"],["it","Italian"],["nb","Bokmål"],["nn","Nynorsk"],["sv","Swedish"],["nemeth","Nemeth"]]);Variables.mathjaxVersion="3.2.1";Variables.url="https://cdn.jsdelivr.net/npm/speech-rule-engine@"+Variables.VERSION+"/lib/mathmaps";Variables.WGXpath="https://cdn.jsdelivr.net/npm/wicked-good-xpath@1.3.0/dist/wgxpath.install.js";var define_process_env_default={};Object.defineProperty(system_external,"__esModule",{value:!0});const variables_1$1=variables;class SystemExternal{static extRequire(library){if(typeof process<"u"&&typeof commonjsRequire<"u"){const nodeRequire=eval("require");return nodeRequire(library)}return null}}system_external.default=SystemExternal;SystemExternal.windowSupported=!(typeof window>"u");SystemExternal.documentSupported=SystemExternal.windowSupported&&!(typeof window.document>"u");SystemExternal.xmldom=SystemExternal.documentSupported?window:SystemExternal.extRequire("xmldom-sre");SystemExternal.document=SystemExternal.documentSupported?window.document:new SystemExternal.xmldom.DOMImplementation().createDocument("","",0);SystemExternal.xpath=SystemExternal.documentSupported?document:function(){const t={document:{},XPathResult:{}};return SystemExternal.extRequire("wicked-good-xpath").install(t),t.document.XPathResult=t.XPathResult,t.document}();SystemExternal.mathmapsIePath="https://cdn.jsdelivr.net/npm/sre-mathmaps-ie@"+variables_1$1.Variables.VERSION+"mathmaps_ie.js";SystemExternal.commander=SystemExternal.documentSupported?null:SystemExternal.extRequire("commander");SystemExternal.fs=SystemExternal.documentSupported?null:SystemExternal.extRequire("fs");SystemExternal.url=variables_1$1.Variables.url;SystemExternal.jsonPath=function(){return(SystemExternal.documentSupported?SystemExternal.url:define_process_env_default.SRE_JSON_PATH||commonjsGlobal.SRE_JSON_PATH||(typeof __dirname<"u"?__dirname+"/mathmaps":process.cwd()))+"/"}();SystemExternal.WGXpath=variables_1$1.Variables.WGXpath;SystemExternal.wgxpath=null;Object.defineProperty(_debugger,"__esModule",{value:!0});_debugger.Debugger=void 0;const system_external_1$4=system_external;class Debugger{constructor(){this.isActive_=!1,this.outputFunction_=console.info,this.fileHandle=Promise.resolve(),this.stream_=null}static getInstance(){return Debugger.instance=Debugger.instance||new Debugger,Debugger.instance}init(r){return r&&this.startDebugFile_(r),this.isActive_=!0,this.fileHandle}output(...r){this.isActive_&&this.output_(r)}generateOutput(r){this.isActive_&&this.output_(r.apply(r,[]))}exit(r=()=>{}){this.fileHandle.then(()=>{this.isActive_&&this.stream_&&this.stream_.end("","",r)})}startDebugFile_(r){this.fileHandle=system_external_1$4.default.fs.promises.open(r,"w"),this.fileHandle=this.fileHandle.then(e=>{this.stream_=e.createWriteStream(r),this.outputFunction_=(function(...n){this.stream_.write(n.join(" ")),this.stream_.write(`
`)}).bind(this),this.stream_.on("error",(function(n){console.info("Invalid log file. Debug information sent to console."),this.outputFunction_=console.info}).bind(this)),this.stream_.on("finish",function(){console.info("Finalizing debug file.")})})}output_(r){if(console.info===this.outputFunction_){this.outputFunction_.apply(console,["Speech Rule Engine Debugger:"].concat(r));return}this.fileHandle.then(()=>this.outputFunction_.apply(this.outputFunction_,["Speech Rule Engine Debugger:"].concat(r)))}}_debugger.Debugger=Debugger;Object.defineProperty(engine,"__esModule",{value:!0});engine.EnginePromise=engine.SREError=void 0;const Dcstr=dynamic_cstr,EngineConst$d=engine_const,debugger_1$7=_debugger,variables_1=variables;class SREError extends Error{constructor(r=""){super(),this.message=r,this.name="SRE Error"}}engine.SREError=SREError;class Engine{constructor(){this.customLoader=null,this.parsers={},this.comparator=null,this.mode=EngineConst$d.Mode.SYNC,this.init=!0,this.delay=!1,this.comparators={},this.domain="mathspeak",this.style=Dcstr.DynamicCstr.DEFAULT_VALUES[Dcstr.Axis.STYLE],this._defaultLocale=Dcstr.DynamicCstr.DEFAULT_VALUES[Dcstr.Axis.LOCALE],this.locale=this.defaultLocale,this.subiso="",this.modality=Dcstr.DynamicCstr.DEFAULT_VALUES[Dcstr.Axis.MODALITY],this.speech=EngineConst$d.Speech.NONE,this.markup=EngineConst$d.Markup.NONE,this.walker="Table",this.structure=!1,this.ruleSets=[],this.strict=!1,this.isIE=!1,this.isEdge=!1,this.rate="100",this.pprint=!1,this.config=!1,this.rules="",this.prune="",this.evaluator=Engine.defaultEvaluator,this.defaultParser=new Dcstr.DynamicCstrParser(Dcstr.DynamicCstr.DEFAULT_ORDER),this.parser=this.defaultParser,this.dynamicCstr=Dcstr.DynamicCstr.defaultCstr()}set defaultLocale(r){this._defaultLocale=variables_1.Variables.ensureLocale(r,this._defaultLocale)}get defaultLocale(){return this._defaultLocale}static getInstance(){return Engine.instance=Engine.instance||new Engine,Engine.instance}static defaultEvaluator(r,e){return r}static evaluateNode(r){return Engine.nodeEvaluator(r)}getRate(){const r=parseInt(this.rate,10);return isNaN(r)?100:r}setDynamicCstr(r){if(this.defaultLocale&&(Dcstr.DynamicCstr.DEFAULT_VALUES[Dcstr.Axis.LOCALE]=this.defaultLocale),r){const a=Object.keys(r);for(let s=0;s<a.length;s++){const l=a[s];if(Dcstr.DynamicCstr.DEFAULT_ORDER.indexOf(l)!==-1){const c=r[l];this[l]=c}}}EngineConst$d.DOMAIN_TO_STYLES[this.domain]=this.style;const e=[this.locale,this.modality,this.domain,this.style].join("."),n=Dcstr.DynamicProperties.createProp([Dcstr.DynamicCstr.DEFAULT_VALUES[Dcstr.Axis.LOCALE]],[Dcstr.DynamicCstr.DEFAULT_VALUES[Dcstr.Axis.MODALITY]],[Dcstr.DynamicCstr.DEFAULT_VALUES[Dcstr.Axis.DOMAIN]],[Dcstr.DynamicCstr.DEFAULT_VALUES[Dcstr.Axis.STYLE]]),i=this.comparators[this.domain],o=this.parsers[this.domain];this.parser=o||this.defaultParser,this.dynamicCstr=this.parser.parse(e),this.dynamicCstr.updateProperties(n.getProperties()),this.comparator=i?i():new Dcstr.DefaultComparator(this.dynamicCstr)}configurate(r){this.mode===EngineConst$d.Mode.HTTP&&!this.config&&(configBlocks(r),this.config=!0),configFeature(r)}setCustomLoader(r){r&&(this.customLoader=r)}}engine.default=Engine;Engine.BINARY_FEATURES=["strict","structure","pprint"];Engine.STRING_FEATURES=["markup","style","domain","speech","walker","defaultLocale","locale","delay","modality","rate","rules","subiso","prune"];Engine.nodeEvaluator=function(t){return[]};function configFeature(t){if(typeof SREfeature<"u")for(const[r,e]of Object.entries(SREfeature))t[r]=e}function configBlocks(t){const r=document.documentElement.querySelectorAll('script[type="text/x-sre-config"]');for(let e=0,n=r.length;e<n;e++){let i;try{i=r[e].innerHTML;const o=JSON.parse(i);for(const a in o)t[a]=o[a]}catch{debugger_1$7.Debugger.getInstance().output("Illegal configuration ",i)}}}class EnginePromise{static get(r=Engine.getInstance().locale){return EnginePromise.promises[r]||Promise.resolve("")}static getall(){return Promise.all(Object.values(EnginePromise.promises))}}engine.EnginePromise=EnginePromise;EnginePromise.loaded={};EnginePromise.promises={};var system={},engine_setup={},l10n={},grammar={},dom_util={},xpath_util={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.updateEvaluator=t.evaluateString=t.evaluateBoolean=t.getLeafNodes=t.evalXPath=t.resolveNameSpace=t.xpath=void 0;const r=engine,e=engine_const,n=system_external;function i(){return!(typeof XPathResult>"u")}t.xpath={currentDocument:null,evaluate:i()?document.evaluate:n.default.xpath.evaluate,result:i()?XPathResult:n.default.xpath.XPathResult,createNSResolver:i()?document.createNSResolver:n.default.xpath.createNSResolver};const o={xhtml:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",mml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function a(p){return o[p]||null}t.resolveNameSpace=a;class s{constructor(){this.lookupNamespaceURI=a}}function l(p,_,y){return r.default.getInstance().mode===e.Mode.HTTP&&!r.default.getInstance().isIE&&!r.default.getInstance().isEdge?t.xpath.currentDocument.evaluate(p,_,a,y,null):t.xpath.evaluate(p,_,new s,y,null)}function c(p,_){let y;try{y=l(p,_,t.xpath.result.ORDERED_NODE_ITERATOR_TYPE)}catch{return[]}const g=[];for(let v=y.iterateNext();v;v=y.iterateNext())g.push(v);return g}t.evalXPath=c;function f(p){return c(".//*[count(*)=0]",p)}t.getLeafNodes=f;function d(p,_){let y;try{y=l(p,_,t.xpath.result.BOOLEAN_TYPE)}catch{return!1}return y.booleanValue}t.evaluateBoolean=d;function u(p,_){let y;try{y=l(p,_,t.xpath.result.STRING_TYPE)}catch{return""}return y.stringValue}t.evaluateString=u;function m(p){if(r.default.getInstance().mode!==e.Mode.HTTP)return;let _=p;for(;_&&!_.evaluate;)_=_.parentNode;_&&_.evaluate?t.xpath.currentDocument=_:p.ownerDocument&&(t.xpath.currentDocument=p.ownerDocument)}t.updateEvaluator=m})(xpath_util);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeXml=t.cloneNode=t.tagName=t.querySelectorAll=t.querySelectorAllByAttrValue=t.querySelectorAllByAttr=t.formatXml=t.createTextNode=t.createElementNS=t.createElement=t.replaceNode=t.NodeType=t.parseInput=t.XML_ENTITIES=t.trimInput_=t.toArray=void 0;const r=engine,e=engine_const,n=system_external,i=xpath_util;function o(b){const S=[];for(let M=0,C=b.length;M<C;M++)S.push(b[M]);return S}t.toArray=o;function a(b){return b=b.replace(/&nbsp;/g," "),b.replace(/>[ \f\n\r\t\v\u200b]+</g,"><").trim()}t.trimInput_=a,t.XML_ENTITIES={"&lt;":!0,"&gt;":!0,"&amp;":!0,"&quot;":!0,"&apos;":!0};function s(b){const S=new n.default.xmldom.DOMParser,M=a(b),A=!!M.match(/&(?!lt|gt|amp|quot|apos)\w+;/g);if(!M)throw new Error("Empty input!");try{const E=S.parseFromString(M,A?"text/html":"text/xml");return r.default.getInstance().mode===e.Mode.HTTP?(i.xpath.currentDocument=E,A?E.body.childNodes[0]:E.documentElement):E.documentElement}catch(E){throw new r.SREError("Illegal input: "+E.message)}}t.parseInput=s,function(b){b[b.ELEMENT_NODE=1]="ELEMENT_NODE",b[b.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",b[b.TEXT_NODE=3]="TEXT_NODE",b[b.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",b[b.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",b[b.ENTITY_NODE=6]="ENTITY_NODE",b[b.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",b[b.COMMENT_NODE=8]="COMMENT_NODE",b[b.DOCUMENT_NODE=9]="DOCUMENT_NODE",b[b.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",b[b.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",b[b.NOTATION_NODE=12]="NOTATION_NODE"}(t.NodeType||(t.NodeType={}));function l(b,S){b.parentNode&&(b.parentNode.insertBefore(S,b),b.parentNode.removeChild(b))}t.replaceNode=l;function c(b){return n.default.document.createElement(b)}t.createElement=c;function f(b,S){return n.default.document.createElementNS(b,S)}t.createElementNS=f;function d(b){return n.default.document.createTextNode(b)}t.createTextNode=d;function u(b){let S="",M=/(>)(<)(\/*)/g;b=b.replace(M,`$1\r
$2$3`);let C=0,A=b.split(`\r
`);for(M=/(\.)*(<)(\/*)/g,A=A.map(E=>E.replace(M,`$1\r
$2$3`).split(`\r
`)).reduce((E,$)=>E.concat($),[]);A.length;){let E=A.shift();if(!E)continue;let $=0;if(E.match(/^<\w[^>/]*>[^>]+$/)){const D=m(E,A[0]);D[0]?D[1]?(E=E+A.shift().slice(0,-D[1].length),D[1].trim()&&A.unshift(D[1])):E=E+A.shift():$=1}else if(E.match(/^<\/\w/))C!==0&&(C-=1);else if(E.match(/^<\w[^>]*[^/]>.*$/))$=1;else if(E.match(/^<\w[^>]*\/>.+$/)){const D=E.indexOf(">")+1;E.slice(D).trim()&&A.unshift(),E=E.slice(0,D)}else $=0;S+=new Array(C+1).join("  ")+E+`\r
`,C+=$}return S}t.formatXml=u;function m(b,S){if(!S)return[!1,""];const M=b.match(/^<([^> ]+).*>/),C=S.match(/^<\/([^>]+)>(.*)/);return M&&C&&M[1]===C[1]?[!0,C[2]]:[!1,""]}function p(b,S){return b.querySelectorAll?o(b.querySelectorAll(`[${S}]`)):i.evalXPath(`.//*[@${S}]`,b)}t.querySelectorAllByAttr=p;function _(b,S,M){return b.querySelectorAll?o(b.querySelectorAll(`[${S}="${M}"]`)):i.evalXPath(`.//*[@${S}="${M}"]`,b)}t.querySelectorAllByAttrValue=_;function y(b,S){return b.querySelectorAll?o(b.querySelectorAll(S)):i.evalXPath(`.//${S}`,b)}t.querySelectorAll=y;function g(b){return b.tagName.toUpperCase()}t.tagName=g;function v(b){return b.cloneNode(!0)}t.cloneNode=v;function x(b){return new n.default.xmldom.XMLSerializer().serializeToString(b)}t.serializeXml=x})(dom_util);var locale_util={},locale$d={},messages={},transformers={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.vulgarFractionSmall=t.convertVulgarFraction=t.Combiners=t.siCombiner=t.identityTransformer=t.pluralCase=void 0;function r(a,s){return a.toString()}t.pluralCase=r;function e(a){return a.toString()}t.identityTransformer=e;function n(a,s){return a+s.toLowerCase()}t.siCombiner=n,t.Combiners={},t.Combiners.identityCombiner=function(a,s,l){return a+s+l},t.Combiners.prefixCombiner=function(a,s,l){return a=l?l+" "+a:a,s?s+" "+a:a},t.Combiners.postfixCombiner=function(a,s,l){return a=l?l+" "+a:a,s?a+" "+s:a},t.Combiners.romanceCombiner=function(a,s,l){return a=l?a+" "+l:a,s?a+" "+s:a};function i(a,s=""){if(!a.childNodes||!a.childNodes[0]||!a.childNodes[0].childNodes||a.childNodes[0].childNodes.length<2||a.childNodes[0].childNodes[0].tagName!=="number"||a.childNodes[0].childNodes[0].getAttribute("role")!=="integer"||a.childNodes[0].childNodes[1].tagName!=="number"||a.childNodes[0].childNodes[1].getAttribute("role")!=="integer")return{convertible:!1,content:a.textContent};const l=a.childNodes[0].childNodes[1].textContent,c=a.childNodes[0].childNodes[0].textContent,f=Number(l),d=Number(c);return isNaN(f)||isNaN(d)?{convertible:!1,content:`${c} ${s} ${l}`}:{convertible:!0,enumerator:d,denominator:f}}t.convertVulgarFraction=i;function o(a,s,l){const c=i(a);if(c.convertible){const f=c.enumerator,d=c.denominator;return f>0&&f<s&&d>0&&d<l}return!1}t.vulgarFractionSmall=o})(transformers);Object.defineProperty(messages,"__esModule",{value:!0});messages.SUBISO=messages.FUNCTIONS=messages.ALPHABETS=messages.NUMBERS=messages.MESSAGES=void 0;const tr$5=transformers;function MESSAGES(){return{MS:{},MSroots:{},font:{},embellish:{},role:{},enclose:{},navigate:{},regexp:{},unitTimes:""}}messages.MESSAGES=MESSAGES;function NUMBERS$b(){return{zero:"zero",ones:[],tens:[],large:[],special:{},wordOrdinal:tr$5.identityTransformer,numericOrdinal:tr$5.identityTransformer,numberToWords:tr$5.identityTransformer,numberToOrdinal:tr$5.pluralCase,vulgarSep:" ",numSep:" "}}messages.NUMBERS=NUMBERS$b;function ALPHABETS(){return{latinSmall:[],latinCap:[],greekSmall:[],greekCap:[],capPrefix:{default:""},smallPrefix:{default:""},digitPrefix:{default:""},languagePrefix:{},digitTrans:{default:tr$5.identityTransformer,mathspeak:tr$5.identityTransformer,clearspeak:tr$5.identityTransformer},letterTrans:{default:tr$5.identityTransformer},combiner:(t,r,e)=>t}}messages.ALPHABETS=ALPHABETS;function FUNCTIONS(){return{fracNestDepth:t=>tr$5.vulgarFractionSmall(t,10,100),radicalNestDepth:t=>"",combineRootIndex:function(t,r){return t},combineNestedFraction:tr$5.Combiners.identityCombiner,combineNestedRadical:tr$5.Combiners.identityCombiner,fontRegexp:function(t){return new RegExp("^"+t.split(/ |-/).join("( |-)")+"( |-)")},si:tr$5.siCombiner,plural:tr$5.identityTransformer}}messages.FUNCTIONS=FUNCTIONS;function SUBISO(){return{default:"",current:"",all:[]}}messages.SUBISO=SUBISO;Object.defineProperty(locale$d,"__esModule",{value:!0});locale$d.createLocale=locale$d.LOCALE=void 0;const messages_1$b=messages;locale$d.LOCALE=createLocale();function createLocale(){return{FUNCTIONS:(0,messages_1$b.FUNCTIONS)(),MESSAGES:(0,messages_1$b.MESSAGES)(),ALPHABETS:(0,messages_1$b.ALPHABETS)(),NUMBERS:(0,messages_1$b.NUMBERS)(),COMBINERS:{},CORRECTIONS:{},SUBISO:(0,messages_1$b.SUBISO)()}}locale$d.createLocale=createLocale;Object.defineProperty(locale_util,"__esModule",{value:!0});locale_util.localeFontCombiner=locale_util.extractString=locale_util.localEnclose=locale_util.localRole=locale_util.localFont=locale_util.combinePostfixIndex=locale_util.nestingToString=void 0;const locale_1$h=locale$d,transformers_1$7=transformers;function nestingToString(t){switch(t){case 1:return locale_1$h.LOCALE.MESSAGES.MS.ONCE||"";case 2:return locale_1$h.LOCALE.MESSAGES.MS.TWICE;default:return t.toString()}}locale_util.nestingToString=nestingToString;function combinePostfixIndex(t,r){return t===locale_1$h.LOCALE.MESSAGES.MS.ROOTINDEX||t===locale_1$h.LOCALE.MESSAGES.MS.INDEX?t:t+" "+r}locale_util.combinePostfixIndex=combinePostfixIndex;function localFont(t){return extractString(locale_1$h.LOCALE.MESSAGES.font[t],t)}locale_util.localFont=localFont;function localRole(t){return extractString(locale_1$h.LOCALE.MESSAGES.role[t],t)}locale_util.localRole=localRole;function localEnclose(t){return extractString(locale_1$h.LOCALE.MESSAGES.enclose[t],t)}locale_util.localEnclose=localEnclose;function extractString(t,r){return t===void 0?r:typeof t=="string"?t:t[0]}locale_util.extractString=extractString;function localeFontCombiner(t){return typeof t=="string"?{font:t,combiner:locale_1$h.LOCALE.ALPHABETS.combiner}:{font:t[0],combiner:locale_1$h.LOCALE.COMBINERS[t[1]]||transformers_1$7.Combiners[t[1]]||locale_1$h.LOCALE.ALPHABETS.combiner}}locale_util.localeFontCombiner=localeFontCombiner;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.numbersToAlpha=t.Grammar=t.ATTRIBUTE=void 0;const r=dom_util,e=engine,n=locale_util,i=locale$d;t.ATTRIBUTE="grammar";class o{constructor(){this.currentFlags={},this.parameters_={},this.corrections_={},this.preprocessors_={},this.stateStack_=[]}static getInstance(){return o.instance=o.instance||new o,o.instance}static parseInput(u){const m={},p=u.split(":");for(let _=0,y=p.length;_<y;_++){const g=p[_].split("="),v=g[0].trim();if(g[1]){m[v]=g[1].trim();continue}v.match(/^!/)?m[v.slice(1)]=!1:m[v]=!0}return m}static parseState(u){const m={},p=u.split(" ");for(let _=0,y=p.length;_<y;_++){const g=p[_].split(":"),v=g[0],x=g[1];m[v]=x||!0}return m}static translateString_(u){if(u.match(/:unit$/))return o.translateUnit_(u);const m=e.default.getInstance();let p=m.evaluator(u,m.dynamicCstr);return p=p===null?u:p,o.getInstance().getParameter("plural")&&(p=i.LOCALE.FUNCTIONS.plural(p)),p}static translateUnit_(u){u=o.prepareUnit_(u);const m=e.default.getInstance(),p=o.getInstance().getParameter("plural"),_=m.strict,y=`${m.locale}.${m.modality}.default`;m.strict=!0;let g,v;return p&&(g=m.defaultParser.parse(y+".plural"),v=m.evaluator(u,g)),v?(m.strict=_,v):(g=m.defaultParser.parse(y+".default"),v=m.evaluator(u,g),m.strict=_,v?(p&&(v=i.LOCALE.FUNCTIONS.plural(v)),v):o.cleanUnit_(u))}static prepareUnit_(u){const m=u.match(/:unit$/);return m?u.slice(0,m.index).replace(/\s+/g," ")+u.slice(m.index):u}static cleanUnit_(u){return u.match(/:unit$/)?u.replace(/:unit$/,""):u}clear(){this.parameters_={},this.stateStack_=[]}setParameter(u,m){const p=this.parameters_[u];return m?this.parameters_[u]=m:delete this.parameters_[u],p}getParameter(u){return this.parameters_[u]}setCorrection(u,m){this.corrections_[u]=m}setPreprocessor(u,m){this.preprocessors_[u]=m}getCorrection(u){return this.corrections_[u]}getState(){const u=[];for(const m in this.parameters_){const p=this.parameters_[m];u.push(typeof p=="string"?m+":"+p:m)}return u.join(" ")}pushState(u){for(const m in u)u[m]=this.setParameter(m,u[m]);this.stateStack_.push(u)}popState(){const u=this.stateStack_.pop();for(const m in u)this.setParameter(m,u[m])}setAttribute(u){if(u&&u.nodeType===r.NodeType.ELEMENT_NODE){const m=this.getState();m&&u.setAttribute(t.ATTRIBUTE,m)}}preprocess(u){return this.runProcessors_(u,this.preprocessors_)}correct(u){return this.runProcessors_(u,this.corrections_)}apply(u,m){return this.currentFlags=m||{},u=this.currentFlags.adjust||this.currentFlags.preprocess?o.getInstance().preprocess(u):u,(this.parameters_.translate||this.currentFlags.translate)&&(u=o.translateString_(u)),u=this.currentFlags.adjust||this.currentFlags.correct?o.getInstance().correct(u):u,this.currentFlags={},u}runProcessors_(u,m){for(const p in this.parameters_){const _=m[p];if(!_)continue;const y=this.parameters_[p];u=y===!0?_(u):_(u,y)}return u}}t.Grammar=o;function a(d,u){if(!u||!d)return d;const m=i.LOCALE.FUNCTIONS.fontRegexp(n.localFont(u));return d.replace(m,"")}function s(d){let u=i.LOCALE.ALPHABETS.capPrefix[e.default.getInstance().domain];return typeof u>"u"&&(u=i.LOCALE.ALPHABETS.capPrefix.default),a(d,u)}function l(d,u){return d+":"+u}function c(d){return d.match(/\d+/)?i.LOCALE.NUMBERS.numberToWords(parseInt(d,10)):d}t.numbersToAlpha=c;function f(d){return d.match(new RegExp("^["+i.LOCALE.MESSAGES.regexp.TEXT+"]+$"))&&(o.getInstance().currentFlags.translate=!1),d}o.getInstance().setCorrection("localFont",n.localFont),o.getInstance().setCorrection("localRole",n.localRole),o.getInstance().setCorrection("localEnclose",n.localEnclose),o.getInstance().setCorrection("ignoreFont",a),o.getInstance().setPreprocessor("annotation",l),o.getInstance().setPreprocessor("noTranslateText",f),o.getInstance().setCorrection("ignoreCaps",s),o.getInstance().setPreprocessor("numbers2alpha",c)})(grammar);var locale_ca={},numbers_ca={};Object.defineProperty(numbers_ca,"__esModule",{value:!0});const grammar_1$b=grammar,messages_1$a=messages;function tensToWords_$1(t){const r=t%100;if(r<20)return NUMBERS$a.ones[r];const e=Math.floor(r/10),n=NUMBERS$a.tens[e],i=NUMBERS$a.ones[r%10];return n&&i?n+(e===2?"-i-":"-")+i:n||i}function hundredsToWords_$8(t){const r=t%1e3,e=Math.floor(r/100),n=e?e===1?"cent":NUMBERS$a.ones[e]+"-cents":"",i=tensToWords_$1(r%100);return n&&i?n+NUMBERS$a.numSep+i:n||i}function numberToWords$a(t){if(t===0)return NUMBERS$a.zero;if(t>=Math.pow(10,36))return t.toString();let r=0,e="";for(;t>0;){const n=t%(r>1?1e6:1e3);if(n){let i=NUMBERS$a.large[r];if(!r)e=hundredsToWords_$8(n);else if(r===1)e=(n===1?"":hundredsToWords_$8(n)+NUMBERS$a.numSep)+i+(e?NUMBERS$a.numSep+e:"");else{const o=numberToWords$a(n);i=n===1?i:i.replace(/\u00f3$/,"ons"),e=o+NUMBERS$a.numSep+i+(e?NUMBERS$a.numSep+e:"")}}t=Math.floor(t/(r>1?1e6:1e3)),r++}return e}function numberToOrdinal$9(t,r){if(t>1999)return numericOrdinal$9(t);if(t<=10)return NUMBERS$a.special.onesOrdinals[t-1];const e=numberToWords$a(t);return e.match(/mil$/)?e.replace(/mil$/,"mil·lèsima"):e.match(/u$/)?e.replace(/u$/,"vena"):e.match(/a$/)?e.replace(/a$/,"ena"):e+(e.match(/e$/)?"na":"ena")}function numericOrdinal$9(t){const r=grammar_1$b.Grammar.getInstance().getParameter("gender");return t.toString()+(r==="f"?"a":"n")}const NUMBERS$a=(0,messages_1$a.NUMBERS)();NUMBERS$a.numericOrdinal=numericOrdinal$9;NUMBERS$a.numberToWords=numberToWords$a;NUMBERS$a.numberToOrdinal=numberToOrdinal$9;numbers_ca.default=NUMBERS$a;Object.defineProperty(locale_ca,"__esModule",{value:!0});locale_ca.ca=void 0;const locale_1$g=locale$d,locale_util_1$a=locale_util,numbers_ca_1=numbers_ca,transformers_1$6=transformers,sansserifCombiner$1=function(t,r,e){return t="sans serif "+(e?e+" "+t:t),r?t+" "+r:t};let locale$c=null;function ca(){return locale$c||(locale$c=create$b()),locale$c}locale_ca.ca=ca;function create$b(){const t=(0,locale_1$g.createLocale)();return t.NUMBERS=numbers_ca_1.default,t.COMBINERS.sansserif=sansserifCombiner$1,t.FUNCTIONS.fracNestDepth=r=>!1,t.FUNCTIONS.combineRootIndex=locale_util_1$a.combinePostfixIndex,t.FUNCTIONS.combineNestedRadical=(r,e,n)=>r+n,t.FUNCTIONS.fontRegexp=r=>RegExp("^"+r+" "),t.FUNCTIONS.plural=r=>/.*os$/.test(r)?r+"sos":/.*s$/.test(r)?r+"os":/.*ga$/.test(r)?r.slice(0,-2)+"gues":/.*ça$/.test(r)?r.slice(0,-2)+"ces":/.*ca$/.test(r)?r.slice(0,-2)+"ques":/.*ja$/.test(r)?r.slice(0,-2)+"ges":/.*qua$/.test(r)?r.slice(0,-3)+"qües":/.*a$/.test(r)?r.slice(0,-1)+"es":/.*(e|i)$/.test(r)?r+"ns":/.*í$/.test(r)?r.slice(0,-1)+"ins":r+"s",t.FUNCTIONS.si=(r,e)=>(e.match(/^metre/)&&(r=r.replace(/a$/,"à").replace(/o$/,"ò").replace(/i$/,"í")),r+e),t.ALPHABETS.combiner=transformers_1$6.Combiners.prefixCombiner,t}var locale_da={},numbers_da={};Object.defineProperty(numbers_da,"__esModule",{value:!0});const messages_1$9=messages;function onePrefix_$2(t,r=!1){return t===NUMBERS$9.ones[1]?r?"et":"en":t}function hundredsToWords_$7(t,r=!1){let e=t%1e3,n="",i=NUMBERS$9.ones[Math.floor(e/100)];if(n+=i?onePrefix_$2(i,!0)+" hundrede":"",e=e%100,e)if(n+=n?" og ":"",i=r?NUMBERS$9.special.smallOrdinals[e]:NUMBERS$9.ones[e],i)n+=i;else{const o=r?NUMBERS$9.special.tensOrdinals[Math.floor(e/10)]:NUMBERS$9.tens[Math.floor(e/10)];i=NUMBERS$9.ones[e%10],n+=i?onePrefix_$2(i)+"og"+o:o}return n}function numberToWords$9(t,r=!1){if(t===0)return NUMBERS$9.zero;if(t>=Math.pow(10,36))return t.toString();let e=0,n="";for(;t>0;){const i=t%1e3;if(i){const o=hundredsToWords_$7(i,r&&!e);if(e){const a=NUMBERS$9.large[e],s=i>1?"er":"";n=onePrefix_$2(o,e<=1)+" "+a+s+(n?" og ":"")+n}else n=onePrefix_$2(o)+n}t=Math.floor(t/1e3),e++}return n}function numberToOrdinal$8(t,r){return t===1?r?"hel":"hele":t===2?r?"halv":"halve":wordOrdinal$7(t)+(r?"dele":"del")}function wordOrdinal$7(t){if(t%100)return numberToWords$9(t,!0);const r=numberToWords$9(t);return r.match(/e$/)?r:r+"e"}function numericOrdinal$8(t){return t.toString()+"."}const NUMBERS$9=(0,messages_1$9.NUMBERS)();NUMBERS$9.wordOrdinal=wordOrdinal$7;NUMBERS$9.numericOrdinal=numericOrdinal$8;NUMBERS$9.numberToWords=numberToWords$9;NUMBERS$9.numberToOrdinal=numberToOrdinal$8;numbers_da.default=NUMBERS$9;Object.defineProperty(locale_da,"__esModule",{value:!0});locale_da.da=void 0;const locale_1$f=locale$d,locale_util_1$9=locale_util,numbers_da_1=numbers_da,tr$4=transformers;let locale$b=null;function da(){return locale$b||(locale$b=create$a()),locale$b}locale_da.da=da;function create$a(){const t=(0,locale_1$f.createLocale)();return t.NUMBERS=numbers_da_1.default,t.FUNCTIONS.radicalNestDepth=locale_util_1$9.nestingToString,t.FUNCTIONS.fontRegexp=r=>r===t.ALPHABETS.capPrefix.default?RegExp("^"+r+" "):RegExp(" "+r+"$"),t.ALPHABETS.combiner=tr$4.Combiners.postfixCombiner,t.ALPHABETS.digitTrans.default=numbers_da_1.default.numberToWords,t}var locale_de={},numbers_de={};Object.defineProperty(numbers_de,"__esModule",{value:!0});const messages_1$8=messages;function onePrefix_$1(t,r=!1){return t===NUMBERS$8.ones[1]?r?"eine":"ein":t}function hundredsToWords_$6(t){let r=t%1e3,e="",n=NUMBERS$8.ones[Math.floor(r/100)];if(e+=n?onePrefix_$1(n)+"hundert":"",r=r%100,r)if(e+=e?NUMBERS$8.numSep:"",n=NUMBERS$8.ones[r],n)e+=n;else{const i=NUMBERS$8.tens[Math.floor(r/10)];n=NUMBERS$8.ones[r%10],e+=n?onePrefix_$1(n)+"und"+i:i}return e}function numberToWords$8(t){if(t===0)return NUMBERS$8.zero;if(t>=Math.pow(10,36))return t.toString();let r=0,e="";for(;t>0;){const n=t%1e3;if(n){const i=hundredsToWords_$6(t%1e3);if(r){const o=NUMBERS$8.large[r],a=r>1&&n>1?o.match(/e$/)?"n":"en":"";e=onePrefix_$1(i,r>1)+o+a+e}else e=onePrefix_$1(i,r>1)+e}t=Math.floor(t/1e3),r++}return e.replace(/ein$/,"eins")}function numberToOrdinal$7(t,r){return t===1?"eintel":t===2?r?"halbe":"halb":wordOrdinal$6(t)+"l"}function wordOrdinal$6(t){return t===1?"erste":t===3?"dritte":t===7?"siebte":t===8?"achte":numberToWords$8(t)+(t<19?"te":"ste")}function numericOrdinal$7(t){return t.toString()+"."}const NUMBERS$8=(0,messages_1$8.NUMBERS)();NUMBERS$8.wordOrdinal=wordOrdinal$6;NUMBERS$8.numericOrdinal=numericOrdinal$7;NUMBERS$8.numberToWords=numberToWords$8;NUMBERS$8.numberToOrdinal=numberToOrdinal$7;numbers_de.default=NUMBERS$8;Object.defineProperty(locale_de,"__esModule",{value:!0});locale_de.de=void 0;const grammar_1$a=grammar,locale_util_1$8=locale_util,locale_1$e=locale$d,numbers_de_1=numbers_de,germanPrefixCombiner=function(t,r,e){return e==="s"&&(r=r.split(" ").map(function(n){return n.replace(/s$/,"")}).join(" "),e=""),t=e?e+" "+t:t,r?r+" "+t:t},germanPostfixCombiner=function(t,r,e){return t=!e||e==="s"?t:e+" "+t,r?t+" "+r:t};let locale$a=null;function de(){return locale$a||(locale$a=create$9()),locale$a}locale_de.de=de;function create$9(){const t=(0,locale_1$e.createLocale)();return t.NUMBERS=numbers_de_1.default,t.COMBINERS.germanPostfix=germanPostfixCombiner,t.ALPHABETS.combiner=germanPrefixCombiner,t.FUNCTIONS.radicalNestDepth=r=>r>1?t.NUMBERS.numberToWords(r)+"fach":"",t.FUNCTIONS.combineRootIndex=(r,e)=>{const n=e?e+"wurzel":"";return r.replace("Wurzel",n)},t.FUNCTIONS.combineNestedRadical=(r,e,n)=>{r=n.match(/exponent$/)?r+"r":r;const i=(e?e+" ":"")+r;return n.match(/ /)?n.replace(/ /," "+i+" "):i+" "+n},t.FUNCTIONS.fontRegexp=function(r){return r=r.split(" ").map(function(e){return e.replace(/s$/,"(|s)")}).join(" "),new RegExp("((^"+r+" )|( "+r+"$))")},t.CORRECTIONS.correctOne=r=>r.replace(/^eins$/,"ein"),t.CORRECTIONS.localFontNumber=r=>(0,locale_util_1$8.localFont)(r).split(" ").map(function(n){return n.replace(/s$/,"")}).join(" "),t.CORRECTIONS.lowercase=r=>r.toLowerCase(),t.CORRECTIONS.article=r=>{const e=grammar_1$a.Grammar.getInstance().getParameter("case"),n=grammar_1$a.Grammar.getInstance().getParameter("plural");return e==="dative"?{der:"dem",die:n?"den":"der",das:"dem"}[r]:r},t.CORRECTIONS.masculine=r=>grammar_1$a.Grammar.getInstance().getParameter("case")==="dative"?r+"n":r,t}var locale_en={},numbers_en={};Object.defineProperty(numbers_en,"__esModule",{value:!0});const messages_1$7=messages;function hundredsToWords_$5(t){let r=t%1e3,e="";return e+=NUMBERS$7.ones[Math.floor(r/100)]?NUMBERS$7.ones[Math.floor(r/100)]+NUMBERS$7.numSep+"hundred":"",r=r%100,r&&(e+=e?NUMBERS$7.numSep:"",e+=NUMBERS$7.ones[r]||NUMBERS$7.tens[Math.floor(r/10)]+(r%10?NUMBERS$7.numSep+NUMBERS$7.ones[r%10]:"")),e}function numberToWords$7(t){if(t===0)return NUMBERS$7.zero;if(t>=Math.pow(10,36))return t.toString();let r=0,e="";for(;t>0;)t%1e3&&(e=hundredsToWords_$5(t%1e3)+(r?"-"+NUMBERS$7.large[r]+"-":"")+e),t=Math.floor(t/1e3),r++;return e.replace(/-$/,"")}function numberToOrdinal$6(t,r){if(t===1)return r?"oneths":"oneth";if(t===2)return r?"halves":"half";const e=wordOrdinal$5(t);return r?e+"s":e}function wordOrdinal$5(t){let r=numberToWords$7(t);return r.match(/one$/)?r=r.slice(0,-3)+"first":r.match(/two$/)?r=r.slice(0,-3)+"second":r.match(/three$/)?r=r.slice(0,-5)+"third":r.match(/five$/)?r=r.slice(0,-4)+"fifth":r.match(/eight$/)?r=r.slice(0,-5)+"eighth":r.match(/nine$/)?r=r.slice(0,-4)+"ninth":r.match(/twelve$/)?r=r.slice(0,-6)+"twelfth":r.match(/ty$/)?r=r.slice(0,-2)+"tieth":r=r+"th",r}function numericOrdinal$6(t){const r=t%100,e=t.toString();if(r>10&&r<20)return e+"th";switch(t%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}}const NUMBERS$7=(0,messages_1$7.NUMBERS)();NUMBERS$7.wordOrdinal=wordOrdinal$5;NUMBERS$7.numericOrdinal=numericOrdinal$6;NUMBERS$7.numberToWords=numberToWords$7;NUMBERS$7.numberToOrdinal=numberToOrdinal$6;numbers_en.default=NUMBERS$7;Object.defineProperty(locale_en,"__esModule",{value:!0});locale_en.en=void 0;const grammar_1$9=grammar,locale_1$d=locale$d,locale_util_1$7=locale_util,numbers_en_1=numbers_en,tr$3=transformers;let locale$9=null;function en(){return locale$9||(locale$9=create$8()),locale$9}locale_en.en=en;function create$8(){const t=(0,locale_1$d.createLocale)();return t.NUMBERS=numbers_en_1.default,t.FUNCTIONS.radicalNestDepth=locale_util_1$7.nestingToString,t.FUNCTIONS.plural=r=>/.*s$/.test(r)?r:r+"s",t.ALPHABETS.combiner=tr$3.Combiners.prefixCombiner,t.ALPHABETS.digitTrans.default=numbers_en_1.default.numberToWords,t.CORRECTIONS.article=r=>grammar_1$9.Grammar.getInstance().getParameter("noArticle")?"":r,t}var locale_es={},numbers_es={};Object.defineProperty(numbers_es,"__esModule",{value:!0});const grammar_1$8=grammar,messages_1$6=messages;function tensToWords_(t){const r=t%100;if(r<30)return NUMBERS$6.ones[r];const e=NUMBERS$6.tens[Math.floor(r/10)],n=NUMBERS$6.ones[r%10];return e&&n?e+" y "+n:e||n}function hundredsToWords_$4(t){const r=t%1e3,e=Math.floor(r/100),n=NUMBERS$6.special.hundreds[e],i=tensToWords_(r%100);return e===1?i?n+"to "+i:n:n&&i?n+" "+i:n||i}function numberToWords$6(t){if(t===0)return NUMBERS$6.zero;if(t>=Math.pow(10,36))return t.toString();let r=0,e="";for(;t>0;){const n=t%1e3;if(n){let i=NUMBERS$6.large[r];const o=hundredsToWords_$4(n);r?n===1?(i=i.match("/^mil( |$)/")?i:"un "+i,e=i+(e?" "+e:"")):(i=i.replace(/\u00f3n$/,"ones"),e=hundredsToWords_$4(n)+" "+i+(e?" "+e:"")):e=o}t=Math.floor(t/1e3),r++}return e}function numberToOrdinal$5(t,r){if(t>1999)return t.toString()+"a";if(t<=12)return NUMBERS$6.special.onesOrdinals[t-1];const e=[];if(t>=1e3&&(t=t-1e3,e.push("milésima")),!t)return e.join(" ");let n=0;return n=Math.floor(t/100),n>0&&(e.push(NUMBERS$6.special.hundredsOrdinals[n-1]),t=t%100),t<=12?e.push(NUMBERS$6.special.onesOrdinals[t-1]):(n=Math.floor(t/10),n>0&&(e.push(NUMBERS$6.special.tensOrdinals[n-1]),t=t%10),t>0&&e.push(NUMBERS$6.special.onesOrdinals[t-1])),e.join(" ")}function numericOrdinal$5(t){const r=grammar_1$8.Grammar.getInstance().getParameter("gender");return t.toString()+(r==="f"?"a":"o")}const NUMBERS$6=(0,messages_1$6.NUMBERS)();NUMBERS$6.numericOrdinal=numericOrdinal$5;NUMBERS$6.numberToWords=numberToWords$6;NUMBERS$6.numberToOrdinal=numberToOrdinal$5;numbers_es.default=NUMBERS$6;Object.defineProperty(locale_es,"__esModule",{value:!0});locale_es.es=void 0;const locale_1$c=locale$d,locale_util_1$6=locale_util,numbers_es_1=numbers_es,transformers_1$5=transformers,sansserifCombiner=function(t,r,e){return t="sans serif "+(e?e+" "+t:t),r?t+" "+r:t};let locale$8=null;function es(){return locale$8||(locale$8=create$7()),locale$8}locale_es.es=es;function create$7(){const t=(0,locale_1$c.createLocale)();return t.NUMBERS=numbers_es_1.default,t.COMBINERS.sansserif=sansserifCombiner,t.FUNCTIONS.fracNestDepth=r=>!1,t.FUNCTIONS.combineRootIndex=locale_util_1$6.combinePostfixIndex,t.FUNCTIONS.combineNestedRadical=(r,e,n)=>r+n,t.FUNCTIONS.fontRegexp=r=>RegExp("^"+r+" "),t.FUNCTIONS.plural=r=>/.*(a|e|i|o|u)$/.test(r)?r+"s":/.*z$/.test(r)?r.slice(0,-1)+"ces":/.*c$/.test(r)?r.slice(0,-1)+"ques":/.*g$/.test(r)?r+"ues":/.*\u00f3n$/.test(r)?r.slice(0,-2)+"ones":r+"es",t.FUNCTIONS.si=(r,e)=>(e.match(/^metro/)&&(r=r.replace(/a$/,"á").replace(/o$/,"ó").replace(/i$/,"í")),r+e),t.ALPHABETS.combiner=transformers_1$5.Combiners.prefixCombiner,t}var locale_fr={},numbers_fr={};Object.defineProperty(numbers_fr,"__esModule",{value:!0});const engine_1$f=engine,grammar_1$7=grammar,messages_1$5=messages;function hundredsToWords_$3(t){let r=t%1e3,e="";if(e+=NUMBERS$5.ones[Math.floor(r/100)]?NUMBERS$5.ones[Math.floor(r/100)]+"-cent":"",r=r%100,r){e+=e?"-":"";let i=NUMBERS$5.ones[r];if(i)e+=i;else{const o=NUMBERS$5.tens[Math.floor(r/10)];o.match(/-dix$/)?(i=NUMBERS$5.ones[r%10+10],e+=o.replace(/-dix$/,"")+"-"+i):e+=o+(r%10?"-"+NUMBERS$5.ones[r%10]:"")}}const n=e.match(/s-\w+$/);return n?e.replace(/s-\w+$/,n[0].slice(1)):e.replace(/-un$/,"-et-un")}function numberToWords$5(t){if(t===0)return NUMBERS$5.zero;if(t>=Math.pow(10,36))return t.toString();NUMBERS$5.special["tens-"+engine_1$f.default.getInstance().subiso]&&(NUMBERS$5.tens=NUMBERS$5.special["tens-"+engine_1$f.default.getInstance().subiso]);let r=0,e="";for(;t>0;){const n=t%1e3;if(n){let i=NUMBERS$5.large[r];const o=hundredsToWords_$3(n);if(i&&i.match(/^mille /)){const a=i.replace(/^mille /,"");e.match(RegExp(a))?e=o+(r?"-mille-":"")+e:e.match(RegExp(a.replace(/s$/,"")))?e=o+(r?"-mille-":"")+e.replace(a.replace(/s$/,""),a):e=o+(r?"-"+i+"-":"")+e}else i=n===1&&i?i.replace(/s$/,""):i,e=o+(r?"-"+i+"-":"")+e}t=Math.floor(t/1e3),r++}return e.replace(/-$/,"")}const SMALL_ORDINAL={1:"unième",2:"demi",3:"tiers",4:"quart"};function numberToOrdinal$4(t,r){const e=SMALL_ORDINAL[t]||wordOrdinal$4(t);return t===3?e:r?e+"s":e}function wordOrdinal$4(t){if(t===1)return"première";let r=numberToWords$5(t);return r.match(/^neuf$/)?r=r.slice(0,-1)+"v":r.match(/cinq$/)?r=r+"u":r.match(/trois$/)?r=r+"":(r.match(/e$/)||r.match(/s$/))&&(r=r.slice(0,-1)),r=r+"ième",r}function numericOrdinal$4(t){const r=grammar_1$7.Grammar.getInstance().getParameter("gender");return t===1?t.toString()+(r==="m"?"er":"re"):t.toString()+"e"}const NUMBERS$5=(0,messages_1$5.NUMBERS)();NUMBERS$5.wordOrdinal=wordOrdinal$4;NUMBERS$5.numericOrdinal=numericOrdinal$4;NUMBERS$5.numberToWords=numberToWords$5;NUMBERS$5.numberToOrdinal=numberToOrdinal$4;numbers_fr.default=NUMBERS$5;Object.defineProperty(locale_fr,"__esModule",{value:!0});locale_fr.fr=void 0;const grammar_1$6=grammar,locale_1$b=locale$d,locale_util_1$5=locale_util,numbers_fr_1=numbers_fr,transformers_1$4=transformers;let locale$7=null;function fr(){return locale$7||(locale$7=create$6()),locale$7}locale_fr.fr=fr;function create$6(){const t=(0,locale_1$b.createLocale)();return t.NUMBERS=numbers_fr_1.default,t.FUNCTIONS.radicalNestDepth=locale_util_1$5.nestingToString,t.FUNCTIONS.combineRootIndex=locale_util_1$5.combinePostfixIndex,t.FUNCTIONS.combineNestedFraction=(r,e,n)=>n.replace(/ $/g,"")+e+r,t.FUNCTIONS.combineNestedRadical=(r,e,n)=>n+" "+r,t.FUNCTIONS.fontRegexp=r=>RegExp(" (en |)"+r+"$"),t.FUNCTIONS.plural=r=>/.*s$/.test(r)?r:r+"s",t.CORRECTIONS.article=r=>grammar_1$6.Grammar.getInstance().getParameter("noArticle")?"":r,t.ALPHABETS.combiner=transformers_1$4.Combiners.romanceCombiner,t.SUBISO={default:"fr",current:"fr",all:["fr","be","ch"]},t}var locale_hi={},numbers_hi={};Object.defineProperty(numbers_hi,"__esModule",{value:!0});const grammar_1$5=grammar,messages_1$4=messages;function hundredsToWords_$2(t){let r=t%1e3,e="";return e+=NUMBERS$4.ones[Math.floor(r/100)]?NUMBERS$4.ones[Math.floor(r/100)]+NUMBERS$4.numSep+NUMBERS$4.special.hundred:"",r=r%100,r&&(e+=e?NUMBERS$4.numSep:"",e+=NUMBERS$4.ones[r]),e}function numberToWords$4(t){if(t===0)return NUMBERS$4.zero;if(t>=Math.pow(10,32))return t.toString();let r=0,e="";const n=t%1e3,i=hundredsToWords_$2(n);if(t=Math.floor(t/1e3),!t)return i;for(;t>0;){const o=t%100;o&&(e=NUMBERS$4.ones[o]+NUMBERS$4.numSep+NUMBERS$4.large[r]+(e?NUMBERS$4.numSep+e:"")),t=Math.floor(t/100),r++}return i?e+NUMBERS$4.numSep+i:e}function numberToOrdinal$3(t,r){return t<=10?NUMBERS$4.special.smallDenominators[t]:wordOrdinal$3(t)+" अंश"}function wordOrdinal$3(t){const r=grammar_1$5.Grammar.getInstance().getParameter("gender");return t<=0?t.toString():t<10?r==="f"?NUMBERS$4.special.ordinalsFeminine[t]:NUMBERS$4.special.ordinalsMasculine[t]:numberToWords$4(t)+(r==="f"?"वीं":"वाँ")}function numericOrdinal$3(t){const r=grammar_1$5.Grammar.getInstance().getParameter("gender");return t>0&&t<10?r==="f"?NUMBERS$4.special.simpleSmallOrdinalsFeminine[t]:NUMBERS$4.special.simpleSmallOrdinalsMasculine[t]:t.toString().split("").map(function(n){const i=parseInt(n,10);return isNaN(i)?"":NUMBERS$4.special.simpleNumbers[i]}).join("")+(r==="f"?"वीं":"वाँ")}const NUMBERS$4=(0,messages_1$4.NUMBERS)();NUMBERS$4.wordOrdinal=wordOrdinal$3;NUMBERS$4.numericOrdinal=numericOrdinal$3;NUMBERS$4.numberToWords=numberToWords$4;NUMBERS$4.numberToOrdinal=numberToOrdinal$3;numbers_hi.default=NUMBERS$4;Object.defineProperty(locale_hi,"__esModule",{value:!0});locale_hi.hi=void 0;const locale_1$a=locale$d,numbers_hi_1=numbers_hi,transformers_1$3=transformers,locale_util_1$4=locale_util;let locale$6=null;function hi(){return locale$6||(locale$6=create$5()),locale$6}locale_hi.hi=hi;function create$5(){const t=(0,locale_1$a.createLocale)();return t.NUMBERS=numbers_hi_1.default,t.ALPHABETS.combiner=transformers_1$3.Combiners.prefixCombiner,t.FUNCTIONS.radicalNestDepth=locale_util_1$4.nestingToString,t}var locale_it={},numbers_it={};Object.defineProperty(numbers_it,"__esModule",{value:!0});const grammar_1$4=grammar,messages_1$3=messages;function hundredsToWords_$1(t){let r=t%1e3,e="";if(e+=NUMBERS$3.ones[Math.floor(r/100)]?NUMBERS$3.ones[Math.floor(r/100)]+NUMBERS$3.numSep+"cento":"",r=r%100,r){e+=e?NUMBERS$3.numSep:"";const n=NUMBERS$3.ones[r];if(n)e+=n;else{let i=NUMBERS$3.tens[Math.floor(r/10)];const o=r%10;(o===1||o===8)&&(i=i.slice(0,-1)),e+=i,e+=o?NUMBERS$3.numSep+NUMBERS$3.ones[r%10]:""}}return e}function numberToWords$3(t){if(t===0)return NUMBERS$3.zero;if(t>=Math.pow(10,36))return t.toString();if(t===1&&grammar_1$4.Grammar.getInstance().getParameter("fraction"))return"un";let r=0,e="";for(;t>0;)t%1e3&&(e=hundredsToWords_$1(t%1e3)+(r?"-"+NUMBERS$3.large[r]+"-":"")+e),t=Math.floor(t/1e3),r++;return e.replace(/-$/,"")}function numberToOrdinal$2(t,r){if(t===2)return r?"mezzi":"mezzo";const e=wordOrdinal$2(t);if(!r)return e;const n=e.match(/o$/)?"i":"e";return e.slice(0,-1)+n}function wordOrdinal$2(t){const e=grammar_1$4.Grammar.getInstance().getParameter("gender")==="m"?"o":"a";let n=NUMBERS$3.special.onesOrdinals[t];return n?n.slice(0,-1)+e:(n=numberToWords$3(t),n.slice(0,-1)+"esim"+e)}function numericOrdinal$2(t){const r=grammar_1$4.Grammar.getInstance().getParameter("gender");return t.toString()+(r==="m"?"o":"a")}const NUMBERS$3=(0,messages_1$3.NUMBERS)();NUMBERS$3.wordOrdinal=wordOrdinal$2;NUMBERS$3.numericOrdinal=numericOrdinal$2;NUMBERS$3.numberToWords=numberToWords$3;NUMBERS$3.numberToOrdinal=numberToOrdinal$2;numbers_it.default=NUMBERS$3;Object.defineProperty(locale_it,"__esModule",{value:!0});locale_it.it=void 0;const locale_util_1$3=locale_util,locale_1$9=locale$d,numbers_it_1=numbers_it,transformers_1$2=transformers,italianPostfixCombiner=function(t,r,e){return t.match(/^[a-zA-Z]$/)&&(r=r.replace("cerchiato","cerchiata")),t=e?t+" "+e:t,r?t+" "+r:t};let locale$5=null;function it(){return locale$5||(locale$5=create$4()),locale$5}locale_it.it=it;function create$4(){const t=(0,locale_1$9.createLocale)();return t.NUMBERS=numbers_it_1.default,t.COMBINERS.italianPostfix=italianPostfixCombiner,t.FUNCTIONS.radicalNestDepth=locale_util_1$3.nestingToString,t.FUNCTIONS.combineRootIndex=locale_util_1$3.combinePostfixIndex,t.FUNCTIONS.combineNestedFraction=(r,e,n)=>n.replace(/ $/g,"")+e+r,t.FUNCTIONS.combineNestedRadical=(r,e,n)=>n+" "+r,t.FUNCTIONS.fontRegexp=r=>RegExp(" (en |)"+r+"$"),t.ALPHABETS.combiner=transformers_1$2.Combiners.romanceCombiner,t}var locale_nb={},numbers_nn={};Object.defineProperty(numbers_nn,"__esModule",{value:!0});const engine_1$e=engine,messages_1$2=messages;function hundredsToWordsRo_(t,r=!1){let e=t%1e3,n="";const i=Math.floor(e/100),o=NUMBERS$2.ones[i];if(n+=o?(i===1?"":o)+"hundre":"",e=e%100,e){if(n+=n?"og":"",r){const a=NUMBERS$2.special.smallOrdinals[e];if(a)return n+a;if(e%10)return n+NUMBERS$2.tens[Math.floor(e/10)]+NUMBERS$2.special.smallOrdinals[e%10]}n+=NUMBERS$2.ones[e]||NUMBERS$2.tens[Math.floor(e/10)]+(e%10?NUMBERS$2.ones[e%10]:"")}return r?replaceOrdinal(n):n}function numberToWordsRo(t,r=!1){if(t===0)return r?NUMBERS$2.special.smallOrdinals[0]:NUMBERS$2.zero;if(t>=Math.pow(10,36))return t.toString();let e=0,n="";for(;t>0;){const i=t%1e3;if(i){const o=hundredsToWordsRo_(t%1e3,e?!1:r);!e&&r&&(r=!r),n=o+(e?" "+(NUMBERS$2.large[e]+(e>1&&i>1?"er":""))+(n?" ":""):"")+n}t=Math.floor(t/1e3),e++}return r?n+(n.match(/tusen$/)?"de":"te"):n}function numberToOrdinal$1(t,r){return wordOrdinal$1(t)}function replaceOrdinal(t){const r=NUMBERS$2.special.endOrdinal[0];return r==="a"&&t.match(/en$/)?t.slice(0,-2)+NUMBERS$2.special.endOrdinal:t.match(/(d|n)$/)||t.match(/hundre$/)?t+"de":t.match(/i$/)?t+NUMBERS$2.special.endOrdinal:r==="a"&&t.match(/e$/)?t.slice(0,-1)+NUMBERS$2.special.endOrdinal:(t.match(/e$/),t+"nde")}function wordOrdinal$1(t){return numberToWords$2(t,!0)}function numericOrdinal$1(t){return t.toString()+"."}const NUMBERS$2=(0,messages_1$2.NUMBERS)();NUMBERS$2.wordOrdinal=wordOrdinal$1;NUMBERS$2.numericOrdinal=numericOrdinal$1;NUMBERS$2.numberToWords=numberToWords$2;NUMBERS$2.numberToOrdinal=numberToOrdinal$1;numbers_nn.default=NUMBERS$2;function onePrefix_(t,r=!1){const e=NUMBERS$2.ones[1];return t===e?t==="ein"?"eitt ":r?"et":"ett":t}function hundredsToWordsGe_(t,r=!1){let e=t%1e3,n="",i=NUMBERS$2.ones[Math.floor(e/100)];if(n+=i?onePrefix_(i)+"hundre":"",e=e%100,e){if(n+=n?"og":"",r){const o=NUMBERS$2.special.smallOrdinals[e];if(o)return n+=o}if(i=NUMBERS$2.ones[e],i)n+=i;else{const o=NUMBERS$2.tens[Math.floor(e/10)];i=NUMBERS$2.ones[e%10],n+=i?i+"og"+o:o}}return r?replaceOrdinal(n):n}function numberToWordsGe(t,r=!1){if(t===0)return r?NUMBERS$2.special.smallOrdinals[0]:NUMBERS$2.zero;if(t>=Math.pow(10,36))return t.toString();let e=0,n="";for(;t>0;){const i=t%1e3;if(i){const o=hundredsToWordsGe_(t%1e3,e?!1:r);!e&&r&&(r=!r),n=(e===1?onePrefix_(o,!0):o)+(e>1?NUMBERS$2.numSep:"")+(e?NUMBERS$2.large[e]+(e>1&&i>1?"er":""):"")+(e>1&&n?NUMBERS$2.numSep:"")+n}t=Math.floor(t/1e3),e++}return r?n+(n.match(/tusen$/)?"de":"te"):n}function numberToWords$2(t,r=!1){return engine_1$e.default.getInstance().subiso==="alt"?numberToWordsGe(t,r):numberToWordsRo(t,r)}Object.defineProperty(locale_nb,"__esModule",{value:!0});locale_nb.nb=void 0;const locale_1$8=locale$d,locale_util_1$2=locale_util,numbers_nn_1$1=numbers_nn,tr$2=transformers;let locale$4=null;function nb(){return locale$4||(locale$4=create$3()),locale$4}locale_nb.nb=nb;function create$3(){const t=(0,locale_1$8.createLocale)();return t.NUMBERS=numbers_nn_1$1.default,t.ALPHABETS.combiner=tr$2.Combiners.prefixCombiner,t.ALPHABETS.digitTrans.default=numbers_nn_1$1.default.numberToWords,t.FUNCTIONS.radicalNestDepth=locale_util_1$2.nestingToString,t}var locale_nemeth={},numbers_nemeth={};Object.defineProperty(numbers_nemeth,"__esModule",{value:!0});const messages_1$1=messages;function numberToWords$1(t){return t.toString().split("").map(function(e){return NUMBERS$1.ones[parseInt(e,10)]}).join("")}const NUMBERS$1=(0,messages_1$1.NUMBERS)();NUMBERS$1.numberToWords=numberToWords$1;NUMBERS$1.numberToOrdinal=numberToWords$1;numbers_nemeth.default=NUMBERS$1;Object.defineProperty(locale_nemeth,"__esModule",{value:!0});locale_nemeth.nemeth=void 0;const locale_1$7=locale$d,numbers_nemeth_1=numbers_nemeth,transformers_1$1=transformers,simpleEnglish=function(t){return t.match(RegExp("^"+locale$3.ALPHABETS.languagePrefix.english))?t.slice(1):t},postfixCombiner=function(t,r,e){return t=simpleEnglish(t),r?t+r:t},germanCombiner=function(t,r,e){return r+simpleEnglish(t)},embellishCombiner=function(t,r,e){return t=simpleEnglish(t),r+(e||"")+t+"⠻"},doubleEmbellishCombiner=function(t,r,e){return t=simpleEnglish(t),r+(e||"")+t+"⠻⠻"},parensCombiner=function(t,r,e){return t=simpleEnglish(t),r+t+"⠾"};let locale$3=null;function nemeth(){return locale$3||(locale$3=create$2()),locale$3}locale_nemeth.nemeth=nemeth;function create$2(){const t=(0,locale_1$7.createLocale)();return t.NUMBERS=numbers_nemeth_1.default,t.COMBINERS={postfixCombiner,germanCombiner,embellishCombiner,doubleEmbellishCombiner,parensCombiner},t.FUNCTIONS.fracNestDepth=r=>!1,t.FUNCTIONS.fontRegexp=r=>RegExp("^"+r),t.FUNCTIONS.si=transformers_1$1.identityTransformer,t.ALPHABETS.combiner=(r,e,n)=>e?e+n+r:simpleEnglish(r),t.ALPHABETS.digitTrans={default:numbers_nemeth_1.default.numberToWords},t}var locale_nn={};Object.defineProperty(locale_nn,"__esModule",{value:!0});locale_nn.nn=void 0;const locale_1$6=locale$d,locale_util_1$1=locale_util,numbers_nn_1=numbers_nn,tr$1=transformers;let locale$2=null;function nn(){return locale$2||(locale$2=create$1()),locale$2}locale_nn.nn=nn;function create$1(){const t=(0,locale_1$6.createLocale)();return t.NUMBERS=numbers_nn_1.default,t.ALPHABETS.combiner=tr$1.Combiners.prefixCombiner,t.ALPHABETS.digitTrans.default=numbers_nn_1.default.numberToWords,t.FUNCTIONS.radicalNestDepth=locale_util_1$1.nestingToString,t.SUBISO={default:"",current:"",all:["","alt"]},t}var locale_sv={},numbers_sv={};Object.defineProperty(numbers_sv,"__esModule",{value:!0});const messages_1=messages;function hundredsToWords_(t){let r=t%1e3,e="";const n=Math.floor(r/100);return e+=NUMBERS.ones[n]?(n===1?"":NUMBERS.ones[n]+NUMBERS.numSep)+"hundra":"",r=r%100,r&&(e+=e?NUMBERS.numSep:"",e+=NUMBERS.ones[r]||NUMBERS.tens[Math.floor(r/10)]+(r%10?NUMBERS.numSep+NUMBERS.ones[r%10]:"")),e}function numberToWords(t,r=!1){if(t===0)return NUMBERS.zero;if(t>=Math.pow(10,36))return t.toString();let e=0,n="";for(;t>0;){const i=t%1e3;if(i){const o=NUMBERS.large[e],a=i>1&&e>1&&!r?"er":"";n=(e===1&&i===1?"":(e>1&&i===1?"en":hundredsToWords_(t%1e3))+(e>1?" ":""))+(e?o+a+(e>1?" ":""):"")+n}t=Math.floor(t/1e3),e++}return n.replace(/ $/,"")}function numberToOrdinal(t,r){if(t===1)return"hel";if(t===2)return r?"halva":"halv";let e=wordOrdinal(t);return e=e.match(/de$/)?e.replace(/de$/,""):e,e+(r?"delar":"del")}function wordOrdinal(t){let r=numberToWords(t,!0);return r.match(/^noll$/)?r="nollte":r.match(/ett$/)?r=r.replace(/ett$/,"första"):r.match(/två$/)?r=r.replace(/två$/,"andra"):r.match(/tre$/)?r=r.replace(/tre$/,"tredje"):r.match(/fyra$/)?r=r.replace(/fyra$/,"fjärde"):r.match(/fem$/)?r=r.replace(/fem$/,"femte"):r.match(/sex$/)?r=r.replace(/sex$/,"sjätte"):r.match(/sju$/)?r=r.replace(/sju$/,"sjunde"):r.match(/åtta$/)?r=r.replace(/åtta$/,"åttonde"):r.match(/nio$/)?r=r.replace(/nio$/,"nionde"):r.match(/tio$/)?r=r.replace(/tio$/,"tionde"):r.match(/elva$/)?r=r.replace(/elva$/,"elfte"):r.match(/tolv$/)?r=r.replace(/tolv$/,"tolfte"):r.match(/tusen$/)?r=r.replace(/tusen$/,"tusonde"):r.match(/jard$/)||r.match(/jon$/)?r=r+"te":r=r+"de",r}function numericOrdinal(t){const r=t.toString();return r.match(/11$|12$/)?r+":e":r+(r.match(/1$|2$/)?":a":":e")}const NUMBERS=(0,messages_1.NUMBERS)();NUMBERS.wordOrdinal=wordOrdinal;NUMBERS.numericOrdinal=numericOrdinal;NUMBERS.numberToWords=numberToWords;NUMBERS.numberToOrdinal=numberToOrdinal;numbers_sv.default=NUMBERS;Object.defineProperty(locale_sv,"__esModule",{value:!0});locale_sv.sv=void 0;const locale_1$5=locale$d,locale_util_1=locale_util,numbers_sv_1=numbers_sv,tr=transformers;let locale$1=null;function sv(){return locale$1||(locale$1=create()),locale$1}locale_sv.sv=sv;function create(){const t=(0,locale_1$5.createLocale)();return t.NUMBERS=numbers_sv_1.default,t.FUNCTIONS.radicalNestDepth=locale_util_1.nestingToString,t.FUNCTIONS.fontRegexp=function(r){return new RegExp("((^"+r+" )|( "+r+"$))")},t.ALPHABETS.combiner=tr.Combiners.prefixCombiner,t.ALPHABETS.digitTrans.default=numbers_sv_1.default.numberToWords,t.CORRECTIONS.correctOne=r=>r.replace(/^ett$/,"en"),t}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.completeLocale=t.getLocale=t.setLocale=t.locales=void 0;const r=engine,e=variables,n=grammar,i=locale_ca,o=locale_da,a=locale_de,s=locale_en,l=locale_es,c=locale_fr,f=locale_hi,d=locale_it,u=locale_nb,m=locale_nemeth,p=locale_nn,_=locale_sv,y=locale$d;t.locales={ca:i.ca,da:o.da,de:a.de,en:s.en,es:l.es,fr:c.fr,hi:f.hi,it:d.it,nb:u.nb,nn:p.nn,sv:_.sv,nemeth:m.nemeth};function g(){const S=x();if(v(S),S){for(const M of Object.getOwnPropertyNames(S))y.LOCALE[M]=S[M];for(const[M,C]of Object.entries(S.CORRECTIONS))n.Grammar.getInstance().setCorrection(M,C)}}t.setLocale=g;function v(S){const M=r.default.getInstance().subiso;S.SUBISO.all.indexOf(M)===-1&&(r.default.getInstance().subiso=S.SUBISO.default),S.SUBISO.current=r.default.getInstance().subiso}function x(){const S=e.Variables.ensureLocale(r.default.getInstance().locale,r.default.getInstance().defaultLocale);return r.default.getInstance().locale=S,t.locales[S]()}t.getLocale=x;function b(S){const M=t.locales[S.locale];if(!M){console.error("Locale "+S.locale+" does not exist!");return}const C=S.kind.toUpperCase(),A=S.messages;if(!A)return;const E=M();for(const[$,D]of Object.entries(A))E[C][$]=D}t.completeLocale=b})(l10n);var math_map={},browser_util={};Object.defineProperty(browser_util,"__esModule",{value:!0});browser_util.loadScript=browser_util.loadMapsForIE_=browser_util.installWGXpath_=browser_util.loadWGXpath_=browser_util.mapsForIE=browser_util.detectEdge=browser_util.detectIE=void 0;const system_external_1$3=system_external,xpath_util_1$1=xpath_util;function detectIE(){return typeof window<"u"&&"ActiveXObject"in window&&"clipboardData"in window?(loadMapsForIE_(),loadWGXpath_(),!0):!1}browser_util.detectIE=detectIE;function detectEdge(){var t;return typeof window<"u"&&"MSGestureEvent"in window&&((t=window.chrome)===null||t===void 0?void 0:t.loadTimes)===null?(document.evaluate=null,loadWGXpath_(!0),!0):!1}browser_util.detectEdge=detectEdge;browser_util.mapsForIE=null;function loadWGXpath_(t){loadScript(system_external_1$3.default.WGXpath),installWGXpath_(t)}browser_util.loadWGXpath_=loadWGXpath_;function installWGXpath_(t,r){let e=r||1;if(typeof wgxpath>"u"&&e<10){setTimeout(function(){installWGXpath_(t,e++)},200);return}e>=10||(system_external_1$3.default.wgxpath=wgxpath,t?system_external_1$3.default.wgxpath.install({document}):system_external_1$3.default.wgxpath.install(),xpath_util_1$1.xpath.evaluate=document.evaluate,xpath_util_1$1.xpath.result=XPathResult,xpath_util_1$1.xpath.createNSResolver=document.createNSResolver)}browser_util.installWGXpath_=installWGXpath_;function loadMapsForIE_(){loadScript(system_external_1$3.default.mathmapsIePath)}browser_util.loadMapsForIE_=loadMapsForIE_;function loadScript(t){const r=system_external_1$3.default.document.createElement("script");r.type="text/javascript",r.src=t,system_external_1$3.default.document.head?system_external_1$3.default.document.head.appendChild(r):system_external_1$3.default.document.body.appendChild(r)}browser_util.loadScript=loadScript;var file_util={};Object.defineProperty(file_util,"__esModule",{value:!0});file_util.localePath=file_util.makePath=void 0;const system_external_1$2=system_external;function makePath(t){return t.match("/$")?t:t+"/"}file_util.makePath=makePath;function localePath(t,r="json"){return makePath(system_external_1$2.default.jsonPath)+t+(r.match(/^\./)?r:"."+r)}file_util.localePath=localePath;var math_compound_store={},math_simple_store={};Object.defineProperty(math_simple_store,"__esModule",{value:!0});math_simple_store.MathSimpleStore=void 0;const engine_1$d=engine,dynamic_cstr_1$8=dynamic_cstr;class MathSimpleStore{constructor(){this.category="",this.rules=new Map}static parseUnicode(r){const e=parseInt(r,16);return String.fromCodePoint(e)}static testDynamicConstraints_(r,e){return engine_1$d.default.getInstance().strict?e.cstr.equal(r):engine_1$d.default.getInstance().comparator.match(e.cstr)}defineRulesFromMappings(r,e,n,i,o){for(const a in o)for(const s in o[a]){const l=o[a][s];this.defineRuleFromStrings(r,e,n,a,s,i,l)}}getRules(r){let e=this.rules.get(r);return e||(e=[],this.rules.set(r,e)),e}defineRuleFromStrings(r,e,n,i,o,a,s){let l=this.getRules(e);const c=engine_1$d.default.getInstance().parsers[i]||engine_1$d.default.getInstance().defaultParser,f=engine_1$d.default.getInstance().comparators[i],d=`${e}.${n}.${i}.${o}`,u=c.parse(d),m=f?f():engine_1$d.default.getInstance().comparator,p=m.getReference();m.setReference(u);const _={cstr:u,action:s};l=l.filter(y=>!u.equal(y.cstr)),l.push(_),this.rules.set(e,l),m.setReference(p)}lookupRule(r,e){let n=this.getRules(e.getValue(dynamic_cstr_1$8.Axis.LOCALE));return n=n.filter(function(i){return MathSimpleStore.testDynamicConstraints_(e,i)}),n.length===1?n[0]:n.length?n.sort((i,o)=>engine_1$d.default.getInstance().comparator.compare(i.cstr,o.cstr))[0]:null}}math_simple_store.MathSimpleStore=MathSimpleStore;Object.defineProperty(math_compound_store,"__esModule",{value:!0});math_compound_store.enumerate=math_compound_store.lookupString=math_compound_store.lookupCategory=math_compound_store.lookupRule=math_compound_store.addSiUnitRules=math_compound_store.addUnitRules=math_compound_store.addFunctionRules=math_compound_store.addSymbolRules=math_compound_store.defineRule=math_compound_store.defineRules=math_compound_store.setSiPrefixes=void 0;const debugger_1$6=_debugger,engine_1$c=engine,l10n_1$1=l10n,math_simple_store_1=math_simple_store,dynamic_cstr_1$7=dynamic_cstr;let locale=dynamic_cstr_1$7.DynamicCstr.DEFAULT_VALUES[dynamic_cstr_1$7.Axis.LOCALE],modality=dynamic_cstr_1$7.DynamicCstr.DEFAULT_VALUES[dynamic_cstr_1$7.Axis.MODALITY],siPrefixes={};function setSiPrefixes(t){siPrefixes=t}math_compound_store.setSiPrefixes=setSiPrefixes;const subStores_={};function defineRules(t,r,e,n){const i=getSubStore_(r);setupStore_(i,e),i.defineRulesFromMappings(t,locale,modality,r,n)}math_compound_store.defineRules=defineRules;function defineRule(t,r,e,n,i,o){const a=getSubStore_(i);setupStore_(a,n),a.defineRuleFromStrings(t,locale,modality,r,e,i,o)}math_compound_store.defineRule=defineRule;function addSymbolRules(t){if(changeLocale_(t))return;const r=math_simple_store_1.MathSimpleStore.parseUnicode(t.key);defineRules(t.key,r,t.category,t.mappings)}math_compound_store.addSymbolRules=addSymbolRules;function addFunctionRules(t){if(changeLocale_(t))return;const r=t.names,e=t.mappings,n=t.category;for(let i=0,o;o=r[i];i++)defineRules(o,o,n,e)}math_compound_store.addFunctionRules=addFunctionRules;function addUnitRules(t){if(!changeLocale_(t)){if(t.si){addSiUnitRules(t);return}addUnitRules_(t)}}math_compound_store.addUnitRules=addUnitRules;function addSiUnitRules(t){for(const r of Object.keys(siPrefixes)){const e=Object.assign({},t);e.mappings={};const n=siPrefixes[r];e.key=r+e.key,e.names=e.names.map(function(i){return r+i});for(const i of Object.keys(t.mappings)){e.mappings[i]={};for(const o of Object.keys(t.mappings[i]))e.mappings[i][o]=l10n_1$1.locales[locale]().FUNCTIONS.si(n,t.mappings[i][o])}addUnitRules_(e)}addUnitRules_(t)}math_compound_store.addSiUnitRules=addSiUnitRules;function lookupRule(t,r){const e=subStores_[t];return e?e.lookupRule(null,r):null}math_compound_store.lookupRule=lookupRule;function lookupCategory(t){const r=subStores_[t];return r?r.category:""}math_compound_store.lookupCategory=lookupCategory;function lookupString(t,r){const e=lookupRule(t,r);return e?e.action:null}math_compound_store.lookupString=lookupString;engine_1$c.default.getInstance().evaluator=lookupString;function enumerate(t={}){for(const r of Object.values(subStores_))for(const[,e]of r.rules.entries())for(const{cstr:n}of e)t=enumerate_(n.getValues(),t);return t}math_compound_store.enumerate=enumerate;function enumerate_(t,r){return r=r||{},t.length&&(r[t[0]]=enumerate_(t.slice(1),r[t[0]])),r}function addUnitRules_(t){const r=t.names;r&&(t.names=r.map(function(e){return e+":unit"})),addFunctionRules(t)}function changeLocale_(t){return!t.locale&&!t.modality?!1:(locale=t.locale||locale,modality=t.modality||modality,!0)}function getSubStore_(t){let r=subStores_[t];return r?(debugger_1$6.Debugger.getInstance().output("Store exists! "+t),r):(r=new math_simple_store_1.MathSimpleStore,subStores_[t]=r,r)}function setupStore_(t,r){r&&(t.category=r)}var speech_rule_engine={},auditory_description={},span={};Object.defineProperty(span,"__esModule",{value:!0});span.Span=void 0;class Span{constructor(r,e){this.speech=r,this.attributes=e}}span.Span=Span;Object.defineProperty(auditory_description,"__esModule",{value:!0});auditory_description.AuditoryDescription=void 0;const grammar_1$3=grammar,span_1$3=span;class AuditoryDescription{constructor({context:r,text:e,userValue:n,annotation:i,attributes:o,personality:a,layout:s}){this.context=r||"",this.text=e||"",this.userValue=n||"",this.annotation=i||"",this.attributes=o||{},this.personality=a||{},this.layout=s||""}static create(r,e={}){return r.text=grammar_1$3.Grammar.getInstance().apply(r.text,e),new AuditoryDescription(r)}isEmpty(){return this.context.length===0&&this.text.length===0&&this.userValue.length===0&&this.annotation.length===0}clone(){let r;if(this.personality){r={};for(const n in this.personality)r[n]=this.personality[n]}let e;if(this.attributes){e={};for(const n in this.attributes)e[n]=this.attributes[n]}return new AuditoryDescription({context:this.context,text:this.text,userValue:this.userValue,annotation:this.annotation,personality:r,attributes:e,layout:this.layout})}toString(){return'AuditoryDescription(context="'+this.context+'"  text="'+this.text+'"  userValue="'+this.userValue+'"  annotation="'+this.annotation+'")'}descriptionString(){return this.context&&this.text?this.context+" "+this.text:this.context||this.text}descriptionSpan(){return new span_1$3.Span(this.descriptionString(),this.attributes)}equals(r){return this.context===r.context&&this.text===r.text&&this.userValue===r.userValue&&this.annotation===r.annotation}}auditory_description.AuditoryDescription=AuditoryDescription;var speech_rules={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getStore=t.addStore=t.funcStore=void 0;const r=dynamic_cstr;t.funcStore=new Map;function e(i,o,a){const s={};if(o){const l=t.funcStore.get(o)||{};Object.assign(s,l)}t.funcStore.set(i,Object.assign(s,a))}t.addStore=e;function n(i,o,a){return t.funcStore.get([i,o,a].join("."))||t.funcStore.get([r.DynamicCstr.DEFAULT_VALUES[r.Axis.LOCALE],o,a].join("."))||t.funcStore.get([r.DynamicCstr.BASE_LOCALE,o,a].join("."))||{}}t.getStore=n})(speech_rules);var speech_rule_stores={},clearspeak_rules={},store_util={};Object.defineProperty(store_util,"__esModule",{value:!0});store_util.contentIterator=store_util.pauseSeparator=store_util.nodeCounter=void 0;const auditory_description_1$4=auditory_description,XpathUtil$9=xpath_util,engine_1$b=engine;function nodeCounter(t,r){const e=t.length;let n=0,i=r;return r||(i=""),function(){return n<e&&(n+=1),i+" "+n}}store_util.nodeCounter=nodeCounter;function pauseSeparator(t,r){const e=parseFloat(r),n=isNaN(e)?r:e;return function(){return[auditory_description_1$4.AuditoryDescription.create({text:"",personality:{pause:n}})]}}store_util.pauseSeparator=pauseSeparator;function contentIterator(t,r){let e;return t.length>0?e=XpathUtil$9.evalXPath("../../content/*",t[0]):e=[],function(){const n=e.shift(),i=r?[auditory_description_1$4.AuditoryDescription.create({text:r},{translate:!0})]:[];if(!n)return i;const o=engine_1$b.default.evaluateNode(n);return i.concat(o)}}store_util.contentIterator=contentIterator;var clearspeak_util={},semantic_annotations={},semantic_annotator={};Object.defineProperty(semantic_annotator,"__esModule",{value:!0});semantic_annotator.SemanticVisitor=semantic_annotator.SemanticAnnotator=void 0;class SemanticAnnotator{constructor(r,e,n){this.domain=r,this.name=e,this.func=n,this.active=!1}annotate(r){r.childNodes.forEach(this.annotate.bind(this)),r.addAnnotation(this.domain,this.func(r))}}semantic_annotator.SemanticAnnotator=SemanticAnnotator;class SemanticVisitor{constructor(r,e,n,i={}){this.domain=r,this.name=e,this.func=n,this.def=i,this.active=!1}visit(r,e){let n=this.func(r,e);r.addAnnotation(this.domain,n[0]);for(let i=0,o;o=r.childNodes[i];i++)n=this.visit(o,n[1]);return n}}semantic_annotator.SemanticVisitor=SemanticVisitor;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.annotate=t.activate=t.register=t.visitors=t.annotators=void 0;const r=semantic_annotator;t.annotators=new Map,t.visitors=new Map;function e(o){const a=o.domain+":"+o.name;o instanceof r.SemanticAnnotator?t.annotators.set(a,o):t.visitors.set(a,o)}t.register=e;function n(o,a){const s=o+":"+a,l=t.annotators.get(s)||t.visitors.get(s);l&&(l.active=!0)}t.activate=n;function i(o){for(const a of t.annotators.values())a.active&&a.annotate(o);for(const a of t.visitors.values())a.active&&a.visit(o,Object.assign({},a.def))}t.annotate=i})(semantic_annotations);var semantic_attr={};Object.defineProperty(semantic_attr,"__esModule",{value:!0});semantic_attr.lookupSecondary=semantic_attr.isEmbellishedType=semantic_attr.isMatchingFence=semantic_attr.functionApplication=semantic_attr.invisibleComma=semantic_attr.invisiblePlus=semantic_attr.invisibleTimes=semantic_attr.lookupMeaning=semantic_attr.lookupRole=semantic_attr.lookupType=semantic_attr.equal=semantic_attr.allLettersRegExp=void 0;const generalPunctuations=["!",'"',"#","%","&",";","?","@","\\","¡","§","¶","¿","‗","†","‡","•","‣","․","‥","‧","‰","‱","‸","※","‼","‽","‾","⁁","⁂","⁃","⁇","⁈","⁉","⁋","⁌","⁍","⁎","⁏","⁐","⁑","⁓","⁕","⁖","⁘","⁙","⁚","⁛","⁜","⁝","⁞","︐","︔","︕","︖","︰","﹅","﹆","﹉","﹊","﹋","﹌","﹔","﹖","﹗","﹟","﹠","﹡","﹨","﹪","﹫","！","＂","＃","％","＆","＇","＊","／","；","？","＠","＼"],colons=["︓",":","：","﹕"],invisibleComma_=String.fromCodePoint(8291),commas=["，","﹐",",",invisibleComma_],ellipses=["…","⋮","⋯","⋰","⋱","︙"],fullStops=[".","﹒","．"],dashes=["¯","‒","–","—","―","﹘","-","⁻","₋","−","➖","﹣","－","‐","‑","‾","_"],tildes=["~","̃","∼","˜","∽","˷","̴","̰"],primes=["'","′","″","‴","‵","‶","‷","⁗","ʹ","ʺ"],degrees=["°"],openClosePairs={"(":")","[":"]","{":"}","⁅":"⁆","〈":"〉","❨":"❩","❪":"❫","❬":"❭","❮":"❯","❰":"❱","❲":"❳","❴":"❵","⟅":"⟆","⟦":"⟧","⟨":"⟩","⟪":"⟫","⟬":"⟭","⟮":"⟯","⦃":"⦄","⦅":"⦆","⦇":"⦈","⦉":"⦊","⦋":"⦌","⦍":"⦎","⦏":"⦐","⦑":"⦒","⦓":"⦔","⦕":"⦖","⦗":"⦘","⧘":"⧙","⧚":"⧛","⧼":"⧽","⸢":"⸣","⸤":"⸥","⸦":"⸧","⸨":"⸩","〈":"〉","《":"》","「":"」","『":"』","【":"】","〔":"〕","〖":"〗","〘":"〙","〚":"〛","〝":"〞","﴾":"﴿","︗":"︘","﹙":"﹚","﹛":"﹜","﹝":"﹞","（":"）","［":"］","｛":"｝","｟":"｠","｢":"｣","⌈":"⌉","⌊":"⌋","⌌":"⌍","⌎":"⌏","⌜":"⌝","⌞":"⌟","⎛":"⎞","⎜":"⎟","⎝":"⎠","⎡":"⎤","⎢":"⎥","⎣":"⎦","⎧":"⎫","⎨":"⎬","⎩":"⎭","⎰":"⎱","⎸":"⎹"},topBottomPairs={"⎴":"⎵","⏜":"⏝","⏞":"⏟","⏠":"⏡","︵":"︶","︷":"︸","︹":"︺","︻":"︼","︽":"︾","︿":"﹀","﹁":"﹂","﹃":"﹄","﹇":"﹈"},leftFences=Object.keys(openClosePairs),rightFences=Object.values(openClosePairs);rightFences.push("〟");const topFences=Object.keys(topBottomPairs),bottomFences=Object.values(topBottomPairs),neutralFences=["|","¦","∣","⏐","⎸","⎹","❘","｜","￤","︱","︲"],metricFences=["‖","∥","⦀","⫴"],capitalLatin=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],smallLatin=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","ı","ȷ"],capitalLatinFullWidth=["Ａ","Ｂ","Ｃ","Ｄ","Ｅ","Ｆ","Ｇ","Ｈ","Ｉ","Ｊ","Ｋ","Ｌ","Ｍ","Ｎ","Ｏ","Ｐ","Ｑ","Ｒ","Ｓ","Ｔ","Ｕ","Ｖ","Ｗ","Ｘ","Ｙ","Ｚ"],smallLatinFullWidth=["ａ","ｂ","ｃ","ｄ","ｅ","ｆ","ｇ","ｈ","ｉ","ｊ","ｋ","ｌ","ｍ","ｎ","ｏ","ｐ","ｑ","ｒ","ｓ","ｔ","ｕ","ｖ","ｗ","ｘ","ｙ","ｚ"],capitalLatinBold=["𝐀","𝐁","𝐂","𝐃","𝐄","𝐅","𝐆","𝐇","𝐈","𝐉","𝐊","𝐋","𝐌","𝐍","𝐎","𝐏","𝐐","𝐑","𝐒","𝐓","𝐔","𝐕","𝐖","𝐗","𝐘","𝐙"],smallLatinBold=["𝐚","𝐛","𝐜","𝐝","𝐞","𝐟","𝐠","𝐡","𝐢","𝐣","𝐤","𝐥","𝐦","𝐧","𝐨","𝐩","𝐪","𝐫","𝐬","𝐭","𝐮","𝐯","𝐰","𝐱","𝐲","𝐳"],capitalLatinItalic=["𝐴","𝐵","𝐶","𝐷","𝐸","𝐹","𝐺","𝐻","𝐼","𝐽","𝐾","𝐿","𝑀","𝑁","𝑂","𝑃","𝑄","𝑅","𝑆","𝑇","𝑈","𝑉","𝑊","𝑋","𝑌","𝑍"],smallLatinItalic=["𝑎","𝑏","𝑐","𝑑","𝑒","𝑓","𝑔","ℎ","𝑖","𝑗","𝑘","𝑙","𝑚","𝑛","𝑜","𝑝","𝑞","𝑟","𝑠","𝑡","𝑢","𝑣","𝑤","𝑥","𝑦","𝑧","𝚤","𝚥"],capitalLatinBoldItalic=["𝑨","𝑩","𝑪","𝑫","𝑬","𝑭","𝑮","𝑯","𝑰","𝑱","𝑲","𝑳","𝑴","𝑵","𝑶","𝑷","𝑸","𝑹","𝑺","𝑻","𝑼","𝑽","𝑾","𝑿","𝒀","𝒁"],smallLatinBoldItalic=["𝒂","𝒃","𝒄","𝒅","𝒆","𝒇","𝒈","𝒉","𝒊","𝒋","𝒌","𝒍","𝒎","𝒏","𝒐","𝒑","𝒒","𝒓","𝒔","𝒕","𝒖","𝒗","𝒘","𝒙","𝒚","𝒛"],capitalLatinScript=["𝒜","ℬ","𝒞","𝒟","ℰ","ℱ","𝒢","ℋ","ℐ","𝒥","𝒦","ℒ","ℳ","𝒩","𝒪","𝒫","𝒬","ℛ","𝒮","𝒯","𝒰","𝒱","𝒲","𝒳","𝒴","𝒵","℘"],smallLatinScript=["𝒶","𝒷","𝒸","𝒹","ℯ","𝒻","ℊ","𝒽","𝒾","𝒿","𝓀","𝓁","𝓂","𝓃","ℴ","𝓅","𝓆","𝓇","𝓈","𝓉","𝓊","𝓋","𝓌","𝓍","𝓎","𝓏","ℓ"],capitalLatinBoldScript=["𝓐","𝓑","𝓒","𝓓","𝓔","𝓕","𝓖","𝓗","𝓘","𝓙","𝓚","𝓛","𝓜","𝓝","𝓞","𝓟","𝓠","𝓡","𝓢","𝓣","𝓤","𝓥","𝓦","𝓧","𝓨","𝓩"],smallLatinBoldScript=["𝓪","𝓫","𝓬","𝓭","𝓮","𝓯","𝓰","𝓱","𝓲","𝓳","𝓴","𝓵","𝓶","𝓷","𝓸","𝓹","𝓺","𝓻","𝓼","𝓽","𝓾","𝓿","𝔀","𝔁","𝔂","𝔃"],capitalLatinFraktur=["𝔄","𝔅","ℭ","𝔇","𝔈","𝔉","𝔊","ℌ","ℑ","𝔍","𝔎","𝔏","𝔐","𝔑","𝔒","𝔓","𝔔","ℜ","𝔖","𝔗","𝔘","𝔙","𝔚","𝔛","𝔜","ℨ"],smallLatinFraktur=["𝔞","𝔟","𝔠","𝔡","𝔢","𝔣","𝔤","𝔥","𝔦","𝔧","𝔨","𝔩","𝔪","𝔫","𝔬","𝔭","𝔮","𝔯","𝔰","𝔱","𝔲","𝔳","𝔴","𝔵","𝔶","𝔷"],capitalLatinDoubleStruck=["𝔸","𝔹","ℂ","𝔻","𝔼","𝔽","𝔾","ℍ","𝕀","𝕁","𝕂","𝕃","𝕄","ℕ","𝕆","ℙ","ℚ","ℝ","𝕊","𝕋","𝕌","𝕍","𝕎","𝕏","𝕐","ℤ"],smallLatinDoubleStruck=["𝕒","𝕓","𝕔","𝕕","𝕖","𝕗","𝕘","𝕙","𝕚","𝕛","𝕜","𝕝","𝕞","𝕟","𝕠","𝕡","𝕢","𝕣","𝕤","𝕥","𝕦","𝕧","𝕨","𝕩","𝕪","𝕫"],capitalLatinBoldFraktur=["𝕬","𝕭","𝕮","𝕯","𝕰","𝕱","𝕲","𝕳","𝕴","𝕵","𝕶","𝕷","𝕸","𝕹","𝕺","𝕻","𝕼","𝕽","𝕾","𝕿","𝖀","𝖁","𝖂","𝖃","𝖄","𝖅"],smallLatinBoldFraktur=["𝖆","𝖇","𝖈","𝖉","𝖊","𝖋","𝖌","𝖍","𝖎","𝖏","𝖐","𝖑","𝖒","𝖓","𝖔","𝖕","𝖖","𝖗","𝖘","𝖙","𝖚","𝖛","𝖜","𝖝","𝖞","𝖟"],capitalLatinSansSerif=["𝖠","𝖡","𝖢","𝖣","𝖤","𝖥","𝖦","𝖧","𝖨","𝖩","𝖪","𝖫","𝖬","𝖭","𝖮","𝖯","𝖰","𝖱","𝖲","𝖳","𝖴","𝖵","𝖶","𝖷","𝖸","𝖹"],smallLatinSansSerif=["𝖺","𝖻","𝖼","𝖽","𝖾","𝖿","𝗀","𝗁","𝗂","𝗃","𝗄","𝗅","𝗆","𝗇","𝗈","𝗉","𝗊","𝗋","𝗌","𝗍","𝗎","𝗏","𝗐","𝗑","𝗒","𝗓"],capitalLatinSansSerifBold=["𝗔","𝗕","𝗖","𝗗","𝗘","𝗙","𝗚","𝗛","𝗜","𝗝","𝗞","𝗟","𝗠","𝗡","𝗢","𝗣","𝗤","𝗥","𝗦","𝗧","𝗨","𝗩","𝗪","𝗫","𝗬","𝗭"],smallLatinSansSerifBold=["𝗮","𝗯","𝗰","𝗱","𝗲","𝗳","𝗴","𝗵","𝗶","𝗷","𝗸","𝗹","𝗺","𝗻","𝗼","𝗽","𝗾","𝗿","𝘀","𝘁","𝘂","𝘃","𝘄","𝘅","𝘆","𝘇"],capitalLatinSansSerifItalic=["𝘈","𝘉","𝘊","𝘋","𝘌","𝘍","𝘎","𝘏","𝘐","𝘑","𝘒","𝘓","𝘔","𝘕","𝘖","𝘗","𝘘","𝘙","𝘚","𝘛","𝘜","𝘝","𝘞","𝘟","𝘠","𝘡"],smallLatinSansSerifItalic=["𝘢","𝘣","𝘤","𝘥","𝘦","𝘧","𝘨","𝘩","𝘪","𝘫","𝘬","𝘭","𝘮","𝘯","𝘰","𝘱","𝘲","𝘳","𝘴","𝘵","𝘶","𝘷","𝘸","𝘹","𝘺","𝘻"],capitalLatinSansSerifBoldItalic=["𝘼","𝘽","𝘾","𝘿","𝙀","𝙁","𝙂","𝙃","𝙄","𝙅","𝙆","𝙇","𝙈","𝙉","𝙊","𝙋","𝙌","𝙍","𝙎","𝙏","𝙐","𝙑","𝙒","𝙓","𝙔","𝙕"],smallLatinSansSerifBoldItalic=["𝙖","𝙗","𝙘","𝙙","𝙚","𝙛","𝙜","𝙝","𝙞","𝙟","𝙠","𝙡","𝙢","𝙣","𝙤","𝙥","𝙦","𝙧","𝙨","𝙩","𝙪","𝙫","𝙬","𝙭","𝙮","𝙯"],capitalLatinMonospace=["𝙰","𝙱","𝙲","𝙳","𝙴","𝙵","𝙶","𝙷","𝙸","𝙹","𝙺","𝙻","𝙼","𝙽","𝙾","𝙿","𝚀","𝚁","𝚂","𝚃","𝚄","𝚅","𝚆","𝚇","𝚈","𝚉"],smallLatinMonospace=["𝚊","𝚋","𝚌","𝚍","𝚎","𝚏","𝚐","𝚑","𝚒","𝚓","𝚔","𝚕","𝚖","𝚗","𝚘","𝚙","𝚚","𝚛","𝚜","𝚝","𝚞","𝚟","𝚠","𝚡","𝚢","𝚣"],latinDoubleStruckItalic=["ⅅ","ⅆ","ⅇ","ⅈ","ⅉ"],capitalGreek=["Α","Β","Γ","Δ","Ε","Ζ","Η","Θ","Ι","Κ","Λ","Μ","Ν","Ξ","Ο","Π","Ρ","Σ","Τ","Υ","Φ","Χ","Ψ","Ω"],smallGreek=["α","β","γ","δ","ε","ζ","η","θ","ι","κ","λ","μ","ν","ξ","ο","π","ρ","ς","σ","τ","υ","φ","χ","ψ","ω"],capitalGreekBold=["𝚨","𝚩","𝚪","𝚫","𝚬","𝚭","𝚮","𝚯","𝚰","𝚱","𝚲","𝚳","𝚴","𝚵","𝚶","𝚷","𝚸","𝚺","𝚻","𝚼","𝚽","𝚾","𝚿","𝛀"],smallGreekBold=["𝛂","𝛃","𝛄","𝛅","𝛆","𝛇","𝛈","𝛉","𝛊","𝛋","𝛌","𝛍","𝛎","𝛏","𝛐","𝛑","𝛒","𝛓","𝛔","𝛕","𝛖","𝛗","𝛘","𝛙","𝛚"],capitalGreekItalic=["𝛢","𝛣","𝛤","𝛥","𝛦","𝛧","𝛨","𝛩","𝛪","𝛫","𝛬","𝛭","𝛮","𝛯","𝛰","𝛱","𝛲","𝛴","𝛵","𝛶","𝛷","𝛸","𝛹","𝛺"],smallGreekItalic=["𝛼","𝛽","𝛾","𝛿","𝜀","𝜁","𝜂","𝜃","𝜄","𝜅","𝜆","𝜇","𝜈","𝜉","𝜊","𝜋","𝜌","𝜍","𝜎","𝜏","𝜐","𝜑","𝜒","𝜓","𝜔"],capitalGreekBoldItalic=["𝜜","𝜝","𝜞","𝜟","𝜠","𝜡","𝜢","𝜣","𝜤","𝜥","𝜦","𝜧","𝜨","𝜩","𝜪","𝜫","𝜬","𝜮","𝜯","𝜰","𝜱","𝜲","𝜳","𝜴"],smallGreekBoldItalic=["𝜶","𝜷","𝜸","𝜹","𝜺","𝜻","𝜼","𝜽","𝜾","𝜿","𝝀","𝝁","𝝂","𝝃","𝝄","𝝅","𝝆","𝝇","𝝈","𝝉","𝝊","𝝋","𝝌","𝝍","𝝎"],capitalGreekSansSerifBold=["𝝖","𝝗","𝝘","𝝙","𝝚","𝝛","𝝜","𝝝","𝝞","𝝟","𝝠","𝝡","𝝢","𝝣","𝝤","𝝥","𝝦","𝝨","𝝩","𝝪","𝝫","𝝬","𝝭","𝝮"],smallGreekSansSerifBold=["𝝰","𝝱","𝝲","𝝳","𝝴","𝝵","𝝶","𝝷","𝝸","𝝹","𝝺","𝝻","𝝼","𝝽","𝝾","𝝿","𝞀","𝞁","𝞂","𝞃","𝞄","𝞅","𝞆","𝞇","𝞈"],capitalGreekSansSerifBoldItalic=["𝞐","𝞑","𝞒","𝞓","𝞔","𝞕","𝞖","𝞗","𝞘","𝞙","𝞚","𝞛","𝞜","𝞝","𝞞","𝞟","𝞠","𝞢","𝞣","𝞤","𝞥","𝞦","𝞧","𝞨"],smallGreekSansSerifBoldItalic=["𝞪","𝞫","𝞬","𝞭","𝞮","𝞯","𝞰","𝞱","𝞲","𝞳","𝞴","𝞵","𝞶","𝞷","𝞸","𝞹","𝞺","𝞻","𝞼","𝞽","𝞾","𝞿","𝟀","𝟁","𝟂"],greekDoubleStruck=["ℼ","ℽ","ℾ","ℿ"],greekSpecial=["ϐ","ϑ","ϕ","ϖ","ϗ","ϰ","ϱ","ϵ","϶","ϴ"],greekSpecialBold=["𝛜","𝛝","𝛞","𝛟","𝛠","𝛡"],greekSpecialItalic=["𝜖","𝜗","𝜘","𝜙","𝜚","𝜛"],greekSpecialSansSerifBold=["𝞊","𝞋","𝞌","𝞍","𝞎","𝞏"],hebrewLetters=["ℵ","ℶ","ℷ","ℸ"],allLetters=capitalLatin.concat(smallLatin,capitalLatinFullWidth,smallLatinFullWidth,capitalLatinBold,smallLatinBold,capitalLatinItalic,capitalLatinBoldItalic,smallLatinBoldItalic,smallLatinItalic,capitalLatinScript,smallLatinScript,capitalLatinBoldScript,smallLatinBoldScript,capitalLatinFraktur,smallLatinFraktur,capitalLatinDoubleStruck,smallLatinDoubleStruck,capitalLatinBoldFraktur,smallLatinBoldFraktur,capitalLatinSansSerif,smallLatinSansSerif,capitalLatinSansSerifBold,smallLatinSansSerifBold,capitalLatinSansSerifItalic,smallLatinSansSerifItalic,capitalLatinSansSerifBoldItalic,smallLatinSansSerifBoldItalic,capitalLatinMonospace,smallLatinMonospace,latinDoubleStruckItalic,capitalGreek,smallGreek,capitalGreekBold,smallGreekBold,capitalGreekItalic,smallGreekItalic,capitalGreekBoldItalic,smallGreekBoldItalic,capitalGreekSansSerifBold,smallGreekSansSerifBold,greekDoubleStruck,greekSpecial,capitalGreekSansSerifBoldItalic,smallGreekSansSerifBoldItalic,greekSpecialBold,greekSpecialItalic,greekSpecialSansSerifBold,hebrewLetters);semantic_attr.allLettersRegExp=new RegExp(allLetters.join("|"));const additions=["+","±","∓","∔","∧","∨","∩","∪","⊌","⊍","⊎","⊓","⊔","⊝","⊞","⊤","⊥","⊺","⊻","⊼","⋄","⋎","⋏","⋒","⋓","⩞","⊕","⋔"],invisiblePlus_=String.fromCodePoint(8292);additions.push(invisiblePlus_);const multiplications=["†","‡","∐","∗","∘","∙","≀","⊚","⊛","⊠","⊡","⋅","⋆","⋇","⋈","⋉","⋊","⋋","⋌","○","·","*","⊗","⊙"],invisibleTimes_=String.fromCodePoint(8290);multiplications.push(invisibleTimes_);const subtractions=["¯","-","⁒","⁻","₋","−","∖","∸","≂","⊖","⊟","➖","⨩","⨪","⨫","⨬","⨺","⩁","﹣","－","‐","‑"],divisions=["/","÷","⁄","∕","⊘","⟌","⦼","⨸"],functionApplication_=String.fromCodePoint(8289),equalities=["=","~","⁼","₌","∼","∽","≃","≅","≈","≊","≋","≌","≍","≎","≑","≒","≓","≔","≕","≖","≗","≘","≙","≚","≛","≜","≝","≞","≟","≡","≣","⧤","⩦","⩮","⩯","⩰","⩱","⩲","⩳","⩴","⩵","⩶","⩷","⩸","⋕","⩭","⩪","⩫","⩬","﹦","＝","⩬","⊜","∷"],inequalities=["<",">","≁","≂","≄","≆","≇","≉","≏","≐","≠","≢","≤","≥","≦","≧","≨","≩","≪","≫","≬","≭","≮","≯","≰","≱","≲","≳","≴","≵","≶","≷","≸","≹","≺","≻","≼","≽","≾","≿","⊀","⊁","⋖","⋗","⋘","⋙","⋚","⋛","⋜","⋝","⋞","⋟","⋠","⋡","⋦","⋧","⋨","⋩","⩹","⩺","⩻","⩼","⩽","⩾","⩿","⪀","⪁","⪂","⪃","⪄","⪅","⪆","⪇","⪈","⪉","⪊","⪋","⪌","⪍","⪎","⪏","⪐","⪑","⪒","⪓","⪔","⪕","⪖","⪗","⪘","⪙","⪚","⪛","⪜","⪝","⪞","⪟","⪠","⪡","⪢","⪣","⪤","⪥","⪦","⪧","⪨","⪩","⪪","⪫","⪬","⪭","⪮","⪯","⪰","⪱","⪲","⪳","⪴","⪵","⪶","⪷","⪸","⪹","⪺","⪻","⪼","⫷","⫸","⫹","⫺","⧀","⧁","﹤","﹥","＜","＞"],setRelations=["⋢","⋣","⋤","⋥","⊂","⊃","⊄","⊅","⊆","⊇","⊈","⊉","⊊","⊋","⊏","⊐","⊑","⊒","⪽","⪾","⪿","⫀","⫁","⫂","⫃","⫄","⫅","⫆","⫇","⫈","⫉","⫊","⫋","⫌","⫍","⫎","⫏","⫐","⫑","⫒","⫓","⫔","⫕","⫖","⫗","⫘","⋐","⋑","⋪","⋫","⋬","⋭","⊲","⊳","⊴","⊵"],elementRelations=["∈","∊","⋲","⋳","⋴","⋵","⋶","⋷","⋸","⋹","⋿"],nonelementRelations=["∉"],reelementRelations=["∋","∍","⋺","⋻","⋼","⋽","⋾"],renonelementRelations=["∌"],relations=["⊢","⊣","⊦","⊧","⊨","⊩","⊪","⊫","⊬","⊭","⊮","⊯","⫞","⫟","⫠","⫡","⫢","⫣","⫤","⫥","⫦","⫧","⫨","⫩","⫪","⫫","⫬","⫭"],arrows=["←","↑","→","↓","↔","↕","↖","↗","↘","↙","↚","↛","↜","↝","↞","↟","↠","↡","↢","↣","↤","↥","↦","↧","↨","↩","↪","↫","↬","↭","↮","↯","↰","↱","↲","↳","↴","↵","↶","↷","↸","↹","↺","↻","⇄","⇅","⇆","⇇","⇈","⇉","⇊","⇍","⇎","⇏","⇐","⇑","⇒","⇓","⇔","⇕","⇖","⇗","⇘","⇙","⇚","⇛","⇜","⇝","⇞","⇟","⇠","⇡","⇢","⇣","⇤","⇥","⇦","⇧","⇨","⇩","⇪","⇫","⇬","⇭","⇮","⇯","⇰","⇱","⇲","⇳","⇴","⇵","⇶","⇷","⇸","⇹","⇺","⇻","⇼","⇽","⇾","⇿","⌁","⌃","⌄","⌤","⎋","➔","➘","➙","➚","➛","➜","➝","➞","➟","➠","➡","➢","➣","➤","➥","➦","➧","➨","➩","➪","➫","➬","➭","➮","➯","➱","➲","➳","➴","➵","➶","➷","➸","➹","➺","➻","➼","➽","➾","⟰","⟱","⟲","⟳","⟴","⟵","⟶","⟷","⟸","⟹","⟺","⟻","⟼","⟽","⟾","⟿","⤀","⤁","⤂","⤃","⤄","⤅","⤆","⤇","⤈","⤉","⤊","⤋","⤌","⤍","⤎","⤏","⤐","⤑","⤒","⤓","⤔","⤕","⤖","⤗","⤘","⤙","⤚","⤛","⤜","⤝","⤞","⤟","⤠","⤡","⤢","⤣","⤤","⤥","⤦","⤧","⤨","⤩","⤪","⤭","⤮","⤯","⤰","⤱","⤲","⤳","⤴","⤵","⤶","⤷","⤸","⤹","⤺","⤻","⤼","⤽","⤾","⤿","⥀","⥁","⥂","⥃","⥄","⥅","⥆","⥇","⥈","⥉","⥰","⥱","⥲","⥳","⥴","⥵","⥶","⥷","⥸","⥹","⥺","⥻","⦳","⦴","⦽","⧪","⧬","⧭","⨗","⬀","⬁","⬂","⬃","⬄","⬅","⬆","⬇","⬈","⬉","⬊","⬋","⬌","⬍","⬎","⬏","⬐","⬑","⬰","⬱","⬲","⬳","⬴","⬵","⬶","⬷","⬸","⬹","⬺","⬻","⬼","⬽","⬾","⬿","⭀","⭁","⭂","⭃","⭄","⭅","⭆","⭇","⭈","⭉","⭊","⭋","⭌","￩","￪","￫","￬","↼","↽","↾","↿","⇀","⇁","⇂","⇃","⇋","⇌","⥊","⥋","⥌","⥍","⥎","⥏","⥐","⥑","⥒","⥓","⥔","⥕","⥖","⥗","⥘","⥙","⥚","⥛","⥜","⥝","⥞","⥟","⥠","⥡","⥢","⥣","⥤","⥥","⥦","⥧","⥨","⥩","⥪","⥫","⥬","⥭","⥮","⥯","⥼","⥽","⥾","⥿"],sumOps=["⅀","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨃","⨄","⨅","⨆","⨇","⨈","⨉","⨊","⨋","⫼","⫿"],intOps=["∫","∬","∭","∮","∯","∰","∱","∲","∳","⨌","⨍","⨎","⨏","⨐","⨑","⨒","⨓","⨔","⨕","⨖","⨗","⨘","⨙","⨚","⨛","⨜"],geometryOps=["∟","∠","∡","∢","⊾","⊿","△","▷","▽","◁"],prefixOps=["∀","∃","∆","∇","∂","∁","∄"],prefixOpsBold=["𝛁","𝛛","𝟊","𝟋"],prefixOpsItalic=["𝛻","𝜕"],prefixOpsSansSerifBold=["𝝯","𝞉"],digitsNormal=["0","1","2","3","4","5","6","7","8","9"],digitsFullWidth=["０","１","２","３","４","５","６","７","８","９"],digitsBold=["𝟎","𝟏","𝟐","𝟑","𝟒","𝟓","𝟔","𝟕","𝟖","𝟗"],digitsDoubleStruck=["𝟘","𝟙","𝟚","𝟛","𝟜","𝟝","𝟞","𝟟","𝟠","𝟡"],digitsSansSerif=["𝟢","𝟣","𝟤","𝟥","𝟦","𝟧","𝟨","𝟩","𝟪","𝟫"],digitsSansSerifBold=["𝟬","𝟭","𝟮","𝟯","𝟰","𝟱","𝟲","𝟳","𝟴","𝟵"],digitsMonospace=["𝟶","𝟷","𝟸","𝟹","𝟺","𝟻","𝟼","𝟽","𝟾","𝟿"],digitsSuperscript=["²","³","¹","⁰","⁴","⁵","⁶","⁷","⁸","⁹"],digitsSubscript=["₀","₁","₂","₃","₄","₅","₆","₇","₈","₉"],fractions=["¼","½","¾","⅐","⅑","⅒","⅓","⅔","⅕","⅖","⅗","⅘","⅙","⅚","⅛","⅜","⅝","⅞","⅟","↉"],enclosedNumbers=["①","②","③","④","⑤","⑥","⑦","⑧","⑨","⑩","⑪","⑫","⑬","⑭","⑮","⑯","⑰","⑱","⑲","⑳","⓪","⓫","⓬","⓭","⓮","⓯","⓰","⓱","⓲","⓳","⓴","⓵","⓶","⓷","⓸","⓹","⓺","⓻","⓼","⓽","⓾","⓿","❶","❷","❸","❹","❺","❻","❼","❽","❾","❿","➀","➁","➂","➃","➄","➅","➆","➇","➈","➉","➊","➋","➌","➍","➎","➏","➐","➑","➒","➓","㉈","㉉","㉊","㉋","㉌","㉍","㉎","㉏","㉑","㉒","㉓","㉔","㉕","㉖","㉗","㉘","㉙","㉚","㉛","㉜","㉝","㉞","㉟","㊱","㊲","㊳","㊴","㊵","㊶","㊷","㊸","㊹","㊺","㊻","㊼","㊽","㊾","㊿"],fencedNumbers=["⑴","⑵","⑶","⑷","⑸","⑹","⑺","⑻","⑼","⑽","⑾","⑿","⒀","⒁","⒂","⒃","⒄","⒅","⒆","⒇"],punctuatedNumbers=["⒈","⒉","⒊","⒋","⒌","⒍","⒎","⒏","⒐","⒑","⒒","⒓","⒔","⒕","⒖","⒗","⒘","⒙","⒚","⒛","🄀","🄁","🄂","🄃","🄄","🄅","🄆","🄇","🄈","🄉","🄊"],numbers=fractions,otherNumbers=digitsSuperscript.concat(digitsSubscript,enclosedNumbers,fencedNumbers,punctuatedNumbers),trigonometricFunctions=["cos","cot","csc","sec","sin","tan","arccos","arccot","arccsc","arcsec","arcsin","arctan","arc cos","arc cot","arc csc","arc sec","arc sin","arc tan"],hyperbolicFunctions=["cosh","coth","csch","sech","sinh","tanh","arcosh","arcoth","arcsch","arsech","arsinh","artanh","arccosh","arccoth","arccsch","arcsech","arcsinh","arctanh"],algebraicFunctions=["deg","det","dim","hom","ker","Tr","tr"],elementaryFunctions=["log","ln","lg","exp","expt","gcd","gcd","arg","im","re","Pr"],prefixFunctions=trigonometricFunctions.concat(hyperbolicFunctions,algebraicFunctions,elementaryFunctions),limitFunctions=["inf","lim","liminf","limsup","max","min","sup","injlim","projlim","inj lim","proj lim"],infixFunctions=["mod","rem"],symbolSetToSemantic_=[{set:generalPunctuations,type:"punctuation",role:"unknown"},{set:colons,type:"punctuation",role:"colon"},{set:commas,type:"punctuation",role:"comma"},{set:ellipses,type:"punctuation",role:"ellipsis"},{set:fullStops,type:"punctuation",role:"fullstop"},{set:dashes,type:"operator",role:"dash"},{set:tildes,type:"operator",role:"tilde"},{set:primes,type:"punctuation",role:"prime"},{set:degrees,type:"punctuation",role:"degree"},{set:leftFences,type:"fence",role:"open"},{set:rightFences,type:"fence",role:"close"},{set:topFences,type:"fence",role:"top"},{set:bottomFences,type:"fence",role:"bottom"},{set:neutralFences,type:"fence",role:"neutral"},{set:metricFences,type:"fence",role:"metric"},{set:smallLatin,type:"identifier",role:"latinletter",font:"normal"},{set:capitalLatin,type:"identifier",role:"latinletter",font:"normal"},{set:smallLatinFullWidth,type:"identifier",role:"latinletter",font:"normal"},{set:capitalLatinFullWidth,type:"identifier",role:"latinletter",font:"normal"},{set:smallLatinBold,type:"identifier",role:"latinletter",font:"bold"},{set:capitalLatinBold,type:"identifier",role:"latinletter",font:"bold"},{set:smallLatinItalic,type:"identifier",role:"latinletter",font:"italic"},{set:capitalLatinItalic,type:"identifier",role:"latinletter",font:"italic"},{set:smallLatinBoldItalic,type:"identifier",role:"latinletter",font:"bold-italic"},{set:capitalLatinBoldItalic,type:"identifier",role:"latinletter",font:"bold-italic"},{set:smallLatinScript,type:"identifier",role:"latinletter",font:"script"},{set:capitalLatinScript,type:"identifier",role:"latinletter",font:"script"},{set:smallLatinBoldScript,type:"identifier",role:"latinletter",font:"bold-script"},{set:capitalLatinBoldScript,type:"identifier",role:"latinletter",font:"bold-script"},{set:smallLatinFraktur,type:"identifier",role:"latinletter",font:"fraktur"},{set:capitalLatinFraktur,type:"identifier",role:"latinletter",font:"fraktur"},{set:smallLatinDoubleStruck,type:"identifier",role:"latinletter",font:"double-struck"},{set:capitalLatinDoubleStruck,type:"identifier",role:"latinletter",font:"double-struck"},{set:smallLatinBoldFraktur,type:"identifier",role:"latinletter",font:"bold-fraktur"},{set:capitalLatinBoldFraktur,type:"identifier",role:"latinletter",font:"bold-fraktur"},{set:smallLatinSansSerif,type:"identifier",role:"latinletter",font:"sans-serif"},{set:capitalLatinSansSerif,type:"identifier",role:"latinletter",font:"sans-serif"},{set:smallLatinSansSerifBold,type:"identifier",role:"latinletter",font:"sans-serif-bold"},{set:capitalLatinSansSerifBold,type:"identifier",role:"latinletter",font:"sans-serif-bold"},{set:smallLatinSansSerifItalic,type:"identifier",role:"latinletter",font:"sans-serif-italic"},{set:capitalLatinSansSerifItalic,type:"identifier",role:"latinletter",font:"sans-serif-italic"},{set:smallLatinSansSerifBoldItalic,type:"identifier",role:"latinletter",font:"sans-serif-bold-italic"},{set:capitalLatinSansSerifBoldItalic,type:"identifier",role:"latinletter",font:"sans-serif-bold-italic"},{set:smallLatinMonospace,type:"identifier",role:"latinletter",font:"monospace"},{set:capitalLatinMonospace,type:"identifier",role:"latinletter",font:"monospace"},{set:latinDoubleStruckItalic,type:"identifier",role:"latinletter",font:"double-struck-italic"},{set:smallGreek,type:"identifier",role:"greekletter",font:"normal"},{set:capitalGreek,type:"identifier",role:"greekletter",font:"normal"},{set:smallGreekBold,type:"identifier",role:"greekletter",font:"bold"},{set:capitalGreekBold,type:"identifier",role:"greekletter",font:"bold"},{set:smallGreekItalic,type:"identifier",role:"greekletter",font:"italic"},{set:capitalGreekItalic,type:"identifier",role:"greekletter",font:"italic"},{set:smallGreekBoldItalic,type:"identifier",role:"greekletter",font:"bold-italic"},{set:capitalGreekBoldItalic,type:"identifier",role:"greekletter",font:"bold-italic"},{set:smallGreekSansSerifBold,type:"identifier",role:"greekletter",font:"sans-serif-bold"},{set:capitalGreekSansSerifBold,type:"identifier",role:"greekletter",font:"sans-serif-bold"},{set:capitalGreekSansSerifBoldItalic,type:"identifier",role:"greekletter",font:"sans-serif-bold-italic"},{set:smallGreekSansSerifBoldItalic,type:"identifier",role:"greekletter",font:"sans-serif-bold-italic"},{set:greekDoubleStruck,type:"identifier",role:"greekletter",font:"double-struck"},{set:greekSpecial,type:"identifier",role:"greekletter",font:"normal"},{set:greekSpecialBold,type:"identifier",role:"greekletter",font:"bold"},{set:greekSpecialItalic,type:"identifier",role:"greekletter",font:"italic"},{set:greekSpecialSansSerifBold,type:"identifier",role:"greekletter",font:"sans-serif-bold"},{set:hebrewLetters,type:"identifier",role:"otherletter",font:"normal"},{set:digitsNormal,type:"number",role:"integer",font:"normal"},{set:digitsFullWidth,type:"number",role:"integer",font:"normal"},{set:digitsBold,type:"number",role:"integer",font:"bold"},{set:digitsDoubleStruck,type:"number",role:"integer",font:"double-struck"},{set:digitsSansSerif,type:"number",role:"integer",font:"sans-serif"},{set:digitsSansSerifBold,type:"number",role:"integer",font:"sans-serif-bold"},{set:digitsMonospace,type:"number",role:"integer",font:"monospace"},{set:numbers,type:"number",role:"float"},{set:otherNumbers,type:"number",role:"othernumber"},{set:additions,type:"operator",role:"addition"},{set:multiplications,type:"operator",role:"multiplication"},{set:subtractions,type:"operator",role:"subtraction"},{set:divisions,type:"operator",role:"division"},{set:prefixOps,type:"operator",role:"prefix operator"},{set:prefixOpsBold,type:"operator",role:"prefix operator",font:"bold"},{set:prefixOpsItalic,type:"operator",role:"prefix operator",font:"italic"},{set:prefixOpsSansSerifBold,type:"operator",role:"prefix operator",font:"sans-serif-bold"},{set:equalities,type:"relation",role:"equality"},{set:inequalities,type:"relation",role:"inequality"},{set:setRelations,type:"relation",role:"set"},{set:relations,type:"relation",role:"unknown"},{set:arrows,type:"relation",role:"arrow"},{set:elementRelations,type:"operator",role:"element"},{set:nonelementRelations,type:"operator",role:"nonelement"},{set:reelementRelations,type:"operator",role:"reelement"},{set:renonelementRelations,type:"operator",role:"renonelement"},{set:sumOps,type:"largeop",role:"sum"},{set:intOps,type:"largeop",role:"integral"},{set:geometryOps,type:"operator",role:"geometry"},{set:limitFunctions,type:"function",role:"limit function"},{set:prefixFunctions,type:"function",role:"prefix function"},{set:infixFunctions,type:"operator",role:"prefix function"}],meaning_=function(){const t={};for(let r=0,e;e=symbolSetToSemantic_[r];r++)e.set.forEach(function(n){t[n]={role:e.role||"unknown",type:e.type||"unknown",font:e.font||"unknown"}});return t}();function equal(t,r){return t.type===r.type&&t.role===r.role&&t.font===r.font}semantic_attr.equal=equal;function lookupType(t){var r;return((r=meaning_[t])===null||r===void 0?void 0:r.type)||"unknown"}semantic_attr.lookupType=lookupType;function lookupRole(t){var r;return((r=meaning_[t])===null||r===void 0?void 0:r.role)||"unknown"}semantic_attr.lookupRole=lookupRole;function lookupMeaning(t){return meaning_[t]||{role:"unknown",type:"unknown",font:"unknown"}}semantic_attr.lookupMeaning=lookupMeaning;function invisibleTimes(){return invisibleTimes_}semantic_attr.invisibleTimes=invisibleTimes;function invisiblePlus(){return invisiblePlus_}semantic_attr.invisiblePlus=invisiblePlus;function invisibleComma(){return invisibleComma_}semantic_attr.invisibleComma=invisibleComma;function functionApplication(){return functionApplication_}semantic_attr.functionApplication=functionApplication;function isMatchingFence(t,r){return neutralFences.indexOf(t)!==-1||metricFences.indexOf(t)!==-1?t===r:openClosePairs[t]===r||topBottomPairs[t]===r}semantic_attr.isMatchingFence=isMatchingFence;function isEmbellishedType(t){return t==="operator"||t==="relation"||t==="fence"||t==="punctuation"}semantic_attr.isEmbellishedType=isEmbellishedType;const secondary_=new Map;function secKey(t,r){return`${t} ${r}`}function addSecondary_(t,r,e=""){for(const n of r)secondary_.set(secKey(t,n),e||t)}addSecondary_("d",["d","ⅆ","ｄ","𝐝","𝑑","𝒹","𝓭","𝔡","𝕕","𝖉","𝖽","𝗱","𝘥","𝚍"]);addSecondary_("bar",dashes);addSecondary_("tilde",tildes);function lookupSecondary(t,r){return secondary_.get(secKey(t,r))}semantic_attr.lookupSecondary=lookupSecondary;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wordOrdinal=t.layoutFactor_=t.fencedFactor_=t.simpleFactor_=t.simpleArguments=t.fencedArguments=t.insertNesting=t.matchingFences=t.nestingDepth=t.NESTING_DEPTH=t.ordinalExponent=t.allTextLastContent_=t.isUnitExpression=t.isSmallVulgarFraction=t.allCellsSimple=t.allIndices_=t.isInteger_=t.simpleCell_=t.simpleNode=t.hasPreference=t.isSimpleFraction_=t.isSimpleNumber_=t.isNumber_=t.isLetter_=t.isSimple_=t.isSimpleLetters_=t.isSimpleDegree_=t.isSimpleNegative_=t.isSimpleFunction_=t.isSimpleExpression=t.nodeCounter=void 0;const r=dom_util,e=engine,n=xpath_util,i=locale$d,o=transformers,a=grammar,s=store_util,l=semantic_annotations,c=semantic_annotator,f=semantic_attr;function d(w,N){const T=N.split("-"),j=s.nodeCounter(w,T[0]||""),P=T[1]||"",O=T[2]||"";let k=!0;return function(){const V=j();return k?(k=!1,O+V+P):V+P}}t.nodeCounter=d;function u(w){return b(w)||y(w)||_(w)||p(w)||m(w)}t.isSimpleExpression=u;function m(w){return w.type==="appl"&&(w.childNodes[0].role==="prefix function"||w.childNodes[0].role==="simple function")&&(g(w.childNodes[1])||w.childNodes[1].type==="fenced"&&g(w.childNodes[1].childNodes[0]))}t.isSimpleFunction_=m;function p(w){return w.type==="prefixop"&&w.role==="negative"&&g(w.childNodes[0])&&w.childNodes[0].type!=="prefixop"&&w.childNodes[0].type!=="appl"&&w.childNodes[0].type!=="punctuated"}t.isSimpleNegative_=p;function _(w){return w.type==="punctuated"&&w.role==="endpunct"&&w.childNodes.length===2&&w.childNodes[1].role==="degree"&&(v(w.childNodes[0])||x(w.childNodes[0])||w.childNodes[0].type==="prefixop"&&w.childNodes[0].role==="negative"&&(v(w.childNodes[0].childNodes[0])||x(w.childNodes[0].childNodes[0])))}t.isSimpleDegree_=_;function y(w){return v(w)||w.type==="infixop"&&w.role==="implicit"&&(w.childNodes.length===2&&(v(w.childNodes[0])||b(w.childNodes[0]))&&v(w.childNodes[1])||w.childNodes.length===3&&b(w.childNodes[0])&&v(w.childNodes[1])&&v(w.childNodes[2]))}t.isSimpleLetters_=y;function g(w){return w.hasAnnotation("clearspeak","simple")}t.isSimple_=g;function v(w){return w.type==="identifier"&&(w.role==="latinletter"||w.role==="greekletter"||w.role==="otherletter"||w.role==="simple function")}t.isLetter_=v;function x(w){return w.type==="number"&&(w.role==="integer"||w.role==="float")}t.isNumber_=x;function b(w){return x(w)||S(w)}t.isSimpleNumber_=b;function S(w){if(M("Fraction_Over")||M("Fraction_FracOver")||w.type!=="fraction"||w.role!=="vulgar")return!1;if(M("Fraction_Ordinal"))return!0;const N=parseInt(w.childNodes[0].textContent,10),T=parseInt(w.childNodes[1].textContent,10);return N>0&&N<20&&T>0&&T<11}t.isSimpleFraction_=S;function M(w){return e.default.getInstance().style===w}t.hasPreference=M,(0,l.register)(new c.SemanticAnnotator("clearspeak","simple",function(w){return u(w)?"simple":""}));function C(w){if(!w.hasAttribute("annotation"))return!1;const N=w.getAttribute("annotation");return!!/clearspeak:simple$|clearspeak:simple;/.exec(N)}t.simpleNode=C;function A(w){if(C(w))return!0;if(w.tagName!=="subscript")return!1;const N=w.childNodes[0].childNodes,T=N[1];return N[0].tagName==="identifier"&&(E(T)||T.tagName==="infixop"&&T.hasAttribute("role")&&T.getAttribute("role")==="implicit"&&$(T))}t.simpleCell_=A;function E(w){return w.tagName==="number"&&w.hasAttribute("role")&&w.getAttribute("role")==="integer"}t.isInteger_=E;function $(w){return n.evalXPath("children/*",w).every(T=>E(T)||T.tagName==="identifier")}t.allIndices_=$;function D(w){const N=w.tagName==="matrix"?"children/row/children/cell/children/*":"children/line/children/*";return n.evalXPath(N,w).every(A)?[w]:[]}t.allCellsSimple=D;function B(w){return(0,o.vulgarFractionSmall)(w,20,11)?[w]:[]}t.isSmallVulgarFraction=B;function F(w){return w.type==="text"||w.type==="punctuated"&&w.role==="text"&&x(w.childNodes[0])&&I(w.childNodes.slice(1))||w.type==="identifier"&&w.role==="unit"||w.type==="infixop"&&(w.role==="implicit"||w.role==="unit")}t.isUnitExpression=F;function I(w){for(let N=0;N<w.length-1;N++)if(!(w[N].type==="text"&&w[N].textContent===""))return!1;return w[w.length-1].type==="text"}t.allTextLastContent_=I,(0,l.register)(new c.SemanticAnnotator("clearspeak","unit",function(w){return F(w)?"unit":""}));function H(w){const N=parseInt(w.textContent,10);return isNaN(N)?w.textContent:N>10?i.LOCALE.NUMBERS.numericOrdinal(N):i.LOCALE.NUMBERS.wordOrdinal(N)}t.ordinalExponent=H,t.NESTING_DEPTH=null;function W(w){let N=0;const T=w.textContent,j=w.getAttribute("role")==="open"?0:1;let P=w.parentNode;for(;P;)P.tagName==="fenced"&&P.childNodes[0].childNodes[j].textContent===T&&N++,P=P.parentNode;return t.NESTING_DEPTH=N>1?i.LOCALE.NUMBERS.wordOrdinal(N):"",t.NESTING_DEPTH}t.nestingDepth=W;function Z(w){const N=w.previousSibling;let T,j;return N?(T=N,j=w):(T=w,j=w.nextSibling),j?(0,f.isMatchingFence)(T.textContent,j.textContent)?[w]:[]:[]}t.matchingFences=Z;function et(w,N){if(!N||!w)return w;const T=w.match(/^(open|close) /);return T?T[0]+N+" "+w.substring(T[0].length):N+" "+w}t.insertNesting=et,a.Grammar.getInstance().setCorrection("insertNesting",et);function lt(w){const N=r.toArray(w.parentNode.childNodes),T=n.evalXPath("../../children/*",w),j=N.indexOf(w);return Q(T[j])||Q(T[j+1])?[w]:[]}t.fencedArguments=lt;function G(w){const N=r.toArray(w.parentNode.childNodes),T=n.evalXPath("../../children/*",w),j=N.indexOf(w);return q(T[j])&&T[j+1]&&(q(T[j+1])||T[j+1].tagName==="root"||T[j+1].tagName==="sqrt"||T[j+1].tagName==="superscript"&&T[j+1].childNodes[0].childNodes[0]&&(T[j+1].childNodes[0].childNodes[0].tagName==="number"||T[j+1].childNodes[0].childNodes[0].tagName==="identifier")&&(T[j+1].childNodes[0].childNodes[1].textContent==="2"||T[j+1].childNodes[0].childNodes[1].textContent==="3"))?[w]:[]}t.simpleArguments=G;function q(w){return!!w&&(w.tagName==="number"||w.tagName==="identifier"||w.tagName==="function"||w.tagName==="appl"||w.tagName==="fraction")}t.simpleFactor_=q;function Q(w){return w&&(w.tagName==="fenced"||w.hasAttribute("role")&&w.getAttribute("role")==="leftright"||K(w))}t.fencedFactor_=Q;function K(w){return!!w&&(w.tagName==="matrix"||w.tagName==="vector")}t.layoutFactor_=K;function tt(w){return i.LOCALE.NUMBERS.wordOrdinal(parseInt(w.textContent,10))}t.wordOrdinal=tt})(clearspeak_util);var mathspeak_util={},base_util={};Object.defineProperty(base_util,"__esModule",{value:!0});base_util.union=base_util.setdifference=base_util.interleaveLists=base_util.removeEmpty=void 0;function removeEmpty(t){return t.filter(r=>r)}base_util.removeEmpty=removeEmpty;function interleaveLists(t,r){const e=[];for(;t.length||r.length;)t.length&&e.push(t.shift()),r.length&&e.push(r.shift());return e}base_util.interleaveLists=interleaveLists;function setdifference(t,r){return t?r?t.filter(e=>r.indexOf(e)<0):t:[]}base_util.setdifference=setdifference;function union(t,r){return!t||!r?t||r||[]:t.concat(setdifference(r,t))}base_util.union=union;var semantic_processor={},semantic_heuristic_factory={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.lookup=t.run=t.add=t.blacklist=t.flags=t.updateFactory=t.factory=void 0,t.factory=null;function r(a){t.factory=a}t.updateFactory=r;const e=new Map;t.flags={combine_juxtaposition:!0,convert_juxtaposition:!0,multioperator:!0},t.blacklist={};function n(a){const s=a.name;e.set(s,a),t.flags[s]||(t.flags[s]=!1)}t.add=n;function i(a,s,l){const c=o(a);return c&&!t.blacklist[a]&&(t.flags[a]||c.applicable(s))?c.apply(s):l?l(s):s}t.run=i;function o(a){return e.get(a)}t.lookup=o})(semantic_heuristic_factory);var semantic_node_factory={},semantic_default={},semantic_ordering={};Object.defineProperty(semantic_ordering,"__esModule",{value:!0});semantic_ordering.SemanticComparator=semantic_ordering.reduce=semantic_ordering.sort=semantic_ordering.apply=semantic_ordering.add=void 0;const comparators=[];function add(t){comparators.push(t)}semantic_ordering.add=add;function apply(t,r){for(let e=0,n;n=comparators[e];e++){const i=n.compare(t,r);if(i!==0)return i}return 0}semantic_ordering.apply=apply;function sort(t){t.sort(apply)}semantic_ordering.sort=sort;function reduce(t){if(t.length<=1)return t;const r=t.slice();sort(r);const e=[];let n;do n=r.pop(),e.push(n);while(n&&r.length&&apply(r[r.length-1],n)===0);return e}semantic_ordering.reduce=reduce;class SemanticComparator{constructor(r,e=null){this.comparator=r,this.type=e,add(this)}compare(r,e){return this.type&&this.type===r.type&&this.type===e.type?this.comparator(r,e):0}}semantic_ordering.SemanticComparator=SemanticComparator;function simpleFunction(t,r){return t.role==="simple function"?1:r.role==="simple function"?-1:0}new SemanticComparator(simpleFunction,"identifier");Object.defineProperty(semantic_default,"__esModule",{value:!0});semantic_default.SemanticMeaningCollator=semantic_default.SemanticNodeCollator=semantic_default.SemanticDefault=void 0;const SemanticAttr$2=semantic_attr,semantic_ordering_1=semantic_ordering;class SemanticDefault{constructor(){this.map={}}static key(r,e){return e?r+":"+e:r}add(r,e){this.map[SemanticDefault.key(r,e.font)]=e}addNode(r){this.add(r.textContent,r.meaning())}retrieve(r,e){return this.map[SemanticDefault.key(r,e)]}retrieveNode(r){return this.retrieve(r.textContent,r.font)}size(){return Object.keys(this.map).length}}semantic_default.SemanticDefault=SemanticDefault;class SemanticCollator{constructor(){this.map={}}add(r,e){const n=this.map[r];n?n.push(e):this.map[r]=[e]}retrieve(r,e){return this.map[SemanticDefault.key(r,e)]}retrieveNode(r){return this.retrieve(r.textContent,r.font)}copy(){const r=this.copyCollator();for(const e in this.map)r.map[e]=this.map[e];return r}minimize(){for(const r in this.map)this.map[r].length===1&&delete this.map[r]}minimalCollator(){const r=this.copy();for(const e in r.map)r.map[e].length===1&&delete r.map[e];return r}isMultiValued(){for(const r in this.map)if(this.map[r].length>1)return!0;return!1}isEmpty(){return!Object.keys(this.map).length}}class SemanticNodeCollator extends SemanticCollator{copyCollator(){return new SemanticNodeCollator}add(r,e){const n=SemanticDefault.key(r,e.font);super.add(n,e)}addNode(r){this.add(r.textContent,r)}toString(){const r=[];for(const e in this.map){const n=Array(e.length+3).join(" "),i=this.map[e],o=[];for(let a=0,s;s=i[a];a++)o.push(s.toString());r.push(e+": "+o.join(`
`+n))}return r.join(`
`)}collateMeaning(){const r=new SemanticMeaningCollator;for(const e in this.map)r.map[e]=this.map[e].map(function(n){return n.meaning()});return r}}semantic_default.SemanticNodeCollator=SemanticNodeCollator;class SemanticMeaningCollator extends SemanticCollator{copyCollator(){return new SemanticMeaningCollator}add(r,e){const n=this.retrieve(r,e.font);if(!n||!n.find(function(i){return SemanticAttr$2.equal(i,e)})){const i=SemanticDefault.key(r,e.font);super.add(i,e)}}addNode(r){this.add(r.textContent,r.meaning())}toString(){const r=[];for(const e in this.map){const n=Array(e.length+3).join(" "),i=this.map[e],o=[];for(let a=0,s;s=i[a];a++)o.push("{type: "+s.type+", role: "+s.role+", font: "+s.font+"}");r.push(e+": "+o.join(`
`+n))}return r.join(`
`)}reduce(){for(const r in this.map)this.map[r].length!==1&&(this.map[r]=(0,semantic_ordering_1.reduce)(this.map[r]))}default(){const r=new SemanticDefault;for(const e in this.map)this.map[e].length===1&&(r.map[e]=this.map[e][0]);return r}newDefault(){const r=this.default();this.reduce();const e=this.default();return r.size()!==e.size()?e:null}}semantic_default.SemanticMeaningCollator=SemanticMeaningCollator;var semantic_node={},semantic_util={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.partitionNodes=t.sliceNodes=t.getEmbellishedInner=t.addAttributes=t.isZeroLength=t.purgeNodes=t.isOrphanedGlyph=t.hasDisplayTag=t.hasEmptyTag=t.hasIgnoreTag=t.hasLeafTag=t.hasMathTag=t.directSpeechKeys=t.DISPLAYTAGS=t.EMPTYTAGS=t.IGNORETAGS=t.LEAFTAGS=void 0;const r=dom_util;t.LEAFTAGS=["MO","MI","MN","MTEXT","MS","MSPACE"],t.IGNORETAGS=["MERROR","MPHANTOM","MALIGNGROUP","MALIGNMARK","MPRESCRIPTS","ANNOTATION","ANNOTATION-XML"],t.EMPTYTAGS=["MATH","MROW","MPADDED","MACTION","NONE","MSTYLE","SEMANTICS"],t.DISPLAYTAGS=["MROOT","MSQRT"],t.directSpeechKeys=["aria-label","exact-speech","alt"];function e(p){return!!p&&r.tagName(p)==="MATH"}t.hasMathTag=e;function n(p){return!!p&&t.LEAFTAGS.indexOf(r.tagName(p))!==-1}t.hasLeafTag=n;function i(p){return!!p&&t.IGNORETAGS.indexOf(r.tagName(p))!==-1}t.hasIgnoreTag=i;function o(p){return!!p&&t.EMPTYTAGS.indexOf(r.tagName(p))!==-1}t.hasEmptyTag=o;function a(p){return!!p&&t.DISPLAYTAGS.indexOf(r.tagName(p))!==-1}t.hasDisplayTag=a;function s(p){return!!p&&r.tagName(p)==="MGLYPH"&&!n(p.parentNode)}t.isOrphanedGlyph=s;function l(p){const _=[];for(let y=0,g;g=p[y];y++){if(g.nodeType!==r.NodeType.ELEMENT_NODE)continue;const v=r.tagName(g);t.IGNORETAGS.indexOf(v)===-1&&(t.EMPTYTAGS.indexOf(v)!==-1&&g.childNodes.length===0||_.push(g))}return _}t.purgeNodes=l;function c(p){if(!p)return!1;if(["negativeveryverythinmathspace","negativeverythinmathspace","negativethinmathspace","negativemediummathspace","negativethickmathspace","negativeverythickmathspace","negativeveryverythickmathspace"].indexOf(p)!==-1)return!0;const y=p.match(/[0-9.]+/);return y?parseFloat(y[0])===0:!1}t.isZeroLength=c;function f(p,_){if(_.hasAttributes()){const y=_.attributes;for(let g=y.length-1;g>=0;g--){const v=y[g].name;v.match(/^ext/)&&(p.attributes[v]=y[g].value,p.nobreaking=!0),t.directSpeechKeys.indexOf(v)!==-1&&(p.attributes["ext-speech"]=y[g].value,p.nobreaking=!0),v.match(/texclass$/)&&(p.attributes.texclass=y[g].value),v==="href"&&(p.attributes.href=y[g].value,p.nobreaking=!0)}}}t.addAttributes=f;function d(p){return p&&p.embellished&&p.childNodes.length>0?d(p.childNodes[0]):p}t.getEmbellishedInner=d;function u(p,_,y){y&&p.reverse();const g=[];for(let v=0,x;x=p[v];v++){if(_(x))return y?{head:p.slice(v+1).reverse(),div:x,tail:g.reverse()}:{head:g,div:x,tail:p.slice(v+1)};g.push(x)}return y?{head:[],div:null,tail:g.reverse()}:{head:g,div:null,tail:[]}}t.sliceNodes=u;function m(p,_){let y=p;const g=[],v=[];let x=null;do x=u(y,_),v.push(x.head),g.push(x.div),y=x.tail;while(x.div);return g.pop(),{rel:g,comp:v}}t.partitionNodes=m})(semantic_util);Object.defineProperty(semantic_node,"__esModule",{value:!0});semantic_node.SemanticNode=void 0;const DomUtil$o=dom_util,semantic_attr_1$1=semantic_attr,SemanticUtil$3=semantic_util;class SemanticNode{constructor(r){this.id=r,this.mathml=[],this.parent=null,this.type="unknown",this.role="unknown",this.font="unknown",this.embellished=null,this.fencePointer="",this.childNodes=[],this.textContent="",this.mathmlTree=null,this.contentNodes=[],this.annotation={},this.attributes={},this.nobreaking=!1}static fromXml(r){const e=parseInt(r.getAttribute("id"),10),n=new SemanticNode(e);return n.type=r.tagName,SemanticNode.setAttribute(n,r,"role"),SemanticNode.setAttribute(n,r,"font"),SemanticNode.setAttribute(n,r,"embellished"),SemanticNode.setAttribute(n,r,"fencepointer","fencePointer"),r.getAttribute("annotation")&&n.parseAnnotation(r.getAttribute("annotation")),SemanticUtil$3.addAttributes(n,r),SemanticNode.processChildren(n,r),n}static setAttribute(r,e,n,i){i=i||n;const o=e.getAttribute(n);o&&(r[i]=o)}static processChildren(r,e){for(const n of DomUtil$o.toArray(e.childNodes)){if(n.nodeType===DomUtil$o.NodeType.TEXT_NODE){r.textContent=n.textContent;continue}const i=DomUtil$o.toArray(n.childNodes).map(SemanticNode.fromXml);i.forEach(o=>o.parent=r),DomUtil$o.tagName(n)==="CONTENT"?r.contentNodes=i:r.childNodes=i}}querySelectorAll(r){let e=[];for(let n=0,i;i=this.childNodes[n];n++)e=e.concat(i.querySelectorAll(r));for(let n=0,i;i=this.contentNodes[n];n++)e=e.concat(i.querySelectorAll(r));return r(this)&&e.unshift(this),e}xml(r,e){const n=function(o,a){const s=a.map(function(c){return c.xml(r,e)}),l=r.createElementNS("",o);for(let c=0,f;f=s[c];c++)l.appendChild(f);return l},i=r.createElementNS("",this.type);return e||this.xmlAttributes(i),i.textContent=this.textContent,this.contentNodes.length>0&&i.appendChild(n("content",this.contentNodes)),this.childNodes.length>0&&i.appendChild(n("children",this.childNodes)),i}toString(r=!1){const e=DomUtil$o.parseInput("<snode/>");return DomUtil$o.serializeXml(this.xml(e.ownerDocument,r))}allAttributes(){const r=[];return r.push(["role",this.role]),this.font!=="unknown"&&r.push(["font",this.font]),Object.keys(this.annotation).length&&r.push(["annotation",this.annotationXml()]),this.embellished&&r.push(["embellished",this.embellished]),this.fencePointer&&r.push(["fencepointer",this.fencePointer]),r.push(["id",this.id.toString()]),r}annotationXml(){const r=[];for(const e in this.annotation)this.annotation[e].forEach(function(n){r.push(e+":"+n)});return r.join(";")}attributesXml(){const r=[];for(const[e,n]of Object.entries(this.attributes))r.push(e+":"+n);return r.join(";")}toJson(){const r={};r.type=this.type;const e=this.allAttributes();for(let n=0,i;i=e[n];n++)r[i[0]]=i[1].toString();return this.textContent&&(r.$t=this.textContent),this.childNodes.length&&(r.children=this.childNodes.map(function(n){return n.toJson()})),this.contentNodes.length&&(r.content=this.contentNodes.map(function(n){return n.toJson()})),r}updateContent(r,e){const n=e?r.replace(/^[ \f\n\r\t\v\u200b]*/,"").replace(/[ \f\n\r\t\v\u200b]*$/,""):r.trim();if(r=r&&!n?r:n,this.textContent===r)return;const i=(0,semantic_attr_1$1.lookupMeaning)(r);this.textContent=r,this.role=i.role,this.type=i.type,this.font=i.font}addMathmlNodes(r){for(let e=0,n;n=r[e];e++)this.mathml.indexOf(n)===-1&&this.mathml.push(n)}appendChild(r){this.childNodes.push(r),this.addMathmlNodes(r.mathml),r.parent=this}replaceChild(r,e){const n=this.childNodes.indexOf(r);if(n===-1)return;r.parent=null,e.parent=this,this.childNodes[n]=e;const i=r.mathml.filter(function(a){return e.mathml.indexOf(a)===-1}),o=e.mathml.filter(function(a){return r.mathml.indexOf(a)===-1});this.removeMathmlNodes(i),this.addMathmlNodes(o)}appendContentNode(r){r&&(this.contentNodes.push(r),this.addMathmlNodes(r.mathml),r.parent=this)}removeContentNode(r){if(r){const e=this.contentNodes.indexOf(r);e!==-1&&this.contentNodes.slice(e,1)}}equals(r){if(!r||this.type!==r.type||this.role!==r.role||this.textContent!==r.textContent||this.childNodes.length!==r.childNodes.length||this.contentNodes.length!==r.contentNodes.length)return!1;for(let e=0,n,i;n=this.childNodes[e],i=r.childNodes[e];e++)if(!n.equals(i))return!1;for(let e=0,n,i;n=this.contentNodes[e],i=r.contentNodes[e];e++)if(!n.equals(i))return!1;return!0}displayTree(){console.info(this.displayTree_(0))}addAnnotation(r,e){e&&this.addAnnotation_(r,e)}getAnnotation(r){const e=this.annotation[r];return e||[]}hasAnnotation(r,e){const n=this.annotation[r];return n?n.indexOf(e)!==-1:!1}parseAnnotation(r){const e=r.split(";");for(let n=0,i=e.length;n<i;n++){const o=e[n].split(":");this.addAnnotation(o[0],o[1])}}meaning(){return{type:this.type,role:this.role,font:this.font}}xmlAttributes(r){const e=this.allAttributes();for(let n=0,i;i=e[n];n++)r.setAttribute(i[0],i[1]);this.addExternalAttributes(r)}addExternalAttributes(r){for(const e in this.attributes)r.setAttribute(e,this.attributes[e])}parseAttributes(r){if(!r)return;const e=r.split(";");for(let n=0,i=e.length;n<i;n++){const[o,a]=e[n].split(":");o&&(this.attributes[o]=a)}}removeMathmlNodes(r){const e=this.mathml;for(let n=0,i;i=r[n];n++){const o=e.indexOf(i);o!==-1&&e.splice(o,1)}this.mathml=e}displayTree_(r){r++;const e=Array(r).join("  ");let n="";n+=`
`+e+this.toString(),n+=`
`+e+"MathmlTree:",n+=`
`+e+this.mathmlTreeString(),n+=`
`+e+"MathML:";for(let i=0,o;o=this.mathml[i];i++)n+=`
`+e+o.toString();return n+=`
`+e+"Begin Content",this.contentNodes.forEach(function(i){n+=i.displayTree_(r)}),n+=`
`+e+"End Content",n+=`
`+e+"Begin Children",this.childNodes.forEach(function(i){n+=i.displayTree_(r)}),n+=`
`+e+"End Children",n}mathmlTreeString(){return this.mathmlTree?this.mathmlTree.toString():"EMPTY"}addAnnotation_(r,e){const n=this.annotation[r];n?n.push(e):this.annotation[r]=[e]}}semantic_node.SemanticNode=SemanticNode;Object.defineProperty(semantic_node_factory,"__esModule",{value:!0});semantic_node_factory.SemanticNodeFactory=void 0;const semantic_default_1=semantic_default,semantic_default_2=semantic_default,semantic_node_1$2=semantic_node;class SemanticNodeFactory{constructor(){this.leafMap=new semantic_default_2.SemanticNodeCollator,this.defaultMap=new semantic_default_1.SemanticDefault,this.idCounter_=-1}makeNode(r){return this.createNode_(r)}makeUnprocessed(r){const e=this.createNode_();return e.mathml=[r],e.mathmlTree=r,e}makeEmptyNode(){const r=this.createNode_();return r.type="empty",r}makeContentNode(r){const e=this.createNode_();return e.updateContent(r),e}makeMultipleContentNodes(r,e){const n=[];for(let i=0;i<r;i++)n.push(this.makeContentNode(e));return n}makeLeafNode(r,e){if(!r)return this.makeEmptyNode();const n=this.makeContentNode(r);n.font=e||n.font;const i=this.defaultMap.retrieveNode(n);return i&&(n.type=i.type,n.role=i.role,n.font=i.font),this.leafMap.addNode(n),n}makeBranchNode(r,e,n,i){const o=this.createNode_();return i&&o.updateContent(i),o.type=r,o.childNodes=e,o.contentNodes=n,e.concat(n).forEach(function(a){a.parent=o,o.addMathmlNodes(a.mathml)}),o}createNode_(r){return typeof r<"u"?this.idCounter_=Math.max(this.idCounter_,r):r=++this.idCounter_,new semantic_node_1$2.SemanticNode(r)}}semantic_node_factory.SemanticNodeFactory=SemanticNodeFactory;var semantic_pred={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isMembership=t.elligibleRightNeutral=t.elligibleLeftNeutral=t.compareNeutralFences=t.isNeutralFence=t.isImplicitOp=t.isImplicit=t.isPureUnit=t.isUnitCounter=t.isNumber=t.isSingletonSetContent=t.scriptedElement_=t.illegalSingleton_=t.isSetNode=t.isRightBrace=t.isLeftBrace=t.isSimpleFunction=t.singlePunctAtPosition=t.isSimpleFunctionHead=t.isLimitBase=t.isBinomial=t.lineIsLabelled=t.tableIsMultiline=t.tableIsCases=t.isFencedElement=t.tableIsMatrixOrVector=t.isTableOrMultiline=t.isElligibleEmbellishedFence=t.isFence=t.isPunctuation=t.isRelation=t.isOperator=t.isEmbellished=t.isGeneralFunctionBoundary=t.isIntegralDxBoundarySingle=t.isIntegralDxBoundary=t.isBigOpBoundary=t.isPrefixFunctionBoundary=t.isSimpleFunctionScope=t.isAccent=t.isRole=t.embellishedType=t.isType=void 0;const r=semantic_attr,e=semantic_util;function n(O,k){return O.type===k}t.isType=n;function i(O,k){return O.embellished===k}t.embellishedType=i;function o(O,k){return O.role===k}t.isRole=o;function a(O){const k=new RegExp("∞|᪲");return n(O,"fence")||n(O,"punctuation")||n(O,"operator")&&!O.textContent.match(k)||n(O,"relation")||n(O,"identifier")&&o(O,"unknown")&&!O.textContent.match(r.allLettersRegExp)&&!O.textContent.match(k)}t.isAccent=a;function s(O){const k=O.childNodes;if(k.length===0)return!0;if(k.length>1)return!1;const V=k[0];return!(V.type==="infixop"&&(V.role!=="implicit"||V.childNodes.some(z=>n(z,"infixop"))))}t.isSimpleFunctionScope=s;function l(O){return p(O)&&!o(O,"division")||n(O,"appl")||u(O)}t.isPrefixFunctionBoundary=l;function c(O){return p(O)||u(O)}t.isBigOpBoundary=c;function f(O,k){return!!k&&n(k,"identifier")&&r.lookupSecondary("d",O.textContent)}t.isIntegralDxBoundary=f;function d(O){if(n(O,"identifier")){const k=O.textContent[0];return k&&O.textContent[1]&&r.lookupSecondary("d",k)}return!1}t.isIntegralDxBoundarySingle=d;function u(O){return _(O)||y(O)}t.isGeneralFunctionBoundary=u;function m(O){return O.embellished?O.embellished:r.isEmbellishedType(O.type)?O.type:null}t.isEmbellished=m;function p(O){return n(O,"operator")||i(O,"operator")}t.isOperator=p;function _(O){return n(O,"relation")||i(O,"relation")}t.isRelation=_;function y(O){return n(O,"punctuation")||i(O,"punctuation")}t.isPunctuation=y;function g(O){return n(O,"fence")||i(O,"fence")}t.isFence=g;function v(O){return!O||!g(O)?!1:O.embellished?b(O):!0}t.isElligibleEmbellishedFence=v;function x(O){return n(O,"tensor")&&(!n(O.childNodes[1],"empty")||!n(O.childNodes[2],"empty"))&&(!n(O.childNodes[3],"empty")||!n(O.childNodes[4],"empty"))}function b(O){return O.embellished?x(O)||o(O,"close")&&n(O,"tensor")||o(O,"open")&&(n(O,"subscript")||n(O,"superscript"))?!1:b(O.childNodes[0]):!0}function S(O){return!!O&&(n(O,"table")||n(O,"multiline"))}t.isTableOrMultiline=S;function M(O){return!!O&&C(O)&&S(O.childNodes[0])}t.tableIsMatrixOrVector=M;function C(O){return!!O&&n(O,"fenced")&&(o(O,"leftright")||w(O))&&O.childNodes.length===1}t.isFencedElement=C;function A(O,k){return k.length>0&&o(k[k.length-1],"openfence")}t.tableIsCases=A;function E(O){return O.childNodes.every(function(k){return k.childNodes.length<=1})}t.tableIsMultiline=E;function $(O){return n(O,"line")&&O.contentNodes.length&&o(O.contentNodes[0],"label")}t.lineIsLabelled=$;function D(O){return O.childNodes.length===2}t.isBinomial=D;function B(O){return n(O,"largeop")||n(O,"limboth")||n(O,"limlower")||n(O,"limupper")||n(O,"function")&&o(O,"limit function")||(n(O,"overscore")||n(O,"underscore"))&&B(O.childNodes[0])}t.isLimitBase=B;function F(O){return O.type==="identifier"||O.role==="latinletter"||O.role==="greekletter"||O.role==="otherletter"}t.isSimpleFunctionHead=F;function I(O,k,V){return k.length===1&&(O[V].type==="punctuation"||O[V].embellished==="punctuation")&&O[V]===k[0]}t.singlePunctAtPosition=I;function H(O){return n(O,"identifier")&&o(O,"simple function")}t.isSimpleFunction=H;function W(O){return!!O&&["{","﹛","｛"].indexOf(O.textContent)!==-1}t.isLeftBrace=W;function Z(O){return!!O&&["}","﹜","｝"].indexOf(O.textContent)!==-1}t.isRightBrace=Z;function et(O){return W(O.contentNodes[0])&&Z(O.contentNodes[1])}t.isSetNode=et,t.illegalSingleton_=["punctuation","punctuated","relseq","multirel","table","multiline","cases","inference"],t.scriptedElement_=["limupper","limlower","limboth","subscript","superscript","underscore","overscore","tensor"];function lt(O){const k=O.type;return t.illegalSingleton_.indexOf(k)!==-1||k==="infixop"&&O.role!=="implicit"?!1:k==="fenced"?O.role==="leftright"?lt(O.childNodes[0]):!0:t.scriptedElement_.indexOf(k)!==-1?lt(O.childNodes[0]):!0}t.isSingletonSetContent=lt;function G(O){return O.type==="number"&&(O.role==="integer"||O.role==="float")}t.isNumber=G;function q(O){return G(O)||O.role==="vulgar"||O.role==="mixed"}t.isUnitCounter=q;function Q(O){const k=O.childNodes;return O.role==="unit"&&(!k.length||k[0].role==="unit")}t.isPureUnit=Q;function K(O){return O.role==="implicit"||O.role==="unit"&&!!O.contentNodes.length&&O.contentNodes[0].textContent===r.invisibleTimes()}t.isImplicit=K;function tt(O){return O.type==="infixop"&&O.role==="implicit"}t.isImplicitOp=tt;function w(O){return O.role==="neutral"||O.role==="metric"}t.isNeutralFence=w;function N(O,k){return w(O)&&w(k)&&(0,e.getEmbellishedInner)(O).textContent===(0,e.getEmbellishedInner)(k).textContent}t.compareNeutralFences=N;function T(O){return w(O)?O.embellished?!(O.type==="superscript"||O.type==="subscript"||O.type==="tensor"&&(O.childNodes[3].type!=="empty"||O.childNodes[4].type!=="empty")):!0:!1}t.elligibleLeftNeutral=T;function j(O){return w(O)?O.embellished?!(O.type==="tensor"&&(O.childNodes[1].type!=="empty"||O.childNodes[2].type!=="empty")):!0:!1}t.elligibleRightNeutral=j;function P(O){return["element","nonelement","reelement","renonelement"].includes(O.role)}t.isMembership=P})(semantic_pred);Object.defineProperty(semantic_processor,"__esModule",{value:!0});const DomUtil$n=dom_util,SemanticAttr$1=semantic_attr,SemanticHeuristics$1=semantic_heuristic_factory,semantic_node_factory_1$2=semantic_node_factory,SemanticPred$3=semantic_pred,SemanticUtil$2=semantic_util;class SemanticProcessor{constructor(){this.funcAppls={},this.factory_=new semantic_node_factory_1$2.SemanticNodeFactory,SemanticHeuristics$1.updateFactory(this.factory_)}static getInstance(){return SemanticProcessor.instance=SemanticProcessor.instance||new SemanticProcessor,SemanticProcessor.instance}static tableToMultiline(r){if(!SemanticPred$3.tableIsMultiline(r)){SemanticProcessor.classifyTable(r);return}r.type="multiline";for(let e=0,n;n=r.childNodes[e];e++)SemanticProcessor.rowToLine_(n,"multiline");r.childNodes.length===1&&!SemanticPred$3.lineIsLabelled(r.childNodes[0])&&SemanticPred$3.isFencedElement(r.childNodes[0].childNodes[0])&&SemanticProcessor.tableToMatrixOrVector_(SemanticProcessor.rewriteFencedLine_(r)),SemanticProcessor.binomialForm_(r),SemanticProcessor.classifyMultiline(r)}static number(r){(r.type==="unknown"||r.type==="identifier")&&(r.type="number"),SemanticProcessor.numberRole_(r),SemanticProcessor.exprFont_(r)}static classifyMultiline(r){let e=0;const n=r.childNodes.length;let i;for(;e<n&&(!(i=r.childNodes[e])||!i.childNodes.length);)e++;if(e>=n)return;const o=i.childNodes[0].role;o!=="unknown"&&r.childNodes.every(function(a){const s=a.childNodes[0];return!s||s.role===o&&(SemanticPred$3.isType(s,"relation")||SemanticPred$3.isType(s,"relseq"))})&&(r.role=o)}static classifyTable(r){const e=SemanticProcessor.computeColumns_(r);SemanticProcessor.classifyByColumns_(r,e,"equality")||SemanticProcessor.classifyByColumns_(r,e,"inequality",["equality"])||SemanticProcessor.classifyByColumns_(r,e,"arrow")||SemanticProcessor.detectCaleyTable(r)}static detectCaleyTable(r){if(!r.mathmlTree)return!1;const e=r.mathmlTree,n=e.getAttribute("columnlines"),i=e.getAttribute("rowlines");return!n||!i?!1:SemanticProcessor.cayleySpacing(n)&&SemanticProcessor.cayleySpacing(i)?(r.role="cayley",!0):!1}static cayleySpacing(r){const e=r.split(" ");return(e[0]==="solid"||e[0]==="dashed")&&e.slice(1).every(n=>n==="none")}static proof(r,e,n){const i=SemanticProcessor.separateSemantics(e);return SemanticProcessor.getInstance().proof(r,i,n)}static findSemantics(r,e,n){const i=n??null,o=SemanticProcessor.getSemantics(r);return!o||!o[e]?!1:i==null?!0:o[e]===i}static getSemantics(r){const e=r.getAttribute("semantics");return e?SemanticProcessor.separateSemantics(e):null}static removePrefix(r){const[,...e]=r.split("_");return e.join("_")}static separateSemantics(r){const e={};return r.split(";").forEach(function(n){const[i,o]=n.split(":");e[SemanticProcessor.removePrefix(i)]=o}),e}static matchSpaces_(r,e){for(let n=0,i;i=e[n];n++){const a=r[n].mathmlTree,s=r[n+1].mathmlTree;if(!a||!s)continue;const l=a.nextSibling;if(!l||l===s)continue;const c=SemanticProcessor.getSpacer_(l);c&&(i.mathml.push(c),i.mathmlTree=c,i.role="space")}}static getSpacer_(r){if(DomUtil$n.tagName(r)==="MSPACE")return r;for(;SemanticUtil$2.hasEmptyTag(r)&&r.childNodes.length===1;)if(r=r.childNodes[0],DomUtil$n.tagName(r)==="MSPACE")return r;return null}static fenceToPunct_(r){const e=SemanticProcessor.FENCE_TO_PUNCT_[r.role];if(e){for(;r.embellished;)r.embellished="punctuation",SemanticPred$3.isRole(r,"subsup")||SemanticPred$3.isRole(r,"underover")||(r.role=e),r=r.childNodes[0];r.type="punctuation",r.role=e}}static classifyFunction_(r,e){if(r.type==="appl"||r.type==="bigop"||r.type==="integral")return"";if(e[0]&&e[0].textContent===SemanticAttr$1.functionApplication()){SemanticProcessor.getInstance().funcAppls[r.id]=e.shift();let i="simple function";return SemanticHeuristics$1.run("simple2prefix",r),(r.role==="prefix function"||r.role==="limit function")&&(i=r.role),SemanticProcessor.propagateFunctionRole_(r,i),"prefix"}const n=SemanticProcessor.CLASSIFY_FUNCTION_[r.role];return n||(SemanticPred$3.isSimpleFunctionHead(r)?"simple":"")}static propagateFunctionRole_(r,e){if(r){if(r.type==="infixop")return;SemanticPred$3.isRole(r,"subsup")||SemanticPred$3.isRole(r,"underover")||(r.role=e),SemanticProcessor.propagateFunctionRole_(r.childNodes[0],e)}}static getFunctionOp_(r,e){if(e(r))return r;for(let n=0,i;i=r.childNodes[n];n++){const o=SemanticProcessor.getFunctionOp_(i,e);if(o)return o}return null}static tableToMatrixOrVector_(r){const e=r.childNodes[0];SemanticPred$3.isType(e,"multiline")?SemanticProcessor.tableToVector_(r):SemanticProcessor.tableToMatrix_(r),r.contentNodes.forEach(e.appendContentNode.bind(e));for(let n=0,i;i=e.childNodes[n];n++)SemanticProcessor.assignRoleToRow_(i,SemanticProcessor.getComponentRoles_(e));return e.parent=null,e}static tableToVector_(r){const e=r.childNodes[0];if(e.type="vector",e.childNodes.length===1){SemanticProcessor.tableToSquare_(r);return}SemanticProcessor.binomialForm_(e)}static binomialForm_(r){SemanticPred$3.isBinomial(r)&&(r.role="binomial",r.childNodes[0].role="binomial",r.childNodes[1].role="binomial")}static tableToMatrix_(r){const e=r.childNodes[0];if(e.type="matrix",e.childNodes&&e.childNodes.length>0&&e.childNodes[0].childNodes&&e.childNodes.length===e.childNodes[0].childNodes.length){SemanticProcessor.tableToSquare_(r);return}e.childNodes&&e.childNodes.length===1&&(e.role="rowvector")}static tableToSquare_(r){const e=r.childNodes[0];if(SemanticPred$3.isNeutralFence(r)){e.role="determinant";return}e.role="squarematrix"}static getComponentRoles_(r){const e=r.role;return e&&e!=="unknown"?e:r.type.toLowerCase()||"unknown"}static tableToCases_(r,e){for(let n=0,i;i=r.childNodes[n];n++)SemanticProcessor.assignRoleToRow_(i,"cases");return r.type="cases",r.appendContentNode(e),SemanticPred$3.tableIsMultiline(r)&&SemanticProcessor.binomialForm_(r),r}static rewriteFencedLine_(r){const e=r.childNodes[0],n=r.childNodes[0].childNodes[0],i=r.childNodes[0].childNodes[0].childNodes[0];return n.parent=r.parent,r.parent=n,i.parent=e,n.childNodes=[r],e.childNodes=[i],n}static rowToLine_(r,e){const n=e||"unknown";SemanticPred$3.isType(r,"row")&&(r.type="line",r.role=n,r.childNodes.length===1&&SemanticPred$3.isType(r.childNodes[0],"cell")&&(r.childNodes=r.childNodes[0].childNodes,r.childNodes.forEach(function(i){i.parent=r})))}static assignRoleToRow_(r,e){if(SemanticPred$3.isType(r,"line")){r.role=e;return}SemanticPred$3.isType(r,"row")&&(r.role=e,r.childNodes.forEach(function(n){SemanticPred$3.isType(n,"cell")&&(n.role=e)}))}static nextSeparatorFunction_(r){let e;if(r){if(r.match(/^\s+$/))return null;e=r.replace(/\s/g,"").split("").filter(function(n){return n})}else e=[","];return function(){return e.length>1?e.shift():e[0]}}static numberRole_(r){if(r.role!=="unknown")return;const e=[...r.textContent].filter(i=>i.match(/[^\s]/)),n=e.map(SemanticAttr$1.lookupMeaning);if(n.every(function(i){return i.type==="number"&&i.role==="integer"||i.type==="punctuation"&&i.role==="comma"})){r.role="integer",e[0]==="0"&&r.addAnnotation("general","basenumber");return}if(n.every(function(i){return i.type==="number"&&i.role==="integer"||i.type==="punctuation"})){r.role="float";return}r.role="othernumber"}static exprFont_(r){if(r.font!=="unknown")return;const i=[...r.textContent].map(SemanticAttr$1.lookupMeaning).reduce(function(o,a){return!o||!a.font||a.font==="unknown"||a.font===o?o:o==="unknown"?a.font:null},"unknown");i&&(r.font=i)}static purgeFences_(r){const e=r.rel,n=r.comp,i=[],o=[];for(;e.length>0;){const a=e.shift();let s=n.shift();if(SemanticPred$3.isElligibleEmbellishedFence(a)){i.push(a),o.push(s);continue}SemanticProcessor.fenceToPunct_(a),s.push(a),s=s.concat(n.shift()),n.unshift(s)}return o.push(n.shift()),{rel:i,comp:o}}static rewriteFencedNode_(r){const e=r.contentNodes[0],n=r.contentNodes[1];let i=SemanticProcessor.rewriteFence_(r,e);return r.contentNodes[0]=i.fence,i=SemanticProcessor.rewriteFence_(i.node,n),r.contentNodes[1]=i.fence,r.contentNodes[0].parent=r,r.contentNodes[1].parent=r,i.node.parent=null,i.node}static rewriteFence_(r,e){if(!e.embellished)return{node:r,fence:e};const n=e.childNodes[0],i=SemanticProcessor.rewriteFence_(r,n);return SemanticPred$3.isType(e,"superscript")||SemanticPred$3.isType(e,"subscript")||SemanticPred$3.isType(e,"tensor")?(SemanticPred$3.isRole(e,"subsup")||(e.role=r.role),n!==i.node&&(e.replaceChild(n,i.node),n.parent=r),SemanticProcessor.propagateFencePointer_(e,n),{node:e,fence:i.fence}):(e.replaceChild(n,i.fence),e.mathmlTree&&e.mathml.indexOf(e.mathmlTree)===-1&&e.mathml.push(e.mathmlTree),{node:i.node,fence:e})}static propagateFencePointer_(r,e){r.fencePointer=e.fencePointer||e.id.toString(),r.embellished=null}static classifyByColumns_(r,e,n,i){const o=l=>SemanticProcessor.isPureRelation_(l,n),a=l=>SemanticProcessor.isEndRelation_(l,n)||SemanticProcessor.isPureRelation_(l,n),s=l=>SemanticProcessor.isEndRelation_(l,n,!0)||SemanticProcessor.isPureRelation_(l,n);return e.length===3&&SemanticProcessor.testColumns_(e,1,o)||e.length===2&&(SemanticProcessor.testColumns_(e,1,a)||SemanticProcessor.testColumns_(e,0,s))?(r.role=n,!0):!1}static isEndRelation_(r,e,n){const i=n?r.childNodes.length-1:0;return SemanticPred$3.isType(r,"relseq")&&SemanticPred$3.isRole(r,e)&&SemanticPred$3.isType(r.childNodes[i],"empty")}static isPureRelation_(r,e){return SemanticPred$3.isType(r,"relation")&&SemanticPred$3.isRole(r,e)}static computeColumns_(r){const e=[];for(let n=0,i;i=r.childNodes[n];n++)for(let o=0,a;a=i.childNodes[o];o++)e[o]?e[o].push(a):e[o]=[a];return e}static testColumns_(r,e,n){const i=r[e];return i?i.some(function(o){return o.childNodes.length&&n(o.childNodes[0])})&&i.every(function(o){return!o.childNodes.length||n(o.childNodes[0])}):!1}setNodeFactory(r){SemanticProcessor.getInstance().factory_=r,SemanticHeuristics$1.updateFactory(SemanticProcessor.getInstance().factory_)}getNodeFactory(){return SemanticProcessor.getInstance().factory_}identifierNode(r,e,n){if(n==="MathML-Unit")r.type="identifier",r.role="unit";else if(!e&&r.textContent.length===1&&(r.role==="integer"||r.role==="latinletter"||r.role==="greekletter")&&r.font==="normal")return r.font="italic",SemanticHeuristics$1.run("simpleNamedFunction",r);return r.type==="unknown"&&(r.type="identifier"),SemanticProcessor.exprFont_(r),SemanticHeuristics$1.run("simpleNamedFunction",r)}implicitNode(r){if(r=SemanticProcessor.getInstance().getMixedNumbers_(r),r=SemanticProcessor.getInstance().combineUnits_(r),r.length===1)return r[0];const e=SemanticProcessor.getInstance().implicitNode_(r);return SemanticHeuristics$1.run("combine_juxtaposition",e)}text(r,e){return SemanticProcessor.exprFont_(r),r.type="text",e==="MS"?(r.role="string",r):((e==="MSPACE"||r.textContent.match(/^\s*$/))&&(r.role="space"),r)}row(r){return r=r.filter(function(e){return!SemanticPred$3.isType(e,"empty")}),r.length===0?SemanticProcessor.getInstance().factory_.makeEmptyNode():(r=SemanticProcessor.getInstance().getFencesInRow_(r),r=SemanticProcessor.getInstance().tablesInRow(r),r=SemanticProcessor.getInstance().getPunctuationInRow_(r),r=SemanticProcessor.getInstance().getTextInRow_(r),r=SemanticProcessor.getInstance().getFunctionsInRow_(r),SemanticProcessor.getInstance().relationsInRow_(r))}limitNode(r,e){if(!e.length)return SemanticProcessor.getInstance().factory_.makeEmptyNode();let n=e[0],i="unknown";if(!e[1])return n;let o;if(SemanticPred$3.isLimitBase(n)){o=SemanticProcessor.MML_TO_LIMIT_[r];const a=o.length;if(i=o.type,e=e.slice(0,o.length+1),a===1&&SemanticPred$3.isAccent(e[1])||a===2&&SemanticPred$3.isAccent(e[1])&&SemanticPred$3.isAccent(e[2]))return o=SemanticProcessor.MML_TO_BOUNDS_[r],SemanticProcessor.getInstance().accentNode_(n,e,o.type,o.length,o.accent);if(a===2){if(SemanticPred$3.isAccent(e[1]))return n=SemanticProcessor.getInstance().accentNode_(n,[n,e[1]],{MSUBSUP:"subscript",MUNDEROVER:"underscore"}[r],1,!0),e[2]?SemanticProcessor.getInstance().makeLimitNode_(n,[n,e[2]],null,"limupper"):n;if(e[2]&&SemanticPred$3.isAccent(e[2]))return n=SemanticProcessor.getInstance().accentNode_(n,[n,e[2]],{MSUBSUP:"superscript",MUNDEROVER:"overscore"}[r],1,!0),SemanticProcessor.getInstance().makeLimitNode_(n,[n,e[1]],null,"limlower");e[a]||(i="limlower")}return SemanticProcessor.getInstance().makeLimitNode_(n,e,null,i)}return o=SemanticProcessor.MML_TO_BOUNDS_[r],SemanticProcessor.getInstance().accentNode_(n,e,o.type,o.length,o.accent)}tablesInRow(r){let e=SemanticUtil$2.partitionNodes(r,SemanticPred$3.tableIsMatrixOrVector),n=[];for(let i=0,o;o=e.rel[i];i++)n=n.concat(e.comp.shift()),n.push(SemanticProcessor.tableToMatrixOrVector_(o));n=n.concat(e.comp.shift()),e=SemanticUtil$2.partitionNodes(n,SemanticPred$3.isTableOrMultiline),n=[];for(let i=0,o;o=e.rel[i];i++){const a=e.comp.shift();SemanticPred$3.tableIsCases(o,a)&&SemanticProcessor.tableToCases_(o,a.pop()),n=n.concat(a),n.push(o)}return n.concat(e.comp.shift())}mfenced(r,e,n,i){if(n&&i.length>0){const o=SemanticProcessor.nextSeparatorFunction_(n),a=[i.shift()];i.forEach(s=>{a.push(SemanticProcessor.getInstance().factory_.makeContentNode(o())),a.push(s)}),i=a}return r&&e?SemanticProcessor.getInstance().horizontalFencedNode_(SemanticProcessor.getInstance().factory_.makeContentNode(r),SemanticProcessor.getInstance().factory_.makeContentNode(e),i):(r&&i.unshift(SemanticProcessor.getInstance().factory_.makeContentNode(r)),e&&i.push(SemanticProcessor.getInstance().factory_.makeContentNode(e)),SemanticProcessor.getInstance().row(i))}fractionLikeNode(r,e,n,i){let o;if(!i&&SemanticUtil$2.isZeroLength(n)){const a=SemanticProcessor.getInstance().factory_.makeBranchNode("line",[r],[]),s=SemanticProcessor.getInstance().factory_.makeBranchNode("line",[e],[]);return o=SemanticProcessor.getInstance().factory_.makeBranchNode("multiline",[a,s],[]),SemanticProcessor.binomialForm_(o),SemanticProcessor.classifyMultiline(o),o}else return o=SemanticProcessor.getInstance().fractionNode_(r,e),i&&o.addAnnotation("general","bevelled"),o}tensor(r,e,n,i,o){const a=SemanticProcessor.getInstance().factory_.makeBranchNode("tensor",[r,SemanticProcessor.getInstance().scriptNode_(e,"leftsub"),SemanticProcessor.getInstance().scriptNode_(n,"leftsuper"),SemanticProcessor.getInstance().scriptNode_(i,"rightsub"),SemanticProcessor.getInstance().scriptNode_(o,"rightsuper")],[]);return a.role=r.role,a.embellished=SemanticPred$3.isEmbellished(r),a}pseudoTensor(r,e,n){const i=c=>!SemanticPred$3.isType(c,"empty"),o=e.filter(i).length,a=n.filter(i).length;if(!o&&!a)return r;const s=o?a?"MSUBSUP":"MSUB":"MSUP",l=[r];return o&&l.push(SemanticProcessor.getInstance().scriptNode_(e,"rightsub",!0)),a&&l.push(SemanticProcessor.getInstance().scriptNode_(n,"rightsuper",!0)),SemanticProcessor.getInstance().limitNode(s,l)}font(r){const e=SemanticProcessor.MATHJAX_FONTS[r];return e||r}proof(r,e,n){if(!e.inference&&!e.axiom&&console.log("Noise"),e.axiom){const o=SemanticProcessor.getInstance().cleanInference(r.childNodes),a=o.length?SemanticProcessor.getInstance().factory_.makeBranchNode("inference",n(o),[]):SemanticProcessor.getInstance().factory_.makeEmptyNode();return a.role="axiom",a.mathmlTree=r,a}const i=SemanticProcessor.getInstance().inference(r,e,n);return e.proof&&(i.role="proof",i.childNodes[0].role="final"),i}inference(r,e,n){if(e.inferenceRule){const c=SemanticProcessor.getInstance().getFormulas(r,[],n);return SemanticProcessor.getInstance().factory_.makeBranchNode("inference",[c.conclusion,c.premises],[])}const i=e.labelledRule,o=DomUtil$n.toArray(r.childNodes),a=[];(i==="left"||i==="both")&&a.push(SemanticProcessor.getInstance().getLabel(r,o,n,"left")),(i==="right"||i==="both")&&a.push(SemanticProcessor.getInstance().getLabel(r,o,n,"right"));const s=SemanticProcessor.getInstance().getFormulas(r,o,n),l=SemanticProcessor.getInstance().factory_.makeBranchNode("inference",[s.conclusion,s.premises],a);return l.mathmlTree=r,l}getLabel(r,e,n,i){const o=SemanticProcessor.getInstance().findNestedRow(e,"prooflabel",i),a=SemanticProcessor.getInstance().factory_.makeBranchNode("rulelabel",n(DomUtil$n.toArray(o.childNodes)),[]);return a.role=i,a.mathmlTree=o,a}getFormulas(r,e,n){const i=e.length?SemanticProcessor.getInstance().findNestedRow(e,"inferenceRule"):r,o=SemanticProcessor.getSemantics(i).inferenceRule==="up",a=o?i.childNodes[1]:i.childNodes[0],s=o?i.childNodes[0]:i.childNodes[1],l=a.childNodes[0].childNodes[0],c=DomUtil$n.toArray(l.childNodes[0].childNodes),f=[];let d=1;for(const y of c)d%2&&f.push(y.childNodes[0]),d++;const u=n(f),m=n(DomUtil$n.toArray(s.childNodes[0].childNodes))[0],p=SemanticProcessor.getInstance().factory_.makeBranchNode("premises",u,[]);p.mathmlTree=l;const _=SemanticProcessor.getInstance().factory_.makeBranchNode("conclusion",[m],[]);return _.mathmlTree=s.childNodes[0].childNodes[0],{conclusion:_,premises:p}}findNestedRow(r,e,n){return SemanticProcessor.getInstance().findNestedRow_(r,e,0,n)}cleanInference(r){return DomUtil$n.toArray(r).filter(function(e){return DomUtil$n.tagName(e)!=="MSPACE"})}operatorNode(r){return r.type==="unknown"&&(r.type="operator"),SemanticHeuristics$1.run("multioperator",r)}implicitNode_(r){const e=SemanticProcessor.getInstance().factory_.makeMultipleContentNodes(r.length-1,SemanticAttr$1.invisibleTimes());SemanticProcessor.matchSpaces_(r,e);const n=SemanticProcessor.getInstance().infixNode_(r,e[0]);return n.role="implicit",e.forEach(function(i){i.parent=n}),n.contentNodes=e,n}infixNode_(r,e){const n=SemanticProcessor.getInstance().factory_.makeBranchNode("infixop",r,[e],SemanticUtil$2.getEmbellishedInner(e).textContent);return n.role=e.role,SemanticHeuristics$1.run("propagateSimpleFunction",n)}explicitMixed_(r){const e=SemanticUtil$2.partitionNodes(r,function(i){return i.textContent===SemanticAttr$1.invisiblePlus()});if(!e.rel.length)return r;let n=[];for(let i=0,o;o=e.rel[i];i++){const a=e.comp[i],s=e.comp[i+1],l=a.length-1;if(a[l]&&s[0]&&SemanticPred$3.isType(a[l],"number")&&!SemanticPred$3.isRole(a[l],"mixed")&&SemanticPred$3.isType(s[0],"fraction")){const c=SemanticProcessor.getInstance().factory_.makeBranchNode("number",[a[l],s[0]],[]);c.role="mixed",n=n.concat(a.slice(0,l)),n.push(c),s.shift()}else n=n.concat(a),n.push(o)}return n.concat(e.comp[e.comp.length-1])}concatNode_(r,e,n){if(e.length===0)return r;const i=e.map(function(a){return SemanticUtil$2.getEmbellishedInner(a).textContent}).join(" "),o=SemanticProcessor.getInstance().factory_.makeBranchNode(n,[r],e,i);return e.length>1&&(o.role="multiop"),o}prefixNode_(r,e){const n=SemanticUtil$2.partitionNodes(e,o=>SemanticPred$3.isRole(o,"subtraction"));let i=SemanticProcessor.getInstance().concatNode_(r,n.comp.pop(),"prefixop");for(i.contentNodes.length===1&&i.contentNodes[0].role==="addition"&&i.contentNodes[0].textContent==="+"&&(i.role="positive");n.rel.length>0;)i=SemanticProcessor.getInstance().concatNode_(i,[n.rel.pop()],"prefixop"),i.role="negative",i=SemanticProcessor.getInstance().concatNode_(i,n.comp.pop(),"prefixop");return i}postfixNode_(r,e){return e.length?SemanticProcessor.getInstance().concatNode_(r,e,"postfixop"):r}combineUnits_(r){const e=SemanticUtil$2.partitionNodes(r,function(a){return!SemanticPred$3.isRole(a,"unit")});if(r.length===e.rel.length)return e.rel;const n=[];let i,o;do{const a=e.comp.shift();i=e.rel.shift();let s=null;o=n.pop(),o&&(!a.length||!SemanticPred$3.isUnitCounter(o)?n.push(o):a.unshift(o)),a.length===1&&(s=a.pop()),a.length>1&&(s=SemanticProcessor.getInstance().implicitNode_(a),s.role="unit"),s&&n.push(s),i&&n.push(i)}while(i);return n}getMixedNumbers_(r){const e=SemanticUtil$2.partitionNodes(r,function(i){return SemanticPred$3.isType(i,"fraction")&&SemanticPred$3.isRole(i,"vulgar")});if(!e.rel.length)return r;let n=[];for(let i=0,o;o=e.rel[i];i++){const a=e.comp[i],s=a.length-1;if(a[s]&&SemanticPred$3.isType(a[s],"number")&&(SemanticPred$3.isRole(a[s],"integer")||SemanticPred$3.isRole(a[s],"float"))){const l=SemanticProcessor.getInstance().factory_.makeBranchNode("number",[a[s],o],[]);l.role="mixed",n=n.concat(a.slice(0,s)),n.push(l)}else n=n.concat(a),n.push(o)}return n.concat(e.comp[e.comp.length-1])}getTextInRow_(r){if(r.length<=1)return r;const e=SemanticUtil$2.partitionNodes(r,o=>SemanticPred$3.isType(o,"text"));if(e.rel.length===0)return r;const n=[];let i=e.comp[0];i.length>0&&n.push(SemanticProcessor.getInstance().row(i));for(let o=0,a;a=e.rel[o];o++)n.push(a),i=e.comp[o+1],i.length>0&&n.push(SemanticProcessor.getInstance().row(i));return[SemanticProcessor.getInstance().dummyNode_(n)]}relationsInRow_(r){const e=SemanticUtil$2.partitionNodes(r,SemanticPred$3.isRelation),n=e.rel[0];if(!n)return SemanticProcessor.getInstance().operationsInRow_(r);if(r.length===1)return r[0];const i=e.comp.map(SemanticProcessor.getInstance().operationsInRow_);let o;return e.rel.some(function(a){return!a.equals(n)})?(o=SemanticProcessor.getInstance().factory_.makeBranchNode("multirel",i,e.rel),e.rel.every(function(a){return a.role===n.role})&&(o.role=n.role),o):(o=SemanticProcessor.getInstance().factory_.makeBranchNode("relseq",i,e.rel,SemanticUtil$2.getEmbellishedInner(n).textContent),o.role=n.role,o)}operationsInRow_(r){if(r.length===0)return SemanticProcessor.getInstance().factory_.makeEmptyNode();if(r=SemanticProcessor.getInstance().explicitMixed_(r),r.length===1)return r[0];const e=[];for(;r.length>0&&SemanticPred$3.isOperator(r[0]);)e.push(r.shift());if(r.length===0)return SemanticProcessor.getInstance().prefixNode_(e.pop(),e);if(r.length===1)return SemanticProcessor.getInstance().prefixNode_(r[0],e);r=SemanticHeuristics$1.run("convert_juxtaposition",r);const n=SemanticUtil$2.sliceNodes(r,SemanticPred$3.isOperator),i=SemanticProcessor.getInstance().prefixNode_(SemanticProcessor.getInstance().implicitNode(n.head),e);return n.div?SemanticProcessor.getInstance().operationsTree_(n.tail,i,n.div):i}operationsTree_(r,e,n,i){const o=i||[];if(r.length===0){if(o.unshift(n),e.type==="infixop"){const c=SemanticProcessor.getInstance().postfixNode_(e.childNodes.pop(),o);return e.appendChild(c),e}return SemanticProcessor.getInstance().postfixNode_(e,o)}const a=SemanticUtil$2.sliceNodes(r,SemanticPred$3.isOperator);if(a.head.length===0)return o.push(a.div),SemanticProcessor.getInstance().operationsTree_(a.tail,e,n,o);const s=SemanticProcessor.getInstance().prefixNode_(SemanticProcessor.getInstance().implicitNode(a.head),o),l=SemanticProcessor.getInstance().appendOperand_(e,n,s);return a.div?SemanticProcessor.getInstance().operationsTree_(a.tail,l,a.div,[]):l}appendOperand_(r,e,n){if(r.type!=="infixop")return SemanticProcessor.getInstance().infixNode_([r,n],e);const i=SemanticProcessor.getInstance().appendDivisionOp_(r,e,n);return i||(SemanticProcessor.getInstance().appendExistingOperator_(r,e,n)?r:e.role==="multiplication"?SemanticProcessor.getInstance().appendMultiplicativeOp_(r,e,n):SemanticProcessor.getInstance().appendAdditiveOp_(r,e,n))}appendDivisionOp_(r,e,n){return e.role==="division"?SemanticPred$3.isImplicit(r)?SemanticProcessor.getInstance().infixNode_([r,n],e):SemanticProcessor.getInstance().appendLastOperand_(r,e,n):r.role==="division"?SemanticProcessor.getInstance().infixNode_([r,n],e):null}appendLastOperand_(r,e,n){let i=r,o=r.childNodes[r.childNodes.length-1];for(;o&&o.type==="infixop"&&!SemanticPred$3.isImplicit(o);)i=o,o=i.childNodes[r.childNodes.length-1];const a=SemanticProcessor.getInstance().infixNode_([i.childNodes.pop(),n],e);return i.appendChild(a),r}appendMultiplicativeOp_(r,e,n){if(SemanticPred$3.isImplicit(r))return SemanticProcessor.getInstance().infixNode_([r,n],e);let i=r,o=r.childNodes[r.childNodes.length-1];for(;o&&o.type==="infixop"&&!SemanticPred$3.isImplicit(o);)i=o,o=i.childNodes[r.childNodes.length-1];const a=SemanticProcessor.getInstance().infixNode_([i.childNodes.pop(),n],e);return i.appendChild(a),r}appendAdditiveOp_(r,e,n){return SemanticProcessor.getInstance().infixNode_([r,n],e)}appendExistingOperator_(r,e,n){return!r||r.type!=="infixop"||SemanticPred$3.isImplicit(r)?!1:r.contentNodes[0].equals(e)?(r.appendContentNode(e),r.appendChild(n),!0):SemanticProcessor.getInstance().appendExistingOperator_(r.childNodes[r.childNodes.length-1],e,n)}getFencesInRow_(r){let e=SemanticUtil$2.partitionNodes(r,SemanticPred$3.isFence);e=SemanticProcessor.purgeFences_(e);const n=e.comp.shift();return SemanticProcessor.getInstance().fences_(e.rel,e.comp,[],[n])}fences_(r,e,n,i){if(r.length===0&&n.length===0)return i[0];const o=c=>SemanticPred$3.isRole(c,"open");if(r.length===0){const c=i.shift();for(;n.length>0;){if(o(n[0])){const f=n.shift();SemanticProcessor.fenceToPunct_(f),c.push(f)}else{const f=SemanticUtil$2.sliceNodes(n,o),d=f.head.length-1,u=SemanticProcessor.getInstance().neutralFences_(f.head,i.slice(0,d));i=i.slice(d),c.push(...u),f.div&&f.tail.unshift(f.div),n=f.tail}c.push(...i.shift())}return c}const a=n[n.length-1],s=r[0].role;if(s==="open"||SemanticPred$3.isNeutralFence(r[0])&&!(a&&SemanticPred$3.compareNeutralFences(r[0],a))){n.push(r.shift());const c=e.shift();return c&&i.push(c),SemanticProcessor.getInstance().fences_(r,e,n,i)}if(a&&s==="close"&&a.role==="open"){const c=SemanticProcessor.getInstance().horizontalFencedNode_(n.pop(),r.shift(),i.pop());return i.push(i.pop().concat([c],e.shift())),SemanticProcessor.getInstance().fences_(r,e,n,i)}if(a&&SemanticPred$3.compareNeutralFences(r[0],a)){if(!SemanticPred$3.elligibleLeftNeutral(a)||!SemanticPred$3.elligibleRightNeutral(r[0])){n.push(r.shift());const f=e.shift();return f&&i.push(f),SemanticProcessor.getInstance().fences_(r,e,n,i)}const c=SemanticProcessor.getInstance().horizontalFencedNode_(n.pop(),r.shift(),i.pop());return i.push(i.pop().concat([c],e.shift())),SemanticProcessor.getInstance().fences_(r,e,n,i)}if(a&&s==="close"&&SemanticPred$3.isNeutralFence(a)&&n.some(o)){const c=SemanticUtil$2.sliceNodes(n,o,!0),f=i.pop(),d=i.length-c.tail.length+1,u=SemanticProcessor.getInstance().neutralFences_(c.tail,i.slice(d));i=i.slice(0,d);const m=SemanticProcessor.getInstance().horizontalFencedNode_(c.div,r.shift(),i.pop().concat(u,f));return i.push(i.pop().concat([m],e.shift())),SemanticProcessor.getInstance().fences_(r,e,c.head,i)}const l=r.shift();return SemanticProcessor.fenceToPunct_(l),i.push(i.pop().concat([l],e.shift())),SemanticProcessor.getInstance().fences_(r,e,n,i)}neutralFences_(r,e){if(r.length===0)return r;if(r.length===1)return SemanticProcessor.fenceToPunct_(r[0]),r;const n=r.shift();if(!SemanticPred$3.elligibleLeftNeutral(n)){SemanticProcessor.fenceToPunct_(n);const a=e.shift();return a.unshift(n),a.concat(SemanticProcessor.getInstance().neutralFences_(r,e))}const i=SemanticUtil$2.sliceNodes(r,function(a){return SemanticPred$3.compareNeutralFences(a,n)});if(!i.div){SemanticProcessor.fenceToPunct_(n);const a=e.shift();return a.unshift(n),a.concat(SemanticProcessor.getInstance().neutralFences_(r,e))}if(!SemanticPred$3.elligibleRightNeutral(i.div))return SemanticProcessor.fenceToPunct_(i.div),r.unshift(n),SemanticProcessor.getInstance().neutralFences_(r,e);const o=SemanticProcessor.getInstance().combineFencedContent_(n,i.div,i.head,e);if(i.tail.length>0){const a=o.shift(),s=SemanticProcessor.getInstance().neutralFences_(i.tail,o);return a.concat(s)}return o[0]}combineFencedContent_(r,e,n,i){if(n.length===0){const d=SemanticProcessor.getInstance().horizontalFencedNode_(r,e,i.shift());return i.length>0?i[0].unshift(d):i=[[d]],i}const o=i.shift(),a=n.length-1,s=i.slice(0,a);i=i.slice(a);const l=i.shift(),c=SemanticProcessor.getInstance().neutralFences_(n,s);o.push(...c),o.push(...l);const f=SemanticProcessor.getInstance().horizontalFencedNode_(r,e,o);return i.length>0?i[0].unshift(f):i=[[f]],i}horizontalFencedNode_(r,e,n){const i=SemanticProcessor.getInstance().row(n);let o=SemanticProcessor.getInstance().factory_.makeBranchNode("fenced",[i],[r,e]);return r.role==="open"?(SemanticProcessor.getInstance().classifyHorizontalFence_(o),o=SemanticHeuristics$1.run("propagateComposedFunction",o)):o.role=r.role,o=SemanticHeuristics$1.run("detect_cycle",o),SemanticProcessor.rewriteFencedNode_(o)}classifyHorizontalFence_(r){r.role="leftright";const e=r.childNodes;if(!SemanticPred$3.isSetNode(r)||e.length>1)return;if(e.length===0||e[0].type==="empty"){r.role="set empty";return}const n=e[0].type;if(e.length===1&&SemanticPred$3.isSingletonSetContent(e[0])){r.role="set singleton";return}const i=e[0].role;if(!(n!=="punctuated"||i!=="sequence")){if(e[0].contentNodes[0].role==="comma"){r.role="set collection";return}if(e[0].contentNodes.length===1&&(e[0].contentNodes[0].role==="vbar"||e[0].contentNodes[0].role==="colon")){r.role="set extended",SemanticProcessor.getInstance().setExtension_(r);return}}}setExtension_(r){const e=r.childNodes[0].childNodes[0];e&&e.type==="infixop"&&e.contentNodes.length===1&&SemanticPred$3.isMembership(e.contentNodes[0])&&(e.addAnnotation("set","intensional"),e.contentNodes[0].addAnnotation("set","intensional"))}getPunctuationInRow_(r){if(r.length<=1)return r;const e=s=>{const l=s.type;return l==="punctuation"||l==="text"||l==="operator"||l==="relation"},n=SemanticUtil$2.partitionNodes(r,function(s){if(!SemanticPred$3.isPunctuation(s))return!1;if(SemanticPred$3.isPunctuation(s)&&!SemanticPred$3.isRole(s,"ellipsis"))return!0;const l=r.indexOf(s);if(l===0)return!(r[1]&&e(r[1]));const c=r[l-1];if(l===r.length-1)return!e(c);const f=r[l+1];return!(e(c)&&e(f))});if(n.rel.length===0)return r;const i=[];let o=n.comp.shift();o.length>0&&i.push(SemanticProcessor.getInstance().row(o));let a=0;for(;n.comp.length>0;)i.push(n.rel[a++]),o=n.comp.shift(),o.length>0&&i.push(SemanticProcessor.getInstance().row(o));return[SemanticProcessor.getInstance().punctuatedNode_(i,n.rel)]}punctuatedNode_(r,e){const n=SemanticProcessor.getInstance().factory_.makeBranchNode("punctuated",r,e);if(e.length===r.length){const i=e[0].role;if(i!=="unknown"&&e.every(function(o){return o.role===i}))return n.role=i,n}return SemanticPred$3.singlePunctAtPosition(r,e,0)?n.role="startpunct":SemanticPred$3.singlePunctAtPosition(r,e,r.length-1)?n.role="endpunct":e.every(i=>SemanticPred$3.isRole(i,"dummy"))?n.role="text":e.every(i=>SemanticPred$3.isRole(i,"space"))?n.role="space":n.role="sequence",n}dummyNode_(r){const e=SemanticProcessor.getInstance().factory_.makeMultipleContentNodes(r.length-1,SemanticAttr$1.invisibleComma());return e.forEach(function(n){n.role="dummy"}),SemanticProcessor.getInstance().punctuatedNode_(r,e)}accentRole_(r,e){if(!SemanticPred$3.isAccent(r))return!1;const n=r.textContent,i=SemanticAttr$1.lookupSecondary("bar",n)||SemanticAttr$1.lookupSecondary("tilde",n)||r.role;return r.role=e==="underscore"?"underaccent":"overaccent",r.addAnnotation("accent",i),!0}accentNode_(r,e,n,i,o){e=e.slice(0,i+1);const a=e[1],s=e[2];let l;if(!o&&s&&(l=SemanticProcessor.getInstance().factory_.makeBranchNode("subscript",[r,a],[]),l.role="subsup",e=[l,s],n="superscript"),o){const c=SemanticProcessor.getInstance().accentRole_(a,n);s&&(SemanticProcessor.getInstance().accentRole_(s,"overscore")&&!c?(l=SemanticProcessor.getInstance().factory_.makeBranchNode("overscore",[r,s],[]),e=[l,a],n="underscore"):(l=SemanticProcessor.getInstance().factory_.makeBranchNode("underscore",[r,a],[]),e=[l,s],n="overscore"),l.role="underover")}return SemanticProcessor.getInstance().makeLimitNode_(r,e,l,n)}makeLimitNode_(r,e,n,i){if(i==="limupper"&&r.type==="limlower")return r.childNodes.push(e[1]),e[1].parent=r,r.type="limboth",r;if(i==="limlower"&&r.type==="limupper")return r.childNodes.splice(1,-1,e[1]),e[1].parent=r,r.type="limboth",r;const o=SemanticProcessor.getInstance().factory_.makeBranchNode(i,e,[]),a=SemanticPred$3.isEmbellished(r);return n&&(n.embellished=a),o.embellished=a,o.role=r.role,o}getFunctionsInRow_(r,e){const n=e||[];if(r.length===0)return n;const i=r.shift(),o=SemanticProcessor.classifyFunction_(i,r);if(!o)return n.push(i),SemanticProcessor.getInstance().getFunctionsInRow_(r,n);const a=SemanticProcessor.getInstance().getFunctionsInRow_(r,[]),s=SemanticProcessor.getInstance().getFunctionArgs_(i,a,o);return n.concat(s)}getFunctionArgs_(r,e,n){let i,o,a;switch(n){case"integral":{const s=SemanticProcessor.getInstance().getIntegralArgs_(e);if(!s.intvar&&!s.integrand.length)return s.rest.unshift(r),s.rest;const l=SemanticProcessor.getInstance().row(s.integrand);return a=SemanticProcessor.getInstance().integralNode_(r,l,s.intvar),s.rest.unshift(a),s.rest}case"prefix":{if(e[0]&&e[0].type==="fenced"){const s=e.shift();return SemanticPred$3.isNeutralFence(s)||(s.role="leftright"),a=SemanticProcessor.getInstance().functionNode_(r,s),e.unshift(a),e}if(i=SemanticUtil$2.sliceNodes(e,SemanticPred$3.isPrefixFunctionBoundary),i.head.length)o=SemanticProcessor.getInstance().row(i.head),i.div&&i.tail.unshift(i.div);else{if(!i.div||!SemanticPred$3.isType(i.div,"appl"))return e.unshift(r),e;o=i.div}return a=SemanticProcessor.getInstance().functionNode_(r,o),i.tail.unshift(a),i.tail}case"bigop":return i=SemanticUtil$2.sliceNodes(e,SemanticPred$3.isBigOpBoundary),i.head.length?(o=SemanticProcessor.getInstance().row(i.head),a=SemanticProcessor.getInstance().bigOpNode_(r,o),i.div&&i.tail.unshift(i.div),i.tail.unshift(a),i.tail):(e.unshift(r),e);case"simple":default:{if(e.length===0)return[r];const s=e[0];return s.type==="fenced"&&!SemanticPred$3.isNeutralFence(s)&&SemanticPred$3.isSimpleFunctionScope(s)?(s.role="leftright",SemanticProcessor.propagateFunctionRole_(r,"simple function"),a=SemanticProcessor.getInstance().functionNode_(r,e.shift()),e.unshift(a),e):(e.unshift(r),e)}}}getIntegralArgs_(r,e=[]){if(r.length===0)return{integrand:e,intvar:null,rest:r};const n=r[0];if(SemanticPred$3.isGeneralFunctionBoundary(n))return{integrand:e,intvar:null,rest:r};if(SemanticPred$3.isIntegralDxBoundarySingle(n))return n.role="integral",{integrand:e,intvar:n,rest:r.slice(1)};if(r[1]&&SemanticPred$3.isIntegralDxBoundary(n,r[1])){const i=SemanticProcessor.getInstance().prefixNode_(r[1],[n]);return i.role="integral",{integrand:e,intvar:i,rest:r.slice(2)}}return e.push(r.shift()),SemanticProcessor.getInstance().getIntegralArgs_(r,e)}functionNode_(r,e){const n=SemanticProcessor.getInstance().factory_.makeContentNode(SemanticAttr$1.functionApplication()),i=SemanticProcessor.getInstance().funcAppls[r.id];i&&(n.mathmlTree=i.mathmlTree,n.mathml=i.mathml,n.annotation=i.annotation,n.attributes=i.attributes,delete SemanticProcessor.getInstance().funcAppls[r.id]),n.type="punctuation",n.role="application";const o=SemanticProcessor.getFunctionOp_(r,function(a){return SemanticPred$3.isType(a,"function")||SemanticPred$3.isType(a,"identifier")&&SemanticPred$3.isRole(a,"simple function")});return SemanticProcessor.getInstance().functionalNode_("appl",[r,e],o,[n])}bigOpNode_(r,e){const n=SemanticProcessor.getFunctionOp_(r,i=>SemanticPred$3.isType(i,"largeop"));return SemanticProcessor.getInstance().functionalNode_("bigop",[r,e],n,[])}integralNode_(r,e,n){e=e||SemanticProcessor.getInstance().factory_.makeEmptyNode(),n=n||SemanticProcessor.getInstance().factory_.makeEmptyNode();const i=SemanticProcessor.getFunctionOp_(r,o=>SemanticPred$3.isType(o,"largeop"));return SemanticProcessor.getInstance().functionalNode_("integral",[r,e,n],i,[])}functionalNode_(r,e,n,i){const o=e[0];let a;n&&(a=n.parent,i.push(n));const s=SemanticProcessor.getInstance().factory_.makeBranchNode(r,e,i);return s.role=o.role,a&&(n.parent=a),s}fractionNode_(r,e){const n=SemanticProcessor.getInstance().factory_.makeBranchNode("fraction",[r,e],[]);return n.role=n.childNodes.every(function(i){return SemanticPred$3.isType(i,"number")&&SemanticPred$3.isRole(i,"integer")})?"vulgar":n.childNodes.every(SemanticPred$3.isPureUnit)?"unit":"division",SemanticHeuristics$1.run("propagateSimpleFunction",n)}scriptNode_(r,e,n){let i;switch(r.length){case 0:i=SemanticProcessor.getInstance().factory_.makeEmptyNode();break;case 1:if(i=r[0],n)return i;break;default:i=SemanticProcessor.getInstance().dummyNode_(r)}return i.role=e,i}findNestedRow_(r,e,n,i){if(n>3)return null;for(let o=0,a;a=r[o];o++){const s=DomUtil$n.tagName(a);if(s!=="MSPACE"){if(s==="MROW")return SemanticProcessor.getInstance().findNestedRow_(DomUtil$n.toArray(a.childNodes),e,n+1,i);if(SemanticProcessor.findSemantics(a,e,i))return a}}return null}}semantic_processor.default=SemanticProcessor;SemanticProcessor.FENCE_TO_PUNCT_={metric:"metric",neutral:"vbar",open:"openfence",close:"closefence"};SemanticProcessor.MML_TO_LIMIT_={MSUB:{type:"limlower",length:1},MUNDER:{type:"limlower",length:1},MSUP:{type:"limupper",length:1},MOVER:{type:"limupper",length:1},MSUBSUP:{type:"limboth",length:2},MUNDEROVER:{type:"limboth",length:2}};SemanticProcessor.MML_TO_BOUNDS_={MSUB:{type:"subscript",length:1,accent:!1},MSUP:{type:"superscript",length:1,accent:!1},MSUBSUP:{type:"subscript",length:2,accent:!1},MUNDER:{type:"underscore",length:1,accent:!0},MOVER:{type:"overscore",length:1,accent:!0},MUNDEROVER:{type:"underscore",length:2,accent:!0}};SemanticProcessor.CLASSIFY_FUNCTION_={integral:"integral",sum:"bigop","prefix function":"prefix","limit function":"prefix","simple function":"prefix","composed function":"prefix"};SemanticProcessor.MATHJAX_FONTS={"-tex-caligraphic":"caligraphic","-tex-caligraphic-bold":"caligraphic-bold","-tex-calligraphic":"caligraphic","-tex-calligraphic-bold":"caligraphic-bold","-tex-oldstyle":"oldstyle","-tex-oldstyle-bold":"oldstyle-bold","-tex-mathit":"italic"};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.smallRoot=t.generateTensorRules=t.removeParens=t.generateBaselineConstraint=t.determinantIsSimple=t.nestedOverscript=t.endscripts=t.overscoreNestingDepth=t.nestedUnderscript=t.underscoreNestingDepth=t.indexRadicalSbrief=t.openingRadicalSbrief=t.indexRadicalBrief=t.closingRadicalBrief=t.openingRadicalBrief=t.indexRadicalVerbose=t.closingRadicalVerbose=t.openingRadicalVerbose=t.getRootIndex=t.nestedRadical=t.radicalNestingDepth=t.baselineBrief=t.baselineVerbose=t.superscriptBrief=t.superscriptVerbose=t.subscriptBrief=t.subscriptVerbose=t.nestedSubSuper=t.isSmallVulgarFraction=t.overFractionSbrief=t.closingFractionSbrief=t.openingFractionSbrief=t.closingFractionBrief=t.openingFractionBrief=t.overFractionVerbose=t.closingFractionVerbose=t.openingFractionVerbose=t.nestedFraction=t.fractionNestingDepth=t.computeNestingDepth_=t.containsAttr=t.getNestingDepth=t.resetNestingDepth=t.nestingBarriers=t.spaceoutIdentifier=t.spaceoutNumber=t.spaceoutNodes=t.spaceoutText=void 0;const r=base_util,e=dom_util,n=xpath_util,i=locale$d,o=semantic_processor;let a={};function s(U){return Array.from(U.textContent).join(" ")}t.spaceoutText=s;function l(U,J){const ot=Array.from(U.textContent),rt=[],nt=o.default.getInstance(),at=U.ownerDocument;for(let ut=0,dt;dt=ot[ut];ut++){const mt=nt.getNodeFactory().makeLeafNode(dt,"unknown"),pt=nt.identifierNode(mt,"unknown","");J(pt),rt.push(pt.xml(at))}return rt}t.spaceoutNodes=l;function c(U){return l(U,function(J){J.textContent.match(/\W/)||(J.type="number")})}t.spaceoutNumber=c;function f(U){return l(U,function(J){J.font="unknown",J.type="identifier"})}t.spaceoutIdentifier=f,t.nestingBarriers=["cases","cell","integral","line","matrix","multiline","overscore","root","row","sqrt","subscript","superscript","table","underscore","vector"];function d(U){return a={},[U]}t.resetNestingDepth=d;function u(U,J,ot,rt,nt,at){rt=rt||t.nestingBarriers,nt=nt||{},at=at||function(mt){return!1};const ut=e.serializeXml(J);if(a[U]||(a[U]={}),a[U][ut])return a[U][ut];if(at(J)||ot.indexOf(J.tagName)<0)return 0;const dt=p(J,ot,r.setdifference(rt,ot),nt,at,0);return a[U][ut]=dt,dt}t.getNestingDepth=u;function m(U,J){if(!U.attributes)return!1;const ot=e.toArray(U.attributes);for(let rt=0,nt;nt=ot[rt];rt++)if(J[nt.nodeName]===nt.nodeValue)return!0;return!1}t.containsAttr=m;function p(U,J,ot,rt,nt,at){if(nt(U)||ot.indexOf(U.tagName)>-1||m(U,rt)||(J.indexOf(U.tagName)>-1&&at++,!U.childNodes||U.childNodes.length===0))return at;const ut=e.toArray(U.childNodes);return Math.max.apply(null,ut.map(function(dt){return p(dt,J,ot,rt,nt,at)}))}t.computeNestingDepth_=p;function _(U){return u("fraction",U,["fraction"],t.nestingBarriers,{},i.LOCALE.FUNCTIONS.fracNestDepth)}t.fractionNestingDepth=_;function y(U,J,ot){const rt=_(U),nt=Array(rt).fill(J);return ot&&nt.push(ot),nt.join(i.LOCALE.MESSAGES.regexp.JOINER_FRAC)}t.nestedFraction=y;function g(U){return y(U,i.LOCALE.MESSAGES.MS.START,i.LOCALE.MESSAGES.MS.FRAC_V)}t.openingFractionVerbose=g;function v(U){return y(U,i.LOCALE.MESSAGES.MS.END,i.LOCALE.MESSAGES.MS.FRAC_V)}t.closingFractionVerbose=v;function x(U){return y(U,i.LOCALE.MESSAGES.MS.FRAC_OVER)}t.overFractionVerbose=x;function b(U){return y(U,i.LOCALE.MESSAGES.MS.START,i.LOCALE.MESSAGES.MS.FRAC_B)}t.openingFractionBrief=b;function S(U){return y(U,i.LOCALE.MESSAGES.MS.END,i.LOCALE.MESSAGES.MS.FRAC_B)}t.closingFractionBrief=S;function M(U){const J=_(U);return J===1?i.LOCALE.MESSAGES.MS.FRAC_S:i.LOCALE.FUNCTIONS.combineNestedFraction(i.LOCALE.MESSAGES.MS.NEST_FRAC,i.LOCALE.FUNCTIONS.radicalNestDepth(J-1),i.LOCALE.MESSAGES.MS.FRAC_S)}t.openingFractionSbrief=M;function C(U){const J=_(U);return J===1?i.LOCALE.MESSAGES.MS.ENDFRAC:i.LOCALE.FUNCTIONS.combineNestedFraction(i.LOCALE.MESSAGES.MS.NEST_FRAC,i.LOCALE.FUNCTIONS.radicalNestDepth(J-1),i.LOCALE.MESSAGES.MS.ENDFRAC)}t.closingFractionSbrief=C;function A(U){const J=_(U);return J===1?i.LOCALE.MESSAGES.MS.FRAC_OVER:i.LOCALE.FUNCTIONS.combineNestedFraction(i.LOCALE.MESSAGES.MS.NEST_FRAC,i.LOCALE.FUNCTIONS.radicalNestDepth(J-1),i.LOCALE.MESSAGES.MS.FRAC_OVER)}t.overFractionSbrief=A;function E(U){return i.LOCALE.FUNCTIONS.fracNestDepth(U)?[U]:[]}t.isSmallVulgarFraction=E;function $(U,J,ot){for(;U.parentNode;){const rt=U.parentNode,nt=rt.parentNode;if(!nt)break;const at=U.getAttribute&&U.getAttribute("role");(nt.tagName==="subscript"&&U===rt.childNodes[1]||nt.tagName==="tensor"&&at&&(at==="leftsub"||at==="rightsub"))&&(J=ot.sub+i.LOCALE.MESSAGES.regexp.JOINER_SUBSUPER+J),(nt.tagName==="superscript"&&U===rt.childNodes[1]||nt.tagName==="tensor"&&at&&(at==="leftsuper"||at==="rightsuper"))&&(J=ot.sup+i.LOCALE.MESSAGES.regexp.JOINER_SUBSUPER+J),U=nt}return J.trim()}t.nestedSubSuper=$;function D(U){return $(U,i.LOCALE.MESSAGES.MS.SUBSCRIPT,{sup:i.LOCALE.MESSAGES.MS.SUPER,sub:i.LOCALE.MESSAGES.MS.SUB})}t.subscriptVerbose=D;function B(U){return $(U,i.LOCALE.MESSAGES.MS.SUB,{sup:i.LOCALE.MESSAGES.MS.SUP,sub:i.LOCALE.MESSAGES.MS.SUB})}t.subscriptBrief=B;function F(U){return $(U,i.LOCALE.MESSAGES.MS.SUPERSCRIPT,{sup:i.LOCALE.MESSAGES.MS.SUPER,sub:i.LOCALE.MESSAGES.MS.SUB})}t.superscriptVerbose=F;function I(U){return $(U,i.LOCALE.MESSAGES.MS.SUP,{sup:i.LOCALE.MESSAGES.MS.SUP,sub:i.LOCALE.MESSAGES.MS.SUB})}t.superscriptBrief=I;function H(U){const J=$(U,"",{sup:i.LOCALE.MESSAGES.MS.SUPER,sub:i.LOCALE.MESSAGES.MS.SUB});return J?J.replace(new RegExp(i.LOCALE.MESSAGES.MS.SUB+"$"),i.LOCALE.MESSAGES.MS.SUBSCRIPT).replace(new RegExp(i.LOCALE.MESSAGES.MS.SUPER+"$"),i.LOCALE.MESSAGES.MS.SUPERSCRIPT):i.LOCALE.MESSAGES.MS.BASELINE}t.baselineVerbose=H;function W(U){return $(U,"",{sup:i.LOCALE.MESSAGES.MS.SUP,sub:i.LOCALE.MESSAGES.MS.SUB})||i.LOCALE.MESSAGES.MS.BASE}t.baselineBrief=W;function Z(U){return u("radical",U,["sqrt","root"],t.nestingBarriers,{})}t.radicalNestingDepth=Z;function et(U,J,ot){const rt=Z(U),nt=lt(U);return ot=nt?i.LOCALE.FUNCTIONS.combineRootIndex(ot,nt):ot,rt===1?ot:i.LOCALE.FUNCTIONS.combineNestedRadical(J,i.LOCALE.FUNCTIONS.radicalNestDepth(rt-1),ot)}t.nestedRadical=et;function lt(U){const J=U.tagName==="sqrt"?"2":n.evalXPath("children/*[1]",U)[0].textContent.trim();return i.LOCALE.MESSAGES.MSroots[J]||""}t.getRootIndex=lt;function G(U){return et(U,i.LOCALE.MESSAGES.MS.NESTED,i.LOCALE.MESSAGES.MS.STARTROOT)}t.openingRadicalVerbose=G;function q(U){return et(U,i.LOCALE.MESSAGES.MS.NESTED,i.LOCALE.MESSAGES.MS.ENDROOT)}t.closingRadicalVerbose=q;function Q(U){return et(U,i.LOCALE.MESSAGES.MS.NESTED,i.LOCALE.MESSAGES.MS.ROOTINDEX)}t.indexRadicalVerbose=Q;function K(U){return et(U,i.LOCALE.MESSAGES.MS.NEST_ROOT,i.LOCALE.MESSAGES.MS.STARTROOT)}t.openingRadicalBrief=K;function tt(U){return et(U,i.LOCALE.MESSAGES.MS.NEST_ROOT,i.LOCALE.MESSAGES.MS.ENDROOT)}t.closingRadicalBrief=tt;function w(U){return et(U,i.LOCALE.MESSAGES.MS.NEST_ROOT,i.LOCALE.MESSAGES.MS.ROOTINDEX)}t.indexRadicalBrief=w;function N(U){return et(U,i.LOCALE.MESSAGES.MS.NEST_ROOT,i.LOCALE.MESSAGES.MS.ROOT)}t.openingRadicalSbrief=N;function T(U){return et(U,i.LOCALE.MESSAGES.MS.NEST_ROOT,i.LOCALE.MESSAGES.MS.INDEX)}t.indexRadicalSbrief=T;function j(U){return u("underscore",U,["underscore"],t.nestingBarriers,{},function(J){return J.tagName&&J.tagName==="underscore"&&J.childNodes[0].childNodes[1].getAttribute("role")==="underaccent"})}t.underscoreNestingDepth=j;function P(U){const J=j(U);return Array(J).join(i.LOCALE.MESSAGES.MS.UNDER)+i.LOCALE.MESSAGES.MS.UNDERSCRIPT}t.nestedUnderscript=P;function O(U){return u("overscore",U,["overscore"],t.nestingBarriers,{},function(J){return J.tagName&&J.tagName==="overscore"&&J.childNodes[0].childNodes[1].getAttribute("role")==="overaccent"})}t.overscoreNestingDepth=O;function k(U){return i.LOCALE.MESSAGES.MS.ENDSCRIPTS}t.endscripts=k;function V(U){const J=O(U);return Array(J).join(i.LOCALE.MESSAGES.MS.OVER)+i.LOCALE.MESSAGES.MS.OVERSCRIPT}t.nestedOverscript=V;function z(U){if(U.tagName!=="matrix"||U.getAttribute("role")!=="determinant")return[];const J=n.evalXPath("children/row/children/cell/children/*",U);for(let ot=0,rt;rt=J[ot];ot++)if(rt.tagName!=="number"){if(rt.tagName==="identifier"){const nt=rt.getAttribute("role");if(nt==="latinletter"||nt==="greekletter"||nt==="otherletter")continue}return[]}return[U]}t.determinantIsSimple=z;function X(){const U=["subscript","superscript","tensor"],J=["relseq","multrel"],ot=["fraction","punctuation","fenced","sqrt","root"],rt=_t=>_t.map(vt=>"ancestor::"+vt),nt=_t=>"not("+_t+")",at="ancestor::*/following-sibling::*",ut=nt(rt(U).join(" or ")),dt=rt(J),mt=rt(ot);let pt=[];for(let _t=0,vt;vt=mt[_t];_t++)pt=pt.concat(dt.map(function(xt){return vt+"/"+xt}));const yt=nt(pt.join(" | "));return[[at,ut,yt].join(" and ")]}t.generateBaselineConstraint=X;function Y(U){if(!U.childNodes.length||!U.childNodes[0].childNodes.length||!U.childNodes[0].childNodes[0].childNodes.length)return"";const J=U.childNodes[0].childNodes[0].childNodes[0].textContent;return J.match(/^\(.+\)$/)?J.slice(1,-1):J}t.removeParens=Y;const st=new Map([[3,"CSFleftsuperscript"],[4,"CSFleftsubscript"],[2,"CSFbaseline"],[1,"CSFrightsubscript"],[0,"CSFrightsuperscript"]]),ft=new Map([[4,2],[3,3],[2,1],[1,4],[0,5]]);function ct(U){const J=[];let ot="",rt="",nt=parseInt(U,2);for(let at=0;at<5;at++){const ut="children/*["+ft.get(at)+"]";if(nt&1){const dt=st.get(at%5);ot="[t] "+dt+"Verbose; [n] "+ut+";"+ot,rt="[t] "+dt+"Brief; [n] "+ut+";"+rt}else J.unshift("name("+ut+')="empty"');nt>>=1}return[J,ot,rt]}function ht(U,J=!0){const ot=["11111","11110","11101","11100","10111","10110","10101","10100","01111","01110","01101","01100"];for(let rt=0,nt;nt=ot[rt];rt++){let at="tensor"+nt,[ut,dt,mt]=ct(nt);U.defineRule(at,"default",dt,"self::tensor",...ut),J&&(U.defineRule(at,"brief",mt,"self::tensor",...ut),U.defineRule(at,"sbrief",mt,"self::tensor",...ut));const pt=st.get(2);dt+="; [t]"+pt+"Verbose",mt+="; [t]"+pt+"Brief",at=at+"-baseline";const yt="((.//*[not(*)])[last()]/@id)!=(((.//ancestor::fraction|ancestor::root|ancestor::sqrt|ancestor::cell|ancestor::line|ancestor::stree)[1]//*[not(*)])[last()]/@id)";U.defineRule(at,"default",dt,"self::tensor",yt,...ut),J&&(U.defineRule(at,"brief",mt,"self::tensor",yt,...ut),U.defineRule(at,"sbrief",mt,"self::tensor",yt,...ut))}}t.generateTensorRules=ht;function gt(U){let J=Object.keys(i.LOCALE.MESSAGES.MSroots).length;if(J)J++;else return[];if(!U.childNodes||U.childNodes.length===0||!U.childNodes[0].childNodes)return[];const ot=U.childNodes[0].childNodes[0].textContent;if(!/^\d+$/.test(ot))return[];const rt=parseInt(ot,10);return rt>1&&rt<=J?[U]:[]}t.smallRoot=gt})(mathspeak_util);var numbers_util={};Object.defineProperty(numbers_util,"__esModule",{value:!0});numbers_util.ordinalPosition=numbers_util.vulgarFraction=numbers_util.wordCounter=numbers_util.ordinalCounter=void 0;const span_1$2=span,DomUtil$m=dom_util,locale_1$4=locale$d,transformers_1=transformers;function ordinalCounter(t,r){let e=0;return function(){return locale_1$4.LOCALE.NUMBERS.numericOrdinal(++e)+" "+r}}numbers_util.ordinalCounter=ordinalCounter;function wordCounter(t,r){let e=0;return function(){return locale_1$4.LOCALE.NUMBERS.numberToOrdinal(++e,!1)+" "+r}}numbers_util.wordCounter=wordCounter;function vulgarFraction(t){const r=(0,transformers_1.convertVulgarFraction)(t,locale_1$4.LOCALE.MESSAGES.MS.FRAC_OVER);return r.convertible&&r.enumerator&&r.denominator?[new span_1$2.Span(locale_1$4.LOCALE.NUMBERS.numberToWords(r.enumerator),{extid:t.childNodes[0].childNodes[0].getAttribute("extid"),separator:""}),new span_1$2.Span(locale_1$4.LOCALE.NUMBERS.vulgarSep,{separator:""}),new span_1$2.Span(locale_1$4.LOCALE.NUMBERS.numberToOrdinal(r.denominator,r.enumerator!==1),{extid:t.childNodes[0].childNodes[1].getAttribute("extid")})]:[new span_1$2.Span(r.content||"",{extid:t.getAttribute("extid")})]}numbers_util.vulgarFraction=vulgarFraction;function ordinalPosition(t){const r=DomUtil$m.toArray(t.parentNode.childNodes);return locale_1$4.LOCALE.NUMBERS.numericOrdinal(r.indexOf(t)+1).toString()}numbers_util.ordinalPosition=ordinalPosition;Object.defineProperty(clearspeak_rules,"__esModule",{value:!0});clearspeak_rules.ClearspeakRules=void 0;const dynamic_cstr_1$6=dynamic_cstr,StoreUtil$2=store_util,ClearspeakUtil=clearspeak_util,MathspeakUtil$3=mathspeak_util,NumbersUtil$2=numbers_util,SpeechRules$3=speech_rules;function ClearspeakRules(){SpeechRules$3.addStore(dynamic_cstr_1$6.DynamicCstr.BASE_LOCALE+".speech.clearspeak","",{CTFpauseSeparator:StoreUtil$2.pauseSeparator,CTFnodeCounter:ClearspeakUtil.nodeCounter,CTFcontentIterator:StoreUtil$2.contentIterator,CSFvulgarFraction:NumbersUtil$2.vulgarFraction,CQFvulgarFractionSmall:ClearspeakUtil.isSmallVulgarFraction,CQFcellsSimple:ClearspeakUtil.allCellsSimple,CSFordinalExponent:ClearspeakUtil.ordinalExponent,CSFwordOrdinal:ClearspeakUtil.wordOrdinal,CQFmatchingFences:ClearspeakUtil.matchingFences,CSFnestingDepth:ClearspeakUtil.nestingDepth,CQFfencedArguments:ClearspeakUtil.fencedArguments,CQFsimpleArguments:ClearspeakUtil.simpleArguments,CQFspaceoutNumber:MathspeakUtil$3.spaceoutNumber})}clearspeak_rules.ClearspeakRules=ClearspeakRules;var mathspeak_rules={},mathspeak_french_util={};Object.defineProperty(mathspeak_french_util,"__esModule",{value:!0});mathspeak_french_util.leftSubscriptBrief=mathspeak_french_util.leftSuperscriptBrief=mathspeak_french_util.leftSubscriptVerbose=mathspeak_french_util.leftSuperscriptVerbose=mathspeak_french_util.baselineBrief=mathspeak_french_util.baselineVerbose=void 0;const MathspeakUtil$2=mathspeak_util;function baselineVerbose(t){return MathspeakUtil$2.baselineVerbose(t).replace(/-$/,"")}mathspeak_french_util.baselineVerbose=baselineVerbose;function baselineBrief(t){return MathspeakUtil$2.baselineBrief(t).replace(/-$/,"")}mathspeak_french_util.baselineBrief=baselineBrief;function leftSuperscriptVerbose(t){return MathspeakUtil$2.superscriptVerbose(t).replace(/^exposant/,"exposant gauche")}mathspeak_french_util.leftSuperscriptVerbose=leftSuperscriptVerbose;function leftSubscriptVerbose(t){return MathspeakUtil$2.subscriptVerbose(t).replace(/^indice/,"indice gauche")}mathspeak_french_util.leftSubscriptVerbose=leftSubscriptVerbose;function leftSuperscriptBrief(t){return MathspeakUtil$2.superscriptBrief(t).replace(/^sup/,"sup gauche")}mathspeak_french_util.leftSuperscriptBrief=leftSuperscriptBrief;function leftSubscriptBrief(t){return MathspeakUtil$2.subscriptBrief(t).replace(/^sub/,"sub gauche")}mathspeak_french_util.leftSubscriptBrief=leftSubscriptBrief;var unit_util={};Object.defineProperty(unit_util,"__esModule",{value:!0});unit_util.oneLeft=unit_util.leftMostUnit=unit_util.rightMostUnit=unit_util.unitMultipliers=void 0;const auditory_description_1$3=auditory_description,XpathUtil$8=xpath_util,locale_1$3=locale$d;function unitMultipliers(t,r){const e=t;let n=0;return function(){const i=auditory_description_1$3.AuditoryDescription.create({text:rightMostUnit(e[n])&&leftMostUnit(e[n+1])?locale_1$3.LOCALE.MESSAGES.unitTimes:""},{});return n++,[i]}}unit_util.unitMultipliers=unitMultipliers;const SCRIPT_ELEMENTS=["superscript","subscript","overscore","underscore"];function rightMostUnit(t){for(;t;){if(t.getAttribute("role")==="unit")return!0;const r=t.tagName,e=XpathUtil$8.evalXPath("children/*",t);t=SCRIPT_ELEMENTS.indexOf(r)!==-1?e[0]:e[e.length-1]}return!1}unit_util.rightMostUnit=rightMostUnit;function leftMostUnit(t){for(;t;){if(t.getAttribute("role")==="unit")return!0;t=XpathUtil$8.evalXPath("children/*",t)[0]}return!1}unit_util.leftMostUnit=leftMostUnit;function oneLeft(t){for(;t;){if(t.tagName==="number"&&t.textContent==="1")return[t];if(t.tagName!=="infixop"||t.getAttribute("role")!=="multiplication"&&t.getAttribute("role")!=="implicit")return[];t=XpathUtil$8.evalXPath("children/*",t)[0]}return[]}unit_util.oneLeft=oneLeft;Object.defineProperty(mathspeak_rules,"__esModule",{value:!0});mathspeak_rules.MathspeakRules=void 0;const dynamic_cstr_1$5=dynamic_cstr,StoreUtil$1=store_util,MathspeakFrenchUtil=mathspeak_french_util,MathspeakUtil$1=mathspeak_util,NumbersUtil$1=numbers_util,SpeechRules$2=speech_rules,UnitUtil=unit_util;function MathspeakRules(){SpeechRules$2.addStore(dynamic_cstr_1$5.DynamicCstr.BASE_LOCALE+".speech.mathspeak","",{CQFspaceoutNumber:MathspeakUtil$1.spaceoutNumber,CQFspaceoutIdentifier:MathspeakUtil$1.spaceoutIdentifier,CSFspaceoutText:MathspeakUtil$1.spaceoutText,CSFopenFracVerbose:MathspeakUtil$1.openingFractionVerbose,CSFcloseFracVerbose:MathspeakUtil$1.closingFractionVerbose,CSFoverFracVerbose:MathspeakUtil$1.overFractionVerbose,CSFopenFracBrief:MathspeakUtil$1.openingFractionBrief,CSFcloseFracBrief:MathspeakUtil$1.closingFractionBrief,CSFopenFracSbrief:MathspeakUtil$1.openingFractionSbrief,CSFcloseFracSbrief:MathspeakUtil$1.closingFractionSbrief,CSFoverFracSbrief:MathspeakUtil$1.overFractionSbrief,CSFvulgarFraction:NumbersUtil$1.vulgarFraction,CQFvulgarFractionSmall:MathspeakUtil$1.isSmallVulgarFraction,CSFopenRadicalVerbose:MathspeakUtil$1.openingRadicalVerbose,CSFcloseRadicalVerbose:MathspeakUtil$1.closingRadicalVerbose,CSFindexRadicalVerbose:MathspeakUtil$1.indexRadicalVerbose,CSFopenRadicalBrief:MathspeakUtil$1.openingRadicalBrief,CSFcloseRadicalBrief:MathspeakUtil$1.closingRadicalBrief,CSFindexRadicalBrief:MathspeakUtil$1.indexRadicalBrief,CSFopenRadicalSbrief:MathspeakUtil$1.openingRadicalSbrief,CSFindexRadicalSbrief:MathspeakUtil$1.indexRadicalSbrief,CQFisSmallRoot:MathspeakUtil$1.smallRoot,CSFsuperscriptVerbose:MathspeakUtil$1.superscriptVerbose,CSFsuperscriptBrief:MathspeakUtil$1.superscriptBrief,CSFsubscriptVerbose:MathspeakUtil$1.subscriptVerbose,CSFsubscriptBrief:MathspeakUtil$1.subscriptBrief,CSFbaselineVerbose:MathspeakUtil$1.baselineVerbose,CSFbaselineBrief:MathspeakUtil$1.baselineBrief,CSFleftsuperscriptVerbose:MathspeakUtil$1.superscriptVerbose,CSFleftsubscriptVerbose:MathspeakUtil$1.subscriptVerbose,CSFrightsuperscriptVerbose:MathspeakUtil$1.superscriptVerbose,CSFrightsubscriptVerbose:MathspeakUtil$1.subscriptVerbose,CSFleftsuperscriptBrief:MathspeakUtil$1.superscriptBrief,CSFleftsubscriptBrief:MathspeakUtil$1.subscriptBrief,CSFrightsuperscriptBrief:MathspeakUtil$1.superscriptBrief,CSFrightsubscriptBrief:MathspeakUtil$1.subscriptBrief,CSFunderscript:MathspeakUtil$1.nestedUnderscript,CSFoverscript:MathspeakUtil$1.nestedOverscript,CSFendscripts:MathspeakUtil$1.endscripts,CTFordinalCounter:NumbersUtil$1.ordinalCounter,CTFwordCounter:NumbersUtil$1.wordCounter,CTFcontentIterator:StoreUtil$1.contentIterator,CQFdetIsSimple:MathspeakUtil$1.determinantIsSimple,CSFRemoveParens:MathspeakUtil$1.removeParens,CQFresetNesting:MathspeakUtil$1.resetNestingDepth,CGFbaselineConstraint:MathspeakUtil$1.generateBaselineConstraint,CGFtensorRules:MathspeakUtil$1.generateTensorRules}),SpeechRules$2.addStore("es.speech.mathspeak",dynamic_cstr_1$5.DynamicCstr.BASE_LOCALE+".speech.mathspeak",{CTFunitMultipliers:UnitUtil.unitMultipliers,CQFoneLeft:UnitUtil.oneLeft}),SpeechRules$2.addStore("fr.speech.mathspeak",dynamic_cstr_1$5.DynamicCstr.BASE_LOCALE+".speech.mathspeak",{CSFbaselineVerbose:MathspeakFrenchUtil.baselineVerbose,CSFbaselineBrief:MathspeakFrenchUtil.baselineBrief,CSFleftsuperscriptVerbose:MathspeakFrenchUtil.leftSuperscriptVerbose,CSFleftsubscriptVerbose:MathspeakFrenchUtil.leftSubscriptVerbose,CSFleftsuperscriptBrief:MathspeakFrenchUtil.leftSuperscriptBrief,CSFleftsubscriptBrief:MathspeakFrenchUtil.leftSubscriptBrief})}mathspeak_rules.MathspeakRules=MathspeakRules;var other_rules={},nemeth_util={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.implicitIterator=t.relationIterator=t.propagateNumber=t.checkParent_=t.NUMBER_INHIBITORS_=t.NUMBER_PROPAGATORS_=t.enlargeFence=t.indexRadical=t.closingRadical=t.openingRadical=t.radicalNestingDepth=t.nestedRadical=t.hyperFractionBoundary=t.overBevelledFraction=t.overFraction=t.closingFraction=t.openingFraction=void 0;const r=auditory_description,e=dom_util,n=xpath_util,i=grammar,o=engine,a=semantic_annotations,s=semantic_annotator,l=locale$d,c=mathspeak_util;function f(E){const $=c.fractionNestingDepth(E);return new Array($).join(l.LOCALE.MESSAGES.MS.FRACTION_REPEAT)+l.LOCALE.MESSAGES.MS.FRACTION_START}t.openingFraction=f;function d(E){const $=c.fractionNestingDepth(E);return new Array($).join(l.LOCALE.MESSAGES.MS.FRACTION_REPEAT)+l.LOCALE.MESSAGES.MS.FRACTION_END}t.closingFraction=d;function u(E){const $=c.fractionNestingDepth(E);return new Array($).join(l.LOCALE.MESSAGES.MS.FRACTION_REPEAT)+l.LOCALE.MESSAGES.MS.FRACTION_OVER}t.overFraction=u;function m(E){const $=c.fractionNestingDepth(E);return new Array($).join(l.LOCALE.MESSAGES.MS.FRACTION_REPEAT)+"⠸"+l.LOCALE.MESSAGES.MS.FRACTION_OVER}t.overBevelledFraction=m;function p(E){return l.LOCALE.MESSAGES.regexp.HYPER===c.fractionNestingDepth(E).toString()?[E]:[]}t.hyperFractionBoundary=p;function _(E,$){const D=y(E);return D===1?$:new Array(D).join(l.LOCALE.MESSAGES.MS.NESTED)+$}t.nestedRadical=_;function y(E,$){const D=$||0;return E.parentNode?y(E.parentNode,E.tagName==="root"||E.tagName==="sqrt"?D+1:D):D}t.radicalNestingDepth=y;function g(E){return _(E,l.LOCALE.MESSAGES.MS.STARTROOT)}t.openingRadical=g;function v(E){return _(E,l.LOCALE.MESSAGES.MS.ENDROOT)}t.closingRadical=v;function x(E){return _(E,l.LOCALE.MESSAGES.MS.ROOTINDEX)}t.indexRadical=x;function b(E){const $="⠠";if(E.length===1)return $+E;const D="⠳",B=E.split("");return B.every(function(F){return F===D})?$+B.join($):E.slice(0,-1)+$+E.slice(-1)}t.enlargeFence=b,i.Grammar.getInstance().setCorrection("enlargeFence",b),t.NUMBER_PROPAGATORS_=["multirel","relseq","appl","row","line"],t.NUMBER_INHIBITORS_=["subscript","superscript","overscore","underscore"];function S(E,$){const D=E.parent;if(!D)return!1;const B=D.type;return t.NUMBER_PROPAGATORS_.indexOf(B)!==-1||B==="prefixop"&&D.role==="negative"&&!$.script||B==="prefixop"&&D.role==="geometry"||B==="punctuated"&&(!$.enclosed||D.role==="text")}t.checkParent_=S;function M(E,$){return E.childNodes.length?(t.NUMBER_INHIBITORS_.indexOf(E.type)!==-1&&($.script=!0),E.type==="fenced"?($.number=!1,$.enclosed=!0,["",$]):(S(E,$)&&($.number=!0,$.enclosed=!1),["",$])):(S(E,$)&&($.number=!0,$.script=!1,$.enclosed=!1),[$.number?"number":"",{number:!1,enclosed:$.enclosed,script:$.script}])}t.propagateNumber=M,(0,a.register)(new s.SemanticVisitor("nemeth","number",M,{number:!0}));function C(E,$){const D=E.slice(0);let B=!0,F;return E.length>0?F=n.evalXPath("../../content/*",E[0]):F=[],function(){const I=F.shift(),H=D.shift(),W=D[0],Z=$?[r.AuditoryDescription.create({text:$},{translate:!0})]:[];if(!I)return Z;const et=H?c.nestedSubSuper(H,"",{sup:l.LOCALE.MESSAGES.MS.SUPER,sub:l.LOCALE.MESSAGES.MS.SUB}):"",lt=H&&e.tagName(H)!=="EMPTY"||B&&I.parentNode.parentNode&&I.parentNode.parentNode.previousSibling?[r.AuditoryDescription.create({text:l.LOCALE.MESSAGES.regexp.SPACE+et},{})]:[],G=W&&e.tagName(W)!=="EMPTY"||!F.length&&I.parentNode.parentNode&&I.parentNode.parentNode.nextSibling?[r.AuditoryDescription.create({text:l.LOCALE.MESSAGES.regexp.SPACE},{})]:[],q=o.default.evaluateNode(I);return B=!1,Z.concat(lt,q,G)}}t.relationIterator=C;function A(E,$){const D=E.slice(0);let B;return E.length>0?B=n.evalXPath("../../content/*",E[0]):B=[],function(){const F=D.shift(),I=D[0],H=B.shift(),W=$?[r.AuditoryDescription.create({text:$},{translate:!0})]:[];if(!H)return W;const Z=F&&e.tagName(F)==="NUMBER",et=I&&e.tagName(I)==="NUMBER";return W.concat(Z&&et&&H.getAttribute("role")==="space"?[r.AuditoryDescription.create({text:l.LOCALE.MESSAGES.regexp.SPACE},{})]:[])}}t.implicitIterator=A})(nemeth_util);Object.defineProperty(other_rules,"__esModule",{value:!0});other_rules.BrailleRules=other_rules.OtherRules=other_rules.PrefixRules=void 0;const dynamic_cstr_1$4=dynamic_cstr,StoreUtil=store_util,MathspeakUtil=mathspeak_util,NemethUtil=nemeth_util,NumbersUtil=numbers_util,SpeechRules$1=speech_rules;function PrefixRules(){SpeechRules$1.addStore("en.prefix.default","",{CSFordinalPosition:NumbersUtil.ordinalPosition})}other_rules.PrefixRules=PrefixRules;function OtherRules(){SpeechRules$1.addStore("en.speech.chromevox","",{CTFnodeCounter:StoreUtil.nodeCounter,CTFcontentIterator:StoreUtil.contentIterator}),SpeechRules$1.addStore("en.speech.emacspeak","en.speech.chromevox",{CQFvulgarFractionSmall:MathspeakUtil.isSmallVulgarFraction,CSFvulgarFraction:NumbersUtil.vulgarFraction})}other_rules.OtherRules=OtherRules;function BrailleRules(){SpeechRules$1.addStore("nemeth.braille.default",dynamic_cstr_1$4.DynamicCstr.BASE_LOCALE+".speech.mathspeak",{CSFopenFraction:NemethUtil.openingFraction,CSFcloseFraction:NemethUtil.closingFraction,CSFoverFraction:NemethUtil.overFraction,CSFoverBevFraction:NemethUtil.overBevelledFraction,CQFhyperFraction:NemethUtil.hyperFractionBoundary,CSFopenRadical:NemethUtil.openingRadical,CSFcloseRadical:NemethUtil.closingRadical,CSFindexRadical:NemethUtil.indexRadical,CSFsubscript:MathspeakUtil.subscriptVerbose,CSFsuperscript:MathspeakUtil.superscriptVerbose,CSFbaseline:MathspeakUtil.baselineVerbose,CGFtensorRules:t=>MathspeakUtil.generateTensorRules(t,!1),CTFrelationIterator:NemethUtil.relationIterator,CTFimplicitIterator:NemethUtil.implicitIterator})}other_rules.BrailleRules=BrailleRules;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.init=t.INIT_=void 0;const r=clearspeak_rules,e=mathspeak_rules,n=other_rules;t.INIT_=!1;function i(){t.INIT_||((0,e.MathspeakRules)(),(0,r.ClearspeakRules)(),(0,n.PrefixRules)(),(0,n.OtherRules)(),(0,n.BrailleRules)(),t.INIT_=!0)}t.init=i})(speech_rule_stores);var braille_store={},math_store={},base_rule_store={},speech_rule={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OutputError=t.Precondition=t.Action=t.Component=t.ActionType=t.SpeechRule=void 0;const r=engine,e=grammar;class n{constructor(m,p,_,y){this.name=m,this.dynamicCstr=p,this.precondition=_,this.action=y,this.context=null}toString(){return this.name+" | "+this.dynamicCstr.toString()+" | "+this.precondition.toString()+" ==> "+this.action.toString()}}t.SpeechRule=n;var i;(function(u){u.NODE="NODE",u.MULTI="MULTI",u.TEXT="TEXT",u.PERSONALITY="PERSONALITY"})(i=t.ActionType||(t.ActionType={}));function o(u){switch(u){case"[n]":return i.NODE;case"[m]":return i.MULTI;case"[t]":return i.TEXT;case"[p]":return i.PERSONALITY;default:throw"Parse error: "+u}}function a(u){switch(u){case i.NODE:return"[n]";case i.MULTI:return"[m]";case i.TEXT:return"[t]";case i.PERSONALITY:return"[p]";default:throw"Unknown type error: "+u}}class s{constructor({type:m,content:p,attributes:_,grammar:y}){this.type=m,this.content=p,this.attributes=_,this.grammar=y}static grammarFromString(m){return e.Grammar.parseInput(m)}static fromString(m){const p={type:o(m.substring(0,3))};let _=m.slice(3).trim();if(!_)throw new f("Missing content.");switch(p.type){case i.TEXT:if(_[0]==='"'){const y=d(_,"\\(")[0].trim();if(y.slice(-1)!=='"')throw new f("Invalid string syntax.");p.content=y,_=_.slice(y.length).trim(),_.indexOf("(")===-1&&(_="");break}case i.NODE:case i.MULTI:{const y=_.indexOf(" (");if(y===-1){p.content=_.trim(),_="";break}p.content=_.substring(0,y).trim(),_=_.slice(y).trim()}break}if(_){const y=s.attributesFromString(_);y.grammar&&(p.grammar=y.grammar,delete y.grammar),Object.keys(y).length&&(p.attributes=y)}return new s(p)}static attributesFromString(m){if(m[0]!=="("||m.slice(-1)!==")")throw new f("Invalid attribute expression: "+m);const p={},_=d(m.slice(1,-1),",");for(let y=0,g=_.length;y<g;y++){const v=_[y],x=v.indexOf(":");if(x===-1)p[v.trim()]="true";else{const b=v.substring(0,x).trim(),S=v.slice(x+1).trim();p[b]=b===e.ATTRIBUTE?s.grammarFromString(S):S}}return p}toString(){let m="";m+=a(this.type),m+=this.content?" "+this.content:"";const p=this.attributesToString();return m+=p?" "+p:"",m}grammarToString(){return this.getGrammar().join(":")}getGrammar(){const m=[];for(const p in this.grammar)this.grammar[p]===!0?m.push(p):this.grammar[p]===!1?m.push("!"+p):m.push(p+"="+this.grammar[p]);return m}attributesToString(){const m=this.getAttributes(),p=this.grammarToString();return p&&m.push("grammar:"+p),m.length>0?"("+m.join(", ")+")":""}getAttributes(){const m=[];for(const p in this.attributes){const _=this.attributes[p];_==="true"?m.push(p):m.push(p+":"+_)}return m}}t.Component=s;class l{constructor(m){this.components=m}static fromString(m){const p=d(m,";").filter(function(y){return y.match(/\S/)}).map(function(y){return y.trim()}),_=[];for(let y=0,g=p.length;y<g;y++){const v=s.fromString(p[y]);v&&_.push(v)}return new l(_)}toString(){return this.components.map(function(p){return p.toString()}).join("; ")}}t.Action=l;class c{constructor(m,...p){this.query=m,this.constraints=p;const[_,y]=this.presetPriority();this.priority=_?y:this.calculatePriority()}static constraintValue(m,p){for(let _=0,y;y=p[_];_++)if(m.match(y))return++_;return 0}toString(){const m=this.constraints.join(", ");return`${this.query}, ${m} (${this.priority}, ${this.rank})`}calculatePriority(){const m=c.constraintValue(this.query,c.queryPriorities);if(!m)return 0;const p=this.query.match(/^self::.+\[(.+)\]/)[1],_=c.constraintValue(p,c.attributePriorities);return m*100+_*10}presetPriority(){if(!this.constraints.length)return[!1,0];const m=this.constraints[this.constraints.length-1].match(/^priority=(.*$)/);if(!m)return[!1,0];this.constraints.pop();const p=parseFloat(m[1]);return[!0,isNaN(p)?0:p]}}t.Precondition=c,c.queryPriorities=[/^self::\*\[.+\]$/,/^self::[\w-]+\[.+\]$/],c.attributePriorities=[/^@[\w-]+$/,/^@[\w-]+!=".+"$/,/^not\(contains\(@[\w-]+,\s*".+"\)\)$/,/^contains\(@[\w-]+,".+"\)$/,/^@[\w-]+=".+"$/];class f extends r.SREError{constructor(m){super(m),this.name="RuleError"}}t.OutputError=f;function d(u,m){const p=[];let _="";for(;u!=="";){const y=u.search(m);if(y===-1){if((u.match(/"/g)||[]).length%2!==0)throw new f("Invalid string in expression: "+u);p.push(_+u),_="",u=""}else if((u.substring(0,y).match(/"/g)||[]).length%2===0)p.push(_+u.substring(0,y)),_="",u=u.substring(y+1);else{const g=u.substring(y).search('"');if(g===-1)throw new f("Invalid string in expression: "+u);_=_+u.substring(0,y+g+1),u=u.substring(y+g+1)}}return _&&p.push(_),p}})(speech_rule);var speech_rule_context={},speech_rule_functions={};Object.defineProperty(speech_rule_functions,"__esModule",{value:!0});speech_rule_functions.CustomGenerators=speech_rule_functions.ContextFunctions=speech_rule_functions.CustomStrings=speech_rule_functions.CustomQueries=void 0;class FunctionsStore{constructor(r,e){this.prefix=r,this.store=e}add(r,e){this.checkCustomFunctionSyntax_(r)&&(this.store[r]=e)}addStore(r){const e=Object.keys(r.store);for(let n=0,i;i=e[n];n++)this.add(i,r.store[i])}lookup(r){return this.store[r]}checkCustomFunctionSyntax_(r){const e=new RegExp("^"+this.prefix);return r.match(e)?!0:(console.error("FunctionError: Invalid function name. Expected prefix "+this.prefix),!1)}}class CustomQueries extends FunctionsStore{constructor(){const r={};super("CQF",r)}}speech_rule_functions.CustomQueries=CustomQueries;class CustomStrings extends FunctionsStore{constructor(){const r={};super("CSF",r)}}speech_rule_functions.CustomStrings=CustomStrings;class ContextFunctions extends FunctionsStore{constructor(){const r={};super("CTF",r)}}speech_rule_functions.ContextFunctions=ContextFunctions;class CustomGenerators extends FunctionsStore{constructor(){const r={};super("CGF",r)}}speech_rule_functions.CustomGenerators=CustomGenerators;Object.defineProperty(speech_rule_context,"__esModule",{value:!0});speech_rule_context.SpeechRuleContext=void 0;const XpathUtil$7=xpath_util,srf=speech_rule_functions;class SpeechRuleContext{constructor(){this.customQueries=new srf.CustomQueries,this.customStrings=new srf.CustomStrings,this.contextFunctions=new srf.ContextFunctions,this.customGenerators=new srf.CustomGenerators}applyCustomQuery(r,e){const n=this.customQueries.lookup(e);return n?n(r):null}applySelector(r,e){return this.applyCustomQuery(r,e)||XpathUtil$7.evalXPath(e,r)}applyQuery(r,e){const n=this.applySelector(r,e);return n.length>0?n[0]:null}applyConstraint(r,e){return!!this.applyQuery(r,e)||XpathUtil$7.evaluateBoolean(e,r)}constructString(r,e){if(!e)return"";if(e.charAt(0)==='"')return e.slice(1,-1);const n=this.customStrings.lookup(e);return n?n(r):XpathUtil$7.evaluateString(e,r)}parse(r){const e=Array.isArray(r)?r:Object.entries(r);for(let n=0,i;i=e[n];n++)switch(i[0].slice(0,3)){case"CQF":this.customQueries.add(i[0],i[1]);break;case"CSF":this.customStrings.add(i[0],i[1]);break;case"CTF":this.contextFunctions.add(i[0],i[1]);break;case"CGF":this.customGenerators.add(i[0],i[1]);break;default:console.error("FunctionError: Invalid function name "+i[0])}}}speech_rule_context.SpeechRuleContext=SpeechRuleContext;Object.defineProperty(base_rule_store,"__esModule",{value:!0});base_rule_store.Condition=base_rule_store.BaseRuleStore=void 0;const auditory_description_1$2=auditory_description,dynamic_cstr_1$3=dynamic_cstr,speech_rule_1$2=speech_rule,speech_rule_context_1=speech_rule_context;class BaseRuleStore{constructor(){this.context=new speech_rule_context_1.SpeechRuleContext,this.parseOrder=dynamic_cstr_1$3.DynamicCstr.DEFAULT_ORDER,this.parser=new dynamic_cstr_1$3.DynamicCstrParser(this.parseOrder),this.locale=dynamic_cstr_1$3.DynamicCstr.DEFAULT_VALUES[dynamic_cstr_1$3.Axis.LOCALE],this.modality=dynamic_cstr_1$3.DynamicCstr.DEFAULT_VALUES[dynamic_cstr_1$3.Axis.MODALITY],this.domain="",this.initialized=!1,this.inherits=null,this.kind="standard",this.customTranscriptions={},this.preconditions=new Map,this.speechRules_=[],this.rank=0,this.parseMethods={Rule:this.defineRule,Generator:this.generateRules,Action:this.defineAction,Precondition:this.definePrecondition,Ignore:this.ignoreRules}}static compareStaticConstraints_(r,e){if(r.length!==e.length)return!1;for(let n=0,i;i=r[n];n++)if(e.indexOf(i)===-1)return!1;return!0}static comparePreconditions_(r,e){const n=r.precondition,i=e.precondition;return n.query!==i.query?!1:BaseRuleStore.compareStaticConstraints_(n.constraints,i.constraints)}defineRule(r,e,n,i,...o){const a=this.parseAction(n),s=this.parsePrecondition(i,o),l=this.parseCstr(e);if(!(a&&s&&l))return console.error(`Rule Error: ${i}, (${e}): ${n}`),null;const c=new speech_rule_1$2.SpeechRule(r,l,s,a);return c.precondition.rank=this.rank++,this.addRule(c),c}addRule(r){r.context=this.context,this.speechRules_.unshift(r)}deleteRule(r){const e=this.speechRules_.indexOf(r);e!==-1&&this.speechRules_.splice(e,1)}findRule(r){for(let e=0,n;n=this.speechRules_[e];e++)if(r(n))return n;return null}findAllRules(r){return this.speechRules_.filter(r)}evaluateDefault(r){const e=r.textContent.slice(0);return e.match(/^\s+$/)?this.evaluateWhitespace(e):this.evaluateString(e)}evaluateWhitespace(r){return[]}evaluateCustom(r){const e=this.customTranscriptions[r];return e!==void 0?auditory_description_1$2.AuditoryDescription.create({text:e},{adjust:!0,translate:!1}):null}evaluateCharacter(r){return this.evaluateCustom(r)||auditory_description_1$2.AuditoryDescription.create({text:r},{adjust:!0,translate:!0})}removeDuplicates(r){for(let e=this.speechRules_.length-1,n;n=this.speechRules_[e];e--)n!==r&&r.dynamicCstr.equal(n.dynamicCstr)&&BaseRuleStore.comparePreconditions_(n,r)&&this.speechRules_.splice(e,1)}getSpeechRules(){return this.speechRules_}setSpeechRules(r){this.speechRules_=r}getPreconditions(){return this.preconditions}parseCstr(r){try{return this.parser.parse(this.locale+"."+this.modality+(this.domain?"."+this.domain:"")+"."+r)}catch(e){if(e.name==="RuleError")return console.error("Rule Error ",`Illegal Dynamic Constraint: ${r}.`,e.message),null;throw e}}parsePrecondition(r,e){try{const n=this.parsePrecondition_(r);r=n[0];let i=n.slice(1);for(const o of e)i=i.concat(this.parsePrecondition_(o));return new speech_rule_1$2.Precondition(r,...i)}catch(n){if(n.name==="RuleError")return console.error("Rule Error ",`Illegal preconditions: ${r}, ${e}.`,n.message),null;throw n}}parseAction(r){try{return speech_rule_1$2.Action.fromString(r)}catch(e){if(e.name==="RuleError")return console.error("Rule Error ",`Illegal action: ${r}.`,e.message),null;throw e}}parse(r){this.modality=r.modality||this.modality,this.locale=r.locale||this.locale,this.domain=r.domain||this.domain,this.context.parse(r.functions||[]),r.kind!=="actions"&&(this.kind=r.kind||this.kind,this.inheritRules()),this.parseRules(r.rules||[])}parseRules(r){for(let e=0,n;n=r[e];e++){const i=n[0],o=this.parseMethods[i];i&&o&&o.apply(this,n.slice(1))}}generateRules(r){const e=this.context.customGenerators.lookup(r);e&&e(this)}defineAction(r,e){let n;try{n=speech_rule_1$2.Action.fromString(e)}catch(a){if(a.name==="RuleError"){console.error("Action Error ",e,a.message);return}else throw a}const i=this.getFullPreconditions(r);if(!i){console.error(`Action Error: No precondition for action ${r}`);return}this.ignoreRules(r);const o=new RegExp("^\\w+\\.\\w+\\."+(this.domain?"\\w+\\.":""));i.conditions.forEach(([a,s])=>{const l=this.parseCstr(a.toString().replace(o,""));this.addRule(new speech_rule_1$2.SpeechRule(r,l,s,n))})}getFullPreconditions(r){const e=this.preconditions.get(r);return e||!this.inherits?e:this.inherits.getFullPreconditions(r)}definePrecondition(r,e,n,...i){const o=this.parsePrecondition(n,i),a=this.parseCstr(e);if(!(o&&a)){console.error(`Precondition Error: ${n}, (${e})`);return}o.rank=this.rank++,this.preconditions.set(r,new Condition(a,o))}inheritRules(){if(!this.inherits||!this.inherits.getSpeechRules().length)return;const r=new RegExp("^\\w+\\.\\w+\\."+(this.domain?"\\w+\\.":""));this.inherits.getSpeechRules().forEach(e=>{const n=this.parseCstr(e.dynamicCstr.toString().replace(r,""));this.addRule(new speech_rule_1$2.SpeechRule(e.name,n,e.precondition,e.action))})}ignoreRules(r,...e){let n=this.findAllRules(o=>o.name===r);if(!e.length){n.forEach(this.deleteRule.bind(this));return}let i=[];for(const o of e){const a=this.parseCstr(o);for(const s of n)a.equal(s.dynamicCstr)?this.deleteRule(s):i.push(s);n=i,i=[]}}parsePrecondition_(r){const e=this.context.customGenerators.lookup(r);return e?e():[r]}}base_rule_store.BaseRuleStore=BaseRuleStore;class Condition{constructor(r,e){this.base=r,this._conditions=[],this.constraints=[],this.allCstr={},this.constraints.push(r),this.addCondition(r,e)}get conditions(){return this._conditions}addConstraint(r){if(this.constraints.filter(n=>n.equal(r)).length)return;this.constraints.push(r);const e=[];for(const[n,i]of this.conditions)this.base.equal(n)&&e.push([r,i]);this._conditions=this._conditions.concat(e)}addBaseCondition(r){this.addCondition(this.base,r)}addFullCondition(r){this.constraints.forEach(e=>this.addCondition(e,r))}addCondition(r,e){const n=r.toString()+" "+e.toString();this.allCstr.condStr||(this.allCstr[n]=!0,this._conditions.push([r,e]))}}base_rule_store.Condition=Condition;Object.defineProperty(math_store,"__esModule",{value:!0});math_store.MathStore=void 0;const BaseUtil$1=base_util,locale_1$2=locale$d,semantic_annotations_1$2=semantic_annotations,base_rule_store_1=base_rule_store,speech_rule_1$1=speech_rule;class MathStore extends base_rule_store_1.BaseRuleStore{constructor(){super(),this.annotators=[],this.parseMethods.Alias=this.defineAlias,this.parseMethods.SpecializedRule=this.defineSpecializedRule,this.parseMethods.Specialized=this.defineSpecialized}initialize(){this.initialized||(this.annotations(),this.initialized=!0)}annotations(){for(let r=0,e;e=this.annotators[r];r++)(0,semantic_annotations_1$2.activate)(this.domain,e)}defineAlias(r,e,...n){const i=this.parsePrecondition(e,n);if(!i){console.error(`Precondition Error: ${e} ${n}`);return}const o=this.preconditions.get(r);if(!o){console.error(`Alias Error: No precondition by the name of ${r}`);return}o.addFullCondition(i)}defineRulesAlias(r,e,...n){const i=this.findAllRules(function(s){return s.name===r});if(i.length===0)throw new speech_rule_1$1.OutputError("Rule with name "+r+" does not exist.");const o=[],a=s=>{const l=s.dynamicCstr.toString(),c=s.action.toString();for(let f=0,d;d=o[f];f++)if(d.action===c&&d.cstr===l)return!1;return o.push({cstr:l,action:c}),!0};i.forEach(s=>{a(s)&&this.addAlias_(s,e,n)})}defineSpecializedRule(r,e,n,i){const o=this.parseCstr(e),a=this.findRule(f=>f.name===r&&o.equal(f.dynamicCstr)),s=this.parseCstr(n);if(!a&&i)throw new speech_rule_1$1.OutputError("Rule named "+r+" with style "+e+" does not exist.");const l=i?speech_rule_1$1.Action.fromString(i):a.action,c=new speech_rule_1$1.SpeechRule(a.name,s,a.precondition,l);this.addRule(c)}defineSpecialized(r,e,n){const i=this.parseCstr(n);if(!i){console.error(`Dynamic Constraint Error: ${n}`);return}const o=this.preconditions.get(r);if(!o){console.error(`Alias Error: No precondition by the name of ${r}`);return}o.addConstraint(i)}evaluateString(r){const e=[];if(r.match(/^\s+$/))return e;let n=this.matchNumber_(r);if(n&&n.length===r.length)return e.push(this.evaluateCharacter(n.number)),e;const i=BaseUtil$1.removeEmpty(r.replace(/\s/g," ").split(" "));for(let o=0,a;a=i[o];o++)if(a.length===1)e.push(this.evaluateCharacter(a));else if(a.match(new RegExp("^["+locale_1$2.LOCALE.MESSAGES.regexp.TEXT+"]+$")))e.push(this.evaluateCharacter(a));else{let s=a;for(;s;){n=this.matchNumber_(s);const l=s.match(new RegExp("^["+locale_1$2.LOCALE.MESSAGES.regexp.TEXT+"]+"));if(n)e.push(this.evaluateCharacter(n.number)),s=s.substring(n.length);else if(l)e.push(this.evaluateCharacter(l[0])),s=s.substring(l[0].length);else{const c=Array.from(s),f=c[0];e.push(this.evaluateCharacter(f)),s=c.slice(1).join("")}}}return e}parse(r){super.parse(r),this.annotators=r.annotators||[]}addAlias_(r,e,n){const i=this.parsePrecondition(e,n),o=new speech_rule_1$1.SpeechRule(r.name,r.dynamicCstr,i,r.action);o.name=r.name,this.addRule(o)}matchNumber_(r){const e=r.match(new RegExp("^"+locale_1$2.LOCALE.MESSAGES.regexp.NUMBER)),n=r.match(new RegExp("^"+MathStore.regexp.NUMBER));if(!e&&!n)return null;const i=n&&n[0]===r;return e&&e[0]===r||!i?e?{number:e[0],length:e[0].length}:null:{number:n[0].replace(new RegExp(MathStore.regexp.DIGIT_GROUP,"g"),"X").replace(new RegExp(MathStore.regexp.DECIMAL_MARK,"g"),locale_1$2.LOCALE.MESSAGES.regexp.DECIMAL_MARK).replace(/X/g,locale_1$2.LOCALE.MESSAGES.regexp.DIGIT_GROUP.replace(/\\/g,"")),length:n[0].length}}}math_store.MathStore=MathStore;MathStore.regexp={NUMBER:"((\\d{1,3})(?=(,| ))((,| )\\d{3})*(\\.\\d+)?)|^\\d*\\.\\d+|^\\d+",DECIMAL_MARK:"\\.",DIGIT_GROUP:","};Object.defineProperty(braille_store,"__esModule",{value:!0});braille_store.BrailleStore=void 0;const semantic_annotations_1$1=semantic_annotations,math_store_1$1=math_store;class BrailleStore extends math_store_1$1.MathStore{constructor(){super(...arguments),this.modality="braille",this.customTranscriptions={"⋊":"⠈⠡⠳"}}evaluateString(r){const e=[],n=Array.from(r);for(let i=0;i<n.length;i++)e.push(this.evaluateCharacter(n[i]));return e}annotations(){for(let r=0,e;e=this.annotators[r];r++)(0,semantic_annotations_1$1.activate)(this.locale,e)}}braille_store.BrailleStore=BrailleStore;var trie={},trie_node={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TrieNodeKind=void 0,function(r){r.ROOT="root",r.DYNAMIC="dynamic",r.QUERY="query",r.BOOLEAN="boolean",r.STATIC="static"}(t.TrieNodeKind||(t.TrieNodeKind={}))})(trie_node);var trie_node_factory={},abstract_trie_node={};Object.defineProperty(abstract_trie_node,"__esModule",{value:!0});abstract_trie_node.StaticTrieNode=abstract_trie_node.AbstractTrieNode=void 0;const debugger_1$5=_debugger,trie_node_1$2=trie_node;class AbstractTrieNode{constructor(r,e){this.constraint=r,this.test=e,this.children_={},this.kind=trie_node_1$2.TrieNodeKind.ROOT}getConstraint(){return this.constraint}getKind(){return this.kind}applyTest(r){return this.test(r)}addChild(r){const e=r.getConstraint(),n=this.children_[e];return this.children_[e]=r,n}getChild(r){return this.children_[r]}getChildren(){const r=[];for(const e in this.children_)r.push(this.children_[e]);return r}findChildren(r){const e=[];for(const n in this.children_){const i=this.children_[n];i.applyTest(r)&&e.push(i)}return e}removeChild(r){delete this.children_[r]}toString(){return this.constraint}}abstract_trie_node.AbstractTrieNode=AbstractTrieNode;class StaticTrieNode extends AbstractTrieNode{constructor(r,e){super(r,e),this.rule_=null,this.kind=trie_node_1$2.TrieNodeKind.STATIC}getRule(){return this.rule_}setRule(r){this.rule_&&debugger_1$5.Debugger.getInstance().output("Replacing rule "+this.rule_+" with "+r),this.rule_=r}toString(){return this.getRule()?this.constraint+`
==> `+this.getRule().action:this.constraint}}abstract_trie_node.StaticTrieNode=StaticTrieNode;Object.defineProperty(trie_node_factory,"__esModule",{value:!0});trie_node_factory.BooleanTrieNode=trie_node_factory.QueryTrieNode=trie_node_factory.constraintTest_=trie_node_factory.DynamicTrieNode=trie_node_factory.RootTrieNode=trie_node_factory.getNode=void 0;const DomUtil$l=dom_util,XpathUtil$6=xpath_util,grammar_1$2=grammar,MathCompoundStore$2=math_compound_store,abstract_trie_node_1=abstract_trie_node,abstract_trie_node_2=abstract_trie_node,trie_node_1$1=trie_node;function getNode(t,r,e){switch(t){case trie_node_1$1.TrieNodeKind.ROOT:return new RootTrieNode;case trie_node_1$1.TrieNodeKind.DYNAMIC:return new DynamicTrieNode(r);case trie_node_1$1.TrieNodeKind.QUERY:return new QueryTrieNode(r,e);case trie_node_1$1.TrieNodeKind.BOOLEAN:return new BooleanTrieNode(r,e);default:return null}}trie_node_factory.getNode=getNode;class RootTrieNode extends abstract_trie_node_1.AbstractTrieNode{constructor(){super("",()=>!0),this.kind=trie_node_1$1.TrieNodeKind.ROOT}}trie_node_factory.RootTrieNode=RootTrieNode;class DynamicTrieNode extends abstract_trie_node_1.AbstractTrieNode{constructor(r){super(r,e=>e===r),this.kind=trie_node_1$1.TrieNodeKind.DYNAMIC}}trie_node_factory.DynamicTrieNode=DynamicTrieNode;const comparator={"=":(t,r)=>t===r,"!=":(t,r)=>t!==r,"<":(t,r)=>t<r,">":(t,r)=>t>r,"<=":(t,r)=>t<=r,">=":(t,r)=>t>=r};function constraintTest_(t){if(t.match(/^self::\*$/))return r=>!0;if(t.match(/^self::\w+$/)){const r=t.slice(6).toUpperCase();return e=>e.tagName&&DomUtil$l.tagName(e)===r}if(t.match(/^self::\w+:\w+$/)){const r=t.split(":"),e=XpathUtil$6.resolveNameSpace(r[2]);if(!e)return null;const n=r[3].toUpperCase();return i=>i.localName&&i.localName.toUpperCase()===n&&i.namespaceURI===e}if(t.match(/^@\w+$/)){const r=t.slice(1);return e=>e.hasAttribute&&e.hasAttribute(r)}if(t.match(/^@\w+="[\w\d ]+"$/)){const r=t.split("="),e=r[0].slice(1),n=r[1].slice(1,-1);return i=>i.hasAttribute&&i.hasAttribute(e)&&i.getAttribute(e)===n}if(t.match(/^@\w+!="[\w\d ]+"$/)){const r=t.split("!="),e=r[0].slice(1),n=r[1].slice(1,-1);return i=>!i.hasAttribute||!i.hasAttribute(e)||i.getAttribute(e)!==n}if(t.match(/^contains\(\s*@grammar\s*,\s*"[\w\d ]+"\s*\)$/)){const e=t.split('"')[1];return n=>!!grammar_1$2.Grammar.getInstance().getParameter(e)}if(t.match(/^not\(\s*contains\(\s*@grammar\s*,\s*"[\w\d ]+"\s*\)\s*\)$/)){const e=t.split('"')[1];return n=>!grammar_1$2.Grammar.getInstance().getParameter(e)}if(t.match(/^name\(\.\.\/\.\.\)="\w+"$/)){const e=t.split('"')[1].toUpperCase();return n=>{var i,o;return((o=(i=n.parentNode)===null||i===void 0?void 0:i.parentNode)===null||o===void 0?void 0:o.tagName)&&DomUtil$l.tagName(n.parentNode.parentNode)===e}}if(t.match(/^count\(preceding-sibling::\*\)=\d+$/)){const r=t.split("="),e=parseInt(r[1],10);return n=>{var i;return((i=n.parentNode)===null||i===void 0?void 0:i.childNodes[e])===n}}if(t.match(/^.+\[@category!?=".+"\]$/)){let[,r,e,n]=t.match(/^(.+)\[@category(!?=)"(.+)"\]$/);const i=n.match(/^unit:(.+)$/);let o="";return i&&(n=i[1],o=":unit"),a=>{const s=XpathUtil$6.evalXPath(r,a)[0];if(s){const l=MathCompoundStore$2.lookupCategory(s.textContent+o);return e==="="?l===n:l!==n}return!1}}if(t.match(/^string-length\(.+\)\W+\d+/)){const[,r,e,n]=t.match(/^string-length\((.+)\)(\W+)(\d+)/),i=comparator[e]||comparator["="],o=parseInt(n,10);return a=>{const s=XpathUtil$6.evalXPath(r,a)[0];return s?i(Array.from(s.textContent).length,o):!1}}return null}trie_node_factory.constraintTest_=constraintTest_;class QueryTrieNode extends abstract_trie_node_2.StaticTrieNode{constructor(r,e){super(r,constraintTest_(r)),this.context=e,this.kind=trie_node_1$1.TrieNodeKind.QUERY}applyTest(r){return this.test?this.test(r):this.context.applyQuery(r,this.constraint)===r}}trie_node_factory.QueryTrieNode=QueryTrieNode;class BooleanTrieNode extends abstract_trie_node_2.StaticTrieNode{constructor(r,e){super(r,constraintTest_(r)),this.context=e,this.kind=trie_node_1$1.TrieNodeKind.BOOLEAN}applyTest(r){return this.test?this.test(r):this.context.applyConstraint(r,this.constraint)}}trie_node_factory.BooleanTrieNode=BooleanTrieNode;Object.defineProperty(trie,"__esModule",{value:!0});trie.Trie=void 0;const trie_node_1=trie_node,trie_node_factory_1=trie_node_factory;class Trie{constructor(){this.root=(0,trie_node_factory_1.getNode)(trie_node_1.TrieNodeKind.ROOT,"",null)}static collectRules_(r){const e=[];let n=[r];for(;n.length;){const i=n.shift();if(i.getKind()===trie_node_1.TrieNodeKind.QUERY||i.getKind()===trie_node_1.TrieNodeKind.BOOLEAN){const o=i.getRule();o&&e.unshift(o)}n=n.concat(i.getChildren())}return e}static printWithDepth_(r,e,n){const i=new Array(e+2).join(e.toString())+": ";n+=i+r.toString()+`
`;const o=r.getChildren();for(let a=0,s;s=o[a];a++)n=Trie.printWithDepth_(s,e+1,n);return n}static order_(r){const e=r.getChildren();if(!e.length)return 0;const n=Math.max.apply(null,e.map(Trie.order_));return Math.max(e.length,n)}addRule(r){let e=this.root;const n=r.context,i=r.dynamicCstr.getValues();for(let a=0,s=i.length;a<s;a++)e=this.addNode_(e,i[a],trie_node_1.TrieNodeKind.DYNAMIC,n);e=this.addNode_(e,r.precondition.query,trie_node_1.TrieNodeKind.QUERY,n);const o=r.precondition.constraints;for(let a=0,s=o.length;a<s;a++)e=this.addNode_(e,o[a],trie_node_1.TrieNodeKind.BOOLEAN,n);e.setRule(r)}lookupRules(r,e){let n=[this.root];const i=[];for(;e.length;){const o=e.shift(),a=[];for(;n.length;)n.shift().getChildren().forEach(c=>{(c.getKind()!==trie_node_1.TrieNodeKind.DYNAMIC||o.indexOf(c.getConstraint())!==-1)&&a.push(c)});n=a.slice()}for(;n.length;){const o=n.shift();if(o.getRule){const s=o.getRule();s&&i.push(s)}const a=o.findChildren(r);n=n.concat(a)}return i}hasSubtrie(r){let e=this.root;for(let n=0,i=r.length;n<i;n++){const o=r[n];if(e=e.getChild(o),!e)return!1}return!0}toString(){return Trie.printWithDepth_(this.root,0,"")}collectRules(){return Trie.collectRules_(this.root)}order(){return Trie.order_(this.root)}enumerate(r){return this.enumerate_(this.root,r)}byConstraint(r){let e=this.root;for(;r.length&&e;){const n=r.shift();e=e.getChild(n)}return e||null}enumerate_(r,e){e=e||{};const n=r.getChildren();for(let i=0,o;o=n[i];i++)o.kind===trie_node_1.TrieNodeKind.DYNAMIC&&(e[o.getConstraint()]=this.enumerate_(o,e[o.getConstraint()]));return e}addNode_(r,e,n,i){let o=r.getChild(e);return o||(o=(0,trie_node_factory_1.getNode)(n,e,i),r.addChild(o)),o}}trie.Trie=Trie;Object.defineProperty(speech_rule_engine,"__esModule",{value:!0});speech_rule_engine.storeFactory=speech_rule_engine.SpeechRuleEngine=void 0;const auditory_description_1$1=auditory_description,debugger_1$4=_debugger,DomUtil$k=dom_util,engine_1$a=engine,EngineConst$c=engine_const,xpath_util_1=xpath_util,SpeechRules=speech_rules,SpeechRuleStores=speech_rule_stores,braille_store_1=braille_store,dynamic_cstr_1$2=dynamic_cstr,grammar_1$1=grammar,math_store_1=math_store,speech_rule_1=speech_rule,trie_1=trie;class SpeechRuleEngine{constructor(){this.trie=null,this.evaluators_={},this.trie=new trie_1.Trie}static getInstance(){return SpeechRuleEngine.instance=SpeechRuleEngine.instance||new SpeechRuleEngine,SpeechRuleEngine.instance}static debugSpeechRule(r,e){const n=r.precondition,i=r.context.applyQuery(e,n.query);debugger_1$4.Debugger.getInstance().output(n.query,i&&i.toString()),n.constraints.forEach(o=>debugger_1$4.Debugger.getInstance().output(o,r.context.applyConstraint(e,o)))}static debugNamedSpeechRule(r,e){const i=SpeechRuleEngine.getInstance().trie.collectRules().filter(o=>o.name==r);for(let o=0,a;a=i[o];o++)debugger_1$4.Debugger.getInstance().output("Rule",r,"DynamicCstr:",a.dynamicCstr.toString(),"number",o),SpeechRuleEngine.debugSpeechRule(a,e)}evaluateNode(r){(0,xpath_util_1.updateEvaluator)(r);const e=new Date().getTime();let n=[];try{n=this.evaluateNode_(r)}catch(o){console.error("Something went wrong computing speech."),debugger_1$4.Debugger.getInstance().output(o)}const i=new Date().getTime();return debugger_1$4.Debugger.getInstance().output("Time:",i-e),n}toString(){return this.trie.collectRules().map(e=>e.toString()).join(`
`)}runInSetting(r,e){const n=engine_1$a.default.getInstance(),i={};for(const a in r)i[a]=n[a],n[a]=r[a];n.setDynamicCstr();const o=e();for(const a in i)n[a]=i[a];return n.setDynamicCstr(),o}addStore(r){const e=storeFactory(r);e.kind!=="abstract"&&e.getSpeechRules().forEach(n=>this.trie.addRule(n)),this.addEvaluator(e)}processGrammar(r,e,n){const i={};for(const o in n){const a=n[o];i[o]=typeof a=="string"?r.constructString(e,a):a}grammar_1$1.Grammar.getInstance().pushState(i)}addEvaluator(r){const e=r.evaluateDefault.bind(r),n=this.evaluators_[r.locale];if(n){n[r.modality]=e;return}const i={};i[r.modality]=e,this.evaluators_[r.locale]=i}getEvaluator(r,e){const n=this.evaluators_[r]||this.evaluators_[dynamic_cstr_1$2.DynamicCstr.DEFAULT_VALUES[dynamic_cstr_1$2.Axis.LOCALE]];return n[e]||n[dynamic_cstr_1$2.DynamicCstr.DEFAULT_VALUES[dynamic_cstr_1$2.Axis.MODALITY]]}enumerate(r){return this.trie.enumerate(r)}evaluateNode_(r){return r?(this.updateConstraint_(),this.evaluateTree_(r)):[]}evaluateTree_(r){const e=engine_1$a.default.getInstance();let n;debugger_1$4.Debugger.getInstance().output(e.mode!==EngineConst$c.Mode.HTTP?r.toString():r),grammar_1$1.Grammar.getInstance().setAttribute(r);const i=this.lookupRule(r,e.dynamicCstr);if(!i)return e.strict?[]:(n=this.getEvaluator(e.locale,e.modality)(r),r.attributes&&this.addPersonality_(n,{},!1,r),n);debugger_1$4.Debugger.getInstance().generateOutput(()=>["Apply Rule:",i.name,i.dynamicCstr.toString(),(e.mode!==EngineConst$c.Mode.HTTP,r).toString()]);const o=i.context,a=i.action.components;n=[];for(let s=0,l;l=a[s];s++){let c=[];const f=l.content||"",d=l.attributes||{};let u=!1;l.grammar&&this.processGrammar(o,r,l.grammar);let m=null;if(d.engine){m=engine_1$a.default.getInstance().dynamicCstr.getComponents();const p=grammar_1$1.Grammar.parseInput(d.engine);engine_1$a.default.getInstance().setDynamicCstr(p)}switch(l.type){case speech_rule_1.ActionType.NODE:{const p=o.applyQuery(r,f);p&&(c=this.evaluateTree_(p))}break;case speech_rule_1.ActionType.MULTI:{u=!0;const p=o.applySelector(r,f);p.length>0&&(c=this.evaluateNodeList_(o,p,d.sepFunc,o.constructString(r,d.separator),d.ctxtFunc,o.constructString(r,d.context)))}break;case speech_rule_1.ActionType.TEXT:{const p=d.span,_={};if(p){const g=(0,xpath_util_1.evalXPath)(p,r);g.length&&(_.extid=g[0].getAttribute("extid"))}const y=o.constructString(r,f);(y||y==="")&&(Array.isArray(y)?c=y.map(function(g){return auditory_description_1$1.AuditoryDescription.create({text:g.speech,attributes:g.attributes},{adjust:!0})}):c=[auditory_description_1$1.AuditoryDescription.create({text:y,attributes:_},{adjust:!0})])}break;case speech_rule_1.ActionType.PERSONALITY:default:c=[auditory_description_1$1.AuditoryDescription.create({text:f})]}c[0]&&!u&&(d.context&&(c[0].context=o.constructString(r,d.context)+(c[0].context||"")),d.annotation&&(c[0].annotation=d.annotation)),this.addLayout(c,d,u),l.grammar&&grammar_1$1.Grammar.getInstance().popState(),n=n.concat(this.addPersonality_(c,d,u,r)),m&&engine_1$a.default.getInstance().setDynamicCstr(m)}return n}evaluateNodeList_(r,e,n,i,o,a){if(!e.length)return[];const s=i||"",l=a||"",c=r.contextFunctions.lookup(o),f=c?c(e,l):function(){return l},d=r.contextFunctions.lookup(n),u=d?d(e,s):function(){return[auditory_description_1$1.AuditoryDescription.create({text:s},{translate:!0})]};let m=[];for(let p=0,_;_=e[p];p++){const y=this.evaluateTree_(_);if(y.length>0&&(y[0].context=f()+(y[0].context||""),m=m.concat(y),p<e.length-1)){const g=u();m=m.concat(g)}}return m}addLayout(r,e,n){const i=e.layout;if(i){if(i.match(/^begin/)){r.unshift(new auditory_description_1$1.AuditoryDescription({text:"",layout:i}));return}if(i.match(/^end/)){r.push(new auditory_description_1$1.AuditoryDescription({text:"",layout:i}));return}r.unshift(new auditory_description_1$1.AuditoryDescription({text:"",layout:`begin${i}`})),r.push(new auditory_description_1$1.AuditoryDescription({text:"",layout:`end${i}`}))}}addPersonality_(r,e,n,i){const o={};let a=null;for(const s of EngineConst$c.personalityPropList){const l=e[s];if(typeof l>"u")continue;const c=parseFloat(l),f=isNaN(c)?l.charAt(0)==='"'?l.slice(1,-1):l:c;s===EngineConst$c.personalityProps.PAUSE?a=f:o[s]=f}for(let s=0,l;l=r[s];s++)this.addRelativePersonality_(l,o),this.addExternalAttributes_(l,i);if(n&&r.length&&delete r[r.length-1].personality[EngineConst$c.personalityProps.JOIN],a&&r.length){const s=r[r.length-1];s.text||Object.keys(s.personality).length?r.push(auditory_description_1$1.AuditoryDescription.create({text:"",personality:{pause:a}})):s.personality[EngineConst$c.personalityProps.PAUSE]=a}return r}addExternalAttributes_(r,e){if(e.hasAttributes()){const n=e.attributes;for(let i=n.length-1;i>=0;i--){const o=n[i].name;!r.attributes[o]&&o.match(/^ext/)&&(r.attributes[o]=n[i].value)}}}addRelativePersonality_(r,e){if(!r.personality)return r.personality=e,r;const n=r.personality;for(const i in e)n[i]&&typeof n[i]=="number"&&typeof e[i]=="number"?n[i]=n[i]+e[i]:n[i]||(n[i]=e[i]);return r}updateConstraint_(){const r=engine_1$a.default.getInstance().dynamicCstr,e=engine_1$a.default.getInstance().strict,n=this.trie,i={};let o=r.getValue(dynamic_cstr_1$2.Axis.LOCALE),a=r.getValue(dynamic_cstr_1$2.Axis.MODALITY),s=r.getValue(dynamic_cstr_1$2.Axis.DOMAIN);n.hasSubtrie([o,a,s])||(s=dynamic_cstr_1$2.DynamicCstr.DEFAULT_VALUES[dynamic_cstr_1$2.Axis.DOMAIN],n.hasSubtrie([o,a,s])||(a=dynamic_cstr_1$2.DynamicCstr.DEFAULT_VALUES[dynamic_cstr_1$2.Axis.MODALITY],n.hasSubtrie([o,a,s])||(o=dynamic_cstr_1$2.DynamicCstr.DEFAULT_VALUES[dynamic_cstr_1$2.Axis.LOCALE]))),i[dynamic_cstr_1$2.Axis.LOCALE]=[o],i[dynamic_cstr_1$2.Axis.MODALITY]=[a!=="summary"?a:dynamic_cstr_1$2.DynamicCstr.DEFAULT_VALUES[dynamic_cstr_1$2.Axis.MODALITY]],i[dynamic_cstr_1$2.Axis.DOMAIN]=[a!=="speech"?dynamic_cstr_1$2.DynamicCstr.DEFAULT_VALUES[dynamic_cstr_1$2.Axis.DOMAIN]:s];const l=r.getOrder();for(let c=0,f;f=l[c];c++)if(!i[f]){const d=r.getValue(f),u=this.makeSet_(d,r.preference),m=dynamic_cstr_1$2.DynamicCstr.DEFAULT_VALUES[f];!e&&d!==m&&u.push(m),i[f]=u}r.updateProperties(i)}makeSet_(r,e){return!e||!Object.keys(e).length?[r]:r.split(":")}lookupRule(r,e){if(!r||r.nodeType!==DomUtil$k.NodeType.ELEMENT_NODE&&r.nodeType!==DomUtil$k.NodeType.TEXT_NODE)return null;const n=this.lookupRules(r,e);return n.length>0?this.pickMostConstraint_(e,n):null}lookupRules(r,e){return this.trie.lookupRules(r,e.allProperties())}pickMostConstraint_(r,e){const n=engine_1$a.default.getInstance().comparator;return e.sort(function(i,o){return n.compare(i.dynamicCstr,o.dynamicCstr)||o.precondition.priority-i.precondition.priority||o.precondition.constraints.length-i.precondition.constraints.length||o.precondition.rank-i.precondition.rank}),debugger_1$4.Debugger.getInstance().generateOutput((()=>e.map(i=>i.name+"("+i.dynamicCstr.toString()+")")).bind(this)),e[0]}}speech_rule_engine.SpeechRuleEngine=SpeechRuleEngine;const stores=new Map;function getStore(t){return t==="braille"?new braille_store_1.BrailleStore:new math_store_1.MathStore}function storeFactory(t){const r=`${t.locale}.${t.modality}.${t.domain}`;if(t.kind==="actions"){const n=stores.get(r);return n.parse(t),n}SpeechRuleStores.init(),t&&!t.functions&&(t.functions=SpeechRules.getStore(t.locale,t.modality,t.domain));const e=getStore(t.modality);return stores.set(r,e),t.inherits&&(e.inherits=stores.get(`${t.inherits}.${t.modality}.${t.domain}`)),e.parse(t),e.initialize(),e}speech_rule_engine.storeFactory=storeFactory;engine_1$a.default.nodeEvaluator=SpeechRuleEngine.getInstance().evaluateNode.bind(SpeechRuleEngine.getInstance());var alphabet_generator={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.INTERVALS=t.makeLetter=t.numberRules=t.alphabetRules=t.getFont=t.makeInterval=t.generate=t.makeDomains_=t.Domains_=t.Base=t.Embellish=t.Font=void 0;const r=engine,e=l10n,n=locale$d,i=locale_util,o=math_compound_store;var a;(function(g){g.BOLD="bold",g.BOLDFRAKTUR="bold-fraktur",g.BOLDITALIC="bold-italic",g.BOLDSCRIPT="bold-script",g.DOUBLESTRUCK="double-struck",g.FULLWIDTH="fullwidth",g.FRAKTUR="fraktur",g.ITALIC="italic",g.MONOSPACE="monospace",g.NORMAL="normal",g.SCRIPT="script",g.SANSSERIF="sans-serif",g.SANSSERIFITALIC="sans-serif-italic",g.SANSSERIFBOLD="sans-serif-bold",g.SANSSERIFBOLDITALIC="sans-serif-bold-italic"})(a=t.Font||(t.Font={}));var s;(function(g){g.SUPER="super",g.SUB="sub",g.CIRCLED="circled",g.PARENTHESIZED="parenthesized",g.PERIOD="period",g.NEGATIVECIRCLED="negative-circled",g.DOUBLECIRCLED="double-circled",g.CIRCLEDSANSSERIF="circled-sans-serif",g.NEGATIVECIRCLEDSANSSERIF="negative-circled-sans-serif",g.COMMA="comma",g.SQUARED="squared",g.NEGATIVESQUARED="negative-squared"})(s=t.Embellish||(t.Embellish={}));var l;(function(g){g.LATINCAP="latinCap",g.LATINSMALL="latinSmall",g.GREEKCAP="greekCap",g.GREEKSMALL="greekSmall",g.DIGIT="digit"})(l=t.Base||(t.Base={})),t.Domains_={small:["default"],capital:["default"],digit:["default"]};function c(){const g=n.LOCALE.ALPHABETS,v=(x,b)=>{const S={};return Object.keys(x).forEach(M=>S[M]=!0),Object.keys(b).forEach(M=>S[M]=!0),Object.keys(S)};t.Domains_.small=v(g.smallPrefix,g.letterTrans),t.Domains_.capital=v(g.capPrefix,g.letterTrans),t.Domains_.digit=v(g.digitPrefix,g.digitTrans)}t.makeDomains_=c;function f(g){const v=r.default.getInstance().locale;r.default.getInstance().locale=g,e.setLocale(),o.addSymbolRules({locale:g}),c();const x=t.INTERVALS;for(let b=0,S;S=x[b];b++){const M=u(S.interval,S.subst),C=M.map(function(A){return String.fromCodePoint(parseInt(A,16))});if("offset"in S)_(M,C,S.font,S.category,S.offset||0);else{const A=n.LOCALE.ALPHABETS[S.base];p(M,C,A,S.font,S.category,!!S.capital)}}r.default.getInstance().locale=v,e.setLocale()}t.generate=f;function d(g){const v=g.toString(16).toUpperCase();return v.length>3?v:("000"+v).slice(-4)}function u([g,v],x){const b=parseInt(g,16),S=parseInt(v,16),M=[];for(let C=b;C<=S;C++){let A=d(C);x[A]!==!1&&(A=x[A]||A,M.push(A))}return M}t.makeInterval=u;function m(g){const v=g==="normal"||g==="fullwidth"?"":n.LOCALE.MESSAGES.font[g]||n.LOCALE.MESSAGES.embellish[g]||"";return(0,i.localeFontCombiner)(v)}t.getFont=m;function p(g,v,x,b,S,M){const C=m(b);for(let A=0,E,$,D;E=g[A],$=v[A],D=x[A];A++){const B=M?n.LOCALE.ALPHABETS.capPrefix:n.LOCALE.ALPHABETS.smallPrefix,F=M?t.Domains_.capital:t.Domains_.small;y(C.combiner,E,$,D,C.font,B,S,n.LOCALE.ALPHABETS.letterTrans,F)}}t.alphabetRules=p;function _(g,v,x,b,S){const M=m(x);for(let C=0,A,E;A=g[C],E=v[C];C++){const $=n.LOCALE.ALPHABETS.digitPrefix,D=C+S;y(M.combiner,A,E,D,M.font,$,b,n.LOCALE.ALPHABETS.digitTrans,t.Domains_.digit)}}t.numberRules=_;function y(g,v,x,b,S,M,C,A,E){for(let $=0,D;D=E[$];$++){const B=D in A?A[D]:A.default,F=D in M?M[D]:M.default;o.defineRule(v.toString(),D,"default",C,x,g(B(b),S,F))}}t.makeLetter=y,t.INTERVALS=[{interval:["1D400","1D419"],base:l.LATINCAP,subst:{},capital:!0,category:"Lu",font:a.BOLD},{interval:["1D41A","1D433"],base:l.LATINSMALL,subst:{},capital:!1,category:"Ll",font:a.BOLD},{interval:["1D56C","1D585"],base:l.LATINCAP,subst:{},capital:!0,category:"Lu",font:a.BOLDFRAKTUR},{interval:["1D586","1D59F"],base:l.LATINSMALL,subst:{},capital:!1,category:"Ll",font:a.BOLDFRAKTUR},{interval:["1D468","1D481"],base:l.LATINCAP,subst:{},capital:!0,category:"Lu",font:a.BOLDITALIC},{interval:["1D482","1D49B"],base:l.LATINSMALL,subst:{},capital:!1,category:"Ll",font:a.BOLDITALIC},{interval:["1D4D0","1D4E9"],base:l.LATINCAP,subst:{},capital:!0,category:"Lu",font:a.BOLDSCRIPT},{interval:["1D4EA","1D503"],base:l.LATINSMALL,subst:{},capital:!1,category:"Ll",font:a.BOLDSCRIPT},{interval:["1D538","1D551"],base:l.LATINCAP,subst:{"1D53A":"2102","1D53F":"210D","1D545":"2115","1D547":"2119","1D548":"211A","1D549":"211D","1D551":"2124"},capital:!0,category:"Lu",font:a.DOUBLESTRUCK},{interval:["1D552","1D56B"],base:l.LATINSMALL,subst:{},capital:!1,category:"Ll",font:a.DOUBLESTRUCK},{interval:["1D504","1D51D"],base:l.LATINCAP,subst:{"1D506":"212D","1D50B":"210C","1D50C":"2111","1D515":"211C","1D51D":"2128"},capital:!0,category:"Lu",font:a.FRAKTUR},{interval:["1D51E","1D537"],base:l.LATINSMALL,subst:{},capital:!1,category:"Ll",font:a.FRAKTUR},{interval:["FF21","FF3A"],base:l.LATINCAP,subst:{},capital:!0,category:"Lu",font:a.FULLWIDTH},{interval:["FF41","FF5A"],base:l.LATINSMALL,subst:{},capital:!1,category:"Ll",font:a.FULLWIDTH},{interval:["1D434","1D44D"],base:l.LATINCAP,subst:{},capital:!0,category:"Lu",font:a.ITALIC},{interval:["1D44E","1D467"],base:l.LATINSMALL,subst:{"1D455":"210E"},capital:!1,category:"Ll",font:a.ITALIC},{interval:["1D670","1D689"],base:l.LATINCAP,subst:{},capital:!0,category:"Lu",font:a.MONOSPACE},{interval:["1D68A","1D6A3"],base:l.LATINSMALL,subst:{},capital:!1,category:"Ll",font:a.MONOSPACE},{interval:["0041","005A"],base:l.LATINCAP,subst:{},capital:!0,category:"Lu",font:a.NORMAL},{interval:["0061","007A"],base:l.LATINSMALL,subst:{},capital:!1,category:"Ll",font:a.NORMAL},{interval:["1D49C","1D4B5"],base:l.LATINCAP,subst:{"1D49D":"212C","1D4A0":"2130","1D4A1":"2131","1D4A3":"210B","1D4A4":"2110","1D4A7":"2112","1D4A8":"2133","1D4AD":"211B"},capital:!0,category:"Lu",font:a.SCRIPT},{interval:["1D4B6","1D4CF"],base:l.LATINSMALL,subst:{"1D4BA":"212F","1D4BC":"210A","1D4C4":"2134"},capital:!1,category:"Ll",font:a.SCRIPT},{interval:["1D5A0","1D5B9"],base:l.LATINCAP,subst:{},capital:!0,category:"Lu",font:a.SANSSERIF},{interval:["1D5BA","1D5D3"],base:l.LATINSMALL,subst:{},capital:!1,category:"Ll",font:a.SANSSERIF},{interval:["1D608","1D621"],base:l.LATINCAP,subst:{},capital:!0,category:"Lu",font:a.SANSSERIFITALIC},{interval:["1D622","1D63B"],base:l.LATINSMALL,subst:{},capital:!1,category:"Ll",font:a.SANSSERIFITALIC},{interval:["1D5D4","1D5ED"],base:l.LATINCAP,subst:{},capital:!0,category:"Lu",font:a.SANSSERIFBOLD},{interval:["1D5EE","1D607"],base:l.LATINSMALL,subst:{},capital:!1,category:"Ll",font:a.SANSSERIFBOLD},{interval:["1D63C","1D655"],base:l.LATINCAP,subst:{},capital:!0,category:"Lu",font:a.SANSSERIFBOLDITALIC},{interval:["1D656","1D66F"],base:l.LATINSMALL,subst:{},capital:!1,category:"Ll",font:a.SANSSERIFBOLDITALIC},{interval:["0391","03A9"],base:l.GREEKCAP,subst:{"03A2":"03F4"},capital:!0,category:"Lu",font:a.NORMAL},{interval:["03B0","03D0"],base:l.GREEKSMALL,subst:{"03B0":"2207","03CA":"2202","03CB":"03F5","03CC":"03D1","03CD":"03F0","03CE":"03D5","03CF":"03F1","03D0":"03D6"},capital:!1,category:"Ll",font:a.NORMAL},{interval:["1D6A8","1D6C0"],base:l.GREEKCAP,subst:{},capital:!0,category:"Lu",font:a.BOLD},{interval:["1D6C1","1D6E1"],base:l.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:a.BOLD},{interval:["1D6E2","1D6FA"],base:l.GREEKCAP,subst:{},capital:!0,category:"Lu",font:a.ITALIC},{interval:["1D6FB","1D71B"],base:l.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:a.ITALIC},{interval:["1D71C","1D734"],base:l.GREEKCAP,subst:{},capital:!0,category:"Lu",font:a.BOLDITALIC},{interval:["1D735","1D755"],base:l.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:a.BOLDITALIC},{interval:["1D756","1D76E"],base:l.GREEKCAP,subst:{},capital:!0,category:"Lu",font:a.SANSSERIFBOLD},{interval:["1D76F","1D78F"],base:l.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:a.SANSSERIFBOLD},{interval:["1D790","1D7A8"],base:l.GREEKCAP,subst:{},capital:!0,category:"Lu",font:a.SANSSERIFBOLDITALIC},{interval:["1D7A9","1D7C9"],base:l.GREEKSMALL,subst:{},capital:!1,category:"Ll",font:a.SANSSERIFBOLDITALIC},{interval:["0030","0039"],base:l.DIGIT,subst:{},offset:0,category:"Nd",font:a.NORMAL},{interval:["2070","2079"],base:l.DIGIT,subst:{2071:"00B9",2072:"00B2",2073:"00B3"},offset:0,category:"No",font:s.SUPER},{interval:["2080","2089"],base:l.DIGIT,subst:{},offset:0,category:"No",font:s.SUB},{interval:["245F","2473"],base:l.DIGIT,subst:{"245F":"24EA"},offset:0,category:"No",font:s.CIRCLED},{interval:["3251","325F"],base:l.DIGIT,subst:{},offset:21,category:"No",font:s.CIRCLED},{interval:["32B1","32BF"],base:l.DIGIT,subst:{},offset:36,category:"No",font:s.CIRCLED},{interval:["2474","2487"],base:l.DIGIT,subst:{},offset:1,category:"No",font:s.PARENTHESIZED},{interval:["2487","249B"],base:l.DIGIT,subst:{2487:"1F100"},offset:0,category:"No",font:s.PERIOD},{interval:["2775","277F"],base:l.DIGIT,subst:{2775:"24FF"},offset:0,category:"No",font:s.NEGATIVECIRCLED},{interval:["24EB","24F4"],base:l.DIGIT,subst:{},offset:11,category:"No",font:s.NEGATIVECIRCLED},{interval:["24F5","24FE"],base:l.DIGIT,subst:{},offset:1,category:"No",font:s.DOUBLECIRCLED},{interval:["277F","2789"],base:l.DIGIT,subst:{"277F":"1F10B"},offset:0,category:"No",font:s.CIRCLEDSANSSERIF},{interval:["2789","2793"],base:l.DIGIT,subst:{2789:"1F10C"},offset:0,category:"No",font:s.NEGATIVECIRCLEDSANSSERIF},{interval:["FF10","FF19"],base:l.DIGIT,subst:{},offset:0,category:"Nd",font:a.FULLWIDTH},{interval:["1D7CE","1D7D7"],base:l.DIGIT,subst:{},offset:0,category:"Nd",font:a.BOLD},{interval:["1D7D8","1D7E1"],base:l.DIGIT,subst:{},offset:0,category:"Nd",font:a.DOUBLESTRUCK},{interval:["1D7E2","1D7EB"],base:l.DIGIT,subst:{},offset:0,category:"Nd",font:a.SANSSERIF},{interval:["1D7EC","1D7F5"],base:l.DIGIT,subst:{},offset:0,category:"Nd",font:a.SANSSERIFBOLD},{interval:["1D7F6","1D7FF"],base:l.DIGIT,subst:{},offset:0,category:"Nd",font:a.MONOSPACE},{interval:["1F101","1F10A"],base:l.DIGIT,subst:{},offset:0,category:"No",font:s.COMMA},{interval:["24B6","24CF"],base:l.LATINCAP,subst:{},capital:!0,category:"So",font:s.CIRCLED},{interval:["24D0","24E9"],base:l.LATINSMALL,subst:{},capital:!1,category:"So",font:s.CIRCLED},{interval:["1F110","1F129"],base:l.LATINCAP,subst:{},capital:!0,category:"So",font:s.PARENTHESIZED},{interval:["249C","24B5"],base:l.LATINSMALL,subst:{},capital:!1,category:"So",font:s.PARENTHESIZED},{interval:["1F130","1F149"],base:l.LATINCAP,subst:{},capital:!0,category:"So",font:s.SQUARED},{interval:["1F170","1F189"],base:l.LATINCAP,subst:{},capital:!0,category:"So",font:s.NEGATIVESQUARED},{interval:["1F150","1F169"],base:l.LATINCAP,subst:{},capital:!0,category:"So",font:s.NEGATIVECIRCLED}]})(alphabet_generator);var __awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(t,r,e,n){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(f){try{c(n.next(f))}catch(d){a(d)}}function l(f){try{c(n.throw(f))}catch(d){a(d)}}function c(f){f.done?o(f.value):i(f.value).then(s,l)}c((n=n.apply(t,r||[])).next())})};Object.defineProperty(math_map,"__esModule",{value:!0});math_map.loadAjax=math_map.loadFileSync=math_map.loadFile=math_map.parseMaps=math_map.retrieveFiles=math_map.standardLoader=math_map.loadLocale=math_map.store=void 0;const BrowserUtil$1=browser_util,engine_1$9=engine,EngineConst$b=engine_const,FileUtil$1=file_util,system_external_1$1=system_external,dynamic_cstr_1$1=dynamic_cstr,MathCompoundStore$1=math_compound_store,speech_rule_engine_1$2=speech_rule_engine,l10n_1=l10n,AlphabetGenerator=alphabet_generator;math_map.store=MathCompoundStore$1;const addSymbols={functions:MathCompoundStore$1.addFunctionRules,symbols:MathCompoundStore$1.addSymbolRules,units:MathCompoundStore$1.addUnitRules,si:MathCompoundStore$1.setSiPrefixes};let _init=!1;function loadLocale(t=engine_1$9.default.getInstance().locale){return __awaiter$1(this,void 0,void 0,function*(){return _init||(_loadLocale(dynamic_cstr_1$1.DynamicCstr.BASE_LOCALE),_init=!0),engine_1$9.EnginePromise.promises[dynamic_cstr_1$1.DynamicCstr.BASE_LOCALE].then(()=>__awaiter$1(this,void 0,void 0,function*(){const r=engine_1$9.default.getInstance().defaultLocale;return r?(_loadLocale(r),engine_1$9.EnginePromise.promises[r].then(()=>__awaiter$1(this,void 0,void 0,function*(){return _loadLocale(t),engine_1$9.EnginePromise.promises[t]}))):(_loadLocale(t),engine_1$9.EnginePromise.promises[t])}))})}math_map.loadLocale=loadLocale;function _loadLocale(t=engine_1$9.default.getInstance().locale){engine_1$9.EnginePromise.loaded[t]||(engine_1$9.EnginePromise.loaded[t]=[!1,!1],retrieveMaps(t))}function loadMethod(){return engine_1$9.default.getInstance().customLoader?engine_1$9.default.getInstance().customLoader:standardLoader()}function standardLoader(){switch(engine_1$9.default.getInstance().mode){case EngineConst$b.Mode.ASYNC:return loadFile;case EngineConst$b.Mode.HTTP:return loadAjax;case EngineConst$b.Mode.SYNC:default:return loadFileSync}}math_map.standardLoader=standardLoader;function retrieveFiles(t){const r=loadMethod(),e=new Promise(n=>{r(t).then(o=>{parseMaps(o),engine_1$9.EnginePromise.loaded[t]=[!0,!0],n(t)},o=>{engine_1$9.EnginePromise.loaded[t]=[!0,!1],console.error(`Unable to load locale: ${t}`),engine_1$9.default.getInstance().locale=engine_1$9.default.getInstance().defaultLocale,n(t)})});engine_1$9.EnginePromise.promises[t]=e}math_map.retrieveFiles=retrieveFiles;function parseMaps(t){const r=JSON.parse(t);addMaps(r)}math_map.parseMaps=parseMaps;function addMaps(t,r){let e=!0;for(let n=0,i;i=Object.keys(t)[n];n++){const o=i.split("/");r&&r!==o[0]||(o[1]==="rules"?speech_rule_engine_1$2.SpeechRuleEngine.getInstance().addStore(t[i]):o[1]==="messages"?(0,l10n_1.completeLocale)(t[i]):(e&&(AlphabetGenerator.generate(o[0]),e=!1),t[i].forEach(addSymbols[o[1]])))}}function retrieveMaps(t){if(engine_1$9.default.getInstance().isIE&&engine_1$9.default.getInstance().mode===EngineConst$b.Mode.HTTP){getJsonIE_(t);return}retrieveFiles(t)}function getJsonIE_(t,r){let e=r||1;if(!BrowserUtil$1.mapsForIE){e<=5&&setTimeout((()=>getJsonIE_(t,e++)).bind(this),300);return}addMaps(BrowserUtil$1.mapsForIE,t)}function loadFile(t){const r=FileUtil$1.localePath(t);return new Promise((e,n)=>{system_external_1$1.default.fs.readFile(r,"utf8",(i,o)=>{if(i)return n(i);e(o)})})}math_map.loadFile=loadFile;function loadFileSync(t){const r=FileUtil$1.localePath(t);return new Promise((e,n)=>{let i="{}";try{i=system_external_1$1.default.fs.readFileSync(r,"utf8")}catch(o){return n(o)}e(i)})}math_map.loadFileSync=loadFileSync;function loadAjax(t){const r=FileUtil$1.localePath(t),e=new XMLHttpRequest;return new Promise((n,i)=>{e.onreadystatechange=function(){if(e.readyState===4){const o=e.status;o===0||o>=200&&o<400?n(e.responseText):i(o)}},e.open("GET",r,!0),e.send()})}math_map.loadAjax=loadAjax;var __awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(t,r,e,n){function i(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(f){try{c(n.next(f))}catch(d){a(d)}}function l(f){try{c(n.throw(f))}catch(d){a(d)}}function c(f){f.done?o(f.value):i(f.value).then(s,l)}c((n=n.apply(t,r||[])).next())})};Object.defineProperty(engine_setup,"__esModule",{value:!0});engine_setup.setup=void 0;const L10n=l10n,MathMap=math_map,BrowserUtil=browser_util,debugger_1$3=_debugger,engine_1$8=engine,FileUtil=file_util,system_external_1=system_external;function setup(t){return __awaiter(this,void 0,void 0,function*(){const r=engine_1$8.default.getInstance();t.domain==="default"&&(t.modality==="speech"||!t.modality||r.modality==="speech")&&(t.domain="mathspeak");const e=i=>{typeof t[i]<"u"&&(r[i]=!!t[i])},n=i=>{typeof t[i]<"u"&&(r[i]=t[i])};return n("mode"),r.configurate(t),engine_1$8.default.BINARY_FEATURES.forEach(e),engine_1$8.default.STRING_FEATURES.forEach(n),t.debug&&debugger_1$3.Debugger.getInstance().init(),t.json&&(system_external_1.default.jsonPath=FileUtil.makePath(t.json)),t.xpath&&(system_external_1.default.WGXpath=t.xpath),r.setCustomLoader(t.custom),setupBrowsers(r),L10n.setLocale(),r.setDynamicCstr(),r.init?(engine_1$8.EnginePromise.promises.init=new Promise((i,o)=>{setTimeout(()=>{i("init")},10)}),r.init=!1,engine_1$8.EnginePromise.get()):r.delay?(r.delay=!1,engine_1$8.EnginePromise.get()):MathMap.loadLocale()})}engine_setup.setup=setup;function setupBrowsers(t){t.isIE=BrowserUtil.detectIE(),t.isEdge=BrowserUtil.detectEdge()}var processor_factory={},aural_rendering={},acss_renderer={},event_util={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Event=t.EventType=t.Move=t.KeyCode=void 0,function(e){e[e.ENTER=13]="ENTER",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.TAB=9]="TAB",e[e.LESS=188]="LESS",e[e.GREATER=190]="GREATER",e[e.DASH=189]="DASH",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z"}(t.KeyCode||(t.KeyCode={})),t.Move=new Map([[13,"ENTER"],[27,"ESC"],[32,"SPACE"],[33,"PAGE_UP"],[34,"PAGE_DOWN"],[35,"END"],[36,"HOME"],[37,"LEFT"],[38,"UP"],[39,"RIGHT"],[40,"DOWN"],[9,"TAB"],[188,"LESS"],[190,"GREATER"],[189,"DASH"],[48,"ZERO"],[49,"ONE"],[50,"TWO"],[51,"THREE"],[52,"FOUR"],[53,"FIVE"],[54,"SIX"],[55,"SEVEN"],[56,"EIGHT"],[57,"NINE"],[65,"A"],[66,"B"],[67,"C"],[68,"D"],[69,"E"],[70,"F"],[71,"G"],[72,"H"],[73,"I"],[74,"J"],[75,"K"],[76,"L"],[77,"M"],[78,"N"],[79,"O"],[80,"P"],[81,"Q"],[82,"R"],[83,"S"],[84,"T"],[85,"U"],[86,"V"],[87,"W"],[88,"X"],[89,"Y"],[90,"Z"]]),function(e){e.CLICK="click",e.DBLCLICK="dblclick",e.MOUSEDOWN="mousedown",e.MOUSEUP="mouseup",e.MOUSEOVER="mouseover",e.MOUSEOUT="mouseout",e.MOUSEMOVE="mousemove",e.SELECTSTART="selectstart",e.KEYPRESS="keypress",e.KEYDOWN="keydown",e.KEYUP="keyup",e.TOUCHSTART="touchstart",e.TOUCHMOVE="touchmove",e.TOUCHEND="touchend",e.TOUCHCANCEL="touchcancel"}(t.EventType||(t.EventType={}));class r{constructor(n,i,o){this.src=n,this.type=i,this.callback=o}add(){this.src.addEventListener(this.type,this.callback)}remove(){this.src.removeEventListener(this.type,this.callback)}}t.Event=r})(event_util);var audio_util={};Object.defineProperty(audio_util,"__esModule",{value:!0});audio_util.isSpanElement=audio_util.isPauseElement=audio_util.isMarkupElement=audio_util.personalityMarkup=audio_util.sortClose=audio_util.mergeMarkup=audio_util.mergePause=void 0;const base_util_1$1=base_util,EngineConst$a=engine_const,span_1$1=span;function mergePause(t,r,e){return t?{pause:mergePause_(t.pause,r.pause,e)}:r}audio_util.mergePause=mergePause;function mergePause_(t,r,e){return(e||function(i,o){return typeof i=="number"&&typeof o=="number"?i+o:typeof i=="number"?o:typeof o=="number"?i:[t,r].sort()[0]}).call(null,t,r)}function mergeMarkup(t,r){delete t.open,r.close.forEach(n=>delete t[n]),r.open.forEach(n=>t[n]=r[n]);const e=Object.keys(t);t.open=e}audio_util.mergeMarkup=mergeMarkup;function sortClose(t,r){if(t.length<=1)return t;const e=[];for(let n=0,i;i=r[n],t.length;n++)!i.close||!i.close.length||i.close.forEach(function(o){const a=t.indexOf(o);a!==-1&&(e.unshift(o),t.splice(a,1))});return e}audio_util.sortClose=sortClose;let PersonalityRanges_={},LastOpen_=[];function personalityMarkup(t){PersonalityRanges_={},LastOpen_=[];let r=[];const e={};for(let n=0,i;i=t[n];n++){let o=null;const a=i.descriptionSpan(),s=i.personality,l=s[EngineConst$a.personalityProps.JOIN];delete s[EngineConst$a.personalityProps.JOIN],typeof s[EngineConst$a.personalityProps.PAUSE]<"u"&&(o={[EngineConst$a.personalityProps.PAUSE]:s[EngineConst$a.personalityProps.PAUSE]},delete s[EngineConst$a.personalityProps.PAUSE]);const c=personalityDiff_(s,e);appendMarkup_(r,a,c,l,o,!0)}return r=r.concat(finaliseMarkup_()),r=simplifyMarkup_(r),r}audio_util.personalityMarkup=personalityMarkup;function appendElement_(t,r){const e=t[t.length-1];if(!e){t.push(r);return}if(isSpanElement(r)&&isSpanElement(e)){if(typeof e.join>"u"){e.span=e.span.concat(r.span);return}const n=e.span.pop(),i=r.span.shift();e.span.push(n+e.join+i),e.span=e.span.concat(r.span),e.join=r.join;return}if(isPauseElement(r)&&isPauseElement(e)){e.pause=mergePause_(e.pause,r.pause);return}t.push(r)}function simplifyMarkup_(t){const r={},e=[];for(let n=0,i;i=t[n];n++){if(!isMarkupElement(i)){appendElement_(e,i);continue}if(!i.close||i.close.length!==1||i.open.length){copyValues_(i,r),e.push(i);continue}let o=t[n+1];if(!o||isSpanElement(o)){copyValues_(i,r),e.push(i);continue}const a=isPauseElement(o)?o:null;a&&(o=t[n+2]),o&&isMarkupElement(o)&&o.open[0]===i.close[0]&&!o.close.length&&o[o.open[0]]===r[o.open[0]]?a?(appendElement_(e,a),n=n+2):n=n+1:(copyValues_(i,r),e.push(i))}return e}function copyValues_(t,r){t.rate&&(r.rate=t.rate),t.pitch&&(r.pitch=t.pitch),t.volume&&(r.volume=t.volume)}function finaliseMarkup_(){const t=[];for(let r=LastOpen_.length-1;r>=0;r--){const e=LastOpen_[r];if(e.length){const n={open:[],close:[]};for(let i=0;i<e.length;i++){const o=e[i];n.close.push(o),n[o]=0}t.push(n)}}return t}function isMarkupElement(t){return typeof t=="object"&&t.open}audio_util.isMarkupElement=isMarkupElement;function isPauseElement(t){return typeof t=="object"&&Object.keys(t).length===1&&Object.keys(t)[0]===EngineConst$a.personalityProps.PAUSE}audio_util.isPauseElement=isPauseElement;function isSpanElement(t){const r=Object.keys(t);return typeof t=="object"&&(r.length===1&&r[0]==="span"||r.length===2&&(r[0]==="span"&&r[1]==="join"||r[1]==="span"&&r[0]==="join"))}audio_util.isSpanElement=isSpanElement;function appendMarkup_(t,r,e,n,i,o=!1){if(o){const a=t[t.length-1];let s;if(a&&(s=a[EngineConst$a.personalityProps.JOIN]),a&&!r.speech&&i&&isPauseElement(a)){const l=EngineConst$a.personalityProps.PAUSE;a[l]=mergePause_(a[l],i[l]),i=null}if(a&&r.speech&&Object.keys(e).length===0&&isSpanElement(a)){if(typeof s<"u"){const l=a.span.pop();r=new span_1$1.Span(l.speech+s+r.speech,l.attributes)}a.span.push(r),r=new span_1$1.Span("",{}),a[EngineConst$a.personalityProps.JOIN]=n}}Object.keys(e).length!==0&&t.push(e),r.speech&&t.push({span:[r],join:n}),i&&t.push(i)}function personalityDiff_(t,r){if(!r)return t;const e={};for(const n of EngineConst$a.personalityPropList){const i=t[n],o=r[n];if(!i&&!o||i&&o&&i===o)continue;const a=i||0;isMarkupElement(e)||(e.open=[],e.close=[]),i||e.close.push(n),o||e.open.push(n),o&&i&&(e.close.push(n),e.open.push(n)),r[n]=a,e[n]=a,PersonalityRanges_[n]?PersonalityRanges_[n].push(a):PersonalityRanges_[n]=[a]}if(isMarkupElement(e)){let n=e.close.slice();for(;n.length>0;){let i=LastOpen_.pop();const o=(0,base_util_1$1.setdifference)(i,n);if(n=(0,base_util_1$1.setdifference)(n,i),i=o,n.length===0){i.length!==0&&LastOpen_.push(i);continue}if(i.length!==0){e.close=e.close.concat(i),e.open=e.open.concat(i);for(let a=0,s;s=i[a];a++)e[s]=r[s]}}LastOpen_.push(e.open)}return e}var markup_renderer={},abstract_audio_renderer={};Object.defineProperty(abstract_audio_renderer,"__esModule",{value:!0});abstract_audio_renderer.AbstractAudioRenderer=void 0;const engine_1$7=engine;class AbstractAudioRenderer{constructor(){this.separator_=" "}setSeparator(r){this.separator_=r}getSeparator(){return engine_1$7.default.getInstance().modality==="braille"?"":this.separator_}error(r){return null}merge(r){let e="";const n=r.length-1;for(let i=0,o;o=r[i];i++)if(e+=o.speech,i<n){const a=o.attributes.separator;e+=a!==void 0?a:this.getSeparator()}return e}finalize(r){return r}pauseValue(r){let e;switch(r){case"long":e=750;break;case"medium":e=500;break;case"short":e=250;break;default:e=parseInt(r,10)}return Math.floor(e*engine_1$7.default.getInstance().getRate()/100)}}abstract_audio_renderer.AbstractAudioRenderer=AbstractAudioRenderer;Object.defineProperty(markup_renderer,"__esModule",{value:!0});markup_renderer.MarkupRenderer=void 0;const EngineConst$9=engine_const,abstract_audio_renderer_1$2=abstract_audio_renderer;class MarkupRenderer extends abstract_audio_renderer_1$2.AbstractAudioRenderer{constructor(){super(...arguments),this.ignoreElements=[EngineConst$9.personalityProps.LAYOUT],this.scaleFunction=null}setScaleFunction(r,e,n,i,o=0){this.scaleFunction=a=>{const s=(a-r)/(e-r),l=n*(1-s)+i*s;return+(Math.round(l+"e+"+o)+"e-"+o)}}applyScaleFunction(r){return this.scaleFunction?this.scaleFunction(r):r}ignoreElement(r){return this.ignoreElements.indexOf(r)!==-1}}markup_renderer.MarkupRenderer=MarkupRenderer;Object.defineProperty(acss_renderer,"__esModule",{value:!0});acss_renderer.AcssRenderer=void 0;const EngineConst$8=engine_const,EventUtil=event_util,AudioUtil$3=audio_util,markup_renderer_1$1=markup_renderer;class AcssRenderer extends markup_renderer_1$1.MarkupRenderer{markup(r){this.setScaleFunction(-2,2,0,10,0);const e=AudioUtil$3.personalityMarkup(r),n=[],i={open:[]};let o=null,a=!1;for(let s=0,l;l=e[s];s++){if(AudioUtil$3.isMarkupElement(l)){AudioUtil$3.mergeMarkup(i,l);continue}if(AudioUtil$3.isPauseElement(l)){a&&(o=AudioUtil$3.mergePause(o,l,Math.max));continue}const c='"'+this.merge(l.span)+'"';a=!0,o&&(n.push(this.pause(o)),o=null);const f=this.prosody_(i);n.push(f?"(text ("+f+") "+c+")":c)}return"(exp "+n.join(" ")+")"}error(r){return'(error "'+EventUtil.Move.get(r)+'")'}prosodyElement(r,e){switch(e=this.applyScaleFunction(e),r){case EngineConst$8.personalityProps.RATE:return"(richness . "+e+")";case EngineConst$8.personalityProps.PITCH:return"(average-pitch . "+e+")";case EngineConst$8.personalityProps.VOLUME:return"(stress . "+e+")"}return"(value . "+e+")"}pause(r){return"(pause . "+this.pauseValue(r[EngineConst$8.personalityProps.PAUSE])+")"}prosody_(r){const e=r.open,n=[];for(let i=0,o;o=e[i];i++)n.push(this.prosodyElement(o,r[o]));return n.join(" ")}}acss_renderer.AcssRenderer=AcssRenderer;var layout_renderer={},xml_renderer={};Object.defineProperty(xml_renderer,"__esModule",{value:!0});xml_renderer.XmlRenderer=void 0;const engine_1$6=engine,AudioUtil$2=audio_util,markup_renderer_1=markup_renderer;class XmlRenderer extends markup_renderer_1.MarkupRenderer{markup(r){this.setScaleFunction(-2,2,-100,100,2);const e=AudioUtil$2.personalityMarkup(r),n=[],i=[];for(let o=0,a;a=e[o];o++){if(a.span){n.push(this.merge(a.span));continue}if(AudioUtil$2.isPauseElement(a)){n.push(this.pause(a));continue}if(a.close.length)for(let s=0;s<a.close.length;s++){const l=i.pop();if(a.close.indexOf(l)===-1)throw new engine_1$6.SREError("Unknown closing markup element: "+l);n.push(this.closeTag(l))}a.open.length&&AudioUtil$2.sortClose(a.open.slice(),e.slice(o+1)).forEach(l=>{n.push(this.prosodyElement(l,a[l])),i.push(l)})}return n.join(" ")}}xml_renderer.XmlRenderer=XmlRenderer;Object.defineProperty(layout_renderer,"__esModule",{value:!0});layout_renderer.LayoutRenderer=void 0;const debugger_1$2=_debugger,DomUtil$j=dom_util,EngineConst$7=engine_const,AudioUtil$1=audio_util,xml_renderer_1$3=xml_renderer;class LayoutRenderer extends xml_renderer_1$3.XmlRenderer{finalize(r){return setTwoDim(r)}pause(r){return""}prosodyElement(r,e){return r===EngineConst$7.personalityProps.LAYOUT?`<${e}>`:""}closeTag(r){return`</${r}>`}markup(r){const e=[];let n=[];for(const i of r){if(!i.layout){n.push(i);continue}e.push(this.processContent(n)),n=[];const o=i.layout;if(o.match(/^begin/)){e.push("<"+o.replace(/^begin/,"")+">");continue}if(o.match(/^end/)){e.push("</"+o.replace(/^end/,"")+">");continue}console.warn("Something went wrong with layout markup: "+o)}return e.push(this.processContent(n)),e.join("")}processContent(r){const e=[],n=AudioUtil$1.personalityMarkup(r);for(let i=0,o;o=n[i];i++){if(o.span){e.push(this.merge(o.span));continue}AudioUtil$1.isPauseElement(o)}return e.join("")}}layout_renderer.LayoutRenderer=LayoutRenderer;let twodExpr="";const handlers={TABLE:handleTable,CASES:handleCases,CAYLEY:handleCayley,MATRIX:handleMatrix,CELL:recurseTree,FENCE:recurseTree,ROW:recurseTree,FRACTION:handleFraction,NUMERATOR:handleFractionPart,DENOMINATOR:handleFractionPart};function applyHandler(t){const r=DomUtil$j.tagName(t),e=handlers[r];return e?e(t):t.textContent}function setTwoDim(t){twodExpr="";const r=DomUtil$j.parseInput(`<all>${t}</all>`);return debugger_1$2.Debugger.getInstance().output(DomUtil$j.formatXml(r.toString())),twodExpr=recurseTree(r),twodExpr}function combineContent(t,r){if(!t||!r)return t+r;const e=strHeight(t),n=strHeight(r),i=e-n;t=i<0?padCell(t,n,strWidth(t)):t,r=i>0?padCell(r,e,strWidth(r)):r;const o=t.split(/\r\n|\r|\n/),a=r.split(/\r\n|\r|\n/),s=[];for(let l=0;l<o.length;l++)s.push(o[l]+a[l]);return s.join(`
`)}function recurseTree(t){let r="";for(const e of Array.from(t.childNodes)){if(e.nodeType===DomUtil$j.NodeType.TEXT_NODE){r=combineContent(r,e.textContent);continue}r=combineContent(r,applyHandler(e))}return r}function strHeight(t){return t.split(/\r\n|\r|\n/).length}function strWidth(t){return t.split(/\r\n|\r|\n/).reduce((r,e)=>Math.max(e.length,r),0)}function padHeight(t,r){const e=r-strHeight(t);return t+(e>0?new Array(e+1).join(`
`):"")}function padWidth(t,r){const e=t.split(/\r\n|\r|\n/),n=[];for(const i of e){const o=r-i.length;n.push(i+(o>0?new Array(o+1).join("⠀"):""))}return n.join(`
`)}function padCell(t,r,e){return t=padHeight(t,r),padWidth(t,e)}function assembleRows(t){const r=Array.from(t.childNodes),e=[];for(const n of r)n.nodeType===DomUtil$j.NodeType.ELEMENT_NODE&&e.push(handleRow(n));return e}function getMaxParameters(t){const r=t.reduce((n,i)=>Math.max(i.height,n),0),e=[];for(let n=0;n<t[0].width.length;n++)e.push(t.map(i=>i.width[n]).reduce((i,o)=>Math.max(i,o),0));return[r,e]}function combineCells(t,r){const e=[];for(const n of t){if(n.height===0)continue;const i=[];for(let o=0;o<n.cells.length;o++)i.push(padCell(n.cells[o],n.height,r[o]));n.cells=i,e.push(n)}return e}function combineRows(t,r){if(r===1)return t.map(n=>n.lfence+n.cells.join(n.sep)+n.rfence).join(`
`);const e=[];for(const n of t){const i=verticalArrange(n.sep,n.height);let o=n.cells.shift();for(;n.cells.length;)o=combineContent(o,i),o=combineContent(o,n.cells.shift());o=combineContent(verticalArrange(n.lfence,n.height),o),o=combineContent(o,verticalArrange(n.rfence,n.height)),e.push(o),e.push(n.lfence+new Array(strWidth(o)-3).join(n.sep)+n.rfence)}return e.slice(0,-1).join(`
`)}function verticalArrange(t,r){let e="";for(;r;)e+=t+`
`,r--;return e.slice(0,-1)}function getFence(t){return t.nodeType===DomUtil$j.NodeType.ELEMENT_NODE&&DomUtil$j.tagName(t)==="FENCE"?applyHandler(t):""}function handleMatrix(t){let r=assembleRows(t);const[e,n]=getMaxParameters(r);return r=combineCells(r,n),combineRows(r,e)}function handleTable(t){let r=assembleRows(t);r.forEach(i=>{i.cells=i.cells.slice(1).slice(0,-1),i.width=i.width.slice(1).slice(0,-1)});const[e,n]=getMaxParameters(r);return r=combineCells(r,n),combineRows(r,e)}function handleCases(t){let r=assembleRows(t);r.forEach(i=>{i.cells=i.cells.slice(0,-1),i.width=i.width.slice(0,-1)});const[e,n]=getMaxParameters(r);return r=combineCells(r,n),combineRows(r,e)}function handleCayley(t){let r=assembleRows(t);r.forEach(o=>{o.cells=o.cells.slice(1).slice(0,-1),o.width=o.width.slice(1).slice(0,-1),o.sep=o.sep+o.sep});const[e,n]=getMaxParameters(r),i={lfence:"",rfence:"",cells:n.map(o=>"⠐"+new Array(o).join("⠒")),width:n,height:1,sep:r[0].sep};return r.splice(1,0,i),r=combineCells(r,n),combineRows(r,e)}function handleRow(t){const r=Array.from(t.childNodes),e=getFence(r[0]),n=getFence(r[r.length-1]);e&&r.shift(),n&&r.pop();let i="";const o=[];for(const a of r){if(a.nodeType===DomUtil$j.NodeType.TEXT_NODE){i=a.textContent;continue}const s=applyHandler(a);o.push(s)}return{lfence:e,rfence:n,sep:i,cells:o,height:o.reduce((a,s)=>Math.max(strHeight(s),a),0),width:o.map(strWidth)}}function centerCell(t,r){const e=strWidth(t),n=(r-e)/2,[i,o]=Math.floor(n)===n?[n,n]:[Math.floor(n),Math.ceil(n)],a=t.split(/\r\n|\r|\n/),s=[],[l,c]=[new Array(i+1).join("⠀"),new Array(o+1).join("⠀")];for(const f of a)s.push(l+f+c);return s.join(`
`)}function handleFraction(t){const[r,e,,n,i]=Array.from(t.childNodes),o=applyHandler(e),a=applyHandler(n),s=strWidth(o),l=strWidth(a);let c=Math.max(s,l);const f=r+new Array(c+1).join("⠒")+i;return c=f.length,`${centerCell(o,c)}
${f}
${centerCell(a,c)}`}function handleFractionPart(t){const r=t.firstChild,e=recurseTree(t);if(r&&r.nodeType===DomUtil$j.NodeType.ELEMENT_NODE){if(DomUtil$j.tagName(r)==="ENGLISH")return"⠰"+e;if(DomUtil$j.tagName(r)==="NUMBER")return"⠼"+e}return e}var punctuation_renderer={};Object.defineProperty(punctuation_renderer,"__esModule",{value:!0});punctuation_renderer.PunctuationRenderer=void 0;const EngineConst$6=engine_const,abstract_audio_renderer_1$1=abstract_audio_renderer,AudioUtil=audio_util;class PunctuationRenderer extends abstract_audio_renderer_1$1.AbstractAudioRenderer{markup(r){const e=AudioUtil.personalityMarkup(r);let n="",i=null,o=!1;for(let a=0,s;s=e[a];a++)if(!AudioUtil.isMarkupElement(s)){if(AudioUtil.isPauseElement(s)){o&&(i=AudioUtil.mergePause(i,s,Math.max));continue}i&&(n+=this.pause(i[EngineConst$6.personalityProps.PAUSE]),i=null),n+=(o?this.getSeparator():"")+this.merge(s.span),o=!0}return n}pause(r){let e;return typeof r=="number"?r<=250?e="short":r<=500?e="medium":e="long":e=r,PunctuationRenderer.PAUSE_PUNCTUATION.get(e)||""}}punctuation_renderer.PunctuationRenderer=PunctuationRenderer;PunctuationRenderer.PAUSE_PUNCTUATION=new Map([["short",","],["medium",";"],["long","."]]);var sable_renderer={};Object.defineProperty(sable_renderer,"__esModule",{value:!0});sable_renderer.SableRenderer=void 0;const EngineConst$5=engine_const,xml_renderer_1$2=xml_renderer;class SableRenderer extends xml_renderer_1$2.XmlRenderer{finalize(r){return'<?xml version="1.0"?><!DOCTYPE SABLE PUBLIC "-//SABLE//DTD SABLE speech mark up//EN" "Sable.v0_2.dtd" []><SABLE>'+this.getSeparator()+r+this.getSeparator()+"</SABLE>"}pause(r){return'<BREAK MSEC="'+this.pauseValue(r[EngineConst$5.personalityProps.PAUSE])+'"/>'}prosodyElement(r,e){switch(e=this.applyScaleFunction(e),r){case EngineConst$5.personalityProps.PITCH:return'<PITCH RANGE="'+e+'%">';case EngineConst$5.personalityProps.RATE:return'<RATE SPEED="'+e+'%">';case EngineConst$5.personalityProps.VOLUME:return'<VOLUME LEVEL="'+e+'%">';default:return"<"+r.toUpperCase()+' VALUE="'+e+'">'}}closeTag(r){return"</"+r.toUpperCase()+">"}}sable_renderer.SableRenderer=SableRenderer;var ssml_renderer={};Object.defineProperty(ssml_renderer,"__esModule",{value:!0});ssml_renderer.SsmlRenderer=void 0;const engine_1$5=engine,EngineConst$4=engine_const,xml_renderer_1$1=xml_renderer;class SsmlRenderer extends xml_renderer_1$1.XmlRenderer{finalize(r){return'<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis"><prosody rate="'+engine_1$5.default.getInstance().getRate()+'%">'+this.getSeparator()+r+this.getSeparator()+"</prosody></speak>"}pause(r){return'<break time="'+this.pauseValue(r[EngineConst$4.personalityProps.PAUSE])+'ms"/>'}prosodyElement(r,e){e=Math.floor(this.applyScaleFunction(e));const n=e<0?e.toString():"+"+e.toString();return"<prosody "+r.toLowerCase()+'="'+n+(r===EngineConst$4.personalityProps.VOLUME?">":'%">')}closeTag(r){return"</prosody>"}}ssml_renderer.SsmlRenderer=SsmlRenderer;var ssml_step_renderer={};Object.defineProperty(ssml_step_renderer,"__esModule",{value:!0});ssml_step_renderer.SsmlStepRenderer=void 0;const ssml_renderer_1$1=ssml_renderer;class SsmlStepRenderer extends ssml_renderer_1$1.SsmlRenderer{markup(r){return SsmlStepRenderer.MARKS={},super.markup(r)}merge(r){const e=[];for(let n=0;n<r.length;n++){const i=r[n],o=i.attributes.extid;o&&!SsmlStepRenderer.MARKS[o]&&(e.push('<mark name="'+o+'"/>'),SsmlStepRenderer.MARKS[o]=!0),i.speech.length===1&&i.speech.match(/[a-zA-Z]/)?e.push('<say-as interpret-as="'+SsmlStepRenderer.CHARACTER_ATTR+'">'+i.speech+"</say-as>"):e.push(i.speech)}return e.join(this.getSeparator())}}ssml_step_renderer.SsmlStepRenderer=SsmlStepRenderer;SsmlStepRenderer.CHARACTER_ATTR="character";SsmlStepRenderer.MARKS={};var string_renderer={};Object.defineProperty(string_renderer,"__esModule",{value:!0});string_renderer.StringRenderer=void 0;const abstract_audio_renderer_1=abstract_audio_renderer,audio_util_1=audio_util;class StringRenderer extends abstract_audio_renderer_1.AbstractAudioRenderer{markup(r){let e="";const i=(0,audio_util_1.personalityMarkup)(r).filter(a=>a.span);if(!i.length)return e;const o=i.length-1;for(let a=0,s;s=i[a];a++){if(s.span&&(e+=this.merge(s.span)),a>=o)continue;const l=s.join;e+=typeof l>"u"?this.getSeparator():l}return e}}string_renderer.StringRenderer=StringRenderer;Object.defineProperty(aural_rendering,"__esModule",{value:!0});aural_rendering.isXml=aural_rendering.registerRenderer=aural_rendering.error=aural_rendering.finalize=aural_rendering.merge=aural_rendering.markup=aural_rendering.getSeparator=aural_rendering.setSeparator=void 0;const engine_1$4=engine,EngineConst$3=engine_const,acss_renderer_1=acss_renderer,layout_renderer_1=layout_renderer,punctuation_renderer_1=punctuation_renderer,sable_renderer_1=sable_renderer,span_1=span,ssml_renderer_1=ssml_renderer,ssml_step_renderer_1=ssml_step_renderer,string_renderer_1=string_renderer,xml_renderer_1=xml_renderer,xmlInstance=new ssml_renderer_1.SsmlRenderer,renderers=new Map([[EngineConst$3.Markup.NONE,new string_renderer_1.StringRenderer],[EngineConst$3.Markup.PUNCTUATION,new punctuation_renderer_1.PunctuationRenderer],[EngineConst$3.Markup.LAYOUT,new layout_renderer_1.LayoutRenderer],[EngineConst$3.Markup.ACSS,new acss_renderer_1.AcssRenderer],[EngineConst$3.Markup.SABLE,new sable_renderer_1.SableRenderer],[EngineConst$3.Markup.VOICEXML,xmlInstance],[EngineConst$3.Markup.SSML,xmlInstance],[EngineConst$3.Markup.SSML_STEP,new ssml_step_renderer_1.SsmlStepRenderer]]);function setSeparator(t){const r=renderers.get(engine_1$4.default.getInstance().markup);r&&r.setSeparator(t)}aural_rendering.setSeparator=setSeparator;function getSeparator(){const t=renderers.get(engine_1$4.default.getInstance().markup);return t?t.getSeparator():""}aural_rendering.getSeparator=getSeparator;function markup(t){const r=renderers.get(engine_1$4.default.getInstance().markup);return r?r.markup(t):""}aural_rendering.markup=markup;function merge(t){const r=t.map(n=>typeof n=="string"?new span_1.Span(n,{}):n),e=renderers.get(engine_1$4.default.getInstance().markup);return e?e.merge(r):t.join()}aural_rendering.merge=merge;function finalize(t){const r=renderers.get(engine_1$4.default.getInstance().markup);return r?r.finalize(t):t}aural_rendering.finalize=finalize;function error(t){const r=renderers.get(engine_1$4.default.getInstance().markup);return r?r.error(t):""}aural_rendering.error=error;function registerRenderer(t,r){renderers.set(t,r)}aural_rendering.registerRenderer=registerRenderer;function isXml(){return renderers.get(engine_1$4.default.getInstance().markup)instanceof xml_renderer_1.XmlRenderer}aural_rendering.isXml=isXml;var enrich={},semantic={},semantic_tree={},semantic_mathml={},semantic_parser={};Object.defineProperty(semantic_parser,"__esModule",{value:!0});semantic_parser.SemanticAbstractParser=void 0;const semantic_node_factory_1$1=semantic_node_factory;class SemanticAbstractParser{constructor(r){this.type=r,this.factory_=new semantic_node_factory_1$1.SemanticNodeFactory}getFactory(){return this.factory_}setFactory(r){this.factory_=r}getType(){return this.type}parseList(r){const e=[];for(let n=0,i;i=r[n];n++)e.push(this.parse(i));return e}}semantic_parser.SemanticAbstractParser=SemanticAbstractParser;Object.defineProperty(semantic_mathml,"__esModule",{value:!0});semantic_mathml.SemanticMathml=void 0;const DomUtil$i=dom_util,semantic_parser_1=semantic_parser,SemanticPred$2=semantic_pred,semantic_processor_1$2=semantic_processor,SemanticUtil$1=semantic_util;class SemanticMathml extends semantic_parser_1.SemanticAbstractParser{constructor(){super("MathML"),this.parseMap_={SEMANTICS:this.semantics_.bind(this),MATH:this.rows_.bind(this),MROW:this.rows_.bind(this),MPADDED:this.rows_.bind(this),MSTYLE:this.rows_.bind(this),MFRAC:this.fraction_.bind(this),MSUB:this.limits_.bind(this),MSUP:this.limits_.bind(this),MSUBSUP:this.limits_.bind(this),MOVER:this.limits_.bind(this),MUNDER:this.limits_.bind(this),MUNDEROVER:this.limits_.bind(this),MROOT:this.root_.bind(this),MSQRT:this.sqrt_.bind(this),MTABLE:this.table_.bind(this),MLABELEDTR:this.tableLabeledRow_.bind(this),MTR:this.tableRow_.bind(this),MTD:this.tableCell_.bind(this),MS:this.text_.bind(this),MTEXT:this.text_.bind(this),MSPACE:this.space_.bind(this),"ANNOTATION-XML":this.text_.bind(this),MI:this.identifier_.bind(this),MN:this.number_.bind(this),MO:this.operator_.bind(this),MFENCED:this.fenced_.bind(this),MENCLOSE:this.enclosed_.bind(this),MMULTISCRIPTS:this.multiscripts_.bind(this),ANNOTATION:this.empty_.bind(this),NONE:this.empty_.bind(this),MACTION:this.action_.bind(this)};const r={type:"identifier",role:"numbersetletter",font:"double-struck"};["C","H","N","P","Q","R","Z","ℂ","ℍ","ℕ","ℙ","ℚ","ℝ","ℤ"].forEach((e=>this.getFactory().defaultMap.add(e,r)).bind(this))}static getAttribute_(r,e,n){if(!r.hasAttribute(e))return n;const i=r.getAttribute(e);return i.match(/^\s*$/)?null:i}parse(r){semantic_processor_1$2.default.getInstance().setNodeFactory(this.getFactory());const e=DomUtil$i.toArray(r.childNodes),n=DomUtil$i.tagName(r),i=this.parseMap_[n],o=(i||this.dummy_.bind(this))(r,e);return SemanticUtil$1.addAttributes(o,r),["MATH","MROW","MPADDED","MSTYLE","SEMANTICS"].indexOf(n)!==-1||(o.mathml.unshift(r),o.mathmlTree=r),o}semantics_(r,e){return e.length?this.parse(e[0]):this.getFactory().makeEmptyNode()}rows_(r,e){const n=r.getAttribute("semantics");if(n&&n.match("bspr_"))return semantic_processor_1$2.default.proof(r,n,this.parseList.bind(this));e=SemanticUtil$1.purgeNodes(e);let i;return e.length===1?(i=this.parse(e[0]),i.type==="empty"&&!i.mathmlTree&&(i.mathmlTree=r)):i=semantic_processor_1$2.default.getInstance().row(this.parseList(e)),i.mathml.unshift(r),i}fraction_(r,e){if(!e.length)return this.getFactory().makeEmptyNode();const n=this.parse(e[0]),i=e[1]?this.parse(e[1]):this.getFactory().makeEmptyNode();return semantic_processor_1$2.default.getInstance().fractionLikeNode(n,i,r.getAttribute("linethickness"),r.getAttribute("bevelled")==="true")}limits_(r,e){return semantic_processor_1$2.default.getInstance().limitNode(DomUtil$i.tagName(r),this.parseList(e))}root_(r,e){return e[1]?this.getFactory().makeBranchNode("root",[this.parse(e[1]),this.parse(e[0])],[]):this.sqrt_(r,e)}sqrt_(r,e){const n=this.parseList(SemanticUtil$1.purgeNodes(e));return this.getFactory().makeBranchNode("sqrt",[semantic_processor_1$2.default.getInstance().row(n)],[])}table_(r,e){const n=r.getAttribute("semantics");if(n&&n.match("bspr_"))return semantic_processor_1$2.default.proof(r,n,this.parseList.bind(this));const i=this.getFactory().makeBranchNode("table",this.parseList(e),[]);return i.mathmlTree=r,semantic_processor_1$2.default.tableToMultiline(i),i}tableRow_(r,e){const n=this.getFactory().makeBranchNode("row",this.parseList(e),[]);return n.role="table",n}tableLabeledRow_(r,e){if(!e.length)return this.tableRow_(r,e);const n=this.parse(e[0]);n.role="label";const i=this.getFactory().makeBranchNode("row",this.parseList(e.slice(1)),[n]);return i.role="table",i}tableCell_(r,e){const n=this.parseList(SemanticUtil$1.purgeNodes(e));let i;n.length?n.length===1&&SemanticPred$2.isType(n[0],"empty")?i=n:i=[semantic_processor_1$2.default.getInstance().row(n)]:i=[];const o=this.getFactory().makeBranchNode("cell",i,[]);return o.role="table",o}space_(r,e){const n=r.getAttribute("width"),i=n&&n.match(/[a-z]*$/);if(!i)return this.empty_(r,e);const o={cm:.4,pc:.5,em:.5,ex:1,in:.15,pt:5,mm:5},a=i[0],s=parseFloat(n.slice(0,i.index)),l=o[a];if(!l||isNaN(s)||s<l)return this.empty_(r,e);const c=this.getFactory().makeUnprocessed(r);return semantic_processor_1$2.default.getInstance().text(c,DomUtil$i.tagName(r))}text_(r,e){const n=this.leaf_(r,e);return r.textContent?(n.updateContent(r.textContent,!0),semantic_processor_1$2.default.getInstance().text(n,DomUtil$i.tagName(r))):n}identifier_(r,e){const n=this.leaf_(r,e);return semantic_processor_1$2.default.getInstance().identifierNode(n,semantic_processor_1$2.default.getInstance().font(r.getAttribute("mathvariant")),r.getAttribute("class"))}number_(r,e){const n=this.leaf_(r,e);return semantic_processor_1$2.default.number(n),n}operator_(r,e){const n=this.leaf_(r,e);return semantic_processor_1$2.default.getInstance().operatorNode(n),n}fenced_(r,e){const n=this.parseList(SemanticUtil$1.purgeNodes(e)),i=SemanticMathml.getAttribute_(r,"separators",","),o=SemanticMathml.getAttribute_(r,"open","("),a=SemanticMathml.getAttribute_(r,"close",")"),s=semantic_processor_1$2.default.getInstance().mfenced(o,a,i,n);return semantic_processor_1$2.default.getInstance().tablesInRow([s])[0]}enclosed_(r,e){const n=this.parseList(SemanticUtil$1.purgeNodes(e)),i=this.getFactory().makeBranchNode("enclose",[semantic_processor_1$2.default.getInstance().row(n)],[]);return i.role=r.getAttribute("notation")||"unknown",i}multiscripts_(r,e){if(!e.length)return this.getFactory().makeEmptyNode();const n=this.parse(e.shift());if(!e.length)return n;const i=[],o=[],a=[],s=[];let l=!1,c=0;for(let f=0,d;d=e[f];f++){if(DomUtil$i.tagName(d)==="MPRESCRIPTS"){l=!0,c=0;continue}l?c&1?i.push(d):o.push(d):c&1?a.push(d):s.push(d),c++}return!SemanticUtil$1.purgeNodes(i).length&&!SemanticUtil$1.purgeNodes(o).length?semantic_processor_1$2.default.getInstance().pseudoTensor(n,this.parseList(s),this.parseList(a)):semantic_processor_1$2.default.getInstance().tensor(n,this.parseList(o),this.parseList(i),this.parseList(s),this.parseList(a))}empty_(r,e){return this.getFactory().makeEmptyNode()}action_(r,e){return e.length>1?this.parse(e[1]):this.getFactory().makeUnprocessed(r)}dummy_(r,e){const n=this.getFactory().makeUnprocessed(r);return n.role=r.tagName,n.textContent=r.textContent,n}leaf_(r,e){if(e.length===1&&e[0].nodeType!==DomUtil$i.NodeType.TEXT_NODE){const n=this.getFactory().makeUnprocessed(r);return n.role=e[0].tagName,SemanticUtil$1.addAttributes(n,e[0]),n}return this.getFactory().makeLeafNode(r.textContent,semantic_processor_1$2.default.getInstance().font(r.getAttribute("mathvariant")))}}semantic_mathml.SemanticMathml=SemanticMathml;var semantic_heuristic={};Object.defineProperty(semantic_heuristic,"__esModule",{value:!0});semantic_heuristic.SemanticMultiHeuristic=semantic_heuristic.SemanticTreeHeuristic=semantic_heuristic.SemanticAbstractHeuristic=void 0;class SemanticAbstractHeuristic{constructor(r,e,n=i=>!1){this.name=r,this.apply=e,this.applicable=n}}semantic_heuristic.SemanticAbstractHeuristic=SemanticAbstractHeuristic;class SemanticTreeHeuristic extends SemanticAbstractHeuristic{}semantic_heuristic.SemanticTreeHeuristic=SemanticTreeHeuristic;class SemanticMultiHeuristic extends SemanticAbstractHeuristic{}semantic_heuristic.SemanticMultiHeuristic=SemanticMultiHeuristic;const debugger_1$1=_debugger,engine_1$3=engine,SemanticAttr=semantic_attr,SemanticHeuristics=semantic_heuristic_factory,semantic_heuristic_1=semantic_heuristic,SemanticPred$1=semantic_pred,semantic_processor_1$1=semantic_processor,SemanticUtil=semantic_util;SemanticHeuristics.add(new semantic_heuristic_1.SemanticTreeHeuristic("combine_juxtaposition",combineJuxtaposition));function combineJuxtaposition(t){for(let r=t.childNodes.length-1,e;e=t.childNodes[r];r--)!SemanticPred$1.isImplicitOp(e)||e.nobreaking||(t.childNodes.splice(r,1,...e.childNodes),t.contentNodes.splice(r,0,...e.contentNodes),e.childNodes.concat(e.contentNodes).forEach(function(n){n.parent=t}),t.addMathmlNodes(e.mathml));return t}SemanticHeuristics.add(new semantic_heuristic_1.SemanticTreeHeuristic("propagateSimpleFunction",t=>((t.type==="infixop"||t.type==="fraction")&&t.childNodes.every(SemanticPred$1.isSimpleFunction)&&(t.role="composed function"),t),t=>engine_1$3.default.getInstance().domain==="clearspeak"));SemanticHeuristics.add(new semantic_heuristic_1.SemanticTreeHeuristic("simpleNamedFunction",t=>{const r=["f","g","h","F","G","H"];return t.role!=="unit"&&r.indexOf(t.textContent)!==-1&&(t.role="simple function"),t},t=>engine_1$3.default.getInstance().domain==="clearspeak"));SemanticHeuristics.add(new semantic_heuristic_1.SemanticTreeHeuristic("propagateComposedFunction",t=>(t.type==="fenced"&&t.childNodes[0].role==="composed function"&&(t.role="composed function"),t),t=>engine_1$3.default.getInstance().domain==="clearspeak"));SemanticHeuristics.add(new semantic_heuristic_1.SemanticTreeHeuristic("multioperator",t=>{if(t.role!=="unknown"||t.textContent.length<=1)return;const n=[...t.textContent].map(SemanticAttr.lookupMeaning).reduce(function(i,o){return!i||!o.role||o.role==="unknown"||o.role===i?i:i==="unknown"?o.role:null},"unknown");n&&(t.role=n)}));SemanticHeuristics.add(new semantic_heuristic_1.SemanticMultiHeuristic("convert_juxtaposition",t=>{let r=SemanticUtil.partitionNodes(t,function(e){return e.textContent===SemanticAttr.invisibleTimes()&&e.type==="operator"});r=r.rel.length?juxtapositionPrePost(r):r,t=r.comp[0];for(let e=1,n,i;n=r.comp[e],i=r.rel[e-1];e++)t.push(i),t=t.concat(n);return r=SemanticUtil.partitionNodes(t,function(e){return e.textContent===SemanticAttr.invisibleTimes()&&(e.type==="operator"||e.type==="infixop")}),r.rel.length?recurseJuxtaposition(r.comp.shift(),r.rel,r.comp):t}));SemanticHeuristics.add(new semantic_heuristic_1.SemanticTreeHeuristic("simple2prefix",t=>(t.textContent.length>1&&!t.textContent[0].match(/[A-Z]/)&&(t.role="prefix function"),t),t=>engine_1$3.default.getInstance().modality==="braille"&&t.type==="identifier"));SemanticHeuristics.add(new semantic_heuristic_1.SemanticTreeHeuristic("detect_cycle",t=>{t.type="matrix",t.role="cycle";const r=t.childNodes[0];return r.type="row",r.role="cycle",r.textContent="",r.contentNodes=[],t},t=>t.type==="fenced"&&t.childNodes[0].type==="infixop"&&t.childNodes[0].role==="implicit"&&t.childNodes[0].childNodes.every(function(r){return r.type==="number"})&&t.childNodes[0].contentNodes.every(function(r){return r.role==="space"})));function juxtapositionPrePost(t){const r=[],e=[];let n=t.comp.shift(),i=null,o=[];for(;t.comp.length;){if(o=[],n.length){i&&r.push(i),e.push(n),i=t.rel.shift(),n=t.comp.shift();continue}for(i&&o.push(i);!n.length&&t.comp.length;)n=t.comp.shift(),o.push(t.rel.shift());i=convertPrePost(o,n,e)}return!o.length&&!n.length?(o.push(i),convertPrePost(o,n,e)):(r.push(i),e.push(n)),{rel:r,comp:e}}function convertPrePost(t,r,e){let n=null;if(!t.length)return n;const i=e[e.length-1],o=i&&i.length,a=r&&r.length,s=semantic_processor_1$1.default.getInstance();if(o&&a){if(r[0].type==="infixop"&&r[0].role==="implicit")return n=t.pop(),i.push(s.postfixNode_(i.pop(),t)),n;n=t.shift();const l=s.prefixNode_(r.shift(),t);return r.unshift(l),n}return o?(i.push(s.postfixNode_(i.pop(),t)),n):(a&&r.unshift(s.prefixNode_(r.shift(),t)),n)}function recurseJuxtaposition(t,r,e){if(!r.length)return t;const n=t.pop(),i=r.shift(),o=e.shift();if(SemanticPred$1.isImplicitOp(i)){debugger_1$1.Debugger.getInstance().output("Juxta Heuristic Case 2");const l=(n?[n,i]:[i]).concat(o);return recurseJuxtaposition(t.concat(l),r,e)}if(!n)return debugger_1$1.Debugger.getInstance().output("Juxta Heuristic Case 3"),recurseJuxtaposition([i].concat(o),r,e);const a=o.shift();if(!a){debugger_1$1.Debugger.getInstance().output("Juxta Heuristic Case 9");const l=SemanticHeuristics.factory.makeBranchNode("infixop",[n,r.shift()],[i],i.textContent);return l.role="implicit",SemanticHeuristics.run("combine_juxtaposition",l),r.unshift(l),recurseJuxtaposition(t,r,e)}if(SemanticPred$1.isOperator(n)||SemanticPred$1.isOperator(a))return debugger_1$1.Debugger.getInstance().output("Juxta Heuristic Case 4"),recurseJuxtaposition(t.concat([n,i,a]).concat(o),r,e);let s=null;return SemanticPred$1.isImplicitOp(n)&&SemanticPred$1.isImplicitOp(a)?(debugger_1$1.Debugger.getInstance().output("Juxta Heuristic Case 5"),n.contentNodes.push(i),n.contentNodes=n.contentNodes.concat(a.contentNodes),n.childNodes.push(a),n.childNodes=n.childNodes.concat(a.childNodes),a.childNodes.forEach(l=>l.parent=n),i.parent=n,n.addMathmlNodes(i.mathml),n.addMathmlNodes(a.mathml),s=n):SemanticPred$1.isImplicitOp(n)?(debugger_1$1.Debugger.getInstance().output("Juxta Heuristic Case 6"),n.contentNodes.push(i),n.childNodes.push(a),a.parent=n,i.parent=n,n.addMathmlNodes(i.mathml),n.addMathmlNodes(a.mathml),s=n):SemanticPred$1.isImplicitOp(a)?(debugger_1$1.Debugger.getInstance().output("Juxta Heuristic Case 7"),a.contentNodes.unshift(i),a.childNodes.unshift(n),n.parent=a,i.parent=a,a.addMathmlNodes(i.mathml),a.addMathmlNodes(n.mathml),s=a):(debugger_1$1.Debugger.getInstance().output("Juxta Heuristic Case 8"),s=SemanticHeuristics.factory.makeBranchNode("infixop",[n,a],[i],i.textContent),s.role="implicit"),t.push(s),recurseJuxtaposition(t.concat(o),r,e)}Object.defineProperty(semantic_tree,"__esModule",{value:!0});semantic_tree.SemanticTree=void 0;const DomUtil$h=dom_util,semantic_annotations_1=semantic_annotations,semantic_annotator_1=semantic_annotator,semantic_mathml_1=semantic_mathml,semantic_node_1$1=semantic_node,SemanticPred=semantic_pred;class SemanticTree{constructor(r){this.mathml=r,this.parser=new semantic_mathml_1.SemanticMathml,this.root=this.parser.parse(r),this.collator=this.parser.getFactory().leafMap.collateMeaning();const e=this.collator.newDefault();e&&(this.parser=new semantic_mathml_1.SemanticMathml,this.parser.getFactory().defaultMap=e,this.root=this.parser.parse(r)),unitVisitor.visit(this.root,{}),(0,semantic_annotations_1.annotate)(this.root)}static empty(){const r=DomUtil$h.parseInput("<math/>"),e=new SemanticTree(r);return e.mathml=r,e}static fromNode(r,e){const n=SemanticTree.empty();return n.root=r,e&&(n.mathml=e),n}static fromRoot(r,e){let n=r;for(;n.parent;)n=n.parent;const i=SemanticTree.fromNode(n);return e&&(i.mathml=e),i}static fromXml(r){const e=SemanticTree.empty();return r.childNodes[0]&&(e.root=semantic_node_1$1.SemanticNode.fromXml(r.childNodes[0])),e}xml(r){const e=DomUtil$h.parseInput("<stree></stree>"),n=this.root.xml(e.ownerDocument,r);return e.appendChild(n),e}toString(r){return DomUtil$h.serializeXml(this.xml(r))}formatXml(r){const e=this.toString(r);return DomUtil$h.formatXml(e)}displayTree(){this.root.displayTree()}replaceNode(r,e){const n=r.parent;if(!n){this.root=e;return}n.replaceChild(r,e)}toJson(){const r={};return r.stree=this.root.toJson(),r}}semantic_tree.SemanticTree=SemanticTree;const unitVisitor=new semantic_annotator_1.SemanticVisitor("general","unit",(t,r)=>{if(t.type==="infixop"&&(t.role==="multiplication"||t.role==="implicit")){const e=t.childNodes;e.length&&(SemanticPred.isPureUnit(e[0])||SemanticPred.isUnitCounter(e[0]))&&t.childNodes.slice(1).every(SemanticPred.isPureUnit)&&(t.role="unit")}return!1});Object.defineProperty(semantic,"__esModule",{value:!0});semantic.getTreeFromString=semantic.getTree=semantic.xmlTree=void 0;const DomUtil$g=dom_util,semantic_tree_1$2=semantic_tree;function xmlTree(t){return getTree(t).xml()}semantic.xmlTree=xmlTree;function getTree(t){return new semantic_tree_1$2.SemanticTree(t)}semantic.getTree=getTree;function getTreeFromString(t){const r=DomUtil$g.parseInput(t);return getTree(r)}semantic.getTreeFromString=getTreeFromString;var enrich_mathml={},semantic_skeleton={},enrich_attr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.addPrefix=t.removeAttributePrefix=t.setPostfix=t.setAttributes=t.makeIdList=t.EnrichAttributes=t.Attribute=t.Prefix=void 0,t.Prefix="data-semantic-";var r;(function(s){s.ADDED="data-semantic-added",s.ALTERNATIVE="data-semantic-alternative",s.CHILDREN="data-semantic-children",s.COLLAPSED="data-semantic-collapsed",s.CONTENT="data-semantic-content",s.EMBELLISHED="data-semantic-embellished",s.FENCEPOINTER="data-semantic-fencepointer",s.FONT="data-semantic-font",s.ID="data-semantic-id",s.ANNOTATION="data-semantic-annotation",s.ATTRIBUTES="data-semantic-attributes",s.OPERATOR="data-semantic-operator",s.OWNS="data-semantic-owns",s.PARENT="data-semantic-parent",s.POSTFIX="data-semantic-postfix",s.PREFIX="data-semantic-prefix",s.ROLE="data-semantic-role",s.SPEECH="data-semantic-speech",s.STRUCTURE="data-semantic-structure",s.TYPE="data-semantic-type"})(r=t.Attribute||(t.Attribute={})),t.EnrichAttributes=[r.ADDED,r.ALTERNATIVE,r.CHILDREN,r.COLLAPSED,r.CONTENT,r.EMBELLISHED,r.FENCEPOINTER,r.FONT,r.ID,r.ANNOTATION,r.ATTRIBUTES,r.OPERATOR,r.OWNS,r.PARENT,r.POSTFIX,r.PREFIX,r.ROLE,r.SPEECH,r.STRUCTURE,r.TYPE];function e(s){return s.map(function(l){return l.id}).join(",")}t.makeIdList=e;function n(s,l){s.setAttribute(r.TYPE,l.type);const c=l.allAttributes();for(let d=0,u;u=c[d];d++)s.setAttribute(t.Prefix+u[0].toLowerCase(),u[1]);l.childNodes.length&&s.setAttribute(r.CHILDREN,e(l.childNodes)),l.contentNodes.length&&s.setAttribute(r.CONTENT,e(l.contentNodes)),l.parent&&s.setAttribute(r.PARENT,l.parent.id.toString());const f=l.attributesXml();f&&s.setAttribute(r.ATTRIBUTES,f),i(s,l)}t.setAttributes=n;function i(s,l){const c=[];l.role==="mglyph"&&c.push("image"),l.attributes.href&&c.push("link"),c.length&&s.setAttribute(r.POSTFIX,c.join(" "))}t.setPostfix=i;function o(s){return s.toString().replace(new RegExp(t.Prefix,"g"),"")}t.removeAttributePrefix=o;function a(s){return t.Prefix+s}t.addPrefix=a})(enrich_attr);Object.defineProperty(semantic_skeleton,"__esModule",{value:!0});semantic_skeleton.SemanticSkeleton=void 0;const BaseUtil=base_util,XpathUtil$5=xpath_util,enrich_attr_1$i=enrich_attr;class SemanticSkeleton{constructor(r){this.parents=null,this.levelsMap=null,r=r===0?r:r||[],this.array=r}static fromTree(r){return SemanticSkeleton.fromNode(r.root)}static fromNode(r){return new SemanticSkeleton(SemanticSkeleton.fromNode_(r))}static fromString(r){return new SemanticSkeleton(SemanticSkeleton.fromString_(r))}static simpleCollapseStructure(r){return typeof r=="number"}static contentCollapseStructure(r){return!!r&&!SemanticSkeleton.simpleCollapseStructure(r)&&r[0]==="c"}static interleaveIds(r,e){return BaseUtil.interleaveLists(SemanticSkeleton.collapsedLeafs(r),SemanticSkeleton.collapsedLeafs(e))}static collapsedLeafs(...r){const e=n=>SemanticSkeleton.simpleCollapseStructure(n)?[n]:(n=n,SemanticSkeleton.contentCollapseStructure(n[1])?n.slice(2):n.slice(1));return r.reduce((n,i)=>n.concat(e(i)),[])}static fromStructure(r,e){return new SemanticSkeleton(SemanticSkeleton.tree_(r,e.root))}static combineContentChildren(r,e,n){switch(r.type){case"relseq":case"infixop":case"multirel":return BaseUtil.interleaveLists(n,e);case"prefixop":return e.concat(n);case"postfixop":return n.concat(e);case"fenced":return n.unshift(e[0]),n.push(e[1]),n;case"appl":return[n[0],e[0],n[1]];case"root":return[n[1],n[0]];case"row":case"line":return e.length&&n.unshift(e[0]),n;default:return n}}static makeSexp_(r){return SemanticSkeleton.simpleCollapseStructure(r)?r.toString():SemanticSkeleton.contentCollapseStructure(r)?"(c "+r.slice(1).map(SemanticSkeleton.makeSexp_).join(" ")+")":"("+r.map(SemanticSkeleton.makeSexp_).join(" ")+")"}static fromString_(r){let e=r.replace(/\(/g,"[");return e=e.replace(/\)/g,"]"),e=e.replace(/ /g,","),e=e.replace(/c/g,'"c"'),JSON.parse(e)}static fromNode_(r){if(!r)return[];const e=r.contentNodes;let n;e.length&&(n=e.map(SemanticSkeleton.fromNode_),n.unshift("c"));const i=r.childNodes;if(!i.length)return e.length?[r.id,n]:r.id;const o=i.map(SemanticSkeleton.fromNode_);return e.length&&o.unshift(n),o.unshift(r.id),o}static tree_(r,e){if(!e)return[];if(!e.childNodes.length)return e.id;const n=e.id,i=[n],o=XpathUtil$5.evalXPath(`.//self::*[@${enrich_attr_1$i.Attribute.ID}=${n}]`,r)[0],a=SemanticSkeleton.combineContentChildren(e,e.contentNodes.map(function(s){return s}),e.childNodes.map(function(s){return s}));o&&SemanticSkeleton.addOwns_(o,a);for(let s=0,l;l=a[s];s++)i.push(SemanticSkeleton.tree_(r,l));return i}static addOwns_(r,e){const n=r.getAttribute(enrich_attr_1$i.Attribute.COLLAPSED),i=n?SemanticSkeleton.realLeafs_(SemanticSkeleton.fromString(n).array):e.map(o=>o.id);r.setAttribute(enrich_attr_1$i.Attribute.OWNS,i.join(" "))}static realLeafs_(r){if(SemanticSkeleton.simpleCollapseStructure(r))return[r];if(SemanticSkeleton.contentCollapseStructure(r))return[];r=r;let e=[];for(let n=1;n<r.length;n++)e=e.concat(SemanticSkeleton.realLeafs_(r[n]));return e}populate(){this.parents&&this.levelsMap||(this.parents={},this.levelsMap={},this.populate_(this.array,this.array,[]))}toString(){return SemanticSkeleton.makeSexp_(this.array)}populate_(r,e,n){if(SemanticSkeleton.simpleCollapseStructure(r)){r=r,this.levelsMap[r]=e,this.parents[r]=r===n[0]?n.slice(1):n;return}const i=SemanticSkeleton.contentCollapseStructure(r)?r.slice(1):r,o=[i[0]].concat(n);for(let a=0,s=i.length;a<s;a++){const l=i[a];this.populate_(l,r,o)}}isRoot(r){const e=this.levelsMap[r];return r===e[0]}directChildren(r){return this.isRoot(r)?this.levelsMap[r].slice(1).map(n=>SemanticSkeleton.simpleCollapseStructure(n)?n:SemanticSkeleton.contentCollapseStructure(n)?n[1]:n[0]):[]}subtreeNodes(r){if(!this.isRoot(r))return[];const e=(o,a)=>{if(SemanticSkeleton.simpleCollapseStructure(o)){a.push(o);return}o=o,SemanticSkeleton.contentCollapseStructure(o)&&(o=o.slice(1)),o.forEach(s=>e(s,a))},n=this.levelsMap[r],i=[];return e(n.slice(1),i),i}}semantic_skeleton.SemanticSkeleton=SemanticSkeleton;var enrich_case={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.factory=t.getCase=void 0;function r(e){for(let n=0,i;i=t.factory[n];n++)if(i.test(e))return i.constr(e);return null}t.getCase=r,t.factory=[]})(enrich_case);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.printNodeList__=t.collapsePunctuated=t.getInnerNode=t.setOperatorAttribute_=t.createInvisibleOperator_=t.rewriteMfenced=t.cloneContentNode=t.addCollapsedAttribute=t.parentNode_=t.isIgnorable_=t.unitChild_=t.descendNode_=t.ascendNewNode=t.validLca_=t.pathToRoot_=t.attachedElement_=t.prunePath_=t.mathmlLca_=t.lcaType=t.functionApplication_=t.isDescendant_=t.insertNewChild_=t.mergeChildren_=t.collectChildNodes_=t.collateChildNodes_=t.childrenSubset_=t.moveSemanticAttributes_=t.introduceLayerAboveLca=t.introduceNewLayer=t.walkTree=t.enrich=t.SETTINGS=void 0;const r=_debugger,e=dom_util,n=engine,i=semantic_attr,o=semantic_heuristic_factory,a=semantic_skeleton,s=semantic_util,l=enrich_attr,c=enrich_case;t.SETTINGS={collapsed:!0,implicit:!0,wiki:!0};function f(N,T){const j=e.cloneNode(N);return d(T.root),n.default.getInstance().structure&&N.setAttribute(l.Attribute.STRUCTURE,a.SemanticSkeleton.fromStructure(N,T).toString()),r.Debugger.getInstance().generateOutput(()=>[K(j,"Original MathML",t.SETTINGS.wiki),K(T,"Semantic Tree",t.SETTINGS.wiki),K(N,"Semantically enriched MathML",t.SETTINGS.wiki)]),N}t.enrich=f;function d(N){const T=(0,c.getCase)(N);let j;if(T)return j=T.getMathml(),B(j);if(N.mathml.length===1)return r.Debugger.getInstance().output("Walktree Case 0"),j=N.mathml[0],l.setAttributes(j,N),N.childNodes.length&&(r.Debugger.getInstance().output("Walktree Case 0.1"),N.childNodes.forEach(function(V){V.type==="empty"&&j.appendChild(d(V))})),B(j);const P=N.contentNodes.map(et);q(N,P);const O=N.childNodes.map(d),k=a.SemanticSkeleton.combineContentChildren(N,P,O);if(j=N.mathmlTree,j===null)r.Debugger.getInstance().output("Walktree Case 1"),j=u(k,N);else{const V=E(k);r.Debugger.getInstance().output("Walktree Case 2"),V?(r.Debugger.getInstance().output("Walktree Case 2.1"),j=V.parentNode):(r.Debugger.getInstance().output("Walktree Case 2.2"),j=Q(j))}return j=lt(j),v(j,k,N),l.setAttributes(j,N),B(j)}t.walkTree=d;function u(N,T){const j=C(N);let P=j.node;const O=j.type;if(O!==M.VALID||!s.hasEmptyTag(P)){if(r.Debugger.getInstance().output("Walktree Case 1.1"),P=e.createElement("mrow"),O===M.PRUNED)r.Debugger.getInstance().output("Walktree Case 1.1.0"),P=m(P,j.node,N);else if(N[0]){r.Debugger.getInstance().output("Walktree Case 1.1.1");const k=E(N),V=_(k.parentNode,N);e.replaceNode(k,P),V.forEach(function(z){P.appendChild(z)})}}return T.mathmlTree||(T.mathmlTree=P),P}t.introduceNewLayer=u;function m(N,T,j){let P=F(T);if(s.hasMathTag(P)){r.Debugger.getInstance().output("Walktree Case 1.1.0.0"),p(P,N),e.toArray(P.childNodes).forEach(function(V){N.appendChild(V)});const k=N;N=P,P=k}const O=j.indexOf(T);return j[O]=P,e.replaceNode(P,N),N.appendChild(P),j.forEach(function(k){N.appendChild(k)}),N}t.introduceLayerAboveLca=m;function p(N,T){for(const j of l.EnrichAttributes)N.hasAttribute(j)&&(T.setAttribute(j,N.getAttribute(j)),N.removeAttribute(j))}t.moveSemanticAttributes_=p;function _(N,T){const j=e.toArray(N.childNodes);let P=1/0,O=-1/0;return T.forEach(function(k){const V=j.indexOf(k);V!==-1&&(P=Math.min(P,V),O=Math.max(O,V))}),j.slice(P,O+1)}t.childrenSubset_=_;function y(N,T,j){const P=[];let O=e.toArray(N.childNodes),k=!1;for(;O.length;){const X=O.shift();if(X.hasAttribute(l.Attribute.TYPE)){P.push(X);continue}const Y=g(X);if(Y.length!==0){if(Y.length===1){P.push(X);continue}k?X.setAttribute("AuxiliaryImplicit",!0):k=!0,O=Y.concat(O)}}const V=[],z=j.childNodes.map(function(X){return X.mathmlTree});for(;z.length;){const X=z.pop();if(X){if(P.indexOf(X)!==-1)break;T.indexOf(X)!==-1&&V.unshift(X)}}return P.concat(V)}t.collateChildNodes_=y;function g(N){const T=[];let j=e.toArray(N.childNodes);for(;j.length;){const P=j.shift();if(P.nodeType===e.NodeType.ELEMENT_NODE){if(P.hasAttribute(l.Attribute.TYPE)){T.push(P);continue}j=e.toArray(P.childNodes).concat(j)}}return T}t.collectChildNodes_=g;function v(N,T,j){const P=j.role==="implicit"&&o.flags.combine_juxtaposition?y(N,T,j):e.toArray(N.childNodes);if(!P.length){T.forEach(function(k){N.appendChild(k)});return}let O=0;for(;T.length;){const k=T[0];if(P[O]===k||S(P[O],k)){T.shift(),O++;continue}if(P[O]&&T.indexOf(P[O])===-1){O++;continue}if(b(k,N)){T.shift();continue}x(N,P[O],k),T.shift()}}t.mergeChildren_=v;function x(N,T,j){if(!T){N.insertBefore(j,null);return}let P=T,O=W(P);for(;O&&O.firstChild===P&&!P.hasAttribute("AuxiliaryImplicit")&&O!==N;)P=O,O=W(P);O&&(O.insertBefore(j,P),P.removeAttribute("AuxiliaryImplicit"))}t.insertNewChild_=x;function b(N,T){if(!N)return!1;do if(N=N.parentNode,N===T)return!0;while(N);return!1}t.isDescendant_=b;function S(N,T){const j=i.functionApplication();if(N&&T&&N.textContent&&T.textContent&&N.textContent===j&&T.textContent===j&&T.getAttribute(l.Attribute.ADDED)==="true"){for(let P=0,O;O=N.attributes[P];P++)T.hasAttribute(O.nodeName)||T.setAttribute(O.nodeName,O.nodeValue);return e.replaceNode(N,T),!0}return!1}t.functionApplication_=S;var M;(function(N){N.VALID="valid",N.INVALID="invalid",N.PRUNED="pruned"})(M=t.lcaType||(t.lcaType={}));function C(N){const T=E(N);if(!T)return{type:M.INVALID,node:null};const j=E(N.slice().reverse());if(T===j)return{type:M.VALID,node:T};const P=$(T),O=A(P,N),k=$(j,function(X){return O.indexOf(X)!==-1}),V=k[0],z=O.indexOf(V);return z===-1?{type:M.INVALID,node:null}:{type:O.length!==P.length?M.PRUNED:D(O[z+1],k[1])?M.VALID:M.INVALID,node:V}}t.mathmlLca_=C;function A(N,T){let j=0;for(;N[j]&&T.indexOf(N[j])===-1;)j++;return N.slice(0,j+1)}t.prunePath_=A;function E(N){let T=0,j=null;for(;!j&&T<N.length;)N[T].parentNode&&(j=N[T]),T++;return j}t.attachedElement_=E;function $(N,T){const j=T||(O=>!1),P=[N];for(;!j(N)&&!s.hasMathTag(N)&&N.parentNode;)N=W(N),P.unshift(N);return P}t.pathToRoot_=$;function D(N,T){return!!(N&&T&&!N.previousSibling&&!T.nextSibling)}t.validLca_=D;function B(N){for(;!s.hasMathTag(N)&&I(N);)N=W(N);return N}t.ascendNewNode=B;function F(N){const T=e.toArray(N.childNodes);if(!T)return N;const j=T.filter(function(P){return P.nodeType===e.NodeType.ELEMENT_NODE&&!s.hasIgnoreTag(P)});return j.length===1&&s.hasEmptyTag(j[0])&&!j[0].hasAttribute(l.Attribute.TYPE)?F(j[0]):N}t.descendNode_=F;function I(N){const T=W(N);return!T||!s.hasEmptyTag(T)?!1:e.toArray(T.childNodes).every(function(j){return j===N||H(j)})}t.unitChild_=I;function H(N){if(N.nodeType!==e.NodeType.ELEMENT_NODE||!N||s.hasIgnoreTag(N))return!0;const T=e.toArray(N.childNodes);return!s.hasEmptyTag(N)&&T.length||s.hasDisplayTag(N)||N.hasAttribute(l.Attribute.TYPE)||s.isOrphanedGlyph(N)?!1:e.toArray(N.childNodes).every(H)}t.isIgnorable_=H;function W(N){return N.parentNode}t.parentNode_=W;function Z(N,T){const j=new a.SemanticSkeleton(T);N.setAttribute(l.Attribute.COLLAPSED,j.toString())}t.addCollapsedAttribute=Z;function et(N){if(N.mathml.length)return d(N);const T=t.SETTINGS.implicit?G(N):e.createElement("mrow");return N.mathml=[T],T}t.cloneContentNode=et;function lt(N){if(e.tagName(N)!=="MFENCED")return N;const T=e.createElement("mrow");for(let j=0,P;P=N.attributes[j];j++)["open","close","separators"].indexOf(P.name)===-1&&T.setAttribute(P.name,P.value);return e.toArray(N.childNodes).forEach(function(j){T.appendChild(j)}),e.replaceNode(N,T),T}t.rewriteMfenced=lt;function G(N){const T=e.createElement("mo"),j=e.createTextNode(N.textContent);return T.appendChild(j),l.setAttributes(T,N),T.setAttribute(l.Attribute.ADDED,"true"),T}t.createInvisibleOperator_=G;function q(N,T){const j=N.type+(N.textContent?","+N.textContent:"");T.forEach(function(P){Q(P).setAttribute(l.Attribute.OPERATOR,j)})}t.setOperatorAttribute_=q;function Q(N){const T=e.toArray(N.childNodes);if(!T)return N;const j=T.filter(function(O){return!H(O)}),P=[];for(let O=0,k;k=j[O];O++)if(s.hasEmptyTag(k)){const V=Q(k);V&&V!==k&&P.push(V)}else P.push(k);return P.length===1?P[0]:N}t.getInnerNode=Q;function K(N,T,j=!1){const P=l.removeAttributePrefix(e.formatXml(N.toString()));return j?T+":\n```html\n"+P+"\n```\n":P}function tt(N,T){const j=!!T,P=T||[],O=N.parent,k=N.contentNodes.map(function(z){return z.id});k.unshift("c");const V=[N.id,k];for(let z=0,X;X=N.childNodes[z];z++){const Y=d(X);P.push(Y);const st=Q(Y);O&&!j&&st.setAttribute(l.Attribute.PARENT,O.id.toString()),V.push(X.id)}return V}t.collapsePunctuated=tt;function w(N,T){console.info(N),e.toArray(T).forEach(function(j){console.info(j.toString())}),console.info("<<<<<<<<<<<<<<<<<")}t.printNodeList__=w})(enrich_mathml);var case_binomial={},abstract_enrich_case={};Object.defineProperty(abstract_enrich_case,"__esModule",{value:!0});abstract_enrich_case.AbstractEnrichCase=void 0;class AbstractEnrichCase{constructor(r){this.semantic=r}}abstract_enrich_case.AbstractEnrichCase=AbstractEnrichCase;Object.defineProperty(case_binomial,"__esModule",{value:!0});case_binomial.CaseBinomial=void 0;const DomUtil$f=dom_util,abstract_enrich_case_1$8=abstract_enrich_case,enrich_mathml_1=enrich_mathml,enrich_attr_1$h=enrich_attr;class CaseBinomial extends abstract_enrich_case_1$8.AbstractEnrichCase{constructor(r){super(r),this.mml=r.mathmlTree}static test(r){return!r.mathmlTree&&r.type==="line"&&r.role==="binomial"}getMathml(){if(!this.semantic.childNodes.length)return this.mml;const r=this.semantic.childNodes[0];if(this.mml=(0,enrich_mathml_1.walkTree)(r),this.mml.hasAttribute(enrich_attr_1$h.Attribute.TYPE)){const e=DomUtil$f.createElement("mrow");e.setAttribute(enrich_attr_1$h.Attribute.ADDED,"true"),DomUtil$f.replaceNode(this.mml,e),e.appendChild(this.mml),this.mml=e}return(0,enrich_attr_1$h.setAttributes)(this.mml,this.semantic),this.mml}}case_binomial.CaseBinomial=CaseBinomial;var case_double_script={};Object.defineProperty(case_double_script,"__esModule",{value:!0});case_double_script.CaseDoubleScript=void 0;const DomUtil$e=dom_util,abstract_enrich_case_1$7=abstract_enrich_case,EnrichMathml$a=enrich_mathml,enrich_attr_1$g=enrich_attr;class CaseDoubleScript extends abstract_enrich_case_1$7.AbstractEnrichCase{constructor(r){super(r),this.mml=r.mathmlTree}static test(r){if(!r.mathmlTree||!r.childNodes.length)return!1;const e=DomUtil$e.tagName(r.mathmlTree),n=r.childNodes[0].role;return e==="MSUBSUP"&&n==="subsup"||e==="MUNDEROVER"&&n==="underover"}getMathml(){const r=this.semantic.childNodes[0],e=r.childNodes[0],n=this.semantic.childNodes[1],i=r.childNodes[1],o=EnrichMathml$a.walkTree(n),a=EnrichMathml$a.walkTree(e),s=EnrichMathml$a.walkTree(i);return(0,enrich_attr_1$g.setAttributes)(this.mml,this.semantic),this.mml.setAttribute(enrich_attr_1$g.Attribute.CHILDREN,(0,enrich_attr_1$g.makeIdList)([e,i,n])),[a,s,o].forEach(l=>EnrichMathml$a.getInnerNode(l).setAttribute(enrich_attr_1$g.Attribute.PARENT,this.mml.getAttribute(enrich_attr_1$g.Attribute.ID))),this.mml.setAttribute(enrich_attr_1$g.Attribute.TYPE,r.role),EnrichMathml$a.addCollapsedAttribute(this.mml,[this.semantic.id,[r.id,e.id,i.id],n.id]),this.mml}}case_double_script.CaseDoubleScript=CaseDoubleScript;var case_embellished={},case_multiscripts={},case_multiindex={};Object.defineProperty(case_multiindex,"__esModule",{value:!0});case_multiindex.CaseMultiindex=void 0;const DomUtil$d=dom_util,abstract_enrich_case_1$6=abstract_enrich_case,EnrichMathml$9=enrich_mathml,enrich_attr_1$f=enrich_attr;class CaseMultiindex extends abstract_enrich_case_1$6.AbstractEnrichCase{constructor(r){super(r),this.mml=r.mathmlTree}static multiscriptIndex(r){return r.type==="punctuated"&&r.contentNodes[0].role==="dummy"?EnrichMathml$9.collapsePunctuated(r):(EnrichMathml$9.walkTree(r),r.id)}static createNone_(r){const e=DomUtil$d.createElement("none");return r&&(0,enrich_attr_1$f.setAttributes)(e,r),e.setAttribute(enrich_attr_1$f.Attribute.ADDED,"true"),e}completeMultiscript(r,e){const n=DomUtil$d.toArray(this.mml.childNodes).slice(1);let i=0;const o=a=>{for(let s=0,l;l=a[s];s++){const c=n[i];if(!c||l!==parseInt(EnrichMathml$9.getInnerNode(c).getAttribute(enrich_attr_1$f.Attribute.ID))){const f=this.semantic.querySelectorAll(d=>d.id===l);this.mml.insertBefore(CaseMultiindex.createNone_(f[0]),c||null)}else EnrichMathml$9.getInnerNode(c).setAttribute(enrich_attr_1$f.Attribute.PARENT,this.semantic.id.toString()),i++}};o(r),n[i]&&DomUtil$d.tagName(n[i])!=="MPRESCRIPTS"?this.mml.insertBefore(n[i],DomUtil$d.createElement("mprescripts")):i++,o(e)}}case_multiindex.CaseMultiindex=CaseMultiindex;Object.defineProperty(case_multiscripts,"__esModule",{value:!0});case_multiscripts.CaseMultiscripts=void 0;const DomUtil$c=dom_util,semantic_skeleton_1$3=semantic_skeleton,case_multiindex_1$1=case_multiindex,EnrichMathml$8=enrich_mathml,enrich_attr_1$e=enrich_attr;class CaseMultiscripts extends case_multiindex_1$1.CaseMultiindex{static test(r){return r.mathmlTree?DomUtil$c.tagName(r.mathmlTree)==="MMULTISCRIPTS"&&(r.type==="superscript"||r.type==="subscript"):!1}constructor(r){super(r)}getMathml(){(0,enrich_attr_1$e.setAttributes)(this.mml,this.semantic);let r,e,n;if(this.semantic.childNodes[0]&&this.semantic.childNodes[0].role==="subsup"){const a=this.semantic.childNodes[0];r=a.childNodes[0],e=case_multiindex_1$1.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[1]),n=case_multiindex_1$1.CaseMultiindex.multiscriptIndex(a.childNodes[1]);const s=[this.semantic.id,[a.id,r.id,n],e];EnrichMathml$8.addCollapsedAttribute(this.mml,s),this.mml.setAttribute(enrich_attr_1$e.Attribute.TYPE,a.role),this.completeMultiscript(semantic_skeleton_1$3.SemanticSkeleton.interleaveIds(n,e),[])}else{r=this.semantic.childNodes[0],e=case_multiindex_1$1.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[1]);const a=[this.semantic.id,r.id,e];EnrichMathml$8.addCollapsedAttribute(this.mml,a)}const i=semantic_skeleton_1$3.SemanticSkeleton.collapsedLeafs(n||[],e),o=EnrichMathml$8.walkTree(r);return EnrichMathml$8.getInnerNode(o).setAttribute(enrich_attr_1$e.Attribute.PARENT,this.semantic.id.toString()),i.unshift(r.id),this.mml.setAttribute(enrich_attr_1$e.Attribute.CHILDREN,i.join(",")),this.mml}}case_multiscripts.CaseMultiscripts=CaseMultiscripts;var case_tensor={};Object.defineProperty(case_tensor,"__esModule",{value:!0});case_tensor.CaseTensor=void 0;const semantic_skeleton_1$2=semantic_skeleton,case_multiindex_1=case_multiindex,EnrichMathml$7=enrich_mathml,enrich_attr_1$d=enrich_attr;class CaseTensor extends case_multiindex_1.CaseMultiindex{static test(r){return!!r.mathmlTree&&r.type==="tensor"}constructor(r){super(r)}getMathml(){EnrichMathml$7.walkTree(this.semantic.childNodes[0]);const r=case_multiindex_1.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[1]),e=case_multiindex_1.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[2]),n=case_multiindex_1.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[3]),i=case_multiindex_1.CaseMultiindex.multiscriptIndex(this.semantic.childNodes[4]);(0,enrich_attr_1$d.setAttributes)(this.mml,this.semantic);const o=[this.semantic.id,this.semantic.childNodes[0].id,r,e,n,i];EnrichMathml$7.addCollapsedAttribute(this.mml,o);const a=semantic_skeleton_1$2.SemanticSkeleton.collapsedLeafs(r,e,n,i);return a.unshift(this.semantic.childNodes[0].id),this.mml.setAttribute(enrich_attr_1$d.Attribute.CHILDREN,a.join(",")),this.completeMultiscript(semantic_skeleton_1$2.SemanticSkeleton.interleaveIds(n,i),semantic_skeleton_1$2.SemanticSkeleton.interleaveIds(r,e)),this.mml}}case_tensor.CaseTensor=CaseTensor;Object.defineProperty(case_embellished,"__esModule",{value:!0});case_embellished.CaseEmbellished=void 0;const DomUtil$b=dom_util,semantic_node_1=semantic_node,abstract_enrich_case_1$5=abstract_enrich_case,case_double_script_1$1=case_double_script,case_multiscripts_1$1=case_multiscripts,case_tensor_1$1=case_tensor,EnrichMathml$6=enrich_mathml,enrich_attr_1$c=enrich_attr;class CaseEmbellished extends abstract_enrich_case_1$5.AbstractEnrichCase{constructor(r){super(r),this.fenced=null,this.fencedMml=null,this.fencedMmlNodes=[],this.ofence=null,this.ofenceMml=null,this.ofenceMap={},this.cfence=null,this.cfenceMml=null,this.cfenceMap={},this.parentCleanup=[]}static test(r){return!!(r.mathmlTree&&r.fencePointer&&!r.mathmlTree.getAttribute("data-semantic-type"))}static makeEmptyNode_(r){const e=DomUtil$b.createElement("mrow"),n=new semantic_node_1.SemanticNode(r);return n.type="empty",n.mathmlTree=e,n}static fencedMap_(r,e){e[r.id]=r.mathmlTree,r.embellished&&CaseEmbellished.fencedMap_(r.childNodes[0],e)}getMathml(){return this.getFenced_(),this.fencedMml=EnrichMathml$6.walkTree(this.fenced),this.getFencesMml_(),this.fenced.type==="empty"&&!this.fencedMml.parentNode&&(this.fencedMml.setAttribute(enrich_attr_1$c.Attribute.ADDED,"true"),this.cfenceMml.parentNode.insertBefore(this.fencedMml,this.cfenceMml)),this.getFencedMml_(),this.rewrite_()}fencedElement(r){return r.type==="fenced"||r.type==="matrix"||r.type==="vector"}getFenced_(){let r=this.semantic;for(;!this.fencedElement(r);)r=r.childNodes[0];this.fenced=r.childNodes[0],this.ofence=r.contentNodes[0],this.cfence=r.contentNodes[1],CaseEmbellished.fencedMap_(this.ofence,this.ofenceMap),CaseEmbellished.fencedMap_(this.cfence,this.cfenceMap)}getFencedMml_(){let r=this.ofenceMml.nextSibling;for(r=r===this.fencedMml?r:this.fencedMml;r&&r!==this.cfenceMml;)this.fencedMmlNodes.push(r),r=r.nextSibling}getFencesMml_(){let r=this.semantic;const e=Object.keys(this.ofenceMap),n=Object.keys(this.cfenceMap);for(;(!this.ofenceMml||!this.cfenceMml)&&r!==this.fenced;)e.indexOf(r.fencePointer)!==-1&&!this.ofenceMml&&(this.ofenceMml=r.mathmlTree),n.indexOf(r.fencePointer)!==-1&&!this.cfenceMml&&(this.cfenceMml=r.mathmlTree),r=r.childNodes[0];this.ofenceMml||(this.ofenceMml=this.ofence.mathmlTree),this.cfenceMml||(this.cfenceMml=this.cfence.mathmlTree),this.ofenceMml&&(this.ofenceMml=EnrichMathml$6.ascendNewNode(this.ofenceMml)),this.cfenceMml&&(this.cfenceMml=EnrichMathml$6.ascendNewNode(this.cfenceMml))}rewrite_(){let r=this.semantic,e=null;const n=this.introduceNewLayer_();for((0,enrich_attr_1$c.setAttributes)(n,this.fenced.parent);!this.fencedElement(r);){const i=r.mathmlTree,o=this.specialCase_(r,i);if(o)r=o;else{(0,enrich_attr_1$c.setAttributes)(i,r);const l=[];for(let c=1,f;f=r.childNodes[c];c++)l.push(EnrichMathml$6.walkTree(f));r=r.childNodes[0]}const a=DomUtil$b.createElement("dummy"),s=i.childNodes[0];DomUtil$b.replaceNode(i,a),DomUtil$b.replaceNode(n,i),DomUtil$b.replaceNode(i.childNodes[0],n),DomUtil$b.replaceNode(a,s),e||(e=i)}return EnrichMathml$6.walkTree(this.ofence),EnrichMathml$6.walkTree(this.cfence),this.cleanupParents_(),e||n}specialCase_(r,e){const n=DomUtil$b.tagName(e);let i=null,o;if(n==="MSUBSUP"?(i=r.childNodes[0],o=case_double_script_1$1.CaseDoubleScript):n==="MMULTISCRIPTS"&&(r.type==="superscript"||r.type==="subscript"?o=case_multiscripts_1$1.CaseMultiscripts:r.type==="tensor"&&(o=case_tensor_1$1.CaseTensor),o&&r.childNodes[0]&&r.childNodes[0].role==="subsup"?i=r.childNodes[0]:i=r),!i)return null;const a=i.childNodes[0],s=CaseEmbellished.makeEmptyNode_(a.id);return i.childNodes[0]=s,e=new o(r).getMathml(),i.childNodes[0]=a,this.parentCleanup.push(e),i.childNodes[0]}introduceNewLayer_(){const r=this.fullFence(this.ofenceMml),e=this.fullFence(this.cfenceMml);let n=DomUtil$b.createElement("mrow");if(DomUtil$b.replaceNode(this.fencedMml,n),this.fencedMmlNodes.forEach(i=>n.appendChild(i)),n.insertBefore(r,this.fencedMml),n.appendChild(e),!n.parentNode){const i=DomUtil$b.createElement("mrow");for(;n.childNodes.length>0;)i.appendChild(n.childNodes[0]);n.appendChild(i),n=i}return n}fullFence(r){const e=this.fencedMml.parentNode;let n=r;for(;n.parentNode&&n.parentNode!==e;)n=n.parentNode;return n}cleanupParents_(){this.parentCleanup.forEach(function(r){const e=r.childNodes[1].getAttribute(enrich_attr_1$c.Attribute.PARENT);r.childNodes[0].setAttribute(enrich_attr_1$c.Attribute.PARENT,e)})}}case_embellished.CaseEmbellished=CaseEmbellished;var case_limit={};Object.defineProperty(case_limit,"__esModule",{value:!0});case_limit.CaseLimit=void 0;const DomUtil$a=dom_util,abstract_enrich_case_1$4=abstract_enrich_case,EnrichMathml$5=enrich_mathml,enrich_attr_1$b=enrich_attr;class CaseLimit extends abstract_enrich_case_1$4.AbstractEnrichCase{constructor(r){super(r),this.mml=r.mathmlTree}static test(r){if(!r.mathmlTree||!r.childNodes.length)return!1;const e=DomUtil$a.tagName(r.mathmlTree),n=r.type;return(n==="limupper"||n==="limlower")&&(e==="MSUBSUP"||e==="MUNDEROVER")||n==="limboth"&&(e==="MSUB"||e==="MUNDER"||e==="MSUP"||e==="MOVER")}static walkTree_(r){r&&EnrichMathml$5.walkTree(r)}getMathml(){const r=this.semantic.childNodes;return this.semantic.type!=="limboth"&&this.mml.childNodes.length>=3&&(this.mml=EnrichMathml$5.introduceNewLayer([this.mml],this.semantic)),(0,enrich_attr_1$b.setAttributes)(this.mml,this.semantic),r[0].mathmlTree||(r[0].mathmlTree=this.semantic.mathmlTree),r.forEach(CaseLimit.walkTree_),this.mml}}case_limit.CaseLimit=CaseLimit;var case_line={};Object.defineProperty(case_line,"__esModule",{value:!0});case_line.CaseLine=void 0;const abstract_enrich_case_1$3=abstract_enrich_case,EnrichMathml$4=enrich_mathml,enrich_attr_1$a=enrich_attr;class CaseLine extends abstract_enrich_case_1$3.AbstractEnrichCase{constructor(r){super(r),this.mml=r.mathmlTree}static test(r){return!!r.mathmlTree&&r.type==="line"}getMathml(){return this.semantic.contentNodes.length&&EnrichMathml$4.walkTree(this.semantic.contentNodes[0]),this.semantic.childNodes.length&&EnrichMathml$4.walkTree(this.semantic.childNodes[0]),(0,enrich_attr_1$a.setAttributes)(this.mml,this.semantic),this.mml}}case_line.CaseLine=CaseLine;var case_proof={};Object.defineProperty(case_proof,"__esModule",{value:!0});case_proof.CaseProof=void 0;const abstract_enrich_case_1$2=abstract_enrich_case,EnrichMathml$3=enrich_mathml,enrich_attr_1$9=enrich_attr;class CaseProof extends abstract_enrich_case_1$2.AbstractEnrichCase{constructor(r){super(r),this.mml=r.mathmlTree}static test(r){return!!r.mathmlTree&&(r.type==="inference"||r.type==="premises")}getMathml(){return this.semantic.childNodes.length?(this.semantic.contentNodes.forEach(function(r){EnrichMathml$3.walkTree(r),(0,enrich_attr_1$9.setAttributes)(r.mathmlTree,r)}),this.semantic.childNodes.forEach(function(r){EnrichMathml$3.walkTree(r)}),(0,enrich_attr_1$9.setAttributes)(this.mml,this.semantic),this.mml.getAttribute("data-semantic-id")===this.mml.getAttribute("data-semantic-parent")&&this.mml.removeAttribute("data-semantic-parent"),this.mml):this.mml}}case_proof.CaseProof=CaseProof;var case_table={};Object.defineProperty(case_table,"__esModule",{value:!0});case_table.CaseTable=void 0;const DomUtil$9=dom_util,abstract_enrich_case_1$1=abstract_enrich_case,EnrichMathml$2=enrich_mathml,enrich_attr_1$8=enrich_attr;class CaseTable extends abstract_enrich_case_1$1.AbstractEnrichCase{constructor(r){super(r),this.inner=[],this.mml=r.mathmlTree}static test(r){return r.type==="matrix"||r.type==="vector"||r.type==="cases"}getMathml(){const r=EnrichMathml$2.cloneContentNode(this.semantic.contentNodes[0]),e=this.semantic.contentNodes[1]?EnrichMathml$2.cloneContentNode(this.semantic.contentNodes[1]):null;if(this.inner=this.semantic.childNodes.map(EnrichMathml$2.walkTree),!this.mml)this.mml=EnrichMathml$2.introduceNewLayer([r].concat(this.inner,[e]),this.semantic);else if(DomUtil$9.tagName(this.mml)==="MFENCED"){const n=this.mml.childNodes;this.mml.insertBefore(r,n[0]||null),e&&this.mml.appendChild(e),this.mml=EnrichMathml$2.rewriteMfenced(this.mml)}else{const n=[r,this.mml];e&&n.push(e),this.mml=EnrichMathml$2.introduceNewLayer(n,this.semantic)}return(0,enrich_attr_1$8.setAttributes)(this.mml,this.semantic),this.mml}}case_table.CaseTable=CaseTable;var case_text={};Object.defineProperty(case_text,"__esModule",{value:!0});case_text.CaseText=void 0;const abstract_enrich_case_1=abstract_enrich_case,EnrichMathml$1=enrich_mathml,enrich_attr_1$7=enrich_attr;class CaseText extends abstract_enrich_case_1.AbstractEnrichCase{constructor(r){super(r),this.mml=r.mathmlTree}static test(r){return r.type==="punctuated"&&(r.role==="text"||r.contentNodes.every(e=>e.role==="dummy"))}getMathml(){const r=[],e=EnrichMathml$1.collapsePunctuated(this.semantic,r);return this.mml=EnrichMathml$1.introduceNewLayer(r,this.semantic),(0,enrich_attr_1$7.setAttributes)(this.mml,this.semantic),this.mml.removeAttribute(enrich_attr_1$7.Attribute.CONTENT),EnrichMathml$1.addCollapsedAttribute(this.mml,e),this.mml}}case_text.CaseText=CaseText;const case_binomial_1=case_binomial,case_double_script_1=case_double_script,case_embellished_1=case_embellished,case_limit_1=case_limit,case_line_1=case_line,case_multiscripts_1=case_multiscripts,case_proof_1=case_proof,case_table_1=case_table,case_tensor_1=case_tensor,case_text_1=case_text,enrich_case_1=enrich_case;enrich_case_1.factory.push({test:case_limit_1.CaseLimit.test,constr:t=>new case_limit_1.CaseLimit(t)},{test:case_embellished_1.CaseEmbellished.test,constr:t=>new case_embellished_1.CaseEmbellished(t)},{test:case_double_script_1.CaseDoubleScript.test,constr:t=>new case_double_script_1.CaseDoubleScript(t)},{test:case_tensor_1.CaseTensor.test,constr:t=>new case_tensor_1.CaseTensor(t)},{test:case_multiscripts_1.CaseMultiscripts.test,constr:t=>new case_multiscripts_1.CaseMultiscripts(t)},{test:case_line_1.CaseLine.test,constr:t=>new case_line_1.CaseLine(t)},{test:case_binomial_1.CaseBinomial.test,constr:t=>new case_binomial_1.CaseBinomial(t)},{test:case_proof_1.CaseProof.test,constr:t=>new case_proof_1.CaseProof(t)},{test:case_table_1.CaseTable.test,constr:t=>new case_table_1.CaseTable(t)},{test:case_text_1.CaseText.test,constr:t=>new case_text_1.CaseText(t)});Object.defineProperty(enrich,"__esModule",{value:!0});enrich.prepareMmlString=enrich.testTranslation=enrich.semanticMathml=enrich.semanticMathmlSync=enrich.semanticMathmlNode=void 0;const debugger_1=_debugger,DomUtil$8=dom_util,engine_1$2=engine,Semantic$1=semantic,EnrichMathml=enrich_mathml;function semanticMathmlNode(t){const r=DomUtil$8.cloneNode(t),e=Semantic$1.getTree(r);return EnrichMathml.enrich(r,e)}enrich.semanticMathmlNode=semanticMathmlNode;function semanticMathmlSync(t){const r=DomUtil$8.parseInput(t);return semanticMathmlNode(r)}enrich.semanticMathmlSync=semanticMathmlSync;function semanticMathml(t,r){engine_1$2.EnginePromise.getall().then(()=>{const e=DomUtil$8.parseInput(t);r(semanticMathmlNode(e))})}enrich.semanticMathml=semanticMathml;function testTranslation(t){debugger_1.Debugger.getInstance().init();const r=semanticMathmlSync(prepareMmlString(t));return debugger_1.Debugger.getInstance().exit(),r}enrich.testTranslation=testTranslation;function prepareMmlString(t){return t.match(/^<math/)||(t="<math>"+t),t.match(/\/math>$/)||(t+="</math>"),t}enrich.prepareMmlString=prepareMmlString;var highlighter_factory={},chtml_highlighter={},css_highlighter={},abstract_highlighter={};Object.defineProperty(abstract_highlighter,"__esModule",{value:!0});abstract_highlighter.AbstractHighlighter=void 0;const XpathUtil$4=xpath_util,enrich_attr_1$6=enrich_attr;class AbstractHighlighter{constructor(){this.color=null,this.mactionName="",this.currentHighlights=[]}highlight(r){this.currentHighlights.push(r.map(e=>{const n=this.highlightNode(e);return this.setHighlighted(e),n}))}highlightAll(r){const e=this.getMactionNodes(r);for(let n=0,i;i=e[n];n++)this.highlight([i])}unhighlight(){const r=this.currentHighlights.pop();r&&r.forEach(e=>{this.isHighlighted(e.node)&&(this.unhighlightNode(e),this.unsetHighlighted(e.node))})}unhighlightAll(){for(;this.currentHighlights.length>0;)this.unhighlight()}setColor(r){this.color=r}colorString(){return this.color.rgba()}addEvents(r,e){const n=this.getMactionNodes(r);for(let i=0,o;o=n[i];i++)for(const a in e)o.addEventListener(a,e[a])}getMactionNodes(r){return Array.from(r.getElementsByClassName(this.mactionName))}isMactionNode(r){const e=r.className||r.getAttribute("class");return e?!!e.match(new RegExp(this.mactionName)):!1}isHighlighted(r){return r.hasAttribute(AbstractHighlighter.ATTR)}setHighlighted(r){r.setAttribute(AbstractHighlighter.ATTR,"true")}unsetHighlighted(r){r.removeAttribute(AbstractHighlighter.ATTR)}colorizeAll(r){XpathUtil$4.evalXPath(`.//*[@${enrich_attr_1$6.Attribute.ID}]`,r).forEach(n=>this.colorize(n))}uncolorizeAll(r){XpathUtil$4.evalXPath(`.//*[@${enrich_attr_1$6.Attribute.ID}]`,r).forEach(n=>this.uncolorize(n))}colorize(r){const e=(0,enrich_attr_1$6.addPrefix)("foreground");r.hasAttribute(e)&&(r.setAttribute(e+"-old",r.style.color),r.style.color=r.getAttribute(e))}uncolorize(r){const e=(0,enrich_attr_1$6.addPrefix)("foreground")+"-old";r.hasAttribute(e)&&(r.style.color=r.getAttribute(e))}}abstract_highlighter.AbstractHighlighter=AbstractHighlighter;AbstractHighlighter.ATTR="sre-highlight";Object.defineProperty(css_highlighter,"__esModule",{value:!0});css_highlighter.CssHighlighter=void 0;const abstract_highlighter_1$4=abstract_highlighter;class CssHighlighter extends abstract_highlighter_1$4.AbstractHighlighter{constructor(){super(),this.mactionName="mjx-maction"}highlightNode(r){const e={node:r,background:r.style.backgroundColor,foreground:r.style.color},n=this.colorString();return r.style.backgroundColor=n.background,r.style.color=n.foreground,e}unhighlightNode(r){r.node.style.backgroundColor=r.background,r.node.style.color=r.foreground}}css_highlighter.CssHighlighter=CssHighlighter;Object.defineProperty(chtml_highlighter,"__esModule",{value:!0});chtml_highlighter.ChtmlHighlighter=void 0;const css_highlighter_1$1=css_highlighter;class ChtmlHighlighter extends css_highlighter_1$1.CssHighlighter{constructor(){super()}isMactionNode(r){return r.tagName.toUpperCase()===this.mactionName.toUpperCase()}getMactionNodes(r){return Array.from(r.getElementsByTagName(this.mactionName))}}chtml_highlighter.ChtmlHighlighter=ChtmlHighlighter;var color_picker={};Object.defineProperty(color_picker,"__esModule",{value:!0});color_picker.ContrastPicker=color_picker.ColorPicker=void 0;const namedColors={red:{red:255,green:0,blue:0},green:{red:0,green:255,blue:0},blue:{red:0,green:0,blue:255},yellow:{red:255,green:255,blue:0},cyan:{red:0,green:255,blue:255},magenta:{red:255,green:0,blue:255},white:{red:255,green:255,blue:255},black:{red:0,green:0,blue:0}};function getChannelColor(t,r){const e=t||{color:r};let n=Object.prototype.hasOwnProperty.call(e,"color")?namedColors[e.color]:e;return n||(n=namedColors[r]),n.alpha=Object.prototype.hasOwnProperty.call(e,"alpha")?e.alpha:1,normalizeColor(n)}function normalizeColor(t){const r=e=>(e=Math.max(e,0),e=Math.min(255,e),Math.round(e));return t.red=r(t.red),t.green=r(t.green),t.blue=r(t.blue),t.alpha=Math.max(t.alpha,0),t.alpha=Math.min(1,t.alpha),t}class ColorPicker{constructor(r,e){this.foreground=getChannelColor(e,ColorPicker.DEFAULT_FOREGROUND_),this.background=getChannelColor(r,ColorPicker.DEFAULT_BACKGROUND_)}static toHex(r){const e=r.toString(16);return e.length===1?"0"+e:e}rgba(){const r=function(e){return"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")"};return{background:r(this.background),foreground:r(this.foreground)}}rgb(){const r=function(e){return"rgb("+e.red+","+e.green+","+e.blue+")"};return{background:r(this.background),alphaback:this.background.alpha.toString(),foreground:r(this.foreground),alphafore:this.foreground.alpha.toString()}}hex(){const r=function(e){return"#"+ColorPicker.toHex(e.red)+ColorPicker.toHex(e.green)+ColorPicker.toHex(e.blue)};return{background:r(this.background),alphaback:this.background.alpha.toString(),foreground:r(this.foreground),alphafore:this.foreground.alpha.toString()}}}color_picker.ColorPicker=ColorPicker;ColorPicker.DEFAULT_BACKGROUND_="blue";ColorPicker.DEFAULT_FOREGROUND_="black";function hsl2rgb(t,r,e){r=r>1?r/100:r,e=e>1?e/100:e;const n=(1-Math.abs(2*e-1))*r,i=n*(1-Math.abs(t/60%2-1)),o=e-n/2;let a=0,s=0,l=0;return 0<=t&&t<60?[a,s,l]=[n,i,0]:60<=t&&t<120?[a,s,l]=[i,n,0]:120<=t&&t<180?[a,s,l]=[0,n,i]:180<=t&&t<240?[a,s,l]=[0,i,n]:240<=t&&t<300?[a,s,l]=[i,0,n]:300<=t&&t<360&&([a,s,l]=[n,0,i]),{red:a+o,green:s+o,blue:l+o}}function rgb2RGB(t){return{red:Math.round(255*t.red),green:Math.round(255*t.green),blue:Math.round(255*t.blue)}}function RGB2hex(t){return"rgb("+t.red+","+t.green+","+t.blue+")"}class ContrastPicker{constructor(){this.hue=10,this.sat=100,this.light=50,this.incr=50}generate(){return RGB2hex(rgb2RGB(hsl2rgb(this.hue,this.sat,this.light)))}increment(){this.hue=(this.hue+this.incr)%360}}color_picker.ContrastPicker=ContrastPicker;var html_highlighter={};Object.defineProperty(html_highlighter,"__esModule",{value:!0});html_highlighter.HtmlHighlighter=void 0;const DomUtil$7=dom_util,abstract_highlighter_1$3=abstract_highlighter;class HtmlHighlighter extends abstract_highlighter_1$3.AbstractHighlighter{constructor(){super(),this.mactionName="maction"}highlightNode(r){const e={node:r,foreground:r.style.color,position:r.style.position},n=this.color.rgb();r.style.color=n.foreground,r.style.position="relative";const i=r.bbox;if(i&&i.w){const s=DomUtil$7.createElement("span"),l=parseFloat(r.style.paddingLeft||"0");s.style.backgroundColor=n.background,s.style.opacity=n.alphaback.toString(),s.style.display="inline-block",s.style.height=i.h+i.d+2*.05+"em",s.style.verticalAlign=-i.d+"em",s.style.marginTop=s.style.marginBottom=-.05+"em",s.style.width=i.w+2*0+"em",s.style.marginLeft=l-0+"em",s.style.marginRight=-i.w-0-l+"em",r.parentNode.insertBefore(s,r),e.box=s}return e}unhighlightNode(r){const e=r.node;e.style.color=r.foreground,e.style.position=r.position,r.box&&r.box.parentNode.removeChild(r.box)}}html_highlighter.HtmlHighlighter=HtmlHighlighter;var mml_css_highlighter={};Object.defineProperty(mml_css_highlighter,"__esModule",{value:!0});mml_css_highlighter.MmlCssHighlighter=void 0;const css_highlighter_1=css_highlighter;class MmlCssHighlighter extends css_highlighter_1.CssHighlighter{constructor(){super(),this.mactionName="maction"}getMactionNodes(r){return Array.from(r.getElementsByTagName(this.mactionName))}isMactionNode(r){return r.tagName===this.mactionName}}mml_css_highlighter.MmlCssHighlighter=MmlCssHighlighter;var mml_highlighter={};Object.defineProperty(mml_highlighter,"__esModule",{value:!0});mml_highlighter.MmlHighlighter=void 0;const abstract_highlighter_1$2=abstract_highlighter;class MmlHighlighter extends abstract_highlighter_1$2.AbstractHighlighter{constructor(){super(),this.mactionName="maction"}highlightNode(r){let e=r.getAttribute("style");return e+=";background-color: "+this.colorString().background,e+=";color: "+this.colorString().foreground,r.setAttribute("style",e),{node:r}}unhighlightNode(r){let e=r.node.getAttribute("style");e=e.replace(";background-color: "+this.colorString().background,""),e=e.replace(";color: "+this.colorString().foreground,""),r.node.setAttribute("style",e)}colorString(){return this.color.rgba()}getMactionNodes(r){return Array.from(r.getElementsByTagName(this.mactionName))}isMactionNode(r){return r.tagName===this.mactionName}}mml_highlighter.MmlHighlighter=MmlHighlighter;var svg_highlighter={};Object.defineProperty(svg_highlighter,"__esModule",{value:!0});svg_highlighter.SvgHighlighter=void 0;const DomUtil$6=dom_util,abstract_highlighter_1$1=abstract_highlighter;class SvgHighlighter extends abstract_highlighter_1$1.AbstractHighlighter{constructor(){super(),this.mactionName="mjx-svg-maction"}highlightNode(r){let e;if(this.isHighlighted(r))return e={node:r.previousSibling||r,background:r.style.backgroundColor,foreground:r.style.color},e;if(r.tagName==="svg"){const s={node:r,background:r.style.backgroundColor,foreground:r.style.color};return r.style.backgroundColor=this.colorString().background,r.style.color=this.colorString().foreground,s}const n=DomUtil$6.createElementNS("http://www.w3.org/2000/svg","rect"),i=40;let o;if(r.nodeName==="use"){const s=DomUtil$6.createElementNS("http://www.w3.org/2000/svg","g");r.parentNode.insertBefore(s,r),s.appendChild(r),o=s.getBBox(),s.parentNode.replaceChild(r,s)}else o=r.getBBox();n.setAttribute("x",(o.x-i).toString()),n.setAttribute("y",(o.y-i).toString()),n.setAttribute("width",(o.width+2*i).toString()),n.setAttribute("height",(o.height+2*i).toString());const a=r.getAttribute("transform");return a&&n.setAttribute("transform",a),n.setAttribute("fill",this.colorString().background),n.setAttribute(abstract_highlighter_1$1.AbstractHighlighter.ATTR,"true"),r.parentNode.insertBefore(n,r),e={node:n,foreground:r.getAttribute("fill")},r.setAttribute("fill",this.colorString().foreground),e}setHighlighted(r){r.tagName==="svg"&&super.setHighlighted(r)}unhighlightNode(r){if("background"in r){r.node.style.backgroundColor=r.background,r.node.style.color=r.foreground;return}r.foreground?r.node.nextSibling.setAttribute("fill",r.foreground):r.node.nextSibling.removeAttribute("fill"),r.node.parentNode.removeChild(r.node)}isMactionNode(r){let e=r.className||r.getAttribute("class");return e=e.baseVal!==void 0?e.baseVal:e,e?!!e.match(new RegExp(this.mactionName)):!1}}svg_highlighter.SvgHighlighter=SvgHighlighter;var svg_v3_highlighter={};Object.defineProperty(svg_v3_highlighter,"__esModule",{value:!0});svg_v3_highlighter.SvgV3Highlighter=void 0;const DomUtil$5=dom_util,XpathUtil$3=xpath_util,abstract_highlighter_1=abstract_highlighter,color_picker_1$1=color_picker,svg_highlighter_1=svg_highlighter;class SvgV3Highlighter extends svg_highlighter_1.SvgHighlighter{constructor(){super(),this.mactionName="maction"}highlightNode(r){let e;if(this.isHighlighted(r))return e={node:r,background:this.colorString().background,foreground:this.colorString().foreground},e;if(r.tagName==="svg"||r.tagName==="MJX-CONTAINER")return e={node:r,background:r.style.backgroundColor,foreground:r.style.color},r.style.backgroundColor=this.colorString().background,r.style.color=this.colorString().foreground,e;const n=DomUtil$5.createElementNS("http://www.w3.org/2000/svg","rect");n.setAttribute("sre-highlighter-added","true");const i=40,o=r.getBBox();n.setAttribute("x",(o.x-i).toString()),n.setAttribute("y",(o.y-i).toString()),n.setAttribute("width",(o.width+2*i).toString()),n.setAttribute("height",(o.height+2*i).toString());const a=r.getAttribute("transform");if(a&&n.setAttribute("transform",a),n.setAttribute("fill",this.colorString().background),r.setAttribute(abstract_highlighter_1.AbstractHighlighter.ATTR,"true"),r.parentNode.insertBefore(n,r),e={node:r,foreground:r.getAttribute("fill")},r.nodeName==="rect"){const s=new color_picker_1$1.ColorPicker({alpha:0,color:"black"});r.setAttribute("fill",s.rgba().foreground)}else r.setAttribute("fill",this.colorString().foreground);return e}unhighlightNode(r){const e=r.node.previousSibling;if(e&&e.hasAttribute("sre-highlighter-added")){r.foreground?r.node.setAttribute("fill",r.foreground):r.node.removeAttribute("fill"),r.node.parentNode.removeChild(e);return}r.node.style.backgroundColor=r.background,r.node.style.color=r.foreground}isMactionNode(r){return r.getAttribute("data-mml-node")===this.mactionName}getMactionNodes(r){return Array.from(XpathUtil$3.evalXPath(`.//*[@data-mml-node="${this.mactionName}"]`,r))}}svg_v3_highlighter.SvgV3Highlighter=SvgV3Highlighter;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.highlighterMapping_=t.addEvents=t.highlighter=void 0;const r=chtml_highlighter,e=color_picker,n=css_highlighter,i=html_highlighter,o=mml_css_highlighter,a=mml_highlighter,s=svg_highlighter,l=svg_v3_highlighter;function c(d,u,m){const p=new e.ColorPicker(d,u),_=m.renderer==="NativeMML"&&m.browser==="Safari"?"MML-CSS":m.renderer==="SVG"&&m.browser==="v3"?"SVG-V3":m.renderer,y=new(t.highlighterMapping_[_]||t.highlighterMapping_.NativeMML);return y.setColor(p),y}t.highlighter=c;function f(d,u,m){const p=t.highlighterMapping_[m.renderer];p&&new p().addEvents(d,u)}t.addEvents=f,t.highlighterMapping_={SVG:s.SvgHighlighter,"SVG-V3":l.SvgV3Highlighter,NativeMML:a.MmlHighlighter,"HTML-CSS":i.HtmlHighlighter,"MML-CSS":o.MmlCssHighlighter,CommonHTML:n.CssHighlighter,CHTML:r.ChtmlHighlighter}})(highlighter_factory);var speech_generator_factory={},adhoc_speech_generator={},abstract_speech_generator={},rebuild_stree={},walker_util={};Object.defineProperty(walker_util,"__esModule",{value:!0});walker_util.getBySemanticId=walker_util.getSemanticRoot=walker_util.getAttribute=walker_util.splitAttribute=void 0;const DomUtil$4=dom_util,enrich_attr_1$5=enrich_attr;function splitAttribute(t){return t?t.split(/,/):[]}walker_util.splitAttribute=splitAttribute;function getAttribute(t,r){return t.getAttribute(r)}walker_util.getAttribute=getAttribute;function getSemanticRoot(t){if(t.hasAttribute(enrich_attr_1$5.Attribute.TYPE)&&!t.hasAttribute(enrich_attr_1$5.Attribute.PARENT))return t;const r=DomUtil$4.querySelectorAllByAttr(t,enrich_attr_1$5.Attribute.TYPE);for(let e=0,n;n=r[e];e++)if(!n.hasAttribute(enrich_attr_1$5.Attribute.PARENT))return n;return t}walker_util.getSemanticRoot=getSemanticRoot;function getBySemanticId(t,r){return t.getAttribute(enrich_attr_1$5.Attribute.ID)===r?t:DomUtil$4.querySelectorAllByAttrValue(t,enrich_attr_1$5.Attribute.ID,r)[0]}walker_util.getBySemanticId=getBySemanticId;Object.defineProperty(rebuild_stree,"__esModule",{value:!0});rebuild_stree.RebuildStree=void 0;const enrich_attr_1$4=enrich_attr,semantic_attr_1=semantic_attr,semantic_node_factory_1=semantic_node_factory,semantic_processor_1=semantic_processor,semantic_skeleton_1$1=semantic_skeleton,semantic_tree_1$1=semantic_tree,WalkerUtil$8=walker_util;class RebuildStree{constructor(r){this.mathml=r,this.factory=new semantic_node_factory_1.SemanticNodeFactory,this.nodeDict={},this.mmlRoot=WalkerUtil$8.getSemanticRoot(r),this.streeRoot=this.assembleTree(this.mmlRoot),this.stree=semantic_tree_1$1.SemanticTree.fromNode(this.streeRoot,this.mathml),this.xml=this.stree.xml(),semantic_processor_1.default.getInstance().setNodeFactory(this.factory)}static textContent(r,e,n){if(!n&&e.textContent){r.textContent=e.textContent;return}const i=WalkerUtil$8.splitAttribute(WalkerUtil$8.getAttribute(e,enrich_attr_1$4.Attribute.OPERATOR));i.length>1&&(r.textContent=i[1])}static isPunctuated(r){return!semantic_skeleton_1$1.SemanticSkeleton.simpleCollapseStructure(r)&&r[1]&&semantic_skeleton_1$1.SemanticSkeleton.contentCollapseStructure(r[1])}getTree(){return this.stree}assembleTree(r){const e=this.makeNode(r),n=WalkerUtil$8.splitAttribute(WalkerUtil$8.getAttribute(r,enrich_attr_1$4.Attribute.CHILDREN)),i=WalkerUtil$8.splitAttribute(WalkerUtil$8.getAttribute(r,enrich_attr_1$4.Attribute.CONTENT));if(i.length===0&&n.length===0)return RebuildStree.textContent(e,r),e;if(i.length>0){const a=WalkerUtil$8.getBySemanticId(this.mathml,i[0]);a&&RebuildStree.textContent(e,a,!0)}e.contentNodes=i.map(a=>this.setParent(a,e)),e.childNodes=n.map(a=>this.setParent(a,e));const o=WalkerUtil$8.getAttribute(r,enrich_attr_1$4.Attribute.COLLAPSED);return o?this.postProcess(e,o):e}makeNode(r){const e=WalkerUtil$8.getAttribute(r,enrich_attr_1$4.Attribute.TYPE),n=WalkerUtil$8.getAttribute(r,enrich_attr_1$4.Attribute.ROLE),i=WalkerUtil$8.getAttribute(r,enrich_attr_1$4.Attribute.FONT),o=WalkerUtil$8.getAttribute(r,enrich_attr_1$4.Attribute.ANNOTATION)||"",a=WalkerUtil$8.getAttribute(r,enrich_attr_1$4.Attribute.ATTRIBUTES)||"",s=WalkerUtil$8.getAttribute(r,enrich_attr_1$4.Attribute.ID),l=WalkerUtil$8.getAttribute(r,enrich_attr_1$4.Attribute.EMBELLISHED),c=WalkerUtil$8.getAttribute(r,enrich_attr_1$4.Attribute.FENCEPOINTER),f=this.createNode(parseInt(s,10));return f.type=e,f.role=n,f.font=i||"unknown",f.parseAnnotation(o),f.parseAttributes(a),c&&(f.fencePointer=c),l&&(f.embellished=l),f}makePunctuation(r){const e=this.createNode(r);return e.updateContent((0,semantic_attr_1.invisibleComma)()),e.role="dummy",e}makePunctuated(r,e,n){const i=this.createNode(e[0]);i.type="punctuated",i.embellished=r.embellished,i.fencePointer=r.fencePointer,i.role=n;const o=e.splice(1,1)[0].slice(1);i.contentNodes=o.map(this.makePunctuation.bind(this)),this.collapsedChildren_(e)}makeEmpty(r,e,n){const i=this.createNode(e);i.type="empty",i.embellished=r.embellished,i.fencePointer=r.fencePointer,i.role=n}makeIndex(r,e,n){if(RebuildStree.isPunctuated(e)){this.makePunctuated(r,e,n),e=e[0];return}semantic_skeleton_1$1.SemanticSkeleton.simpleCollapseStructure(e)&&!this.nodeDict[e.toString()]&&this.makeEmpty(r,e,n)}postProcess(r,e){const n=semantic_skeleton_1$1.SemanticSkeleton.fromString(e).array;if(r.type==="subsup"){const i=this.createNode(n[1][0]);return i.type="subscript",i.role="subsup",r.type="superscript",i.embellished=r.embellished,i.fencePointer=r.fencePointer,this.makeIndex(r,n[1][2],"rightsub"),this.makeIndex(r,n[2],"rightsuper"),this.collapsedChildren_(n),r}if(r.type==="subscript")return this.makeIndex(r,n[2],"rightsub"),this.collapsedChildren_(n),r;if(r.type==="superscript")return this.makeIndex(r,n[2],"rightsuper"),this.collapsedChildren_(n),r;if(r.type==="tensor")return this.makeIndex(r,n[2],"leftsub"),this.makeIndex(r,n[3],"leftsuper"),this.makeIndex(r,n[4],"rightsub"),this.makeIndex(r,n[5],"rightsuper"),this.collapsedChildren_(n),r;if(r.type==="punctuated"){if(RebuildStree.isPunctuated(n)){const i=n.splice(1,1)[0].slice(1);r.contentNodes=i.map(this.makePunctuation.bind(this))}return r}if(r.type==="underover"){const i=this.createNode(n[1][0]);return r.childNodes[1].role==="overaccent"?(i.type="overscore",r.type="underscore"):(i.type="underscore",r.type="overscore"),i.role="underover",i.embellished=r.embellished,i.fencePointer=r.fencePointer,this.collapsedChildren_(n),r}return r}createNode(r){const e=this.factory.makeNode(r);return this.nodeDict[r.toString()]=e,e}collapsedChildren_(r){const e=n=>{const i=this.nodeDict[n[0]];i.childNodes=[];for(let o=1,a=n.length;o<a;o++){const s=n[o];i.childNodes.push(semantic_skeleton_1$1.SemanticSkeleton.simpleCollapseStructure(s)?this.nodeDict[s]:e(s))}return i};e(r)}setParent(r,e){const n=WalkerUtil$8.getBySemanticId(this.mathml,r),i=this.assembleTree(n);return i.parent=e,i}}rebuild_stree.RebuildStree=RebuildStree;var speech_generator_util={};Object.defineProperty(speech_generator_util,"__esModule",{value:!0});speech_generator_util.computeSummary_=speech_generator_util.retrieveSummary=speech_generator_util.connectAllMactions=speech_generator_util.connectMactions=speech_generator_util.nodeAtPosition_=speech_generator_util.computePrefix_=speech_generator_util.retrievePrefix=speech_generator_util.addPrefix=speech_generator_util.addModality=speech_generator_util.addSpeech=speech_generator_util.recomputeMarkup=speech_generator_util.computeMarkup=speech_generator_util.recomputeSpeech=speech_generator_util.computeSpeech=void 0;const AuralRendering$2=aural_rendering,DomUtil$3=dom_util,XpathUtil$2=xpath_util,enrich_attr_1$3=enrich_attr,speech_rule_engine_1$1=speech_rule_engine,semantic_tree_1=semantic_tree,WalkerUtil$7=walker_util;function computeSpeech(t){return speech_rule_engine_1$1.SpeechRuleEngine.getInstance().evaluateNode(t)}speech_generator_util.computeSpeech=computeSpeech;function recomputeSpeech(t){const r=semantic_tree_1.SemanticTree.fromNode(t);return computeSpeech(r.xml())}speech_generator_util.recomputeSpeech=recomputeSpeech;function computeMarkup(t){const r=computeSpeech(t);return AuralRendering$2.markup(r)}speech_generator_util.computeMarkup=computeMarkup;function recomputeMarkup(t){const r=recomputeSpeech(t);return AuralRendering$2.markup(r)}speech_generator_util.recomputeMarkup=recomputeMarkup;function addSpeech(t,r,e){const n=DomUtil$3.querySelectorAllByAttrValue(e,"id",r.id.toString())[0],i=n?AuralRendering$2.markup(computeSpeech(n)):recomputeMarkup(r);t.setAttribute(enrich_attr_1$3.Attribute.SPEECH,i)}speech_generator_util.addSpeech=addSpeech;function addModality(t,r,e){const n=recomputeMarkup(r);t.setAttribute(e,n)}speech_generator_util.addModality=addModality;function addPrefix(t,r){const e=retrievePrefix(r);e&&t.setAttribute(enrich_attr_1$3.Attribute.PREFIX,e)}speech_generator_util.addPrefix=addPrefix;function retrievePrefix(t){const r=computePrefix_(t);return AuralRendering$2.markup(r)}speech_generator_util.retrievePrefix=retrievePrefix;function computePrefix_(t){const r=semantic_tree_1.SemanticTree.fromRoot(t),e=XpathUtil$2.evalXPath('.//*[@id="'+t.id+'"]',r.xml());let n=e[0];return e.length>1&&(n=nodeAtPosition_(t,e)||n),n?speech_rule_engine_1$1.SpeechRuleEngine.getInstance().runInSetting({modality:"prefix",domain:"default",style:"default",strict:!0,speech:!0},function(){return speech_rule_engine_1$1.SpeechRuleEngine.getInstance().evaluateNode(n)}):[]}speech_generator_util.computePrefix_=computePrefix_;function nodeAtPosition_(t,r){const e=r[0];if(!t.parent)return e;const n=[];for(;t;)n.push(t.id),t=t.parent;const i=function(o,a){for(;a.length&&a.shift().toString()===o.getAttribute("id")&&o.parentNode&&o.parentNode.parentNode;)o=o.parentNode.parentNode;return!a.length};for(let o=0,a;a=r[o];o++)if(i(a,n.slice()))return a;return e}speech_generator_util.nodeAtPosition_=nodeAtPosition_;function connectMactions(t,r,e){const n=DomUtil$3.querySelectorAll(r,"maction");for(let i=0,o;o=n[i];i++){const a=o.getAttribute("id"),s=DomUtil$3.querySelectorAllByAttrValue(t,"id",a)[0];if(!s)continue;const l=o.childNodes[1],c=l.getAttribute(enrich_attr_1$3.Attribute.ID);let f=WalkerUtil$7.getBySemanticId(t,c);if(f&&f.getAttribute(enrich_attr_1$3.Attribute.TYPE)!=="dummy"||(f=s.childNodes[0],f.getAttribute("sre-highlighter-added")))continue;const d=l.getAttribute(enrich_attr_1$3.Attribute.PARENT);d&&f.setAttribute(enrich_attr_1$3.Attribute.PARENT,d),f.setAttribute(enrich_attr_1$3.Attribute.TYPE,"dummy"),f.setAttribute(enrich_attr_1$3.Attribute.ID,c),DomUtil$3.querySelectorAllByAttrValue(e,"id",c)[0].setAttribute("alternative",c)}}speech_generator_util.connectMactions=connectMactions;function connectAllMactions(t,r){const e=DomUtil$3.querySelectorAll(t,"maction");for(let n=0,i;i=e[n];n++){const a=i.childNodes[1].getAttribute(enrich_attr_1$3.Attribute.ID);DomUtil$3.querySelectorAllByAttrValue(r,"id",a)[0].setAttribute("alternative",a)}}speech_generator_util.connectAllMactions=connectAllMactions;function retrieveSummary(t){const r=computeSummary_(t);return AuralRendering$2.markup(r)}speech_generator_util.retrieveSummary=retrieveSummary;function computeSummary_(t){return t?speech_rule_engine_1$1.SpeechRuleEngine.getInstance().runInSetting({modality:"summary",strict:!1,speech:!0},function(){return speech_rule_engine_1$1.SpeechRuleEngine.getInstance().evaluateNode(t)}):[]}speech_generator_util.computeSummary_=computeSummary_;Object.defineProperty(abstract_speech_generator,"__esModule",{value:!0});abstract_speech_generator.AbstractSpeechGenerator=void 0;const engine_setup_1$1=engine_setup,EnrichAttr=enrich_attr,rebuild_stree_1$2=rebuild_stree,SpeechGeneratorUtil$4=speech_generator_util;class AbstractSpeechGenerator{constructor(){this.modality=EnrichAttr.addPrefix("speech"),this.rebuilt_=null,this.options_={}}getRebuilt(){return this.rebuilt_}setRebuilt(r){this.rebuilt_=r}setOptions(r){this.options_=r||{},this.modality=EnrichAttr.addPrefix(this.options_.modality||"speech")}getOptions(){return this.options_}start(){}end(){}generateSpeech(r,e){return this.rebuilt_||(this.rebuilt_=new rebuild_stree_1$2.RebuildStree(e)),(0,engine_setup_1$1.setup)(this.options_),SpeechGeneratorUtil$4.computeMarkup(this.getRebuilt().xml)}}abstract_speech_generator.AbstractSpeechGenerator=AbstractSpeechGenerator;Object.defineProperty(adhoc_speech_generator,"__esModule",{value:!0});adhoc_speech_generator.AdhocSpeechGenerator=void 0;const abstract_speech_generator_1$5=abstract_speech_generator;class AdhocSpeechGenerator extends abstract_speech_generator_1$5.AbstractSpeechGenerator{getSpeech(r,e){const n=this.generateSpeech(r,e);return r.setAttribute(this.modality,n),n}}adhoc_speech_generator.AdhocSpeechGenerator=AdhocSpeechGenerator;var color_generator={};Object.defineProperty(color_generator,"__esModule",{value:!0});color_generator.ColorGenerator=void 0;const enrich_attr_1$2=enrich_attr,color_picker_1=color_picker,rebuild_stree_1$1=rebuild_stree,WalkerUtil$6=walker_util,abstract_speech_generator_1$4=abstract_speech_generator;class ColorGenerator extends abstract_speech_generator_1$4.AbstractSpeechGenerator{constructor(){super(...arguments),this.modality=(0,enrich_attr_1$2.addPrefix)("foreground"),this.contrast=new color_picker_1.ContrastPicker}static visitStree_(r,e,n){if(!r.childNodes.length){n[r.id]||e.push(r.id);return}if(r.contentNodes.length&&(r.type==="punctuated"&&r.contentNodes.forEach(i=>n[i.id]=!0),r.role!=="implicit"&&e.push(r.contentNodes.map(i=>i.id))),r.childNodes.length){if(r.role==="implicit"){const i=[];let o=[];for(const a of r.childNodes){const s=[];ColorGenerator.visitStree_(a,s,n),s.length<=2&&i.push(s.shift()),o=o.concat(s)}e.push(i),o.forEach(a=>e.push(a));return}r.childNodes.forEach(i=>ColorGenerator.visitStree_(i,e,n))}}getSpeech(r,e){return WalkerUtil$6.getAttribute(r,this.modality)}generateSpeech(r,e){return this.getRebuilt()||this.setRebuilt(new rebuild_stree_1$1.RebuildStree(r)),this.colorLeaves_(r),WalkerUtil$6.getAttribute(r,this.modality)}colorLeaves_(r){const e=[];ColorGenerator.visitStree_(this.getRebuilt().streeRoot,e,{});for(const n of e){const i=this.contrast.generate();let o=!1;Array.isArray(n)?o=n.map(a=>this.colorLeave_(r,a,i)).reduce((a,s)=>a||s,!1):o=this.colorLeave_(r,n.toString(),i),o&&this.contrast.increment()}}colorLeave_(r,e,n){const i=WalkerUtil$6.getBySemanticId(r,e);return i?(i.setAttribute(this.modality,n),!0):!1}}color_generator.ColorGenerator=ColorGenerator;var direct_speech_generator={};Object.defineProperty(direct_speech_generator,"__esModule",{value:!0});direct_speech_generator.DirectSpeechGenerator=void 0;const WalkerUtil$5=walker_util,abstract_speech_generator_1$3=abstract_speech_generator;class DirectSpeechGenerator extends abstract_speech_generator_1$3.AbstractSpeechGenerator{getSpeech(r,e){return WalkerUtil$5.getAttribute(r,this.modality)}}direct_speech_generator.DirectSpeechGenerator=DirectSpeechGenerator;var dummy_speech_generator={};Object.defineProperty(dummy_speech_generator,"__esModule",{value:!0});dummy_speech_generator.DummySpeechGenerator=void 0;const abstract_speech_generator_1$2=abstract_speech_generator;class DummySpeechGenerator extends abstract_speech_generator_1$2.AbstractSpeechGenerator{getSpeech(r,e){return""}}dummy_speech_generator.DummySpeechGenerator=DummySpeechGenerator;var node_speech_generator={},tree_speech_generator={};Object.defineProperty(tree_speech_generator,"__esModule",{value:!0});tree_speech_generator.TreeSpeechGenerator=void 0;const enrich_attr_1$1=enrich_attr,WalkerUtil$4=walker_util,abstract_speech_generator_1$1=abstract_speech_generator,SpeechGeneratorUtil$3=speech_generator_util;class TreeSpeechGenerator extends abstract_speech_generator_1$1.AbstractSpeechGenerator{getSpeech(r,e){const n=this.generateSpeech(r,e),i=this.getRebuilt().nodeDict;for(const o in i){const a=i[o],s=WalkerUtil$4.getBySemanticId(e,o),l=WalkerUtil$4.getBySemanticId(r,o);!s||!l||(!this.modality||this.modality===enrich_attr_1$1.Attribute.SPEECH?SpeechGeneratorUtil$3.addSpeech(l,a,this.getRebuilt().xml):SpeechGeneratorUtil$3.addModality(l,a,this.modality),this.modality===enrich_attr_1$1.Attribute.SPEECH&&SpeechGeneratorUtil$3.addPrefix(l,a))}return n}}tree_speech_generator.TreeSpeechGenerator=TreeSpeechGenerator;Object.defineProperty(node_speech_generator,"__esModule",{value:!0});node_speech_generator.NodeSpeechGenerator=void 0;const WalkerUtil$3=walker_util,tree_speech_generator_1=tree_speech_generator;class NodeSpeechGenerator extends tree_speech_generator_1.TreeSpeechGenerator{getSpeech(r,e){return super.getSpeech(r,e),WalkerUtil$3.getAttribute(r,this.modality)}}node_speech_generator.NodeSpeechGenerator=NodeSpeechGenerator;var summary_speech_generator={};Object.defineProperty(summary_speech_generator,"__esModule",{value:!0});summary_speech_generator.SummarySpeechGenerator=void 0;const abstract_speech_generator_1=abstract_speech_generator,SpeechGeneratorUtil$2=speech_generator_util;class SummarySpeechGenerator extends abstract_speech_generator_1.AbstractSpeechGenerator{getSpeech(r,e){return SpeechGeneratorUtil$2.connectAllMactions(e,this.getRebuilt().xml),this.generateSpeech(r,e)}}summary_speech_generator.SummarySpeechGenerator=SummarySpeechGenerator;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.generatorMapping_=t.generator=void 0;const r=adhoc_speech_generator,e=color_generator,n=direct_speech_generator,i=dummy_speech_generator,o=node_speech_generator,a=summary_speech_generator,s=tree_speech_generator;function l(c){return(t.generatorMapping_[c]||t.generatorMapping_.Direct)()}t.generator=l,t.generatorMapping_={Adhoc:()=>new r.AdhocSpeechGenerator,Color:()=>new e.ColorGenerator,Direct:()=>new n.DirectSpeechGenerator,Dummy:()=>new i.DummySpeechGenerator,Node:()=>new o.NodeSpeechGenerator,Summary:()=>new a.SummarySpeechGenerator,Tree:()=>new s.TreeSpeechGenerator}})(speech_generator_factory);var walker_factory={},dummy_walker={},abstract_walker={},clearspeak_preferences={};Object.defineProperty(clearspeak_preferences,"__esModule",{value:!0});clearspeak_preferences.Parser=clearspeak_preferences.Comparator=clearspeak_preferences.ClearspeakPreferences=void 0;const engine_1$1=engine,EngineConst$2=engine_const,dynamic_cstr_1=dynamic_cstr,dynamic_cstr_2=dynamic_cstr,MathCompoundStore=math_compound_store,speech_rule_engine_1=speech_rule_engine;class ClearspeakPreferences extends dynamic_cstr_1.DynamicCstr{constructor(r,e){super(r),this.preference=e}static comparator(){return new Comparator(engine_1$1.default.getInstance().dynamicCstr,dynamic_cstr_2.DynamicProperties.createProp([dynamic_cstr_1.DynamicCstr.DEFAULT_VALUES[dynamic_cstr_2.Axis.LOCALE]],[dynamic_cstr_1.DynamicCstr.DEFAULT_VALUES[dynamic_cstr_2.Axis.MODALITY]],[dynamic_cstr_1.DynamicCstr.DEFAULT_VALUES[dynamic_cstr_2.Axis.DOMAIN]],[dynamic_cstr_1.DynamicCstr.DEFAULT_VALUES[dynamic_cstr_2.Axis.STYLE]]))}static fromPreference(r){const e=r.split(":"),n={},i=PREFERENCES.getProperties(),o=Object.keys(i);for(let a=0,s;s=e[a];a++){const l=s.split("_");if(o.indexOf(l[0])===-1)continue;const c=l[1];c&&c!==ClearspeakPreferences.AUTO&&i[l[0]].indexOf(c)!==-1&&(n[l[0]]=l[1])}return n}static toPreference(r){const e=Object.keys(r),n=[];for(let i=0;i<e.length;i++)n.push(e[i]+"_"+r[e[i]]);return n.length?n.join(":"):dynamic_cstr_1.DynamicCstr.DEFAULT_VALUE}static getLocalePreferences(r){const e=r||MathCompoundStore.enumerate(speech_rule_engine_1.SpeechRuleEngine.getInstance().enumerate());return ClearspeakPreferences.getLocalePreferences_(e)}static smartPreferences(r,e){const i=ClearspeakPreferences.getLocalePreferences()[e];if(!i)return[];const o=r.explorers.speech,a=ClearspeakPreferences.relevantPreferences(o.walker.getFocus().getSemanticPrimary()),s=EngineConst$2.DOMAIN_TO_STYLES.clearspeak;return[{type:"radio",content:"No Preferences",id:"clearspeak-default",variable:"speechRules"},{type:"radio",content:"Current Preferences",id:"clearspeak-"+s,variable:"speechRules"},{type:"rule"},{type:"label",content:"Preferences for "+a},{type:"rule"}].concat(i[a].map(function(c){const f=c.split("_");return{type:"radio",content:f[1],id:"clearspeak-"+ClearspeakPreferences.addPreference(s,f[0],f[1]),variable:"speechRules"}}))}static relevantPreferences(r){const e=SEMANTIC_MAPPING_[r.type];return e&&(e[r.role]||e[""])||"ImpliedTimes"}static findPreference(r,e){return r==="default"?ClearspeakPreferences.AUTO:ClearspeakPreferences.fromPreference(r)[e]||ClearspeakPreferences.AUTO}static addPreference(r,e,n){if(r==="default")return e+"_"+n;const i=ClearspeakPreferences.fromPreference(r);return i[e]=n,ClearspeakPreferences.toPreference(i)}static getLocalePreferences_(r){const e={};for(const n in r){if(!r[n].speech||!r[n].speech.clearspeak)continue;const i=Object.keys(r[n].speech.clearspeak),o=e[n]={};for(const a in PREFERENCES.getProperties()){const s=PREFERENCES.getProperties()[a],l=[a+"_Auto"];if(s)for(const c of s)i.indexOf(a+"_"+c)!==-1&&l.push(a+"_"+c);o[a]=l}}return e}equal(r){if(!super.equal(r))return!1;const n=Object.keys(this.preference),i=r.preference;if(n.length!==Object.keys(i).length)return!1;for(let o=0,a;a=n[o];o++)if(this.preference[a]!==i[a])return!1;return!0}}clearspeak_preferences.ClearspeakPreferences=ClearspeakPreferences;ClearspeakPreferences.AUTO="Auto";const PREFERENCES=new dynamic_cstr_2.DynamicProperties({AbsoluteValue:["Auto","AbsEnd","Cardinality","Determinant"],Bar:["Auto","Conjugate"],Caps:["Auto","SayCaps"],CombinationPermutation:["Auto","ChoosePermute"],Currency:["Auto","Position","Prefix"],Ellipses:["Auto","AndSoOn"],Enclosed:["Auto","EndEnclose"],Exponent:["Auto","AfterPower","Ordinal","OrdinalPower","Exponent"],Fraction:["Auto","EndFrac","FracOver","General","GeneralEndFrac","Ordinal","Over","OverEndFrac","Per"],Functions:["Auto","None","Reciprocal"],ImpliedTimes:["Auto","MoreImpliedTimes","None"],Log:["Auto","LnAsNaturalLog"],Matrix:["Auto","Combinatoric","EndMatrix","EndVector","SilentColNum","SpeakColNum","Vector"],MultiLineLabel:["Auto","Case","Constraint","Equation","Line","None","Row","Step"],MultiLineOverview:["Auto","None"],MultiLinePausesBetweenColumns:["Auto","Long","Short"],MultsymbolDot:["Auto","Dot"],MultsymbolX:["Auto","By","Cross"],Paren:["Auto","CoordPoint","Interval","Silent","Speak","SpeakNestingLevel"],Prime:["Auto","Angle","Length"],Roots:["Auto","PosNegSqRoot","PosNegSqRootEnd","RootEnd"],SetMemberSymbol:["Auto","Belongs","Element","Member","In"],Sets:["Auto","SilentBracket","woAll"],TriangleSymbol:["Auto","Delta"],Trig:["Auto","ArcTrig","TrigInverse","Reciprocal"],VerticalLine:["Auto","Divides","Given","SuchThat"]});class Comparator extends dynamic_cstr_2.DefaultComparator{constructor(r,e){super(r,e),this.preference=r instanceof ClearspeakPreferences?r.preference:{}}match(r){if(!(r instanceof ClearspeakPreferences))return super.match(r);if(r.getComponents()[dynamic_cstr_2.Axis.STYLE]==="default")return!0;const e=Object.keys(r.preference);for(let n=0,i;i=e[n];n++)if(this.preference[i]!==r.preference[i])return!1;return!0}compare(r,e){const n=super.compare(r,e);if(n!==0)return n;const i=r instanceof ClearspeakPreferences,o=e instanceof ClearspeakPreferences;if(!i&&o)return 1;if(i&&!o)return-1;if(!i&&!o)return 0;const a=Object.keys(r.preference).length,s=Object.keys(e.preference).length;return a>s?-1:a<s?1:0}}clearspeak_preferences.Comparator=Comparator;let Parser$2=class extends dynamic_cstr_2.DynamicCstrParser{constructor(){super([dynamic_cstr_2.Axis.LOCALE,dynamic_cstr_2.Axis.MODALITY,dynamic_cstr_2.Axis.DOMAIN,dynamic_cstr_2.Axis.STYLE])}parse(r){const e=super.parse(r);let n=e.getValue(dynamic_cstr_2.Axis.STYLE);const i=e.getValue(dynamic_cstr_2.Axis.LOCALE),o=e.getValue(dynamic_cstr_2.Axis.MODALITY);let a={};return n!==dynamic_cstr_1.DynamicCstr.DEFAULT_VALUE&&(a=this.fromPreference(n),n=this.toPreference(a)),new ClearspeakPreferences({locale:i,modality:o,domain:"clearspeak",style:n},a)}fromPreference(r){return ClearspeakPreferences.fromPreference(r)}toPreference(r){return ClearspeakPreferences.toPreference(r)}};clearspeak_preferences.Parser=Parser$2;const REVERSE_MAPPING=[["AbsoluteValue","fenced","neutral","metric"],["Bar","overscore","overaccent"],["Caps","identifier","latinletter"],["CombinationPermutation","appl","unknown"],["Ellipses","punctuation","ellipsis"],["Exponent","superscript",""],["Fraction","fraction",""],["Functions","appl","simple function"],["ImpliedTimes","operator","implicit"],["Log","appl","prefix function"],["Matrix","matrix",""],["Matrix","vector",""],["MultiLineLabel","multiline","label"],["MultiLineOverview","multiline","table"],["MultiLinePausesBetweenColumns","multiline","table"],["MultiLineLabel","table","label"],["MultiLineOverview","table","table"],["MultiLinePausesBetweenColumns","table","table"],["MultiLineLabel","cases","label"],["MultiLineOverview","cases","table"],["MultiLinePausesBetweenColumns","cases","table"],["MultsymbolDot","operator","multiplication"],["MultsymbolX","operator","multiplication"],["Paren","fenced","leftright"],["Prime","superscript","prime"],["Roots","root",""],["Roots","sqrt",""],["SetMemberSymbol","relation","element"],["Sets","fenced","set extended"],["TriangleSymbol","identifier","greekletter"],["Trig","appl","prefix function"],["VerticalLine","punctuated","vbar"]],SEMANTIC_MAPPING_=function(){const t={};for(let r=0,e;e=REVERSE_MAPPING[r];r++){const n=e[0];let i=t[e[1]];i||(i={},t[e[1]]=i),i[e[2]]=n}return t}();engine_1$1.default.getInstance().comparators.clearspeak=ClearspeakPreferences.comparator;engine_1$1.default.getInstance().parsers.clearspeak=new Parser$2;var focus={};Object.defineProperty(focus,"__esModule",{value:!0});focus.Focus=void 0;const WalkerUtil$2=walker_util;class Focus{constructor(r,e){this.nodes=r,this.primary=e,this.domNodes=[],this.domPrimary_=null,this.allNodes=[]}static factory(r,e,n,i){const o=d=>WalkerUtil$2.getBySemanticId(i,d),a=n.nodeDict,s=o(r),l=e.map(o),c=e.map(function(d){return a[d]}),f=new Focus(c,a[r]);return f.domNodes=l,f.domPrimary_=s,f.allNodes=Focus.generateAllVisibleNodes_(e,l,a,i),f}static generateAllVisibleNodes_(r,e,n,i){const o=s=>WalkerUtil$2.getBySemanticId(i,s);let a=[];for(let s=0,l=r.length;s<l;s++){if(e[s]){a.push(e[s]);continue}const c=n[r[s]];if(!c)continue;const f=c.childNodes.map(function(u){return u.id.toString()}),d=f.map(o);a=a.concat(Focus.generateAllVisibleNodes_(f,d,n,i))}return a}getSemanticPrimary(){return this.primary}getSemanticNodes(){return this.nodes}getNodes(){return this.allNodes}getDomNodes(){return this.domNodes}getDomPrimary(){return this.domPrimary_}toString(){return"Primary:"+this.domPrimary_+" Nodes:"+this.domNodes}clone(){const r=new Focus(this.nodes,this.primary);return r.domNodes=this.domNodes,r.domPrimary_=this.domPrimary_,r.allNodes=this.allNodes,r}}focus.Focus=Focus;var walker={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WalkerState=t.WalkerMoves=void 0,function(e){e.UP="up",e.DOWN="down",e.LEFT="left",e.RIGHT="right",e.REPEAT="repeat",e.DEPTH="depth",e.ENTER="enter",e.EXPAND="expand",e.HOME="home",e.SUMMARY="summary",e.DETAIL="detail",e.ROW="row",e.CELL="cell"}(t.WalkerMoves||(t.WalkerMoves={}));class r{static resetState(n){delete r.STATE[n]}static setState(n,i){r.STATE[n]=i}static getState(n){return r.STATE[n]}}t.WalkerState=r,r.STATE={}})(walker);Object.defineProperty(abstract_walker,"__esModule",{value:!0});abstract_walker.AbstractWalker=void 0;const auditory_description_1=auditory_description,AuralRendering$1=aural_rendering,DomUtil$2=dom_util,EngineConst$1=engine_const,engine_setup_1=engine_setup,event_util_1$2=event_util,enrich_attr_1=enrich_attr,locale_1$1=locale$d,grammar_1=grammar,semantic_skeleton_1=semantic_skeleton,SpeechGeneratorFactory$1=speech_generator_factory,SpeechGeneratorUtil$1=speech_generator_util,clearspeak_preferences_1=clearspeak_preferences,focus_1=focus,rebuild_stree_1=rebuild_stree,walker_1$1=walker,WalkerUtil$1=walker_util,XpathUtil$1=xpath_util;class AbstractWalker{constructor(r,e,n,i){this.node=r,this.generator=e,this.highlighter=n,this.modifier=!1,this.keyMapping=new Map([[event_util_1$2.KeyCode.UP,this.up.bind(this)],[event_util_1$2.KeyCode.DOWN,this.down.bind(this)],[event_util_1$2.KeyCode.RIGHT,this.right.bind(this)],[event_util_1$2.KeyCode.LEFT,this.left.bind(this)],[event_util_1$2.KeyCode.TAB,this.repeat.bind(this)],[event_util_1$2.KeyCode.DASH,this.expand.bind(this)],[event_util_1$2.KeyCode.SPACE,this.depth.bind(this)],[event_util_1$2.KeyCode.HOME,this.home.bind(this)],[event_util_1$2.KeyCode.X,this.summary.bind(this)],[event_util_1$2.KeyCode.Z,this.detail.bind(this)],[event_util_1$2.KeyCode.V,this.virtualize.bind(this)],[event_util_1$2.KeyCode.P,this.previous.bind(this)],[event_util_1$2.KeyCode.U,this.undo.bind(this)],[event_util_1$2.KeyCode.LESS,this.previousRules.bind(this)],[event_util_1$2.KeyCode.GREATER,this.nextRules.bind(this)]]),this.cursors=[],this.xml_=null,this.rebuilt_=null,this.focus_=null,this.active_=!1,this.node.id?this.id=this.node.id:this.node.hasAttribute(AbstractWalker.SRE_ID_ATTR)?this.id=this.node.getAttribute(AbstractWalker.SRE_ID_ATTR):(this.node.setAttribute(AbstractWalker.SRE_ID_ATTR,AbstractWalker.ID_COUNTER.toString()),this.id=AbstractWalker.ID_COUNTER++),this.rootNode=WalkerUtil$1.getSemanticRoot(r),this.rootId=this.rootNode.getAttribute(enrich_attr_1.Attribute.ID),this.xmlString_=i,this.moved=walker_1$1.WalkerMoves.ENTER}getXml(){return this.xml_||(this.xml_=DomUtil$2.parseInput(this.xmlString_)),this.xml_}getRebuilt(){return this.rebuilt_||this.rebuildStree(),this.rebuilt_}isActive(){return this.active_}activate(){this.isActive()||(this.generator.start(),this.toggleActive_())}deactivate(){this.isActive()&&(walker_1$1.WalkerState.setState(this.id,this.primaryId()),this.generator.end(),this.toggleActive_())}getFocus(r=!1){return this.focus_||(this.focus_=this.singletonFocus(this.rootId)),r&&this.updateFocus(),this.focus_}setFocus(r){this.focus_=r}getDepth(){return this.levels.depth()-1}isSpeech(){return this.generator.modality===enrich_attr_1.Attribute.SPEECH}focusDomNodes(){return this.getFocus().getDomNodes()}focusSemanticNodes(){return this.getFocus().getSemanticNodes()}speech(){const r=this.focusDomNodes();if(!r.length)return"";const e=this.specialMove();if(e!==null)return e;switch(this.moved){case walker_1$1.WalkerMoves.DEPTH:return this.depth_();case walker_1$1.WalkerMoves.SUMMARY:return this.summary_();case walker_1$1.WalkerMoves.DETAIL:return this.detail_();default:{const n=[],i=this.focusSemanticNodes();for(let o=0,a=r.length;o<a;o++){const s=r[o],l=i[o];n.push(s?this.generator.getSpeech(s,this.getXml()):SpeechGeneratorUtil$1.recomputeMarkup(l))}return this.mergePrefix_(n)}}}move(r){const e=this.keyMapping.get(r);if(!e)return null;const n=e();return!n||n===this.getFocus()?!1:(this.setFocus(n),this.moved===walker_1$1.WalkerMoves.HOME&&(this.levels=this.initLevels()),!0)}up(){return this.moved=walker_1$1.WalkerMoves.UP,this.getFocus()}down(){return this.moved=walker_1$1.WalkerMoves.DOWN,this.getFocus()}left(){return this.moved=walker_1$1.WalkerMoves.LEFT,this.getFocus()}right(){return this.moved=walker_1$1.WalkerMoves.RIGHT,this.getFocus()}repeat(){return this.moved=walker_1$1.WalkerMoves.REPEAT,this.getFocus().clone()}depth(){return this.moved=this.isSpeech()?walker_1$1.WalkerMoves.DEPTH:walker_1$1.WalkerMoves.REPEAT,this.getFocus().clone()}home(){return this.moved=walker_1$1.WalkerMoves.HOME,this.singletonFocus(this.rootId)}getBySemanticId(r){return WalkerUtil$1.getBySemanticId(this.node,r)}primaryId(){return this.getFocus().getSemanticPrimary().id.toString()}expand(){const r=this.getFocus().getDomPrimary(),e=this.actionable_(r);return e?(this.moved=walker_1$1.WalkerMoves.EXPAND,e.dispatchEvent(new Event("click")),this.getFocus().clone()):this.getFocus()}expandable(r){return!!this.actionable_(r)&&r.childNodes.length===0}collapsible(r){return!!this.actionable_(r)&&r.childNodes.length>0}restoreState(){if(!this.highlighter)return;const r=walker_1$1.WalkerState.getState(this.id);if(!r)return;let e=this.getRebuilt().nodeDict[r];const n=[];for(;e;)n.push(e.id),e=e.parent;for(n.pop();n.length>0;){this.down();const i=n.pop(),o=this.findFocusOnLevel(i);if(!o)break;this.setFocus(o)}this.moved=walker_1$1.WalkerMoves.ENTER}updateFocus(){this.setFocus(focus_1.Focus.factory(this.getFocus().getSemanticPrimary().id.toString(),this.getFocus().getSemanticNodes().map(r=>r.id.toString()),this.getRebuilt(),this.node))}rebuildStree(){this.rebuilt_=new rebuild_stree_1.RebuildStree(this.getXml()),this.rootId=this.rebuilt_.stree.root.id.toString(),this.generator.setRebuilt(this.rebuilt_),this.skeleton=semantic_skeleton_1.SemanticSkeleton.fromTree(this.rebuilt_.stree),this.skeleton.populate(),this.focus_=this.singletonFocus(this.rootId),this.levels=this.initLevels(),SpeechGeneratorUtil$1.connectMactions(this.node,this.getXml(),this.rebuilt_.xml)}previousLevel(){const r=this.getFocus().getDomPrimary();return r?WalkerUtil$1.getAttribute(r,enrich_attr_1.Attribute.PARENT):this.getFocus().getSemanticPrimary().parent.id.toString()}nextLevel(){const r=this.getFocus().getDomPrimary();let e,n;if(r){e=WalkerUtil$1.splitAttribute(WalkerUtil$1.getAttribute(r,enrich_attr_1.Attribute.CHILDREN)),n=WalkerUtil$1.splitAttribute(WalkerUtil$1.getAttribute(r,enrich_attr_1.Attribute.CONTENT));const a=WalkerUtil$1.getAttribute(r,enrich_attr_1.Attribute.TYPE),s=WalkerUtil$1.getAttribute(r,enrich_attr_1.Attribute.ROLE);return this.combineContentChildren(a,s,n,e)}const i=a=>a.id.toString(),o=this.getRebuilt().nodeDict[this.primaryId()];return e=o.childNodes.map(i),n=o.contentNodes.map(i),e.length===0?[]:this.combineContentChildren(o.type,o.role,n,e)}singletonFocus(r){this.getRebuilt();const e=this.retrieveVisuals(r);return this.focusFromId(r,e)}retrieveVisuals(r){if(!this.skeleton)return[r];const e=parseInt(r,10),n=this.skeleton.subtreeNodes(e);if(!n.length)return[r];n.unshift(e);const i={},o=[];XpathUtil$1.updateEvaluator(this.getXml());for(const a of n)i[a]||(o.push(a.toString()),i[a]=!0,this.subtreeIds(a,i));return o}subtreeIds(r,e){const n=XpathUtil$1.evalXPath(`//*[@data-semantic-id="${r}"]`,this.getXml());XpathUtil$1.evalXPath("*//@data-semantic-id",n[0]).forEach(o=>e[parseInt(o.textContent,10)]=!0)}focusFromId(r,e){return focus_1.Focus.factory(r,e,this.getRebuilt(),this.node)}summary(){return this.moved=this.isSpeech()?walker_1$1.WalkerMoves.SUMMARY:walker_1$1.WalkerMoves.REPEAT,this.getFocus().clone()}detail(){return this.moved=this.isSpeech()?walker_1$1.WalkerMoves.DETAIL:walker_1$1.WalkerMoves.REPEAT,this.getFocus().clone()}specialMove(){return null}virtualize(r){return this.cursors.push({focus:this.getFocus(),levels:this.levels,undo:r||!this.cursors.length}),this.levels=this.levels.clone(),this.getFocus().clone()}previous(){const r=this.cursors.pop();return r?(this.levels=r.levels,r.focus):this.getFocus()}undo(){let r;do r=this.cursors.pop();while(r&&!r.undo);return r?(this.levels=r.levels,r.focus):this.getFocus()}update(r){this.generator.setOptions(r),(0,engine_setup_1.setup)(r).then(()=>SpeechGeneratorFactory$1.generator("Tree").getSpeech(this.node,this.getXml()))}nextRules(){const r=this.generator.getOptions();return r.modality!=="speech"?this.getFocus():(EngineConst$1.DOMAIN_TO_STYLES[r.domain]=r.style,r.domain=r.domain==="mathspeak"?"clearspeak":"mathspeak",r.style=EngineConst$1.DOMAIN_TO_STYLES[r.domain],this.update(r),this.moved=walker_1$1.WalkerMoves.REPEAT,this.getFocus().clone())}nextStyle(r,e){if(r==="mathspeak"){const n=["default","brief","sbrief"],i=n.indexOf(e);return i===-1?e:i>=n.length-1?n[0]:n[i+1]}if(r==="clearspeak"){const i=clearspeak_preferences_1.ClearspeakPreferences.getLocalePreferences().en;if(!i)return"default";const o=clearspeak_preferences_1.ClearspeakPreferences.relevantPreferences(this.getFocus().getSemanticPrimary()),a=clearspeak_preferences_1.ClearspeakPreferences.findPreference(e,o),s=i[o].map(function(d){return d.split("_")[1]}),l=s.indexOf(a);if(l===-1)return e;const c=l>=s.length-1?s[0]:s[l+1];return clearspeak_preferences_1.ClearspeakPreferences.addPreference(e,o,c)}return e}previousRules(){const r=this.generator.getOptions();return r.modality!=="speech"?this.getFocus():(r.style=this.nextStyle(r.domain,r.style),this.update(r),this.moved=walker_1$1.WalkerMoves.REPEAT,this.getFocus().clone())}refocus(){let r=this.getFocus(),e;for(;!r.getNodes().length;){e=this.levels.peek();const n=this.up();if(!n)break;this.setFocus(n),r=this.getFocus(!0)}this.levels.push(e),this.setFocus(r)}toggleActive_(){this.active_=!this.active_}mergePrefix_(r,e=[]){const n=this.isSpeech()?this.prefix_():"";n&&r.unshift(n);const i=this.isSpeech()?this.postfix_():"";return i&&r.push(i),AuralRendering$1.finalize(AuralRendering$1.merge(e.concat(r)))}prefix_(){const r=this.getFocus().getDomNodes(),e=this.getFocus().getSemanticNodes();return r[0]?WalkerUtil$1.getAttribute(r[0],enrich_attr_1.Attribute.PREFIX):SpeechGeneratorUtil$1.retrievePrefix(e[0])}postfix_(){const r=this.getFocus().getDomNodes();return r[0]?WalkerUtil$1.getAttribute(r[0],enrich_attr_1.Attribute.POSTFIX):""}depth_(){const r=grammar_1.Grammar.getInstance().getParameter("depth");grammar_1.Grammar.getInstance().setParameter("depth",!0);const e=this.getFocus().getDomPrimary(),n=this.expandable(e)?locale_1$1.LOCALE.MESSAGES.navigate.EXPANDABLE:this.collapsible(e)?locale_1$1.LOCALE.MESSAGES.navigate.COLLAPSIBLE:"",i=locale_1$1.LOCALE.MESSAGES.navigate.LEVEL+" "+this.getDepth(),o=this.getFocus().getSemanticNodes(),a=SpeechGeneratorUtil$1.retrievePrefix(o[0]),s=[new auditory_description_1.AuditoryDescription({text:i,personality:{}}),new auditory_description_1.AuditoryDescription({text:a,personality:{}}),new auditory_description_1.AuditoryDescription({text:n,personality:{}})];return grammar_1.Grammar.getInstance().setParameter("depth",r),AuralRendering$1.finalize(AuralRendering$1.markup(s))}actionable_(r){const e=r==null?void 0:r.parentNode;return e&&this.highlighter.isMactionNode(e)?e:null}summary_(){const e=this.getFocus().getSemanticPrimary().id.toString(),n=this.getRebuilt().xml.getAttribute("id")===e?this.getRebuilt().xml:DomUtil$2.querySelectorAllByAttrValue(this.getRebuilt().xml,"id",e)[0],i=SpeechGeneratorUtil$1.retrieveSummary(n);return this.mergePrefix_([i])}detail_(){const e=this.getFocus().getSemanticPrimary().id.toString(),n=this.getRebuilt().xml.getAttribute("id")===e?this.getRebuilt().xml:DomUtil$2.querySelectorAllByAttrValue(this.getRebuilt().xml,"id",e)[0],i=n.getAttribute("alternative");n.removeAttribute("alternative");const o=SpeechGeneratorUtil$1.computeMarkup(n),a=this.mergePrefix_([o]);return n.setAttribute("alternative",i),a}}abstract_walker.AbstractWalker=AbstractWalker;AbstractWalker.ID_COUNTER=0;AbstractWalker.SRE_ID_ATTR="sre-explorer-id";Object.defineProperty(dummy_walker,"__esModule",{value:!0});dummy_walker.DummyWalker=void 0;const abstract_walker_1$2=abstract_walker;class DummyWalker extends abstract_walker_1$2.AbstractWalker{up(){return null}down(){return null}left(){return null}right(){return null}repeat(){return null}depth(){return null}home(){return null}getDepth(){return 0}initLevels(){return null}combineContentChildren(r,e,n,i){return[]}findFocusOnLevel(r){return null}}dummy_walker.DummyWalker=DummyWalker;var semantic_walker={},levels={};Object.defineProperty(levels,"__esModule",{value:!0});levels.Levels=void 0;class Levels{constructor(){this.level_=[]}push(r){this.level_.push(r)}pop(){return this.level_.pop()}peek(){return this.level_[this.level_.length-1]||null}indexOf(r){const e=this.peek();return e?e.indexOf(r):null}find(r){const e=this.peek();if(!e)return null;for(let n=0,i=e.length;n<i;n++)if(r(e[n]))return e[n];return null}get(r){const e=this.peek();return!e||r<0||r>=e.length?null:e[r]}depth(){return this.level_.length}clone(){const r=new Levels;return r.level_=this.level_.slice(0),r}toString(){let r="";for(let e=0,n;n=this.level_[e];e++)r+=`
`+n.map(function(i){return i.toString()});return r}}levels.Levels=Levels;Object.defineProperty(semantic_walker,"__esModule",{value:!0});semantic_walker.SemanticWalker=void 0;const abstract_walker_1$1=abstract_walker,levels_1$1=levels;class SemanticWalker extends abstract_walker_1$1.AbstractWalker{constructor(r,e,n,i){super(r,e,n,i),this.node=r,this.generator=e,this.highlighter=n,this.levels=null,this.restoreState()}initLevels(){const r=new levels_1$1.Levels;return r.push([this.getFocus()]),r}up(){super.up();const r=this.previousLevel();return r?(this.levels.pop(),this.levels.find(function(n){return n.getSemanticNodes().some(function(i){return i.id.toString()===r})})):null}down(){super.down();const r=this.nextLevel();return r.length===0?null:(this.levels.push(r),r[0])}combineContentChildren(r,e,n,i){switch(r){case"relseq":case"infixop":case"multirel":return this.makePairList(i,n);case"prefixop":return[this.focusFromId(i[0],n.concat(i))];case"postfixop":return[this.focusFromId(i[0],i.concat(n))];case"matrix":case"vector":case"fenced":return[this.focusFromId(i[0],[n[0],i[0],n[1]])];case"cases":return[this.focusFromId(i[0],[n[0],i[0]])];case"punctuated":return e==="text"?i.map(this.singletonFocus.bind(this)):i.length===n.length?n.map(this.singletonFocus.bind(this)):this.combinePunctuations(i,n,[],[]);case"appl":return[this.focusFromId(i[0],[i[0],n[0]]),this.singletonFocus(i[1])];case"root":return[this.singletonFocus(i[1]),this.singletonFocus(i[0])];default:return i.map(this.singletonFocus.bind(this))}}combinePunctuations(r,e,n,i){if(r.length===0)return i;const o=r.shift(),a=e.shift();return o===a?(n.push(a),this.combinePunctuations(r,e,n,i)):(e.unshift(a),n.push(o),r.length===e.length?(i.push(this.focusFromId(o,n.concat(e))),i):(i.push(this.focusFromId(o,n)),this.combinePunctuations(r,e,[],i)))}makePairList(r,e){if(r.length===0)return[];if(r.length===1)return[this.singletonFocus(r[0])];const n=[this.singletonFocus(r.shift())];for(let i=0,o=r.length;i<o;i++)n.push(this.focusFromId(r[i],[e[i],r[i]]));return n}left(){super.left();const r=this.levels.indexOf(this.getFocus());if(r===null)return null;const e=this.levels.get(r-1);return e||null}right(){super.right();const r=this.levels.indexOf(this.getFocus());if(r===null)return null;const e=this.levels.get(r+1);return e||null}findFocusOnLevel(r){return this.levels.find(n=>n.getSemanticPrimary().id===r)}}semantic_walker.SemanticWalker=SemanticWalker;var syntax_walker={};Object.defineProperty(syntax_walker,"__esModule",{value:!0});syntax_walker.SyntaxWalker=void 0;const base_util_1=base_util,abstract_walker_1=abstract_walker,levels_1=levels;class SyntaxWalker extends abstract_walker_1.AbstractWalker{constructor(r,e,n,i){super(r,e,n,i),this.node=r,this.generator=e,this.highlighter=n,this.levels=null,this.restoreState()}initLevels(){const r=new levels_1.Levels;return r.push([this.primaryId()]),r}up(){super.up();const r=this.previousLevel();return r?(this.levels.pop(),this.singletonFocus(r)):null}down(){super.down();const r=this.nextLevel();if(r.length===0)return null;const e=this.singletonFocus(r[0]);return e&&this.levels.push(r),e}combineContentChildren(r,e,n,i){switch(r){case"relseq":case"infixop":case"multirel":return(0,base_util_1.interleaveLists)(i,n);case"prefixop":return n.concat(i);case"postfixop":return i.concat(n);case"matrix":case"vector":case"fenced":return i.unshift(n[0]),i.push(n[1]),i;case"cases":return i.unshift(n[0]),i;case"punctuated":return e==="text"?(0,base_util_1.interleaveLists)(i,n):i;case"appl":return[i[0],n[0],i[1]];case"root":return[i[1],i[0]];default:return i}}left(){super.left();const r=this.levels.indexOf(this.primaryId());if(r===null)return null;const e=this.levels.get(r-1);return e?this.singletonFocus(e):null}right(){super.right();const r=this.levels.indexOf(this.primaryId());if(r===null)return null;const e=this.levels.get(r+1);return e?this.singletonFocus(e):null}findFocusOnLevel(r){return this.singletonFocus(r.toString())}focusDomNodes(){return[this.getFocus().getDomPrimary()]}focusSemanticNodes(){return[this.getFocus().getSemanticPrimary()]}}syntax_walker.SyntaxWalker=SyntaxWalker;var table_walker={};Object.defineProperty(table_walker,"__esModule",{value:!0});table_walker.TableWalker=void 0;const DomUtil$1=dom_util,event_util_1$1=event_util,syntax_walker_1=syntax_walker,walker_1=walker;class TableWalker extends syntax_walker_1.SyntaxWalker{constructor(r,e,n,i){super(r,e,n,i),this.node=r,this.generator=e,this.highlighter=n,this.firstJump=null,this.key_=null,this.row_=0,this.currentTable_=null,this.keyMapping.set(event_util_1$1.KeyCode.ZERO,this.jumpCell.bind(this)),this.keyMapping.set(event_util_1$1.KeyCode.ONE,this.jumpCell.bind(this)),this.keyMapping.set(event_util_1$1.KeyCode.TWO,this.jumpCell.bind(this)),this.keyMapping.set(event_util_1$1.KeyCode.THREE,this.jumpCell.bind(this)),this.keyMapping.set(event_util_1$1.KeyCode.FOUR,this.jumpCell.bind(this)),this.keyMapping.set(event_util_1$1.KeyCode.FIVE,this.jumpCell.bind(this)),this.keyMapping.set(event_util_1$1.KeyCode.SIX,this.jumpCell.bind(this)),this.keyMapping.set(event_util_1$1.KeyCode.SEVEN,this.jumpCell.bind(this)),this.keyMapping.set(event_util_1$1.KeyCode.EIGHT,this.jumpCell.bind(this)),this.keyMapping.set(event_util_1$1.KeyCode.NINE,this.jumpCell.bind(this))}move(r){this.key_=r;const e=super.move(r);return this.modifier=!1,e}up(){return this.moved=walker_1.WalkerMoves.UP,this.eligibleCell_()?this.verticalMove_(!1):super.up()}down(){return this.moved=walker_1.WalkerMoves.DOWN,this.eligibleCell_()?this.verticalMove_(!0):super.down()}jumpCell(){if(!this.isInTable_()||this.key_===null)return this.getFocus();if(this.moved===walker_1.WalkerMoves.ROW){this.moved=walker_1.WalkerMoves.CELL;const e=this.key_-event_util_1$1.KeyCode.ZERO;return this.isLegalJump_(this.row_,e)?this.jumpCell_(this.row_,e):this.getFocus()}const r=this.key_-event_util_1$1.KeyCode.ZERO;return r>this.currentTable_.childNodes.length?this.getFocus():(this.row_=r,this.moved=walker_1.WalkerMoves.ROW,this.getFocus().clone())}undo(){const r=super.undo();return r===this.firstJump&&(this.firstJump=null),r}eligibleCell_(){const r=this.getFocus().getSemanticPrimary();return this.modifier&&r.type==="cell"&&TableWalker.ELIGIBLE_CELL_ROLES.indexOf(r.role)!==-1}verticalMove_(r){const e=this.previousLevel();if(!e)return null;const n=this.getFocus(),i=this.levels.indexOf(this.primaryId()),o=this.levels.pop(),a=this.levels.indexOf(e),s=this.levels.get(r?a+1:a-1);if(!s)return this.levels.push(o),null;this.setFocus(this.singletonFocus(s));const l=this.nextLevel();return l[i]?(this.levels.push(l),this.singletonFocus(l[i])):(this.setFocus(n),this.levels.push(o),null)}jumpCell_(r,e){this.firstJump?this.virtualize(!1):(this.firstJump=this.getFocus(),this.virtualize(!0));const n=this.currentTable_.id.toString();let i;do i=this.levels.pop();while(i.indexOf(n)===-1);this.levels.push(i),this.setFocus(this.singletonFocus(n)),this.levels.push(this.nextLevel());const o=this.currentTable_.childNodes[r-1];return this.setFocus(this.singletonFocus(o.id.toString())),this.levels.push(this.nextLevel()),this.singletonFocus(o.childNodes[e-1].id.toString())}isLegalJump_(r,e){const n=DomUtil$1.querySelectorAllByAttrValue(this.getRebuilt().xml,"id",this.currentTable_.id.toString())[0];if(!n||n.hasAttribute("alternative"))return!1;const i=this.currentTable_.childNodes[r-1];if(!i)return!1;const o=DomUtil$1.querySelectorAllByAttrValue(n,"id",i.id.toString())[0];return!o||o.hasAttribute("alternative")?!1:!!(i&&i.childNodes[e-1])}isInTable_(){let r=this.getFocus().getSemanticPrimary();for(;r;){if(TableWalker.ELIGIBLE_TABLE_TYPES.indexOf(r.type)!==-1)return this.currentTable_=r,!0;r=r.parent}return!1}}table_walker.TableWalker=TableWalker;TableWalker.ELIGIBLE_CELL_ROLES=["determinant","rowvector","binomial","squarematrix","multiline","matrix","vector","cases","table"];TableWalker.ELIGIBLE_TABLE_TYPES=["multiline","matrix","vector","cases","table"];(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.walkerMapping_=t.walker=void 0;const r=dummy_walker,e=semantic_walker,n=syntax_walker,i=table_walker;function o(a,s,l,c,f){return(t.walkerMapping_[a.toLowerCase()]||t.walkerMapping_.dummy)(s,l,c,f)}t.walker=o,t.walkerMapping_={dummy:(a,s,l,c)=>new r.DummyWalker(a,s,l,c),semantic:(a,s,l,c)=>new e.SemanticWalker(a,s,l,c),syntax:(a,s,l,c)=>new n.SyntaxWalker(a,s,l,c),table:(a,s,l,c)=>new i.TableWalker(a,s,l,c)}})(walker_factory);var processor={};Object.defineProperty(processor,"__esModule",{value:!0});processor.KeyProcessor=processor.Processor=void 0;const event_util_1=event_util;class Processor{constructor(r,e){this.name=r,this.process=e.processor,this.postprocess=e.postprocessor||((n,i)=>n),this.processor=this.postprocess?function(n){return this.postprocess(this.process(n),n)}:this.process,this.print=e.print||Processor.stringify_,this.pprint=e.pprint||this.print}static stringify_(r){return r&&r.toString()}}processor.Processor=Processor;Processor.LocalState={walker:null,speechGenerator:null,highlighter:null};class KeyProcessor extends Processor{constructor(r,e){super(r,e),this.key=e.key||KeyProcessor.getKey_}static getKey_(r){return typeof r=="string"?event_util_1.KeyCode[r.toUpperCase()]:r}}processor.KeyProcessor=KeyProcessor;Object.defineProperty(processor_factory,"__esModule",{value:!0});processor_factory.keypress=processor_factory.output=processor_factory.print=processor_factory.process=processor_factory.set=void 0;const AuralRendering=aural_rendering,Enrich=enrich,HighlighterFactory=highlighter_factory,locale_1=locale$d,Semantic=semantic,SpeechGeneratorFactory=speech_generator_factory,SpeechGeneratorUtil=speech_generator_util,WalkerFactory=walker_factory,WalkerUtil=walker_util,DomUtil=dom_util,engine_1=engine,EngineConst=engine_const,processor_1=processor,XpathUtil=xpath_util,PROCESSORS=new Map;function set(t){PROCESSORS.set(t.name,t)}processor_factory.set=set;function get_(t){const r=PROCESSORS.get(t);if(!r)throw new engine_1.SREError("Unknown processor "+t);return r}function process$1(t,r){const e=get_(t);try{return e.processor(r)}catch{throw new engine_1.SREError("Processing error for expression "+r)}}processor_factory.process=process$1;function print(t,r){const e=get_(t);return engine_1.default.getInstance().pprint?e.pprint(r):e.print(r)}processor_factory.print=print;function output(t,r){const e=get_(t);try{const n=e.processor(r);return engine_1.default.getInstance().pprint?e.pprint(n):e.print(n)}catch{throw new engine_1.SREError("Processing error for expression "+r)}}processor_factory.output=output;function keypress(t,r){const e=get_(t),n=e instanceof processor_1.KeyProcessor?e.key(r):r,i=e.processor(n);return engine_1.default.getInstance().pprint?e.pprint(i):e.print(i)}processor_factory.keypress=keypress;set(new processor_1.Processor("semantic",{processor:function(t){const r=DomUtil.parseInput(t);return Semantic.xmlTree(r)},postprocessor:function(t,r){const e=engine_1.default.getInstance().speech;if(e===EngineConst.Speech.NONE)return t;const n=DomUtil.cloneNode(t);let i=SpeechGeneratorUtil.computeMarkup(n);if(e===EngineConst.Speech.SHALLOW)return t.setAttribute("speech",AuralRendering.finalize(i)),t;const o=XpathUtil.evalXPath(".//*[@id]",t),a=XpathUtil.evalXPath(".//*[@id]",n);for(let s=0,l,c;l=o[s],c=a[s];s++)i=SpeechGeneratorUtil.computeMarkup(c),l.setAttribute("speech",AuralRendering.finalize(i));return t},pprint:function(t){return DomUtil.formatXml(t.toString())}}));set(new processor_1.Processor("speech",{processor:function(t){const r=DomUtil.parseInput(t),e=Semantic.xmlTree(r),n=SpeechGeneratorUtil.computeSpeech(e);return AuralRendering.finalize(AuralRendering.markup(n))},pprint:function(t){const r=t.toString();return AuralRendering.isXml()?DomUtil.formatXml(r):r}}));set(new processor_1.Processor("json",{processor:function(t){const r=DomUtil.parseInput(t);return Semantic.getTree(r).toJson()},postprocessor:function(t,r){const e=engine_1.default.getInstance().speech;if(e===EngineConst.Speech.NONE)return t;const n=DomUtil.parseInput(r),i=Semantic.xmlTree(n),o=SpeechGeneratorUtil.computeMarkup(i);if(e===EngineConst.Speech.SHALLOW)return t.stree.speech=AuralRendering.finalize(o),t;const a=s=>{const l=XpathUtil.evalXPath(`.//*[@id=${s.id}]`,i)[0],c=SpeechGeneratorUtil.computeMarkup(l);s.speech=AuralRendering.finalize(c),s.children&&s.children.forEach(a)};return a(t.stree),t},print:function(t){return JSON.stringify(t)},pprint:function(t){return JSON.stringify(t,null,2)}}));set(new processor_1.Processor("description",{processor:function(t){const r=DomUtil.parseInput(t),e=Semantic.xmlTree(r);return SpeechGeneratorUtil.computeSpeech(e)},print:function(t){return JSON.stringify(t)},pprint:function(t){return JSON.stringify(t,null,2)}}));set(new processor_1.Processor("enriched",{processor:function(t){return Enrich.semanticMathmlSync(t)},postprocessor:function(t,r){const e=WalkerUtil.getSemanticRoot(t);let n;switch(engine_1.default.getInstance().speech){case EngineConst.Speech.NONE:break;case EngineConst.Speech.SHALLOW:n=SpeechGeneratorFactory.generator("Adhoc"),n.getSpeech(e,t);break;case EngineConst.Speech.DEEP:n=SpeechGeneratorFactory.generator("Tree"),n.getSpeech(t,t);break}return t},pprint:function(t){return DomUtil.formatXml(t.toString())}}));set(new processor_1.Processor("walker",{processor:function(t){const r=SpeechGeneratorFactory.generator("Node");processor_1.Processor.LocalState.speechGenerator=r,r.setOptions({modality:engine_1.default.getInstance().modality,locale:engine_1.default.getInstance().locale,domain:engine_1.default.getInstance().domain,style:engine_1.default.getInstance().style}),processor_1.Processor.LocalState.highlighter=HighlighterFactory.highlighter({color:"black"},{color:"white"},{renderer:"NativeMML"});const e=process$1("enriched",t),n=print("enriched",e);return processor_1.Processor.LocalState.walker=WalkerFactory.walker(engine_1.default.getInstance().walker,e,r,processor_1.Processor.LocalState.highlighter,n),processor_1.Processor.LocalState.walker},print:function(t){return processor_1.Processor.LocalState.walker.speech()}}));set(new processor_1.KeyProcessor("move",{processor:function(t){return processor_1.Processor.LocalState.walker?processor_1.Processor.LocalState.walker.move(t)===!1?AuralRendering.error(t):processor_1.Processor.LocalState.walker.speech():null}}));set(new processor_1.Processor("number",{processor:function(t){const r=parseInt(t,10);return isNaN(r)?"":locale_1.LOCALE.NUMBERS.numberToWords(r)}}));set(new processor_1.Processor("ordinal",{processor:function(t){const r=parseInt(t,10);return isNaN(r)?"":locale_1.LOCALE.NUMBERS.wordOrdinal(r)}}));set(new processor_1.Processor("numericOrdinal",{processor:function(t){const r=parseInt(t,10);return isNaN(r)?"":locale_1.LOCALE.NUMBERS.numericOrdinal(r)}}));set(new processor_1.Processor("vulgar",{processor:function(t){const[r,e]=t.split("/").map(n=>parseInt(n,10));return isNaN(r)||isNaN(e)?"":process$1("speech",`<mfrac><mn>${r}</mn><mn>${e}</mn></mfrac>`)}}));(function(t){var r=commonjsGlobal&&commonjsGlobal.__awaiter||function(I,H,W,Z){function et(lt){return lt instanceof W?lt:new W(function(G){G(lt)})}return new(W||(W=Promise))(function(lt,G){function q(tt){try{K(Z.next(tt))}catch(w){G(w)}}function Q(tt){try{K(Z.throw(tt))}catch(w){G(w)}}function K(tt){tt.done?lt(tt.value):et(tt.value).then(q,Q)}K((Z=Z.apply(I,H||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.localePath=t.exit=t.move=t.walk=t.processFile=t.file=t.vulgar=t.numericOrdinal=t.ordinal=t.number=t.toEnriched=t.toDescription=t.toJson=t.toSemantic=t.toSpeech=t.localeLoader=t.engineReady=t.engineSetup=t.setupEngine=t.version=void 0;const e=engine,n=engine_setup,i=engine_const,o=file_util,a=processor_factory,s=system_external,l=variables,c=math_map;t.version=l.Variables.VERSION;function f(I){return r(this,void 0,void 0,function*(){return(0,n.setup)(I)})}t.setupEngine=f;function d(){const I=["mode"].concat(e.default.STRING_FEATURES,e.default.BINARY_FEATURES),H=e.default.getInstance(),W={};return I.forEach(function(Z){W[Z]=H[Z]}),W.json=s.default.jsonPath,W.xpath=s.default.WGXpath,W.rules=H.ruleSets.slice(),W}t.engineSetup=d;function u(){return r(this,void 0,void 0,function*(){return f({}).then(()=>e.EnginePromise.getall())})}t.engineReady=u,t.localeLoader=c.standardLoader;function m(I){return M("speech",I)}t.toSpeech=m;function p(I){return M("semantic",I)}t.toSemantic=p;function _(I){return M("json",I)}t.toJson=_;function y(I){return M("description",I)}t.toDescription=y;function g(I){return M("enriched",I)}t.toEnriched=g;function v(I){return M("number",I)}t.number=v;function x(I){return M("ordinal",I)}t.ordinal=x;function b(I){return M("numericOrdinal",I)}t.numericOrdinal=b;function S(I){return M("vulgar",I)}t.vulgar=S;function M(I,H){return a.process(I,H)}t.file={},t.file.toSpeech=function(I,H){return C("speech",I,H)},t.file.toSemantic=function(I,H){return C("semantic",I,H)},t.file.toJson=function(I,H){return C("json",I,H)},t.file.toDescription=function(I,H){return C("description",I,H)},t.file.toEnriched=function(I,H){return C("enriched",I,H)};function C(I,H,W){switch(e.default.getInstance().mode){case i.Mode.ASYNC:return $(I,H,W);case i.Mode.SYNC:return A(I,H,W);default:throw new e.SREError(`Can process files in ${e.default.getInstance().mode} mode`)}}t.processFile=C;function A(I,H,W){const Z=E(H),et=a.output(I,Z);if(W)try{s.default.fs.writeFileSync(W,et)}catch{throw new e.SREError("Can not write to file: "+W)}return et}function E(I){let H;try{H=s.default.fs.readFileSync(I,{encoding:"utf8"})}catch{throw new e.SREError("Can not open file: "+I)}return H}function $(I,H,W){return r(this,void 0,void 0,function*(){const Z=yield s.default.fs.promises.readFile(H,{encoding:"utf8"}),et=a.output(I,Z);if(W)try{s.default.fs.promises.writeFile(W,et)}catch{throw new e.SREError("Can not write to file: "+W)}return et})}function D(I){return a.output("walker",I)}t.walk=D;function B(I){return a.keypress("move",I)}t.move=B;function F(I){const H=I||0;e.EnginePromise.getall().then(()=>process.exit(H))}t.exit=F,t.localePath=o.localePath,s.default.documentSupported?f({mode:i.Mode.HTTP}).then(()=>f({})):f({mode:i.Mode.SYNC}).then(()=>f({mode:i.Mode.ASYNC}))})(system);var texToMml$1={},liteAdaptor$1={},NodeMixin={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var o=function(a,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},o(a,s)};return function(a,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");o(a,s);function l(){this.constructor=a}a.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),e=commonjsGlobal&&commonjsGlobal.__assign||function(){return e=Object.assign||function(o){for(var a,s=1,l=arguments.length;s<l;s++){a=arguments[s];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(o[c]=a[c])}return o},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeMixin=t.NodeMixinOptions=void 0;var n=Options$1;t.NodeMixinOptions={badCSS:!0,badSizes:!0};function i(o,a){var s;return a===void 0&&(a={}),a=(0,n.userOptions)((0,n.defaultOptions)({},t.NodeMixinOptions),a),s=function(l){r(c,l);function c(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];var u=l.call(this,f[0])||this,m=u.constructor;return u.options=(0,n.userOptions)((0,n.defaultOptions)({},m.OPTIONS),f[1]),u}return c.prototype.fontSize=function(f){return a.badCSS?this.options.fontSize:l.prototype.fontSize.call(this,f)},c.prototype.fontFamily=function(f){return a.badCSS?this.options.fontFamily:l.prototype.fontFamily.call(this,f)},c.prototype.nodeSize=function(f,d,u){if(d===void 0&&(d=1),u===void 0&&(u=null),!a.badSizes)return l.prototype.nodeSize.call(this,f,d,u);var m=this.textContent(f),p=Array.from(m.replace(c.cjkPattern,"")).length,_=Array.from(m).length-p;return[_*this.options.cjkCharWidth+p*this.options.unknownCharWidth,this.options.unknownCharHeight]},c.prototype.nodeBBox=function(f){return a.badSizes?{left:0,right:0,top:0,bottom:0}:l.prototype.nodeBBox.call(this,f)},c}(o),s.OPTIONS=e(e({},a.badCSS?{fontSize:16,fontFamily:"Times"}:{}),a.badSizes?{cjkCharWidth:1,unknownCharWidth:.6,unknownCharHeight:.8}:{}),s.cjkPattern=new RegExp(["[","ᄀ-ᅟ","〈〉","⺀-〾","぀-㉇","㉐-䶿","一-꓆","ꥠ-ꥼ","가-힣","豈-﫿","︐-︙","︰-﹫","！-｠￠-￦","𛀀-𛀁","🈀-🉑","𠀀-𿿽","]"].join(""),"gu"),s}t.NodeMixin=i})(NodeMixin);var Document={},Element$1={},__assign$2=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$2=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$2.apply(this,arguments)},__read$4=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$3=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__values$2=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Element$1,"__esModule",{value:!0});Element$1.LiteElement=void 0;var LiteElement=function(){function t(r,e,n){var i,o;e===void 0&&(e={}),n===void 0&&(n=[]),this.kind=r,this.attributes=__assign$2({},e),this.children=__spreadArray$3([],__read$4(n),!1);try{for(var a=__values$2(this.children),s=a.next();!s.done;s=a.next()){var l=s.value;l.parent=this}}catch(c){i={error:c}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}this.styles=null}return t}();Element$1.LiteElement=LiteElement;Object.defineProperty(Document,"__esModule",{value:!0});Document.LiteDocument=void 0;var Element_js_1$2=Element$1,LiteDocument=function(){function t(){this.root=new Element_js_1$2.LiteElement("html",{},[this.head=new Element_js_1$2.LiteElement("head"),this.body=new Element_js_1$2.LiteElement("body")]),this.type=""}return Object.defineProperty(t.prototype,"kind",{get:function(){return"#document"},enumerable:!1,configurable:!0}),t}();Document.LiteDocument=LiteDocument;var Text$1={},__extends$7=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(Text$1,"__esModule",{value:!0});Text$1.LiteComment=Text$1.LiteText=void 0;var LiteText=function(){function t(r){r===void 0&&(r=""),this.value=r}return Object.defineProperty(t.prototype,"kind",{get:function(){return"#text"},enumerable:!1,configurable:!0}),t}();Text$1.LiteText=LiteText;var LiteComment=function(t){__extends$7(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"#comment"},enumerable:!1,configurable:!0}),r}(LiteText);Text$1.LiteComment=LiteComment;var Window={},List={},__read$3=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$2=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(List,"__esModule",{value:!0});List.LiteList=void 0;var LiteList=function(){function t(r){this.nodes=[],this.nodes=__spreadArray$2([],__read$3(r),!1)}return t.prototype.append=function(r){this.nodes.push(r)},t.prototype[Symbol.iterator]=function(){var r=0;return{next:function(){return r===this.nodes.length?{value:null,done:!0}:{value:this.nodes[r++],done:!1}}}},t}();List.LiteList=LiteList;var Parser$1={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(d,u,m,p){p===void 0&&(p=m);var _=Object.getOwnPropertyDescriptor(u,m);(!_||("get"in _?!u.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return u[m]}}),Object.defineProperty(d,p,_)}:function(d,u,m,p){p===void 0&&(p=m),d[p]=u[m]}),e=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(d,u){Object.defineProperty(d,"default",{enumerable:!0,value:u})}:function(d,u){d.default=u}),n=commonjsGlobal&&commonjsGlobal.__importStar||function(d){if(d&&d.__esModule)return d;var u={};if(d!=null)for(var m in d)m!=="default"&&Object.prototype.hasOwnProperty.call(d,m)&&r(u,d,m);return e(u,d),u},i=commonjsGlobal&&commonjsGlobal.__read||function(d,u){var m=typeof Symbol=="function"&&d[Symbol.iterator];if(!m)return d;var p=m.call(d),_,y=[],g;try{for(;(u===void 0||u-- >0)&&!(_=p.next()).done;)y.push(_.value)}catch(v){g={error:v}}finally{try{_&&!_.done&&(m=p.return)&&m.call(p)}finally{if(g)throw g.error}}return y},o=commonjsGlobal&&commonjsGlobal.__values||function(d){var u=typeof Symbol=="function"&&Symbol.iterator,m=u&&d[u],p=0;if(m)return m.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&p>=d.length&&(d=void 0),{value:d&&d[p++],done:!d}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.LiteParser=t.PATTERNS=void 0;var a=n(Entities),s=Element$1,l=Text$1,c;(function(d){d.TAGNAME="[a-z][^\\s\\n>]*",d.ATTNAME="[a-z][^\\s\\n>=]*",d.VALUE=`(?:'[^']*'|"[^"]*"|[^\\s\\n]+)`,d.VALUESPLIT=`(?:'([^']*)'|"([^"]*)"|([^\\s\\n]+))`,d.SPACE="(?:\\s|\\n)+",d.OPTIONALSPACE="(?:\\s|\\n)*",d.ATTRIBUTE=d.ATTNAME+"(?:"+d.OPTIONALSPACE+"="+d.OPTIONALSPACE+d.VALUE+")?",d.ATTRIBUTESPLIT="("+d.ATTNAME+")(?:"+d.OPTIONALSPACE+"="+d.OPTIONALSPACE+d.VALUESPLIT+")?",d.TAG="(<(?:"+d.TAGNAME+"(?:"+d.SPACE+d.ATTRIBUTE+")*"+d.OPTIONALSPACE+"/?|/"+d.TAGNAME+"|!--[^]*?--|![^]*?)(?:>|$))",d.tag=new RegExp(d.TAG,"i"),d.attr=new RegExp(d.ATTRIBUTE,"i"),d.attrsplit=new RegExp(d.ATTRIBUTESPLIT,"i")})(c=t.PATTERNS||(t.PATTERNS={}));var f=function(){function d(){}return d.prototype.parseFromString=function(u,m,p){p===void 0&&(p=null);for(var _=p.createDocument(),y=p.body(_),g=u.replace(/<\?.*?\?>/g,"").split(c.tag);g.length;){var v=g.shift(),x=g.shift();v&&this.addText(p,y,v),x&&x.charAt(x.length-1)===">"&&(x.charAt(1)==="!"?this.addComment(p,y,x):x.charAt(1)==="/"?y=this.closeTag(p,y,x):y=this.openTag(p,y,x,g))}return this.checkDocument(p,_),_},d.prototype.addText=function(u,m,p){return p=a.translate(p),u.append(m,u.text(p))},d.prototype.addComment=function(u,m,p){return u.append(m,new l.LiteComment(p))},d.prototype.closeTag=function(u,m,p){for(var _=p.slice(2,p.length-1).toLowerCase();u.parent(m)&&u.kind(m)!==_;)m=u.parent(m);return u.parent(m)},d.prototype.openTag=function(u,m,p,_){var y=this.constructor.PCDATA,g=this.constructor.SELF_CLOSING,v=p.match(/<(.*?)[\s\n>\/]/)[1].toLowerCase(),x=u.node(v),b=p.replace(/^<.*?[\s\n>]/,"").split(c.attrsplit);return(b.pop().match(/>$/)||b.length<5)&&(this.addAttributes(u,x,b),u.append(m,x),!g[v]&&!p.match(/\/>$/)&&(y[v]?this.handlePCDATA(u,x,v,_):m=x)),m},d.prototype.addAttributes=function(u,m,p){for(var _=this.constructor.CDATA_ATTR;p.length;){var y=i(p.splice(0,5),5),g=y[1],v=y[2],x=y[3],b=y[4],S=v||x||b||"";_[g]||(S=a.translate(S)),u.setAttribute(m,g,S)}},d.prototype.handlePCDATA=function(u,m,p,_){for(var y=[],g="</"+p+">",v="";_.length&&v!==g;)y.push(v),y.push(_.shift()),v=_.shift();u.append(m,u.text(y.join("")))},d.prototype.checkDocument=function(u,m){var p,_,y,g,v=this.getOnlyChild(u,u.body(m));if(v){try{for(var x=o(u.childNodes(u.body(m))),b=x.next();!b.done;b=x.next()){var S=b.value;if(S===v)break;S instanceof l.LiteComment&&S.value.match(/^<!DOCTYPE/)&&(m.type=S.value)}}catch(A){p={error:A}}finally{try{b&&!b.done&&(_=x.return)&&_.call(x)}finally{if(p)throw p.error}}switch(u.kind(v)){case"html":try{for(var M=o(v.children),C=M.next();!C.done;C=M.next()){var S=C.value;switch(u.kind(S)){case"head":m.head=S;break;case"body":m.body=S;break}}}catch(A){y={error:A}}finally{try{C&&!C.done&&(g=M.return)&&g.call(M)}finally{if(y)throw y.error}}m.root=v,u.remove(v),u.parent(m.body)!==v&&u.append(v,m.body),u.parent(m.head)!==v&&u.insert(m.head,m.body);break;case"head":m.head=u.replace(v,m.head);break;case"body":m.body=u.replace(v,m.body);break}}},d.prototype.getOnlyChild=function(u,m){var p,_,y=null;try{for(var g=o(u.childNodes(m)),v=g.next();!v.done;v=g.next()){var x=v.value;if(x instanceof s.LiteElement){if(y)return null;y=x}}}catch(b){p={error:b}}finally{try{v&&!v.done&&(_=g.return)&&_.call(g)}finally{if(p)throw p.error}}return y},d.prototype.serialize=function(u,m,p){var _=this;p===void 0&&(p=!1);var y=this.constructor.SELF_CLOSING,g=this.constructor.CDATA_ATTR,v=u.kind(m),x=u.allAttributes(m).map(function(M){return M.name+'="'+(g[M.name]?M.value:_.protectAttribute(M.value))+'"'}).join(" "),b=this.serializeInner(u,m,p),S="<"+v+(x?" "+x:"")+((!p||b)&&!y[v]?">".concat(b,"</").concat(v,">"):p?"/>":">");return S},d.prototype.serializeInner=function(u,m,p){var _=this;p===void 0&&(p=!1);var y=this.constructor.PCDATA;return y.hasOwnProperty(m.kind)?u.childNodes(m).map(function(g){return u.value(g)}).join(""):u.childNodes(m).map(function(g){var v=u.kind(g);return v==="#text"?_.protectHTML(u.value(g)):v==="#comment"?g.value:_.serialize(u,g,p)}).join("")},d.prototype.protectAttribute=function(u){return typeof u!="string"&&(u=String(u)),u.replace(/"/g,"&quot;")},d.prototype.protectHTML=function(u){return u.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},d.SELF_CLOSING={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},d.PCDATA={option:!0,textarea:!0,fieldset:!0,title:!0,style:!0,script:!0},d.CDATA_ATTR={style:!0,datafld:!0,datasrc:!0,href:!0,src:!0,longdesc:!0,usemap:!0,cite:!0,datetime:!0,action:!0,axis:!0,profile:!0,content:!0,scheme:!0},d}();t.LiteParser=f})(Parser$1);Object.defineProperty(Window,"__esModule",{value:!0});Window.LiteWindow=void 0;var Element_js_1$1=Element$1,Document_js_1$1=Document,List_js_1=List,Parser_js_1$1=Parser$1,LiteWindow=function(){function t(){this.DOMParser=Parser_js_1$1.LiteParser,this.NodeList=List_js_1.LiteList,this.HTMLCollection=List_js_1.LiteList,this.HTMLElement=Element_js_1$1.LiteElement,this.DocumentFragment=List_js_1.LiteList,this.Document=Document_js_1$1.LiteDocument,this.document=new Document_js_1$1.LiteDocument}return t}();Window.LiteWindow=LiteWindow;var __extends$6=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign$1=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$1=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign$1.apply(this,arguments)},__values$1=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__read$2=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray$1=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))};Object.defineProperty(liteAdaptor$1,"__esModule",{value:!0});liteAdaptor$1.liteAdaptor=liteAdaptor$1.LiteAdaptor=liteAdaptor$1.LiteBase=void 0;var DOMAdaptor_js_1=DOMAdaptor,NodeMixin_js_1=NodeMixin,Document_js_1=Document,Element_js_1=Element$1,Text_js_1=Text$1,Window_js_1=Window,Parser_js_1=Parser$1,Styles_js_1=Styles$1,LiteBase=function(t){__extends$6(r,t);function r(){var e=t.call(this)||this;return e.parser=new Parser_js_1.LiteParser,e.window=new Window_js_1.LiteWindow,e}return r.prototype.parse=function(e,n){return this.parser.parseFromString(e,n,this)},r.prototype.create=function(e,n){return new Element_js_1.LiteElement(e)},r.prototype.text=function(e){return new Text_js_1.LiteText(e)},r.prototype.comment=function(e){return new Text_js_1.LiteComment(e)},r.prototype.createDocument=function(){return new Document_js_1.LiteDocument},r.prototype.head=function(e){return e.head},r.prototype.body=function(e){return e.body},r.prototype.root=function(e){return e.root},r.prototype.doctype=function(e){return e.type},r.prototype.tags=function(e,n,i){i===void 0&&(i=null);var o=[],a=[];if(i)return a;for(var s=e;s;){var l=s.kind;l!=="#text"&&l!=="#comment"&&(s=s,l===n&&a.push(s),s.children.length&&(o=s.children.concat(o))),s=o.shift()}return a},r.prototype.elementById=function(e,n){for(var i=[],o=e;o;){if(o.kind!=="#text"&&o.kind!=="#comment"){if(o=o,o.attributes.id===n)return o;o.children.length&&(i=o.children.concat(i))}o=i.shift()}return null},r.prototype.elementsByClass=function(e,n){for(var i=[],o=[],a=e;a;){if(a.kind!=="#text"&&a.kind!=="#comment"){a=a;var s=(a.attributes.class||"").trim().split(/ +/);s.includes(n)&&o.push(a),a.children.length&&(i=a.children.concat(i))}a=i.shift()}return o},r.prototype.getElements=function(e,n){var i,o,a=[],s=this.body(n);try{for(var l=__values$1(e),c=l.next();!c.done;c=l.next()){var f=c.value;if(typeof f=="string")if(f.charAt(0)==="#"){var d=this.elementById(s,f.slice(1));d&&a.push(d)}else f.charAt(0)==="."?a=a.concat(this.elementsByClass(s,f.slice(1))):f.match(/^[-a-z][-a-z0-9]*$/i)&&(a=a.concat(this.tags(s,f)));else Array.isArray(f)?a=a.concat(f):f instanceof this.window.NodeList||f instanceof this.window.HTMLCollection?a=a.concat(f.nodes):a.push(f)}}catch(u){i={error:u}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return a},r.prototype.contains=function(e,n){for(;n&&n!==e;)n=this.parent(n);return!!n},r.prototype.parent=function(e){return e.parent},r.prototype.childIndex=function(e){return e.parent?e.parent.children.findIndex(function(n){return n===e}):-1},r.prototype.append=function(e,n){return n.parent&&this.remove(n),e.children.push(n),n.parent=e,n},r.prototype.insert=function(e,n){if(e.parent&&this.remove(e),n&&n.parent){var i=this.childIndex(n);n.parent.children.splice(i,0,e),e.parent=n.parent}},r.prototype.remove=function(e){var n=this.childIndex(e);return n>=0&&e.parent.children.splice(n,1),e.parent=null,e},r.prototype.replace=function(e,n){var i=this.childIndex(n);return i>=0&&(n.parent.children[i]=e,e.parent=n.parent,n.parent=null),n},r.prototype.clone=function(e){var n=this,i=new Element_js_1.LiteElement(e.kind);return i.attributes=__assign$1({},e.attributes),i.children=e.children.map(function(o){if(o.kind==="#text")return new Text_js_1.LiteText(o.value);if(o.kind==="#comment")return new Text_js_1.LiteComment(o.value);var a=n.clone(o);return a.parent=i,a}),i},r.prototype.split=function(e,n){var i=new Text_js_1.LiteText(e.value.slice(n));return e.value=e.value.slice(0,n),e.parent.children.splice(this.childIndex(e)+1,0,i),i.parent=e.parent,i},r.prototype.next=function(e){var n=e.parent;if(!n)return null;var i=this.childIndex(e)+1;return i>=0&&i<n.children.length?n.children[i]:null},r.prototype.previous=function(e){var n=e.parent;if(!n)return null;var i=this.childIndex(e)-1;return i>=0?n.children[i]:null},r.prototype.firstChild=function(e){return e.children[0]},r.prototype.lastChild=function(e){return e.children[e.children.length-1]},r.prototype.childNodes=function(e){return __spreadArray$1([],__read$2(e.children),!1)},r.prototype.childNode=function(e,n){return e.children[n]},r.prototype.kind=function(e){return e.kind},r.prototype.value=function(e){return e.kind==="#text"?e.value:e.kind==="#comment"?e.value.replace(/^<!(--)?((?:.|\n)*)\1>$/,"$2"):""},r.prototype.textContent=function(e){var n=this;return e.children.reduce(function(i,o){return i+(o.kind==="#text"?o.value:o.kind==="#comment"?"":n.textContent(o))},"")},r.prototype.innerHTML=function(e){return this.parser.serializeInner(this,e)},r.prototype.outerHTML=function(e){return this.parser.serialize(this,e)},r.prototype.serializeXML=function(e){return this.parser.serialize(this,e,!0)},r.prototype.setAttribute=function(e,n,i,o){o===void 0&&(o=null),typeof i!="string"&&(i=String(i)),o&&(n=o.replace(/.*\//,"")+":"+n.replace(/^.*:/,"")),e.attributes[n]=i,n==="style"&&(e.styles=null)},r.prototype.getAttribute=function(e,n){return e.attributes[n]},r.prototype.removeAttribute=function(e,n){delete e.attributes[n]},r.prototype.hasAttribute=function(e,n){return e.attributes.hasOwnProperty(n)},r.prototype.allAttributes=function(e){var n,i,o=e.attributes,a=[];try{for(var s=__values$1(Object.keys(o)),l=s.next();!l.done;l=s.next()){var c=l.value;a.push({name:c,value:o[c]})}}catch(f){n={error:f}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a},r.prototype.addClass=function(e,n){var i=(e.attributes.class||"").split(/ /);i.find(function(o){return o===n})||(i.push(n),e.attributes.class=i.join(" "))},r.prototype.removeClass=function(e,n){var i=(e.attributes.class||"").split(/ /),o=i.findIndex(function(a){return a===n});o>=0&&(i.splice(o,1),e.attributes.class=i.join(" "))},r.prototype.hasClass=function(e,n){var i=(e.attributes.class||"").split(/ /);return!!i.find(function(o){return o===n})},r.prototype.setStyle=function(e,n,i){e.styles||(e.styles=new Styles_js_1.Styles(this.getAttribute(e,"style"))),e.styles.set(n,i),e.attributes.style=e.styles.cssText},r.prototype.getStyle=function(e,n){if(!e.styles){var i=this.getAttribute(e,"style");if(!i)return"";e.styles=new Styles_js_1.Styles(i)}return e.styles.get(n)},r.prototype.allStyles=function(e){return this.getAttribute(e,"style")},r.prototype.insertRules=function(e,n){e.children=[this.text(n.join(`

`)+`

`+this.textContent(e))]},r.prototype.fontSize=function(e){return 0},r.prototype.fontFamily=function(e){return""},r.prototype.nodeSize=function(e,n,i){return[0,0]},r.prototype.nodeBBox=function(e){return{left:0,right:0,top:0,bottom:0}},r}(DOMAdaptor_js_1.AbstractDOMAdaptor);liteAdaptor$1.LiteBase=LiteBase;var LiteAdaptor=function(t){__extends$6(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r}((0,NodeMixin_js_1.NodeMixin)(LiteBase));liteAdaptor$1.LiteAdaptor=LiteAdaptor;function liteAdaptor(t){return t===void 0&&(t=null),new LiteAdaptor(null,t)}liteAdaptor$1.liteAdaptor=liteAdaptor;var AllPackages={},ActionConfiguration={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionConfiguration=t.ActionMethods=void 0;var e=Configuration,n=r(requireTexParser()),i=SymbolMap,o=r(BaseMethods$1);t.ActionMethods={},t.ActionMethods.Macro=o.default.Macro,t.ActionMethods.Toggle=function(a,s){for(var l=[],c;(c=a.GetArgument(s))!=="\\endtoggle";)l.push(new n.default(c,a.stack.env,a.configuration).mml());a.Push(a.create("node","maction",l,{actiontype:"toggle"}))},t.ActionMethods.Mathtip=function(a,s){var l=a.ParseArg(s),c=a.ParseArg(s);a.Push(a.create("node","maction",[l,c],{actiontype:"tooltip"}))},new i.CommandMap("action-macros",{toggle:"Toggle",mathtip:"Mathtip",texttip:["Macro","\\mathtip{#1}{\\text{#2}}",2]},t.ActionMethods),t.ActionConfiguration=e.Configuration.create("action",{handler:{macro:["action-macros"]}})})(ActionConfiguration);var AmsCdConfiguration={},AmsCdMethods$1={},__importDefault$h=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(AmsCdMethods$1,"__esModule",{value:!0});var TexParser_js_1$4=__importDefault$h(requireTexParser()),BaseConfiguration_js_1=BaseConfiguration,MmlNode_js_1$4=MmlNode,NodeUtil_js_1$4=__importDefault$h(NodeUtil$1),AmsCdMethods={};AmsCdMethods.CD=function(t,r){t.Push(r);var e=t.itemFactory.create("array"),n=t.configuration.options.amscd;return e.setProperties({minw:t.stack.env.CD_minw||n.harrowsize,minh:t.stack.env.CD_minh||n.varrowsize}),e.arraydef={columnalign:"center",columnspacing:n.colspace,rowspacing:n.rowspace,displaystyle:!0},e};AmsCdMethods.arrow=function(t,r){var e=t.string.charAt(t.i);if(e.match(/[><VA.|=]/))t.i++;else return(0,BaseConfiguration_js_1.Other)(t,r);var n=t.stack.Top();(!n.isKind("array")||n.Size())&&(AmsCdMethods.cell(t,r),n=t.stack.Top());for(var i=n,o=i.table.length%2===1,a=(i.row.length+(o?0:1))%2;a;)AmsCdMethods.cell(t,r),a--;var s,l={minsize:i.getProperty("minw"),stretchy:!0},c={minsize:i.getProperty("minh"),stretchy:!0,symmetric:!0,lspace:0,rspace:0};if(e!==".")if(e==="|")s=t.create("token","mo",c,"∥");else if(e==="=")s=t.create("token","mo",l,"=");else{var f={">":"→","<":"←",V:"↓",A:"↑"}[e],d=t.GetUpTo(r+e,e),u=t.GetUpTo(r+e,e);if(e===">"||e==="<"){if(s=t.create("token","mo",l,f),d||(d="\\kern "+i.getProperty("minw")),d||u){var m={width:"+.67em",lspace:".33em"};if(s=t.create("node","munderover",[s]),d){var p=new TexParser_js_1$4.default(d,t.stack.env,t.configuration).mml(),_=t.create("node","mpadded",[p],m);NodeUtil_js_1$4.default.setAttribute(_,"voffset",".1em"),NodeUtil_js_1$4.default.setChild(s,s.over,_)}if(u){var y=new TexParser_js_1$4.default(u,t.stack.env,t.configuration).mml();NodeUtil_js_1$4.default.setChild(s,s.under,t.create("node","mpadded",[y],m))}t.configuration.options.amscd.hideHorizontalLabels&&(s=t.create("node","mpadded",s,{depth:0,height:".67em"}))}}else{var g=t.create("token","mo",c,f);s=g,(d||u)&&(s=t.create("node","mrow"),d&&NodeUtil_js_1$4.default.appendChildren(s,[new TexParser_js_1$4.default("\\scriptstyle\\llap{"+d+"}",t.stack.env,t.configuration).mml()]),g.texClass=MmlNode_js_1$4.TEXCLASS.ORD,NodeUtil_js_1$4.default.appendChildren(s,[g]),u&&NodeUtil_js_1$4.default.appendChildren(s,[new TexParser_js_1$4.default("\\scriptstyle\\rlap{"+u+"}",t.stack.env,t.configuration).mml()]))}}s&&t.Push(s),AmsCdMethods.cell(t,r)};AmsCdMethods.cell=function(t,r){var e=t.stack.Top();(e.table||[]).length%2===0&&(e.row||[]).length===0&&t.Push(t.create("node","mpadded",[],{height:"8.5pt",depth:"2pt"})),t.Push(t.itemFactory.create("cell").setProperties({isEntry:!0,name:r}))};AmsCdMethods.minCDarrowwidth=function(t,r){t.stack.env.CD_minw=t.GetDimen(r)};AmsCdMethods.minCDarrowheight=function(t,r){t.stack.env.CD_minh=t.GetDimen(r)};AmsCdMethods$1.default=AmsCdMethods;var __createBinding$3=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,r,e,n){n===void 0&&(n=e);var i=Object.getOwnPropertyDescriptor(r,e);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,i)}:function(t,r,e,n){n===void 0&&(n=e),t[n]=r[e]}),__setModuleDefault$3=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),__importStar$3=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var e in t)e!=="default"&&Object.prototype.hasOwnProperty.call(t,e)&&__createBinding$3(r,t,e);return __setModuleDefault$3(r,t),r},__importDefault$g=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},sm$1=__importStar$3(SymbolMap),ParseMethods_js_1$3=__importDefault$g(ParseMethods$1),AmsCdMethods_js_1=__importDefault$g(AmsCdMethods$1);new sm$1.EnvironmentMap("amscd_environment",ParseMethods_js_1$3.default.environment,{CD:"CD"},AmsCdMethods_js_1.default);new sm$1.CommandMap("amscd_macros",{minCDarrowwidth:"minCDarrowwidth",minCDarrowheight:"minCDarrowheight"},AmsCdMethods_js_1.default);new sm$1.MacroMap("amscd_special",{"@":"arrow"},AmsCdMethods_js_1.default);Object.defineProperty(AmsCdConfiguration,"__esModule",{value:!0});AmsCdConfiguration.AmsCdConfiguration=void 0;var Configuration_js_1$a=Configuration;AmsCdConfiguration.AmsCdConfiguration=Configuration_js_1$a.Configuration.create("amscd",{handler:{character:["amscd_special"],macro:["amscd_macros"],environment:["amscd_environment"]},options:{amscd:{colspace:"5pt",rowspace:"5pt",harrowsize:"2.75em",varrowsize:"1.75em",hideHorizontalLabels:!1}}});var BboxConfiguration={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.BboxConfiguration=t.BboxMethods=void 0;var e=Configuration,n=SymbolMap,i=r(TexError$1);t.BboxMethods={},t.BboxMethods.BBox=function(s,l){for(var c=s.GetBrackets(l,""),f=s.ParseArg(l),d=c.split(/,/),u,m,p,_=0,y=d.length;_<y;_++){var g=d[_].trim(),v=g.match(/^(\.\d+|\d+(\.\d*)?)(pt|em|ex|mu|px|in|cm|mm)$/);if(v){if(u)throw new i.default("MultipleBBoxProperty","%1 specified twice in %2","Padding",l);var x=a(v[1]+v[3]);x&&(u={height:"+"+x,depth:"+"+x,lspace:x,width:"+"+2*parseInt(v[1],10)+v[3]})}else if(g.match(/^([a-z0-9]+|\#[0-9a-f]{6}|\#[0-9a-f]{3})$/i)){if(m)throw new i.default("MultipleBBoxProperty","%1 specified twice in %2","Background",l);m=g}else if(g.match(/^[-a-z]+:/i)){if(p)throw new i.default("MultipleBBoxProperty","%1 specified twice in %2","Style",l);p=o(g)}else if(g!=="")throw new i.default("InvalidBBoxProperty",`"%1" doesn't look like a color, a padding dimension, or a style`,g)}u&&(f=s.create("node","mpadded",[f],u)),(m||p)&&(u={},m&&Object.assign(u,{mathbackground:m}),p&&Object.assign(u,{style:p}),f=s.create("node","mstyle",[f],u)),s.Push(f)};var o=function(s){return s},a=function(s){return s};new n.CommandMap("bbox",{bbox:"BBox"},t.BboxMethods),t.BboxConfiguration=e.Configuration.create("bbox",{handler:{macro:["bbox"]}})})(BboxConfiguration);var BraketConfiguration={},BraketItems={},__extends$5=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__importDefault$f=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(BraketItems,"__esModule",{value:!0});BraketItems.BraketItem=void 0;var StackItem_js_1$2=StackItem,MmlNode_js_1$3=MmlNode,ParseUtil_js_1$4=__importDefault$f(requireParseUtil()),BraketItem=function(t){__extends$5(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(r.prototype,"kind",{get:function(){return"braket"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){return e.isKind("close")?[[this.factory.create("mml",this.toMml())],!0]:e.isKind("mml")?(this.Push(e.toMml()),this.getProperty("single")?[[this.toMml()],!0]:StackItem_js_1$2.BaseItem.fail):t.prototype.checkItem.call(this,e)},r.prototype.toMml=function(){var e=t.prototype.toMml.call(this),n=this.getProperty("open"),i=this.getProperty("close");if(this.getProperty("stretchy"))return ParseUtil_js_1$4.default.fenced(this.factory.configuration,n,e,i);var o={fence:!0,stretchy:!1,symmetric:!0,texClass:MmlNode_js_1$3.TEXCLASS.OPEN},a=this.create("token","mo",o,n);o.texClass=MmlNode_js_1$3.TEXCLASS.CLOSE;var s=this.create("token","mo",o,i),l=this.create("node","mrow",[a,e,s],{open:n,close:i,texClass:MmlNode_js_1$3.TEXCLASS.INNER});return l},r}(StackItem_js_1$2.BaseItem);BraketItems.BraketItem=BraketItem;var BraketMethods$1={},__importDefault$e=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(BraketMethods$1,"__esModule",{value:!0});var BaseMethods_js_1$2=__importDefault$e(BaseMethods$1),MmlNode_js_1$2=MmlNode,TexError_js_1$4=__importDefault$e(TexError$1),BraketMethods={};BraketMethods.Macro=BaseMethods_js_1$2.default.Macro;BraketMethods.Braket=function(t,r,e,n,i,o){var a=t.GetNext();if(a==="")throw new TexError_js_1$4.default("MissingArgFor","Missing argument for %1",t.currentCS);var s=!0;a==="{"&&(t.i++,s=!1),t.Push(t.itemFactory.create("braket").setProperties({barmax:o,barcount:0,open:e,close:n,stretchy:i,single:s}))};BraketMethods.Bar=function(t,r){var e=r==="|"?"|":"∥",n=t.stack.Top();if(n.kind!=="braket"||n.getProperty("barcount")>=n.getProperty("barmax")){var i=t.create("token","mo",{texClass:MmlNode_js_1$2.TEXCLASS.ORD,stretchy:!1},e);t.Push(i);return}e==="|"&&t.GetNext()==="|"&&(t.i++,e="∥");var o=n.getProperty("stretchy");if(!o){var a=t.create("token","mo",{stretchy:!1,braketbar:!0},e);t.Push(a);return}var s=t.create("node","TeXAtom",[],{texClass:MmlNode_js_1$2.TEXCLASS.CLOSE});t.Push(s),n.setProperty("barcount",n.getProperty("barcount")+1),s=t.create("token","mo",{stretchy:!0,braketbar:!0},e),t.Push(s),s=t.create("node","TeXAtom",[],{texClass:MmlNode_js_1$2.TEXCLASS.OPEN}),t.Push(s)};BraketMethods$1.default=BraketMethods;var __importDefault$d=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},SymbolMap_js_1$8=SymbolMap,BraketMethods_js_1=__importDefault$d(BraketMethods$1);new SymbolMap_js_1$8.CommandMap("Braket-macros",{bra:["Macro","{\\langle {#1} \\vert}",1],ket:["Macro","{\\vert {#1} \\rangle}",1],braket:["Braket","⟨","⟩",!1,1/0],set:["Braket","{","}",!1,1],Bra:["Macro","{\\left\\langle {#1} \\right\\vert}",1],Ket:["Macro","{\\left\\vert {#1} \\right\\rangle}",1],Braket:["Braket","⟨","⟩",!0,1/0],Set:["Braket","{","}",!0,1],ketbra:["Macro","{\\vert {#1} \\rangle\\langle {#2} \\vert}",2],Ketbra:["Macro","{\\left\\vert {#1} \\right\\rangle\\left\\langle {#2} \\right\\vert}",2],"|":"Bar"},BraketMethods_js_1.default);new SymbolMap_js_1$8.MacroMap("Braket-characters",{"|":"Bar"},BraketMethods_js_1.default);var _a$3;Object.defineProperty(BraketConfiguration,"__esModule",{value:!0});BraketConfiguration.BraketConfiguration=void 0;var Configuration_js_1$9=Configuration,BraketItems_js_1=BraketItems;BraketConfiguration.BraketConfiguration=Configuration_js_1$9.Configuration.create("braket",{handler:{character:["Braket-characters"],macro:["Braket-macros"]},items:(_a$3={},_a$3[BraketItems_js_1.BraketItem.prototype.kind]=BraketItems_js_1.BraketItem,_a$3)});var BussproofsConfiguration={},BussproofsItems={},BussproofsUtil$2={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__read||function(G,q){var Q=typeof Symbol=="function"&&G[Symbol.iterator];if(!Q)return G;var K=Q.call(G),tt,w=[],N;try{for(;(q===void 0||q-- >0)&&!(tt=K.next()).done;)w.push(tt.value)}catch(T){N={error:T}}finally{try{tt&&!tt.done&&(Q=K.return)&&Q.call(K)}finally{if(N)throw N.error}}return w},e=commonjsGlobal&&commonjsGlobal.__values||function(G){var q=typeof Symbol=="function"&&Symbol.iterator,Q=q&&G[q],K=0;if(Q)return Q.call(G);if(G&&typeof G.length=="number")return{next:function(){return G&&K>=G.length&&(G=void 0),{value:G&&G[K++],done:!G}}};throw new TypeError(q?"Object is not iterable.":"Symbol.iterator is not defined.")},n=commonjsGlobal&&commonjsGlobal.__importDefault||function(G){return G&&G.__esModule?G:{default:G}},i;Object.defineProperty(t,"__esModule",{value:!0}),t.clearDocument=t.saveDocument=t.makeBsprAttributes=t.removeProperty=t.getProperty=t.setProperty=t.balanceRules=void 0;var o=n(NodeUtil$1),a=n(requireParseUtil()),s=null,l=null,c=function(G){l.root=G;var q=s.outputJax.getBBox(l,s).w;return q},f=function(G){for(var q=0;G&&!o.default.isType(G,"mtable");){if(o.default.isType(G,"text"))return null;if(o.default.isType(G,"mrow")){G=G.childNodes[0],q=0;continue}G=G.parent.childNodes[q],q++}return G},d=function(G,q){return G.childNodes[q==="up"?1:0].childNodes[0].childNodes[0].childNodes[0].childNodes[0]},u=function(G,q){return G.childNodes[q].childNodes[0].childNodes[0]},m=function(G){return u(G,0)},p=function(G){return u(G,G.childNodes.length-1)},_=function(G,q){return G.childNodes[q==="up"?0:1].childNodes[0].childNodes[0].childNodes[0]},y=function(G){for(;G&&!o.default.isType(G,"mtd");)G=G.parent;return G},g=function(G){return G.parent.childNodes[G.parent.childNodes.indexOf(G)+1]},v=function(G){for(;G&&(0,t.getProperty)(G,"inference")==null;)G=G.parent;return G},x=function(G,q,Q){Q===void 0&&(Q=!1);var K=0;if(G===q)return K;if(G!==q.parent){var tt=G.childNodes,w=Q?tt.length-1:0;o.default.isType(tt[w],"mspace")&&(K+=c(tt[w])),G=q.parent}if(G===q)return K;var N=G.childNodes,T=Q?N.length-1:0;return N[T]!==q&&(K+=c(N[T])),K},b=function(G,q){q===void 0&&(q=!1);var Q=f(G),K=_(Q,(0,t.getProperty)(Q,"inferenceRule")),tt=x(G,Q,q),w=c(Q),N=c(K);return tt+(w-N)/2},S=function(G,q,Q,K){if(K===void 0&&(K=!1),(0,t.getProperty)(q,"inferenceRule")||(0,t.getProperty)(q,"labelledRule")){var tt=G.nodeFactory.create("node","mrow");q.parent.replaceChild(tt,q),tt.setChildren([q]),M(q,tt),q=tt}var w=K?q.childNodes.length-1:0,N=q.childNodes[w];if(o.default.isType(N,"mspace")){o.default.setAttribute(N,"width",a.default.Em(a.default.dimen2em(o.default.getAttribute(N,"width"))+Q));return}if(N=G.nodeFactory.create("node","mspace",[],{width:a.default.Em(Q)}),K){q.appendChild(N);return}N.parent=q,q.childNodes.unshift(N)},M=function(G,q){var Q=["inference","proof","maxAdjust","labelledRule"];Q.forEach(function(K){var tt=(0,t.getProperty)(G,K);tt!=null&&((0,t.setProperty)(q,K,tt),(0,t.removeProperty)(G,K))})},C=function(G){var q=G.nodeLists.sequent;if(q)for(var Q=q.length-1,K=void 0;K=q[Q];Q--){if((0,t.getProperty)(K,"sequentProcessed")){(0,t.removeProperty)(K,"sequentProcessed");continue}var tt=[],w=v(K);if((0,t.getProperty)(w,"inference")===1){for(tt.push(K);(0,t.getProperty)(w,"inference")===1;){w=f(w);var N=m(d(w,(0,t.getProperty)(w,"inferenceRule"))),T=(0,t.getProperty)(N,"inferenceRule")?_(N,(0,t.getProperty)(N,"inferenceRule")):N;(0,t.getProperty)(T,"sequent")&&(K=T.childNodes[0],tt.push(K),(0,t.setProperty)(K,"sequentProcessed",!0)),w=N}E(G,tt)}}},A=function(G,q,Q,K,tt){var w=G.nodeFactory.create("node","mspace",[],{width:a.default.Em(tt)});if(K==="left"){var N=q.childNodes[Q].childNodes[0];w.parent=N,N.childNodes.unshift(w)}else q.childNodes[Q].appendChild(w);(0,t.setProperty)(q.parent,"sequentAdjust_"+K,tt)},E=function(G,q){for(var Q=q.pop();q.length;){var K=q.pop(),tt=r($(Q,K),2),w=tt[0],N=tt[1];(0,t.getProperty)(Q.parent,"axiom")&&(A(G,w<0?Q:K,0,"left",Math.abs(w)),A(G,N<0?Q:K,2,"right",Math.abs(N))),Q=K}},$=function(G,q){var Q=c(G.childNodes[2]),K=c(q.childNodes[2]),tt=c(G.childNodes[0]),w=c(q.childNodes[0]),N=tt-w,T=Q-K;return[N,T]},D=function(G){var q,Q;l=new G.document.options.MathItem("",null,G.math.display);var K=G.data;C(K);var tt=K.nodeLists.inference||[];try{for(var w=e(tt),N=w.next();!N.done;N=w.next()){var T=N.value,j=(0,t.getProperty)(T,"proof"),P=f(T),O=d(P,(0,t.getProperty)(P,"inferenceRule")),k=m(O);if((0,t.getProperty)(k,"inference")){var V=b(k);if(V){S(K,k,-V);var z=x(T,P,!1);S(K,T,V-z)}}var X=p(O);if((0,t.getProperty)(X,"inference")!=null){var Y=b(X,!0);S(K,X,-Y,!0);var st=x(T,P,!0),ft=(0,t.getProperty)(T,"maxAdjust");ft!=null&&(Y=Math.max(Y,ft));var ct=void 0;if(j||!(ct=y(T))){S(K,(0,t.getProperty)(T,"proof")?T:T.parent,Y-st,!0);continue}var ht=g(ct);if(ht){var gt=K.nodeFactory.create("node","mspace",[],{width:Y-st+"em"});ht.appendChild(gt),T.removeProperty("maxAdjust");continue}var U=v(ct);U&&(Y=(0,t.getProperty)(U,"maxAdjust")?Math.max((0,t.getProperty)(U,"maxAdjust"),Y):Y,(0,t.setProperty)(U,"maxAdjust",Y))}}}catch(J){q={error:J}}finally{try{N&&!N.done&&(Q=w.return)&&Q.call(w)}finally{if(q)throw q.error}}};t.balanceRules=D;var B="bspr_",F=(i={},i[B+"maxAdjust"]=!0,i),I=function(G,q,Q){o.default.setProperty(G,B+q,Q)};t.setProperty=I;var H=function(G,q){return o.default.getProperty(G,B+q)};t.getProperty=H;var W=function(G,q){G.removeProperty(B+q)};t.removeProperty=W;var Z=function(G){G.data.root.walkTree(function(q,Q){var K=[];q.getPropertyNames().forEach(function(tt){!F[tt]&&tt.match(RegExp("^"+B))&&K.push(tt+":"+q.getProperty(tt))}),K.length&&o.default.setAttribute(q,"semantics",K.join(";"))})};t.makeBsprAttributes=Z;var et=function(G){if(s=G.document,!("getBBox"in s.outputJax))throw Error("The bussproofs extension requires an output jax with a getBBox() method")};t.saveDocument=et;var lt=function(G){s=null};t.clearDocument=lt})(BussproofsUtil$2);var __extends$4=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__createBinding$2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,r,e,n){n===void 0&&(n=e);var i=Object.getOwnPropertyDescriptor(r,e);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,i)}:function(t,r,e,n){n===void 0&&(n=e),t[n]=r[e]}),__setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),__importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var e in t)e!=="default"&&Object.prototype.hasOwnProperty.call(t,e)&&__createBinding$2(r,t,e);return __setModuleDefault$2(r,t),r},__importDefault$c=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(BussproofsItems,"__esModule",{value:!0});BussproofsItems.ProofTreeItem=void 0;var TexError_js_1$3=__importDefault$c(TexError$1),StackItem_js_1$1=StackItem,Stack_js_1=__importDefault$c(Stack$1),BussproofsUtil$1=__importStar$2(BussproofsUtil$2),ProofTreeItem=function(t){__extends$4(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.leftLabel=null,e.rigthLabel=null,e.innerStack=new Stack_js_1.default(e.factory,{},!0),e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"proofTree"},enumerable:!1,configurable:!0}),r.prototype.checkItem=function(e){if(e.isKind("end")&&e.getName()==="prooftree"){var n=this.toMml();return BussproofsUtil$1.setProperty(n,"proof",!0),[[this.factory.create("mml",n),e],!0]}if(e.isKind("stop"))throw new TexError_js_1$3.default("EnvMissingEnd","Missing \\end{%1}",this.getName());return this.innerStack.Push(e),StackItem_js_1$1.BaseItem.fail},r.prototype.toMml=function(){var e=t.prototype.toMml.call(this),n=this.innerStack.Top();if(n.isKind("start")&&!n.Size())return e;this.innerStack.Push(this.factory.create("stop"));var i=this.innerStack.Top().toMml();return this.create("node","mrow",[i,e],{})},r}(StackItem_js_1$1.BaseItem);BussproofsItems.ProofTreeItem=ProofTreeItem;var BussproofsMethods$1={},__createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,r,e,n){n===void 0&&(n=e);var i=Object.getOwnPropertyDescriptor(r,e);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,i)}:function(t,r,e,n){n===void 0&&(n=e),t[n]=r[e]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var e in t)e!=="default"&&Object.prototype.hasOwnProperty.call(t,e)&&__createBinding$1(r,t,e);return __setModuleDefault$1(r,t),r},__read$1=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__spreadArray=commonjsGlobal&&commonjsGlobal.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},__importDefault$b=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(BussproofsMethods$1,"__esModule",{value:!0});var TexError_js_1$2=__importDefault$b(TexError$1),TexParser_js_1$3=__importDefault$b(requireTexParser()),ParseUtil_js_1$3=__importDefault$b(requireParseUtil()),BussproofsUtil=__importStar$1(BussproofsUtil$2),BussproofsMethods={};BussproofsMethods.Prooftree=function(t,r){t.Push(r);var e=t.itemFactory.create("proofTree").setProperties({name:r.getName(),line:"solid",currentLine:"solid",rootAtTop:!1});return e};BussproofsMethods.Axiom=function(t,r){var e=t.stack.Top();if(e.kind!=="proofTree")throw new TexError_js_1$2.default("IllegalProofCommand","Proof commands only allowed in prooftree environment.");var n=paddedContent(t,t.GetArgument(r));BussproofsUtil.setProperty(n,"axiom",!0),e.Push(n)};var paddedContent=function(t,r){var e=ParseUtil_js_1$3.default.internalMath(t,ParseUtil_js_1$3.default.trimSpaces(r),0);if(!e[0].childNodes[0].childNodes.length)return t.create("node","mrow",[]);var n=t.create("node","mspace",[],{width:".5ex"}),i=t.create("node","mspace",[],{width:".5ex"});return t.create("node","mrow",__spreadArray(__spreadArray([n],__read$1(e),!1),[i],!1))};BussproofsMethods.Inference=function(t,r,e){var n=t.stack.Top();if(n.kind!=="proofTree")throw new TexError_js_1$2.default("IllegalProofCommand","Proof commands only allowed in prooftree environment.");if(n.Size()<e)throw new TexError_js_1$2.default("BadProofTree","Proof tree badly specified.");var i=n.getProperty("rootAtTop"),o=e===1&&!n.Peek()[0].childNodes.length?0:e,a=[];do a.length&&a.unshift(t.create("node","mtd",[],{})),a.unshift(t.create("node","mtd",[n.Pop()],{rowalign:i?"top":"bottom"})),e--;while(e>0);var s=t.create("node","mtr",a,{}),l=t.create("node","mtable",[s],{framespacing:"0 0"}),c=paddedContent(t,t.GetArgument(r)),f=n.getProperty("currentLine");f!==n.getProperty("line")&&n.setProperty("currentLine",n.getProperty("line"));var d=createRule(t,l,[c],n.getProperty("left"),n.getProperty("right"),f,i);n.setProperty("left",null),n.setProperty("right",null),BussproofsUtil.setProperty(d,"inference",o),t.configuration.addNode("inference",d),n.Push(d)};function createRule(t,r,e,n,i,o,a){var s=t.create("node","mtr",[t.create("node","mtd",[r],{})],{}),l=t.create("node","mtr",[t.create("node","mtd",e,{})],{}),c=t.create("node","mtable",a?[l,s]:[s,l],{align:"top 2",rowlines:o,framespacing:"0 0"});BussproofsUtil.setProperty(c,"inferenceRule",a?"up":"down");var f,d;n&&(f=t.create("node","mpadded",[n],{height:"+.5em",width:"+.5em",voffset:"-.15em"}),BussproofsUtil.setProperty(f,"prooflabel","left")),i&&(d=t.create("node","mpadded",[i],{height:"+.5em",width:"+.5em",voffset:"-.15em"}),BussproofsUtil.setProperty(d,"prooflabel","right"));var u,m;if(n&&i)u=[f,c,d],m="both";else if(n)u=[f,c],m="left";else if(i)u=[c,d],m="right";else return c;return c=t.create("node","mrow",u),BussproofsUtil.setProperty(c,"labelledRule",m),c}BussproofsMethods.Label=function(t,r,e){var n=t.stack.Top();if(n.kind!=="proofTree")throw new TexError_js_1$2.default("IllegalProofCommand","Proof commands only allowed in prooftree environment.");var i=ParseUtil_js_1$3.default.internalMath(t,t.GetArgument(r),0),o=i.length>1?t.create("node","mrow",i,{}):i[0];n.setProperty(e,o)};BussproofsMethods.SetLine=function(t,r,e,n){var i=t.stack.Top();if(i.kind!=="proofTree")throw new TexError_js_1$2.default("IllegalProofCommand","Proof commands only allowed in prooftree environment.");i.setProperty("currentLine",e),n&&i.setProperty("line",e)};BussproofsMethods.RootAtTop=function(t,r,e){var n=t.stack.Top();if(n.kind!=="proofTree")throw new TexError_js_1$2.default("IllegalProofCommand","Proof commands only allowed in prooftree environment.");n.setProperty("rootAtTop",e)};BussproofsMethods.AxiomF=function(t,r){var e=t.stack.Top();if(e.kind!=="proofTree")throw new TexError_js_1$2.default("IllegalProofCommand","Proof commands only allowed in prooftree environment.");var n=parseFCenterLine(t,r);BussproofsUtil.setProperty(n,"axiom",!0),e.Push(n)};function parseFCenterLine(t,r){var e=t.GetNext();if(e!=="$")throw new TexError_js_1$2.default("IllegalUseOfCommand","Use of %1 does not match it's definition.",r);t.i++;var n=t.GetUpTo(r,"$");if(n.indexOf("\\fCenter")===-1)throw new TexError_js_1$2.default("IllegalUseOfCommand","Missing \\fCenter in %1.",r);var i=__read$1(n.split("\\fCenter"),2),o=i[0],a=i[1],s=new TexParser_js_1$3.default(o,t.stack.env,t.configuration).mml(),l=new TexParser_js_1$3.default(a,t.stack.env,t.configuration).mml(),c=new TexParser_js_1$3.default("\\fCenter",t.stack.env,t.configuration).mml(),f=t.create("node","mtd",[s],{}),d=t.create("node","mtd",[c],{}),u=t.create("node","mtd",[l],{}),m=t.create("node","mtr",[f,d,u],{}),p=t.create("node","mtable",[m],{columnspacing:".5ex",columnalign:"center 2"});return BussproofsUtil.setProperty(p,"sequent",!0),t.configuration.addNode("sequent",m),p}BussproofsMethods.FCenter=function(t,r){};BussproofsMethods.InferenceF=function(t,r,e){var n=t.stack.Top();if(n.kind!=="proofTree")throw new TexError_js_1$2.default("IllegalProofCommand","Proof commands only allowed in prooftree environment.");if(n.Size()<e)throw new TexError_js_1$2.default("BadProofTree","Proof tree badly specified.");var i=n.getProperty("rootAtTop"),o=e===1&&!n.Peek()[0].childNodes.length?0:e,a=[];do a.length&&a.unshift(t.create("node","mtd",[],{})),a.unshift(t.create("node","mtd",[n.Pop()],{rowalign:i?"top":"bottom"})),e--;while(e>0);var s=t.create("node","mtr",a,{}),l=t.create("node","mtable",[s],{framespacing:"0 0"}),c=parseFCenterLine(t,r),f=n.getProperty("currentLine");f!==n.getProperty("line")&&n.setProperty("currentLine",n.getProperty("line"));var d=createRule(t,l,[c],n.getProperty("left"),n.getProperty("right"),f,i);n.setProperty("left",null),n.setProperty("right",null),BussproofsUtil.setProperty(d,"inference",o),t.configuration.addNode("inference",d),n.Push(d)};BussproofsMethods$1.default=BussproofsMethods;var __importDefault$a=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},BussproofsMethods_js_1=__importDefault$a(BussproofsMethods$1),ParseMethods_js_1$2=__importDefault$a(ParseMethods$1),SymbolMap_js_1$7=SymbolMap;new SymbolMap_js_1$7.CommandMap("Bussproofs-macros",{AxiomC:"Axiom",UnaryInfC:["Inference",1],BinaryInfC:["Inference",2],TrinaryInfC:["Inference",3],QuaternaryInfC:["Inference",4],QuinaryInfC:["Inference",5],RightLabel:["Label","right"],LeftLabel:["Label","left"],AXC:"Axiom",UIC:["Inference",1],BIC:["Inference",2],TIC:["Inference",3],RL:["Label","right"],LL:["Label","left"],noLine:["SetLine","none",!1],singleLine:["SetLine","solid",!1],solidLine:["SetLine","solid",!1],dashedLine:["SetLine","dashed",!1],alwaysNoLine:["SetLine","none",!0],alwaysSingleLine:["SetLine","solid",!0],alwaysSolidLine:["SetLine","solid",!0],alwaysDashedLine:["SetLine","dashed",!0],rootAtTop:["RootAtTop",!0],alwaysRootAtTop:["RootAtTop",!0],rootAtBottom:["RootAtTop",!1],alwaysRootAtBottom:["RootAtTop",!1],fCenter:"FCenter",Axiom:"AxiomF",UnaryInf:["InferenceF",1],BinaryInf:["InferenceF",2],TrinaryInf:["InferenceF",3],QuaternaryInf:["InferenceF",4],QuinaryInf:["InferenceF",5]},BussproofsMethods_js_1.default);new SymbolMap_js_1$7.EnvironmentMap("Bussproofs-environments",ParseMethods_js_1$2.default.environment,{prooftree:["Prooftree",null,!1]},BussproofsMethods_js_1.default);var _a$2;Object.defineProperty(BussproofsConfiguration,"__esModule",{value:!0});BussproofsConfiguration.BussproofsConfiguration=void 0;var Configuration_js_1$8=Configuration,BussproofsItems_js_1=BussproofsItems,BussproofsUtil_js_1=BussproofsUtil$2;BussproofsConfiguration.BussproofsConfiguration=Configuration_js_1$8.Configuration.create("bussproofs",{handler:{macro:["Bussproofs-macros"],environment:["Bussproofs-environments"]},items:(_a$2={},_a$2[BussproofsItems_js_1.ProofTreeItem.prototype.kind]=BussproofsItems_js_1.ProofTreeItem,_a$2),preprocessors:[[BussproofsUtil_js_1.saveDocument,1]],postprocessors:[[BussproofsUtil_js_1.clearDocument,3],[BussproofsUtil_js_1.makeBsprAttributes,2],[BussproofsUtil_js_1.balanceRules,1]]});var CasesConfiguration={},EmpheqUtil={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__read||function(s,l){var c=typeof Symbol=="function"&&s[Symbol.iterator];if(!c)return s;var f=c.call(s),d,u=[],m;try{for(;(l===void 0||l-- >0)&&!(d=f.next()).done;)u.push(d.value)}catch(p){m={error:p}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(m)throw m.error}}return u},e=commonjsGlobal&&commonjsGlobal.__spreadArray||function(s,l,c){if(c||arguments.length===2)for(var f=0,d=l.length,u;f<d;f++)(u||!(f in l))&&(u||(u=Array.prototype.slice.call(l,0,f)),u[f]=l[f]);return s.concat(u||Array.prototype.slice.call(l))},n=commonjsGlobal&&commonjsGlobal.__values||function(s){var l=typeof Symbol=="function"&&Symbol.iterator,c=l&&s[l],f=0;if(c)return c.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&f>=s.length&&(s=void 0),{value:s&&s[f++],done:!s}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},i=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(t,"__esModule",{value:!0}),t.EmpheqUtil=void 0;var o=i(requireParseUtil()),a=i(requireTexParser());t.EmpheqUtil={environment:function(s,l,c,f){var d=f[0],u=s.itemFactory.create(d+"-begin").setProperties({name:l,end:d});s.Push(c.apply(void 0,e([s,u],r(f.slice(1)),!1)))},splitOptions:function(s,l){return l===void 0&&(l=null),o.default.keyvalOptions(s,l,!0)},columnCount:function(s){var l,c,f=0;try{for(var d=n(s.childNodes),u=d.next();!u.done;u=d.next()){var m=u.value,p=m.childNodes.length-(m.isKind("mlabeledtr")?1:0);p>f&&(f=p)}}catch(_){l={error:_}}finally{try{u&&!u.done&&(c=d.return)&&c.call(d)}finally{if(l)throw l.error}}return f},cellBlock:function(s,l,c,f){var d,u,m=c.create("node","mpadded",[],{height:0,depth:0,voffset:"-1height"}),p=new a.default(s,c.stack.env,c.configuration),_=p.mml();f&&p.configuration.tags.label&&(p.configuration.tags.currentTag.env=f,p.configuration.tags.getTag(!0));try{for(var y=n(_.isInferred?_.childNodes:[_]),g=y.next();!g.done;g=y.next()){var v=g.value;m.appendChild(v)}}catch(x){d={error:x}}finally{try{g&&!g.done&&(u=y.return)&&u.call(y)}finally{if(d)throw d.error}}return m.appendChild(c.create("node","mphantom",[c.create("node","mpadded",[l],{width:0})])),m},topRowTable:function(s,l){var c=o.default.copyNode(s,l);return c.setChildren(c.childNodes.slice(0,1)),c.attributes.set("align","baseline 1"),s.factory.create("mphantom",{},[l.create("node","mpadded",[c],{width:0})])},rowspanCell:function(s,l,c,f,d){s.appendChild(f.create("node","mpadded",[this.cellBlock(l,o.default.copyNode(c,f),f,d),this.topRowTable(c,f)],{height:0,depth:0,voffset:"height"}))},left:function(s,l,c,f,d){var u,m;d===void 0&&(d=""),s.attributes.set("columnalign","right "+(s.attributes.get("columnalign")||"")),s.attributes.set("columnspacing","0em "+(s.attributes.get("columnspacing")||""));var p;try{for(var _=n(s.childNodes.slice(0).reverse()),y=_.next();!y.done;y=_.next()){var g=y.value;p=f.create("node","mtd"),g.childNodes.unshift(p),p.parent=g,g.isKind("mlabeledtr")&&(g.childNodes[0]=g.childNodes[1],g.childNodes[1]=p)}}catch(v){u={error:v}}finally{try{y&&!y.done&&(m=_.return)&&m.call(_)}finally{if(u)throw u.error}}this.rowspanCell(p,c,l,f,d)},right:function(s,l,c,f,d){d===void 0&&(d=""),s.childNodes.length===0&&s.appendChild(f.create("node","mtr"));for(var u=t.EmpheqUtil.columnCount(s),m=s.childNodes[0];m.childNodes.length<u;)m.appendChild(f.create("node","mtd"));var p=m.appendChild(f.create("node","mtd"));t.EmpheqUtil.rowspanCell(p,c,l,f,d),s.attributes.set("columnalign",(s.attributes.get("columnalign")||"").split(/ /).slice(0,u).join(" ")+" left"),s.attributes.set("columnspacing",(s.attributes.get("columnspacing")||"").split(/ /).slice(0,u-1).join(" ")+" 0em")},adjustTable:function(s,l){var c=s.getProperty("left"),f=s.getProperty("right");if(c||f){var d=s.Last,u=o.default.copyNode(d,l);c&&this.left(d,u,c,l),f&&this.right(d,u,f,l)}},allowEnv:{equation:!0,align:!0,gather:!0,flalign:!0,alignat:!0,multline:!0},checkEnv:function(s){return this.allowEnv.hasOwnProperty(s.replace(/\*$/,""))||!1}}})(EmpheqUtil);(function(t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var p=function(_,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var x in v)Object.prototype.hasOwnProperty.call(v,x)&&(g[x]=v[x])},p(_,y)};return function(_,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");p(_,y);function g(){this.constructor=_}_.prototype=y===null?Object.create(y):(g.prototype=y.prototype,new g)}}(),e=commonjsGlobal&&commonjsGlobal.__importDefault||function(p){return p&&p.__esModule?p:{default:p}},n;Object.defineProperty(t,"__esModule",{value:!0}),t.CasesConfiguration=t.CasesMethods=t.CasesTags=t.CasesBeginItem=void 0;var i=Configuration,o=SymbolMap,a=e(requireParseUtil()),s=e(BaseMethods$1),l=e(TexError$1),c=BaseItems,f=AmsConfiguration,d=EmpheqUtil,u=function(p){r(_,p);function _(){return p!==null&&p.apply(this,arguments)||this}return Object.defineProperty(_.prototype,"kind",{get:function(){return"cases-begin"},enumerable:!1,configurable:!0}),_.prototype.checkItem=function(y){return y.isKind("end")&&y.getName()===this.getName()&&this.getProperty("end")?(this.setProperty("end",!1),[[],!0]):p.prototype.checkItem.call(this,y)},_}(c.BeginItem);t.CasesBeginItem=u;var m=function(p){r(_,p);function _(){var y=p!==null&&p.apply(this,arguments)||this;return y.subcounter=0,y}return _.prototype.start=function(y,g,v){this.subcounter=0,p.prototype.start.call(this,y,g,v)},_.prototype.autoTag=function(){this.currentTag.tag==null&&(this.currentTag.env==="subnumcases"?(this.subcounter===0&&this.counter++,this.subcounter++,this.tag(this.formatNumber(this.counter,this.subcounter),!1)):((this.subcounter===0||this.currentTag.env!=="numcases-left")&&this.counter++,this.tag(this.formatNumber(this.counter),!1)))},_.prototype.formatNumber=function(y,g){return g===void 0&&(g=null),y.toString()+(g===null?"":String.fromCharCode(96+g))},_}(f.AmsTags);t.CasesTags=m,t.CasesMethods={NumCases:function(p,_){if(p.stack.env.closing===_.getName()){delete p.stack.env.closing,p.Push(p.itemFactory.create("end").setProperty("name",_.getName()));var y=p.stack.Top(),g=y.Last,v=a.default.copyNode(g,p),x=y.getProperty("left");return d.EmpheqUtil.left(g,v,x+"\\empheqlbrace\\,",p,"numcases-left"),p.Push(p.itemFactory.create("end").setProperty("name",_.getName())),null}else{var x=p.GetArgument("\\begin{"+_.getName()+"}");_.setProperty("left",x);var b=s.default.EqnArray(p,_,!0,!0,"ll");return b.arraydef.displaystyle=!1,b.arraydef.rowspacing=".2em",b.setProperty("numCases",!0),p.Push(_),b}},Entry:function(p,_){if(!p.stack.Top().getProperty("numCases"))return s.default.Entry(p,_);p.Push(p.itemFactory.create("cell").setProperties({isEntry:!0,name:_}));for(var y=p.string,g=0,v=p.i,x=y.length;v<x;){var b=y.charAt(v);if(b==="{")g++,v++;else if(b==="}"){if(g===0)break;g--,v++}else{if(b==="&"&&g===0)throw new l.default("ExtraCasesAlignTab","Extra alignment tab in text for numcase environment");if(b==="\\"&&g===0){var S=(y.slice(v+1).match(/^[a-z]+|./i)||[])[0];if(S==="\\"||S==="cr"||S==="end"||S==="label")break;v+=S.length}else v++}}var M=y.substr(p.i,v-p.i).replace(/^\s*/,"");p.PushAll(a.default.internalMath(p,M,0)),p.i=v}},new o.EnvironmentMap("cases-env",d.EmpheqUtil.environment,{numcases:["NumCases","cases"],subnumcases:["NumCases","cases"]},t.CasesMethods),new o.MacroMap("cases-macros",{"&":"Entry"},t.CasesMethods),t.CasesConfiguration=i.Configuration.create("cases",{handler:{environment:["cases-env"],character:["cases-macros"]},items:(n={},n[u.prototype.kind]=u,n),tags:{cases:m}})})(CasesConfiguration);var CenternotConfiguration={},__values=commonjsGlobal&&commonjsGlobal.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},__importDefault$9=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(CenternotConfiguration,"__esModule",{value:!0});CenternotConfiguration.CenternotConfiguration=CenternotConfiguration.filterCenterOver=void 0;var Configuration_js_1$7=Configuration,TexParser_js_1$2=__importDefault$9(requireTexParser()),NodeUtil_js_1$3=__importDefault$9(NodeUtil$1),SymbolMap_js_1$6=SymbolMap,BaseMethods_js_1$1=__importDefault$9(BaseMethods$1);new SymbolMap_js_1$6.CommandMap("centernot",{centerOver:"CenterOver",centernot:["Macro","\\centerOver{#1}{{⧸}}",1]},{CenterOver:function(t,r){var e="{"+t.GetArgument(r)+"}",n=t.ParseArg(r),i=new TexParser_js_1$2.default(e,t.stack.env,t.configuration).mml(),o=t.create("node","TeXAtom",[new TexParser_js_1$2.default(e,t.stack.env,t.configuration).mml(),t.create("node","mpadded",[t.create("node","mpadded",[n],{width:0,lspace:"-.5width"}),t.create("node","mphantom",[i])],{width:0,lspace:"-.5width"})]);t.configuration.addNode("centerOver",i),t.Push(o)},Macro:BaseMethods_js_1$1.default.Macro});function filterCenterOver(t){var r,e,n=t.data;try{for(var i=__values(n.getList("centerOver")),o=i.next();!o.done;o=i.next()){var a=o.value,s=NodeUtil_js_1$3.default.getTexClass(a.childNodes[0].childNodes[0]);s!==null&&NodeUtil_js_1$3.default.setProperties(a.parent.parent.parent.parent.parent.parent,{texClass:s})}}catch(l){r={error:l}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(r)throw r.error}}}CenternotConfiguration.filterCenterOver=filterCenterOver;CenternotConfiguration.CenternotConfiguration=Configuration_js_1$7.Configuration.create("centernot",{handler:{macro:["centernot"]},postprocessors:[filterCenterOver]});var ColorV2Configuration={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConfiguration=t.ColorV2Methods=void 0;var r=SymbolMap,e=Configuration;t.ColorV2Methods={Color:function(n,i){var o=n.GetArgument(i),a=n.stack.env.color;n.stack.env.color=o;var s=n.ParseArg(i);a?n.stack.env.color=a:delete n.stack.env.color;var l=n.create("node","mstyle",[s],{mathcolor:o});n.Push(l)}},new r.CommandMap("colorv2",{color:"Color"},t.ColorV2Methods),t.ColorConfiguration=e.Configuration.create("colorv2",{handler:{macro:["colorv2"]}})})(ColorV2Configuration);var ColortblConfiguration={},__extends$3=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__importDefault$8=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ColortblConfiguration,"__esModule",{value:!0});ColortblConfiguration.ColortblConfiguration=ColortblConfiguration.ColorArrayItem=void 0;var BaseItems_js_1=BaseItems,Configuration_js_1$6=Configuration,SymbolMap_js_1$5=SymbolMap,TexError_js_1$1=__importDefault$8(TexError$1),ColorArrayItem=function(t){__extends$3(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.color={cell:"",row:"",col:[]},e.hasColor=!1,e}return r.prototype.EndEntry=function(){t.prototype.EndEntry.call(this);var e=this.row[this.row.length-1],n=this.color.cell||this.color.row||this.color.col[this.row.length-1];n&&(e.attributes.set("mathbackground",n),this.color.cell="",this.hasColor=!0)},r.prototype.EndRow=function(){t.prototype.EndRow.call(this),this.color.row=""},r.prototype.createMml=function(){var e=t.prototype.createMml.call(this),n=e.isKind("mrow")?e.childNodes[1]:e;return n.isKind("menclose")&&(n=n.childNodes[0].childNodes[0]),this.hasColor&&n.attributes.get("frame")==="none"&&n.attributes.set("frame",""),e},r}(BaseItems_js_1.ArrayItem);ColortblConfiguration.ColorArrayItem=ColorArrayItem;new SymbolMap_js_1$5.CommandMap("colortbl",{cellcolor:["TableColor","cell"],rowcolor:["TableColor","row"],columncolor:["TableColor","col"]},{TableColor:function(t,r,e){var n=t.configuration.packageData.get("color").model,i=t.GetBrackets(r,""),o=n.getColor(i,t.GetArgument(r)),a=t.stack.Top();if(!(a instanceof ColorArrayItem))throw new TexError_js_1$1.default("UnsupportedTableColor","Unsupported use of %1",t.currentCS);if(e==="col"){if(a.table.length)throw new TexError_js_1$1.default("ColumnColorNotTop","%1 must be in the top row",r);a.color.col[a.row.length]=o,t.GetBrackets(r,"")&&t.GetBrackets(r,"")}else if(a.color[e]=o,e==="row"&&(a.Size()||a.row.length))throw new TexError_js_1$1.default("RowColorNotFirst","%1 must be at the beginning of a row",r)}});var config=function(t,r){r.parseOptions.packageData.has("color")||Configuration_js_1$6.ConfigurationHandler.get("color").config(t,r)};ColortblConfiguration.ColortblConfiguration=Configuration_js_1$6.Configuration.create("colortbl",{handler:{macro:["colortbl"]},items:{array:ColorArrayItem},priority:10,config:[config,10]});var EmpheqConfiguration={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__extends||function(){var u=function(m,p){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,y){_.__proto__=y}||function(_,y){for(var g in y)Object.prototype.hasOwnProperty.call(y,g)&&(_[g]=y[g])},u(m,p)};return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");u(m,p);function _(){this.constructor=m}m.prototype=p===null?Object.create(p):(_.prototype=p.prototype,new _)}}(),e=commonjsGlobal&&commonjsGlobal.__read||function(u,m){var p=typeof Symbol=="function"&&u[Symbol.iterator];if(!p)return u;var _=p.call(u),y,g=[],v;try{for(;(m===void 0||m-- >0)&&!(y=_.next()).done;)g.push(y.value)}catch(x){v={error:x}}finally{try{y&&!y.done&&(p=_.return)&&p.call(_)}finally{if(v)throw v.error}}return g},n=commonjsGlobal&&commonjsGlobal.__importDefault||function(u){return u&&u.__esModule?u:{default:u}},i;Object.defineProperty(t,"__esModule",{value:!0}),t.EmpheqConfiguration=t.EmpheqMethods=t.EmpheqBeginItem=void 0;var o=Configuration,a=SymbolMap,s=n(requireParseUtil()),l=n(TexError$1),c=BaseItems,f=EmpheqUtil,d=function(u){r(m,u);function m(){return u!==null&&u.apply(this,arguments)||this}return Object.defineProperty(m.prototype,"kind",{get:function(){return"empheq-begin"},enumerable:!1,configurable:!0}),m.prototype.checkItem=function(p){return p.isKind("end")&&p.getName()===this.getName()&&this.setProperty("end",!1),u.prototype.checkItem.call(this,p)},m}(c.BeginItem);t.EmpheqBeginItem=d,t.EmpheqMethods={Empheq:function(u,m){if(u.stack.env.closing===m.getName()){delete u.stack.env.closing,u.Push(u.itemFactory.create("end").setProperty("name",u.stack.global.empheq)),u.stack.global.empheq="";var p=u.stack.Top();f.EmpheqUtil.adjustTable(p,u),u.Push(u.itemFactory.create("end").setProperty("name","empheq"))}else{s.default.checkEqnEnv(u),delete u.stack.global.eqnenv;var _=u.GetBrackets("\\begin{"+m.getName()+"}")||"",y=e((u.GetArgument("\\begin{"+m.getName()+"}")||"").split(/=/),2),g=y[0],v=y[1];if(!f.EmpheqUtil.checkEnv(g))throw new l.default("UnknownEnv",'Unknown environment "%1"',g);_&&m.setProperties(f.EmpheqUtil.splitOptions(_,{left:1,right:1})),u.stack.global.empheq=g,u.string="\\begin{"+g+"}"+(v?"{"+v+"}":"")+u.string.slice(u.i),u.i=0,u.Push(m)}},EmpheqMO:function(u,m,p){u.Push(u.create("token","mo",{},p))},EmpheqDelim:function(u,m){var p=u.GetDelimiter(m);u.Push(u.create("token","mo",{stretchy:!0,symmetric:!0},p))}},new a.EnvironmentMap("empheq-env",f.EmpheqUtil.environment,{empheq:["Empheq","empheq"]},t.EmpheqMethods),new a.CommandMap("empheq-macros",{empheqlbrace:["EmpheqMO","{"],empheqrbrace:["EmpheqMO","}"],empheqlbrack:["EmpheqMO","["],empheqrbrack:["EmpheqMO","]"],empheqlangle:["EmpheqMO","⟨"],empheqrangle:["EmpheqMO","⟩"],empheqlparen:["EmpheqMO","("],empheqrparen:["EmpheqMO",")"],empheqlvert:["EmpheqMO","|"],empheqrvert:["EmpheqMO","|"],empheqlVert:["EmpheqMO","‖"],empheqrVert:["EmpheqMO","‖"],empheqlfloor:["EmpheqMO","⌊"],empheqrfloor:["EmpheqMO","⌋"],empheqlceil:["EmpheqMO","⌈"],empheqrceil:["EmpheqMO","⌉"],empheqbiglbrace:["EmpheqMO","{"],empheqbigrbrace:["EmpheqMO","}"],empheqbiglbrack:["EmpheqMO","["],empheqbigrbrack:["EmpheqMO","]"],empheqbiglangle:["EmpheqMO","⟨"],empheqbigrangle:["EmpheqMO","⟩"],empheqbiglparen:["EmpheqMO","("],empheqbigrparen:["EmpheqMO",")"],empheqbiglvert:["EmpheqMO","|"],empheqbigrvert:["EmpheqMO","|"],empheqbiglVert:["EmpheqMO","‖"],empheqbigrVert:["EmpheqMO","‖"],empheqbiglfloor:["EmpheqMO","⌊"],empheqbigrfloor:["EmpheqMO","⌋"],empheqbiglceil:["EmpheqMO","⌈"],empheqbigrceil:["EmpheqMO","⌉"],empheql:"EmpheqDelim",empheqr:"EmpheqDelim",empheqbigl:"EmpheqDelim",empheqbigr:"EmpheqDelim"},t.EmpheqMethods),t.EmpheqConfiguration=o.Configuration.create("empheq",{handler:{macro:["empheq-macros"],environment:["empheq-env"]},items:(i={},i[d.prototype.kind]=d,i)})})(EmpheqConfiguration);var ExtpfeilConfiguration={},NewcommandConfiguration={},__importDefault$7=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},NewcommandMethods_js_1=__importDefault$7(NewcommandMethods$1),SymbolMap_js_1$4=SymbolMap;new SymbolMap_js_1$4.CommandMap("Newcommand-macros",{newcommand:"NewCommand",renewcommand:"NewCommand",newenvironment:"NewEnvironment",renewenvironment:"NewEnvironment",def:"MacroDef",let:"Let"},NewcommandMethods_js_1.default);var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,r,e,n){n===void 0&&(n=e);var i=Object.getOwnPropertyDescriptor(r,e);(!i||("get"in i?!r.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return r[e]}}),Object.defineProperty(t,n,i)}:function(t,r,e,n){n===void 0&&(n=e),t[n]=r[e]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var e in t)e!=="default"&&Object.prototype.hasOwnProperty.call(t,e)&&__createBinding(r,t,e);return __setModuleDefault(r,t),r},__importDefault$6=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},_a$1;Object.defineProperty(NewcommandConfiguration,"__esModule",{value:!0});NewcommandConfiguration.NewcommandConfiguration=void 0;var Configuration_js_1$5=Configuration,NewcommandItems_js_1=NewcommandItems,NewcommandUtil_js_1=__importDefault$6(NewcommandUtil$1),ParseMethods_js_1$1=__importDefault$6(ParseMethods$1),sm=__importStar(SymbolMap),init=function(t){new sm.DelimiterMap(NewcommandUtil_js_1.default.NEW_DELIMITER,ParseMethods_js_1$1.default.delimiter,{}),new sm.CommandMap(NewcommandUtil_js_1.default.NEW_COMMAND,{},{}),new sm.EnvironmentMap(NewcommandUtil_js_1.default.NEW_ENVIRONMENT,ParseMethods_js_1$1.default.environment,{},{}),t.append(Configuration_js_1$5.Configuration.local({handler:{character:[],delimiter:[NewcommandUtil_js_1.default.NEW_DELIMITER],macro:[NewcommandUtil_js_1.default.NEW_DELIMITER,NewcommandUtil_js_1.default.NEW_COMMAND],environment:[NewcommandUtil_js_1.default.NEW_ENVIRONMENT]},priority:-1}))};NewcommandConfiguration.NewcommandConfiguration=Configuration_js_1$5.Configuration.create("newcommand",{handler:{macro:["Newcommand-macros"]},items:(_a$1={},_a$1[NewcommandItems_js_1.BeginEnvItem.prototype.kind]=NewcommandItems_js_1.BeginEnvItem,_a$1),options:{maxMacros:1e3},init});(function(t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtpfeilConfiguration=t.ExtpfeilMethods=void 0;var e=Configuration,n=SymbolMap,i=AmsMethods,o=r(NewcommandUtil$1),a=NewcommandConfiguration,s=r(TexError$1);t.ExtpfeilMethods={},t.ExtpfeilMethods.xArrow=i.AmsMethods.xArrow,t.ExtpfeilMethods.NewExtArrow=function(c,f){var d=c.GetArgument(f),u=c.GetArgument(f),m=c.GetArgument(f);if(!d.match(/^\\([a-z]+|.)$/i))throw new s.default("NewextarrowArg1","First argument to %1 must be a control sequence name",f);if(!u.match(/^(\d+),(\d+)$/))throw new s.default("NewextarrowArg2","Second argument to %1 must be two integers separated by a comma",f);if(!m.match(/^(\d+|0x[0-9A-F]+)$/i))throw new s.default("NewextarrowArg3","Third argument to %1 must be a unicode character number",f);d=d.substr(1);var p=u.split(",");o.default.addMacro(c,d,t.ExtpfeilMethods.xArrow,[parseInt(m),parseInt(p[0]),parseInt(p[1])])},new n.CommandMap("extpfeil",{xtwoheadrightarrow:["xArrow",8608,12,16],xtwoheadleftarrow:["xArrow",8606,17,13],xmapsto:["xArrow",8614,6,7],xlongequal:["xArrow",61,7,7],xtofrom:["xArrow",8644,12,12],Newextarrow:"NewExtArrow"},t.ExtpfeilMethods);var l=function(c){a.NewcommandConfiguration.init(c)};t.ExtpfeilConfiguration=e.Configuration.create("extpfeil",{handler:{macro:["extpfeil"]},init:l})})(ExtpfeilConfiguration);var HtmlConfiguration={},HtmlMethods$1={},__importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(HtmlMethods$1,"__esModule",{value:!0});var NodeUtil_js_1$2=__importDefault$5(NodeUtil$1),HtmlMethods={};HtmlMethods.Href=function(t,r){var e=t.GetArgument(r),n=GetArgumentMML(t,r);NodeUtil_js_1$2.default.setAttribute(n,"href",e),t.Push(n)};HtmlMethods.Class=function(t,r){var e=t.GetArgument(r),n=GetArgumentMML(t,r),i=NodeUtil_js_1$2.default.getAttribute(n,"class");i&&(e=i+" "+e),NodeUtil_js_1$2.default.setAttribute(n,"class",e),t.Push(n)};HtmlMethods.Style=function(t,r){var e=t.GetArgument(r),n=GetArgumentMML(t,r),i=NodeUtil_js_1$2.default.getAttribute(n,"style");i&&(e.charAt(e.length-1)!==";"&&(e+=";"),e=i+" "+e),NodeUtil_js_1$2.default.setAttribute(n,"style",e),t.Push(n)};HtmlMethods.Id=function(t,r){var e=t.GetArgument(r),n=GetArgumentMML(t,r);NodeUtil_js_1$2.default.setAttribute(n,"id",e),t.Push(n)};var GetArgumentMML=function(t,r){var e=t.ParseArg(r);if(!NodeUtil_js_1$2.default.isInferred(e))return e;var n=NodeUtil_js_1$2.default.getChildren(e);if(n.length===1)return n[0];var i=t.create("node","mrow");return NodeUtil_js_1$2.default.copyChildren(e,i),NodeUtil_js_1$2.default.copyAttributes(e,i),i};HtmlMethods$1.default=HtmlMethods;var __importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(HtmlConfiguration,"__esModule",{value:!0});HtmlConfiguration.HtmlConfiguration=void 0;var Configuration_js_1$4=Configuration,SymbolMap_js_1$3=SymbolMap,HtmlMethods_js_1=__importDefault$4(HtmlMethods$1);new SymbolMap_js_1$3.CommandMap("html_macros",{href:"Href",class:"Class",style:"Style",cssId:"Id"},HtmlMethods_js_1.default);HtmlConfiguration.HtmlConfiguration=Configuration_js_1$4.Configuration.create("html",{handler:{macro:["html_macros"]}});var PhysicsConfiguration={},PhysicsItems={},__extends$2=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(PhysicsItems,"__esModule",{value:!0});PhysicsItems.AutoOpen=void 0;var StackItem_js_1=StackItem,ParseUtil_js_1$2=__importDefault$3(requireParseUtil()),NodeUtil_js_1$1=__importDefault$3(NodeUtil$1),TexParser_js_1$1=__importDefault$3(requireTexParser()),AutoOpen=function(t){__extends$2(r,t);function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.openCount=0,e}return Object.defineProperty(r.prototype,"kind",{get:function(){return"auto open"},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"isOpen",{get:function(){return!0},enumerable:!1,configurable:!0}),r.prototype.toMml=function(){var e=this.factory.configuration.parser,n=this.getProperty("right");if(this.getProperty("smash")){var i=t.prototype.toMml.call(this),o=e.create("node","mpadded",[i],{height:0,depth:0});this.Clear(),this.Push(e.create("node","TeXAtom",[o]))}n&&this.Push(new TexParser_js_1$1.default(n,e.stack.env,e.configuration).mml());var a=ParseUtil_js_1$2.default.fenced(this.factory.configuration,this.getProperty("open"),t.prototype.toMml.call(this),this.getProperty("close"),this.getProperty("big"));return NodeUtil_js_1$1.default.removeProperties(a,"open","close","texClass"),a},r.prototype.checkItem=function(e){if(e.isKind("mml")&&e.Size()===1){var n=e.toMml();n.isKind("mo")&&n.getText()===this.getProperty("open")&&this.openCount++}var i=e.getProperty("autoclose");return i&&i===this.getProperty("close")&&!this.openCount--?this.getProperty("ignore")?(this.Clear(),[[],!0]):[[this.toMml()],!0]:t.prototype.checkItem.call(this,e)},r.errors=Object.assign(Object.create(StackItem_js_1.BaseItem.errors),{stop:["ExtraOrMissingDelims","Extra open or missing close delimiter"]}),r}(StackItem_js_1.BaseItem);PhysicsItems.AutoOpen=AutoOpen;var PhysicsMethods$1={},__read=commonjsGlobal&&commonjsGlobal.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,o=[],a;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(a)throw a.error}}return o},__importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(PhysicsMethods$1,"__esModule",{value:!0});var BaseMethods_js_1=__importDefault$2(BaseMethods$1),TexParser_js_1=__importDefault$2(requireTexParser()),TexError_js_1=__importDefault$2(TexError$1),MmlNode_js_1$1=MmlNode,ParseUtil_js_1$1=__importDefault$2(requireParseUtil()),NodeUtil_js_1=__importDefault$2(NodeUtil$1),NodeFactory_js_1=NodeFactory$1,PhysicsMethods={},pairs={"(":")","[":"]","{":"}","|":"|"},biggs=/^(b|B)i(g{1,2})$/;PhysicsMethods.Quantity=function(t,r,e,n,i,o,a){e===void 0&&(e="("),n===void 0&&(n=")"),i===void 0&&(i=!1),o===void 0&&(o=""),a===void 0&&(a="");var s=i?t.GetStar():!1,l=t.GetNext(),c=t.i,f=null;if(l==="\\"){if(t.i++,f=t.GetCS(),!f.match(biggs)){var d=t.create("node","mrow");t.Push(ParseUtil_js_1$1.default.fenced(t.configuration,e,d,n)),t.i=c;return}l=t.GetNext()}var u=pairs[l];if(i&&l!=="{")throw new TexError_js_1.default("MissingArgFor","Missing argument for %1",t.currentCS);if(!u){var d=t.create("node","mrow");t.Push(ParseUtil_js_1$1.default.fenced(t.configuration,e,d,n)),t.i=c;return}if(o){var m=t.create("token","mi",{texClass:MmlNode_js_1$1.TEXCLASS.OP},o);a&&NodeUtil_js_1.default.setAttribute(m,"mathvariant",a),t.Push(t.itemFactory.create("fn",m))}if(l==="{"){var p=t.GetArgument(r);l=i?e:"\\{",u=i?n:"\\}",p=s?l+" "+p+" "+u:f?"\\"+f+"l"+l+" "+p+" \\"+f+"r"+u:"\\left"+l+" "+p+" \\right"+u,t.Push(new TexParser_js_1.default(p,t.stack.env,t.configuration).mml());return}i&&(l=e,u=n),t.i++,t.Push(t.itemFactory.create("auto open").setProperties({open:l,close:u,big:f}))};PhysicsMethods.Eval=function(t,r){var e=t.GetStar(),n=t.GetNext();if(n==="{"){var i=t.GetArgument(r),o="\\left. "+(e?"\\smash{"+i+"}":i)+" \\vphantom{\\int}\\right|";t.string=t.string.slice(0,t.i)+o+t.string.slice(t.i);return}if(n==="("||n==="["){t.i++,t.Push(t.itemFactory.create("auto open").setProperties({open:n,close:"|",smash:e,right:"\\vphantom{\\int}"}));return}throw new TexError_js_1.default("MissingArgFor","Missing argument for %1",t.currentCS)};PhysicsMethods.Commutator=function(t,r,e,n){e===void 0&&(e="["),n===void 0&&(n="]");var i=t.GetStar(),o=t.GetNext(),a=null;if(o==="\\"){if(t.i++,a=t.GetCS(),!a.match(biggs))throw new TexError_js_1.default("MissingArgFor","Missing argument for %1",t.currentCS);o=t.GetNext()}if(o!=="{")throw new TexError_js_1.default("MissingArgFor","Missing argument for %1",t.currentCS);var s=t.GetArgument(r),l=t.GetArgument(r),c=s+","+l;c=i?e+" "+c+" "+n:a?"\\"+a+"l"+e+" "+c+" \\"+a+"r"+n:"\\left"+e+" "+c+" \\right"+n,t.Push(new TexParser_js_1.default(c,t.stack.env,t.configuration).mml())};var latinCap=[65,90],latinSmall=[97,122],greekCap=[913,937],greekSmall=[945,969],digits=[48,57];function inRange(t,r){return t>=r[0]&&t<=r[1]}function createVectorToken(t,r,e,n){var i=t.configuration.parser,o=NodeFactory_js_1.NodeFactory.createToken(t,r,e,n),a=n.codePointAt(0);return n.length===1&&!i.stack.env.font&&i.stack.env.vectorFont&&(inRange(a,latinCap)||inRange(a,latinSmall)||inRange(a,greekCap)||inRange(a,digits)||inRange(a,greekSmall)&&i.stack.env.vectorStar||NodeUtil_js_1.default.getAttribute(o,"accent"))&&NodeUtil_js_1.default.setAttribute(o,"mathvariant",i.stack.env.vectorFont),o}PhysicsMethods.VectorBold=function(t,r){var e=t.GetStar(),n=t.GetArgument(r),i=t.configuration.nodeFactory.get("token"),o=t.stack.env.font;delete t.stack.env.font,t.configuration.nodeFactory.set("token",createVectorToken),t.stack.env.vectorFont=e?"bold-italic":"bold",t.stack.env.vectorStar=e;var a=new TexParser_js_1.default(n,t.stack.env,t.configuration).mml();o&&(t.stack.env.font=o),delete t.stack.env.vectorFont,delete t.stack.env.vectorStar,t.configuration.nodeFactory.set("token",i),t.Push(a)};PhysicsMethods.StarMacro=function(t,r,e){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];var o=t.GetStar(),a=[];if(e)for(var s=a.length;s<e;s++)a.push(t.GetArgument(r));var l=n.join(o?"*":"");l=ParseUtil_js_1$1.default.substituteArgs(t,a,l),t.string=ParseUtil_js_1$1.default.addArgs(t,l,t.string.slice(t.i)),t.i=0,ParseUtil_js_1$1.default.checkMaxMacros(t)};var vectorApplication=function(t,r,e,n,i){var o=new TexParser_js_1.default(n,t.stack.env,t.configuration).mml();t.Push(t.itemFactory.create(r,o));var a=t.GetNext(),s=pairs[a];if(s){var l="",c="",f="",d=i.indexOf(a)!==-1;if(a==="{"){f=t.GetArgument(e),l=d?"\\left\\{":"",c=d?"\\right\\}":"";var u=l+" "+f+" "+c;t.string=u+t.string.slice(t.i),t.i=0;return}d&&(t.i++,t.Push(t.itemFactory.create("auto open").setProperties({open:a,close:s})))}};PhysicsMethods.OperatorApplication=function(t,r,e){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];vectorApplication(t,"fn",r,e,n)};PhysicsMethods.VectorOperator=function(t,r,e){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];vectorApplication(t,"mml",r,e,n)};PhysicsMethods.Expression=function(t,r,e,n){e===void 0&&(e=!0),n===void 0&&(n=""),n=n||r.slice(1);var i=e?t.GetBrackets(r):null,o=t.create("token","mi",{texClass:MmlNode_js_1$1.TEXCLASS.OP},n);if(i){var a=new TexParser_js_1.default(i,t.stack.env,t.configuration).mml();o=t.create("node","msup",[o,a])}t.Push(t.itemFactory.create("fn",o)),t.GetNext()==="("&&(t.i++,t.Push(t.itemFactory.create("auto open").setProperties({open:"(",close:")"})))};PhysicsMethods.Qqtext=function(t,r,e){var n=t.GetStar(),i=e||t.GetArgument(r),o=(n?"":"\\quad")+"\\text{"+i+"}\\quad ";t.string=t.string.slice(0,t.i)+o+t.string.slice(t.i)};PhysicsMethods.Differential=function(t,r,e){var n=t.GetBrackets(r),i=n!=null?"^{"+n+"}":" ",o=t.GetNext()==="(",a=t.GetNext()==="{",s=e+i;if(!(o||a)){s+=t.GetArgument(r,!0)||"";var l=new TexParser_js_1.default(s,t.stack.env,t.configuration).mml();t.Push(l);return}if(a){s+=t.GetArgument(r);var l=new TexParser_js_1.default(s,t.stack.env,t.configuration).mml();t.Push(t.create("node","TeXAtom",[l],{texClass:MmlNode_js_1$1.TEXCLASS.OP}));return}t.Push(new TexParser_js_1.default(s,t.stack.env,t.configuration).mml()),t.i++,t.Push(t.itemFactory.create("auto open").setProperties({open:"(",close:")"}))};PhysicsMethods.Derivative=function(t,r,e,n){var i=t.GetStar(),o=t.GetBrackets(r),a=1,s=[];for(s.push(t.GetArgument(r));t.GetNext()==="{"&&a<e;)s.push(t.GetArgument(r)),a++;var l=!1,c=" ",f=" ";e>2&&s.length>2?(c="^{"+(s.length-1)+"}",l=!0):o!=null&&(e>2&&s.length>1&&(l=!0),c="^{"+o+"}",f=c);for(var d=i?"\\flatfrac":"\\frac",u=s.length>1?s[0]:"",m=s.length>1?s[1]:s[0],p="",_=2,y=void 0;y=s[_];_++)p+=n+" "+y;var g=d+"{"+n+c+u+"}{"+n+" "+m+f+" "+p+"}";t.Push(new TexParser_js_1.default(g,t.stack.env,t.configuration).mml()),t.GetNext()==="("&&(t.i++,t.Push(t.itemFactory.create("auto open").setProperties({open:"(",close:")",ignore:l})))};PhysicsMethods.Bra=function(t,r){var e=t.GetStar(),n=t.GetArgument(r),i="",o=!1,a=!1;if(t.GetNext()==="\\"){var s=t.i;t.i++;var l=t.GetCS(),c=t.lookup("macro",l);c&&c.symbol==="ket"?(o=!0,s=t.i,a=t.GetStar(),t.GetNext()==="{"?i=t.GetArgument(l,!0):(t.i=s,a=!1)):t.i=s}var f="";o?f=e||a?"\\langle{".concat(n,"}\\vert{").concat(i,"}\\rangle"):"\\left\\langle{".concat(n,"}\\middle\\vert{").concat(i,"}\\right\\rangle"):f=e||a?"\\langle{".concat(n,"}\\vert"):"\\left\\langle{".concat(n,"}\\right\\vert{").concat(i,"}"),t.Push(new TexParser_js_1.default(f,t.stack.env,t.configuration).mml())};PhysicsMethods.Ket=function(t,r){var e=t.GetStar(),n=t.GetArgument(r),i=e?"\\vert{".concat(n,"}\\rangle"):"\\left\\vert{".concat(n,"}\\right\\rangle");t.Push(new TexParser_js_1.default(i,t.stack.env,t.configuration).mml())};PhysicsMethods.BraKet=function(t,r){var e=t.GetStar(),n=t.GetArgument(r),i=null;t.GetNext()==="{"&&(i=t.GetArgument(r,!0));var o="";i==null?o=e?"\\langle{".concat(n,"}\\vert{").concat(n,"}\\rangle"):"\\left\\langle{".concat(n,"}\\middle\\vert{").concat(n,"}\\right\\rangle"):o=e?"\\langle{".concat(n,"}\\vert{").concat(i,"}\\rangle"):"\\left\\langle{".concat(n,"}\\middle\\vert{").concat(i,"}\\right\\rangle"),t.Push(new TexParser_js_1.default(o,t.stack.env,t.configuration).mml())};PhysicsMethods.KetBra=function(t,r){var e=t.GetStar(),n=t.GetArgument(r),i=null;t.GetNext()==="{"&&(i=t.GetArgument(r,!0));var o="";i==null?o=e?"\\vert{".concat(n,"}\\rangle\\!\\langle{").concat(n,"}\\vert"):"\\left\\vert{".concat(n,"}\\middle\\rangle\\!\\middle\\langle{").concat(n,"}\\right\\vert"):o=e?"\\vert{".concat(n,"}\\rangle\\!\\langle{").concat(i,"}\\vert"):"\\left\\vert{".concat(n,"}\\middle\\rangle\\!\\middle\\langle{").concat(i,"}\\right\\vert"),t.Push(new TexParser_js_1.default(o,t.stack.env,t.configuration).mml())};function outputBraket(t,r,e){var n=__read(t,3),i=n[0],o=n[1],a=n[2];return r&&e?"\\left\\langle{".concat(i,"}\\middle\\vert{").concat(o,"}\\middle\\vert{").concat(a,"}\\right\\rangle"):r?"\\langle{".concat(i,"}\\vert{").concat(o,"}\\vert{").concat(a,"}\\rangle"):"\\left\\langle{".concat(i,"}\\right\\vert{").concat(o,"}\\left\\vert{").concat(a,"}\\right\\rangle")}PhysicsMethods.Expectation=function(t,r){var e=t.GetStar(),n=e&&t.GetStar(),i=t.GetArgument(r),o=null;t.GetNext()==="{"&&(o=t.GetArgument(r,!0));var a=i&&o?outputBraket([o,i,o],e,n):e?"\\langle {".concat(i,"} \\rangle"):"\\left\\langle {".concat(i,"} \\right\\rangle");t.Push(new TexParser_js_1.default(a,t.stack.env,t.configuration).mml())};PhysicsMethods.MatrixElement=function(t,r){var e=t.GetStar(),n=e&&t.GetStar(),i=t.GetArgument(r),o=t.GetArgument(r),a=t.GetArgument(r),s=outputBraket([i,o,a],e,n);t.Push(new TexParser_js_1.default(s,t.stack.env,t.configuration).mml())};PhysicsMethods.MatrixQuantity=function(t,r,e){var n=t.GetStar(),i=t.GetNext(),o=e?"smallmatrix":"array",a="",s="",l="";switch(i){case"{":a=t.GetArgument(r);break;case"(":t.i++,s=n?"\\lgroup":"(",l=n?"\\rgroup":")",a=t.GetUpTo(r,")");break;case"[":t.i++,s="[",l="]",a=t.GetUpTo(r,"]");break;case"|":t.i++,s="|",l="|",a=t.GetUpTo(r,"|");break;default:s="(",l=")";break}var c=(s?"\\left":"")+s+"\\begin{"+o+"}{} "+a+"\\end{"+o+"}"+(s?"\\right":"")+l;t.Push(new TexParser_js_1.default(c,t.stack.env,t.configuration).mml())};PhysicsMethods.IdentityMatrix=function(t,r){var e=t.GetArgument(r),n=parseInt(e,10);if(isNaN(n))throw new TexError_js_1.default("InvalidNumber","Invalid number");if(n<=1){t.string="1"+t.string.slice(t.i),t.i=0;return}for(var i=Array(n).fill("0"),o=[],a=0;a<n;a++){var s=i.slice();s[a]="1",o.push(s.join(" & "))}t.string=o.join("\\\\ ")+t.string.slice(t.i),t.i=0};PhysicsMethods.XMatrix=function(t,r){var e=t.GetStar(),n=t.GetArgument(r),i=t.GetArgument(r),o=t.GetArgument(r),a=parseInt(i,10),s=parseInt(o,10);if(isNaN(a)||isNaN(s)||s.toString()!==o||a.toString()!==i)throw new TexError_js_1.default("InvalidNumber","Invalid number");if(a=a<1?1:a,s=s<1?1:s,!e){var l=Array(s).fill(n).join(" & "),c=Array(a).fill(l).join("\\\\ ");t.string=c+t.string.slice(t.i),t.i=0;return}var f="";if(a===1&&s===1)f=n;else if(a===1){for(var l=[],d=1;d<=s;d++)l.push("".concat(n,"_{").concat(d,"}"));f=l.join(" & ")}else if(s===1){for(var l=[],d=1;d<=a;d++)l.push("".concat(n,"_{").concat(d,"}"));f=l.join("\\\\ ")}else{for(var u=[],d=1;d<=a;d++){for(var l=[],m=1;m<=s;m++)l.push("".concat(n,"_{{").concat(d,"}{").concat(m,"}}"));u.push(l.join(" & "))}f=u.join("\\\\ ")}t.string=f+t.string.slice(t.i),t.i=0};PhysicsMethods.PauliMatrix=function(t,r){var e=t.GetArgument(r),n=e.slice(1);switch(e[0]){case"0":n+=" 1 & 0\\\\ 0 & 1";break;case"1":case"x":n+=" 0 & 1\\\\ 1 & 0";break;case"2":case"y":n+=" 0 & -i\\\\ i & 0";break;case"3":case"z":n+=" 1 & 0\\\\ 0 & -1";break}t.string=n+t.string.slice(t.i),t.i=0};PhysicsMethods.DiagonalMatrix=function(t,r,e){if(t.GetNext()==="{"){var n=t.i;t.GetArgument(r);var i=t.i;t.i=n+1;for(var o=[],a="",s=t.i;s<i;){try{a=t.GetUpTo(r,",")}catch{t.i=i,o.push(t.string.slice(s,i-1));break}if(t.i>=i){o.push(t.string.slice(s,i));break}s=t.i,o.push(a)}t.string=makeDiagMatrix(o,e)+t.string.slice(i),t.i=0}};function makeDiagMatrix(t,r){for(var e=t.length,n=[],i=0;i<e;i++)n.push(Array(r?e-i:i+1).join("&")+"\\mqty{"+t[i]+"}");return n.join("\\\\ ")}PhysicsMethods.AutoClose=function(t,r,e){var n=t.create("token","mo",{stretchy:!1},r),i=t.itemFactory.create("mml",n).setProperties({autoclose:r});t.Push(i)};PhysicsMethods.Vnabla=function(t,r){var e=t.options.physics.arrowdel?"\\vec{\\gradientnabla}":"{\\gradientnabla}";return t.Push(new TexParser_js_1.default(e,t.stack.env,t.configuration).mml())};PhysicsMethods.DiffD=function(t,r){var e=t.options.physics.italicdiff?"d":"{\\rm d}";return t.Push(new TexParser_js_1.default(e,t.stack.env,t.configuration).mml())};PhysicsMethods.Macro=BaseMethods_js_1.default.Macro;PhysicsMethods.NamedFn=BaseMethods_js_1.default.NamedFn;PhysicsMethods.Array=BaseMethods_js_1.default.Array;PhysicsMethods$1.default=PhysicsMethods;var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},SymbolMap_js_1$2=SymbolMap,PhysicsMethods_js_1=__importDefault$1(PhysicsMethods$1),TexConstants_js_1$2=TexConstants,ParseMethods_js_1=__importDefault$1(ParseMethods$1),MmlNode_js_1=MmlNode;new SymbolMap_js_1$2.CommandMap("Physics-automatic-bracing-macros",{quantity:"Quantity",qty:"Quantity",pqty:["Quantity","(",")",!0],bqty:["Quantity","[","]",!0],vqty:["Quantity","|","|",!0],Bqty:["Quantity","\\{","\\}",!0],absolutevalue:["Quantity","|","|",!0],abs:["Quantity","|","|",!0],norm:["Quantity","\\|","\\|",!0],evaluated:"Eval",eval:"Eval",order:["Quantity","(",")",!0,"O",TexConstants_js_1$2.TexConstant.Variant.CALLIGRAPHIC],commutator:"Commutator",comm:"Commutator",anticommutator:["Commutator","\\{","\\}"],acomm:["Commutator","\\{","\\}"],poissonbracket:["Commutator","\\{","\\}"],pb:["Commutator","\\{","\\}"]},PhysicsMethods_js_1.default);new SymbolMap_js_1$2.CharacterMap("Physics-vector-mo",ParseMethods_js_1.default.mathchar0mo,{dotproduct:["⋅",{mathvariant:TexConstants_js_1$2.TexConstant.Variant.BOLD}],vdot:["⋅",{mathvariant:TexConstants_js_1$2.TexConstant.Variant.BOLD}],crossproduct:"×",cross:"×",cp:"×",gradientnabla:["∇",{mathvariant:TexConstants_js_1$2.TexConstant.Variant.BOLD}]});new SymbolMap_js_1$2.CharacterMap("Physics-vector-mi",ParseMethods_js_1.default.mathchar0mi,{real:["ℜ",{mathvariant:TexConstants_js_1$2.TexConstant.Variant.NORMAL}],imaginary:["ℑ",{mathvariant:TexConstants_js_1$2.TexConstant.Variant.NORMAL}]});new SymbolMap_js_1$2.CommandMap("Physics-vector-macros",{vnabla:"Vnabla",vectorbold:"VectorBold",vb:"VectorBold",vectorarrow:["StarMacro",1,"\\vec{\\vb","{#1}}"],va:["StarMacro",1,"\\vec{\\vb","{#1}}"],vectorunit:["StarMacro",1,"\\hat{\\vb","{#1}}"],vu:["StarMacro",1,"\\hat{\\vb","{#1}}"],gradient:["OperatorApplication","\\vnabla","(","["],grad:["OperatorApplication","\\vnabla","(","["],divergence:["VectorOperator","\\vnabla\\vdot","(","["],div:["VectorOperator","\\vnabla\\vdot","(","["],curl:["VectorOperator","\\vnabla\\crossproduct","(","["],laplacian:["OperatorApplication","\\nabla^2","(","["]},PhysicsMethods_js_1.default);new SymbolMap_js_1$2.CommandMap("Physics-expressions-macros",{sin:"Expression",sinh:"Expression",arcsin:"Expression",asin:"Expression",cos:"Expression",cosh:"Expression",arccos:"Expression",acos:"Expression",tan:"Expression",tanh:"Expression",arctan:"Expression",atan:"Expression",csc:"Expression",csch:"Expression",arccsc:"Expression",acsc:"Expression",sec:"Expression",sech:"Expression",arcsec:"Expression",asec:"Expression",cot:"Expression",coth:"Expression",arccot:"Expression",acot:"Expression",exp:["Expression",!1],log:"Expression",ln:"Expression",det:["Expression",!1],Pr:["Expression",!1],tr:["Expression",!1],trace:["Expression",!1,"tr"],Tr:["Expression",!1],Trace:["Expression",!1,"Tr"],rank:"NamedFn",erf:["Expression",!1],Residue:["Macro","\\mathrm{Res}"],Res:["OperatorApplication","\\Residue","(","[","{"],principalvalue:["OperatorApplication","{\\cal P}"],pv:["OperatorApplication","{\\cal P}"],PV:["OperatorApplication","{\\rm P.V.}"],Re:["OperatorApplication","\\mathrm{Re}","{"],Im:["OperatorApplication","\\mathrm{Im}","{"],sine:["NamedFn","sin"],hypsine:["NamedFn","sinh"],arcsine:["NamedFn","arcsin"],asine:["NamedFn","asin"],cosine:["NamedFn","cos"],hypcosine:["NamedFn","cosh"],arccosine:["NamedFn","arccos"],acosine:["NamedFn","acos"],tangent:["NamedFn","tan"],hyptangent:["NamedFn","tanh"],arctangent:["NamedFn","arctan"],atangent:["NamedFn","atan"],cosecant:["NamedFn","csc"],hypcosecant:["NamedFn","csch"],arccosecant:["NamedFn","arccsc"],acosecant:["NamedFn","acsc"],secant:["NamedFn","sec"],hypsecant:["NamedFn","sech"],arcsecant:["NamedFn","arcsec"],asecant:["NamedFn","asec"],cotangent:["NamedFn","cot"],hypcotangent:["NamedFn","coth"],arccotangent:["NamedFn","arccot"],acotangent:["NamedFn","acot"],exponential:["NamedFn","exp"],logarithm:["NamedFn","log"],naturallogarithm:["NamedFn","ln"],determinant:["NamedFn","det"],Probability:["NamedFn","Pr"]},PhysicsMethods_js_1.default);new SymbolMap_js_1$2.CommandMap("Physics-quick-quad-macros",{qqtext:"Qqtext",qq:"Qqtext",qcomma:["Macro","\\qqtext*{,}"],qc:["Macro","\\qqtext*{,}"],qcc:["Qqtext","c.c."],qif:["Qqtext","if"],qthen:["Qqtext","then"],qelse:["Qqtext","else"],qotherwise:["Qqtext","otherwise"],qunless:["Qqtext","unless"],qgiven:["Qqtext","given"],qusing:["Qqtext","using"],qassume:["Qqtext","assume"],qsince:["Qqtext","since"],qlet:["Qqtext","let"],qfor:["Qqtext","for"],qall:["Qqtext","all"],qeven:["Qqtext","even"],qodd:["Qqtext","odd"],qinteger:["Qqtext","integer"],qand:["Qqtext","and"],qor:["Qqtext","or"],qas:["Qqtext","as"],qin:["Qqtext","in"]},PhysicsMethods_js_1.default);new SymbolMap_js_1$2.CommandMap("Physics-derivative-macros",{diffd:"DiffD",flatfrac:["Macro","\\left.#1\\middle/#2\\right.",2],differential:["Differential","\\diffd"],dd:["Differential","\\diffd"],variation:["Differential","\\delta"],var:["Differential","\\delta"],derivative:["Derivative",2,"\\diffd"],dv:["Derivative",2,"\\diffd"],partialderivative:["Derivative",3,"\\partial"],pderivative:["Derivative",3,"\\partial"],pdv:["Derivative",3,"\\partial"],functionalderivative:["Derivative",2,"\\delta"],fderivative:["Derivative",2,"\\delta"],fdv:["Derivative",2,"\\delta"]},PhysicsMethods_js_1.default);new SymbolMap_js_1$2.CommandMap("Physics-bra-ket-macros",{bra:"Bra",ket:"Ket",innerproduct:"BraKet",ip:"BraKet",braket:"BraKet",outerproduct:"KetBra",dyad:"KetBra",ketbra:"KetBra",op:"KetBra",expectationvalue:"Expectation",expval:"Expectation",ev:"Expectation",matrixelement:"MatrixElement",matrixel:"MatrixElement",mel:"MatrixElement"},PhysicsMethods_js_1.default);new SymbolMap_js_1$2.CommandMap("Physics-matrix-macros",{matrixquantity:"MatrixQuantity",mqty:"MatrixQuantity",pmqty:["Macro","\\mqty(#1)",1],Pmqty:["Macro","\\mqty*(#1)",1],bmqty:["Macro","\\mqty[#1]",1],vmqty:["Macro","\\mqty|#1|",1],smallmatrixquantity:["MatrixQuantity",!0],smqty:["MatrixQuantity",!0],spmqty:["Macro","\\smqty(#1)",1],sPmqty:["Macro","\\smqty*(#1)",1],sbmqty:["Macro","\\smqty[#1]",1],svmqty:["Macro","\\smqty|#1|",1],matrixdeterminant:["Macro","\\vmqty{#1}",1],mdet:["Macro","\\vmqty{#1}",1],smdet:["Macro","\\svmqty{#1}",1],identitymatrix:"IdentityMatrix",imat:"IdentityMatrix",xmatrix:"XMatrix",xmat:"XMatrix",zeromatrix:["Macro","\\xmat{0}{#1}{#2}",2],zmat:["Macro","\\xmat{0}{#1}{#2}",2],paulimatrix:"PauliMatrix",pmat:"PauliMatrix",diagonalmatrix:"DiagonalMatrix",dmat:"DiagonalMatrix",antidiagonalmatrix:["DiagonalMatrix",!0],admat:["DiagonalMatrix",!0]},PhysicsMethods_js_1.default);new SymbolMap_js_1$2.EnvironmentMap("Physics-aux-envs",ParseMethods_js_1.default.environment,{smallmatrix:["Array",null,null,null,"c","0.333em",".2em","S",1]},PhysicsMethods_js_1.default);new SymbolMap_js_1$2.MacroMap("Physics-characters",{"|":["AutoClose",MmlNode_js_1.TEXCLASS.ORD],")":"AutoClose","]":"AutoClose"},PhysicsMethods_js_1.default);var _a;Object.defineProperty(PhysicsConfiguration,"__esModule",{value:!0});PhysicsConfiguration.PhysicsConfiguration=void 0;var Configuration_js_1$3=Configuration,PhysicsItems_js_1=PhysicsItems;PhysicsConfiguration.PhysicsConfiguration=Configuration_js_1$3.Configuration.create("physics",{handler:{macro:["Physics-automatic-bracing-macros","Physics-vector-macros","Physics-vector-mo","Physics-vector-mi","Physics-derivative-macros","Physics-expressions-macros","Physics-quick-quad-macros","Physics-bra-ket-macros","Physics-matrix-macros"],character:["Physics-characters"],environment:["Physics-aux-envs"]},items:(_a={},_a[PhysicsItems_js_1.AutoOpen.prototype.kind]=PhysicsItems_js_1.AutoOpen,_a),options:{physics:{italicdiff:!1,arrowdel:!1}}});var SetOptionsConfiguration={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__values||function(u){var m=typeof Symbol=="function"&&Symbol.iterator,p=m&&u[m],_=0;if(p)return p.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&_>=u.length&&(u=void 0),{value:u&&u[_++],done:!u}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")},e=commonjsGlobal&&commonjsGlobal.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.SetOptionsConfiguration=t.SetOptionsUtil=void 0;var n=Configuration,i=SymbolMap,o=e(TexError$1),a=e(requireParseUtil()),s=_Symbol,l=e(BaseMethods$1),c=Options$1;t.SetOptionsUtil={filterPackage:function(u,m){if(m!=="tex"&&!n.ConfigurationHandler.get(m))throw new o.default("NotAPackage","Not a defined package: %1",m);var p=u.options.setoptions,_=p.allowOptions[m];if(_===void 0&&!p.allowPackageDefault||_===!1)throw new o.default("PackageNotSettable",`Options can't be set for package "%1"`,m);return!0},filterOption:function(u,m,p){var _,y=u.options.setoptions,g=y.allowOptions[m]||{},v=g.hasOwnProperty(p)&&!(0,c.isObject)(g[p])?g[p]:null;if(v===!1||v===null&&!y.allowOptionsDefault)throw new o.default("OptionNotSettable",'Option "%1" is not allowed to be set',p);if(!(!((_=m==="tex"?u.options:u.options[m])===null||_===void 0)&&_.hasOwnProperty(p)))throw m==="tex"?new o.default("InvalidTexOption",'Invalid TeX option "%1"',p):new o.default("InvalidOptionKey",'Invalid option "%1" for package "%2"',p,m);return!0},filterValue:function(u,m,p,_){return _}};var f=new i.CommandMap("setoptions",{setOptions:"SetOptions"},{SetOptions:function(u,m){var p,_,y=u.GetBrackets(m)||"tex",g=a.default.keyvalOptions(u.GetArgument(m)),v=u.options.setoptions;if(v.filterPackage(u,y))try{for(var x=r(Object.keys(g)),b=x.next();!b.done;b=x.next()){var S=b.value;v.filterOption(u,y,S)&&((y==="tex"?u.options:u.options[y])[S]=v.filterValue(u,y,S,g[S]))}}catch(M){p={error:M}}finally{try{b&&!b.done&&(_=x.return)&&_.call(x)}finally{if(p)throw p.error}}}});function d(u,m){var p=m.parseOptions.handlers.get("macro").lookup("require");p&&(f.add("Require",new s.Macro("Require",p._func)),f.add("require",new s.Macro("require",l.default.Macro,["\\Require{#2}\\setOptions[#2]{#1}",2,""])))}t.SetOptionsConfiguration=n.Configuration.create("setoptions",{handler:{macro:["setoptions"]},config:d,priority:3,options:{setoptions:{filterPackage:t.SetOptionsUtil.filterPackage,filterOption:t.SetOptionsUtil.filterOption,filterValue:t.SetOptionsUtil.filterValue,allowPackageDefault:!0,allowOptionsDefault:!0,allowOptions:(0,c.expandable)({tex:{FindTeX:!1,formatError:!1,package:!1,baseURL:!1,tags:!1,maxBuffer:!1,maxMaxros:!1,macros:!1,environments:!1},setoptions:!1,autoload:!1,require:!1,configmacros:!1,tagformat:!1})}}})})(SetOptionsConfiguration);var TagFormatConfiguration={},__extends$1=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e);function n(){this.constructor=r}r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(TagFormatConfiguration,"__esModule",{value:!0});TagFormatConfiguration.TagFormatConfiguration=TagFormatConfiguration.tagformatConfig=void 0;var Configuration_js_1$2=Configuration,Tags_js_1=Tags,tagID=0;function tagformatConfig(t,r){var e=r.parseOptions.options.tags;e!=="base"&&t.tags.hasOwnProperty(e)&&Tags_js_1.TagsFactory.add(e,t.tags[e]);var n=Tags_js_1.TagsFactory.create(r.parseOptions.options.tags).constructor,i=function(a){__extends$1(s,a);function s(){return a!==null&&a.apply(this,arguments)||this}return s.prototype.formatNumber=function(l){return r.parseOptions.options.tagformat.number(l)},s.prototype.formatTag=function(l){return r.parseOptions.options.tagformat.tag(l)},s.prototype.formatId=function(l){return r.parseOptions.options.tagformat.id(l)},s.prototype.formatUrl=function(l,c){return r.parseOptions.options.tagformat.url(l,c)},s}(n);tagID++;var o="configTags-"+tagID;Tags_js_1.TagsFactory.add(o,i),r.parseOptions.options.tags=o}TagFormatConfiguration.tagformatConfig=tagformatConfig;TagFormatConfiguration.TagFormatConfiguration=Configuration_js_1$2.Configuration.create("tagformat",{config:[tagformatConfig,10],options:{tagformat:{number:function(t){return t.toString()},tag:function(t){return"("+t+")"},id:function(t){return"mjx-eqn:"+t.replace(/\s/g,"_")},url:function(t,r){return r+"#"+encodeURIComponent(t)}}}});var TextcompConfiguration={},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},SymbolMap_js_1$1=SymbolMap,TexConstants_js_1$1=TexConstants,TextMacrosMethods_js_1=TextMacrosMethods,ParseUtil_js_1=__importDefault(requireParseUtil()),TextParser_js_1=TextParser$1;new SymbolMap_js_1$1.CommandMap("textcomp-macros",{textasciicircum:["Insert","^"],textasciitilde:["Insert","~"],textasteriskcentered:["Insert","*"],textbackslash:["Insert","\\"],textbar:["Insert","|"],textbraceleft:["Insert","{"],textbraceright:["Insert","}"],textbullet:["Insert","•"],textdagger:["Insert","†"],textdaggerdbl:["Insert","‡"],textellipsis:["Insert","…"],textemdash:["Insert","—"],textendash:["Insert","–"],textexclamdown:["Insert","¡"],textgreater:["Insert",">"],textless:["Insert","<"],textordfeminine:["Insert","ª"],textordmasculine:["Insert","º"],textparagraph:["Insert","¶"],textperiodcentered:["Insert","·"],textquestiondown:["Insert","¿"],textquotedblleft:["Insert","“"],textquotedblright:["Insert","”"],textquoteleft:["Insert","‘"],textquoteright:["Insert","’"],textsection:["Insert","§"],textunderscore:["Insert","_"],textvisiblespace:["Insert","␣"],textacutedbl:["Insert","˝"],textasciiacute:["Insert","´"],textasciibreve:["Insert","˘"],textasciicaron:["Insert","ˇ"],textasciidieresis:["Insert","¨"],textasciimacron:["Insert","¯"],textgravedbl:["Insert","˵"],texttildelow:["Insert","˷"],textbaht:["Insert","฿"],textcent:["Insert","¢"],textcolonmonetary:["Insert","₡"],textcurrency:["Insert","¤"],textdollar:["Insert","$"],textdong:["Insert","₫"],texteuro:["Insert","€"],textflorin:["Insert","ƒ"],textguarani:["Insert","₲"],textlira:["Insert","₤"],textnaira:["Insert","₦"],textpeso:["Insert","₱"],textsterling:["Insert","£"],textwon:["Insert","₩"],textyen:["Insert","¥"],textcircledP:["Insert","℗"],textcompwordmark:["Insert","‌"],textcopyleft:["Insert","🄯"],textcopyright:["Insert","©"],textregistered:["Insert","®"],textservicemark:["Insert","℠"],texttrademark:["Insert","™"],textbardbl:["Insert","‖"],textbigcircle:["Insert","◯"],textblank:["Insert","␢"],textbrokenbar:["Insert","¦"],textdiscount:["Insert","⁒"],textestimated:["Insert","℮"],textinterrobang:["Insert","‽"],textinterrobangdown:["Insert","⸘"],textmusicalnote:["Insert","♪"],textnumero:["Insert","№"],textopenbullet:["Insert","◦"],textpertenthousand:["Insert","‱"],textperthousand:["Insert","‰"],textrecipe:["Insert","℞"],textreferencemark:["Insert","※"],textlangle:["Insert","〈"],textrangle:["Insert","〉"],textlbrackdbl:["Insert","⟦"],textrbrackdbl:["Insert","⟧"],textlquill:["Insert","⁅"],textrquill:["Insert","⁆"],textcelsius:["Insert","℃"],textdegree:["Insert","°"],textdiv:["Insert","÷"],textdownarrow:["Insert","↓"],textfractionsolidus:["Insert","⁄"],textleftarrow:["Insert","←"],textlnot:["Insert","¬"],textmho:["Insert","℧"],textminus:["Insert","−"],textmu:["Insert","µ"],textohm:["Insert","Ω"],textonehalf:["Insert","½"],textonequarter:["Insert","¼"],textonesuperior:["Insert","¹"],textpm:["Insert","±"],textrightarrow:["Insert","→"],textsurd:["Insert","√"],textthreequarters:["Insert","¾"],textthreesuperior:["Insert","³"],texttimes:["Insert","×"],texttwosuperior:["Insert","²"],textuparrow:["Insert","↑"],textborn:["Insert","*"],textdied:["Insert","†"],textdivorced:["Insert","⚮"],textmarried:["Insert","⚭"],textcentoldstyle:["Insert","¢",TexConstants_js_1$1.TexConstant.Variant.OLDSTYLE],textdollaroldstyle:["Insert","$",TexConstants_js_1$1.TexConstant.Variant.OLDSTYLE],textzerooldstyle:["Insert","0",TexConstants_js_1$1.TexConstant.Variant.OLDSTYLE],textoneoldstyle:["Insert","1",TexConstants_js_1$1.TexConstant.Variant.OLDSTYLE],texttwooldstyle:["Insert","2",TexConstants_js_1$1.TexConstant.Variant.OLDSTYLE],textthreeoldstyle:["Insert","3",TexConstants_js_1$1.TexConstant.Variant.OLDSTYLE],textfouroldstyle:["Insert","4",TexConstants_js_1$1.TexConstant.Variant.OLDSTYLE],textfiveoldstyle:["Insert","5",TexConstants_js_1$1.TexConstant.Variant.OLDSTYLE],textsixoldstyle:["Insert","6",TexConstants_js_1$1.TexConstant.Variant.OLDSTYLE],textsevenoldstyle:["Insert","7",TexConstants_js_1$1.TexConstant.Variant.OLDSTYLE],texteightoldstyle:["Insert","8",TexConstants_js_1$1.TexConstant.Variant.OLDSTYLE],textnineoldstyle:["Insert","9",TexConstants_js_1$1.TexConstant.Variant.OLDSTYLE]},{Insert:function(t,r,e,n){if(t instanceof TextParser_js_1.TextParser){if(!n){TextMacrosMethods_js_1.TextMacrosMethods.Insert(t,r,e);return}t.saveText()}t.Push(ParseUtil_js_1.default.internalText(t,e,n?{mathvariant:n}:{}))}});Object.defineProperty(TextcompConfiguration,"__esModule",{value:!0});TextcompConfiguration.TextcompConfiguration=void 0;var Configuration_js_1$1=Configuration;TextcompConfiguration.TextcompConfiguration=Configuration_js_1$1.Configuration.create("textcomp",{handler:{macro:["textcomp-macros"]}});var UpgreekConfiguration={};Object.defineProperty(UpgreekConfiguration,"__esModule",{value:!0});UpgreekConfiguration.UpgreekConfiguration=void 0;var Configuration_js_1=Configuration,SymbolMap_js_1=SymbolMap,TexConstants_js_1=TexConstants;function mathchar0miNormal(t,r){var e=r.attributes||{};e.mathvariant=TexConstants_js_1.TexConstant.Variant.NORMAL;var n=t.create("token","mi",e,r.char);t.Push(n)}new SymbolMap_js_1.CharacterMap("upgreek",mathchar0miNormal,{upalpha:"α",upbeta:"β",upgamma:"γ",updelta:"δ",upepsilon:"ϵ",upzeta:"ζ",upeta:"η",uptheta:"θ",upiota:"ι",upkappa:"κ",uplambda:"λ",upmu:"μ",upnu:"ν",upxi:"ξ",upomicron:"ο",uppi:"π",uprho:"ρ",upsigma:"σ",uptau:"τ",upupsilon:"υ",upphi:"ϕ",upchi:"χ",uppsi:"ψ",upomega:"ω",upvarepsilon:"ε",upvartheta:"ϑ",upvarpi:"ϖ",upvarrho:"ϱ",upvarsigma:"ς",upvarphi:"φ",Upgamma:"Γ",Updelta:"Δ",Uptheta:"Θ",Uplambda:"Λ",Upxi:"Ξ",Uppi:"Π",Upsigma:"Σ",Upupsilon:"Υ",Upphi:"Φ",Uppsi:"Ψ",Upomega:"Ω"});UpgreekConfiguration.UpgreekConfiguration=Configuration_js_1.Configuration.create("upgreek",{handler:{macro:["upgreek"]}});var VerbConfiguration={};(function(t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(t,"__esModule",{value:!0}),t.VerbConfiguration=t.VerbMethods=void 0;var e=Configuration,n=TexConstants,i=SymbolMap,o=r(TexError$1);t.VerbMethods={},t.VerbMethods.Verb=function(a,s){var l=a.GetNext(),c=++a.i;if(l==="")throw new o.default("MissingArgFor","Missing argument for %1",s);for(;a.i<a.string.length&&a.string.charAt(a.i)!==l;)a.i++;if(a.i===a.string.length)throw new o.default("NoClosingDelim","Can't find closing delimiter for %1",a.currentCS);var f=a.string.slice(c,a.i).replace(/ /g," ");a.i++,a.Push(a.create("token","mtext",{mathvariant:n.TexConstant.Variant.MONOSPACE},f))},new i.CommandMap("verb",{verb:"Verb"},t.VerbMethods),t.VerbConfiguration=e.Configuration.create("verb",{handler:{macro:["verb"]}})})(VerbConfiguration);Object.defineProperty(AllPackages,"__esModule",{value:!0});AllPackages.AllPackages=void 0;requireMathtoolsConfiguration();typeof MathJax<"u"&&MathJax.loader&&MathJax.loader.preLoad("[tex]/action","[tex]/ams","[tex]/amscd","[tex]/bbox","[tex]/boldsymbol","[tex]/braket","[tex]/bussproofs","[tex]/cancel","[tex]/cases","[tex]/centernot","[tex]/color","[tex]/colorv2","[tex]/colortbl","[tex]/empheq","[tex]/enclose","[tex]/extpfeil","[tex]/gensymb","[tex]/html","[tex]/mathtools","[tex]/mhchem","[tex]/newcommand","[tex]/noerrors","[tex]/noundefined","[tex]/physics","[tex]/upgreek","[tex]/unicode","[tex]/verb","[tex]/configmacros","[tex]/tagformat","[tex]/textcomp","[tex]/textmacros","[tex]/setoptions");AllPackages.AllPackages=["base","action","ams","amscd","bbox","boldsymbol","braket","bussproofs","cancel","cases","centernot","color","colortbl","empheq","enclose","extpfeil","gensymb","html","mathtools","mhchem","newcommand","noerrors","noundefined","upgreek","unicode","verb","configmacros","tagformat","textcomp","textmacros"];Object.defineProperty(texToMml$1,"__esModule",{value:!0});texToMml$1.texToMml=void 0;const liteAdaptor_1=liteAdaptor$1,MathItem_1=MathItem,SerializedMmlVisitor_1=SerializedMmlVisitor,HTMLDocument_1=HTMLDocument$1,tex_1$1=tex,AllPackages_1=AllPackages,packages=AllPackages_1.AllPackages.filter(t=>t!=="bussproofs"),InputJax=new tex_1$1.TeX({packages}),html=new HTMLDocument_1.HTMLDocument("",(0,liteAdaptor_1.liteAdaptor)(),{InputJax}),visitor=new SerializedMmlVisitor_1.SerializedMmlVisitor,toMathML=t=>visitor.visitDefault(t,""),texToMml=t=>toMathML(html.convert(t,{display:!0,end:MathItem_1.STATE.CONVERT}));texToMml$1.texToMml=texToMml;var addLabel={};Object.defineProperty(addLabel,"__esModule",{value:!0});addLabel.addLabelForNonSemanticRoles=void 0;const roles=["button","checkbox","img","menuitemcheckbox","menuitemradio","meter","option","progressbar","radio","scrollbar","separator","slider","switch","tab","combobox"],nodeHasRoleIn=(t,r)=>r.some(e=>t.matches(`[role=${e}]`)),addLabelForNonSemanticRoles=(t,r,e)=>{let n=r;for(;n&&!nodeHasRoleIn(n,roles);)n=n.parentElement;n&&e().then(i=>{t.setAttribute("aria-label",i)})};addLabel.addLabelForNonSemanticRoles=addLabelForNonSemanticRoles;(function(t){var r=commonjsGlobal&&commonjsGlobal.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRuleEngine=t.texToSpeechAsync=t.mmlToSpeechAsync=t.locales=t.addLabelForNonSemanticRoles=void 0;const e=r(engine),n=system,i=variables,o=texToMml$1;var a=addLabel;Object.defineProperty(t,"addLabelForNonSemanticRoles",{enumerable:!0,get:function(){return a.addLabelForNonSemanticRoles}}),e.default.getInstance().delay=!0,t.locales=i.Variables.LOCALES;const s=(()=>{const d={};return async u=>(d[u]==null&&(d[u]=await(0,n.setupEngine)({domain:"mathspeak",style:"verbose",locale:t.locales.has(u)?u:"en"})),d[u])})(),l=async(d,u)=>(await s(u),(0,n.toSpeech)(d));t.mmlToSpeechAsync=l;const c=(d,u)=>(0,t.mmlToSpeechAsync)((0,o.texToMml)(d),u);t.texToSpeechAsync=c;class f{constructor(u){if(this.texToSpeech=m=>(0,n.toSpeech)((0,o.texToMml)(m)),typeof u>"u")throw new Error("Cannot be called directly")}static async setup(u){const m=await s(u);return new f(m)}}t.SpeechRuleEngine=f})(sre);Object.defineProperty(renderer,"__esModule",{value:!0});renderer.MathJaxRenderer=void 0;const chtml_1=chtml,assistive_mml_1=assistiveMml,html_1=html$1,browserAdaptor_1=browserAdaptor$1,mathjax_1=mathjax,tex_1=tex,preprocessing_1=preprocessing,postprocessing_1=postprocessing,general_purpose_1=generalPurpose,tex_input_config_1=texInputConfig,sre_1=sre;class MathJaxRenderer{constructor({fontURL:r,shouldFixUnicodeLayout:e,locale:n}){this.renderedAnything=!1,this.lastRenderingError=null,this.render=i=>{this.renderedAnything=!0;try{const{normalizedTex:o,normalizedTexWithMathjaxWorkarounds:a}=this.preprocessor.preprocessTex(i),s=this.getTexToChtmlConverter().convert(a,{display:!1}),l=(0,postprocessing_1.postprocessDom)(s);let c=this.lastRenderingError;l.outerHTML.includes('<mtext mathcolor="red">')&&(c=new Error("MathJax rendering error"));const f=()=>(0,sre_1.mmlToSpeechAsync)(l.getElementsByTagName("math")[0].outerHTML,this.locale);return{domElement:l,normalizedTex:o,error:c,getReadableText:f,addLabelWhenPresentational:u=>(0,sre_1.addLabelForNonSemanticRoles)(l,u,()=>f())}}catch(o){const a=(0,general_purpose_1.convertCaughtValueToError)(o);return{domElement:(0,general_purpose_1.createSpanWithRedText)(i),normalizedTex:i,getReadableText:()=>Promise.resolve(""),addLabelWhenPresentational:()=>{},error:a}}finally{this.lastRenderingError=null}},this.updateStyles=()=>{var i;const o=this.getStyleSheet();document.getElementById(chtml_1.CHTML.STYLESHEETID)==null&&((i=document.head)===null||i===void 0||i.appendChild(o))},this.getStyleSheet=()=>this.getChtmlOutputJax().styleSheet(this.getTexToChtmlConverter()),this.hasRenderedAnything=()=>this.renderedAnything,this.resetGlobalState=()=>{this.renderedAnything=!1,this.getChtmlOutputJax().clearCache()},this.getChtmlOutputJax=(0,general_purpose_1.lazy)(()=>new chtml_1.CHTML({fontURL:this.fontURL})),this.getTexToChtmlConverter=(0,general_purpose_1.lazy)(()=>{if(!windowGlobalExists())throw new Error("Can't render TeX without a DOM environment");return mathjax_1.mathjax.document("",{InputJax:this.getTexInputJax(),OutputJax:this.getChtmlOutputJax()})}),this.getTexInputJax=(0,general_purpose_1.lazy)(()=>new tex_1.TeX({...tex_input_config_1.texInputConfig,formatError:(i,o)=>(this.lastRenderingError=o,i.formatError(o))})),this.fontURL=r,this.preprocessor=new preprocessing_1.MathJaxPreprocessor({shouldFixUnicodeLayout:e}),this.locale=n}}renderer.MathJaxRenderer=MathJaxRenderer;windowGlobalExists()&&(0,assistive_mml_1.AssistiveMmlHandler)((0,html_1.RegisterHTMLHandler)((0,browserAdaptor_1.browserAdaptor)()));function windowGlobalExists(){return typeof window<"u"}(function(t){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,a,s,l){l===void 0&&(l=s);var c=Object.getOwnPropertyDescriptor(a,s);(!c||("get"in c?!a.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(o,l,c)}:function(o,a,s,l){l===void 0&&(l=s),o[l]=a[s]}),e=commonjsGlobal&&commonjsGlobal.__exportStar||function(o,a){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&r(a,o,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRuleEngine=t.texToSpeechAsync=t.selectableTextElement=t.swapSelectableElementForCopyableText=void 0,e(renderer,t);var n=addSelectableNode$1;Object.defineProperty(t,"swapSelectableElementForCopyableText",{enumerable:!0,get:function(){return n.swapSelectableElementForCopyableText}}),Object.defineProperty(t,"selectableTextElement",{enumerable:!0,get:function(){return n.selectableTextElement}});var i=sre;Object.defineProperty(t,"texToSpeechAsync",{enumerable:!0,get:function(){return i.texToSpeechAsync}}),Object.defineProperty(t,"SpeechRuleEngine",{enumerable:!0,get:function(){return i.SpeechRuleEngine}})})(dist);var mathquill_min={exports:{}};/**
 * @license
 * MathQuill v0.10.1, by Han, Jeanine, and Mary
 * http://mathquill.com | maintainers@mathquill.com
 *
 * This Source Code Form is subject to the terms of the
 * Mozilla Public License, v. 2.0. If a copy of the MPL
 * was not distributed with this file, You can obtain
 * one at http://mozilla.org/MPL/2.0/.
 */function noop(){}function walkUpAsFarAsPossible(t){for(;t;){if(!t.parent)return t;t=t.parent}}function pray(t,r,e){var n,i,o,a,s,l;if(!r){if(n=new Error("prayer failed: "+t),e){i={},n.dcgExtraErrorMetaData=i;for(o in e)a=e[o],s=i[o]={},a?(s.localLatex=a.latex(),(l=walkUpAsFarAsPossible(a))&&(s.rootLatex=l.latex())):s.emptyNode=!0}throw n}}function prayDirection(t){pray("a direction was passed",t===L||t===R)}function parseHTML(t){var r,e=document.implementation.createHTMLDocument("");if(e.body.innerHTML=t,e.body.children.length===1)return e.body.children[0];for(r=document.createDocumentFragment();e.body.firstChild;)r.appendChild(e.body.firstChild);return r}function closest(t,r){var e,n,i,o,a;if(typeof((e=t)===null||e===void 0?void 0:e.closest)=="function")return t.closest(r);if(!(t instanceof HTMLElement))return null;o=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,a=t;do{if(o.call(a,r))return a;a=(i=(n=a==null?void 0:a.parentElement)!==null&&n!==void 0?n:a==null?void 0:a.parentNode)!==null&&i!==void 0?i:null}while(a!==null&&a.nodeType===1);return null}function getBoundingClientRect(t){return t.getClientRects().length?t.getBoundingClientRect():{top:0,left:0,height:0,width:0,x:0,y:0,bottom:0,right:0}}function getScrollX(){return window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}function getScrollY(){return window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}function _insDirOf(t,r,e,n){r.insertBefore(e,t===L?n:n.nextSibling)}function _insAtDirEnd(t,r,e){t===L?e.insertBefore(r,e.firstChild):e.appendChild(r)}function eachNode(t,r){var e,n=t[L];if(n&&(e=t[R]))for(e=e[R];n!==e&&r(n)!==!1;n=n[R]);}function foldNodes(t,r,e){var n,i=t[L];if(!i||!(n=t[R]))return r;for(n=n[R];i!==n;i=i[R])r=e(r,i);return r}function prayWellFormed(t,r,e){pray("a parent is always present",t),pray("leftward is properly set up",function(){return r?r[R]===e&&r.parent===t:t.getEnd(L)===e}(),{parent:t,leftward:r,leftwardL:r&&r[L],leftwardR:r&&r[R],rightwardL:e&&e[L],rightwardR:e&&e[R]}),pray("rightward is properly set up",function(){return e?e[L]===r&&e.parent===t:t.getEnd(R)===r}(),{parent:t,rightward:e,leftwardL:r&&r[L],leftwardR:r&&r[R],rightwardL:e&&e[L],rightwardR:e&&e[R],rightwardParent:e&&e.parent})}function isMQNodeClass(t){return t&&t.prototype instanceof MQNode}function MathQuill(t){return insistOnInterVer(),MQ1||(MQ1=getInterface(1)),MQ1(t)}function getInterface(t){function r(d,u){var m,p,_;for(m in u)if(u.hasOwnProperty(m)){if(m==="substituteKeyboardEvents"&&n>=3)throw new Error(["As of interface version 3, the 'substituteKeyboardEvents'","option is no longer supported. Use 'overrideTypedText' and","'overrideKeystroke' instead."].join(" "));p=u[m],_=o[m],d[m]=_?_(p):p}}function e(d,u){function m(p,_){var y,g;return p&&p.nodeType?(y=f(p))instanceof u?y:(g=new Controller(new u.RootBlock,p,new a(n)),g.KIND_OF_MQ=d,new u(g).__mathquillify(_||{},n)):null}return pray(d+" is defined",u),m.prototype=u.prototype,m}var n,i,o,a,s,l,c,f;if(t!==1&&t!==2&&t!==3)throw"Only interface versions between "+MIN+" and "+MAX+" supported. You specified: "+t;if((n=t)<3){if(!(i=window.jQuery))throw"MathQuill interface version ".concat(n," requires jQuery 1.5.2+ to be loaded first");Options.prototype.jQuery=i}return o=__assign(__assign({},baseOptionProcessors),{handlers:function(d){return{fns:d||{},APIClasses:c}}}),a=n<3?Options:function(d){function u(){return d!==null&&d.apply(this,arguments)||this}return __extends(u,d),u}(Options),s=function(d){function u(m){var p=d.call(this)||this;return p.__controller=m,p.__options=m.options,p.id=m.id,p.data=m.data,p}return __extends(u,d),u.prototype.mathquillify=function(m){var p,_=this.__controller,y=_.root,g=_.container;_.createTextarea(),p=domFrag(g).addClass(m).children().detach(),y.setDOM(domFrag(h("span",{class:"mq-root-block","aria-hidden":!0})).appendTo(g).oneElement()),NodeBase.linkElementByBlockNode(y.domFrag().oneElement(),y),this.latex(p.text()),this.revert=function(){return _.removeMouseEventListener(),domFrag(g).removeClass("mq-editable-field mq-math-mode mq-text-mode").empty().append(p),n<3?this.__options.assertJquery()(g):g}},u.prototype.setAriaLabel=function(m){return this.__controller.setAriaLabel(m),this},u.prototype.getAriaLabel=function(){return this.__controller.getAriaLabel()},u.prototype.config=function(m){return r(this.__options,m),this},u.prototype.el=function(){return this.__controller.container},u.prototype.text=function(){return this.__controller.exportText()},u.prototype.mathspeak=function(){return this.__controller.exportMathSpeak()},u.prototype.latex=function(m){if(arguments.length>0){this.__controller.renderLatexMath(m);var p=this.__controller.cursor;return this.__controller.blurred&&p.hide().parent.blur(p),this}return this.__controller.exportLatex()},u.prototype.selection=function(){return this.__controller.exportLatexSelection()},u.prototype.html=function(){return this.__controller.root.domFrag().oneElement().innerHTML.replace(/ jQuery\d+="(?:\d+|null)"/g,"").replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?mq-cursor( mq-blink)?"?>.?<\/span>/i,"").replace(/ mq-hasCursor|mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},u.prototype.reflow=function(){return this.__controller.root.postOrder(function(m){m.reflow()}),this},u.prototype.cursor=function(){return this.__controller.cursor},u.prototype.controller=function(){return this.__controller},u.prototype.setAriaStringsOverrideMap=function(m){return this.__controller.setAriaStringsOverrideMap(m),this},u}(Progenote),l=function(d){function u(){var m=d!==null&&d.apply(this,arguments)||this;return m.setMathspeakOverride=function(p){return NodeBase.prototype.mathspeakOverride=p,m},m}return __extends(u,d),u.prototype.mathquillify=function(m){return d.prototype.mathquillify.call(this,m),this.__controller.editable=!0,this.__controller.addMouseEventListener(),this.__controller.editablesTextareaEvents(),this},u.prototype.focus=function(){return this.__controller.getTextareaOrThrow().focus(),this.__controller.scrollHoriz(),this},u.prototype.blur=function(){return this.__controller.getTextareaOrThrow().blur(),this},u.prototype.write=function(m){this.__controller.writeLatex(m),this.__controller.scrollHoriz();var p=this.__controller.cursor;return this.__controller.blurred&&p.hide().parent.blur(p),this},u.prototype.empty=function(){var m,p=this.__controller.root,_=this.__controller.cursor;return p.setEnds((m={},m[L]=0,m[R]=0,m)),p.domFrag().empty(),delete _.selection,_.insAtRightEnd(p),this},u.prototype.cmd=function(m){var p,_,y=this.__controller.notify(void 0),g=y.cursor;return/^\\[a-z]+$/i.test(m)&&!g.isTooDeep()?(m=m.slice(1),(p=LatexCmds[m])&&(_=p.constructor?new p(m):p(m),g.selection&&_.replaces(g.replaceSelection()),_.createLeftOf(g.show()))):g.parent.write(g,m),y.scrollHoriz(),y.blurred&&g.hide().parent.blur(g),this},u.prototype.select=function(){return this.__controller.selectAll(),this},u.prototype.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},u.prototype.moveToDirEnd=function(m){return this.__controller.notify("move").cursor.insAtDirEnd(m,this.__controller.root),this},u.prototype.moveToLeftEnd=function(){return this.moveToDirEnd(L)},u.prototype.moveToRightEnd=function(){return this.moveToDirEnd(R)},u.prototype.keystroke=function(m,p){var _,y=m.replace(/^\s+|\s+$/g,"").split(/\s+/);for(_=0;_<y.length;_+=1)this.__controller.keystroke(y[_],p);return this},u.prototype.typedText=function(m){for(var p=0;p<m.length;p+=1)this.__controller.typedText(m.charAt(p));return this},u.prototype.dropEmbedded=function(m,p,_){var y,g=m-getScrollX(),v=p-getScrollY(),x=document.elementFromPoint(g,v);this.__controller.seek(x,g,v),y=new EmbedNode().setOptions(_),y.createLeftOf(this.__controller.cursor)},u.prototype.setAriaPostLabel=function(m,p){return this.__controller.setAriaPostLabel(m,p),this},u.prototype.getAriaPostLabel=function(){return this.__controller.getAriaPostLabel()},u.prototype.clickAt=function(m,p,_){var y,g,v;return _=_||document.elementFromPoint(m,p),y=this.__controller,g=y.root,v=g.domFrag().oneElement(),v.contains(_)||(_=v),y.seek(_,m,p),y.blurred&&this.focus(),this},u.prototype.ignoreNextMousedown=function(m){return this.__controller.cursor.options.ignoreNextMousedown=m,this},u}(s),c={AbstractMathQuill:s,EditableField:l},pray("API.StaticMath defined",API.StaticMath),c.StaticMath=API.StaticMath(c),pray("API.MathField defined",API.MathField),c.MathField=API.MathField(c),pray("API.InnerMathField defined",API.InnerMathField),c.InnerMathField=API.InnerMathField(c),API.TextField&&(c.TextField=API.TextField(c)),f=function(d){var u,m,p,_,y,g,v,x;if(!d||!d.nodeType)return null;for(m=domFrag(d).children().toElementArray(),p=0,_=m;p<_.length;p++)if(y=_[p],y.classList.contains("mq-root-block")){u=y;break}return g=NodeBase.getNodeOfElement(u),v=g&&g.controller,x=v&&c[v.KIND_OF_MQ],v&&x?new x(v):null},f.L=L,f.R=R,f.config=function(d){return r(a.prototype,d),this},f.registerEmbed=function(d,u){if(!/^[a-z][a-z0-9]*$/i.test(d))throw"Embed name must start with letter and be only letters and digits";EMBEDS[d]=u},f.StaticMath=e("StaticMath",c.StaticMath),f.MathField=e("MathField",c.MathField),f.InnerMathField=e("InnerMathField",c.InnerMathField),c.TextField&&(f.TextField=e("TextField",c.TextField)),f.prototype=s.prototype,f.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"},f.EditableField.prototype=l.prototype,n<3&&(f.saneKeyboardEvents=defaultSubstituteKeyboardEvents),f}function RootBlockMixin(t){t.moveOutOf=function(r){pray("controller is defined",this.controller),this.controller.handle("moveOutOf",r)},t.deleteOutOf=function(r){pray("controller is defined",this.controller),this.controller.handle("deleteOutOf",r)},t.selectOutOf=function(r){pray("controller is defined",this.controller),this.controller.handle("selectOutOf",r)},t.upOutOf=function(){pray("controller is defined",this.controller),this.controller.handle("upOutOf")},t.downOutOf=function(){pray("controller is defined",this.controller),this.controller.handle("downOutOf")},t.reflow=function(){pray("controller is defined",this.controller),this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}function parseError(t,r){throw t=t?"'"+t+"'":"EOF","Parse Error: "+r+" at "+t}function defaultSubstituteKeyboardEvents(t,r){return saneKeyboardEvents(t[0],r)}function bindVanillaSymbol(t,r,e){return function(){return new VanillaSymbol(t,r?h.entityText(r):void 0,e)}}function bindBinaryOperator(t,r,e,n){return function(){return new BinaryOperator(t,r?h.entityText(r):void 0,e,n)}}function bindVariable(t,r,e){return function(){return new Variable(t,h.entityText(r))}}function defaultAutoOpNames(){var t,r,e,n,i={_maxLength:9},o="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" ");for(t=0;t<o.length;t+=1)BuiltInOpNames[o[t]]=i[o[t]]=1;for(r="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),t=0;t<r.length;t+=1)BuiltInOpNames[r[t]]=1;for(e="sin cos tan sec cosec csc cotan cot ctg".split(" "),t=0;t<e.length;t+=1)i[e[t]]=i["arc"+e[t]]=i[e[t]+"h"]=i["ar"+e[t]+"h"]=i["arc"+e[t]+"h"]=1;for(n="gcf hcf lcm proj span".split(" "),t=0;t<n.length;t+=1)i[n[t]]=1;return i}function isBinaryOperator(t){if(!t)return!1;var r=t[L];return r?!(r instanceof BinaryOperator||/^(\\ )|[,;:\(\[]$/.test(r.ctrlSeq)):!!(t.parent&&t.parent.parent&&t.parent.parent.isStyleBlock())&&isBinaryOperator(t.parent.parent)}function getCtrlSeqsFromBlock(t){if(!t)return"";var r="";return t.eachChild(function(e){e.ctrlSeq!==void 0&&(r+=e.ctrlSeq)}),r}function insLeftOfMeUnlessAtEnd(t){var r=this.parent,e=t;do{if(e[R])return t.insLeftOf(r);e=e.parent.parent}while(e!==r);t.insRightOf(r)}function getOppBracketSide(t){var r=t.side,e=t.sides[r];return{ch:OPP_BRACKS[e.ch],ctrlSeq:OPP_BRACKS[e.ctrlSeq]}}function bindCharBracketPair(t,r,e){var n,i;r=r||t,n=OPP_BRACKS[t],i=OPP_BRACKS[r],CharCmds[t]=function(){return new Bracket(L,t,n,r,i)},CharCmds[n]=function(){return new Bracket(R,t,n,r,i)},BRACKET_NAMES[t]=BRACKET_NAMES[n]=e}function TextBlockFuseChildren(t){var r,e,n;if(t.domFrag().oneElement().normalize(),r=t.domFrag().children(),!r.isEmpty())return e=r.oneText(),pray("only node in TextBlock span is Text node",e.nodeType===3),n=new TextPiece(e.data),n.setDOM(e),t.children().disown(),n.adopt(t,0,0),n}function makeTextBlock(t,r,e,n){return function(i){function o(){var a=i!==null&&i.apply(this,arguments)||this;return a.ctrlSeq=t,a.mathspeakTemplate=["Start"+r,"End"+r],a.ariaLabel=r,a}return __extends(o,i),o.prototype.html=function(){var a=h(e,n,[h.text(this.textContents())]);return this.setDOM(a),NodeBase.linkElementByCmdNode(a,this),a},o}(TextBlock)}var U_NO_BREAK_SPACE,U_ZERO_WIDTH_SPACE,U_DOT_ABOVE,U_NARY_SUMMATION,U_NARY_PRODUCT,U_NARY_COPRODUCT,U_INTEGRAL,animate,Aria,DOMFragment,domFrag,Point,NodeBase,Fragment,LatexCmds,CharCmds,Anticursor,Cursor,MQSelection,ControllerBase,API,EMBEDS,baseOptionProcessors,Options,Progenote,insistOnInterVer,MQ1,MIN,MAX,Parser,EveryTick,saneKeyboardEvents,Controller_exportText,Controller_focusBlur,INCREMENTAL_SELECTION_OPEN,MQNode,Controller_keystroke,latexMathParser,Controller_latex,ignoreNextMouseDownNoop,cancelSelectionOnEdit,Controller_mouse,Controller_scrollHoriz,Controller,MathElement,DOMView,MathCommand,MQSymbol,VanillaSymbol,BinaryOperator,MathBlock,RootMathBlock,DigitGroupingChar,Digit,Variable,Letter,BuiltInOpNames,TwoWordOpNames,OperatorName,fn,NonSymbolaSymbol,LatexFragment,PlusMinus,MinusNode,To,Inequality,less,greater,Greater,Equality,Sim,Approx,SVG_SYMBOLS,Style,intRgx,SupSub,SubscriptCommand,SummationNotation,Fraction,LiveFraction,AnsBuilder,PercentOfBuilder,Token,SquareRoot,NthRoot,DiacriticAbove,DelimsNode,Bracket,OPP_BRACKS,BRACKET_NAMES,leftBinomialSymbol,rightBinomialSymbol,Binomial,MathFieldNode,EmbedNode,TextBlock,TextPiece,RootMathCommand,RootTextBlock,__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])})(r,e)};return function(r,e){function n(){this.constructor=r}if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");t(r,e),r.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),__assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(t){var r,e,n,i;for(e=1,n=arguments.length;e<n;e++){r=arguments[e];for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},__assign.apply(this,arguments)},L=-1,R=1,min=Math.min,max=Math.max,h=function(t,r,e){var n,i,o,a;switch(t){case"svg":case"path":n=document.createElementNS("http://www.w3.org/2000/svg",t);break;default:n=document.createElement(t)}for(i in r)(o=r[i])!==void 0&&n.setAttribute(i,typeof o=="string"?o:String(o));if(e)for(a=0;a<e.length;a++)n.appendChild(e[a]);return n};h.text=function(t){return document.createTextNode(t)},h.block=function(t,r,e){var n=h(t,r,[e.html()]);return e.setDOM(n),NodeBase.linkElementByBlockNode(n,e),n},h.entityText=function(t){var r=parseHTML(t);return pray("entity parses to a single text node",r instanceof DocumentFragment&&r.childNodes.length===1&&r.childNodes[0]instanceof Text),r.childNodes[0]},U_NO_BREAK_SPACE=" ",U_ZERO_WIDTH_SPACE="​",U_DOT_ABOVE="˙",U_NARY_SUMMATION="∑",U_NARY_PRODUCT="∏",U_NARY_COPRODUCT="∐",U_INTEGRAL="∫",animate=function(){var t,r;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(t=requestAnimationFrame,r=cancelAnimationFrame):(t=function(e){return window.setTimeout(e,13)},r=clearTimeout),function(e,n){function i(){var f=(Date.now()-l)/e;f<=c?a():c=f,n(c,a,o)}function o(){s!==void 0&&r(s),s=void 0}function a(){o(),s=t(i)}var s,l=Date.now(),c=0;n(e<=0?1:0,a,o)}}(),Aria=function(){function t(r){this.span=h("span",{class:"mq-aria-alert","aria-live":"assertive","aria-atomic":"true"}),this.msg="",this.items=[],this.controller=r}return t.prototype.attach=function(){var r=this.controller.container;this.span.parentNode!==r&&domFrag(r).prepend(domFrag(this.span))},t.prototype.queue=function(r,e){return e===void 0&&(e=!1),this.items.push(this.processQueueItems(r,e)),this},t.prototype.processQueueItems=function(r,e){var n,i;return e===void 0&&(e=!1),n=Array.isArray(r)?r:[r],i=n.map(function(o){if(o instanceof MQNode){var a=o.mathspeak({ignoreShorthand:!0});if(e){if(o.parent&&o.parent.ariaLabel&&o.ariaLabel==="block")return o.parent.ariaLabel+" "+a;if(o.ariaLabel)return o.ariaLabel+" "+a}return a}return o||""}),i.join(" ")},t.prototype.queueDirOf=function(r,e,n){n===void 0&&(n=!1),prayDirection(r);var i=r===L?"before":"after";return this.queueDir(i,e,n)},t.prototype.queueDirEndOf=function(r,e,n){n===void 0&&(n=!1),prayDirection(r);var i=r===L?"beginning of":"end of";return this.queueDir(i,e,n)},t.prototype.queueDir=function(r,e,n){var i;return n===void 0&&(n=!1),!((i=this.controller.ariaStringsOverrideMap)===null||i===void 0)&&i[r]?this.queue(this.controller.ariaStringsOverrideMap[r](this.processQueueItems(e,n))):this.queue(r).queue(e,n)},t.prototype.queueSelected=function(r,e){return e===void 0&&(e=!1),this.controller.ariaStringsOverrideMap&&this.controller.ariaStringsOverrideMap.selected?this.queue(this.controller.ariaStringsOverrideMap.selected(this.processQueueItems(r,e)),e):this.queue(r,e).queue(" selected")},t.prototype.queueTranslatableString=function(r){var e,n=(e=this.controller.ariaStringsOverrideMap)===null||e===void 0?void 0:e[r];return n&&typeof n=="string"?this.queue(n):this.queue(r)},t.prototype.alert=function(r){return this.attach(),r&&this.queue(r),this.items.length&&(this.msg=this.items.join(" ").replace(/ +(?= )/g,"").trim(),this.controller.containerHasFocus()&&(this.controller.options.logAriaAlerts&&this.msg&&console.log(this.msg),this.span.textContent=this.msg)),this.clear()},t.prototype.clear=function(){return this.items.length=0,this},t}(),DOMFragment=function(){function t(r,e){var n;arguments.length===1&&(e=r),r&&e&&(this.ends=(n={},n[L]=r,n[R]=e,n))}return t.create=function(r,e){arguments.length===1&&(e=r),pray("No half-empty DOMFragments",!!r==!!e);var n=new t(r,e);return pray("last is a forward sibling of first",n.isValid()),n},t.prototype.isEmpty=function(){return this.ends===void 0},t.prototype.isOneNode=function(){return!(!this.ends||this.ends[L]!==this.ends[R])},t.prototype.isValid=function(){if(!this.ends||this.ends[L]===this.ends[R])return!0;var r;return this.eachNode(function(e){return r=e}),r===this.ends[R]},t.prototype.firstNode=function(){return pray("Fragment is not empty",this.ends),this.ends[L]},t.prototype.lastNode=function(){return pray("Fragment is not empty",this.ends),this.ends[R]},t.prototype.children=function(){var r=this.oneNode(),e=r.firstChild,n=r.lastChild;return e&&n?new t(e,n):new t},t.prototype.join=function(r){var e,n;if(!this.ends)return r;if(!r.ends)return this;for(e=!1,n=this.ends[R].nextSibling;n;){if(n===r.ends[L]){e=!0;break}n=n.nextSibling}return pray("sibling must be a forward DOM sibling of this fragment",e),new t(this.ends[L],r.ends[R])},t.prototype.oneNode=function(){return pray("Fragment has a single node",this.ends&&this.ends[L]===this.ends[R]),this.ends[L]},t.prototype.oneElement=function(){var r=this.oneNode();return pray("Node is an Element",r.nodeType===Node.ELEMENT_NODE),r},t.prototype.oneText=function(){var r=this.oneNode();return pray("Node is Text",r.nodeType===Node.TEXT_NODE),r},t.prototype.eachNode=function(r){var e,n,i;if(!this.ends)return this;for(e=this.ends[R],n=this.ends[L],i=void 0;n&&(i=n.nextSibling,r(n),n!==e);n=i);return this},t.prototype.eachElement=function(r){return this.eachNode(function(e){e.nodeType===Node.ELEMENT_NODE&&r(e)}),this},t.prototype.text=function(){var r="";return this.eachNode(function(e){r+=e.textContent||""}),r},t.prototype.toNodeArray=function(){var r=[];return this.eachNode(function(e){return r.push(e)}),r},t.prototype.toElementArray=function(){var r=[];return this.eachElement(function(e){return r.push(e)}),r},t.prototype.toDocumentFragment=function(){var r=document.createDocumentFragment();return this.eachNode(function(e){return r.appendChild(e)}),r},t.prototype.insertBefore=function(r){return this.insDirOf(L,r)},t.prototype.insertAfter=function(r){return this.insDirOf(R,r)},t.prototype.append=function(r){return r.appendTo(this.oneElement()),this},t.prototype.prepend=function(r){return r.prependTo(this.oneElement()),this},t.prototype.appendTo=function(r){return this.insAtDirEnd(R,r)},t.prototype.prependTo=function(r){return this.insAtDirEnd(L,r)},t.prototype.parent=function(){if(!this.ends)return this;var r=this.ends[L].parentNode;return r?new t(r):new t},t.prototype.wrapAll=function(r){var e,n;return r.textContent="",this.ends?(e=this.ends[L].parentNode,n=this.ends[R].nextSibling,this.appendTo(r),e&&e.insertBefore(r,n),this):this},t.prototype.replaceWith=function(r){var e,n,i=(e=this.ends)===null||e===void 0?void 0:e[R],o=i==null?void 0:i.parentNode,a=i==null?void 0:i.nextSibling;return this.detach(),n=r.toDocumentFragment(),i&&o?(o.insertBefore(n,a||null),this):this},t.prototype.nthElement=function(r){if(this.ends&&!(r<0||r!==Math.floor(r)))for(var e=this.ends[L];e;){if(e.nodeType===Node.ELEMENT_NODE){if(r<=0)return e;r-=1}if(e===this.ends[R])return;e=e.nextSibling}},t.prototype.firstElement=function(){return this.nthElement(0)},t.prototype.lastElement=function(){if(this.ends)for(var r=this.ends[R];r;){if(r.nodeType===Node.ELEMENT_NODE)return r;if(r===this.ends[L])return;r=r.previousSibling}},t.prototype.first=function(){return new t(this.firstElement())},t.prototype.last=function(){return new t(this.lastElement())},t.prototype.eq=function(r){return new t(this.nthElement(r))},t.prototype.slice=function(r){if(!this.ends)return this;var e=this.nthElement(r);return e?new t(e,this.ends[R]):new t},t.prototype.next=function(){for(var r=this.oneNode();r;)if((r=r.nextSibling)&&r.nodeType===Node.ELEMENT_NODE)return new t(r);return new t},t.prototype.prev=function(){for(var r=this.oneNode();r;)if((r=r.previousSibling)&&r.nodeType===Node.ELEMENT_NODE)return new t(r);return new t},t.prototype.empty=function(){return this.eachElement(function(r){r.textContent=""}),this},t.prototype.remove=function(){return this.toDocumentFragment(),this},t.prototype.detach=function(){return this.remove()},t.prototype.insDirOf=function(r,e){var n,i;return this.ends?(i=(n=e.ends)===null||n===void 0?void 0:n[r])&&i.parentNode?(_insDirOf(r,i.parentNode,this.toDocumentFragment(),i),this):this.detach():this},t.prototype.insAtDirEnd=function(r,e){return this.ends?(_insAtDirEnd(r,this.toDocumentFragment(),e),this):this},t.prototype.hasClass=function(r){var e=!1;return this.eachElement(function(n){n.classList.contains(r)&&(e=!0)}),e},t.prototype.addClass=function(r){var e,n,i,o=function(s){if(!s)return"continue";a.eachElement(function(l){l.classList.add(s)})},a=this;for(e=0,n=r.split(/\s+/);e<n.length;e++)i=n[e],o(i);return this},t.prototype.removeClass=function(r){var e,n,i,o=function(s){if(!s)return"continue";a.eachElement(function(l){l.classList.remove(s)})},a=this;for(e=0,n=r.split(/\s+/);e<n.length;e++)i=n[e],o(i);return this},t.prototype.toggleClass=function(r,e){var n,i,o,a,s;if(e===!0)return this.addClass(r);if(e===!1)return this.removeClass(r);for(n=function(l){if(!l)return"continue";i.eachElement(function(c){c.classList.toggle(l)})},i=this,o=0,a=r.split(/\s+/);o<a.length;o++)s=a[o],n(s);return this},t}(),domFrag=DOMFragment.create,Point=function(){function t(r,e,n){this.init(r,e,n)}return t.prototype.init=function(r,e,n){this.parent=r,this[L]=e,this[R]=n},t.copy=function(r){return new t(r.parent,r[L],r[R])},t}(),NodeBase=function(){function t(){var n;this[r]=0,this[e]=0,this.parent=0,this.ends=(n={},n[L]=0,n[R]=0,n),this.id=t.uniqueNodeId()}t.uniqueNodeId=function(){return t.idCounter+=1},t.getNodeOfElement=function(n){if(n){if(!n.nodeType)throw new Error("must pass an Element to NodeBase.getNodeOfElement");var i=n;return i.mqBlockNode||i.mqCmdNode}},t.linkElementByBlockNode=function(n,i){n.mqBlockNode=i},t.linkElementByCmdNode=function(n,i){n.mqCmdNode=i},t.prototype.setEnds=function(n){this.ends=n,pray("No half-empty node ends",!!this.ends[L]==!!this.ends[R])},t.prototype.getEnd=function(n){return this.ends[n]},t.prototype.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},t.prototype.setDOM=function(n){return n&&pray("DOM is an element or a text node",n.nodeType===Node.ELEMENT_NODE||n.nodeType===Node.TEXT_NODE),this._el=n,this},t.prototype.domFrag=function(){return domFrag(this._el)},t.prototype.createDir=function(n,i){prayDirection(n);var o=this;return o.html(),o.domFrag().insDirOf(n,i.domFrag()),i[n]=o.adopt(i.parent,i[L],i[R]),o},t.prototype.createLeftOf=function(n){this.createDir(L,n)},t.prototype.selectChildren=function(n,i){return new MQSelection(n,i)},t.prototype.bubble=function(n){var i,o=this.getSelfNode();for(i=o;i&&n(i)!==!1;i=i.parent);return this},t.prototype.postOrder=function(n){var i=this.getSelfNode();return function o(a){return!!a&&(a.eachChild(o),n(a),!0)}(i),i},t.prototype.isEmpty=function(){return this.ends[L]===0&&this.ends[R]===0},t.prototype.isQuietEmptyDelimiter=function(n){if(!this.isEmpty()||!n||!this.parent||this.parent.ctrlSeq===void 0)return!1;var i=this.parent.ctrlSeq.replace(/^\\(left|right)?/,"");return n.hasOwnProperty(i)},t.prototype.isStyleBlock=function(){return!1},t.prototype.isTextBlock=function(){return!1},t.prototype.children=function(){return new Fragment(this.getEnd(L),this.getEnd(R))},t.prototype.eachChild=function(n){return eachNode(this.ends,n),this},t.prototype.foldChildren=function(n,i){return foldNodes(this.ends,n,i)},t.prototype.withDirAdopt=function(n,i,o,a){var s=this.getSelfNode();return new Fragment(s,s).withDirAdopt(n,i,o,a),this},t.prototype.adopt=function(n,i,o){var a=this.getSelfNode();return new Fragment(a,a).adopt(n,i,o),this.getSelfNode()},t.prototype.disown=function(){var n=this.getSelfNode();return new Fragment(n,n).disown(),this},t.prototype.remove=function(){return this.domFrag().remove(),this.disown()},t.prototype.shouldIgnoreSubstitutionInSimpleSubscript=function(n){return!!n.disableAutoSubstitutionInSubscripts&&!!this.parent&&this.parent.parent instanceof SupSub&&!!this.parent.domFrag().hasClass("mq-sub")},t.prototype.getSelfNode=function(){return this},t.prototype.parser=function(){pray("Abstract parser() method is never called",!1)},t.prototype.html=function(){throw new Error("html() unimplemented in NodeBase")},t.prototype.text=function(){return""},t.prototype.latex=function(){var n={latex:"",startIndex:-1,endIndex:-1};return this.latexRecursive(n),n.latex},t.prototype.latexRecursive=function(n){},t.prototype.checkCursorContextOpen=function(n){n.startSelectionBefore===this&&(n.startIndex=n.latex.length),n.endSelectionBefore===this&&(n.endIndex=n.latex.length)},t.prototype.checkCursorContextClose=function(n){n.startSelectionAfter===this&&(n.startIndex=n.latex.length),n.endSelectionAfter===this&&(n.endIndex=n.latex.length)},t.prototype.finalizeTree=function(n,i){},t.prototype.contactWeld=function(n,i){},t.prototype.blur=function(n){},t.prototype.focus=function(){},t.prototype.intentionalBlur=function(){},t.prototype.reflow=function(){},t.prototype.registerInnerField=function(n,i){},t.prototype.chToCmd=function(n,i){pray("Abstract chToCmd() method is never called",!1)},t.prototype.mathspeak=function(n){return this.mathspeakOverride?this.mathspeakOverride(this.latex()):""},t.prototype.seek=function(n,i){},t.prototype.siblingDeleted=function(n,i){},t.prototype.siblingCreated=function(n,i){},t.prototype.finalizeInsert=function(n,i){},t.prototype.fixDigitGrouping=function(n){},t.prototype.writeLatex=function(n,i){},t.prototype.write=function(n,i){};var r,e;return r=L,e=R,t.idCounter=0,t}(),Fragment=function(){function t(r,e,n){var i,o,a,s;if(this.disowned=!1,n===void 0&&(n=L),prayDirection(n),pray("no half-empty fragments",!r==!e,{withDir:r,oppDir:e}),!r||!e)return void this.setEnds((i={},i[L]=0,i[R]=0,i));pray("withDir is passed to Fragment",r instanceof MQNode),pray("oppDir is passed to Fragment",e instanceof MQNode),pray("withDir and oppDir have the same parent",r.parent===e.parent),o={},o[n]=r,o[-n]=e,a=o,this.setEnds(a),s=0,this.each(function(l){s=l}),pray("following direction siblings from start reaches end",s===a[R])}return t.prototype.getDOMFragFromEnds=function(){var r=this.ends[L],e=this.ends[R];return r===0||e===0?domFrag():r===e?r.domFrag():r.domFrag().join(e.domFrag())},t.prototype.setEnds=function(r){this.ends=r},t.prototype.getEnd=function(r){return this.ends?this.ends[r]:0},t.prototype.domFrag=function(){return this.getDOMFragFromEnds()},t.prototype.withDirAdopt=function(r,e,n,i){return r===L?this.adopt(e,n,i):this.adopt(e,i,n)},t.prototype.adopt=function(r,e,n){var i,o,a,s,l;return prayWellFormed(r,e,n),o=this,this.disowned=!1,(a=o.ends[L])&&(s=o.ends[R])?(i={},i[L]=r.getEnd(L),i[R]=r.getEnd(R),l=i,e||(l[L]=a),n?n[L]=s:l[R]=s,r.setEnds(l),s[R]=n,o.each(function(c){return c[L]=e,c.parent=r,e&&(e[R]=c),e=c,!0}),o):this},t.prototype.disown=function(){var r,e,n,i,o,a,s=this,l=s.ends[L];return!l||s.disowned?s:(this.disowned=!0,(e=s.ends[R])&&(n=l.parent,prayWellFormed(n,l[L],l),prayWellFormed(n,e,e[R]),r={},r[L]=n.getEnd(L),r[R]=n.getEnd(R),i=r,l[L]?(o=l[L],o[R]=e[R]):i[L]=e[R],e[R]?(a=e[R],a[L]=l[L]):i[R]=l[L],i[L]&&i[R]?n.setEnds(i):n.ends=i),s)},t.prototype.remove=function(){return this.domFrag().remove(),this.disown()},t.prototype.each=function(r){return eachNode(this.ends,r),this},t.prototype.fold=function(r,e){return foldNodes(this.ends,r,e)},t}(),LatexCmds={},CharCmds={},Anticursor=function(t){function r(e,n,i){var o=t.call(this,e,n,i)||this;return o.ancestors={},o}return __extends(r,t),r.fromCursor=function(e){return new r(e.parent,e[L],e[R])},r}(Point),Cursor=function(t){function r(e,n,i){var o=t.call(this,e,0,0)||this;return o.upDownCache={},o.cursorElement=h("span",{class:"mq-cursor"},[h.text(U_ZERO_WIDTH_SPACE)]),o._domFrag=domFrag(),o.controller=i,o.options=n,o.setDOMFrag(domFrag(o.cursorElement)),o.blink=function(){domFrag(o.cursorElement).toggleClass("mq-blink")},o}return __extends(r,t),r.prototype.setDOMFrag=function(e){return this._domFrag=e,this},r.prototype.domFrag=function(){return this._domFrag},r.prototype.show=function(){var e,n;return domFrag(this.cursorElement).removeClass("mq-blink"),this.setDOMFrag(domFrag(this.cursorElement)),this.intervalId?clearInterval(this.intervalId):(e=this[R],e?(n=this.selection,n&&n.getEnd(L)[L]===this[L]?this.domFrag().insertBefore(n.domFrag()):this.domFrag().insertBefore(e.domFrag())):this.domFrag().appendTo(this.parent.domFrag().oneElement()),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},r.prototype.hide=function(){return this.intervalId&&clearInterval(this.intervalId),this.intervalId=0,this.domFrag().detach(),this.setDOMFrag(domFrag()),this},r.prototype.withDirInsertAt=function(e,n,i,o){var a=this.parent;this.parent=n,this[e]=i,this[-e]=o,a!==n&&a.blur&&a.blur(this)},r.prototype.insDirOf=function(e,n){return prayDirection(e),this.domFrag().insDirOf(e,n.domFrag()),this.withDirInsertAt(e,n.parent,n[e],n),this.parent.domFrag().addClass("mq-hasCursor"),this},r.prototype.insLeftOf=function(e){return this.insDirOf(L,e)},r.prototype.insRightOf=function(e){return this.insDirOf(R,e)},r.prototype.insAtDirEnd=function(e,n){return prayDirection(e),this.domFrag().insAtDirEnd(e,n.domFrag().oneElement()),this.withDirInsertAt(e,n,0,n.getEnd(e)),n.focus(),this},r.prototype.insAtLeftEnd=function(e){return this.insAtDirEnd(L,e)},r.prototype.insAtRightEnd=function(e){return this.insAtDirEnd(R,e)},r.prototype.jumpUpDown=function(e,n){var i,o,a,s=this;s.upDownCache[e.id]=Point.copy(s),i=s.upDownCache[n.id],i?(o=i[R],o?s.insLeftOf(o):s.insAtRightEnd(i.parent)):(a=s.getBoundingClientRectWithoutMargin().left,n.seek(a,s)),s.controller.aria.queue(n,!0)},r.prototype.getBoundingClientRectWithoutMargin=function(){var e,n,i,o=this.domFrag();return o.removeClass("mq-cursor"),e=getBoundingClientRect(o.oneElement()),n=e.left,i=e.right,o.addClass("mq-cursor"),{left:n,right:i}},r.prototype.unwrapGramp=function(){var e,n,i,o,a,s=this.parent.parent,l=s.parent,c=s[R],f=this,d=s[L];if(s.disown().eachChild(function(u){return!!u.isEmpty()||(u.children().adopt(l,d,c).each(function(m){return m.domFrag().insertBefore(s.domFrag()),!0}),d=u.getEnd(R),!0)}),!this[R])if(e=this[L])this[R]=e[R];else for(;!this[R];){if(!(n=this.parent[R])){this[R]=s[R],this.parent=l;break}this.parent=n,this[R]=n.getEnd(L)}i=this[R],i?this.insLeftOf(i):this.insAtRightEnd(l),s.domFrag().remove(),o=s[L],a=s[R],o&&o.siblingDeleted(f.options,R),a&&a.siblingDeleted(f.options,L)},r.prototype.startSelection=function(){var e,n=this.anticursor=Anticursor.fromCursor(this),i=n.ancestors;for(e=n;e.parent;e=e.parent)i[e.parent.id]=e},r.prototype.endSelection=function(){delete this.anticursor},r.prototype.select=function(){var e,n,i,o,a,s,l,c,f,d=this.anticursor;if(this[L]===d[L]&&this.parent===d.parent)return!1;for(n=this;n.parent;n=n.parent)if(n.parent.id in d.ancestors){e=n.parent;break}if(pray("cursor and anticursor in the same tree",e),i=e,o=d.ancestors[i.id],l=R,n[L]!==o){for(c=n;c;c=c[R])if(c[R]===o[R]){l=L,a=n,s=o;break}}return l===R&&(a=o,s=n),a instanceof Point&&(a=a[R]),s instanceof Point&&(s=s[L]),this.hide().selection=i.selectChildren(a,s),f=this.selection.getEnd(l),this.insDirOf(l,f),this.selectionChanged(),!0},r.prototype.resetToEnd=function(e){this.clearSelection();var n=e.root;this[R]=0,this[L]=n.getEnd(R),this.parent=n},r.prototype.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},r.prototype.deleteSelection=function(){var e=this.selection;e&&(this[L]=e.getEnd(L)[L],this[R]=e.getEnd(R)[R],e.remove(),this.selectionChanged(),delete this.selection)},r.prototype.replaceSelection=function(){var e=this.selection;return e&&(this[L]=e.getEnd(L)[L],this[R]=e.getEnd(R)[R],delete this.selection),e},r.prototype.depth=function(){for(var e=this,n=0;e=e.parent;)n+=e instanceof MathBlock?1:0;return n},r.prototype.isTooDeep=function(e){return this.options.maxDepth!==void 0&&this.depth()+(e||0)>this.options.maxDepth},r.prototype.selectionChanged=function(){},r}(Point),MQSelection=function(t){function r(e,n,i){var o=t.call(this,e,n,i)||this;return o._el=h("span",{class:"mq-selection"}),o.getDOMFragFromEnds().wrapAll(o._el),o}return __extends(r,t),r.prototype.isCleared=function(){return this._el===void 0},r.prototype.domFrag=function(){return this.isCleared()?this.getDOMFragFromEnds():domFrag(this._el)},r.prototype.setEnds=function(e){pray("Selection ends are never empty",e[L]&&e[R]),this.ends=e},r.prototype.getEnd=function(e){return this.ends[e]},r.prototype.adopt=function(e,n,i){return this.clear(),t.prototype.adopt.call(this,e,n,i)},r.prototype.clear=function(){var e=this.getDOMFragFromEnds();return this.domFrag().replaceWith(e),this._el=void 0,this},r.prototype.join=function(e,n){return n===void 0&&(n=""),this.fold("",function(i,o){return i+n+o[e]()})},r}(Fragment),ControllerBase=function(){function t(r,e,n){this.textareaEventListeners={},this.id=r.id,this.data={},this.root=r,this.container=e,this.options=n,this.aria=new Aria(this.getControllerSelf()),this.ariaLabel="Math Input",this.ariaPostLabel="",this.mathSpeakCallback=void 0,r.controller=this.getControllerSelf(),this.cursor=r.cursor=new Cursor(r,n,this.getControllerSelf())}return t.prototype.getControllerSelf=function(){return this},t.prototype.handle=function(r,e){var n,i,o,a=this.options.handlers,s=(n=this.options.handlers)===null||n===void 0?void 0:n.fns[r];s&&(i=a==null?void 0:a.APIClasses[this.KIND_OF_MQ],pray("APIClass is defined",i),o=new i(this),e===L||e===R?s(e,o):s(o))},t.onNotify=function(r){t.notifyees.push(r)},t.prototype.notify=function(r){for(var e=0;e<t.notifyees.length;e+=1)t.notifyees[e](this.cursor,r);return this},t.prototype.setAriaLabel=function(r){var e=this.getAriaLabel();return r&&typeof r=="string"&&r!==""?this.ariaLabel=r:this.editable?this.ariaLabel="Math Input":this.ariaLabel="",this.ariaLabel===e||this.containerHasFocus()||this.updateMathspeak(),this},t.prototype.getAriaLabel=function(){return this.ariaLabel!=="Math Input"?this.ariaLabel:this.editable?"Math Input":""},t.prototype.setAriaPostLabel=function(r,e){var n=this;return r&&typeof r=="string"&&r!==""?(r!==this.ariaPostLabel&&typeof e=="number"&&(this._ariaAlertTimeout&&clearTimeout(this._ariaAlertTimeout),this._ariaAlertTimeout=window.setTimeout(function(){n.containerHasFocus()?n.aria.alert(n.root.mathspeak().trim()+" "+r.trim()):n.updateMathspeak()},e)),this.ariaPostLabel=r):(this._ariaAlertTimeout&&clearTimeout(this._ariaAlertTimeout),this.ariaPostLabel=""),this},t.prototype.getAriaPostLabel=function(){return this.ariaPostLabel||""},t.prototype.containerHasFocus=function(){return document.activeElement&&this.container.contains(document.activeElement)},t.prototype.getTextareaOrThrow=function(){var r=this.textarea;if(!r)throw new Error("expected a textarea");return r},t.prototype.getTextareaSpanOrThrow=function(){var r=this.textareaSpan;if(!r)throw new Error("expected a textareaSpan");return r},t.prototype.addTextareaEventListeners=function(r){var e,n;if(this.textarea)for(e in r)n=e,this.removeTextareaEventListener(n),this.textarea.addEventListener(n,r[n])},t.prototype.removeTextareaEventListener=function(r){if(this.textarea){var e=this.textareaEventListeners[r];e&&this.textarea.removeEventListener(r,e)}},t.prototype.exportMathSpeak=function(){return this.root.mathspeak()},t.prototype.setAriaStringsOverrideMap=function(r){return this.ariaStringsOverrideMap=r,this},t.prototype.updateMathspeak=function(){},t.prototype.scrollHoriz=function(){},t.prototype.selectionChanged=function(){},t.prototype.setOverflowClasses=function(){},t.notifyees=[],t}(),API={},EMBEDS={},baseOptionProcessors={},Options=function(){function t(r){this.version=r}return t.prototype.assertJquery=function(){return pray("Interface versions > 2 do not depend on JQuery",this.version<=2),pray("JQuery is set for interface v < 3",this.jQuery),this.jQuery},t}(),Progenote=function(){function t(){}return t}(),insistOnInterVer=function(){window.console&&console.warn(`You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (2014–2015) → v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)},MathQuill.prototype=Progenote.prototype,MathQuill.VERSION="v0.10.1",MathQuill.interfaceVersion=function(t){if(t!==1)throw"Only interface version 1 supported. You specified: "+t;return insistOnInterVer=function(){window.console&&console.warn(`You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:

    MathQuill = MathQuill.getInterface(1);
    // now MathQuill.MathField() works like it used to

See also the "\`dev\` branch (2014–2015) → v0.10.0 Migration Guide" at
  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide`)},insistOnInterVer(),MathQuill},MathQuill.getInterface=getInterface,MIN=getInterface.MIN=1,MAX=getInterface.MAX=3,Parser=function(){function t(r){this._=r}return t.prototype.parse=function(r){function e(n,i){return i}return this.skip(t.eof)._(""+r,e,parseError)},t.prototype.or=function(r){pray("or is passed a parser",r instanceof t);var e=this;return new t(function(n,i,o){function a(s){return r._(n,i,o)}return e._(n,i,a)})},t.prototype.then=function(r){var e=this;return new t(function(n,i,o){function a(s,l){var c=r instanceof t?r:r(l);return pray("a parser is returned",c instanceof t),c._(s,i,o)}return e._(n,a,o)})},t.prototype.many=function(){var r=this;return new t(function(e,n,i){function o(l,c){return e=l,s.push(c),!0}function a(){return!1}for(var s=[];r._(e,o,a););return n(e,s)})},t.prototype.times=function(r,e){arguments.length<2&&(e=r);var n=this;return new t(function(i,o,a){function s(p,_){return u.push(_),i=p,!0}function l(p,_){return f=_,i=p,!1}function c(p,_){return!1}var f,d,u=[],m=!0;for(d=0;d<r;d+=1)if(!(m=!!n._(i,s,l)))return a(i,f);for(;d<e&&m;d+=1)n._(i,s,c);return o(i,u)})},t.prototype.result=function(r){return this.then(t.succeed(r))},t.prototype.atMost=function(r){return this.times(0,r)},t.prototype.atLeast=function(r){var e=this;return e.times(r).then(function(n){return e.many().map(function(i){return n.concat(i)})})},t.prototype.map=function(r){return this.then(function(e){return t.succeed(r(e))})},t.prototype.skip=function(r){return this.then(function(e){return r.result(e)})},t.string=function(r){var e=r.length,n="expected '"+r+"'";return new t(function(i,o,a){var s=i.slice(0,e);return s===r?o(i.slice(e),s):a(i,n)})},t.regex=function(r){pray("regexp parser is anchored",r.toString().charAt(1)==="^");var e="expected "+r;return new t(function(n,i,o){var a,s=r.exec(n);return s?(a=s[0],i(n.slice(a.length),a)):o(n,e)})},t.succeed=function(r){return new t(function(e,n){return n(e,r)})},t.fail=function(r){return new t(function(e,n,i){return i(e,r)})},t.letter=t.regex(/^[a-z]/i),t.letters=t.regex(/^[a-z]*/i),t.digit=t.regex(/^[0-9]/),t.digits=t.regex(/^[0-9]*/),t.whitespace=t.regex(/^\s+/),t.optWhitespace=t.regex(/^\s*/),t.any=new t(function(r,e,n){return r?e(r.slice(1),r.charAt(0)):n(r,"expected any character")}),t.all=new t(function(r,e,n){return e("",r)}),t.eof=new t(function(r,e,n){return r?n(r,"expected EOF"):e(r,r)}),t}(),EveryTick=function(){function t(){this.fn=noop}return t.prototype.listen=function(r){this.fn=r,clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(this.fn)},t.prototype.listenOnce=function(r){var e=this;this.listen(function(){var n,i=[];for(n=0;n<arguments.length;n++)i[n]=arguments[n];e.clearListener(),r.apply(void 0,i)})},t.prototype.clearListener=function(){this.fn=noop,clearTimeout(this.timeoutId)},t.prototype.trigger=function(){var r,e=[];for(r=0;r<arguments.length;r++)e[r]=arguments[r];this.fn.apply(this,e)},t}(),saneKeyboardEvents=function(){function t(a){switch(e(a)){case"Right":case"Left":case"Down":case"Up":return!0}return!1}function r(a){return a.length===1&&a>="a"&&a<="z"}function e(a){var s,l;return a.key===void 0?(l=a.which||a.keyCode,i[l]||String.fromCharCode(l)):r(a.key)?a.key.toUpperCase():(s=o[a.key])!==null&&s!==void 0?s:a.key}function n(a){var s=e(a),l=[];return a.ctrlKey&&l.push("Ctrl"),a.metaKey&&l.push("Meta"),a.altKey&&l.push("Alt"),a.shiftKey&&l.push("Shift"),l.length?(s!=="Alt"&&s!=="Control"&&s!=="Meta"&&s!=="Shift"&&l.push(s),l.join("-")):s}var i={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"},o={ArrowRight:"Right",ArrowLeft:"Left",ArrowDown:"Down",ArrowUp:"Up",Delete:"Del",Escape:"Esc"," ":"Spacebar"};return function(a,s){function l(){try{a instanceof HTMLTextAreaElement&&a.select()}catch{}}function c(A){M.trigger(),M.clearListener(),a instanceof HTMLTextAreaElement&&(a.value=A),A&&l(),C=!!A}function f(){return"selectionStart"in a&&a instanceof HTMLTextAreaElement&&a.selectionStart!==a.selectionEnd}function d(){s.options&&s.options.overrideKeystroke?s.options.overrideKeystroke(n(b),b):s.keystroke(n(b),b)}function u(A){M.trigger(A),A.target===a&&(b=A,S=null,C&&M.listenOnce(function(E){E&&E.type==="focusout"||l()}),d())}function m(A){M.trigger(A),A.target===a&&(b&&S&&d(),S=A,t(A)?M.listenOnce(y):M.listen(_))}function p(A){M.trigger(A),A.target===a&&b&&!S&&(t(A)?M.listenOnce(y):M.listen(_))}function _(){if(!f()&&a instanceof HTMLTextAreaElement){var A=a.value;(!b||b.altKey||!b.ctrlKey||b.metaKey||!b.shiftKey||b.key!=="U"&&b.key!=="Unidentified"&&b.key!=="Process")&&(A.length===1?(a.value="",s.options&&s.options.overrideTypedText?s.options.overrideTypedText(A):s.typedText(A)):y())}}function y(){a instanceof HTMLTextAreaElement&&a.value.length>1&&l()}function g(){b=null,S=null,M.clearListener(),a instanceof HTMLTextAreaElement&&(a.value="")}function v(A){M.trigger(),A.target===a&&(document.activeElement!==a&&a.focus(),M.listen(function(){if(a instanceof HTMLTextAreaElement){var E=a.value;a.value="",E&&s.paste(E)}}))}function x(A){M.trigger(A)}var b=null,S=null,M=new EveryTick,C=!1;return s.options&&s.options.disableCopyPaste?s.addTextareaEventListeners({keydown:u,keypress:m,keyup:p,focusout:g,copy:function(A){A.preventDefault()},cut:function(A){A.preventDefault()},paste:function(A){M.trigger(),A.preventDefault()},input:x}):s.addTextareaEventListeners({keydown:u,keypress:m,keyup:p,focusout:g,cut:function(){M.listenOnce(function(){s.cut()})},copy:function(){M.listenOnce(function(){s.copy()})},paste:v,input:x}),{select:c}}}(),Controller_exportText=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.exportText=function(){return this.root.foldChildren("",function(e,n){return e+n.text()})},r}(ControllerBase),ControllerBase.onNotify(function(t,r){if(r==="edit"||r==="replace"||r===void 0){var e=t.controller;if(!e||!e.options.enableDigitGrouping||e.blurred!==!1)return;e.disableGroupingForSeconds(1)}}),Controller_focusBlur=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.handleTextareaFocusEditable=function(){var n=e.cursor;e.updateMathspeak(),e.blurred=!1,clearTimeout(e.blurTimeout),domFrag(e.container).addClass("mq-focused"),n.parent||n.insAtRightEnd(e.root),n.selection?(n.selection.domFrag().removeClass("mq-blur"),e.selectionChanged()):n.show(),e.setOverflowClasses()},e.handleTextareaBlurEditable=function(){e.textareaSelectionTimeout&&(clearTimeout(e.textareaSelectionTimeout),e.textareaSelectionTimeout=0),e.disableGroupingForSeconds(0),e.blurred=!0,e.blurTimeout=window.setTimeout(function(){e.root.postOrder(function(n){n.intentionalBlur()}),e.cursor.clearSelection().endSelection(),e.blur(),e.updateMathspeak(),e.scrollHoriz()}),window.addEventListener("blur",e.handleWindowBlur)},e.handleTextareaFocusStatic=function(){e.blurred=!1},e.handleTextareaBlurStatic=function(){e.cursor.selection&&e.cursor.selection.clear(),window.setTimeout(function(){domFrag(e.getTextareaSpanOrThrow()).detach(),e.blurred=!0})},e.handleWindowBlur=function(){clearTimeout(e.blurTimeout),e.cursor.selection&&e.cursor.selection.domFrag().addClass("mq-blur"),e.blur(),e.updateMathspeak()},e}return __extends(r,t),r.prototype.disableGroupingForSeconds=function(e){var n=this;clearTimeout(this.__disableGroupingTimeout),e===0?this.root.domFrag().removeClass("mq-suppress-grouping"):(this.root.domFrag().addClass("mq-suppress-grouping"),this.__disableGroupingTimeout=window.setTimeout(function(){n.root.domFrag().removeClass("mq-suppress-grouping")},1e3*e))},r.prototype.blur=function(){this.cursor.hide().parent.blur(this.cursor),domFrag(this.container).removeClass("mq-focused"),window.removeEventListener("blur",this.handleWindowBlur),this.options&&this.options.resetCursorOnBlur&&this.cursor.resetToEnd(this)},r.prototype.addEditableFocusBlurListeners=function(){var e=this,n=e.cursor;this.addTextareaEventListeners({focus:this.handleTextareaFocusEditable,blur:this.handleTextareaBlurEditable}),e.blurred=!0,n.hide().parent.blur(n)},r.prototype.addStaticFocusBlurListeners=function(){this.addTextareaEventListeners({focus:this.handleTextareaFocusStatic,blur:this.handleTextareaBlurStatic})},r}(Controller_exportText),INCREMENTAL_SELECTION_OPEN=!1,MQNode=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.keystroke=function(e,n,i){var o=i.cursor;switch(e){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":i.ctrlDeleteDir(L);break;case"Shift-Backspace":case"Backspace":i.backspace();break;case"Esc":case"Tab":return void i.escapeDir(R,e,n);case"Shift-Tab":case"Shift-Esc":return void i.escapeDir(L,e,n);case"End":i.notify("move").cursor.insAtRightEnd(o.parent),i.aria.queueDirEndOf(R,o.parent,!0);break;case"Ctrl-End":i.notify("move").cursor.insAtRightEnd(i.root),i.aria.queueDirEndOf(R,[i.ariaLabel,i.root,i.ariaPostLabel]);break;case"Shift-End":i.selectToBlockEndInDir(R);break;case"Ctrl-Shift-End":i.selectToRootEndInDir(R);break;case"Home":i.notify("move").cursor.insAtLeftEnd(o.parent),i.aria.queueDirEndOf(L,o.parent,!0);break;case"Ctrl-Home":i.notify("move").cursor.insAtLeftEnd(i.root),i.aria.queueDirEndOf(L,[i.ariaLabel,i.root,i.ariaPostLabel]);break;case"Shift-Home":i.selectToBlockEndInDir(L);break;case"Ctrl-Shift-Home":i.selectToRootEndInDir(L);break;case"Left":i.moveLeft();break;case"Shift-Left":i.selectLeft();break;case"Ctrl-Left":break;case"Right":i.moveRight();break;case"Shift-Right":i.selectRight();break;case"Ctrl-Right":break;case"Up":i.moveUp();break;case"Down":i.moveDown();break;case"Shift-Up":i.withIncrementalSelection(function(a){if(o[L])for(;o[L];)a(L);else a(L)});break;case"Shift-Down":i.withIncrementalSelection(function(a){if(o[R])for(;o[R];)a(R);else a(R)});break;case"Ctrl-Up":case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":i.ctrlDeleteDir(R);break;case"Shift-Del":case"Del":i.deleteForward();break;case"Meta-A":case"Ctrl-A":i.selectAll();break;case"Ctrl-Alt-Up":o.parent.parent&&o.parent.parent instanceof r?i.aria.queue(o.parent.parent):i.aria.queueTranslatableString("nothing above");break;case"Ctrl-Alt-Down":o.parent&&o.parent instanceof r?i.aria.queue(o.parent):i.aria.queueTranslatableString("block is empty");break;case"Ctrl-Alt-Left":o.parent.parent&&o.parent.parent.getEnd(L)?i.aria.queue(o.parent.parent.getEnd(L)):i.aria.queueTranslatableString("nothing to the left");break;case"Ctrl-Alt-Right":o.parent.parent&&o.parent.parent.getEnd(R)?i.aria.queue(o.parent.parent.getEnd(R)):i.aria.queueTranslatableString("nothing to the right");break;case"Ctrl-Alt-Shift-Down":o.selection?i.aria.queueSelected(o.selection.join("mathspeak"," ").trim()):i.aria.queueTranslatableString("nothing selected");break;case"Ctrl-Alt-=":case"Ctrl-Alt-Shift-Right":i.ariaPostLabel.length?i.aria.queue(i.ariaPostLabel):i.aria.queueTranslatableString("no answer");break;default:return}i.aria.alert(),n==null||n.preventDefault(),i.scrollHoriz()},r.prototype.moveOutOf=function(e,n,i){pray("overridden or never called on this node",!1)},r.prototype.moveTowards=function(e,n,i){pray("overridden or never called on this node",!1)},r.prototype.deleteOutOf=function(e,n){pray("overridden or never called on this node",!1)},r.prototype.deleteTowards=function(e,n){pray("overridden or never called on this node",!1)},r.prototype.unselectInto=function(e,n){pray("overridden or never called on this node",!1)},r.prototype.selectOutOf=function(e,n){pray("overridden or never called on this node",!1)},r.prototype.selectTowards=function(e,n){pray("overridden or never called on this node",!1)},r}(NodeBase),ControllerBase.onNotify(function(t,r){r!=="move"&&r!=="upDown"||t.show().clearSelection()}),baseOptionProcessors.leftRightIntoCmdGoes=function(t){if(t&&t!=="up"&&t!=="down")throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+t+'"';return t},ControllerBase.onNotify(function(t,r){r!=="upDown"&&(t.upDownCache={})}),ControllerBase.onNotify(function(t,r){r==="edit"&&t.show().deleteSelection()}),ControllerBase.onNotify(function(t,r){r!=="select"&&t.endSelection()}),Controller_keystroke=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.keystroke=function(e,n){this.cursor.parent.keystroke(e,n,this.getControllerSelf())},r.prototype.escapeDir=function(e,n,i){prayDirection(e);var o=this.cursor;if(o.parent!==this.root&&(i==null||i.preventDefault()),o.parent!==this.root)return o.clearSelection(),o.parent.moveOutOf(e,o),o.controller.aria.alert(),this.notify("move")},r.prototype.moveDir=function(e){var n,i,o;return prayDirection(e),n=this.cursor,i=n.options.leftRightIntoCmdGoes,o=n[e],n.selection?n.insDirOf(e,n.selection.getEnd(e)):o?o.moveTowards(e,n,i):n.parent.moveOutOf(e,n,i),this.notify("move")},r.prototype.moveLeft=function(){return this.moveDir(L)},r.prototype.moveRight=function(){return this.moveDir(R)},r.prototype.moveUp=function(){return this.moveUpDown("up")},r.prototype.moveDown=function(){return this.moveUpDown("down")},r.prototype.moveUpDown=function(e){var n,i,o,a,s,l,c=this,f=c.notify("upDown").cursor;return e==="up"?(n="upInto",i="upOutOf"):(n="downInto",i="downOutOf"),o=f[L],a=f[R],s=a&&a[n],l=o&&o[n],s?f.insAtLeftEnd(s):l?f.insAtRightEnd(l):f.parent.bubble(function(d){var u=d[i];if(u&&(typeof u=="function"&&(u=u.call(d,f)),u instanceof MQNode&&f.jumpUpDown(d,u),u!==!0))return!1}),c},r.prototype.deleteDir=function(e){var n,i,o,a,s,l,c,f,d,u;return prayDirection(e),n=this.cursor,i=n[e],o=n.parent.parent,a=n.controller,i&&i instanceof MQNode?i.sides?a.aria.queue(i.parent.chToCmd(i.sides[-e].ch).mathspeak({createdLeftOf:n})):i.blocks||i.parent.ctrlSeq==="\\text"||a.aria.queue(i):o&&o instanceof MQNode&&(o.sides?a.aria.queue(o.parent.chToCmd(o.sides[e].ch).mathspeak({createdLeftOf:n})):o.blocks&&o.mathspeakTemplate?o.upInto&&o.downInto?a.aria.queue(o.mathspeakTemplate[1]):(s=o.mathspeakTemplate,l=e===L?s[0]:s[s.length-1],a.aria.queue(l)):a.aria.queue(o)),c=n.selection,this.notify("edit"),c||(f=n[e],f?f.deleteTowards(e,n):n.parent.deleteOutOf(e,n)),d=n[L],u=n[R],d.siblingDeleted&&d.siblingDeleted(n.options,R),u.siblingDeleted&&u.siblingDeleted(n.options,L),n.parent.bubble(function(m){m.reflow()}),this},r.prototype.ctrlDeleteDir=function(e){var n,i,o,a;return prayDirection(e),n=this.cursor,!n[e]||n.selection?this.deleteDir(e):(this.notify("edit"),i=e===L?new Fragment(n.parent.getEnd(L),n[L]):new Fragment(n[R],n.parent.getEnd(R)),n.controller.aria.queue(i),i.remove(),n.insAtDirEnd(e,n.parent),o=n[L],a=n[R],o&&o.siblingDeleted(n.options,R),a&&a.siblingDeleted(n.options,L),n.parent.bubble(function(s){s.reflow()}),this)},r.prototype.backspace=function(){return this.deleteDir(L)},r.prototype.deleteForward=function(){return this.deleteDir(R)},r.prototype.startIncrementalSelection=function(){pray("Multiple selections can't be simultaneously open",!INCREMENTAL_SELECTION_OPEN),INCREMENTAL_SELECTION_OPEN=!0,this.notify("select");var e=this.cursor;e.anticursor||e.startSelection()},r.prototype.selectDirIncremental=function(e){var n,i,o;pray("A selection is open",INCREMENTAL_SELECTION_OPEN),INCREMENTAL_SELECTION_OPEN=!0,n=this.cursor,i=n.selection,prayDirection(e),o=n[e],o?i&&i.getEnd(e)===o&&n.anticursor[-e]!==o?o.unselectInto(e,n):o.selectTowards(e,n):n.parent.selectOutOf(e,n)},r.prototype.finishIncrementalSelection=function(){var e,n;pray("A selection is open",INCREMENTAL_SELECTION_OPEN),e=this.cursor,e.clearSelection(),e.select()||e.show(),n=e.selection,n&&e.controller.aria.clear().queueSelected(n.join("mathspeak"," ").trim()),INCREMENTAL_SELECTION_OPEN=!1},r.prototype.withIncrementalSelection=function(e){var n=this;try{this.startIncrementalSelection();try{e(function(i){return n.selectDirIncremental(i)})}finally{this.finishIncrementalSelection()}}finally{INCREMENTAL_SELECTION_OPEN=!1}},r.prototype.selectDir=function(e){this.withIncrementalSelection(function(n){return n(e)})},r.prototype.selectLeft=function(){return this.selectDir(L)},r.prototype.selectRight=function(){return this.selectDir(R)},r.prototype.selectAll=function(){this.notify("move");var e=this.cursor;e.insAtRightEnd(this.root),this.withIncrementalSelection(function(n){for(;e[L];)n(L)})},r.prototype.selectToBlockEndInDir=function(e){var n=this.cursor;this.withIncrementalSelection(function(i){for(;n[e];)i(e)})},r.prototype.selectToRootEndInDir=function(e){var n=this,i=this.cursor;this.withIncrementalSelection(function(o){for(;i[e]||i.parent!==n.root;)o(e)})},r}(Controller_focusBlur),function(t){function r(e){return t.call(this)||this}return __extends(r,t),r}(MQNode),latexMathParser=function(){function t(b){var S=new MathBlock;return b.adopt(S,0,0),S}function r(b){var S,M=b[0]||new MathBlock;for(S=1;S<b.length;S+=1)b[S].children().adopt(M,M.getEnd(R),0);return M}var e=Parser.string,n=Parser.regex,i=Parser.letter,o=Parser.digit,a=Parser.any,s=Parser.optWhitespace,l=Parser.succeed,c=Parser.fail,f=i.map(function(b){return new Letter(b)}),d=o.map(function(b){return new Digit(b)}),u=n(/^[^${}\\_^]/).map(function(b){return new VanillaSymbol(b)}),m=n(/^[^\\a-eg-zA-Z]/).or(e("\\").then(n(/^[a-z]+/i).or(n(/^\s+/).result(" ")).or(a))).then(function(b){var S,M,C=LatexCmds[b];return C?C.constructor?(S=C,new S(b).parser()):(M=C,M(b).parser()):c("unknown command: \\"+b)}),p=m.or(f).or(d).or(u),_=e("{").then(function(){return g}).skip(e("}")),y=s.then(_.or(p.map(t))),g=y.many().map(r).skip(s),v=e("[").then(y.then(function(b){return b.join("latex")!=="]"?l(b):c("")}).many().map(r).skip(s)).skip(e("]")),x=g;return x.block=y,x.optBlock=v,x}(),baseOptionProcessors.maxDepth=function(t){return typeof t=="number"?t:void 0},Controller_latex=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.cleanLatex=function(e){return e.replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},r.prototype.exportLatex=function(){return this.cleanLatex(this.root.latex())},r.prototype.writeLatex=function(e){var n=this.notify("edit").cursor;return n.parent.writeLatex(n,e),this},r.prototype.exportLatexSelection=function(){var e,n,i,o,a,s,l,c,f,d,u={latex:"",startIndex:-1,endIndex:-1},m=this.cursor.selection;for(m?(u.startSelectionBefore=m.getEnd(L),u.endSelectionAfter=m.getEnd(R)):(i=this.cursor[L],i?u.startSelectionAfter=i:u.startSelectionBefore=this.cursor.parent,o=this.cursor[R],o?u.endSelectionBefore=o:u.endSelectionAfter=this.cursor.parent),(n=(e=this.root).latexRecursive)===null||n===void 0||n.call(e,u),a=u.latex,s=this.cleanLatex(a),l=u.startIndex,c=u.endIndex,f=0,d=0;d<u.endIndex;d++)a[d]!==s[f]?(d<u.startIndex&&(l-=1),c-=1):f+=1;return{latex:s,startIndex:l,endIndex:c}},r.prototype.classifyLatexForEfficientUpdate=function(e){if(typeof e=="string"){var n=e.match(/-?[0-9.]+$/g);return n&&n.length===1?{latex:e,prefix:e.substr(0,e.length-n[0].length),digits:n[0]}:void 0}},r.prototype.updateLatexMathEfficiently=function(e,n){var i,o,a,s,l,c,f,d,u,m,p,_,y,g,v,x,b,S,M,C,A,E,$,D,B,F=this.root,I=this.classifyLatexForEfficientUpdate(e);if(!I||!(l=this.classifyLatexForEfficientUpdate(n))||l.prefix!==I.prefix)return!1;for(c=l.digits,f=I.digits,d=!1,u=!1,c[0]==="-"&&(d=!0,c=c.substr(1)),f[0]==="-"&&(u=!0,f=f.substr(1)),m=this.root.getEnd(R),p=[],_=c.length-1;_>=0;_--){if(!m||m.ctrlSeq!==c[_]||m.parent!==F)return!1;p.unshift(m),m=m[L]}if(d&&!u){if(!(y=m)||y.ctrlSeq!=="-"||y[R]!==p[0]||y.parent!==F||(g=y[L])&&g.parent!==F)return!1;p[0][L]=y[L],F.getEnd(L)===y&&F.setEnds((i={},i[L]=p[0],i[R]=F.getEnd(R),i)),g&&(g[R]=p[0]),y.domFrag().remove()}for(!d&&u&&(v=new PlusMinus("-"),x=document.createElement("span"),x.textContent="-",v.setDOM(x),b=p[0][L],b&&(b[R]=v),F.getEnd(L)===p[0]&&F.setEnds((o={},o[L]=v,o[R]=F.getEnd(R),o)),v.parent=F,v[L]=p[0][L],v[R]=p[0],p[0][L]=v,v.contactWeld(this.cursor),v.domFrag().insertBefore(p[0].domFrag())),S=Math.min(c.length,f.length),_=0;_<S;_++)M=f[_],m=p[_],m.ctrlSeq!==M&&(m.ctrlSeq=M,m.domFrag().oneElement().textContent=M,m.mathspeakName=M);if(c.length>f.length)for(m=p[f.length-1],F.setEnds((a={},a[L]=F.getEnd(L),a[R]=m,a)),m[R]=0,_=c.length-1;_>=S;_--)p[_].domFrag().remove();if(f.length>c.length){for(C=document.createDocumentFragment(),_=S;_<f.length;_++)A=document.createElement("span"),A.className="mq-digit",A.textContent=f[_],E=new Digit(f[_]),E.parent=F,E.setDOM(A),C.appendChild(A),E[L]=F.getEnd(R),E[R]=0,$=E[L],$[R]=E,F.setEnds((s={},s[L]=F.getEnd(L),s[R]=E,s));F.domFrag().oneElement().appendChild(C)}return(D=this.exportLatex())!==e?(console.warn("tried updating latex efficiently but did not work. Attempted: "+e+" but wrote: "+D),!1):(B=F.getEnd(R),B&&B.fixDigitGrouping(this.cursor.options),!0)},r.prototype.renderLatexMathFromScratch=function(e){var n,i,o=this.root,a=this.cursor,s=Parser.all,l=Parser.eof,c=latexMathParser.skip(l).or(s.result(!1)).parse(e);o.setEnds((n={},n[L]=0,n[R]=0,n)),c&&c.children().adopt(o,0,0),c?(i=o.domFrag(),i.children().remove(),i.oneElement().appendChild(c.html()),o.finalizeInsert(a.options,a)):o.domFrag().empty()},r.prototype.renderLatexMath=function(e){var n,i=this.cursor,o=this.root;this.notify("replace"),i.clearSelection(),n=this.exportLatex(),o.getEnd(L)&&o.getEnd(R)&&n===e||(this.updateLatexMathEfficiently(e,n)||this.renderLatexMathFromScratch(e),this.updateMathspeak()),i.insAtRightEnd(o)},r.prototype.renderLatexText=function(e){var n,i,o,a,s,l,c,f,d,u,m,p=this.root,_=this.cursor;if(p.domFrag().children().slice(1).remove(),p.setEnds((n={},n[L]=0,n[R]=0,n)),delete _.selection,_.show().insAtRightEnd(p),i=Parser.regex,o=Parser.string,a=Parser.eof,s=Parser.all,l=o("$").then(latexMathParser).skip(o("$").or(a)).map(function(y){var g,v=new RootMathCommand(_);return v.createBlocks(),g=v.getEnd(L),y.children().adopt(g,0,0),v}),c=o("\\$").result("$"),f=c.or(i(/^[^$]/)).map(function(y){return new VanillaSymbol(y)}),d=l.or(f).many(),u=d.skip(a).or(s.result(!1)).parse(e)){for(m=0;m<u.length;m+=1)u[m].adopt(p,p.getEnd(R),0);domFrag(p.html()).appendTo(p.domFrag().oneElement()),p.finalizeInsert(_.options,_)}},r}(Controller_keystroke),ignoreNextMouseDownNoop=function(t){return!1},Options.prototype.ignoreNextMousedown=ignoreNextMouseDownNoop,function(){ControllerBase.onNotify(function(t,r){r!=="edit"&&r!=="replace"||cancelSelectionOnEdit&&cancelSelectionOnEdit.cursor===t&&cancelSelectionOnEdit.cb()})}(),Controller_mouse=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.handleMouseDown=function(n){function i(x){c=x.target}function o(x){_.anticursor||_.startSelection(),p.seek(c,x.clientX,x.clientY).cursor.select(),_.selection&&_.controller.aria.clear().queue(_.selection.join("mathspeak")+" selected").alert(),c=null}function a(){d==null||d.removeEventListener("mousemove",i),m==null||m.removeEventListener("mousemove",o),m==null||m.removeEventListener("mouseup",l),cancelSelectionOnEdit=void 0}function s(){p.editable?(_.show(),_.controller.aria.queue(_.parent).alert()):domFrag(g).detach()}function l(){_.blink=y,_.selection||s(),a()}var c,f,d=closest(n.target,".mq-root-block"),u=d&&NodeBase.getNodeOfElement(d)||NodeBase.getNodeOfElement(e.root.domFrag().oneElement()),m=u.domFrag().firstNode().ownerDocument,p=u.controller,_=p.cursor,y=_.blink,g=p.getTextareaSpanOrThrow(),v=p.getTextareaOrThrow();if(n.preventDefault(),n.target.unselectable=!0,!_.options.ignoreNextMousedown(n)&&!closest(n.target,".mq-ignore-mousedown")){if(n.detail===3)return void p.selectAll();c=null,cancelSelectionOnEdit={cursor:_,cb:function(){f=!0,_.blink=y,_.clearSelection(),s(),a()}},p.blurred&&(d&&!p.editable&&domFrag(d).prepend(domFrag(g)),v.focus(),f)||(_.blink=noop,p.seek(n.target,n.clientX,n.clientY).cursor.startSelection(),d==null||d.addEventListener("mousemove",i),m==null||m.addEventListener("mousemove",o),m==null||m.addEventListener("mouseup",l))}},e}return __extends(r,t),r.prototype.addMouseEventListener=function(){this.container.addEventListener("mousedown",this.handleMouseDown)},r.prototype.removeMouseEventListener=function(){this.container.removeEventListener("mousedown",this.handleMouseDown)},r.prototype.seek=function(e,n,i){for(var o,a=this.notify("select").cursor;e&&!(o=NodeBase.getNodeOfElement(e));)e=e.parentElement;return o||(o=this.root),a.clearSelection().show(),o.seek(n,a),this.scrollHoriz(),this},r}(Controller_latex),Controller_scrollHoriz=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.setOverflowClasses=function(){var e,n,i,o=this.root.domFrag().oneElement(),a=!1,s=!1;this.blurred||(e=getBoundingClientRect(o).width,n=o.scrollWidth,i=o.scrollLeft,a=n>e+i,s=i>0),o.classList.contains("mq-editing-overflow-right")!==a&&o.classList.toggle("mq-editing-overflow-right"),o.classList.contains("mq-editing-overflow-left")!==s&&o.classList.toggle("mq-editing-overflow-left")},r.prototype.scrollHoriz=function(){var e,n,i,o,a,s,l,c,f,d,u=this,m=this.cursor,p=m.selection,_=getBoundingClientRect(this.root.domFrag().oneElement());if(m.domFrag().isEmpty()&&!p)return this.cancelScrollHoriz&&(this.cancelScrollHoriz(),this.cancelScrollHoriz=void 0),e=this.root.domFrag().oneElement(),n=e.scrollLeft,void animate(this.getScrollAnimationDuration(),function(y,g,v){y>=1?(u.cancelScrollHoriz=void 0,e.scrollLeft=0,u.setOverflowClasses()):(u.cancelScrollHoriz=v,g(),e.scrollLeft=Math.round((1-y)*n))});if(p)if(a=getBoundingClientRect(p.domFrag().oneElement()),s=a.left-(_.left+20),l=a.right-(_.right-20),p.getEnd(L)===m[R])if(s<0)o=s;else{if(!(l>0))return;o=a.left-l<_.left+20?s:l}else if(l>0)o=l;else{if(!(s<0))return;o=a.right-s>_.right-20?l:s}else if((i=getBoundingClientRect(m.domFrag().oneElement()).left)>_.right-20)o=i-(_.right-20);else{if(!(i<_.left+20))return;o=i-(_.left+20)}c=this.root.domFrag().oneElement(),o<0&&c.scrollLeft===0||o>0&&c.scrollWidth<=c.scrollLeft+_.width||(this.cancelScrollHoriz&&(this.cancelScrollHoriz(),this.cancelScrollHoriz=void 0),f=this.root.domFrag().oneElement(),d=f.scrollLeft,animate(this.getScrollAnimationDuration(),function(y,g,v){y>=1?(u.cancelScrollHoriz=void 0,f.scrollLeft=Math.round(d+o),u.setOverflowClasses()):(u.cancelScrollHoriz=v,g(),f.scrollLeft=Math.round(d+y*o))}))},r.prototype.getScrollAnimationDuration=function(){var e;return(e=this.options.scrollAnimationDuration)!==null&&e!==void 0?e:100},r}(Controller_mouse),Options.prototype.substituteTextarea=function(){return h("textarea",{autocapitalize:"off",autocomplete:"off",autocorrect:"off",spellcheck:!1,"x-palm-disable-ste-all":!0})},Options.prototype.substituteKeyboardEvents=defaultSubstituteKeyboardEvents,Controller=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.selectFn=noop,e}return __extends(r,t),r.prototype.createTextarea=function(){var e,n;if(this.textareaSpan=h("span",{class:"mq-textarea"}),e=this.options.substituteTextarea(),!e.nodeType)throw"substituteTextarea() must return a DOM element, got "+e;this.textarea=domFrag(e).appendTo(this.textareaSpan).oneElement(),n=this,n.cursor.selectionChanged=function(){n.selectionChanged()}},r.prototype.selectionChanged=function(){var e=this;e.textareaSelectionTimeout||(e.textareaSelectionTimeout=window.setTimeout(function(){e.setTextareaSelection()}))},r.prototype.setTextareaSelection=function(){this.textareaSelectionTimeout=0;var e="";this.cursor.selection&&(e=this.cleanLatex(this.cursor.selection.join("latex")),this.options.statelessClipboard&&(e="$"+e+"$")),this.selectFn(e)},r.prototype.staticMathTextareaEvents=function(){var e=this;this.removeTextareaEventListener("cut"),this.removeTextareaEventListener("paste"),e.options.disableCopyPaste?this.removeTextareaEventListener("copy"):this.addTextareaEventListeners({copy:function(){e.setTextareaSelection()}}),this.addStaticFocusBlurListeners(),e.selectFn=function(n){var i=e.getTextareaOrThrow();i instanceof HTMLTextAreaElement&&(i.value=n,n&&i.select())}},r.prototype.editablesTextareaEvents=function(){var e,n,i,o=this,a=o.getTextareaOrThrow(),s=o.getTextareaSpanOrThrow();this.options.version<3?(e=this.options.assertJquery(),n=this.options.substituteKeyboardEvents(e(a),this),this.selectFn=function(l){n.select(l)}):(i=saneKeyboardEvents(a,this).select,this.selectFn=i),domFrag(this.container).prepend(domFrag(s)),this.addEditableFocusBlurListeners(),this.updateMathspeak()},r.prototype.unbindEditablesEvents=function(){var e=this,n=e.getTextareaOrThrow(),i=e.getTextareaSpanOrThrow();this.selectFn=function(o){n instanceof HTMLTextAreaElement&&(n.value=o,o&&n.select())},domFrag(i).remove(),this.removeTextareaEventListener("focus"),this.removeTextareaEventListener("blur"),e.blurred=!0,this.removeTextareaEventListener("cut"),this.removeTextareaEventListener("paste")},r.prototype.typedText=function(e){if(e===`
`)return this.handle("enter");var n=this.notify(void 0).cursor;n.parent.write(n,e),this.scrollHoriz()},r.prototype.cut=function(){var e=this,n=e.cursor;n.selection&&window.setTimeout(function(){e.notify("edit"),n.parent.bubble(function(i){i.reflow()}),e.options&&e.options.onCut&&e.options.onCut()})},r.prototype.copy=function(){this.setTextareaSelection()},r.prototype.paste=function(e){this.options.statelessClipboard&&(e=e.slice(0,1)==="$"&&e.slice(-1)==="$"?e.slice(1,-1):"\\text{"+e+"}"),this.writeLatex(e).cursor.show(),this.scrollHoriz(),this.options&&this.options.onPaste&&this.options.onPaste()},r.prototype.setupStaticField=function(){this.mathspeakSpan=h("span",{class:"mq-mathspeak"}),domFrag(this.container).prepend(domFrag(this.mathspeakSpan)),this.updateMathspeak(),this.blurred=!0,this.cursor.hide().parent.blur(this.cursor)},r.prototype.updateMathspeak=function(){var e,n,i,o=this,a=o.getAriaLabel(),s=/[A-Za-z0-9]$/.test(a)?a+":":a,l=o.root.mathspeak().trim();this.aria.clear(),n=!((e=o.ariaStringsOverrideMap)===null||e===void 0)&&e.labelValue?o.ariaStringsOverrideMap.labelValue(a,l):s+" "+l,i=o.getTextareaOrThrow(),o.mathspeakSpan?(i.setAttribute("aria-label",""),o.mathspeakSpan.textContent=n.trim()):i.setAttribute("aria-label",[n,o.ariaPostLabel].join(" ").trim())},r}(Controller_scrollHoriz),MathElement=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.finalizeInsert=function(e,n){var i,o,a=this;a.postOrder(function(s){s.finalizeTree(e)}),a.postOrder(function(s){s.contactWeld(n)}),a.postOrder(function(s){s.blur(n)}),a.postOrder(function(s){s.reflow()}),i=a[R],o=a[L],i&&i.siblingCreated(e,L),o&&o.siblingCreated(e,R),a.bubble(function(s){s.reflow()})},r.prototype.prepareInsertionAt=function(e){var n,i=e.options.maxDepth;if(i!==void 0){if((n=e.depth())>i)return!1;this.removeNodesDeeperThan(i-n)}return!0},r.prototype.removeNodesDeeperThan=function(e){for(var n,i,o=0,a=[[this,o]];n=a.shift();)i=n,i[0].children().each(function(s){var l=s instanceof MathBlock?1:0;o=i[1]+l,o<=e?a.push([s,o]):(l?s.children():s).remove()})},r}(MQNode),DOMView=function(){function t(r,e){this.childCount=r,this.render=e}return t}(),MathCommand=function(t){function r(e,n,i){var o=t.call(this)||this;return o.textTemplate=[""],o.mathspeakTemplate=[""],o.setCtrlSeqHtmlAndText(e,n,i),o}return __extends(r,t),r.prototype.setEnds=function(e){pray("MathCommand ends are never empty",e[L]&&e[R]),this.ends=e},r.prototype.getEnd=function(e){return this.ends[e]},r.prototype.setCtrlSeqHtmlAndText=function(e,n,i){this.ctrlSeq||(this.ctrlSeq=e),n&&(this.domView=n),i&&(this.textTemplate=i)},r.prototype.replaces=function(e){e.disown(),this.replacedFragment=e},r.prototype.isEmpty=function(){return this.foldChildren(!0,function(e,n){return e&&n.isEmpty()})},r.prototype.parser=function(){var e=this;return latexMathParser.block.times(this.numBlocks()).map(function(n){e.blocks=n;for(var i=0;i<n.length;i+=1)n[i].adopt(e,e.getEnd(R),0);return e})},r.prototype.createLeftOf=function(e){var n,i=this,o=i.replacedFragment;i.createBlocks(),t.prototype.createLeftOf.call(this,e),o&&(n=i.getEnd(L),o.adopt(n,0,0),o.domFrag().appendTo(n.domFrag().oneElement()),i.placeCursor(e),i.prepareInsertionAt(e)),i.finalizeInsert(e.options,e),i.placeCursor(e)},r.prototype.createBlocks=function(){var e,n,i=this,o=i.numBlocks(),a=i.blocks=Array(o);for(e=0;e<o;e+=1)n=a[e]=new MathBlock,n.adopt(i,i.getEnd(R),0)},r.prototype.placeCursor=function(e){e.insAtRightEnd(this.foldChildren(this.getEnd(L),function(n,i){return n.isEmpty()?n:i}))},r.prototype.moveTowards=function(e,n,i){var o,a;i==="up"?o=this.upInto:i==="down"&&(o=this.downInto),a=o||this.getEnd(-e),n.insAtDirEnd(-e,a),n.controller.aria.queueDirEndOf(-e,n.parent,!0)},r.prototype.deleteTowards=function(e,n){this.isEmpty()?n[e]=this.remove()[e]:this.moveTowards(e,n)},r.prototype.selectTowards=function(e,n){n[-e]=this,n[e]=this[e]},r.prototype.selectChildren=function(){return new MQSelection(this,this)},r.prototype.unselectInto=function(e,n){var i=n.anticursor,o=i.ancestors[this.id];n.insAtDirEnd(-e,o)},r.prototype.seek=function(e,n){function i(l){var c,f=l.domFrag().oneElement(),d=getBoundingClientRect(f).left,u=d+f.offsetWidth;return c={},c[L]=d,c[R]=u,c}var o,a=this,s=i(a);return e<s[L]?n.insLeftOf(a):e>s[R]?n.insRightOf(a):(o=s[L],void a.eachChild(function(l){var c=i(l);return e<c[L]?(e-o<c[L]-e?l[L]?n.insAtRightEnd(l[L]):n.insLeftOf(a):n.insAtLeftEnd(l),!1):e>c[R]?void(l[R]?o=c[R]:s[R]-e<e-c[R]?n.insRightOf(a):n.insAtRightEnd(l)):(l.seek(e,n),!1)}))},r.prototype.numBlocks=function(){return this.domView.childCount},r.prototype.html=function(){var e,n,i=this.blocks;return pray("domView is defined",this.domView),e=this.domView,n=e.render(i||[]),this.setDOM(n),NodeBase.linkElementByCmdNode(n,this),n},r.prototype.latexRecursive=function(e){this.checkCursorContextOpen(e),e.latex+=this.ctrlSeq||"",this.eachChild(function(n){var i,o,a;e.latex+="{",o=e.latex.length,(i=n.latexRecursive)===null||i===void 0||i.call(n,e),a=e.latex.length,o===a&&(e.latex+=" "),e.latex+="}"}),this.checkCursorContextClose(e)},r.prototype.text=function(){var e=this,n=0;return e.foldChildren(e.textTemplate[n],function(i,o){n+=1;var a=o.text();return i&&e.textTemplate[n]==="("&&a[0]==="("&&a.slice(-1)===")"?i+a.slice(1,-1)+e.textTemplate[n]:i+a+(e.textTemplate[n]||"")})},r.prototype.mathspeak=function(){var e,n,i;return this.mathspeakOverride&&(e=this.latex(),!/^(\\)+$/.test(e))?this.mathspeakOverride(e):(n=this,i=0,n.foldChildren(n.mathspeakTemplate[i]||"Start"+n.ctrlSeq+" ",function(o,a){return i+=1,o+" "+a.mathspeak()+" "+(n.mathspeakTemplate[i]+" "||"End"+n.ctrlSeq+" ")}))},r}(MathElement),MQSymbol=function(t){function r(e,n,i,o){var a=t.call(this)||this;return a.setCtrlSeqHtmlTextAndMathspeak(e,n?new DOMView(0,function(){return n.cloneNode(!0)}):void 0,i,o),a}return __extends(r,t),r.prototype.setCtrlSeqHtmlTextAndMathspeak=function(e,n,i,o){!i&&e&&(i=e.replace(/^\\/,"")),this.mathspeakName=o||i,t.prototype.setCtrlSeqHtmlAndText.call(this,e,n,[i||""])},r.prototype.parser=function(){return Parser.succeed(this)},r.prototype.numBlocks=function(){return 0},r.prototype.replaces=function(e){e.remove()},r.prototype.createBlocks=function(){},r.prototype.moveTowards=function(e,n){n.domFrag().insDirOf(e,this.domFrag()),n[-e]=this,n[e]=this[e],n.controller.aria.queue(this)},r.prototype.deleteTowards=function(e,n){n[e]=this.remove()[e]},r.prototype.seek=function(e,n){var i=this.domFrag().oneElement();return e-getBoundingClientRect(i).left<i.offsetWidth/2?n.insLeftOf(this):n.insRightOf(this),n},r.prototype.latexRecursive=function(e){this.checkCursorContextOpen(e),e.latex+=this.ctrlSeq||"",this.checkCursorContextClose(e)},r.prototype.text=function(){return this.textTemplate.join("")},r.prototype.mathspeak=function(e){return this.mathspeakOverride?t.prototype.mathspeak.call(this):this.mathspeakName||""},r.prototype.placeCursor=function(){},r.prototype.isEmpty=function(){return!0},r}(MathCommand),VanillaSymbol=function(t){function r(e,n,i){return t.call(this,e,h("span",{},[n||h.text(e)]),void 0,i)||this}return __extends(r,t),r}(MQSymbol),BinaryOperator=function(t){function r(e,n,i,o,a){return a?t.call(this,e,h("span",{},[n||h.text(e||"")]),void 0,o)||this:t.call(this,e,h("span",{class:"mq-binary-operator"},n?[n]:[]),i,o)||this}return __extends(r,t),r}(MQSymbol),MathBlock=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.ariaLabel="block",e}return __extends(r,t),r.prototype.join=function(e){return this.foldChildren("",function(n,i){return n+i[e]()})},r.prototype.html=function(){var e=document.createDocumentFragment();return this.eachChild(function(n){var i=n.html();e.appendChild(i)}),e},r.prototype.latexRecursive=function(e){this.checkCursorContextOpen(e),this.eachChild(function(n){var i;return(i=n.latexRecursive)===null||i===void 0?void 0:i.call(n,e)}),this.checkCursorContextClose(e)},r.prototype.text=function(){var e=this.getEnd(L);return e===this.getEnd(R)&&e!==0?e.text():this.join("text")},r.prototype.mathspeak=function(){var e="",n={};return this.controller&&(n=this.controller.options.autoOperatorNames),this.foldChildren([],function(i,o){var a,s,l;return o.isPartOfOperator?e+=o.mathspeak():(e!==""&&(n._maxLength>0&&typeof(a=n[e.toLowerCase()])=="string"&&(e=a),i.push(e+" "),e=""),s=o.mathspeak(),l=o.ctrlSeq,!isNaN(l)||l==="."||o.parent&&o.parent.parent&&o.parent.parent.isTextBlock()||(s=" "+s+" "),i.push(s)),i}).join("").replace(/ +(?= )/g,"").replace(/(\.)([0-9]+)/g,function(i,o,a){return o+a.split("").join(" ").trim()})},r.prototype.keystroke=function(e,n,i){return!i.options.spaceBehavesLikeTab||e!=="Spacebar"&&e!=="Shift-Spacebar"?t.prototype.keystroke.call(this,e,n,i):(n==null||n.preventDefault(),void i.escapeDir(e==="Shift-Spacebar"?L:R,e,n))},r.prototype.moveOutOf=function(e,n,i){var o,a;i==="up"?o=this.parent.upInto:i==="down"&&(o=this.parent.downInto),!o&&this[e]?(a=-e,n.insAtDirEnd(a,this[e]),n.controller.aria.queueDirEndOf(a,n.parent,!0)):(n.insDirOf(e,this.parent),n.controller.aria.queueDirOf(e,this.parent))},r.prototype.selectOutOf=function(e,n){n.insDirOf(e,this.parent)},r.prototype.deleteOutOf=function(e,n){n.unwrapGramp()},r.prototype.seek=function(e,n){var i,o,a=this.getEnd(R);if(!a)return n.insAtRightEnd(this);if(i=a.domFrag().oneElement(),getBoundingClientRect(i).left+i.offsetWidth<e)return n.insAtRightEnd(this);if(o=this.getEnd(L),e<getBoundingClientRect(o.domFrag().oneElement()).left)return n.insAtLeftEnd(this);for(;e<getBoundingClientRect(a.domFrag().oneElement()).left;)a=a[L];return a.seek(e,n)},r.prototype.chToCmd=function(e,n){var i;return e.match(/^[a-eg-zA-Z]$/)?new Letter(e):/^\d$/.test(e)?new Digit(e):n&&n.typingSlashWritesDivisionSymbol&&e==="/"?LatexCmds["÷"](e):n&&n.typingAsteriskWritesTimesSymbol&&e==="*"?LatexCmds["×"](e):n&&n.typingPercentWritesPercentOf&&e==="%"?LatexCmds.percentof(e):(i=CharCmds[e]||LatexCmds[e])?i.constructor?new i(e):i(e):new VanillaSymbol(e)},r.prototype.write=function(e,n){var i=this.chToCmd(n,e.options);e.selection&&i.replaces(e.replaceSelection()),e.isTooDeep()||(i.createLeftOf(e.show()),n==="/"?e.controller.aria.alert("over"):e.controller.aria.alert(i.mathspeak({createdLeftOf:e})))},r.prototype.writeLatex=function(e,n){var i,o,a,s,l=Parser.all,c=Parser.eof,f=latexMathParser.skip(c).or(l.result(!1)).parse(n);f&&!f.isEmpty()&&f.prepareInsertionAt(e)&&(f.children().adopt(e.parent,e[L],e[R]),domFrag(f.html()).insertBefore(e.domFrag()),e[L]=f.getEnd(R),f.finalizeInsert(e.options,e),i=f.getEnd(R),o=f.getEnd(L),a=i[R],s=o[L],a&&a.siblingCreated(e.options,L),s&&s.siblingCreated(e.options,R),e.parent.bubble(function(d){d.reflow()}))},r.prototype.focus=function(){return this.domFrag().addClass("mq-hasCursor"),this.domFrag().removeClass("mq-empty"),this},r.prototype.blur=function(e){return this.domFrag().removeClass("mq-hasCursor"),this.isEmpty()&&(this.domFrag().addClass("mq-empty"),e&&this.isQuietEmptyDelimiter(e.options.quietEmptyDelimiters)&&this.domFrag().addClass("mq-quiet-delimiter")),this},r}(MathElement),Options.prototype.mouseEvents=!0,API.StaticMath=function(t){var r;return r=function(e){function n(i){var o=e.call(this,i)||this,a=o.innerFields=[];return o.__controller.root.postOrder(function(s){s.registerInnerField(a,t.InnerMathField)}),o}return __extends(n,e),n.prototype.__mathquillify=function(i,o){return this.config(i),e.prototype.mathquillify.call(this,"mq-math-mode"),this.__controller.setupStaticField(),this.__options.mouseEvents&&(this.__controller.addMouseEventListener(),this.__controller.staticMathTextareaEvents()),this},n.prototype.latex=function(i){var o,a=e.prototype.latex.apply(this,arguments);return arguments.length>0&&(o=this.innerFields=[],this.__controller.root.postOrder(function(s){s.registerInnerField(o,t.InnerMathField)}),this.__controller.updateMathspeak()),a},n.prototype.setAriaLabel=function(i){return this.__controller.setAriaLabel(i),this},n.prototype.getAriaLabel=function(){return this.__controller.getAriaLabel()},n}(t.AbstractMathQuill),r.RootBlock=MathBlock,r},RootMathBlock=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r}(MathBlock),RootBlockMixin(RootMathBlock.prototype),API.MathField=function(t){var r;return r=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.__mathquillify=function(i,o){return this.config(i),o>1&&(this.__controller.root.reflow=noop),e.prototype.mathquillify.call(this,"mq-editable-field mq-math-mode"),delete this.__controller.root.reflow,this},n}(t.EditableField),r.RootBlock=RootMathBlock,r},API.InnerMathField=function(t){return pray("MathField class is defined",t.MathField),function(r){function e(){return r!==null&&r.apply(this,arguments)||this}return __extends(e,r),e.prototype.makeStatic=function(){this.__controller.editable=!1,this.__controller.root.blur(),this.__controller.unbindEditablesEvents(),domFrag(this.__controller.container).removeClass("mq-editable-field")},e.prototype.makeEditable=function(){this.__controller.editable=!0,this.__controller.editablesTextareaEvents(),this.__controller.cursor.insAtRightEnd(this.__controller.root),domFrag(this.__controller.container).addClass("mq-editable-field")},e}(t.MathField)},LatexCmds.notin=LatexCmds.cong=LatexCmds.equiv=LatexCmds.oplus=LatexCmds.otimes=function(t){return new BinaryOperator("\\"+t+" ",h.entityText("&"+t+";"))},LatexCmds["∗"]=LatexCmds.ast=LatexCmds.star=LatexCmds.loast=LatexCmds.lowast=bindBinaryOperator("\\ast ","&lowast;","low asterisk"),LatexCmds.therefor=LatexCmds.therefore=bindBinaryOperator("\\therefore ","&there4;","therefore"),LatexCmds.cuz=LatexCmds.because=bindBinaryOperator("\\because ","&#8757;","because"),LatexCmds.prop=LatexCmds.propto=bindBinaryOperator("\\propto ","&prop;","proportional to"),LatexCmds["≈"]=LatexCmds.asymp=LatexCmds.approx=bindBinaryOperator("\\approx ","&asymp;","approximately equal to"),LatexCmds.isin=LatexCmds.in=bindBinaryOperator("\\in ","&isin;","is in"),LatexCmds.ni=LatexCmds.contains=bindBinaryOperator("\\ni ","&ni;","is not in"),LatexCmds.notni=LatexCmds.niton=LatexCmds.notcontains=LatexCmds.doesnotcontain=bindBinaryOperator("\\not\\ni ","&#8716;","does not contain"),LatexCmds.sub=LatexCmds.subset=bindBinaryOperator("\\subset ","&sub;","subset"),LatexCmds.sup=LatexCmds.supset=LatexCmds.superset=bindBinaryOperator("\\supset ","&sup;","superset"),LatexCmds.nsub=LatexCmds.notsub=LatexCmds.nsubset=LatexCmds.notsubset=bindBinaryOperator("\\not\\subset ","&#8836;","not a subset"),LatexCmds.nsup=LatexCmds.notsup=LatexCmds.nsupset=LatexCmds.notsupset=LatexCmds.nsuperset=LatexCmds.notsuperset=bindBinaryOperator("\\not\\supset ","&#8837;","not a superset"),LatexCmds.sube=LatexCmds.subeq=LatexCmds.subsete=LatexCmds.subseteq=bindBinaryOperator("\\subseteq ","&sube;","subset or equal to"),LatexCmds.supe=LatexCmds.supeq=LatexCmds.supsete=LatexCmds.supseteq=LatexCmds.supersete=LatexCmds.superseteq=bindBinaryOperator("\\supseteq ","&supe;","superset or equal to"),LatexCmds.nsube=LatexCmds.nsubeq=LatexCmds.notsube=LatexCmds.notsubeq=LatexCmds.nsubsete=LatexCmds.nsubseteq=LatexCmds.notsubsete=LatexCmds.notsubseteq=bindBinaryOperator("\\not\\subseteq ","&#8840;","not subset or equal to"),LatexCmds.nsupe=LatexCmds.nsupeq=LatexCmds.notsupe=LatexCmds.notsupeq=LatexCmds.nsupsete=LatexCmds.nsupseteq=LatexCmds.notsupsete=LatexCmds.notsupseteq=LatexCmds.nsupersete=LatexCmds.nsuperseteq=LatexCmds.notsupersete=LatexCmds.notsuperseteq=bindBinaryOperator("\\not\\supseteq ","&#8841;","not superset or equal to"),LatexCmds.mathbb=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.createLeftOf=function(e){},r.prototype.numBlocks=function(){return 1},r.prototype.parser=function(){var e=Parser.string,n=Parser.regex,i=Parser.optWhitespace;return i.then(e("{")).then(i).then(n(/^[NPZQRCH]/)).skip(i).skip(e("}")).map(function(o){var a=LatexCmds[o];return isMQNodeClass(a)?new a:a()})},r}(MathCommand),LatexCmds.N=LatexCmds.naturals=LatexCmds.Naturals=bindVanillaSymbol("\\mathbb{N}","&#8469;","naturals"),LatexCmds.P=LatexCmds.primes=LatexCmds.Primes=LatexCmds.projective=LatexCmds.Projective=LatexCmds.probability=LatexCmds.Probability=bindVanillaSymbol("\\mathbb{P}","&#8473;","P"),LatexCmds.Z=LatexCmds.integers=LatexCmds.Integers=bindVanillaSymbol("\\mathbb{Z}","&#8484;","integers"),LatexCmds.Q=LatexCmds.rationals=LatexCmds.Rationals=bindVanillaSymbol("\\mathbb{Q}","&#8474;","rationals"),LatexCmds.R=LatexCmds.reals=LatexCmds.Reals=bindVanillaSymbol("\\mathbb{R}","&#8477;","reals"),LatexCmds.C=LatexCmds.complex=LatexCmds.Complex=LatexCmds.complexes=LatexCmds.Complexes=LatexCmds.complexplane=LatexCmds.Complexplane=LatexCmds.ComplexPlane=bindVanillaSymbol("\\mathbb{C}","&#8450;","complexes"),LatexCmds.H=LatexCmds.Hamiltonian=LatexCmds.quaternions=LatexCmds.Quaternions=bindVanillaSymbol("\\mathbb{H}","&#8461;","quaternions"),LatexCmds.quad=LatexCmds.emsp=bindVanillaSymbol("\\quad ","    ","4 spaces"),LatexCmds.qquad=bindVanillaSymbol("\\qquad ","        ","8 spaces"),LatexCmds.diamond=bindVanillaSymbol("\\diamond ","&#9671;","diamond"),LatexCmds.bigtriangleup=bindVanillaSymbol("\\bigtriangleup ","&#9651;","triangle up"),LatexCmds.ominus=bindVanillaSymbol("\\ominus ","&#8854;","o minus"),LatexCmds.uplus=bindVanillaSymbol("\\uplus ","&#8846;","disjoint union"),LatexCmds.bigtriangledown=bindVanillaSymbol("\\bigtriangledown ","&#9661;","triangle down"),LatexCmds.sqcap=bindVanillaSymbol("\\sqcap ","&#8851;","greatest lower bound"),LatexCmds.triangleleft=bindVanillaSymbol("\\triangleleft ","&#8882;","triangle left"),LatexCmds.sqcup=bindVanillaSymbol("\\sqcup ","&#8852;","least upper bound"),LatexCmds.triangleright=bindVanillaSymbol("\\triangleright ","&#8883;","triangle right"),LatexCmds.odot=LatexCmds.circledot=bindVanillaSymbol("\\odot ","&#8857;","circle dot"),LatexCmds.bigcirc=bindVanillaSymbol("\\bigcirc ","&#9711;","circle"),LatexCmds.dagger=bindVanillaSymbol("\\dagger ","&#0134;","dagger"),LatexCmds.ddagger=bindVanillaSymbol("\\ddagger ","&#135;","big dagger"),LatexCmds.wr=bindVanillaSymbol("\\wr ","&#8768;","wreath"),LatexCmds.amalg=bindVanillaSymbol("\\amalg ","&#8720;","amalgam"),LatexCmds.models=bindVanillaSymbol("\\models ","&#8872;","models"),LatexCmds.prec=bindVanillaSymbol("\\prec ","&#8826;","precedes"),LatexCmds.succ=bindVanillaSymbol("\\succ ","&#8827;","succeeds"),LatexCmds.preceq=bindVanillaSymbol("\\preceq ","&#8828;","precedes or equals"),LatexCmds.succeq=bindVanillaSymbol("\\succeq ","&#8829;","succeeds or equals"),LatexCmds.simeq=bindVanillaSymbol("\\simeq ","&#8771;","similar or equal to"),LatexCmds.mid=bindVanillaSymbol("\\mid ","&#8739;","divides"),LatexCmds.ll=bindVanillaSymbol("\\ll ","&#8810;","ll"),LatexCmds.gg=bindVanillaSymbol("\\gg ","&#8811;","gg"),LatexCmds.parallel=bindVanillaSymbol("\\parallel ","&#8741;","parallel with"),LatexCmds.nparallel=bindVanillaSymbol("\\nparallel ","&#8742;","not parallel with"),LatexCmds.bowtie=bindVanillaSymbol("\\bowtie ","&#8904;","bowtie"),LatexCmds.sqsubset=bindVanillaSymbol("\\sqsubset ","&#8847;","square subset"),LatexCmds.sqsupset=bindVanillaSymbol("\\sqsupset ","&#8848;","square superset"),LatexCmds.smile=bindVanillaSymbol("\\smile ","&#8995;","smile"),LatexCmds.sqsubseteq=bindVanillaSymbol("\\sqsubseteq ","&#8849;","square subset or equal to"),LatexCmds.sqsupseteq=bindVanillaSymbol("\\sqsupseteq ","&#8850;","square superset or equal to"),LatexCmds.doteq=bindVanillaSymbol("\\doteq ","&#8784;","dotted equals"),LatexCmds.frown=bindVanillaSymbol("\\frown ","&#8994;","frown"),LatexCmds.vdash=bindVanillaSymbol("\\vdash ","&#8870;","v dash"),LatexCmds.dashv=bindVanillaSymbol("\\dashv ","&#8867;","dash v"),LatexCmds.nless=bindVanillaSymbol("\\nless ","&#8814;","not less than"),LatexCmds.ngtr=bindVanillaSymbol("\\ngtr ","&#8815;","not greater than"),LatexCmds.longleftarrow=bindVanillaSymbol("\\longleftarrow ","&#8592;","left arrow"),LatexCmds.longrightarrow=bindVanillaSymbol("\\longrightarrow ","&#8594;","right arrow"),LatexCmds.Longleftarrow=bindVanillaSymbol("\\Longleftarrow ","&#8656;","left arrow"),LatexCmds.Longrightarrow=bindVanillaSymbol("\\Longrightarrow ","&#8658;","right arrow"),LatexCmds.longleftrightarrow=bindVanillaSymbol("\\longleftrightarrow ","&#8596;","left and right arrow"),LatexCmds.updownarrow=bindVanillaSymbol("\\updownarrow ","&#8597;","up and down arrow"),LatexCmds.Longleftrightarrow=bindVanillaSymbol("\\Longleftrightarrow ","&#8660;","left and right arrow"),LatexCmds.Updownarrow=bindVanillaSymbol("\\Updownarrow ","&#8661;","up and down arrow"),LatexCmds.mapsto=bindVanillaSymbol("\\mapsto ","&#8614;","maps to"),LatexCmds.nearrow=bindVanillaSymbol("\\nearrow ","&#8599;","northeast arrow"),LatexCmds.hookleftarrow=bindVanillaSymbol("\\hookleftarrow ","&#8617;","hook left arrow"),LatexCmds.hookrightarrow=bindVanillaSymbol("\\hookrightarrow ","&#8618;","hook right arrow"),LatexCmds.searrow=bindVanillaSymbol("\\searrow ","&#8600;","southeast arrow"),LatexCmds.leftharpoonup=bindVanillaSymbol("\\leftharpoonup ","&#8636;","left harpoon up"),LatexCmds.rightharpoonup=bindVanillaSymbol("\\rightharpoonup ","&#8640;","right harpoon up"),LatexCmds.swarrow=bindVanillaSymbol("\\swarrow ","&#8601;","southwest arrow"),LatexCmds.leftharpoondown=bindVanillaSymbol("\\leftharpoondown ","&#8637;","left harpoon down"),LatexCmds.rightharpoondown=bindVanillaSymbol("\\rightharpoondown ","&#8641;","right harpoon down"),LatexCmds.nwarrow=bindVanillaSymbol("\\nwarrow ","&#8598;","northwest arrow"),LatexCmds.ldots=bindVanillaSymbol("\\ldots ","&#8230;","l dots"),LatexCmds.cdots=bindVanillaSymbol("\\cdots ","&#8943;","c dots"),LatexCmds.vdots=bindVanillaSymbol("\\vdots ","&#8942;","v dots"),LatexCmds.ddots=bindVanillaSymbol("\\ddots ","&#8945;","d dots"),LatexCmds.surd=bindVanillaSymbol("\\surd ","&#8730;","unresolved root"),LatexCmds.triangle=bindVanillaSymbol("\\triangle ","&#9651;","triangle"),LatexCmds.ell=bindVanillaSymbol("\\ell ","&#8467;","ell"),LatexCmds.top=bindVanillaSymbol("\\top ","&#8868;","top"),LatexCmds.flat=bindVanillaSymbol("\\flat ","&#9837;","flat"),LatexCmds.natural=bindVanillaSymbol("\\natural ","&#9838;","natural"),LatexCmds.sharp=bindVanillaSymbol("\\sharp ","&#9839;","sharp"),LatexCmds.wp=bindVanillaSymbol("\\wp ","&#8472;","wp"),LatexCmds.bot=bindVanillaSymbol("\\bot ","&#8869;","bot"),LatexCmds.clubsuit=bindVanillaSymbol("\\clubsuit ","&#9827;","club suit"),LatexCmds.diamondsuit=bindVanillaSymbol("\\diamondsuit ","&#9826;","diamond suit"),LatexCmds.heartsuit=bindVanillaSymbol("\\heartsuit ","&#9825;","heart suit"),LatexCmds.spadesuit=bindVanillaSymbol("\\spadesuit ","&#9824;","spade suit"),LatexCmds.parallelogram=bindVanillaSymbol("\\parallelogram ","&#9649;","parallelogram"),LatexCmds.square=bindVanillaSymbol("\\square ","&#11036;","square"),LatexCmds.oint=bindVanillaSymbol("\\oint ","&#8750;","o int"),LatexCmds.bigcap=bindVanillaSymbol("\\bigcap ","&#8745;","big cap"),LatexCmds.bigcup=bindVanillaSymbol("\\bigcup ","&#8746;","big cup"),LatexCmds.bigsqcup=bindVanillaSymbol("\\bigsqcup ","&#8852;","big square cup"),LatexCmds.bigvee=bindVanillaSymbol("\\bigvee ","&#8744;","big vee"),LatexCmds.bigwedge=bindVanillaSymbol("\\bigwedge ","&#8743;","big wedge"),LatexCmds.bigodot=bindVanillaSymbol("\\bigodot ","&#8857;","big o dot"),LatexCmds.bigotimes=bindVanillaSymbol("\\bigotimes ","&#8855;","big o times"),LatexCmds.bigoplus=bindVanillaSymbol("\\bigoplus ","&#8853;","big o plus"),LatexCmds.biguplus=bindVanillaSymbol("\\biguplus ","&#8846;","big u plus"),LatexCmds.lfloor=bindVanillaSymbol("\\lfloor ","&#8970;","left floor"),LatexCmds.rfloor=bindVanillaSymbol("\\rfloor ","&#8971;","right floor"),LatexCmds.lceil=bindVanillaSymbol("\\lceil ","&#8968;","left ceiling"),LatexCmds.rceil=bindVanillaSymbol("\\rceil ","&#8969;","right ceiling"),LatexCmds.opencurlybrace=LatexCmds.lbrace=bindVanillaSymbol("\\lbrace ","{","left brace"),LatexCmds.closecurlybrace=LatexCmds.rbrace=bindVanillaSymbol("\\rbrace ","}","right brace"),LatexCmds.lbrack=bindVanillaSymbol("[","left bracket"),LatexCmds.rbrack=bindVanillaSymbol("]","right bracket"),LatexCmds.slash=bindVanillaSymbol("/","slash"),LatexCmds.vert=bindVanillaSymbol("|","vertical bar"),LatexCmds.perp=LatexCmds.perpendicular=bindVanillaSymbol("\\perp ","&perp;","perpendicular"),LatexCmds.nabla=LatexCmds.del=bindVanillaSymbol("\\nabla ","&nabla;"),LatexCmds.hbar=bindVanillaSymbol("\\hbar ","&#8463;","horizontal bar"),LatexCmds.AA=LatexCmds.Angstrom=LatexCmds.angstrom=bindVanillaSymbol("\\text\\AA ","&#8491;","AA"),LatexCmds.ring=LatexCmds.circ=LatexCmds.circle=bindVanillaSymbol("\\circ ","&#8728;","circle"),LatexCmds.bull=LatexCmds.bullet=bindVanillaSymbol("\\bullet ","&bull;","bullet"),LatexCmds.setminus=LatexCmds.smallsetminus=bindVanillaSymbol("\\setminus ","&#8726;","set minus"),LatexCmds.not=LatexCmds["¬"]=LatexCmds.neg=bindVanillaSymbol("\\neg ","&not;","not"),LatexCmds["…"]=LatexCmds.dots=LatexCmds.ellip=LatexCmds.hellip=LatexCmds.ellipsis=LatexCmds.hellipsis=bindVanillaSymbol("\\dots ","&hellip;","ellipsis"),LatexCmds.converges=LatexCmds.darr=LatexCmds.dnarr=LatexCmds.dnarrow=LatexCmds.downarrow=bindVanillaSymbol("\\downarrow ","&darr;","converges with"),LatexCmds.dArr=LatexCmds.dnArr=LatexCmds.dnArrow=LatexCmds.Downarrow=bindVanillaSymbol("\\Downarrow ","&dArr;","down arrow"),LatexCmds.diverges=LatexCmds.uarr=LatexCmds.uparrow=bindVanillaSymbol("\\uparrow ","&uarr;","diverges from"),LatexCmds.uArr=LatexCmds.Uparrow=bindVanillaSymbol("\\Uparrow ","&uArr;","up arrow"),LatexCmds.rarr=LatexCmds.rightarrow=bindVanillaSymbol("\\rightarrow ","&rarr;","right arrow"),LatexCmds.implies=bindBinaryOperator("\\Rightarrow ","&rArr;","implies"),LatexCmds.rArr=LatexCmds.Rightarrow=bindVanillaSymbol("\\Rightarrow ","&rArr;","right arrow"),LatexCmds.gets=bindBinaryOperator("\\gets ","&larr;","gets"),LatexCmds.larr=LatexCmds.leftarrow=bindVanillaSymbol("\\leftarrow ","&larr;","left arrow"),LatexCmds.impliedby=bindBinaryOperator("\\Leftarrow ","&lArr;","implied by"),LatexCmds.lArr=LatexCmds.Leftarrow=bindVanillaSymbol("\\Leftarrow ","&lArr;","left arrow"),LatexCmds.harr=LatexCmds.lrarr=LatexCmds.leftrightarrow=bindVanillaSymbol("\\leftrightarrow ","&harr;","left and right arrow"),LatexCmds.iff=bindBinaryOperator("\\Leftrightarrow ","&hArr;","if and only if"),LatexCmds.hArr=LatexCmds.lrArr=LatexCmds.Leftrightarrow=bindVanillaSymbol("\\Leftrightarrow ","&hArr;","left and right arrow"),LatexCmds.Re=LatexCmds.Real=LatexCmds.real=bindVanillaSymbol("\\Re ","&real;","real"),LatexCmds.Im=LatexCmds.imag=LatexCmds.image=LatexCmds.imagin=LatexCmds.imaginary=LatexCmds.Imaginary=bindVanillaSymbol("\\Im ","&image;","imaginary"),LatexCmds.part=LatexCmds.partial=bindVanillaSymbol("\\partial ","&part;","partial"),LatexCmds.pounds=bindVanillaSymbol("\\pounds ","&pound;"),LatexCmds.alef=LatexCmds.alefsym=LatexCmds.aleph=LatexCmds.alephsym=bindVanillaSymbol("\\aleph ","&alefsym;","alef sym"),LatexCmds.xist=LatexCmds.xists=LatexCmds.exist=LatexCmds.exists=bindVanillaSymbol("\\exists ","&exist;","there exists at least 1"),LatexCmds.nexists=LatexCmds.nexist=bindVanillaSymbol("\\nexists ","&#8708;","there is no"),LatexCmds.and=LatexCmds.land=LatexCmds.wedge=bindBinaryOperator("\\wedge ","&and;","and"),LatexCmds.or=LatexCmds.lor=LatexCmds.vee=bindBinaryOperator("\\vee ","&or;","or"),LatexCmds.o=LatexCmds.O=LatexCmds.empty=LatexCmds.emptyset=LatexCmds.oslash=LatexCmds.Oslash=LatexCmds.nothing=LatexCmds.varnothing=bindBinaryOperator("\\varnothing ","&empty;","nothing"),LatexCmds.cup=LatexCmds.union=bindBinaryOperator("\\cup ","&cup;","union"),LatexCmds.cap=LatexCmds.intersect=LatexCmds.intersection=bindBinaryOperator("\\cap ","&cap;","intersection"),LatexCmds.deg=LatexCmds.degree=bindVanillaSymbol("\\degree ","&deg;","degrees"),LatexCmds.ang=LatexCmds.angle=bindVanillaSymbol("\\angle ","&ang;","angle"),LatexCmds.measuredangle=bindVanillaSymbol("\\measuredangle ","&#8737;","measured angle"),DigitGroupingChar=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.finalizeTree=function(e,n){this.sharedSiblingMethod(e,n)},r.prototype.siblingDeleted=function(e,n){this.sharedSiblingMethod(e,n)},r.prototype.siblingCreated=function(e,n){this.sharedSiblingMethod(e,n)},r.prototype.sharedSiblingMethod=function(e,n){n!==L&&this[R]instanceof r||this.fixDigitGrouping(e)},r.prototype.fixDigitGrouping=function(e){var n,i,o,a,s,l,c,f;if(e.enableDigitGrouping){n=this,i=this,o=0,a=[],s="\\ ",l=".",c=n;do if(/^[0-9]$/.test(c.ctrlSeq))n=c;else if(c.ctrlSeq===s)n=c,o+=1;else{if(c.ctrlSeq!==l)break;n=c,a.push(c)}while(c=n[L]);for(;c=i[R];)if(/^[0-9]$/.test(c.ctrlSeq))i=c;else if(c.ctrlSeq===s)i=c,o+=1;else{if(c.ctrlSeq!==l)break;i=c,a.push(c)}for(;i!==n&&n&&n.ctrlSeq===s;)n=n[R],o-=1;for(;i!==n&&i&&i.ctrlSeq===s;)i=i[L],o-=1;n===i&&n&&n.ctrlSeq===s||(f=o>0||a.length>1,f?this.removeGroupingBetween(n,i):a[0]?(a[0]!==n&&this.addGroupingBetween(a[0][L],n),a[0]!==i&&this.removeGroupingBetween(a[0][R],i)):this.addGroupingBetween(i,n))}},r.prototype.removeGroupingBetween=function(e,n){var i=e;do if(i instanceof r&&i.setGroupingClass(void 0),!i||i===n)break;while(i=i[R])},r.prototype.addGroupingBetween=function(e,n){var i,o,a=e,s=0,l=0;for(a=e;a&&(l+=1,a!==n);)a=a[L];for(i=l%3,i===0&&(i=3),a=e;a&&(s+=1,o=void 0,l>=4&&(s===l?o="mq-group-leading-"+i:s%3==0&&s!==l&&(o="mq-group-start"),o||(o="mq-group-other")),a instanceof r&&a.setGroupingClass(o),a!==n);)a=a[L]},r.prototype.setGroupingClass=function(e){this._groupingClass!==e&&(this._groupingClass&&this.domFrag().removeClass(this._groupingClass),e&&this.domFrag().addClass(e),this._groupingClass=e)},r}(MQSymbol),Digit=function(t){function r(e,n){return t.call(this,e,h("span",{class:"mq-digit"},[h.text(e)]),void 0,n)||this}return __extends(r,t),r.prototype.createLeftOf=function(e){var n=e[L],i=n&&n[L],o=e.parent.parent instanceof SupSub?e.parent.parent.sub:void 0;e.options.autoSubscriptNumerals&&e.parent!==o&&(n instanceof Variable&&n.isItalic!==!1||n instanceof SupSub&&i instanceof Variable&&i.isItalic!==!1)?(new SubscriptCommand().createLeftOf(e),t.prototype.createLeftOf.call(this,e),e.insRightOf(e.parent.parent)):t.prototype.createLeftOf.call(this,e)},r.prototype.mathspeak=function(e){var n,i,o,a;return e&&e.createdLeftOf&&(n=e.createdLeftOf,i=n[L],o=i&&i[L],a=n.parent.parent instanceof SupSub?n.parent.parent.sub:void 0,n.options.autoSubscriptNumerals&&n.parent!==a&&(i instanceof Variable&&i.isItalic!==!1||n[L]instanceof SupSub&&o instanceof Variable&&o.isItalic!==!1))?"Subscript "+t.prototype.mathspeak.call(this)+" Baseline":t.prototype.mathspeak.call(this)},r}(DigitGroupingChar),Variable=function(t){function r(e,n){return t.call(this,e,h("var",{},[n||h.text(e)]))||this}return __extends(r,t),r.prototype.text=function(){var e=this.ctrlSeq||"";return this.isPartOfOperator?e[0]=="\\"?e=e.slice(1,e.length):e[e.length-1]==" "&&(e=e.slice(0,-1)):(!this[L]||this[L]instanceof r||this[L]instanceof BinaryOperator||this[L].ctrlSeq==="\\ "||(e="*"+e),!this[R]||this[R]instanceof BinaryOperator||this[R]instanceof SupSub||(e+="*")),e},r.prototype.mathspeak=function(){var e=this.ctrlSeq||"";return this.isPartOfOperator||e.length>1||this.parent&&this.parent.parent&&this.parent.parent.isTextBlock()?t.prototype.mathspeak.call(this):'"'+e+'"'},r}(MQSymbol),Options.prototype.autoCommands={_maxLength:0},baseOptionProcessors.autoCommands=function(t){var r,e,n,i,o;if(typeof t!="string"||!/^[a-z]+(?: [a-z]+)*$/i.test(t))throw'"'+t+'" not a space-delimited list of only letters';for(r=t.split(" "),e={},n=0,i=0;i<r.length;i+=1){if(o=r[i],o.length<2)throw'autocommand "'+o+'" not minimum length of 2';if(LatexCmds[o]===OperatorName)throw'"'+o+'" is a built-in operator name';e[o]=1,n=max(n,o.length)}return e._maxLength=n,e},Options.prototype.quietEmptyDelimiters={},baseOptionProcessors.quietEmptyDelimiters=function(t){var r,e,n,i;for(t===void 0&&(t=""),r=t.split(" "),e={},n=0;n<r.length;n+=1)i=r[n],e[i]=1;return e},Options.prototype.autoParenthesizedFunctions={_maxLength:0},baseOptionProcessors.autoParenthesizedFunctions=function(t){var r,e,n,i,o;if(typeof t!="string"||!/^[a-z]+(?: [a-z]+)*$/i.test(t))throw'"'+t+'" not a space-delimited list of only letters';for(r=t.split(" "),e={},n=0,i=0;i<r.length;i+=1){if(o=r[i],o.length<2)throw'autocommand "'+o+'" not minimum length of 2';e[o]=1,n=max(n,o.length)}return e._maxLength=n,e},Letter=function(t){function r(e){var n=t.call(this,e)||this;return n.letter=e,n}return __extends(r,t),r.prototype.checkAutoCmds=function(e){var n,i,o,a,s,l,c;if(!this.shouldIgnoreSubstitutionInSimpleSubscript(e.options)&&(n=e.options.autoCommands,(i=n._maxLength||0)>0)){for(o="",a=this,s=0;a instanceof r&&a.ctrlSeq===a.letter&&s<i;)o=a.letter+o,a=a[L],s+=1;for(;o.length;){if(n.hasOwnProperty(o)){for(a=this,s=1;a&&s<o.length;s+=1,a=a[L]);return new Fragment(a,this).remove(),e[L]=a[L],l=LatexCmds[o],c=isMQNodeClass(l)?new l(o):l(o),c.createLeftOf(e)}o=o.slice(1)}}},r.prototype.autoParenthesize=function(e){var n,i,o,a,s,l,c=e.parent.getEnd(R);if(!(c&&c instanceof Bracket&&c.ctrlSeq==="\\left("||this.shouldIgnoreSubstitutionInSimpleSubscript(e.options))){for(n="",i=this,o=0,a=e.options.autoParenthesizedFunctions,s=a._maxLength||0,l=e.options.autoOperatorNames;i instanceof r&&o<s;)n=i.letter+n,i=i[L],o+=1;for(;n.length;){if(a.hasOwnProperty(n)&&l.hasOwnProperty(n))return e.parent.write(e,"(");n=n.slice(1)}}},r.prototype.createLeftOf=function(e){t.prototype.createLeftOf.call(this,e),this.checkAutoCmds(e),this.autoParenthesize(e)},r.prototype.italicize=function(e){return this.isItalic=e,this.isPartOfOperator=!e,this.domFrag().toggleClass("mq-operator-name",!e),this},r.prototype.finalizeTree=function(e,n){this.sharedSiblingMethod(e,n)},r.prototype.siblingDeleted=function(e,n){this.sharedSiblingMethod(e,n)},r.prototype.siblingCreated=function(e,n){this.sharedSiblingMethod(e,n)},r.prototype.sharedSiblingMethod=function(e,n){n!==L&&this[R]instanceof r||this.autoUnItalicize(e)},r.prototype.autoUnItalicize=function(e){var n,i,o,a,s,l,c,f,d,u,m,p,_,y,g,v,x,b,S=e.autoOperatorNames;if(S._maxLength!==0&&!this.shouldIgnoreSubstitutionInSimpleSubscript(e)){for(n=this.letter,i=this[L];i instanceof r;i=i[L])n=i.letter+n;for(o=this[R];o instanceof r;o=o[R])n+=o.letter;a=i&&i[R],s=o&&o[L],new Fragment(a||this.parent.getEnd(L),s||this.parent.getEnd(R)).each(function(M){M instanceof r&&(M.italicize(!0).domFrag().removeClass("mq-first mq-last mq-followed-by-supsub"),M.ctrlSeq=M.letter)}),l=S._maxLength||0;t:for(c=0,f=i[R]||this.parent.getEnd(L);f&&c<n.length;c+=1,f=f[R])for(d=min(l,n.length-c);d>0;d-=1)if(u=n.slice(c,c+d),m=void 0,S.hasOwnProperty(u)){for(p=0,_=f;p<d;p+=1,_=_[R])_ instanceof r&&(_.italicize(!1),m=_);y=BuiltInOpNames.hasOwnProperty(u),f.ctrlSeq=(y?"\\":"\\operatorname{")+f.ctrlSeq,m.ctrlSeq+=y?" ":"}",TwoWordOpNames.hasOwnProperty(u)&&(g=m[L],v=g&&g[L],x=v&&v[L],x.domFrag().addClass("mq-last")),this.shouldOmitPadding(f[L])||f.domFrag().addClass("mq-first"),this.shouldOmitPadding(m[R])||(m[R]instanceof SupSub?(b=m[R],(b.siblingCreated=b.siblingDeleted=function(){b.domFrag().toggleClass("mq-after-operator-name",!(b[R]instanceof Bracket))})()):m.domFrag().toggleClass("mq-last",!(m[R]instanceof Bracket))),c+=d-1,f=m;continue t}}},r.prototype.shouldOmitPadding=function(e){return!e||e.ctrlSeq==="."||e instanceof BinaryOperator||e instanceof SummationNotation},r}(Variable),BuiltInOpNames={},Options.prototype.autoOperatorNames=defaultAutoOpNames(),TwoWordOpNames={limsup:1,liminf:1,projlim:1,injlim:1},baseOptionProcessors.autoOperatorNames=function(t){var r,e,n,i,o,a;if(typeof t!="string")throw'"'+t+'" not a space-delimited list';if(!/^[a-z\|\-]+(?: [a-z\|\-]+)*$/i.test(t))throw'"'+t+'" not a space-delimited list of letters or "|"';for(r=t.split(" "),e={},n=0,i=0;i<r.length;i+=1){if(o=r[i],o.length<2)throw'"'+o+'" not minimum length of 2';if(o.indexOf("|")<0)e[o]=o,n=max(n,o.length);else{if(a=o.split("|"),a.length>2)throw'"'+o+'" has more than 1 mathspeak delimiter';if(a[0].length<2)throw'"'+o[0]+'" not minimum length of 2';e[a[0]]=a[1].replace(/-/g," "),n=max(n,a[0].length)}}return e._maxLength=n,e},OperatorName=function(t){function r(e){return t.call(this,e||"")||this}return __extends(r,t),r.prototype.createLeftOf=function(e){var n,i=this.ctrlSeq;for(n=0;n<i.length;n+=1)new Letter(i.charAt(n)).createLeftOf(e)},r.prototype.parser=function(){var e,n=this.ctrlSeq,i=new MathBlock;for(e=0;e<n.length;e+=1)new Letter(n.charAt(e)).adopt(i,i.getEnd(R),0);return Parser.succeed(i.children())},r}(MQSymbol);for(fn in Options.prototype.autoOperatorNames)Options.prototype.autoOperatorNames.hasOwnProperty(fn)&&(LatexCmds[fn]=OperatorName);LatexCmds.operatorname=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.createLeftOf=function(){},r.prototype.numBlocks=function(){return 1},r.prototype.parser=function(){return latexMathParser.block.map(function(e){var n=!0,i="",o=e.children();return o.each(function(a){a instanceof Letter?i+=a.letter:n=!1}),n&&i==="ans"?AnsBuilder():o})},r}(MathCommand),LatexCmds.f=function(t){function r(){var e=this,n="f";return e=t.call(this,n)||this,e.letter=n,e.domView=new DOMView(0,function(){return h("var",{class:"mq-f"},[h.text("f")])}),e}return __extends(r,t),r.prototype.italicize=function(e){return this.domFrag().eachElement(function(n){return n.textContent="f"}),this.domFrag().toggleClass("mq-f",e),t.prototype.italicize.call(this,e)},r}(Letter),LatexCmds[" "]=LatexCmds.space=function(){return new DigitGroupingChar("\\ ",h("span",{},[h.text(U_NO_BREAK_SPACE)])," ")},LatexCmds["."]=function(){return new DigitGroupingChar(".",h("span",{class:"mq-digit"},[h.text(".")]),".")},LatexCmds["'"]=LatexCmds.prime=bindVanillaSymbol("'","&prime;","prime"),LatexCmds["″"]=LatexCmds.dprime=bindVanillaSymbol("″","&Prime;","double prime"),LatexCmds.backslash=bindVanillaSymbol("\\backslash ","\\","backslash"),CharCmds["\\"]||(CharCmds["\\"]=LatexCmds.backslash),LatexCmds.$=bindVanillaSymbol("\\$","$","dollar"),LatexCmds.square=bindVanillaSymbol("\\square ","□","square"),LatexCmds.mid=bindVanillaSymbol("\\mid ","∣","mid"),NonSymbolaSymbol=function(t){function r(e,n,i){return t.call(this,e,h("span",{class:"mq-nonSymbola"},[n||h.text(e)]))||this}return __extends(r,t),r}(MQSymbol),LatexCmds["@"]=function(){return new NonSymbolaSymbol("@")},LatexCmds["&"]=function(){return new NonSymbolaSymbol("\\&",h.entityText("&amp;"),"and")},LatexCmds["%"]=function(t){function r(){return t.call(this,"\\%",h.text("%"),"percent")||this}return __extends(r,t),r.prototype.parser=function(){var e=Parser.optWhitespace,n=Parser.string;return e.then(n("\\operatorname{of}").map(function(){return PercentOfBuilder()})).or(t.prototype.parser.call(this))},r}(NonSymbolaSymbol),LatexCmds["∥"]=LatexCmds.parallel=bindVanillaSymbol("\\parallel ","&#x2225;","parallel"),LatexCmds["∦"]=LatexCmds.nparallel=bindVanillaSymbol("\\nparallel ","&#x2226;","not parallel"),LatexCmds["⟂"]=LatexCmds.perp=bindVanillaSymbol("\\perp ","&#x27C2;","perpendicular"),LatexCmds.alpha=LatexCmds.beta=LatexCmds.gamma=LatexCmds.delta=LatexCmds.zeta=LatexCmds.eta=LatexCmds.theta=LatexCmds.iota=LatexCmds.kappa=LatexCmds.mu=LatexCmds.nu=LatexCmds.xi=LatexCmds.rho=LatexCmds.sigma=LatexCmds.tau=LatexCmds.chi=LatexCmds.psi=LatexCmds.omega=function(t){return new Variable("\\"+t+" ",h.entityText("&"+t+";"))},LatexCmds.phi=bindVariable("\\phi ","&#981;"),LatexCmds.phiv=LatexCmds.varphi=bindVariable("\\varphi ","&phi;"),LatexCmds.epsilon=bindVariable("\\epsilon ","&#1013;"),LatexCmds.epsiv=LatexCmds.varepsilon=bindVariable("\\varepsilon ","&epsilon;"),LatexCmds.piv=LatexCmds.varpi=bindVariable("\\varpi ","&piv;"),LatexCmds.sigmaf=LatexCmds.sigmav=LatexCmds.varsigma=bindVariable("\\varsigma ","&sigmaf;"),LatexCmds.thetav=LatexCmds.vartheta=LatexCmds.thetasym=bindVariable("\\vartheta ","&thetasym;"),LatexCmds.upsilon=LatexCmds.upsi=bindVariable("\\upsilon ","&upsilon;"),LatexCmds.gammad=LatexCmds.Gammad=LatexCmds.digamma=bindVariable("\\digamma ","&#989;"),LatexCmds.kappav=LatexCmds.varkappa=bindVariable("\\varkappa ","&#1008;"),LatexCmds.rhov=LatexCmds.varrho=bindVariable("\\varrho ","&#1009;"),LatexCmds.pi=LatexCmds.π=function(){return new NonSymbolaSymbol("\\pi ",h.entityText("&pi;"),"pi")},LatexCmds.lambda=function(){return new NonSymbolaSymbol("\\lambda ",h.entityText("&lambda;"),"lambda")},LatexCmds.Upsilon=LatexCmds.Upsi=LatexCmds.upsih=LatexCmds.Upsih=function(){return new MQSymbol("\\Upsilon ",h("var",{style:"font-family: serif"},[h.entityText("&upsih;")]),"capital upsilon")},LatexCmds.Gamma=LatexCmds.Delta=LatexCmds.Theta=LatexCmds.Lambda=LatexCmds.Xi=LatexCmds.Pi=LatexCmds.Sigma=LatexCmds.Phi=LatexCmds.Psi=LatexCmds.Omega=LatexCmds.forall=function(t){return new VanillaSymbol("\\"+t+" ",h.entityText("&"+t+";"))},LatexFragment=function(t){function r(e){var n=t.call(this)||this;return n.latexStr=e,n}return __extends(r,t),r.prototype.createLeftOf=function(e){var n,i,o,a,s=latexMathParser.parse(this.latexStr);s.children().adopt(e.parent,e[L],e[R]),e[L]=s.getEnd(R),domFrag(s.html()).insertBefore(e.domFrag()),s.finalizeInsert(e.options,e),n=s.getEnd(R),i=n&&n[R],i&&i.siblingCreated(e.options,L),o=s.getEnd(L),a=o&&o[L],a&&a.siblingCreated(e.options,R),e.parent.bubble(function(l){l.reflow()})},r.prototype.mathspeak=function(){return this.mathspeakOverride?t.prototype.mathspeak.call(this):latexMathParser.parse(this.latexStr).mathspeak()},r.prototype.parser=function(){var e=latexMathParser.parse(this.latexStr).children();return Parser.succeed(e)},r}(MathCommand),LatexCmds["⁰"]=function(){return new LatexFragment("^0")},LatexCmds["¹"]=function(){return new LatexFragment("^1")},LatexCmds["²"]=function(){return new LatexFragment("^2")},LatexCmds["³"]=function(){return new LatexFragment("^3")},LatexCmds["⁴"]=function(){return new LatexFragment("^4")},LatexCmds["⁵"]=function(){return new LatexFragment("^5")},LatexCmds["⁶"]=function(){return new LatexFragment("^6")},LatexCmds["⁷"]=function(){return new LatexFragment("^7")},LatexCmds["⁸"]=function(){return new LatexFragment("^8")},LatexCmds["⁹"]=function(){return new LatexFragment("^9")},LatexCmds["¼"]=function(){return new LatexFragment("\\frac14")},LatexCmds["½"]=function(){return new LatexFragment("\\frac12")},LatexCmds["¾"]=function(){return new LatexFragment("\\frac34")},LatexCmds["√"]=function(){return new LatexFragment("\\sqrt{}")},PlusMinus=function(t){function r(e,n,i){return t.call(this,e,n,void 0,i,!0)||this}return __extends(r,t),r.prototype.contactWeld=function(e,n){this.sharedSiblingMethod(e.options,n)},r.prototype.siblingCreated=function(e,n){this.sharedSiblingMethod(e,n)},r.prototype.siblingDeleted=function(e,n){this.sharedSiblingMethod(e,n)},r.prototype.sharedSiblingMethod=function(e,n){if(n!==R)return this.domFrag().oneElement().className=isBinaryOperator(this)?"mq-binary-operator":"",this},r}(BinaryOperator),LatexCmds["+"]=function(t){function r(){return t.call(this,"+",h.text("+"))||this}return __extends(r,t),r.prototype.mathspeak=function(){return isBinaryOperator(this)?"plus":"positive"},r}(PlusMinus),MinusNode=function(t){function r(){return t.call(this,"-",h.entityText("&minus;"))||this}return __extends(r,t),r.prototype.mathspeak=function(){return isBinaryOperator(this)?"minus":"negative"},r}(PlusMinus),LatexCmds["−"]=LatexCmds["—"]=LatexCmds["–"]=LatexCmds["-"]=MinusNode,LatexCmds["±"]=LatexCmds.pm=LatexCmds.plusmn=LatexCmds.plusminus=function(){return new PlusMinus("\\pm ",h.entityText("&plusmn;"),"plus-or-minus")},LatexCmds.mp=LatexCmds.mnplus=LatexCmds.minusplus=function(){return new PlusMinus("\\mp ",h.entityText("&#8723;"),"minus-or-plus")},CharCmds["*"]=LatexCmds.sdot=LatexCmds.cdot=bindBinaryOperator("\\cdot ","&middot;","*","times"),To=function(t){function r(){return t.call(this,"\\to ",h.entityText("&rarr;"),"to")||this}return __extends(r,t),r.prototype.deleteTowards=function(e,n){if(e===L){var i=n[L];return new Fragment(i,this).remove(),n[L]=i[L],new MinusNode().createLeftOf(n),void n[L].bubble(function(o){o.reflow()})}t.prototype.deleteTowards.call(this,e,n)},r}(BinaryOperator),LatexCmds["→"]=LatexCmds.to=To,Inequality=function(t){function r(e,n){var i=this,o=n?"Strict":"";return i=t.call(this,e["ctrlSeq".concat(o)],h.entityText(e["htmlEntity".concat(o)]),e["text".concat(o)],e["mathspeak".concat(o)])||this,i.data=e,i.strict=n,i}return __extends(r,t),r.prototype.swap=function(e){this.strict=e;var n=e?"Strict":"";this.ctrlSeq=this.data["ctrlSeq".concat(n)],this.domFrag().children().replaceWith(domFrag(h.entityText(this.data["htmlEntity".concat(n)]))),this.textTemplate=[this.data["text".concat(n)]],this.mathspeakName=this.data["mathspeak".concat(n)]},r.prototype.deleteTowards=function(e,n){if(e===L&&!this.strict)return this.swap(!0),void this.bubble(function(i){i.reflow()});t.prototype.deleteTowards.call(this,e,n)},r}(BinaryOperator),less={ctrlSeq:"\\le ",htmlEntity:"&le;",text:"≤",mathspeak:"less than or equal to",ctrlSeqStrict:"<",htmlEntityStrict:"&lt;",textStrict:"<",mathspeakStrict:"less than"},greater={ctrlSeq:"\\ge ",htmlEntity:"&ge;",text:"≥",mathspeak:"greater than or equal to",ctrlSeqStrict:">",htmlEntityStrict:"&gt;",textStrict:">",mathspeakStrict:"greater than"},Greater=function(t){function r(){return t.call(this,greater,!0)||this}return __extends(r,t),r.prototype.createLeftOf=function(e){var n,i=e[L];if(i instanceof BinaryOperator&&i.ctrlSeq==="-")return n=i,e[L]=n[L],n.remove(),new To().createLeftOf(e),void e[L].bubble(function(o){o.reflow()});t.prototype.createLeftOf.call(this,e)},r}(Inequality),LatexCmds["<"]=LatexCmds.lt=function(){return new Inequality(less,!0)},LatexCmds[">"]=LatexCmds.gt=Greater,LatexCmds["≤"]=LatexCmds.le=LatexCmds.leq=function(){return new Inequality(less,!1)},LatexCmds["≥"]=LatexCmds.ge=LatexCmds.geq=function(){return new Inequality(greater,!1)},LatexCmds.infty=LatexCmds.infin=LatexCmds.infinity=bindVanillaSymbol("\\infty ","&infin;","infinity"),LatexCmds["≠"]=LatexCmds.ne=LatexCmds.neq=bindBinaryOperator("\\ne ","&ne;","not equal"),Equality=function(t){function r(){return t.call(this,"=",h.text("="),"=","equals")||this}return __extends(r,t),r.prototype.createLeftOf=function(e){var n=e[L];if(n instanceof Inequality&&n.strict)return n.swap(!1),void n.bubble(function(i){i.reflow()});t.prototype.createLeftOf.call(this,e)},r}(BinaryOperator),LatexCmds["="]=Equality,LatexCmds["×"]=LatexCmds.times=LatexCmds.cross=bindBinaryOperator("\\times ","&times;","[x]","times"),LatexCmds["÷"]=LatexCmds.div=LatexCmds.divide=LatexCmds.divides=bindBinaryOperator("\\div ","&divide;","[/]","over"),Sim=function(t){function r(){return t.call(this,"\\sim ",h.text("~"),"~","tilde")||this}return __extends(r,t),r.prototype.createLeftOf=function(e){if(e[L]instanceof r){var n=e[L];return e[L]=n[L],n.remove(),new Approx().createLeftOf(e),void e[L].bubble(function(i){i.reflow()})}t.prototype.createLeftOf.call(this,e)},r}(BinaryOperator),Approx=function(t){function r(){return t.call(this,"\\approx ",h.entityText("&approx;"),"≈","approximately equal")||this}return __extends(r,t),r.prototype.deleteTowards=function(e,n){if(e===L){var i=n[L];return new Fragment(i,this).remove(),n[L]=i[L],new Sim().createLeftOf(n),void n[L].bubble(function(o){o.reflow()})}t.prototype.deleteTowards.call(this,e,n)},r}(BinaryOperator),LatexCmds.tildeNbsp=bindVanillaSymbol("~",U_NO_BREAK_SPACE," "),LatexCmds.sim=Sim,LatexCmds["≈"]=LatexCmds.approx=Approx,CharCmds["~"]=LatexCmds.sim,LatexCmds["~"]=LatexCmds.tildeNbsp,baseOptionProcessors.interpretTildeAsSim=function(t){var r=!!t;return LatexCmds["~"]=r?LatexCmds.sim:LatexCmds.tildeNbsp,r},SVG_SYMBOLS={sqrt:{width:"",html:function(){return h("svg",{preserveAspectRatio:"none",viewBox:"0 0 32 54"},[h("path",{d:"M0 33 L7 27 L12.5 47 L13 47 L30 0 L32 0 L13 54 L11 54 L4.5 31 L0 33"})])}},"|":{width:".4em",html:function(){return h("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[h("path",{d:"M4.4 0 L4.4 54 L5.6 54 L5.6 0"})])}},"[":{width:".55em",html:function(){return h("svg",{preserveAspectRatio:"none",viewBox:"0 0 11 24"},[h("path",{d:"M8 0 L3 0 L3 24 L8 24 L8 23 L4 23 L4 1 L8 1"})])}},"]":{width:".55em",html:function(){return h("svg",{preserveAspectRatio:"none",viewBox:"0 0 11 24"},[h("path",{d:"M3 0 L8 0 L8 24 L3 24 L3 23 L7 23 L7 1 L3 1"})])}},"(":{width:".55em",html:function(){return h("svg",{preserveAspectRatio:"none",viewBox:"3 0 106 186"},[h("path",{d:"M85 0 A61 101 0 0 0 85 186 L75 186 A75 101 0 0 1 75 0"})])}},")":{width:".55em",html:function(){return h("svg",{preserveAspectRatio:"none",viewBox:"3 0 106 186"},[h("path",{d:"M24 0 A61 101 0 0 1 24 186 L34 186 A75 101 0 0 0 34 0"})])}},"{":{width:".7em",html:function(){return h("svg",{preserveAspectRatio:"none",viewBox:"10 0 210 350"},[h("path",{d:"M170 0 L170 6 A47 52 0 0 0 123 60 L123 127 A35 48 0 0 1 88 175 A35 48 0 0 1 123 223 L123 290 A47 52 0 0 0 170 344 L170 350 L160 350 A58 49 0 0 1 102 301 L103 220 A45 40 0 0 0 58 180 L58 170 A45 40 0 0 0 103 130 L103 49 A58 49 0 0 1 161 0"})])}},"}":{width:".7em",html:function(){return h("svg",{preserveAspectRatio:"none",viewBox:"10 0 210 350"},[h("path",{d:"M60 0 L60 6 A47 52 0 0 1 107 60 L107 127 A35 48 0 0 0 142 175 A35 48 0 0 0 107 223 L107 290 A47 52 0 0 1 60 344 L60 350 L70 350 A58 49 0 0 0 128 301 L127 220 A45 40 0 0 1 172 180 L172 170 A45 40 0 0 1 127 130 L127 49 A58 49 0 0 0 70 0"})])}},"&#8741;":{width:".7em",html:function(){return h("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[h("path",{d:"M3.2 0 L3.2 54 L4 54 L4 0 M6.8 0 L6.8 54 L6 54 L6 0"})])}},"&lang;":{width:".55em",html:function(){return h("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[h("path",{d:"M6.8 0 L3.2 27 L6.8 54 L7.8 54 L4.2 27 L7.8 0"})])}},"&rang;":{width:".55em",html:function(){return h("svg",{preserveAspectRatio:"none",viewBox:"0 0 10 54"},[h("path",{d:"M3.2 0 L6.8 27 L3.2 54 L2.2 54 L5.8 27 L2.2 0"})])}}},Style=function(t){function r(e,n,i,o,a){var s=t.call(this,e,new DOMView(1,function(l){return h.block(n,i,l[0])}))||this;return s.ariaLabel=o||e.replace(/^\\/,""),s.mathspeakTemplate=["Start"+s.ariaLabel+",","End"+s.ariaLabel],s.shouldNotSpeakDelimiters=a&&a.shouldNotSpeakDelimiters,s}return __extends(r,t),r.prototype.mathspeak=function(e){return!this.shouldNotSpeakDelimiters||e&&e.ignoreShorthand?t.prototype.mathspeak.call(this):this.foldChildren("",function(n,i){return n+" "+i.mathspeak(e)}).trim()},r}(MathCommand),LatexCmds.mathrm=function(t){function r(){return t.call(this,"\\mathrm","span",{class:"mq-roman mq-font"},"Roman Font",{shouldNotSpeakDelimiters:!0})||this}return __extends(r,t),r.prototype.isTextBlock=function(){return!0},r}(Style),LatexCmds.mathit=function(){return new Style("\\mathit","i",{class:"mq-font"},"Italic Font")},LatexCmds.mathbf=function(){return new Style("\\mathbf","b",{class:"mq-font"},"Bold Font")},LatexCmds.mathsf=function(){return new Style("\\mathsf","span",{class:"mq-sans-serif mq-font"},"Serif Font")},LatexCmds.mathtt=function(){return new Style("\\mathtt","span",{class:"mq-monospace mq-font"},"Math Text")},LatexCmds.underline=function(){return new Style("\\underline","span",{class:"mq-non-leaf mq-underline"},"Underline")},LatexCmds.overline=LatexCmds.bar=function(){return new Style("\\overline","span",{class:"mq-non-leaf mq-overline"},"Overline")},LatexCmds.overrightarrow=function(){return new Style("\\overrightarrow","span",{class:"mq-non-leaf mq-overarrow mq-arrow-right"},"Over Right Arrow")},LatexCmds.overleftarrow=function(){return new Style("\\overleftarrow","span",{class:"mq-non-leaf mq-overarrow mq-arrow-left"},"Over Left Arrow")},LatexCmds.overleftrightarrow=function(){return new Style("\\overleftrightarrow ","span",{class:"mq-non-leaf mq-overarrow mq-arrow-leftright"},"Over Left and Right Arrow")},LatexCmds.overarc=function(){return new Style("\\overarc","span",{class:"mq-non-leaf mq-overarc"},"Over Arc")},LatexCmds.dot=function(){return new MathCommand("\\dot",new DOMView(1,function(t){return h("span",{class:"mq-non-leaf"},[h("span",{class:"mq-dot-recurring-inner"},[h("span",{class:"mq-dot-recurring"},[h.text(U_DOT_ABOVE)]),h.block("span",{class:"mq-empty-box"},t[0])])])}))},LatexCmds.textcolor=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.setColor=function(e){this.color=e,this.domView=new DOMView(1,function(n){return h.block("span",{class:"mq-textcolor",style:"color:"+e},n[0])}),this.ariaLabel=e.replace(/^\\/,""),this.mathspeakTemplate=["Start "+this.ariaLabel+",","End "+this.ariaLabel]},r.prototype.latexRecursive=function(e){var n,i;this.checkCursorContextOpen(e),i=this.blocks[0],e.latex+="\\textcolor{"+this.color+"}{",(n=i.latexRecursive)===null||n===void 0||n.call(i,e),e.latex+="}",this.checkCursorContextClose(e)},r.prototype.parser=function(){var e=this,n=Parser.optWhitespace,i=Parser.string,o=Parser.regex;return n.then(i("{")).then(o(/^[#\w\s.,()%-]*/)).skip(i("}")).then(function(a){return e.setColor(a),t.prototype.parser.call(e)})},r.prototype.isStyleBlock=function(){return!0},r}(MathCommand),LatexCmds.class=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.parser=function(){var e=this,n=Parser.string,i=Parser.regex;return Parser.optWhitespace.then(n("{")).then(i(/^[-\w\s\\\xA0-\xFF]*/)).skip(n("}")).then(function(o){return e.cls=o||"",e.domView=new DOMView(1,function(a){return h.block("span",{class:"mq-class ".concat(o)},a[0])}),e.ariaLabel=o+" class",e.mathspeakTemplate=["Start "+e.ariaLabel+",","End "+e.ariaLabel],t.prototype.parser.call(e)})},r.prototype.latexRecursive=function(e){var n,i;this.checkCursorContextOpen(e),i=this.blocks[0],e.latex+="\\class{"+this.cls+"}{",(n=i.latexRecursive)===null||n===void 0||n.call(i,e),e.latex+="}",this.checkCursorContextClose(e)},r.prototype.isStyleBlock=function(){return!0},r}(MathCommand),intRgx=/^[\+\-]?[\d]+$/,Options.prototype.charsThatBreakOutOfSupSub="",SupSub=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.ctrlSeq="_{...}^{...}",e}return __extends(r,t),r.prototype.setEnds=function(e){pray("SupSub ends must be MathBlocks",e[L]instanceof MathBlock&&e[R]instanceof MathBlock),this.ends=e},r.prototype.getEnd=function(e){return this.ends[e]},r.prototype.createLeftOf=function(e){if(this.replacedFragment||e[L]||!e.options.supSubsRequireOperand)return t.prototype.createLeftOf.call(this,e)},r.prototype.contactWeld=function(e){var n,i,o,a,s,l,c;for(n=L;n;n=n===L&&R)if(i=this[n],o=void 0,i instanceof r){for(a="sub";a;a=a==="sub"&&"sup")s=this[a],l=i[a],s&&(l?s.isEmpty()?o=new Point(l,0,l.getEnd(L)):(s.domFrag().children().insAtDirEnd(-n,l.domFrag().oneElement()),c=s.children().disown(),o=new Point(l,c.getEnd(R),l.getEnd(L)),n===L?c.adopt(l,l.getEnd(R),0):c.adopt(l,0,l.getEnd(L))):i.addBlock(s.disown()),this.placeCursor=function(f,d){return function(u){u.insAtDirEnd(-n,f||d)}}(l,s));this.remove(),e&&e[L]===this&&(n===R&&o?o[L]?e.insRightOf(o[L]):e.insAtLeftEnd(o.parent):e.insRightOf(i));break}},r.prototype.finalizeTree=function(){this.getEnd(L).write=function(e,n){if(e.options.autoSubscriptNumerals&&this===this.parent.sub&&"0123456789".indexOf(n)>=0){var i=this.chToCmd(n,e.options);return i instanceof MQSymbol?e.deleteSelection():e.clearSelection().insRightOf(this.parent),i.createLeftOf(e.show()),void e.controller.aria.queueTranslatableString("Baseline").alert(i.mathspeak({createdLeftOf:e}))}e[L]&&!e[R]&&!e.selection&&e.options.charsThatBreakOutOfSupSub.indexOf(n)>-1&&(e.insRightOf(this.parent),e.controller.aria.queueTranslatableString("Baseline")),MathBlock.prototype.write.call(this,e,n)}},r.prototype.moveTowards=function(e,n,i){n.options.autoSubscriptNumerals&&!this.sup?n.insDirOf(e,this):t.prototype.moveTowards.call(this,e,n,i)},r.prototype.deleteTowards=function(e,n){if(n.options.autoSubscriptNumerals&&this.sub){var i=this.sub.getEnd(-e);i instanceof MQSymbol?i.remove():i&&i.deleteTowards(e,n.insAtDirEnd(-e,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(L,n.insAtLeftEnd(this.sub)),this.sup&&n.insDirOf(-e,this))}else t.prototype.deleteTowards.call(this,e,n)},r.prototype.latexRecursive=function(e){var n,i,o,a,s,l;this.checkCursorContextOpen(e),this.sub&&(e.latex+="_{",s=e.latex.length,(i=(n=this.sub).latexRecursive)===null||i===void 0||i.call(n,e),l=e.latex.length,s===l&&(e.latex+=" "),e.latex+="}"),this.sup&&(e.latex+="^{",s=e.latex.length,(a=(o=this.sup).latexRecursive)===null||a===void 0||a.call(o,e),l=e.latex.length,s===l&&(e.latex+=" "),e.latex+="}"),this.checkCursorContextClose(e)},r.prototype.text=function(){function e(n,i){var o=i&&i.text()||"";return i?n+(o.length===1?o:"("+(o||" ")+")"):""}return e("_",this.sub)+e("^",this.sup)},r.prototype.addBlock=function(e){this.supsub==="sub"?(this.sup=this.upInto=this.sub.upOutOf=e,e.adopt(this,this.sub,0).downOutOf=this.sub,e.setDOM(domFrag(h("span",{class:"mq-sup"})).append(e.domFrag().children()).prependTo(this.domFrag().oneElement()).oneElement()),NodeBase.linkElementByBlockNode(e.domFrag().oneElement(),e)):(this.sub=this.downInto=this.sup.downOutOf=e,e.adopt(this,0,this.sup).upOutOf=this.sup,this.domFrag().removeClass("mq-sup-only"),e.setDOM(domFrag(h("span",{class:"mq-sub"})).append(e.domFrag().children()).appendTo(this.domFrag().oneElement()).oneElement()),NodeBase.linkElementByBlockNode(e.domFrag().oneElement(),e),this.domFrag().append(domFrag(h("span",{style:"display:inline-block;width:0"},[h.text(U_ZERO_WIDTH_SPACE)]))));for(var n=0;n<2;n+=1)(function(i,o,a,s){i[o].deleteOutOf=function(l,c){var f,d;c.insDirOf(this[l]?-l:l,this.parent),this.isEmpty()||(f=this.getEnd(l),this.children().disown().withDirAdopt(l,c.parent,c[l],c[-l]).domFrag().insDirOf(-l,c.domFrag()),c[-l]=f),i.supsub=a,delete i[o],delete i["".concat(s,"Into")],d=i[a],d["".concat(s,"OutOf")]=insLeftOfMeUnlessAtEnd,delete d.deleteOutOf,o==="sub"&&i.domFrag().addClass("mq-sup-only").children().last().remove(),this.remove()}})(this,"sub sup".split(" ")[n],"sup sub".split(" ")[n],"down up".split(" ")[n])},r}(MathCommand),SubscriptCommand=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.supsub="sub",e.domView=new DOMView(1,function(n){return h("span",{class:"mq-supsub mq-non-leaf"},[h.block("span",{class:"mq-sub"},n[0]),h("span",{style:"display:inline-block;width:0"},[h.text(U_ZERO_WIDTH_SPACE)])])}),e.textTemplate=["_"],e.mathspeakTemplate=["Subscript,",", Baseline"],e.ariaLabel="subscript",e}return __extends(r,t),r.prototype.finalizeTree=function(){this.downInto=this.sub=this.getEnd(L),this.sub.upOutOf=insLeftOfMeUnlessAtEnd,t.prototype.finalizeTree.call(this)},r}(SupSub),LatexCmds.subscript=LatexCmds._=SubscriptCommand,LatexCmds.superscript=LatexCmds.supscript=LatexCmds["^"]=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.supsub="sup",e.domView=new DOMView(1,function(n){return h("span",{class:"mq-supsub mq-non-leaf mq-sup-only"},[h.block("span",{class:"mq-sup"},n[0])])}),e.textTemplate=["^(",")"],e.ariaLabel="superscript",e.mathspeakTemplate=["Superscript,",", Baseline"],e}return __extends(r,t),r.prototype.mathspeak=function(e){var n,i,o;return this.mathspeakOverride?t.prototype.mathspeak.call(this):(n=this.upInto,n===void 0||(i=getCtrlSeqsFromBlock(n),e&&e.ignoreShorthand||!intRgx.test(i))?t.prototype.mathspeak.call(this):i==="0"?"to the 0 power":i==="2"?"squared":i==="3"?"cubed":(o="",/^[+-]?\d{1,3}$/.test(i)&&(/(11|12|13|4|5|6|7|8|9|0)$/.test(i)?o="th":/1$/.test(i)?o="st":/2$/.test(i)?o="nd":/3$/.test(i)&&(o="rd")),"to the "+(typeof n=="object"?n.mathspeak():i)+o+" power"))},r.prototype.finalizeTree=function(){this.upInto=this.sup=this.getEnd(R),this.sup.downOutOf=insLeftOfMeUnlessAtEnd,t.prototype.finalizeTree.call(this)},r}(SupSub),SummationNotation=function(t){function r(e,n,i){var o,a=t.call(this)||this;return a.ariaLabel=i||e.replace(/^\\/,""),o=new DOMView(2,function(s){return h("span",{class:"mq-large-operator mq-non-leaf"},[h("span",{class:"mq-to"},[h.block("span",{},s[1])]),h("big",{},[h.text(n)]),h("span",{class:"mq-from"},[h.block("span",{},s[0])])])}),MQSymbol.prototype.setCtrlSeqHtmlTextAndMathspeak.call(a,e,o),a}return __extends(r,t),r.prototype.createLeftOf=function(e){t.prototype.createLeftOf.call(this,e),e.options.sumStartsWithNEquals&&(new Letter("n").createLeftOf(e),new Equality().createLeftOf(e))},r.prototype.latexRecursive=function(e){var n,i,o,a,s,l;this.checkCursorContextOpen(e),e.latex+=this.ctrlSeq+"_{",s=e.latex.length,(i=(n=this.getEnd(L)).latexRecursive)===null||i===void 0||i.call(n,e),l=e.latex.length,l===s&&(e.latex+=" "),e.latex+="}^{",s=e.latex.length,(a=(o=this.getEnd(R)).latexRecursive)===null||a===void 0||a.call(o,e),l=e.latex.length,s===l&&(e.latex+=" "),e.latex+="}",this.checkCursorContextClose(e)},r.prototype.mathspeak=function(){return this.mathspeakOverride?t.prototype.mathspeak.call(this):"Start "+this.ariaLabel+" from "+this.getEnd(L).mathspeak()+" to "+this.getEnd(R).mathspeak()+", end "+this.ariaLabel+", "},r.prototype.parser=function(){var e,n=Parser.string,i=Parser.optWhitespace,o=Parser.succeed,a=latexMathParser.block,s=this,l=s.blocks=[new MathBlock,new MathBlock];for(e=0;e<l.length;e+=1)l[e].adopt(s,s.getEnd(R),0);return i.then(n("_").or(n("^"))).then(function(c){var f=l[c==="_"?0:1];return a.then(function(d){return d.children().adopt(f,f.getEnd(R),0),o(s)})}).many().result(s)},r.prototype.finalizeTree=function(){var e=this.getEnd(L),n=this.getEnd(R);e.ariaLabel="lower bound",n.ariaLabel="upper bound",this.downInto=e,this.upInto=n,e.upOutOf=n,n.downOutOf=e},r}(MathCommand),LatexCmds["∑"]=LatexCmds.sum=LatexCmds.summation=function(){return new SummationNotation("\\sum ",U_NARY_SUMMATION,"sum")},LatexCmds["∏"]=LatexCmds.prod=LatexCmds.product=function(){return new SummationNotation("\\prod ",U_NARY_PRODUCT,"product")},LatexCmds.coprod=LatexCmds.coproduct=function(){return new SummationNotation("\\coprod ",U_NARY_COPRODUCT,"co product")},LatexCmds["∫"]=LatexCmds.int=LatexCmds.integral=function(t){function r(){var e=t.call(this,"\\int ","","integral")||this;return e.ariaLabel="integral",e.domView=new DOMView(2,function(n){return h("span",{class:"mq-int mq-non-leaf"},[h("big",{},[h.text(U_INTEGRAL)]),h("span",{class:"mq-supsub mq-non-leaf"},[h("span",{class:"mq-sup"},[h.block("span",{class:"mq-sup-inner"},n[1])]),h.block("span",{class:"mq-sub"},n[0]),h("span",{style:"display:inline-block;width:0"},[h.text(U_ZERO_WIDTH_SPACE)])])])}),e}return __extends(r,t),r.prototype.createLeftOf=function(e){MathCommand.prototype.createLeftOf.call(this,e)},r}(SummationNotation),Fraction=LatexCmds.frac=LatexCmds.dfrac=LatexCmds.cfrac=LatexCmds.fraction=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.ctrlSeq="\\frac",e.domView=new DOMView(2,function(n){return h("span",{class:"mq-fraction mq-non-leaf"},[h.block("span",{class:"mq-numerator"},n[0]),h.block("span",{class:"mq-denominator"},n[1]),h("span",{style:"display:inline-block;width:0"},[h.text(U_ZERO_WIDTH_SPACE)])])}),e.textTemplate=["(",")/(",")"],e}return __extends(r,t),r.prototype.finalizeTree=function(){var e=this.getEnd(L),n=this.getEnd(R);this.upInto=n.upOutOf=e,this.downInto=e.downOutOf=n,e.ariaLabel="numerator",n.ariaLabel="denominator",this.getFracDepth()>1?this.mathspeakTemplate=["StartNestedFraction,","NestedOver",", EndNestedFraction"]:this.mathspeakTemplate=["StartFraction,","Over",", EndFraction"]},r.prototype.mathspeak=function(e){var n,i,o,a,s,l,c,f;if(e&&e.createdLeftOf)return n=e.createdLeftOf,n.parent.mathspeak();if(this.mathspeakOverride)return t.prototype.mathspeak.call(this);if(i=getCtrlSeqsFromBlock(this.getEnd(L)),o=getCtrlSeqsFromBlock(this.getEnd(R)),(!e||!e.ignoreShorthand)&&intRgx.test(i)&&intRgx.test(o)&&(a=i==="1"||i==="-1",s="",o==="2"?s=a?"half":"halves":o==="3"?s=a?"third":"thirds":o==="4"?s=a?"quarter":"quarters":o==="5"?s=a?"fifth":"fifths":o==="6"?s=a?"sixth":"sixths":o==="7"?s=a?"seventh":"sevenths":o==="8"?s=a?"eighth":"eighths":o==="9"&&(s=a?"ninth":"ninths"),s!=="")){for(l="",c=!1,f=this[L];f&&f[L]!==void 0;f=f[L])if(f.ctrlSeq!=="\\ "){if(!intRgx.test(f.ctrlSeq||"")){c=!1;break}c=!0}return c&&(l+="and "),l+=this.getEnd(L).mathspeak()+" "+s}return t.prototype.mathspeak.call(this)},r.prototype.getFracDepth=function(){var e=function(n,i){return n instanceof MQNode&&n.ctrlSeq&&n.ctrlSeq.toLowerCase().search("frac")>=0&&(i+=1),n&&n.parent?e(n.parent,i):i};return e(this,0)},r}(MathCommand),LiveFraction=LatexCmds.over=CharCmds["/"]=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.createLeftOf=function(e){var n,i,o;if(!this.replacedFragment){if(n=e[L],!e.options.typingSlashCreatesNewFraction)for(;n&&!(n instanceof BinaryOperator||n instanceof(LatexCmds.text||noop)||n instanceof SummationNotation||n.ctrlSeq==="\\ "||/^[,;:]$/.test(n.ctrlSeq));)n=n[L];n instanceof SummationNotation&&n[R]instanceof SupSub&&(n=n[R],(i=n[R])instanceof SupSub&&i.ctrlSeq!=n.ctrlSeq&&(n=n[R])),n===e[L]||e.isTooDeep(1)||(i=n[R],o=e[L],this.replaces(new Fragment(i||e.parent.getEnd(L),o)),e[L]=n)}t.prototype.createLeftOf.call(this,e)},r}(Fraction),AnsBuilder=function(){return new MQSymbol("\\operatorname{ans}",h("span",{class:"mq-ans"},[h.text("ans")]),"ans")},LatexCmds.ans=AnsBuilder,PercentOfBuilder=function(){return new MQSymbol("\\%\\operatorname{of}",h("span",{class:"mq-nonSymbola mq-operator-name"},[h.text("% of ")]),"percent of")},LatexCmds.percent=LatexCmds.percentof=PercentOfBuilder,Token=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.tokenId="",e.ctrlSeq="\\token",e.textTemplate=["token(",")"],e.mathspeakTemplate=["StartToken,",", EndToken"],e.ariaLabel="token",e}return __extends(r,t),r.prototype.html=function(){var e=h("span",{class:"mq-token mq-ignore-mousedown","data-mq-token":this.tokenId});return this.setDOM(e),NodeBase.linkElementByCmdNode(e,this),e},r.prototype.latexRecursive=function(e){this.checkCursorContextOpen(e),e.latex+="\\token{"+this.tokenId+"}",this.checkCursorContextClose(e)},r.prototype.mathspeak=function(){if(this.mathspeakOverride)return t.prototype.mathspeak.call(this);var e=[];return this.domFrag().children().eachElement(function(n){var i=n.getAttribute("aria-label");typeof i=="string"&&i!==""&&e.push(i)}),e.length>0?e.join(" ").trim():"token "+this.tokenId},r.prototype.parser=function(){var e=this;return latexMathParser.block.map(function(n){var i=n.getEnd(L);if(i)for(e.tokenId+=i.ctrlSeq;i=i[R];)e.tokenId+=i.ctrlSeq;return e})},r}(MQSymbol),LatexCmds.token=Token,SquareRoot=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.ctrlSeq="\\sqrt",e.domView=new DOMView(1,function(n){return h("span",{class:"mq-non-leaf mq-sqrt-container"},[h("span",{class:"mq-scaled mq-sqrt-prefix"},[SVG_SYMBOLS.sqrt.html()]),h.block("span",{class:"mq-non-leaf mq-sqrt-stem"},n[0])])}),e.textTemplate=["sqrt(",")"],e.mathspeakTemplate=["StartRoot,",", EndRoot"],e.ariaLabel="root",e}return __extends(r,t),r.prototype.parser=function(){return latexMathParser.optBlock.then(function(e){return latexMathParser.block.map(function(n){var i=new NthRoot;return i.blocks=[e,n],e.adopt(i,0,0),n.adopt(i,e,0),i})}).or(t.prototype.parser.call(this))},r}(MathCommand),LatexCmds.sqrt=SquareRoot,LatexCmds.hat=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.ctrlSeq="\\hat",e.domView=new DOMView(1,function(n){return h("span",{class:"mq-non-leaf"},[h("span",{class:"mq-hat-prefix"},[h.text("^")]),h.block("span",{class:"mq-hat-stem"},n[0])])}),e.textTemplate=["hat(",")"],e}return __extends(r,t),r}(MathCommand),NthRoot=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.domView=new DOMView(2,function(n){return h("span",{class:"mq-nthroot-container mq-non-leaf"},[h.block("sup",{class:"mq-nthroot mq-non-leaf"},n[0]),h("span",{class:"mq-scaled mq-sqrt-container"},[h("span",{class:"mq-sqrt-prefix mq-scaled"},[SVG_SYMBOLS.sqrt.html()]),h.block("span",{class:"mq-sqrt-stem mq-non-leaf"},n[1])])])}),e.textTemplate=["sqrt[","](",")"],e}return __extends(r,t),r.prototype.latexRecursive=function(e){var n,i,o,a;this.checkCursorContextOpen(e),e.latex+="\\sqrt[",(i=(n=this.getEnd(L)).latexRecursive)===null||i===void 0||i.call(n,e),e.latex+="]{",(a=(o=this.getEnd(R)).latexRecursive)===null||a===void 0||a.call(o,e),e.latex+="}",this.checkCursorContextClose(e)},r.prototype.mathspeak=function(){var e,n;return this.mathspeakOverride?t.prototype.mathspeak.call(this):(e=this.getEnd(L).mathspeak(),n=this.getEnd(R).mathspeak(),this.getEnd(L).ariaLabel="Index",this.getEnd(R).ariaLabel="Radicand",e==="3"?"Start Cube Root, "+n+", End Cube Root":"Root Index "+e+", Start Root, "+n+", End Root")},r}(SquareRoot),LatexCmds.nthroot=NthRoot,LatexCmds.cbrt=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.createLeftOf=function(e){t.prototype.createLeftOf.call(this,e),new Digit("3").createLeftOf(e),e.controller.moveRight()},r}(NthRoot),DiacriticAbove=function(t){function r(e,n,i){var o=new DOMView(1,function(a){return h("span",{class:"mq-non-leaf"},[h("span",{class:"mq-diacritic-above"},[n]),h.block("span",{class:"mq-diacritic-stem"},a[0])])});return t.call(this,e,o,i)||this}return __extends(r,t),r}(MathCommand),LatexCmds.vec=function(){return new DiacriticAbove("\\vec",h.entityText("&rarr;"),["vec(",")"])},LatexCmds.tilde=function(){return new DiacriticAbove("\\tilde",h.text("~"),["tilde(",")"])},DelimsNode=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.setDOM=function(e){var n,i;return t.prototype.setDOM.call(this,e),i=this.domFrag().children(),i.isEmpty()||(this.delimFrags=(n={},n[L]=i.first(),n[R]=i.last(),n)),this},r}(MathCommand),Bracket=function(t){function r(e,n,i,o,a){var s,l=t.call(this,"\\left"+o,void 0,[n,i])||this;return l.side=e,l.sides=(s={},s[L]={ch:n,ctrlSeq:o},s[R]={ch:i,ctrlSeq:a},s),l}return __extends(r,t),r.prototype.numBlocks=function(){return 1},r.prototype.html=function(){var e=this,n=this.getSymbol(L),i=this.getSymbol(R);return this.domView=new DOMView(1,function(o){return h("span",{class:"mq-non-leaf mq-bracket-container"},[h("span",{style:"width:"+n.width,class:"mq-scaled mq-bracket-l mq-paren"+(e.side===R?" mq-ghost":"")},[n.html()]),h.block("span",{style:"margin-left:"+n.width+";margin-right:"+i.width,class:"mq-bracket-middle mq-non-leaf"},o[0]),h("span",{style:"width:"+i.width,class:"mq-scaled mq-bracket-r mq-paren"+(e.side===L?" mq-ghost":"")},[i.html()])])}),t.prototype.html.call(this)},r.prototype.getSymbol=function(e){var n=this.sides[e||R].ch;return SVG_SYMBOLS[n]||{width:"0",html:""}},r.prototype.latexRecursive=function(e){var n,i;this.checkCursorContextOpen(e),e.latex+="\\left"+this.sides[L].ctrlSeq,(i=(n=this.getEnd(L)).latexRecursive)===null||i===void 0||i.call(n,e),e.latex+="\\right"+this.sides[R].ctrlSeq,this.checkCursorContextClose(e)},r.prototype.mathspeak=function(e){var n,i,o;if(this.mathspeakOverride)return e!=null&&e.createdLeftOf?this.mathspeakOverride(this.sides[this.side].ch):t.prototype.mathspeak.call(this);if(n=this.sides[L].ch,i=this.sides[R].ch,n==="|"&&i==="|")this.mathspeakTemplate=["StartAbsoluteValue,",", EndAbsoluteValue"],this.ariaLabel="absolute value";else{if(e&&e.createdLeftOf&&this.side)return o="",this.side===L?o=this.textTemplate[0]:this.side===R&&(o=this.textTemplate[1]),(this.side===L?"left ":"right ")+BRACKET_NAMES[o];this.mathspeakTemplate=["left "+BRACKET_NAMES[n]+",",", right "+BRACKET_NAMES[i]],this.ariaLabel=BRACKET_NAMES[n]+" block"}return t.prototype.mathspeak.call(this)},r.prototype.matchBrack=function(e,n,i){return i instanceof r&&i.side&&i.side!==-n&&(!e.restrictMismatchedBrackets||OPP_BRACKS[this.sides[this.side].ch]===i.sides[i.side].ch||{"(":"]","[":")"}[this.sides[L].ch]===i.sides[R].ch)&&i},r.prototype.closeOpposing=function(e){e.side=0,e.sides[this.side]=this.sides[this.side];var n=e.delimFrags[this.side===L?L:R].removeClass("mq-ghost");this.replaceBracket(n,this.side)},r.prototype.createLeftOf=function(e){var n,i,o;this.replacedFragment||(i=e.options,n=this.sides[L].ch==="|"?this.matchBrack(i,R,e[R])||this.matchBrack(i,L,e[L])||this.matchBrack(i,0,e.parent.parent):this.matchBrack(i,-this.side,e[-this.side])||this.matchBrack(i,-this.side,e.parent.parent)),n?(o=this.side=-n.side,this.closeOpposing(n),n===e.parent.parent&&e[o]&&new Fragment(e[o],e.parent.getEnd(o),-o).disown().withDirAdopt(-o,n.parent,n,n[o]).domFrag().insDirOf(o,n.domFrag()),n.bubble(function(a){a.reflow()})):(n=this,o=n.side,n.replacedFragment?n.side=0:e[-o]&&(n.replaces(new Fragment(e[-o],e.parent.getEnd(-o),o)),e[-o]=0),t.prototype.createLeftOf.call(this,e)),o===L?e.insAtLeftEnd(n.getEnd(L)):e.insRightOf(n)},r.prototype.placeCursor=function(){},r.prototype.unwrap=function(){this.getEnd(L).children().disown().adopt(this.parent,this,this[R]).domFrag().insertAfter(this.domFrag()),this.remove()},r.prototype.deleteSide=function(e,n,i){var o,a,s,l,c,f=this.parent,d=this[e],u=f.getEnd(e);if(e===this.side)return this.unwrap(),void(d?i.insDirOf(-e,d):i.insAtDirEnd(e,f));if(o=i.options,a=!this.side,this.side=-e,this.matchBrack(o,e,this.getEnd(L).getEnd(this.side)))this.closeOpposing(this.getEnd(L).getEnd(this.side)),s=this.getEnd(L).getEnd(e),this.unwrap(),s&&s.siblingCreated(i.options,e),d?i.insDirOf(-e,d):i.insAtDirEnd(e,f);else{if(this.matchBrack(o,e,this.parent.parent))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(n&&a)return this.unwrap(),void(d?i.insDirOf(-e,d):i.insAtDirEnd(e,f));this.sides[e]=getOppBracketSide(this),this.delimFrags[L].removeClass("mq-ghost"),this.delimFrags[R].removeClass("mq-ghost"),l=this.delimFrags[e].addClass("mq-ghost"),this.replaceBracket(l,e)}d?(c=this.getEnd(L),s=c.getEnd(e),c.domFrag().removeClass("mq-empty"),new Fragment(d,u,-e).disown().withDirAdopt(-e,c,s,0).domFrag().insAtDirEnd(e,c.domFrag().oneElement()),s&&s.siblingCreated(i.options,e),i.insDirOf(-e,d)):n?i.insDirOf(e,this):i.insAtDirEnd(e,this.getEnd(L))}},r.prototype.replaceBracket=function(e,n){var i,o,a=this.getSymbol(n);e.children().replaceWith(domFrag(a.html())),e.oneElement().style.width=a.width,n===L?(i=e.next(),i.isEmpty()||(i.oneElement().style.marginLeft=a.width)):(o=e.prev(),o.isEmpty()||(o.oneElement().style.marginRight=a.width))},r.prototype.deleteTowards=function(e,n){this.deleteSide(-e,!1,n)},r.prototype.finalizeTree=function(){this.getEnd(L).deleteOutOf=function(e,n){this.parent.deleteSide(e,!0,n)},this.finalizeTree=this.intentionalBlur=function(){this.delimFrags[this.side===L?R:L].removeClass("mq-ghost"),this.side=0}},r.prototype.siblingCreated=function(e,n){n===-this.side&&this.finalizeTree()},r}(DelimsNode),OPP_BRACKS={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|","\\lVert ":"\\rVert ","\\rVert ":"\\lVert "},BRACKET_NAMES={"&lang;":"angle-bracket","&rang;":"angle-bracket","|":"pipe"},bindCharBracketPair("(","","parenthesis"),bindCharBracketPair("[","","bracket"),bindCharBracketPair("{","\\{","brace"),LatexCmds.langle=function(){return new Bracket(L,"&lang;","&rang;","\\langle ","\\rangle ")},LatexCmds.rangle=function(){return new Bracket(R,"&lang;","&rang;","\\langle ","\\rangle ")},CharCmds["|"]=function(){return new Bracket(L,"|","|","|","|")},LatexCmds.lVert=function(){return new Bracket(L,"&#8741;","&#8741;","\\lVert ","\\rVert ")},LatexCmds.rVert=function(){return new Bracket(R,"&#8741;","&#8741;","\\lVert ","\\rVert ")},LatexCmds.left=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.parser=function(){var e=Parser.regex,n=Parser.string,i=Parser.optWhitespace;return i.then(e(/^(?:[([|]|\\\{|\\langle(?![a-zA-Z])|\\lVert(?![a-zA-Z]))/)).then(function(o){var a=o.replace(/^\\/,"");return o=="\\langle"&&(a="&lang;",o+=" "),o=="\\lVert"&&(a="&#8741;",o+=" "),latexMathParser.then(function(s){return n("\\right").skip(i).then(e(/^(?:[\])|]|\\\}|\\rangle(?![a-zA-Z])|\\rVert(?![a-zA-Z]))/)).map(function(l){var c,f=l.replace(/^\\/,"");return l=="\\rangle"&&(f="&rang;",l+=" "),l=="\\rVert"&&(f="&#8741;",l+=" "),c=new Bracket(0,a,f,o,l),c.blocks=[s],s.adopt(c,0,0),c})})})},r}(MathCommand),LatexCmds.right=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.parser=function(){return Parser.fail("unmatched \\right")},r}(MathCommand),leftBinomialSymbol=SVG_SYMBOLS["("],rightBinomialSymbol=SVG_SYMBOLS[")"],Binomial=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.ctrlSeq="\\binom",e.domView=new DOMView(2,function(n){return h("span",{class:"mq-non-leaf mq-bracket-container"},[h("span",{style:"width:"+leftBinomialSymbol.width,class:"mq-paren mq-bracket-l mq-scaled"},[leftBinomialSymbol.html()]),h("span",{style:"margin-left:"+leftBinomialSymbol.width+"; margin-right:"+rightBinomialSymbol.width,class:"mq-non-leaf mq-bracket-middle"},[h("span",{class:"mq-array mq-non-leaf"},[h.block("span",{},n[0]),h.block("span",{},n[1])])]),h("span",{style:"width:"+rightBinomialSymbol.width,class:"mq-paren mq-bracket-r mq-scaled"},[rightBinomialSymbol.html()])])}),e.textTemplate=["choose(",",",")"],e.mathspeakTemplate=["StartBinomial,","Choose",", EndBinomial"],e.ariaLabel="binomial",e}return __extends(r,t),r}(DelimsNode),LatexCmds.binom=LatexCmds.binomial=Binomial,LatexCmds.choose=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.createLeftOf=function(e){LiveFraction.prototype.createLeftOf(e)},r}(Binomial),MathFieldNode=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.ctrlSeq="\\MathQuillMathField",e.domView=new DOMView(1,function(n){return h("span",{class:"mq-editable-field"},[h.block("span",{class:"mq-root-block","aria-hidden":"true"},n[0])])}),e}return __extends(r,t),r.prototype.parser=function(){var e=this,n=Parser.string,i=Parser.regex,o=Parser.succeed;return n("[").then(i(/^[a-z][a-z0-9]*/i)).skip(n("]")).map(function(a){e.name=a}).or(o(void 0)).then(t.prototype.parser.call(this))},r.prototype.finalizeTree=function(e){function n(o){if(o.parentNode&&!domFrag(o).hasClass("mq-root-block")&&n(o.parentNode),o.nodeType===Node.ELEMENT_NODE){var a=o;a.getAttribute("aria-hidden")==="true"&&(a.removeAttribute("aria-hidden"),domFrag(o).children().eachElement(function(s){s.setAttribute("aria-hidden","true")}))}}var i=new Controller(this.getEnd(L),this.domFrag().oneElement(),e);i.KIND_OF_MQ="MathField",i.editable=!0,i.createTextarea(),i.editablesTextareaEvents(),i.cursor.insAtRightEnd(i.root),RootBlockMixin(i.root),n(this.domFrag().parent().oneElement()),this.domFrag().oneElement().removeAttribute("aria-hidden")},r.prototype.registerInnerField=function(e,n){var i=this.getEnd(L).controller,o=new n(i);e[this.name]=o,e.push(o)},r.prototype.latexRecursive=function(e){var n,i;this.checkCursorContextOpen(e),(i=(n=this.getEnd(L)).latexRecursive)===null||i===void 0||i.call(n,e),this.checkCursorContextClose(e)},r.prototype.text=function(){return this.getEnd(L).text()},r}(MathCommand),LatexCmds.editable=LatexCmds.MathQuillMathField=MathFieldNode,EmbedNode=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.setOptions=function(e){function n(){return""}return this.text=e.text||n,this.domView=new DOMView(0,function(){return h("span",{},[parseHTML(e.htmlString||"")])}),this.latex=e.latex||n,this},r.prototype.latexRecursive=function(e){this.checkCursorContextOpen(e),e.latex+=this.latex(),this.checkCursorContextClose(e)},r.prototype.parser=function(){var e=this,n=Parser.string,i=Parser.regex,o=Parser.succeed;return n("{").then(i(/^[a-z][a-z0-9]*/i)).skip(n("}")).then(function(a){return n("[").then(i(/^[-\w\s]*/)).skip(n("]")).or(o(void 0)).map(function(s){return e.setOptions(EMBEDS[a](s))})})},r}(MQSymbol),LatexCmds.embed=EmbedNode,TextBlock=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.ctrlSeq="\\text",e.ariaLabel="Text",e.mathspeakTemplate=["StartText","EndText"],e}return __extends(r,t),r.prototype.replaces=function(e){e instanceof Fragment?this.replacedText=e.remove().domFrag().text():typeof e=="string"&&(this.replacedText=e)},r.prototype.setDOMFrag=function(e){var n,i;return t.prototype.setDOM.call(this,e),n=this.getEnd(L),n&&(i=this.domFrag().children(),i.isEmpty()||n.setDOM(i.oneText())),this},r.prototype.createLeftOf=function(e){var n,i,o,a=this;if(t.prototype.createLeftOf.call(this,e),e.insAtRightEnd(a),a.replacedText)for(n=0;n<a.replacedText.length;n+=1)a.write(e,a.replacedText.charAt(n));i=a[R],i&&i.siblingCreated(e.options,L),o=a[L],o&&o.siblingCreated(e.options,R),a.bubble(function(s){s.reflow()})},r.prototype.parser=function(){var e=this,n=Parser.string,i=Parser.regex;return Parser.optWhitespace.then(n("{")).then(i(/^[^}]*/)).skip(n("}")).map(function(o){return o.length===0?new Fragment(0,0):(new TextPiece(o).adopt(e,0,0),e)})},r.prototype.textContents=function(){return this.foldChildren("",function(e,n){return e+n.textStr})},r.prototype.text=function(){return'"'+this.textContents()+'"'},r.prototype.latexRecursive=function(e){this.checkCursorContextOpen(e);var n=this.textContents();n.length>0&&(e.latex+=this.ctrlSeq+"{",e.latex+=n.replace(/\\/g,"\\backslash ").replace(/[{}]/g,"\\$&"),e.latex+="}"),this.checkCursorContextClose(e)},r.prototype.html=function(){var e=h("span",{class:"mq-text-mode"},[h.text(this.textContents())]);return this.setDOM(e),NodeBase.linkElementByCmdNode(e,this),e},r.prototype.mathspeak=function(e){return e&&e.ignoreShorthand?this.mathspeakOverride?t.prototype.mathspeak.call(this):this.mathspeakTemplate[0]+", "+this.textContents()+", "+this.mathspeakTemplate[1]:this.textContents()},r.prototype.isTextBlock=function(){return!0},r.prototype.moveTowards=function(e,n){n.insAtDirEnd(-e,this),n.controller.aria.queueDirEndOf(-e,n.parent,!0)},r.prototype.moveOutOf=function(e,n){n.insDirOf(e,this),n.controller.aria.queueDirOf(e,this)},r.prototype.unselectInto=function(e,n){this.moveTowards(e,n)},r.prototype.selectTowards=function(e,n){MathCommand.prototype.selectTowards.call(this,e,n)},r.prototype.deleteTowards=function(e,n){MathCommand.prototype.deleteTowards.call(this,e,n)},r.prototype.selectOutOf=function(e,n){n.insDirOf(e,this)},r.prototype.deleteOutOf=function(e,n){this.isEmpty()&&n.insRightOf(this)},r.prototype.write=function(e,n){var i,o,a;e.show().deleteSelection(),n!=="$"?(i=e[L],i?i instanceof TextPiece&&i.appendText(n):new TextPiece(n).createLeftOf(e)):this.isEmpty()?(e.insRightOf(this),new VanillaSymbol("\\$",h.text("$")).createLeftOf(e)):e[R]?e[L]?(o=new r,a=this.getEnd(L),a&&(a.disown().domFrag().detach(),a.adopt(o,0,0)),e.insLeftOf(this),t.prototype.createLeftOf.call(o,e)):e.insLeftOf(this):e.insRightOf(this),this.bubble(function(s){s.reflow()}),e.controller.aria.alert(n)},r.prototype.writeLatex=function(e,n){var i=e[L];i?i instanceof TextPiece&&i.appendText(n):new TextPiece(n).createLeftOf(e),this.bubble(function(o){o.reflow()})},r.prototype.seek=function(e,n){var i,o,a,s,l,c,f,d,u,m,p,_,y,g,v,x;if(n.hide(),i=TextBlockFuseChildren(this)){for(o=this.domFrag().children().oneText(),a=document.createRange(),a.selectNodeContents(o),s=a.getClientRects(),s.length===1?(l=s[0],c=l.width,f=l.left,d=c/this.textContents().length,u=Math.round((e-f)/d),u<=0?n.insAtLeftEnd(this):u>=i.textStr.length?n.insAtRightEnd(this):n.insLeftOf(i.splitRight(u))):n.insAtLeftEnd(this),m=e-n.show().getBoundingClientRectWithoutMargin().left,p=m&&m<0?L:R,_=p;n[p]&&m*_>0;)n[p].moveTowards(p,n),_=m,m=e-n.getBoundingClientRectWithoutMargin().left;p*m<-p*_&&n[-p].moveTowards(-p,n),n.anticursor?n.anticursor.parent===this&&(y=n[L],g=y&&y.textStr.length,this.anticursorPosition===g?n.anticursor=Anticursor.fromCursor(n):(this.anticursorPosition<g?(v=y.splitRight(this.anticursorPosition),n[L]=v):(x=n[R],v=x.splitRight(this.anticursorPosition-g)),n.anticursor=new Anticursor(this,v[L],v))):(y=n[L],this.anticursorPosition=y&&y.textStr.length)}},r.prototype.blur=function(e){MathBlock.prototype.blur.call(this,e),e&&(this.textContents()===""?(this.remove(),e[L]===this?e[L]=this[L]:e[R]===this&&(e[R]=this[R])):TextBlockFuseChildren(this))},r.prototype.focus=function(){MathBlock.prototype.focus.call(this)},r}(MQNode),TextPiece=function(t){function r(e){var n=t.call(this)||this;return n.textStr=e,n}return __extends(r,t),r.prototype.html=function(){var e=h.text(this.textStr);return this.setDOM(e),e},r.prototype.appendText=function(e){this.textStr+=e,this.domFrag().oneText().appendData(e)},r.prototype.prependText=function(e){this.textStr=e+this.textStr,this.domFrag().oneText().insertData(0,e)},r.prototype.insTextAtDirEnd=function(e,n){prayDirection(n),n===R?this.appendText(e):this.prependText(e)},r.prototype.splitRight=function(e){var n=new r(this.textStr.slice(e)).adopt(this.parent,this,this[R]);return n.setDOM(this.domFrag().oneText().splitText(e)),this.textStr=this.textStr.slice(0,e),n},r.prototype.endChar=function(e,n){return n.charAt(e===L?0:-1+n.length)},r.prototype.moveTowards=function(e,n){var i,o;return prayDirection(e),i=this.endChar(-e,this.textStr),o=this[-e],o instanceof r?o.insTextAtDirEnd(i,e):new r(i).createDir(-e,n),this.deleteTowards(e,n)},r.prototype.mathspeak=function(){return this.textStr},r.prototype.latexRecursive=function(e){this.checkCursorContextOpen(e),e.latex+=this.textStr,this.checkCursorContextClose(e)},r.prototype.deleteTowards=function(e,n){if(this.textStr.length>1){var i;e===R?(this.domFrag().oneText().deleteData(0,1),i=this.textStr[0],this.textStr=this.textStr.slice(1)):(this.domFrag().oneText().deleteData(-1+this.textStr.length,1),i=this.textStr[this.textStr.length-1],this.textStr=this.textStr.slice(0,-1)),n.controller.aria.queue(i)}else this.remove(),n[e]=this[e],n.controller.aria.queue(this.textStr)},r.prototype.selectTowards=function(e,n){var i,o,a,s,l;if(prayDirection(e),i=n.anticursor)return o=this.endChar(-e,this.textStr),i[e]===this?(a=new r(o).createDir(e,n),i[e]=a,n.insDirOf(e,a)):(s=this[-e],s instanceof r?s.insTextAtDirEnd(o,e):(a=new r(o).createDir(-e,n),(l=n.selection)&&a.domFrag().insDirOf(-e,l.domFrag())),this.textStr.length===1&&i[-e]===this&&(i[-e]=this[-e])),this.deleteTowards(e,n)},r}(MQNode),LatexCmds.text=LatexCmds.textnormal=LatexCmds.textrm=LatexCmds.textup=LatexCmds.textmd=TextBlock,LatexCmds.em=LatexCmds.italic=LatexCmds.italics=LatexCmds.emph=LatexCmds.textit=LatexCmds.textsl=makeTextBlock("\\textit","Italic","i",{class:"mq-text-mode"}),LatexCmds.strong=LatexCmds.bold=LatexCmds.textbf=makeTextBlock("\\textbf","Bold","b",{class:"mq-text-mode"}),LatexCmds.sf=LatexCmds.textsf=makeTextBlock("\\textsf","Sans serif font","span",{class:"mq-sans-serif mq-text-mode"}),LatexCmds.tt=LatexCmds.texttt=makeTextBlock("\\texttt","Mono space font","span",{class:"mq-monospace mq-text-mode"}),LatexCmds.textsc=makeTextBlock("\\textsc","Variable font","span",{style:"font-variant:small-caps",class:"mq-text-mode"}),LatexCmds.uppercase=makeTextBlock("\\uppercase","Uppercase","span",{style:"text-transform:uppercase",class:"mq-text-mode"}),LatexCmds.lowercase=makeTextBlock("\\lowercase","Lowercase","span",{style:"text-transform:lowercase",class:"mq-text-mode"}),RootMathCommand=function(t){function r(e){var n=t.call(this,"$")||this;return n.domView=new DOMView(1,function(i){return h.block("span",{class:"mq-math-mode"},i[0])}),n.cursor=e,n}return __extends(r,t),r.prototype.createBlocks=function(){t.prototype.createBlocks.call(this);var e=this.getEnd(L);e.cursor=this.cursor,e.write=function(n,i){i!=="$"?MathBlock.prototype.write.call(this,n,i):this.isEmpty()?(n.insRightOf(this.parent),this.parent.deleteTowards(void 0,n),new VanillaSymbol("\\$",h.text("$")).createLeftOf(n.show())):n[R]?n[L]?MathBlock.prototype.write.call(this,n,i):n.insLeftOf(this.parent):n.insRightOf(this.parent)}},r.prototype.latexRecursive=function(e){var n,i;this.checkCursorContextOpen(e),e.latex+="$",(i=(n=this.getEnd(L)).latexRecursive)===null||i===void 0||i.call(n,e),e.latex+="$",this.checkCursorContextClose(e)},r}(MathCommand),RootTextBlock=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.keystroke=function(e,n,i){if(e!=="Spacebar"&&e!=="Shift-Spacebar")return t.prototype.keystroke.call(this,e,n,i)},r.prototype.write=function(e,n){if(e.show().deleteSelection(),n==="$")new RootMathCommand(e).createLeftOf(e);else{var i;n==="<"?i=h.entityText("&lt;"):n===">"&&(i=h.entityText("&gt;")),new VanillaSymbol(n,i).createLeftOf(e)}},r}(RootMathBlock),API.TextField=function(t){var r;return r=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return __extends(n,e),n.prototype.__mathquillify=function(){return e.prototype.mathquillify.call(this,"mq-editable-field mq-text-mode"),this},n.prototype.latex=function(i){return i?(this.__controller.renderLatexText(i),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},n}(t.EditableField),r.RootBlock=RootTextBlock,r},CharCmds["\\"]=function(t){function r(){var e=t!==null&&t.apply(this,arguments)||this;return e.ctrlSeq="\\",e.domView=new DOMView(1,function(n){return h("span",{class:"mq-latex-command-input-wrapper mq-non-leaf"},[h("span",{class:"mq-latex-command-input mq-non-leaf"},[h.text("\\"),h.block("span",{},n[0])])])}),e.textTemplate=["\\"],e}return __extends(r,t),r.prototype.replaces=function(e){this._replacedFragment=e.disown(),this.isEmpty=function(){return!1}},r.prototype.createBlocks=function(){var e,n;t.prototype.createBlocks.call(this),e=this.getEnd(L),e.focus=function(){return this.parent.domFrag().addClass("mq-hasCursor"),this.isEmpty()&&this.parent.domFrag().removeClass("mq-empty"),this},e.blur=function(){return this.parent.domFrag().removeClass("mq-hasCursor"),this.isEmpty()&&this.parent.domFrag().addClass("mq-empty"),this},e.write=function(i,o){if(i.show().deleteSelection(),o.match(/[a-z]/i))new VanillaSymbol(o).createLeftOf(i),i.controller.aria.alert(o);else{var a=this.parent.renderCommand(i);i.controller.aria.queue(a.mathspeak({createdLeftOf:i})),o==="\\"&&this.isEmpty()?i.controller.aria.alert():i.parent.write(i,o)}},n=e.keystroke,e.keystroke=function(i,o,a){if(i==="Tab"||i==="Enter"||i==="Spacebar"){var s=this.parent.renderCommand(a.cursor);return a.aria.alert(s.mathspeak({createdLeftOf:a.cursor})),void(o==null||o.preventDefault())}return n.call(this,i,o,a)}},r.prototype.createLeftOf=function(e){var n,i,o;t.prototype.createLeftOf.call(this,e),this._replacedFragment&&(n=this.domFrag(),i=n.oneElement(),this._replacedFragment.domFrag().addClass("mq-blur"),o=function(a){return a.target=i,i.dispatchEvent(a),!1},i.addEventListener("mousedown",o),i.addEventListener("mouseup",o),this._replacedFragment.domFrag().insertBefore(n.children().first()))},r.prototype.latexRecursive=function(e){var n,i;this.checkCursorContextOpen(e),e.latex+="\\",(i=(n=this.getEnd(L)).latexRecursive)===null||i===void 0||i.call(n,e),e.latex+=" ",this.checkCursorContextClose(e)},r.prototype.renderCommand=function(e){var n,i,o;return this.setDOM(this.domFrag().children().lastElement()),this.remove(),this[R]?e.insLeftOf(this[R]):e.insAtRightEnd(this.parent),n=this.getEnd(L).latex(),n||(n=" "),i=LatexCmds[n],i?(o=void 0,o=isMQNodeClass(i)?new i(n):i(n),this._replacedFragment&&o.replaces(this._replacedFragment),o.createLeftOf(e),o):(o=new TextBlock,o.replaces(n),o.createLeftOf(e),e.insRightOf(o),this._replacedFragment&&this._replacedFragment.remove(),o)},r}(MathCommand),mathquill_min.exports=MathQuill;var mathquill_minExports=mathquill_min.exports;const MathQuill$1=getDefaultExportFromCjs(mathquill_minExports),mathQuillInstance=MathQuill$1.getInterface(3),createBaseConfig=()=>({autoCommands:"pi theta phi sqrt nthroot",autoOperatorNames:["arccos","arcsin","arctan","arctg","arg","cos","cosec","cossec","cosh","cot","cotg","coth","csc","ctg","deg","det","dim","exp","gcd","hom","inf","ker","lg","lim","liminf","limsup","ln","log","max","min","Pr","projlim","sec","sen","sin","sinh","sup","tan","tanh","tg"].join(" "),charsThatBreakOutOfSupSub:"+-*/=<>≠≤≥",supSubsRequireOperand:!0,spaceBehavesLikeTab:!0});function createMathField(t,r,e,n){const i=createBaseConfig(),o=n?n(i):i,a=mathQuillInstance.MathField(t,o).setAriaLabel(e.mathInputBox).setAriaStringsOverrideMap({before:s=>e.before({obj:s}),after:s=>e.after({obj:s}),"beginning of":s=>e["beginning of"]({obj:s}),"end of":s=>e["end of"]({obj:s}),Baseline:e.Baseline,Superscript:e.Superscript,selected:s=>e.selected({obj:s}),"no answer":e["no answer"],"nothing selected":e["nothing selected"],"nothing to the right":e["nothing to the right"],"nothing to the left":e["nothing to the left"],"block is empty":e["block is empty"],"nothing above":e["nothing above"],labelValue:(s,l)=>e.labelValue({label:s,value:l})});return!inJest&&dist.SpeechRuleEngine.setup(r).then(s=>a.setMathspeakOverride(s.texToSpeech)),a}const Numerals=["0","1","2","3","4","5","6","7","8","9"],GreekLetters=["\\theta","\\pi"],Letters=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ValidLeaves=[...Numerals,...GreekLetters,...Letters.map(t=>t.toLowerCase()),...Letters.map(t=>t.toUpperCase())],mqNodeHasClass=(t,r)=>t._el&&t._el.classList.contains(r);function isFraction(t){return mqNodeHasClass(t,"mq-fraction")}function isNumerator(t){return mqNodeHasClass(t,"mq-numerator")}function isDenominator(t){return mqNodeHasClass(t,"mq-denominator")}function isSubScript(t){return mqNodeHasClass(t,"mq-sub-only")||mqNodeHasClass(t,"mq-sub")}function isSuperScript(t){return mqNodeHasClass(t,"mq-sup-only")||mqNodeHasClass(t,"mq-sup")}function isParens(t){return t&&t.ctrlSeq==="\\left("}function isLeaf(t){return t&&t.ctrlSeq&&ValidLeaves.includes(t.ctrlSeq.trim())}function isSquareRoot(t){return t.blocks&&mqNodeHasClass(t.blocks[0],"mq-sqrt-stem")}function isNthRoot(t){return t.blocks&&mqNodeHasClass(t.blocks[0],"mq-nthroot")}function isNthRootIndex(t){return mqNodeHasClass(t,"mq-nthroot")}function isInsideLogIndex(t){const r=t.parent.parent;if(r&&mqNodeHasClass(r,"mq-supsub")){const e=maybeFindCommandBeforeParens(r);if(e&&e.name==="\\log")return!0}return!1}function isInsideEmptyNode(t){return t[mathQuillInstance.L]===MathFieldActionType.MQ_END&&t[mathQuillInstance.R]===MathFieldActionType.MQ_END}function selectNode(t,r){r.insLeftOf(t),r.startSelection(),r.insRightOf(t),r.select(),r.endSelection()}function maybeFindCommand(t){if(!t)return null;const r=/^[a-z]$/,e=/^\\[a-z]$/,n="\\left(",i=["\\log","\\ln","\\cos","\\sin","\\tan"];let o="",a,s,l=t;for(;l!==0;){const c=l.ctrlSeq.trim();if(r.test(c))o=c+o;else if(e.test(c)){o=c+o,a=l;break}else break;l=l[mathQuillInstance.L]}if(a){for(l=t[mathQuillInstance.R];l!==0;){const c=l.ctrlSeq.trim();if(r.test(c))o=o+c;else if(c===n){s=l;break}l=l[mathQuillInstance.R]}return i.includes(o)?{name:o,startNode:a,endNode:s}:null}else return null}function maybeFindCommandBeforeParens(t){return maybeFindCommand(t[mathQuillInstance.L])}function getCursorContext(t){if(!t)return CursorContext.NONE;const r=t.cursor();let e=r;for(;e[mathQuillInstance.R]!==MathFieldActionType.MQ_END;){if(isFraction(e[mathQuillInstance.R]))return CursorContext.BEFORE_FRACTION;if(!isLeaf(e[mathQuillInstance.R]))break;e=e[mathQuillInstance.R]}return isParens(r.parent&&r.parent.parent)?CursorContext.IN_PARENS:isNumerator(r.parent)?CursorContext.IN_NUMERATOR:isDenominator(r.parent)?CursorContext.IN_DENOMINATOR:isSubScript(r.parent)?CursorContext.IN_SUB_SCRIPT:isSuperScript(r.parent)?CursorContext.IN_SUPER_SCRIPT:CursorContext.NONE}function handleLeftArrow(t,r){if(r[mathQuillInstance.L]===MathFieldActionType.MQ_END){const n=r.parent.parent;if(n.ctrlSeq==="\\left("){const i=maybeFindCommandBeforeParens(n);if(i){r.insLeftOf(i.startNode);return}}}t.keystroke("Left")}function handleRightArrow(t,r){const e=maybeFindCommand(r[mathQuillInstance.R]);e&&r.insLeftOf(e.endNode),t.keystroke("Right")}function handleArrow(t,r){const e=t.cursor();r==="LEFT"?handleLeftArrow(t,e):r==="RIGHT"&&handleRightArrow(t,e)}const ArithmeticOperators=["+","-","\\cdot","\\times","\\div"],EqualityOperators=["=","\\neq","<","\\leq",">","\\geq"];function handleExponent(t,r){const e=t.cursor(),n=[...ArithmeticOperators,...EqualityOperators],i=e[mathQuillInstance.L],o=i===MathFieldActionType.MQ_END||n.includes(i.ctrlSeq.trim());switch(o&&t.write("\\left(\\right)"),r){case"EXP":t.cmd("^");break;case"EXP_2":case"EXP_3":t.write(`^${r==="EXP_2"?2:3}`),o&&(t.keystroke("Left"),t.keystroke("Left"),t.keystroke("Left"),t.keystroke("Left"));break;default:throw new Error(`Invalid exponent key: ${r}`)}}const KeysForJumpContext={[CursorContext.IN_PARENS]:"JUMP_OUT_PARENTHESES",[CursorContext.IN_SUPER_SCRIPT]:"JUMP_OUT_EXPONENT",[CursorContext.IN_SUB_SCRIPT]:"JUMP_OUT_BASE",[CursorContext.BEFORE_FRACTION]:"JUMP_INTO_NUMERATOR",[CursorContext.IN_NUMERATOR]:"JUMP_OUT_NUMERATOR",[CursorContext.IN_DENOMINATOR]:"JUMP_OUT_DENOMINATOR"};function handleJumpOut(t,r){const e=t.cursor(),n=getCursorContext(t);if(KeysForJumpContext[n]===r)switch(n){case CursorContext.IN_PARENS:e.insRightOf(e.parent.parent),t.keystroke("Right");break;case CursorContext.BEFORE_FRACTION:let i,o=e;for(;o[mathQuillInstance.R]!==MathFieldActionType.MQ_END;)isFraction(o[mathQuillInstance.R])&&(i=o[mathQuillInstance.R]),o=o[mathQuillInstance.R];e.insLeftOf(i),t.keystroke("Right");break;case CursorContext.IN_NUMERATOR:const a=e.parent.parent.blocks[1];for(;e.parent!==a;)t.keystroke("Right");break;case CursorContext.IN_DENOMINATOR:e.insRightOf(e.parent.parent);break;case CursorContext.IN_SUB_SCRIPT:e.insRightOf(e.parent.parent),isParens(e[mathQuillInstance.R])&&t.keystroke("Right");break;case CursorContext.IN_SUPER_SCRIPT:e.insRightOf(e.parent.parent);break;default:throw new Error(`Attempted to 'Jump Out' from node, but found no appropriate cursor context: ${n}`)}}function buildGenericCallback(t,r=MathFieldActionType.WRITE){return function(e){switch(r){case MathFieldActionType.WRITE:{e.write(t);return}case MathFieldActionType.CMD:{e.cmd(t);return}case MathFieldActionType.KEYSTROKE:{e.keystroke(t);return}}}}function buildTranslatableFunctionCallback(t,r,e){const n=r.includes(t)?t:e;return function(i){i.write(`${n}\\left(\\right)`),i.keystroke("Left")}}function buildNormalFunctionCallback(t){return function(r){r.write(`\\${t}\\left(\\right)`),r.keystroke("Left")}}const getKeyTranslator=(t,r)=>({EXP:handleExponent,EXP_2:handleExponent,EXP_3:handleExponent,JUMP_OUT_PARENTHESES:handleJumpOut,JUMP_OUT_EXPONENT:handleJumpOut,JUMP_OUT_BASE:handleJumpOut,JUMP_INTO_NUMERATOR:handleJumpOut,JUMP_OUT_NUMERATOR:handleJumpOut,JUMP_OUT_DENOMINATOR:handleJumpOut,LEFT:handleArrow,RIGHT:handleArrow,LOG:buildNormalFunctionCallback("log"),LN:buildNormalFunctionCallback("ln"),COS:buildNormalFunctionCallback(r.cos),SIN:buildTranslatableFunctionCallback(r.sin,["sin","sen"],"sin"),TAN:buildTranslatableFunctionCallback(r.tan,["tan","tg"],"tan"),CDOT:buildGenericCallback("\\cdot"),DECIMAL:buildGenericCallback(getDecimalSeparator(t)),DIVIDE:buildGenericCallback("\\div"),EQUAL:buildGenericCallback("="),GEQ:buildGenericCallback("\\geq"),GT:buildGenericCallback(">"),LEQ:buildGenericCallback("\\leq"),LT:buildGenericCallback("<"),MINUS:buildGenericCallback("-"),NEGATIVE:buildGenericCallback("-"),NEQ:buildGenericCallback("\\neq"),PERCENT:buildGenericCallback("%"),PERIOD:buildGenericCallback("."),PLUS:buildGenericCallback("+"),TIMES:buildGenericCallback("\\times"),FRAC_INCLUSIVE:buildGenericCallback("/",MathFieldActionType.CMD),FRAC:buildGenericCallback("\\frac",MathFieldActionType.CMD),LEFT_PAREN:buildGenericCallback("(",MathFieldActionType.CMD),RIGHT_PAREN:buildGenericCallback(")",MathFieldActionType.CMD),SQRT:buildGenericCallback("sqrt",MathFieldActionType.CMD),PI:buildGenericCallback("pi",MathFieldActionType.CMD),THETA:buildGenericCallback("theta",MathFieldActionType.CMD),RADICAL:buildGenericCallback("nthroot",MathFieldActionType.CMD),BACKSPACE:buildGenericCallback("Backspace",MathFieldActionType.KEYSTROKE),UP:buildGenericCallback("Up",MathFieldActionType.KEYSTROKE),DOWN:buildGenericCallback("Down",MathFieldActionType.KEYSTROKE),CUBE_ROOT:e=>{e.write("\\sqrt[3]{}"),e.keystroke("Left")},FRAC_EXCLUSIVE:e=>{const i=e.cursor()[mathQuillInstance.L]===MathFieldActionType.MQ_END;e.cmd("\\frac"),i&&e.keystroke("Left")},LOG_N:e=>{e.write("log_{ }\\left(\\right)"),e.keystroke("Left"),e.keystroke("Left"),e.keystroke("Left")},DISMISS:()=>{},NUM_0:buildGenericCallback("0"),NUM_1:buildGenericCallback("1"),NUM_2:buildGenericCallback("2"),NUM_3:buildGenericCallback("3"),NUM_4:buildGenericCallback("4"),NUM_5:buildGenericCallback("5"),NUM_6:buildGenericCallback("6"),NUM_7:buildGenericCallback("7"),NUM_8:buildGenericCallback("8"),NUM_9:buildGenericCallback("9"),a:buildGenericCallback("a"),b:buildGenericCallback("b"),c:buildGenericCallback("c"),d:buildGenericCallback("d"),e:buildGenericCallback("e"),f:buildGenericCallback("f"),g:buildGenericCallback("g"),h:buildGenericCallback("h"),i:buildGenericCallback("i"),j:buildGenericCallback("j"),k:buildGenericCallback("k"),l:buildGenericCallback("l"),m:buildGenericCallback("m"),n:buildGenericCallback("n"),o:buildGenericCallback("o"),p:buildGenericCallback("p"),q:buildGenericCallback("q"),r:buildGenericCallback("r"),s:buildGenericCallback("s"),t:buildGenericCallback("t"),u:buildGenericCallback("u"),v:buildGenericCallback("v"),w:buildGenericCallback("w"),x:buildGenericCallback("x"),y:buildGenericCallback("y"),z:buildGenericCallback("z"),A:buildGenericCallback("A"),B:buildGenericCallback("B"),C:buildGenericCallback("C"),D:buildGenericCallback("D"),E:buildGenericCallback("E"),F:buildGenericCallback("F"),G:buildGenericCallback("G"),H:buildGenericCallback("H"),I:buildGenericCallback("I"),J:buildGenericCallback("J"),K:buildGenericCallback("K"),L:buildGenericCallback("L"),M:buildGenericCallback("M"),N:buildGenericCallback("N"),O:buildGenericCallback("O"),P:buildGenericCallback("P"),Q:buildGenericCallback("Q"),R:buildGenericCallback("R"),S:buildGenericCallback("S"),T:buildGenericCallback("T"),U:buildGenericCallback("U"),V:buildGenericCallback("V"),W:buildGenericCallback("W"),X:buildGenericCallback("X"),Y:buildGenericCallback("Y"),Z:buildGenericCallback("Z")});export{MathFieldActionType as M,getKeyTranslator as a,isSquareRoot as b,createMathField as c,dist as d,isNthRoot as e,isNthRootIndex as f,getCursorContext as g,isInsideLogIndex as h,isFraction as i,isInsideEmptyNode as j,maybeFindCommandBeforeParens as k,maybeFindCommand as l,mathQuillInstance as m,selectNode as s};
