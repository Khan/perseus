import{j as d}from"./jsx-runtime-FVsy8kgq.js";import{e as h,U as f,K as c}from"./util-XR-uqOh-.js";import{c as y}from"./index-dnMhQZ-1.js";import{_ as i,$ as g}from"./jquery-yG1GhClm.js";import{P as n}from"./index-0C4KXdeC.js";import{r as v}from"./index-TT1qJ6UJ.js";import{R as l}from"./index-7vsPyIck.js";import{P as k}from"./i18n-context-H_mTdYuW.js";const{firstNumericalParse:u,captureScratchpadTouchStart:V}=f,p=c.toNumericString,b=c.getNumericFormat,a=class a extends v.Component{constructor(){super(...arguments),this.state={format:this.props.format},this.getValue=()=>this.parseInputValue(l.findDOMNode(this.refs.input).value),this.getStringValue=()=>l.findDOMNode(this.refs.input).value.toString(),this.parseInputValue=e=>{if(e===""){const s=this.props.placeholder;return i.isFinite(s)?+s:null}const t=u(e,this.context.strings);return i.isFinite(t)?t:this.props.value},this.focus=()=>{l.findDOMNode(this.refs.input).focus(),this._handleFocus()},this.blur=()=>{l.findDOMNode(this.refs.input).blur(),this._handleBlur()},this.setSelectionRange=(e,t)=>{l.findDOMNode(this).setSelectionRange(e,t)},this.getSelectionStart=()=>l.findDOMNode(this).selectionStart,this.getSelectionEnd=()=>l.findDOMNode(this).selectionEnd,this._checkValidity=e=>{if(e==null)return!0;const t=u(e,this.context.strings),s=this.props.checkValidity;return i.isFinite(t)&&s(t)},this._handleChange=e=>{const t=e.target.value,s=this.parseInputValue(t),r=b(t);this.props.onChange(s),r&&(this.props.onFormatChange(s,r),this.setState({format:r}))},this._handleFocus=()=>{this.props.onFocus&&this.props.onFocus()},this._handleBlur=e=>{e&&e.type==="keypress"&&e.keyCode!==13||(this._setValue(this.props.value,this.state.format),this.props.onBlur&&this.props.onBlur())},this._onKeyDown=e=>{if(this.props.onKeyDown&&this.props.onKeyDown(e),!this.props.useArrowKeys||!i.contains(["ArrowUp","ArrowDown"],e.key))return;let t=this.getValue();t===Math.floor(t)&&(e.key==="ArrowUp"?t=t+1:e.key==="ArrowDown"&&(t=t-1),this._checkValidity(t)&&this.props.onChange(t))},this._setValue=(e,t)=>{g(l.findDOMNode(this.refs.input)).val(p(e,t))}}componentDidUpdate(e){h(this.getValue(),this.props.value)||this._setValue(this.props.value,this.state.format)}render(){let e=y({"number-input":!0,"invalid-input":!this._checkValidity(this.props.value),mini:this.props.size==="mini",small:this.props.size==="small",normal:this.props.size==="normal"});this.props.className!=null&&(e=e+" "+this.props.className);const{onFormatChange:t,checkValidity:s,useArrowKeys:r,...m}=this.props;return d("input",{...m,className:e,type:"text",ref:"input",onChange:this._handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur,onKeyPress:this._handleBlur,onKeyDown:this._onKeyDown,onTouchStart:V,defaultValue:p(this.props.value,this.state.format),value:void 0})}};a.contextType=k,a.propTypes={value:n.number,format:n.string,placeholder:n.oneOfType([n.string,n.number]),onChange:n.func.isRequired,onFormatChange:n.func,checkValidity:n.func,size:n.oneOf(["mini","small","normal"]),label:n.oneOf(["put your labels outside your inputs!"])},a.defaultProps={value:null,placeholder:null,format:null,onFormatChange:()=>null,checkValidity:()=>!0,useArrowKeys:!1};let o=a;o.__docgenInfo={description:'An input box that accepts only numeric strings\n\nCalls `onChange(value, format)` for valid numbers.\n\nReverts to the current value `onBlur` or on [ENTER],\n  but maintains the format (i.e. 3/2, 1 1/2, 150%)\n\nAccepts empty input and sends it to `onChange` as `null` if no numeric\nplaceholder is set.\n\nIf given a `checkValidity` function, will turn the background/outline red\nwhen invalid.\n\nIf `useArrowKeys` is set to `true`, up/down arrows will increment/decrement\nintegers.\n\nOptionally takes a `size` (`"mini"`, `"small"`,` `"normal"`)',methods:[{name:"getValue",docblock:null,modifiers:[],params:[],returns:null},{name:"getStringValue",docblock:null,modifiers:[],params:[],returns:null},{name:"parseInputValue",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null}],returns:null},{name:"focus",docblock:null,modifiers:[],params:[],returns:null},{name:"blur",docblock:null,modifiers:[],params:[],returns:null},{name:"setSelectionRange",docblock:null,modifiers:[],params:[{name:"selectionStart",optional:!1,type:null},{name:"selectionEnd",optional:!1,type:null}],returns:null},{name:"getSelectionStart",docblock:null,modifiers:[],params:[],returns:null},{name:"getSelectionEnd",docblock:null,modifiers:[],params:[],returns:null},{name:"_checkValidity",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null}],returns:null},{name:"_handleChange",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"_handleFocus",docblock:null,modifiers:[],params:[],returns:null},{name:"_handleBlur",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"_onKeyDown",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"_setValue",docblock:null,modifiers:[],params:[{name:"val",optional:!1,type:null},{name:"format",optional:!1,type:null}],returns:null}],displayName:"NumberInput",props:{value:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"number"},required:!1},placeholder:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"union",value:[{name:"string"},{name:"number"}]},required:!1},format:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"string"},required:!1},onFormatChange:{defaultValue:{value:"() => null",computed:!1},description:"",type:{name:"func"},required:!1},checkValidity:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},useArrowKeys:{defaultValue:{value:"false",computed:!1},required:!1},onChange:{description:"",type:{name:"func"},required:!0},size:{description:"",type:{name:"enum",value:[{value:'"mini"',computed:!1},{value:'"small"',computed:!1},{value:'"normal"',computed:!1}]},required:!1},label:{description:"",type:{name:"enum",value:[{value:'"put your labels outside your inputs!"',computed:!1}]},required:!1}}};export{o as N};
