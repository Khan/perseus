import{r}from"./index-C6mWTJJr.js";import{r as C}from"./index-Xl5L4rvz.js";import{I as L,V as A,T as O,_ as U}from"./index-CskvhqFA.js";import{m as j}from"./index-r7GwIklR.js";import{n as T}from"./no-important-DlFk8a1I.js";import{s as m,c as _,a as R}from"./index-C9RM_t1w.js";import{S as P}from"./index-B-CZbs2J.js";import{H as W,a as z}from"./index-CbNKSLRm.js";import{P as K}from"./Popper-Dy4DMz1_.js";class V{constructor(){this._subscribers=[],this._active=!1}_getIndex(e){return this._subscribers.findIndex(t=>t===e)}steal(e){const t=!!this._active;this._active=!0;for(const s of this._subscribers)s!==e&&s.activeStateStolen();return t}giveup(){this._active=!1}subscribe(e){if(this._getIndex(e)>=0)throw new Error("Already subscribed.");return this._subscribers.push(e),()=>{const s=this._getIndex(e);this._subscribers.splice(s,1)}}}const X=100,G=75,F=new V;class S extends r.Component{constructor(e){super(e),this._weSetFocusivity=void 0,this._anchorNode=void 0,this._focused=void 0,this._hovered=void 0,this._stolenFromUs=void 0,this._unsubscribeFromTracker=void 0,this._timeoutID=void 0,this.activeStateStolen=()=>{this._stolenFromUs=this.state.active||!!this._timeoutID,this._focused=!1,this._setActiveState(!1,!0)},this._handleFocusIn=()=>{this._updateActiveState(this._hovered,!0)},this._handleFocusOut=()=>{this._updateActiveState(this._hovered,!1)},this._handleMouseEnter=()=>{this._updateActiveState(!0,this._focused)},this._handleMouseLeave=()=>{this._updateActiveState(!1,this._focused)},this._handleKeyUp=t=>{t.key==="Escape"&&this.state.active&&(t.preventDefault(),t.stopPropagation(),this._updateActiveState(!1,!1))},this._focused=!1,this._hovered=!1,this.state={active:!1}}componentDidMount(){const e=C.findDOMNode(this);if(e instanceof Text)throw new Error("TooltipAnchor must be applied to an Element. Text content is not supported.");this._unsubscribeFromTracker=F.subscribe(this),this._anchorNode=e,this._updateFocusivity(),e&&(e.addEventListener("focusin",this._handleFocusIn),e.addEventListener("focusout",this._handleFocusOut),e.addEventListener("mouseenter",this._handleMouseEnter),e.addEventListener("mouseleave",this._handleMouseLeave),this.props.anchorRef(this._anchorNode))}componentDidUpdate(e){(e.forceAnchorFocusivity!==this.props.forceAnchorFocusivity||e.children!==this.props.children)&&this._updateFocusivity()}componentWillUnmount(){this._unsubscribeFromTracker&&this._unsubscribeFromTracker(),this._clearPendingAction();const e=this._anchorNode;e&&(e.removeEventListener("focusin",this._handleFocusIn),e.removeEventListener("focusout",this._handleFocusOut),e.removeEventListener("mouseenter",this._handleMouseEnter),e.removeEventListener("mouseleave",this._handleMouseLeave)),this.state.active&&document.removeEventListener("keyup",this._handleKeyUp)}_updateFocusivity(){const e=this._anchorNode;if(!e)return;const{forceAnchorFocusivity:t}=this.props,s=e.getAttribute("tabindex");t&&!s?(e.setAttribute("tabindex","0"),this._weSetFocusivity=!0):!t&&s&&this._weSetFocusivity&&(e.removeAttribute("tabindex"),this._weSetFocusivity=!1)}_updateActiveState(e,t){this._hovered=e,this._focused=t,this._setActiveState(e||t)}_clearPendingAction(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}_setActiveState(e,t){if(this._stolenFromUs||e!==this.state.active||!this.state.active&&this._timeoutID)this._clearPendingAction();else if(e===this.state.active){this._timeoutID&&this._clearPendingAction();return}if(t=t||e&&F.steal(this),t)e?document.addEventListener("keyup",this._handleKeyUp):document.removeEventListener("keyup",this._handleKeyUp),this.setState({active:e}),this.props.onActiveChanged(e),!this._stolenFromUs&&!e&&F.giveup(),this._stolenFromUs=!1;else{const s=e?X:G;this._timeoutID=setTimeout(()=>{this._timeoutID=null,this._setActiveState(e,!0)},s)}}_renderAnchorableChildren(){const{children:e}=this.props;return typeof e=="string"?r.createElement(O,null,e):e}_renderAccessibleChildren(e){const t=this._renderAnchorableChildren();return r.cloneElement(t,{"aria-describedby":`${e}-${S.ariaContentId}`})}render(){return this.props.id?this._renderAccessibleChildren(this.props.id):this._renderAnchorableChildren()}}S.defaultProps={forceAnchorFocusivity:!0};S.ariaContentId="aria-content";let q=0;class M extends r.Component{_calculateDimensionsFromPlacement(){const{placement:e}=this.props,t=.5;switch(e){case"top":return{trimlinePoints:[`0,-${t}`,`${h},-${t}`],points:["0,0",`${h/2},${u}`,`${h},0`],height:u,width:h};case"right":return{trimlinePoints:[`${u+t},0`,`${u+t},${h}`],points:[`${u},0`,`0,${h/2}`,`${u},${h}`],width:u,height:h};case"bottom":return{trimlinePoints:[`0, ${u+t}`,`${h},${u+t}`],points:[`0, ${u}`,`${h/2},0`,`${h},${u}`],width:h,height:u};case"left":return{trimlinePoints:[`-${t},0`,`-${t},${h}`],points:["0,0",`${u},${h/2}`,`0,${h}`],width:u,height:h};default:throw new Error(`Unknown placement: ${e}`)}}_getFilterPositioning(){const{placement:e}=this.props;switch(e){case"top":return{y:"-50%",x:"-50%",offsetShadowX:0};case"bottom":return null;case"left":return{y:"-50%",x:"0%",offsetShadowX:1};case"right":return{y:"-50%",x:"-100%",offsetShadowX:-1};default:throw new Error(`Unknown placement: ${e}`)}}_maybeRenderDropshadow(e){const t=this._getFilterPositioning();if(!t)return null;const{placement:s}=this.props,{y:n,x:i,offsetShadowX:l}=t,a=`tooltip-dropshadow-${s}-${q++}`;return[r.createElement("filter",{key:"filter",id:a,width:"200%",height:"200%",x:i,y:n},r.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:m.xxSmall_6/2}),r.createElement("feComponentTransfer",null,r.createElement("feFuncA",{type:"linear",slope:"0.3"}))),r.createElement("g",{key:"dropshadow",transform:`translate(${l},5.5)`},r.createElement("polyline",{fill:_.offBlack16,points:e.join(" "),stroke:_.offBlack32,filter:`url(#${a})`}))]}_getFullTailWidth(){return h+2*f}_getFullTailHeight(){return u+E}_getContainerStyle(){const{placement:e}=this.props,t=this._getFullTailWidth(),s=this._getFullTailHeight();switch(e){case"top":return{top:-1,width:t,height:s};case"right":return{left:1,width:s,height:t};case"bottom":return{top:1,width:t,height:s};case"left":return{left:-1,width:s,height:t};default:throw new Error(`Unknown placement: ${e}`)}}_getArrowStyle(){const{placement:e}=this.props;switch(e){case"top":return{marginLeft:f,marginRight:f,paddingBottom:E};case"right":return{marginTop:f,marginBottom:f,paddingLeft:E};case"bottom":return{marginLeft:f,marginRight:f,paddingTop:E};case"left":return{marginTop:f,marginBottom:f,paddingRight:E};default:throw new Error(`Unknown placement: ${e}`)}}_renderArrow(){const{trimlinePoints:e,points:t,height:s,width:n}=this._calculateDimensionsFromPlacement(),{color:i,show:l}=this.props;return l?r.createElement("svg",{className:T.css($.arrow),style:this._getArrowStyle(),width:n,height:s,"aria-hidden":!0},this._maybeRenderDropshadow(t),r.createElement("polyline",{fill:_[i],stroke:_[i],points:t.join(" ")}),r.createElement("polyline",{fill:_[i],points:t.join(" "),stroke:_.offBlack16}),r.createElement("polyline",{stroke:_[i],points:e.join(" ")})):r.createElement(P,{size:s})}render(){const{offset:e,placement:t,updateRef:s}=this.props;return r.createElement(A,{style:[$.tailContainer,U({},e),this._getContainerStyle()],"data-placement":t,ref:s},this._renderArrow())}}M.defaultProps={color:"white",show:!0};const E=m.xSmall_8,f=m.xSmall_8,h=m.large_24,u=m.small_12,$=T.StyleSheet.create({tailContainer:{position:"relative",pointerEvents:"none"},arrow:{overflow:"visible"}});class J extends r.Component{constructor(...e){super(...e),this.state={active:!1},this.handleMouseEnter=()=>{this._setActiveState(!0)},this.handleMouseLeave=()=>{this.props.onActiveChanged(!1)}}_setActiveState(e){this.setState({active:e}),this.props.onActiveChanged(e)}render(){const{id:e,children:t,updateBubbleRef:s,placement:n,isReferenceHidden:i,style:l,updateTailRef:a,tailOffset:c,backgroundColor:d}=this.props;return r.createElement(A,{id:e,role:"tooltip","data-placement":n,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,ref:s,style:[i&&k.hide,k.bubble,k[`content-${n}`],l]},r.createElement(A,{style:[k.content,d&&{backgroundColor:_[d]}]},t),r.createElement(M,{updateRef:a,placement:n,offset:c,color:d}))}}const k=T.StyleSheet.create({bubble:{position:"absolute"},hide:{pointerEvents:"none",opacity:0,backgroundColor:"transparent",color:"transparent"},"content-top":{flexDirection:"column"},"content-right":{flexDirection:"row-reverse"},"content-bottom":{flexDirection:"column-reverse"},"content-left":{flexDirection:"row"},content:{maxWidth:472,borderRadius:m.xxxSmall_4,border:`solid 1px ${R.border.primary}`,backgroundColor:R.surface.primary,boxShadow:`0 ${m.xSmall_8}px ${m.xSmall_8}px 0 ${_.offBlack8}`,justifyContent:"center"}});class Q extends r.Component{_renderTitle(){const{title:e}=this.props;return e?typeof e=="string"?r.createElement(W,null,e):e:null}_renderChildren(){const{children:e}=this.props;return typeof e=="string"?r.createElement(z,null,e):e}render(){const e=this._renderTitle(),t=this._renderChildren(),s=e?I.withTitle:I.withoutTitle;return r.createElement(A,{style:[s,this.props.contentStyle],testId:this.props.testId},e,e&&t&&r.createElement(P,{size:m.xxxSmall_4}),t)}}const I=T.StyleSheet.create({withoutTitle:{padding:`10px ${m.medium_16}px`},withTitle:{padding:m.medium_16}});var x=o=>o==null||typeof o!="object"?o:Array.isArray(o)?o.map(x):Object.keys(o).reduce((e,t)=>(e[t]=x(o[t]),e),{}),N=Object.freeze({Unknown:"Unknown",Internal:"Internal",InvalidInput:"InvalidInput",InvalidUse:"InvalidUse",NotFound:"NotFound",NotAllowed:"NotAllowed",Unauthorized:"Unauthorized",NotImplemented:"NotImplemented"});function v(o,e,t){return(e=function(s){var n=function(i,l){if(typeof i!="object"||i===null)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var c=a.call(i,l);if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(i)}(s,"string");return typeof n=="symbol"?n:String(n)}(e))in o?Object.defineProperty(o,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):o[e]=t,o}class b{constructor(e,t,s){v(this,"_name",void 0),v(this,"_message",void 0),v(this,"_stackFrames",void 0),this._name=e,this._message=t,this._stackFrames=[...s]}get message(){return this._message}get name(){return this._name}get messageWithName(){return"".concat(this.name,": ").concat(this.message)}get stack(){return[...this._stackFrames]}get standardizedStack(){return"".concat(this.messageWithName,`
`).concat(this._stackFrames.join(`
`))}static fromConsequenceAndCause(e,t){for(var s,n=[],i=t.stack,l=(s=e==null?void 0:e.stack)!==null&&s!==void 0?s:[],a=i.length-1,c=l.length-1;a>=0&&c>=0&&i[a]===l[c];)n.unshift(i[a]),a--,c--;for(;a>=0;a--)n.unshift(i[a]);for(;c>=0;c--)n.unshift(l[c]);return new b(e.name,((d,p)=>{var g=y=>(y==null?void 0:y.trim())||"(empty message)",w=g(d);return p==null?w:"".concat(w,`
	caused by
		`).concat(g(p))})(e.message,t.messageWithName),n)}static normalize(e){var t,s,n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=(t=e.message.toString().split(`
`).find(g=>g.trim().length))!==null&&t!==void 0?t:"(empty message)",c=e.toString(),d=((s=e.stack)!==null&&s!==void 0&&s.startsWith(c)&&e.stack!==c?e.stack.substring(c.length):(n=e.stack)!==null&&n!==void 0?n:"").split(`
`).filter(g=>g.trim().length),p=d.length>=i+l?i:0;return new b(e.name,a,d.slice(p))}static from(e){var t,s,n=e.toString(),i=((t=e.stack)!==null&&t!==void 0&&t.startsWith(n)&&e.stack!==n?e.stack.substring(n.length):(s=e.stack)!==null&&s!==void 0?s:"").split(`
`).filter(l=>l.trim().length);return new b(e.name,e.message,i)}}class Y extends Error{constructor(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:N.Unknown,{cause:s,prefix:n,name:i,metadata:l,stripStackFrames:a,minimumFrameCount:c,compositeStack:d}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Object.freeze({});super(e),v(this,"kind",void 0),v(this,"originalMessage",void 0),v(this,"originalStack",void 0),v(this,"metadata",void 0),v(this,"cause",void 0),this.originalMessage=e,this.metadata=(y=>{if(y==null)return y;var B=x(y);return Object.freeze(B)})(l),this.name="".concat(n??"").concat(t).concat(i??"","Error"),this.kind=t,this.originalStack=this.stack,this.cause=s;var p=b.normalize(this,a??0,c??1);if(delete this.stack,this.stack=p.standardizedStack,s!=null){var g=b.from(s),w=b.fromConsequenceAndCause(p,g);this.message=w.message,d===!0&&(this.stack=w.standardizedStack)}}}class Z extends Y{constructor(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:N.InvalidInput,s=arguments.length>2?arguments[2]:void 0;super("Unhandled case for '".concat(e,"'"),t,s)}}class D{constructor(){this._lastRef=void 0,this._targetFn=void 0,this.updateRef=e=>{if(e){const s=C.findDOMNode(e);if(s instanceof HTMLElement&&s!==this._lastRef){var t;this._lastRef=s,(t=this._targetFn)==null||t.call(this,s)}}},this.setCallback=e=>{if(this._targetFn!==e){if(e&&typeof e!="function")throw new Error("targetFn must be a function");this._targetFn=e||void 0,this._lastRef&&this._targetFn&&this._targetFn(this._lastRef)}}}}const ee=o=>{switch(o){case"auto":case"auto-start":case"auto-end":case"top":case"top-start":case"top-end":return"top";case"bottom":case"bottom-start":case"bottom-end":return"bottom";case"right":case"right-start":case"right-end":return"right";case"left":case"left-start":case"left-end":return"left";default:throw new Z(o)}};function te({state:o}){const e=o.rects.popper.height+o.rects.reference.height;document.documentElement.clientHeight<e&&o.modifiersData.hide&&(o.modifiersData.hide=U({},o.modifiersData.hide,{isReferenceHidden:!1}))}const se={name:"smallViewport",enabled:!0,phase:"main",fn:te};class H extends r.Component{constructor(e){super(e),this._bubbleRefTracker=new D,this._tailRefTracker=new D,this._observer=null,this._popperUpdate=null,this.handleFirstUpdate=()=>{this.setState({isReady:!0})},this.state={isReady:!1}}componentDidMount(){const{anchorElement:e,autoUpdate:t}=this.props;!e||!t||(this._observer=new MutationObserver(()=>{var s;(s=this._popperUpdate)==null||s.call(this)}),this._observer.observe(e,{attributes:!0,childList:!0,subtree:!0}))}componentWillUnmount(){var e;(e=this._observer)==null||e.disconnect()}_renderPositionedContent(e){const{children:t}=this.props,{isReady:s}=this.state,n=ee(e.placement)||this.props.placement;this._bubbleRefTracker.setCallback(e.ref),this._tailRefTracker.setCallback(e.arrowProps.ref),this._popperUpdate=e.update;const i={placement:n,style:{top:e.style.top,left:e.style.left,bottom:e.style.bottom,right:e.style.right,position:e.style.position,transform:e.style.transform,visibility:s?void 0:"hidden"},updateBubbleRef:this._bubbleRefTracker.updateRef,tailOffset:{bottom:e.arrowProps.style.bottom,right:e.arrowProps.style.right,top:e.arrowProps.style.top,left:e.arrowProps.style.left,transform:e.arrowProps.style.transform},updateTailRef:this._tailRefTracker.updateRef,isReferenceHidden:e.isReferenceHidden};return t(i)}render(){const{anchorElement:e,placement:t,rootBoundary:s,viewportPadding:n}=this.props,i=[se];return s==="viewport"?i.push({name:"preventOverflow",options:{rootBoundary:"viewport",padding:n}}):i.push({name:"flip",options:{rootBoundary:"document"}}),r.createElement(K,{referenceElement:e,strategy:"fixed",placement:t,modifiers:i,onFirstUpdate:this.handleFirstUpdate},l=>this._renderPositionedContent(l))}}H.defaultProps={rootBoundary:"viewport",viewportPadding:m.small_12};class ne extends r.Component{constructor(...e){super(...e),this.state={active:!1,activeBubble:!1}}static getDerivedStateFromProps(e,t){return{active:typeof e.opened=="boolean"?e.opened:t.active}}_updateAnchorElement(e){e&&e!==this.state.anchorElement&&this.setState({anchorElement:e})}_renderBubbleContent(){const{title:e,content:t,contentStyle:s,testId:n}=this.props;return typeof t=="string"?r.createElement(Q,{title:e,contentStyle:s,testId:n?`${n}-content`:void 0},t):e?r.cloneElement(t,{title:e}):t}_renderPopper(e){const{backgroundColor:t,placement:s}=this.props;return r.createElement(H,{anchorElement:this.state.anchorElement,placement:s,autoUpdate:this.props.autoUpdate,viewportPadding:this.props.viewportPadding},n=>r.createElement(J,{id:e,style:n.style,backgroundColor:t,tailOffset:n.tailOffset,isReferenceHidden:n.isReferenceHidden,placement:n.placement,updateTailRef:n.updateTailRef,updateBubbleRef:n.updateBubbleRef,onActiveChanged:i=>this.setState({activeBubble:i})},this._renderBubbleContent()))}_getHost(){const{anchorElement:e}=this.state;return j(e)||document.body}_renderTooltipAnchor(e){const{autoUpdate:t,children:s,forceAnchorFocusivity:n}=this.props,{active:i,activeBubble:l}=this.state,a=this._getHost(),c=t?this.state.anchorElement:!0,d=a&&(i||l)&&c;return r.createElement(r.Fragment,null,r.createElement(S,{forceAnchorFocusivity:n,anchorRef:p=>this._updateAnchorElement(p),onActiveChanged:p=>this.setState({active:p}),id:`${e}-anchor`},s),d&&C.createPortal(this._renderPopper(e),a))}render(){const{id:e}=this.props;return r.createElement(L,{id:e},t=>this._renderTooltipAnchor(t))}}ne.defaultProps={forceAnchorFocusivity:!0,placement:"top"};export{ne as T,Q as a,H as b,M as c};
