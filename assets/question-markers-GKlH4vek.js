import{a as d,j as i}from"./jsx-runtime-FVsy8kgq.js";import{r as u}from"./index-TT1qJ6UJ.js";import{b as g}from"./article-renderer-VnOyzl6T.js";import"./jquery-yG1GhClm.js";import{U as h}from"./util-XR-uqOh-.js";import"./phet-simulation-QObOE2Mw.js";import"./version-akiLXZts.js";import{g as k}from"./dependencies-d8cZibFS.js";import"./perseus-api-Nq3s7IMx.js";import"./perseus-item-ZuO7sC9c.js";import"./hints-renderer-zO2ntf7r.js";import"./renderer-ldOQ_71g.js";import"./base-radio-u93jkOVY.js";import"./button-group-nsoLlHtM.js";import"./graph-LHyvBqdA.js";import"./svg-image-h96M64n1.js";import"./hud-4BOtaFc1.js";import"./icon-R5gZamfG.js";import"./index-uzeeKkRr.js";import"./inline-icon-NjJlm7d0.js";import"./math-input-LfaQMFVa.js";import"./multi-button-group-atHe8dYZ.js";import"./number-input-an5PfEgD.js";import"./range-input-CfjfZG5J.js";import"./text-input-15gEhfDF.js";import"./text-list-editor-Jz35fIN1.js";import"./index-0C4KXdeC.js";import"./i18n-context-xqHghGAX.js";import"./index-xs9l8-Af.js";import{l as s}from"./index-awljIyHI.js";import{a as b,b as f}from"./global-colors-VIVU4Od4.js";import{M}from"./marker-eO3hLbb0.js";class R extends u.Component{constructor(){super(...arguments),this._markers=[],this.handleImageDoubleClick=r=>{r.preventDefault();const e=r.currentTarget.getBoundingClientRect(),t=Math.round((r.clientX-e.left)/e.width*1e3)/10,l=Math.round((r.clientY-e.top)/e.height*1e3)/10,{markers:a,onChange:n}=this.props;n([...a,{answers:[],label:"",x:t,y:l}])}}openDropdownForMarkerIndices(r){r.forEach(e=>{var t;this._markers[e]&&((t=this._markers[e])==null||t.openDropdown())})}render(){const{choices:r,imageUrl:e,imageWidth:t,imageHeight:l,markers:a,onChange:n}=this.props,y=k().staticUrl;return d("div",{children:[i("div",{className:s.css(m.title),children:"Markers"}),i("div",{className:s.css(m.subtitle),children:e?d("span",{children:["Double-click on the image to add a marker.",i("br",{}),i("br",{}),"Markers are read by screen readers in the order that you add them here, so add in a logical order for the learner (e.g. sequentially, clockwise). You can test order by using keyboard tabbing."]}):"Upload an image to place markers."}),e&&d("div",{className:s.css(m.markersCanvas),style:{maxWidth:t,maxHeight:l},children:[i("img",{alt:"",className:s.css(m.image),src:y(h.getRealImageUrl(e)),onDoubleClick:this.handleImageDoubleClick}),a.map((p,o)=>u.createElement(M,{...p,choices:r,key:`${p.x}.${p.y}`,onChange:c=>n([...a.slice(0,o),c,...a.slice(o+1)]),onRemove:()=>n([...a.slice(0,o),...a.slice(o+1)]),ref:c=>this._markers[o]=c}))]})]})}}const m=s.StyleSheet.create({title:{...g,marginBottom:6,color:b},subtitle:{fontFamily:"inherit",fontSize:12,lineHeight:"14px",marginBottom:12,color:f},markersCanvas:{position:"relative",border:"solid 1px rgba(33, 36, 44, 0.16)"},image:{display:"block",maxWidth:"100%"}});R.__docgenInfo={description:"",methods:[{name:"openDropdownForMarkerIndices",docblock:null,modifiers:[],params:[{name:"indices",optional:!1,type:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>",alias:"ReadonlyArray"}}],returns:null},{name:"handleImageDoubleClick",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"ReactMouseEvent",raw:"React.MouseEvent",alias:"React.MouseEvent"}}],returns:null}],displayName:"QuestionMarkers",props:{choices:{required:!0,tsType:{name:"ReadonlyArray",elements:[{name:"string"}],raw:"ReadonlyArray<string>"},description:""},imageUrl:{required:!0,tsType:{name:"string"},description:""},imageWidth:{required:!0,tsType:{name:"number"},description:""},imageHeight:{required:!0,tsType:{name:"number"},description:""},markers:{required:!0,tsType:{name:"ReadonlyArray",elements:[{name:"MarkerType"}],raw:"ReadonlyArray<MarkerType>"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(markers: ReadonlyArray<MarkerType>) => void",signature:{arguments:[{type:{name:"ReadonlyArray",elements:[{name:"MarkerType"}],raw:"ReadonlyArray<MarkerType>"},name:"markers"}],return:{name:"void"}}},description:""}}};export{R as Q};
