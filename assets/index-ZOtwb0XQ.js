import{r as v,j as o,b as B,c as R,I as L,H as O,aH as W,n as T,V as A,y as D,s as p,e as _,aI as z,f as C,g as K}from"./iframe-BXVA8BYU.js";import{P as V}from"./Popper-4-x9NNzV.js";class X{_getIndex(t){return this._subscribers.findIndex(e=>e===t)}steal(t){const e=!!this._active;this._active=!0;for(const s of this._subscribers)s!==t&&s.activeStateStolen();return e}giveup(){this._active=!1}subscribe(t){if(this._getIndex(t)>=0)throw new Error("Already subscribed.");return this._subscribers.push(t),()=>{const s=this._getIndex(t);this._subscribers.splice(s,1)}}constructor(){this._subscribers=[],this._active=!1}}const G=100,q=75,E=new X;class U extends v.Component{componentDidMount(){const t=R.findDOMNode(this);if(t instanceof Text)throw new Error("TooltipAnchor must be applied to an Element. Text content is not supported.");this._unsubscribeFromTracker=E.subscribe(this),this._anchorNode=t,this._updateFocusivity(),t&&(t.addEventListener("focusin",this._handleFocusIn),t.addEventListener("focusout",this._handleFocusOut),t.addEventListener("mouseenter",this._handleMouseEnter),t.addEventListener("mouseleave",this._handleMouseLeave),this.props.anchorRef(this._anchorNode))}componentDidUpdate(t){(t.forceAnchorFocusivity!==this.props.forceAnchorFocusivity||t.children!==this.props.children)&&this._updateFocusivity()}componentWillUnmount(){this._unsubscribeFromTracker&&this._unsubscribeFromTracker(),this._clearPendingAction();const t=this._anchorNode;t&&(t.removeEventListener("focusin",this._handleFocusIn),t.removeEventListener("focusout",this._handleFocusOut),t.removeEventListener("mouseenter",this._handleMouseEnter),t.removeEventListener("mouseleave",this._handleMouseLeave)),this.state.active&&document.removeEventListener("keyup",this._handleKeyUp)}_updateFocusivity(){const t=this._anchorNode;if(!t)return;const{forceAnchorFocusivity:e}=this.props,s=t.getAttribute("tabindex");e&&!s?(t.setAttribute("tabindex","0"),this._weSetFocusivity=!0):!e&&s&&this._weSetFocusivity&&(t.removeAttribute("tabindex"),this._weSetFocusivity=!1)}_updateActiveState(t,e){this._hovered=t,this._focused=e,this._setActiveState(t||e)}_clearPendingAction(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}_setActiveState(t,e){if(this._stolenFromUs||t!==this.state.active||!this.state.active&&this._timeoutID)this._clearPendingAction();else if(t===this.state.active){this._timeoutID&&this._clearPendingAction();return}if(e=e||t&&E.steal(this),e)t?document.addEventListener("keyup",this._handleKeyUp):document.removeEventListener("keyup",this._handleKeyUp),this.setState({active:t}),this.props.onActiveChanged(t),!this._stolenFromUs&&!t&&E.giveup(),this._stolenFromUs=!1;else{const s=t?G:q;this._timeoutID=setTimeout(()=>{this._timeoutID=null,this._setActiveState(t,!0)},s)}}_renderAnchorableChildren(){const{children:t}=this.props;return typeof t=="string"?o.jsx(z,{children:t}):t}render(){const{"aria-describedby":t}=this.props,e=this._renderAnchorableChildren();return v.cloneElement(e,{"aria-describedby":t})}constructor(t){super(t),this.activeStateStolen=()=>{this._stolenFromUs=this.state.active||!!this._timeoutID,this._focused=!1,this._setActiveState(!1,!0)},this._handleFocusIn=()=>{this._updateActiveState(this._hovered,!0)},this._handleFocusOut=()=>{this._updateActiveState(this._hovered,!1)},this._handleMouseEnter=()=>{this._updateActiveState(!0,this._focused)},this._handleMouseLeave=()=>{this._updateActiveState(!1,this._focused)},this._handleKeyUp=e=>{e.key==="Escape"&&this.state.active&&(e.preventDefault(),e.stopPropagation(),this._updateActiveState(!1,!1))},this._focused=!1,this._hovered=!1,this.state={active:!1}}}U.defaultProps={forceAnchorFocusivity:!0};let J=0;class P extends v.Component{_calculateDimensionsFromPlacement(){const{placement:t}=this.props,e=.5;switch(t){case"top":return{trimlinePoints:[`0,-${e}`,`${h},-${e}`],points:["0,0",`${h/2},${d}`,`${h},0`],height:d,width:h};case"right":return{trimlinePoints:[`${d+e},0`,`${d+e},${h}`],points:[`${d},0`,`0,${h/2}`,`${d},${h}`],width:d,height:h};case"bottom":return{trimlinePoints:[`0, ${d+e}`,`${h},${d+e}`],points:[`0, ${d}`,`${h/2},0`,`${h},${d}`],width:h,height:d};case"left":return{trimlinePoints:[`-${e},0`,`-${e},${h}`],points:["0,0",`${d},${h/2}`,`0,${h}`],width:d,height:h};default:throw new Error(`Unknown placement: ${t}`)}}_getFilterPositioning(){const{placement:t}=this.props;switch(t){case"top":return{y:"-50%",x:"-50%",offsetShadowX:0};case"bottom":return null;case"left":return{y:"-50%",x:"0%",offsetShadowX:1};case"right":return{y:"-50%",x:"-100%",offsetShadowX:-1};default:throw new Error(`Unknown placement: ${t}`)}}_maybeRenderDropshadow(t){const e=this._getFilterPositioning();if(!e)return null;const{placement:s}=this.props,{y:n,x:i,offsetShadowX:l}=e,a=`tooltip-dropshadow-${s}-${J++}`;return[o.jsxs("filter",{id:a,width:"200%",height:"200%",x:i,y:n,children:[o.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:p.xxSmall_6/2}),o.jsx("feComponentTransfer",{children:o.jsx("feFuncA",{type:"linear",slope:"0.3"})})]},"filter"),o.jsx("g",{transform:`translate(${l},5.5)`,children:o.jsx("polyline",{fill:_.offBlack16,points:t.join(" "),stroke:_.offBlack32,filter:`url(#${a})`})},"dropshadow")]}_getFullTailWidth(){return h+2*g}_getFullTailHeight(){return d+S}_getContainerStyle(){const{placement:t}=this.props,e=this._getFullTailWidth(),s=this._getFullTailHeight();switch(t){case"top":return{top:-1,width:e,height:s};case"right":return{left:1,width:s,height:e};case"bottom":return{top:1,width:e,height:s};case"left":return{left:-1,width:s,height:e};default:throw new Error(`Unknown placement: ${t}`)}}_getArrowStyle(){const{placement:t}=this.props;switch(t){case"top":return{marginLeft:g,marginRight:g,paddingBottom:S};case"right":return{marginTop:g,marginBottom:g,paddingLeft:S};case"bottom":return{marginLeft:g,marginRight:g,paddingTop:S};case"left":return{marginTop:g,marginBottom:g,paddingRight:S};default:throw new Error(`Unknown placement: ${t}`)}}_renderArrow(){const{trimlinePoints:t,points:e,height:s,width:n}=this._calculateDimensionsFromPlacement(),{color:i,show:l}=this.props;return l?o.jsxs("svg",{className:T.css($.arrow),style:this._getArrowStyle(),width:n,height:s,"aria-hidden":!0,children:[this._maybeRenderDropshadow(e),o.jsx("polyline",{fill:_[i],stroke:_[i],points:e.join(" ")}),o.jsx("polyline",{fill:_[i],points:e.join(" "),stroke:_.offBlack16}),o.jsx("polyline",{stroke:_[i],points:t.join(" ")})]}):o.jsx(D,{size:s})}render(){const{offset:t,placement:e,updateRef:s}=this.props;return o.jsx(A,{style:[$.tailContainer,{...t},this._getContainerStyle()],"data-placement":e,ref:s,children:this._renderArrow()})}}P.defaultProps={color:"white",show:!0};const S=p.xSmall_8,g=p.xSmall_8,h=p.large_24,d=p.small_12,$=T.StyleSheet.create({tailContainer:{position:"relative",pointerEvents:"none"},arrow:{overflow:"visible"}});class Q extends v.Component{_setActiveState(t){this.setState({active:t}),this.props.onActiveChanged(t)}render(){const{id:t,children:e,updateBubbleRef:s,placement:n,isReferenceHidden:i,style:l,updateTailRef:a,tailOffset:c,backgroundColor:u}=this.props;return o.jsxs(A,{id:t,role:"tooltip","data-placement":n,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,ref:s,style:[i&&k.hide,k.bubble,k[`content-${n}`],l],children:[o.jsx(A,{style:[k.content,u&&{backgroundColor:_[u]}],children:e}),o.jsx(P,{updateRef:a,placement:n,offset:c,color:u})]})}constructor(...t){super(...t),this.state={active:!1},this.handleMouseEnter=()=>{this._setActiveState(!0)},this.handleMouseLeave=()=>{this.props.onActiveChanged(!1)}}}const k=T.StyleSheet.create({bubble:{position:"absolute"},hide:{pointerEvents:"none",opacity:0,backgroundColor:"transparent",color:"transparent"},"content-top":{flexDirection:"column"},"content-right":{flexDirection:"row-reverse"},"content-bottom":{flexDirection:"column-reverse"},"content-left":{flexDirection:"row"},content:{maxWidth:472,borderRadius:K.radius.radius_040,border:`solid 1px ${C.core.border.neutral.subtle}`,backgroundColor:C.surface.primary,boxShadow:`0 ${p.xSmall_8}px ${p.xSmall_8}px 0 ${_.offBlack8}`,justifyContent:"center"}});class Y extends v.Component{_renderTitle(){const{title:t}=this.props;return t?typeof t=="string"?o.jsx(O,{children:t}):t:null}_renderChildren(){const{children:t}=this.props;return typeof t=="string"?o.jsx(W,{children:t}):t}render(){const t=this._renderTitle(),e=this._renderChildren(),s=t?I.withTitle:I.withoutTitle;return o.jsxs(A,{style:[s,this.props.contentStyle],testId:this.props.testId,children:[t,t&&e&&o.jsx(D,{size:p.xxxSmall_4}),e]})}}const I=T.StyleSheet.create({withoutTitle:{padding:`10px ${p.medium_16}px`},withTitle:{padding:p.medium_16}});var F=r=>r==null||typeof r!="object"?r:Array.isArray(r)?r.map(F):Object.keys(r).reduce((t,e)=>(t[e]=F(r[e]),t),{}),M=Object.freeze({Unknown:"Unknown",Internal:"Internal",InvalidInput:"InvalidInput",InvalidUse:"InvalidUse",NotFound:"NotFound",NotAllowed:"NotAllowed",Unauthorized:"Unauthorized",NotImplemented:"NotImplemented"});function b(r,t,e){return(t=function(s){var n=function(i,l){if(typeof i!="object"||i===null)return i;var a=i[Symbol.toPrimitive];if(a!==void 0){var c=a.call(i,l);if(typeof c!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(i)}(s,"string");return typeof n=="symbol"?n:String(n)}(t))in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}class y{constructor(t,e,s){b(this,"_name",void 0),b(this,"_message",void 0),b(this,"_stackFrames",void 0),this._name=t,this._message=e,this._stackFrames=[...s]}get message(){return this._message}get name(){return this._name}get messageWithName(){return"".concat(this.name,": ").concat(this.message)}get stack(){return[...this._stackFrames]}get standardizedStack(){return"".concat(this.messageWithName,`
`).concat(this._stackFrames.join(`
`))}static fromConsequenceAndCause(t,e){for(var s,n=[],i=e.stack,l=(s=t==null?void 0:t.stack)!==null&&s!==void 0?s:[],a=i.length-1,c=l.length-1;a>=0&&c>=0&&i[a]===l[c];)n.unshift(i[a]),a--,c--;for(;a>=0;a--)n.unshift(i[a]);for(;c>=0;c--)n.unshift(l[c]);return new y(t.name,((u,f)=>{var m=w=>(w==null?void 0:w.trim())||"(empty message)",x=m(u);return f==null?x:"".concat(x,`
	caused by
		`).concat(m(f))})(t.message,e.messageWithName),n)}static normalize(t){var e,s,n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=(e=t.message.toString().split(`
`).find(m=>m.trim().length))!==null&&e!==void 0?e:"(empty message)",c=t.toString(),u=((s=t.stack)!==null&&s!==void 0&&s.startsWith(c)&&t.stack!==c?t.stack.substring(c.length):(n=t.stack)!==null&&n!==void 0?n:"").split(`
`).filter(m=>m.trim().length),f=u.length>=i+l?i:0;return new y(t.name,a,u.slice(f))}static from(t){var e,s,n=t.toString(),i=((e=t.stack)!==null&&e!==void 0&&e.startsWith(n)&&t.stack!==n?t.stack.substring(n.length):(s=t.stack)!==null&&s!==void 0?s:"").split(`
`).filter(l=>l.trim().length);return new y(t.name,t.message,i)}}class Z extends Error{constructor(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M.Unknown,{cause:s,prefix:n,name:i,metadata:l,stripStackFrames:a,minimumFrameCount:c,compositeStack:u}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Object.freeze({});super(t),b(this,"kind",void 0),b(this,"originalMessage",void 0),b(this,"originalStack",void 0),b(this,"metadata",void 0),b(this,"cause",void 0),this.originalMessage=t,this.metadata=(w=>{if(w==null)return w;var H=F(w);return Object.freeze(H)})(l),this.name="".concat(n??"").concat(e).concat(i??"","Error"),this.kind=e,this.originalStack=this.stack,this.cause=s;var f=y.normalize(this,a??0,c??1);if(delete this.stack,this.stack=f.standardizedStack,s!=null){var m=y.from(s),x=y.fromConsequenceAndCause(f,m);this.message=x.message,u===!0&&(this.stack=x.standardizedStack)}}}class tt extends Z{constructor(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:M.InvalidInput,s=arguments.length>2?arguments[2]:void 0;super("Unhandled case for '".concat(t,"'"),e,s)}}class j{constructor(){this.updateRef=t=>{var e;if(t){const s=R.findDOMNode(t);s instanceof HTMLElement&&s!==this._lastRef&&(this._lastRef=s,(e=this._targetFn)==null||e.call(this,s))}},this.setCallback=t=>{if(this._targetFn!==t){if(t&&typeof t!="function")throw new Error("targetFn must be a function");this._targetFn=t||void 0,this._lastRef&&this._targetFn&&this._targetFn(this._lastRef)}}}}const et=r=>{switch(r){case"auto":case"auto-start":case"auto-end":case"top":case"top-start":case"top-end":return"top";case"bottom":case"bottom-start":case"bottom-end":return"bottom";case"right":case"right-start":case"right-end":return"right";case"left":case"left-start":case"left-end":return"left";default:throw new tt(r)}};function st({state:r}){const t=r.rects.popper.height+r.rects.reference.height;document.documentElement.clientHeight<t&&r.modifiersData.hide&&(r.modifiersData.hide={...r.modifiersData.hide,isReferenceHidden:!1})}const nt={name:"smallViewport",enabled:!0,phase:"main",fn:st};class N extends v.Component{componentDidMount(){const{anchorElement:t,autoUpdate:e}=this.props;!t||!e||(this._observer=new MutationObserver(()=>{var s;(s=this._popperUpdate)==null||s.call(this)}),this._observer.observe(t,{attributes:!0,childList:!0,subtree:!0}))}componentWillUnmount(){var t;(t=this._observer)==null||t.disconnect()}_renderPositionedContent(t){const{children:e}=this.props,{isReady:s}=this.state,n=et(t.placement)||this.props.placement;this._bubbleRefTracker.setCallback(t.ref),this._tailRefTracker.setCallback(t.arrowProps.ref),this._popperUpdate=t.update;const i={placement:n,style:{top:t.style.top,left:t.style.left,bottom:t.style.bottom,right:t.style.right,position:t.style.position,transform:t.style.transform,visibility:s?void 0:"hidden"},updateBubbleRef:this._bubbleRefTracker.updateRef,tailOffset:{bottom:t.arrowProps.style.bottom,right:t.arrowProps.style.right,top:t.arrowProps.style.top,left:t.arrowProps.style.left,transform:t.arrowProps.style.transform},updateTailRef:this._tailRefTracker.updateRef,isReferenceHidden:t.isReferenceHidden};return e(i)}render(){const{anchorElement:t,placement:e,rootBoundary:s,viewportPadding:n}=this.props,i=[nt];return s==="viewport"?i.push({name:"preventOverflow",options:{rootBoundary:"viewport",padding:n}}):i.push({name:"flip",options:{rootBoundary:"document"}}),o.jsx(V,{referenceElement:t,strategy:"fixed",placement:e,modifiers:i,onFirstUpdate:this.handleFirstUpdate,children:l=>this._renderPositionedContent(l)})}constructor(t){super(t),this._bubbleRefTracker=new j,this._tailRefTracker=new j,this._observer=null,this._popperUpdate=null,this.handleFirstUpdate=()=>{this.setState({isReady:!0})},this.state={isReady:!1}}}N.defaultProps={rootBoundary:"viewport",viewportPadding:p.small_12};class it extends v.Component{static getDerivedStateFromProps(t,e){return{active:typeof t.opened=="boolean"?t.opened:e.active}}_updateAnchorElement(t){t&&t!==this.state.anchorElement&&this.setState({anchorElement:t})}_renderBubbleContent(){const{title:t,content:e,contentStyle:s,testId:n}=this.props;return typeof e=="string"?o.jsx(Y,{title:t,contentStyle:s,testId:n?`${n}-content`:void 0,children:e}):t?v.cloneElement(e,{title:t}):e}_renderPopper(t){const{backgroundColor:e,placement:s}=this.props;return o.jsx(N,{anchorElement:this.state.anchorElement,placement:s,autoUpdate:this.props.autoUpdate,viewportPadding:this.props.viewportPadding,children:n=>o.jsx(Q,{id:t,style:n.style,backgroundColor:e,tailOffset:n.tailOffset,isReferenceHidden:n.isReferenceHidden,placement:n.placement,updateTailRef:n.updateTailRef,updateBubbleRef:n.updateBubbleRef,onActiveChanged:i=>this.setState({activeBubble:i}),children:this._renderBubbleContent()})})}_getHost(){const{anchorElement:t}=this.state;return B(t)||document.body}_renderTooltipAnchor(t){const{autoUpdate:e,children:s,forceAnchorFocusivity:n}=this.props,{active:i,activeBubble:l}=this.state,a=this._getHost(),c=e?this.state.anchorElement:!0,u=a&&(i||l)&&c,f=`${t}-aria-content`;return o.jsxs(v.Fragment,{children:[o.jsx(U,{forceAnchorFocusivity:n,anchorRef:m=>this._updateAnchorElement(m),onActiveChanged:m=>this.setState({active:m}),"aria-describedby":u?f:void 0,children:s}),u&&R.createPortal(this._renderPopper(f),a)]})}render(){const{id:t}=this.props;return o.jsx(L,{id:t,children:e=>this._renderTooltipAnchor(e)})}constructor(...t){super(...t),this.state={active:!1,activeBubble:!1}}}it.defaultProps={forceAnchorFocusivity:!0,placement:"top"};export{N as T,P as a,it as b};
