import{a as rt}from"./version-akiLXZts.js";import{$ as fe,_ as te}from"./jquery-yG1GhClm.js";import{c as it,g as st}from"./_commonjsHelpers-4gQjN7DL.js";const De=Object.freeze({Unknown:"Unknown",Internal:"Internal",InvalidInput:"InvalidInput",NotAllowed:"NotAllowed",TransientService:"TransientService",Service:"Service"});class qe extends Error{constructor(n,a,c){super(n),this.kind=a,this.metadata=c==null?void 0:c.metadata}}const gt="@khanacademy/kas",mt="__lib_version__";rt(gt,mt);var Ce={exports:{}};(function(e,n){(function(){var a=this,c=a._,o={},l=Array.prototype,p=Object.prototype,v=Function.prototype,y=l.push,w=l.slice,g=l.concat,d=p.toString,x=p.hasOwnProperty,m=l.forEach,b=l.map,E=l.reduce,D=l.reduceRight,P=l.filter,Z=l.every,X=l.some,ue=l.indexOf,de=l.lastIndexOf,J=Array.isArray,Q=Object.keys,ie=v.bind,i=function(t){if(t instanceof i)return t;if(!(this instanceof i))return new i(t);this._wrapped=t};e.exports&&(n=e.exports=i),n._=i,i.VERSION="1.4.4";var L=i.each=i.forEach=function(t,r,s){if(t!=null){if(m&&t.forEach===m)t.forEach(r,s);else if(t.length===+t.length){for(var u=0,h=t.length;u<h;u++)if(r.call(s,t[u],u,t)===o)return}else for(var M in t)if(i.has(t,M)&&r.call(s,t[M],M,t)===o)return}};i.map=i.collect=function(t,r,s){var u=[];return t==null?u:b&&t.map===b?t.map(r,s):(L(t,function(h,M,_){u[u.length]=r.call(s,h,M,_)}),u)};var ge="Reduce of empty array with no initial value";i.reduce=i.foldl=i.inject=function(t,r,s,u){var h=arguments.length>2;if(t==null&&(t=[]),E&&t.reduce===E)return u&&(r=i.bind(r,u)),h?t.reduce(r,s):t.reduce(r);if(L(t,function(M,_,F){h?s=r.call(u,s,M,_,F):(s=M,h=!0)}),!h)throw new TypeError(ge);return s},i.reduceRight=i.foldr=function(t,r,s,u){var h=arguments.length>2;if(t==null&&(t=[]),D&&t.reduceRight===D)return u&&(r=i.bind(r,u)),h?t.reduceRight(r,s):t.reduceRight(r);var M=t.length;if(M!==+M){var _=i.keys(t);M=_.length}if(L(t,function(F,R,W){R=_?_[--M]:--M,h?s=r.call(u,s,t[R],R,W):(s=t[R],h=!0)}),!h)throw new TypeError(ge);return s},i.find=i.detect=function(t,r,s){var u;return K(t,function(h,M,_){if(r.call(s,h,M,_))return u=h,!0}),u},i.filter=i.select=function(t,r,s){var u=[];return t==null?u:P&&t.filter===P?t.filter(r,s):(L(t,function(h,M,_){r.call(s,h,M,_)&&(u[u.length]=h)}),u)},i.reject=function(t,r,s){return i.filter(t,function(u,h,M){return!r.call(s,u,h,M)},s)},i.every=i.all=function(t,r,s){r||(r=i.identity);var u=!0;return t==null?u:Z&&t.every===Z?t.every(r,s):(L(t,function(h,M,_){if(!(u=u&&r.call(s,h,M,_)))return o}),!!u)};var K=i.some=i.any=function(t,r,s){r||(r=i.identity);var u=!1;return t==null?u:X&&t.some===X?t.some(r,s):(L(t,function(h,M,_){if(u||(u=r.call(s,h,M,_)))return o}),!!u)};i.contains=i.include=function(t,r){return t==null?!1:ue&&t.indexOf===ue?t.indexOf(r)!=-1:K(t,function(s){return s===r})},i.invoke=function(t,r){var s=w.call(arguments,2),u=i.isFunction(r);return i.map(t,function(h){return(u?r:h[r]).apply(h,s)})},i.pluck=function(t,r){return i.map(t,function(s){return s[r]})},i.where=function(t,r,s){return i.isEmpty(r)?s?null:[]:i[s?"find":"filter"](t,function(u){for(var h in r)if(r[h]!==u[h])return!1;return!0})},i.findWhere=function(t,r){return i.where(t,r,!0)},i.max=function(t,r,s){if(!r&&i.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!r&&i.isEmpty(t))return-1/0;var u={computed:-1/0,value:-1/0};return L(t,function(h,M,_){var F=r?r.call(s,h,M,_):h;F>=u.computed&&(u={value:h,computed:F})}),u.value},i.min=function(t,r,s){if(!r&&i.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!r&&i.isEmpty(t))return 1/0;var u={computed:1/0,value:1/0};return L(t,function(h,M,_){var F=r?r.call(s,h,M,_):h;F<u.computed&&(u={value:h,computed:F})}),u.value},i.shuffle=function(t){var r,s=0,u=[];return L(t,function(h){r=i.random(s++),u[s-1]=u[r],u[r]=h}),u};var Y=function(t){return i.isFunction(t)?t:function(r){return r[t]}};i.sortBy=function(t,r,s){var u=Y(r);return i.pluck(i.map(t,function(h,M,_){return{value:h,index:M,criteria:u.call(s,h,M,_)}}).sort(function(h,M){var _=h.criteria,F=M.criteria;if(_!==F){if(_>F||_===void 0)return 1;if(_<F||F===void 0)return-1}return h.index<M.index?-1:1}),"value")};var N=function(t,r,s,u){var h={},M=Y(r||i.identity);return L(t,function(_,F){var R=M.call(s,_,F,t);u(h,R,_)}),h};i.groupBy=function(t,r,s){return N(t,r,s,function(u,h,M){(i.has(u,h)?u[h]:u[h]=[]).push(M)})},i.countBy=function(t,r,s){return N(t,r,s,function(u,h){i.has(u,h)||(u[h]=0),u[h]++})},i.sortedIndex=function(t,r,s,u){s=s==null?i.identity:Y(s);for(var h=s.call(u,r),M=0,_=t.length;M<_;){var F=M+_>>>1;s.call(u,t[F])<h?M=F+1:_=F}return M},i.toArray=function(t){return t?i.isArray(t)?w.call(t):t.length===+t.length?i.map(t,i.identity):i.values(t):[]},i.size=function(t){return t==null?0:t.length===+t.length?t.length:i.keys(t).length},i.first=i.head=i.take=function(t,r,s){if(t!=null)return r!=null&&!s?w.call(t,0,r):t[0]},i.initial=function(t,r,s){return w.call(t,0,t.length-(r==null||s?1:r))},i.last=function(t,r,s){if(t!=null)return r!=null&&!s?w.call(t,Math.max(t.length-r,0)):t[t.length-1]},i.rest=i.tail=i.drop=function(t,r,s){return w.call(t,r==null||s?1:r)},i.compact=function(t){return i.filter(t,i.identity)};var V=function(t,r,s){return L(t,function(u){i.isArray(u)?r?y.apply(s,u):V(u,r,s):s.push(u)}),s};i.flatten=function(t,r){return V(t,r,[])},i.without=function(t){return i.difference(t,w.call(arguments,1))},i.uniq=i.unique=function(t,r,s,u){i.isFunction(r)&&(u=s,s=r,r=!1);var h=s?i.map(t,s,u):t,M=[],_=[];return L(h,function(F,R){(r?!R||_[_.length-1]!==F:!i.contains(_,F))&&(_.push(F),M.push(t[R]))}),M},i.union=function(){return i.uniq(g.apply(l,arguments))},i.intersection=function(t){var r=w.call(arguments,1);return i.filter(i.uniq(t),function(s){return i.every(r,function(u){return i.indexOf(u,s)>=0})})},i.difference=function(t){var r=g.apply(l,w.call(arguments,1));return i.filter(t,function(s){return!i.contains(r,s)})},i.zip=function(){for(var t=w.call(arguments),r=i.max(i.pluck(t,"length")),s=new Array(r),u=0;u<r;u++)s[u]=i.pluck(t,""+u);return s},i.object=function(t,r){if(t==null)return{};for(var s={},u=0,h=t.length;u<h;u++)r?s[t[u]]=r[u]:s[t[u][0]]=t[u][1];return s},i.indexOf=function(t,r,s){if(t==null)return-1;var u=0,h=t.length;if(s)if(typeof s=="number")u=s<0?Math.max(0,h+s):s;else return u=i.sortedIndex(t,r),t[u]===r?u:-1;if(ue&&t.indexOf===ue)return t.indexOf(r,s);for(;u<h;u++)if(t[u]===r)return u;return-1},i.lastIndexOf=function(t,r,s){if(t==null)return-1;var u=s!=null;if(de&&t.lastIndexOf===de)return u?t.lastIndexOf(r,s):t.lastIndexOf(r);for(var h=u?s:t.length;h--;)if(t[h]===r)return h;return-1},i.range=function(t,r,s){arguments.length<=1&&(r=t||0,t=0),s=arguments[2]||1;for(var u=Math.max(Math.ceil((r-t)/s),0),h=0,M=new Array(u);h<u;)M[h++]=t,t+=s;return M},i.bind=function(t,r){if(t.bind===ie&&ie)return ie.apply(t,w.call(arguments,1));var s=w.call(arguments,2);return function(){return t.apply(r,s.concat(w.call(arguments)))}},i.partial=function(t){var r=w.call(arguments,1);return function(){return t.apply(this,r.concat(w.call(arguments)))}},i.bindAll=function(t){var r=w.call(arguments,1);return r.length===0&&(r=i.functions(t)),L(r,function(s){t[s]=i.bind(t[s],t)}),t},i.memoize=function(t,r){var s={};return r||(r=i.identity),function(){var u=r.apply(this,arguments);return i.has(s,u)?s[u]:s[u]=t.apply(this,arguments)}},i.delay=function(t,r){var s=w.call(arguments,2);return setTimeout(function(){return t.apply(null,s)},r)},i.defer=function(t){return i.delay.apply(i,[t,1].concat(w.call(arguments,1)))},i.throttle=function(t,r){var s,u,h,M,_=0,F=function(){_=new Date,h=null,M=t.apply(s,u)};return function(){var R=new Date,W=r-(R-_);return s=this,u=arguments,W<=0?(clearTimeout(h),h=null,_=R,M=t.apply(s,u)):h||(h=setTimeout(F,W)),M}},i.debounce=function(t,r,s){var u,h;return function(){var M=this,_=arguments,F=function(){u=null,s||(h=t.apply(M,_))},R=s&&!u;return clearTimeout(u),u=setTimeout(F,r),R&&(h=t.apply(M,_)),h}},i.once=function(t){var r=!1,s;return function(){return r||(r=!0,s=t.apply(this,arguments),t=null),s}},i.wrap=function(t,r){return function(){var s=[t];return y.apply(s,arguments),r.apply(this,s)}},i.compose=function(){var t=arguments;return function(){for(var r=arguments,s=t.length-1;s>=0;s--)r=[t[s].apply(this,r)];return r[0]}},i.after=function(t,r){return t<=0?r():function(){if(--t<1)return r.apply(this,arguments)}},i.keys=Q||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var r=[];for(var s in t)i.has(t,s)&&(r[r.length]=s);return r},i.values=function(t){var r=[];for(var s in t)i.has(t,s)&&r.push(t[s]);return r},i.pairs=function(t){var r=[];for(var s in t)i.has(t,s)&&r.push([s,t[s]]);return r},i.invert=function(t){var r={};for(var s in t)i.has(t,s)&&(r[t[s]]=s);return r},i.functions=i.methods=function(t){var r=[];for(var s in t)i.isFunction(t[s])&&r.push(s);return r.sort()},i.extend=function(t){return L(w.call(arguments,1),function(r){if(r)for(var s in r)t[s]=r[s]}),t},i.pick=function(t){var r={},s=g.apply(l,w.call(arguments,1));return L(s,function(u){u in t&&(r[u]=t[u])}),r},i.omit=function(t){var r={},s=g.apply(l,w.call(arguments,1));for(var u in t)i.contains(s,u)||(r[u]=t[u]);return r},i.defaults=function(t){return L(w.call(arguments,1),function(r){if(r)for(var s in r)t[s]==null&&(t[s]=r[s])}),t},i.clone=function(t){return i.isObject(t)?i.isArray(t)?t.slice():i.extend({},t):t},i.tap=function(t,r){return r(t),t};var A=function(t,r,s,u){if(t===r)return t!==0||1/t==1/r;if(t==null||r==null)return t===r;t instanceof i&&(t=t._wrapped),r instanceof i&&(r=r._wrapped);var h=d.call(t);if(h!=d.call(r))return!1;switch(h){case"[object String]":return t==String(r);case"[object Number]":return t!=+t?r!=+r:t==0?1/t==1/r:t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object RegExp]":return t.source==r.source&&t.global==r.global&&t.multiline==r.multiline&&t.ignoreCase==r.ignoreCase}if(typeof t!="object"||typeof r!="object")return!1;for(var M=s.length;M--;)if(s[M]==t)return u[M]==r;s.push(t),u.push(r);var _=0,F=!0;if(h=="[object Array]"){if(_=t.length,F=_==r.length,F)for(;_--&&(F=A(t[_],r[_],s,u)););}else{var R=t.constructor,W=r.constructor;if(R!==W&&!(i.isFunction(R)&&R instanceof R&&i.isFunction(W)&&W instanceof W))return!1;for(var $ in t)if(i.has(t,$)&&(_++,!(F=i.has(r,$)&&A(t[$],r[$],s,u))))break;if(F){for($ in r)if(i.has(r,$)&&!_--)break;F=!_}}return s.pop(),u.pop(),F};i.isEqual=function(t,r){return A(t,r,[],[])},i.isEmpty=function(t){if(t==null)return!0;if(i.isArray(t)||i.isString(t))return t.length===0;for(var r in t)if(i.has(t,r))return!1;return!0},i.isElement=function(t){return!!(t&&t.nodeType===1)},i.isArray=J||function(t){return d.call(t)=="[object Array]"},i.isObject=function(t){return t===Object(t)},L(["Arguments","Function","String","Number","Date","RegExp"],function(t){i["is"+t]=function(r){return d.call(r)=="[object "+t+"]"}}),i.isArguments(arguments)||(i.isArguments=function(t){return!!(t&&i.has(t,"callee"))}),typeof/./!="function"&&(i.isFunction=function(t){return typeof t=="function"}),i.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},i.isNaN=function(t){return i.isNumber(t)&&t!=+t},i.isBoolean=function(t){return t===!0||t===!1||d.call(t)=="[object Boolean]"},i.isNull=function(t){return t===null},i.isUndefined=function(t){return t===void 0},i.has=function(t,r){return x.call(t,r)},i.noConflict=function(){return a._=c,this},i.identity=function(t){return t},i.times=function(t,r,s){for(var u=Array(t),h=0;h<t;h++)u[h]=r.call(s,h);return u},i.random=function(t,r){return r==null&&(r=t,t=0),t+Math.floor(Math.random()*(r-t+1))};var S={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};S.unescape=i.invert(S.escape);var G={escape:new RegExp("["+i.keys(S.escape).join("")+"]","g"),unescape:new RegExp("("+i.keys(S.unescape).join("|")+")","g")};i.each(["escape","unescape"],function(t){i[t]=function(r){return r==null?"":(""+r).replace(G[t],function(s){return S[t][s]})}}),i.result=function(t,r){if(t==null)return null;var s=t[r];return i.isFunction(s)?s.call(t):s},i.mixin=function(t){L(i.functions(t),function(r){var s=i[r]=t[r];i.prototype[r]=function(){var u=[this._wrapped];return y.apply(u,arguments),me.call(this,s.apply(i,u))}})};var q=0;i.uniqueId=function(t){var r=++q+"";return t?t+r:r},i.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ce=/(.)^/,C={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},le=/\\|'|\r|\n|\t|\u2028|\u2029/g;i.template=function(t,r,s){var u;s=i.defaults({},s,i.templateSettings);var h=new RegExp([(s.escape||ce).source,(s.interpolate||ce).source,(s.evaluate||ce).source].join("|")+"|$","g"),M=0,_="__p+='";t.replace(h,function(R,W,$,ye,he){return _+=t.slice(M,he).replace(le,function(Me){return"\\"+C[Me]}),W&&(_+=`'+
((__t=(`+W+`))==null?'':_.escape(__t))+
'`),$&&(_+=`'+
((__t=(`+$+`))==null?'':__t)+
'`),ye&&(_+=`';
`+ye+`
__p+='`),M=he+R.length,R}),_+=`';
`,s.variable||(_=`with(obj||{}){
`+_+`}
`),_=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+_+`return __p;
`;try{u=new Function(s.variable||"obj","_",_)}catch(R){throw R.source=_,R}if(r)return u(r,i);var F=function(R){return u.call(this,R,i)};return F.source="function("+(s.variable||"obj")+`){
`+_+"}",F},i.chain=function(t){return i(t).chain()};var me=function(t){return this._chain?i(t).chain():t};i.mixin(i),L(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var r=l[t];i.prototype[t]=function(){var s=this._wrapped;return r.apply(s,arguments),(t=="shift"||t=="splice")&&s.length===0&&delete s[0],me.call(this,s)}}),L(["concat","join","slice"],function(t){var r=l[t];i.prototype[t]=function(){return me.call(this,r.apply(this._wrapped,arguments))}}),i.extend(i.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(it)})(Ce,Ce.exports);var yt=Ce.exports;const f=st(yt);(function(){var e=function(w,g,d,x){for(d=d||{},x=w.length;x--;d[w[x]]=g);return d},n=[1,11],a=[1,9],c=[8,17],o=[6,11],l=[6,11,13,17],p={trace:function(){},yy:{},symbols_:{error:2,unitvalue:3,magnitude:4,unit:5,EOF:6,float:7,POW:8,int:9,multatoms:10,DIV:11,expatom:12,MUL:13,atom:14,"^":15,nat:16,ATOM:17,FLOAT:18,NAT:19,NEG:20,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",8:"POW",11:"DIV",13:"MUL",15:"^",17:"ATOM",18:"FLOAT",19:"NAT",20:"NEG"},productions_:[0,[3,3],[3,2],[4,3],[4,1],[5,3],[5,1],[10,3],[10,2],[10,1],[12,3],[12,1],[14,1],[7,1],[7,1],[16,1],[9,2],[9,1]],performAction:function(g,d,x,m,b,E,D){var P=E.length-1;switch(b){case 1:return{type:"unitMagnitude",magnitude:E[P-2],unit:E[P-1]};case 2:return{type:"unitStandalone",unit:E[P-1]};case 3:this.$=E[P-2]+"e"+E[P];break;case 4:case 13:case 14:case 15:case 17:this.$=E[P];break;case 5:this.$={num:E[P-2],denom:E[P]};break;case 6:this.$={num:E[P],denom:null};break;case 7:this.$=[E[P-2]].concat(E[P]);break;case 8:this.$=[E[P-1]].concat(E[P]);break;case 9:this.$=[E[P]];break;case 10:this.$={name:E[P-2],pow:E[P]};break;case 11:this.$={name:E[P],pow:1};break;case 12:this.$=g;break;case 16:this.$="-"+E[P];break}},table:[{3:1,4:2,5:3,7:4,10:5,12:8,14:10,16:7,17:n,18:[1,6],19:a},{1:[3]},{5:12,10:5,12:8,14:10,17:n},{6:[1,13]},{8:[1,14],17:[2,4]},{6:[2,6],11:[1,15]},e(c,[2,13]),e(c,[2,14]),e(o,[2,9],{12:8,14:10,10:17,13:[1,16],17:n}),e([6,8,11,13,17],[2,15]),e(l,[2,11],{15:[1,18]}),e([6,11,13,15,17],[2,12]),{6:[1,19]},{1:[2,2]},{9:20,19:[1,22],20:[1,21]},{10:23,12:8,14:10,17:n},{10:24,12:8,14:10,17:n},e(o,[2,8]),{16:25,19:a},{1:[2,1]},{17:[2,3]},{19:[1,26]},{17:[2,17]},{6:[2,5]},e(o,[2,7]),e(l,[2,10]),{17:[2,16]}],defaultActions:{13:[2,2],19:[2,1],20:[2,3],22:[2,17],23:[2,5],26:[2,16]},parseError:function(g,d){if(d.recoverable)this.trace(g);else throw new Error(g)},parse:function(g){var d=this,x=[0],m=[null],b=[],E=this.table,D="",P=0,Z=0,X=2,ue=1,de=b.slice.call(arguments,1),J=Object.create(this.lexer),Q={yy:{}};for(var ie in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ie)&&(Q.yy[ie]=this.yy[ie]);J.setInput(g,Q.yy),Q.yy.lexer=J,Q.yy.parser=this,typeof J.yylloc>"u"&&(J.yylloc={});var i=J.yylloc;b.push(i);var L=J.options&&J.options.ranges;typeof Q.yy.parseError=="function"?this.parseError=Q.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ge(){var le;return le=J.lex()||ue,typeof le!="number"&&(le=d.symbols_[le]||le),le}for(var K,Y,N,V,A={},S,G,q,ce;;){if(Y=x[x.length-1],this.defaultActions[Y]?N=this.defaultActions[Y]:((K===null||typeof K>"u")&&(K=ge()),N=E[Y]&&E[Y][K]),typeof N>"u"||!N.length||!N[0]){var C="";ce=[];for(S in E[Y])this.terminals_[S]&&S>X&&ce.push("'"+this.terminals_[S]+"'");J.showPosition?C="Parse error on line "+(P+1)+`:
`+J.showPosition()+`
Expecting `+ce.join(", ")+", got '"+(this.terminals_[K]||K)+"'":C="Parse error on line "+(P+1)+": Unexpected "+(K==ue?"end of input":"'"+(this.terminals_[K]||K)+"'"),this.parseError(C,{text:J.match,token:this.terminals_[K]||K,line:J.yylineno,loc:i,expected:ce})}if(N[0]instanceof Array&&N.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Y+", token: "+K);switch(N[0]){case 1:x.push(K),m.push(J.yytext),b.push(J.yylloc),x.push(N[1]),K=null,Z=J.yyleng,D=J.yytext,P=J.yylineno,i=J.yylloc;break;case 2:if(G=this.productions_[N[1]][1],A.$=m[m.length-G],A._$={first_line:b[b.length-(G||1)].first_line,last_line:b[b.length-1].last_line,first_column:b[b.length-(G||1)].first_column,last_column:b[b.length-1].last_column},L&&(A._$.range=[b[b.length-(G||1)].range[0],b[b.length-1].range[1]]),V=this.performAction.apply(A,[D,Z,P,Q.yy,N[1],m,b].concat(de)),typeof V<"u")return V;G&&(x=x.slice(0,-1*G*2),m=m.slice(0,-1*G),b=b.slice(0,-1*G)),x.push(this.productions_[N[1]][0]),m.push(A.$),b.push(A._$),q=E[x[x.length-2]][x[x.length-1]],x.push(q);break;case 3:return!0}}return!0}},v=function(){var w={EOF:1,parseError:function(d,x){if(this.yy.parser)this.yy.parser.parseError(d,x);else throw new Error(d)},setInput:function(g,d){return this.yy=d||this.yy||{},this._input=g,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var g=this._input[0];this.yytext+=g,this.yyleng++,this.offset++,this.match+=g,this.matched+=g;var d=g.match(/(?:\r\n?|\n).*/g);return d?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),g},unput:function(g){var d=g.length,x=g.split(/(?:\r\n?|\n)/g);this._input=g+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-d),this.offset-=d;var m=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),x.length-1&&(this.yylineno-=x.length-1);var b=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:x?(x.length===m.length?this.yylloc.first_column:0)+m[m.length-x.length].length-x[0].length:this.yylloc.first_column-d},this.options.ranges&&(this.yylloc.range=[b[0],b[0]+this.yyleng-d]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(g){this.unput(this.match.slice(g))},pastInput:function(){var g=this.matched.substr(0,this.matched.length-this.match.length);return(g.length>20?"...":"")+g.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var g=this.match;return g.length<20&&(g+=this._input.substr(0,20-g.length)),(g.substr(0,20)+(g.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var g=this.pastInput(),d=new Array(g.length+1).join("-");return g+this.upcomingInput()+`
`+d+"^"},test_match:function(g,d){var x,m,b;if(this.options.backtrack_lexer&&(b={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(b.yylloc.range=this.yylloc.range.slice(0))),m=g[0].match(/(?:\r\n?|\n).*/g),m&&(this.yylineno+=m.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:m?m[m.length-1].length-m[m.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+g[0].length},this.yytext+=g[0],this.match+=g[0],this.matches=g,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(g[0].length),this.matched+=g[0],x=this.performAction.call(this,this.yy,this,d,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),x)return x;if(this._backtrack){for(var E in b)this[E]=b[E];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var g,d,x,m;this._more||(this.yytext="",this.match="");for(var b=this._currentRules(),E=0;E<b.length;E++)if(x=this._input.match(this.rules[b[E]]),x&&(!d||x[0].length>d[0].length)){if(d=x,m=E,this.options.backtrack_lexer){if(g=this.test_match(x,b[E]),g!==!1)return g;if(this._backtrack){d=!1;continue}else return!1}else if(!this.options.flex)break}return d?(g=this.test_match(d,b[m]),g!==!1?g:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var d=this.next();return d||this.lex()},begin:function(d){this.conditionStack.push(d)},popState:function(){var d=this.conditionStack.length-1;return d>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(d){return d=this.conditionStack.length-1-Math.abs(d||0),d>=0?this.conditionStack[d]:"INITIAL"},pushState:function(d){this.begin(d)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(d,x,m,b){switch(m){case 0:return 11;case 1:return"(";case 2:return")";case 3:return 8;case 4:return 15;case 5:return 13;case 6:return 18;case 7:return 19;case 8:return 20;case 9:return 17;case 10:return 17;case 11:return 17;case 12:break;case 13:return 6}},rules:[/^(?:\/)/,/^(?:\()/,/^(?:\))/,/^(?:(\*|x|\u00d7|\u2219|\u22c5|\u00b7)\s*10\s*\^)/,/^(?:\^)/,/^(?:\*)/,/^(?:[0-9]+\.[0-9]+)/,/^(?:[0-9]+)/,/^(?:-)/,/^(?:\u00b0( ?)[cCfF])/,/^(?:fl\.? oz\.?)/,/^(?:[\u00b5]?([A-Za-z-]+|[\u2103\u2109\u212b]))/,/^(?:\s+)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return w}();p.lexer=v;function y(){this.yy={}}return y.prototype=p,p.Parser=y,new y})();var Ae=function(){var e=function(Y,N,V,A){for(V=V||{},A=Y.length;A--;V[Y[A]]=N);return V},n=[1,7],a=[1,17],c=[1,13],o=[1,14],l=[1,15],p=[1,32],v=[1,22],y=[1,23],w=[1,24],g=[1,25],d=[1,26],x=[1,33],m=[1,27],b=[1,28],E=[1,29],D=[1,30],P=[1,20],Z=[1,36],X=[1,37],ue=[5,6,8,10,33,35,41,43,45],de=[1,39],J=[1,40],Q=[5,6,8,10,12,14,16,19,21,22,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],ie=[10,16,19,21,22,28,29,30,31,32,34,37,39,42,43,44,46],i=[5,6,8,10,12,14,16,18,19,21,22,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],L={trace:function(){},yy:{},symbols_:{error:2,equation:3,expression:4,SIGN:5,EOF:6,additive:7,"+":8,multiplicative:9,"-":10,triglog:11,"*":12,negative:13,"/":14,trig:15,TRIG:16,trigfunc:17,"^":18,TRIGINV:19,logbase:20,ln:21,log:22,_:23,subscriptable:24,power:25,primitive:26,variable:27,VAR:28,CONST:29,INT:30,FLOAT:31,"{":32,"}":33,"(":34,")":35,function:36,FUNC:37,invocation:38,sqrt:39,"[":40,"]":41,abs:42,"|":43,"LEFT|":44,"RIGHT|":45,FRAC:46,$accept:0,$end:1},terminals_:{2:"error",5:"SIGN",6:"EOF",8:"+",10:"-",12:"*",14:"/",16:"TRIG",18:"^",19:"TRIGINV",21:"ln",22:"log",23:"_",28:"VAR",29:"CONST",30:"INT",31:"FLOAT",32:"{",33:"}",34:"(",35:")",37:"FUNC",39:"sqrt",40:"[",41:"]",42:"abs",43:"|",44:"LEFT|",45:"RIGHT|",46:"FRAC"},productions_:[0,[3,4],[3,2],[3,1],[4,1],[7,3],[7,3],[7,1],[9,2],[9,3],[9,3],[9,1],[13,2],[13,1],[15,1],[17,1],[17,3],[17,1],[20,1],[20,1],[20,3],[11,2],[11,2],[11,1],[25,3],[25,1],[27,1],[24,3],[24,1],[24,1],[24,1],[24,1],[24,3],[24,3],[36,1],[38,4],[38,4],[38,7],[38,4],[38,3],[38,3],[38,4],[26,1],[26,1],[26,7]],performAction:function(N,V,A,S,G,q,ce){var C=q.length-1;switch(G){case 1:return new S.Eq(q[C-3],q[C-2],q[C-1]);case 2:return q[C-1];case 3:return new S.Add([]);case 4:case 7:case 11:case 13:case 15:case 20:case 23:case 25:case 42:case 43:this.$=q[C];break;case 5:this.$=S.Add.createOrAppend(q[C-2],q[C]);break;case 6:this.$=S.Add.createOrAppend(q[C-2],S.Mul.handleNegative(q[C],"subtract"));break;case 8:this.$=S.Mul.fold(S.Mul.createOrAppend(q[C-1],q[C]));break;case 9:this.$=S.Mul.fold(S.Mul.createOrAppend(q[C-2],q[C]));break;case 10:this.$=S.Mul.fold(S.Mul.handleDivide(q[C-2],q[C]));break;case 12:this.$=S.Mul.handleNegative(q[C]);break;case 14:case 17:this.$=[N];break;case 16:this.$=q[C-2].concat(q[C]);break;case 18:this.$=S.Log.natural();break;case 19:this.$=S.Log.common();break;case 21:this.$=S.Trig.create(q[C-1],q[C]);break;case 22:this.$=S.Log.create(q[C-1],q[C]);break;case 24:this.$=new S.Pow(q[C-2],q[C]);break;case 26:case 34:this.$=N;break;case 27:this.$=new S.Var(q[C-2],q[C]);break;case 28:this.$=new S.Var(q[C]);break;case 29:this.$=new S.Const(N.toLowerCase());break;case 30:this.$=S.Int.create(Number(N));break;case 31:this.$=S.Float.create(Number(N));break;case 32:this.$=q[C-1].completeParse();break;case 33:this.$=q[C-1].completeParse().addHint("parens");break;case 35:case 36:this.$=S.Pow.sqrt(q[C-1]);break;case 37:this.$=new S.Pow.nthroot(q[C-1],q[C-4]);break;case 38:case 39:case 40:this.$=new S.Abs(q[C-1]);break;case 41:this.$=new S.Func(q[C-3],q[C-1]);break;case 44:this.$=S.Mul.handleDivide(q[C-4],q[C-1]);break}},table:[{3:1,4:2,6:[1,3],7:4,9:5,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{1:[3]},{5:[1,34],6:[1,35]},{1:[2,3]},e([5,6],[2,4],{8:Z,10:X}),e(ue,[2,7],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:de,14:J,16:a,19:c,21:o,22:l,28:p,29:v,30:y,31:w,32:g,34:d,37:x,39:m,42:b,44:D,46:P}),e(Q,[2,11]),{10:n,11:8,13:41,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},e(Q,[2,13]),{10:n,11:8,13:42,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{10:n,11:8,13:43,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},e(Q,[2,23]),e(ie,[2,15],{18:[1,44]}),e(ie,[2,17]),e(ie,[2,18]),e(ie,[2,19],{23:[1,45]}),e(Q,[2,25],{18:[1,46]}),e([10,16,18,19,21,22,28,29,30,31,32,34,37,39,42,43,44,46],[2,14]),e(i,[2,42]),e(i,[2,43]),{32:[1,47]},e(i,[2,28],{23:[1,48]}),e(i,[2,29]),e(i,[2,30]),e(i,[2,31]),{7:49,9:5,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{7:50,9:5,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{32:[1,52],34:[1,51],40:[1,53]},{34:[1,54]},{7:55,9:5,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{7:56,9:5,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{34:[1,57]},e([5,6,8,10,12,14,16,18,19,21,22,23,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],[2,26]),{34:[2,34]},{4:58,7:4,9:5,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{1:[2,2]},{9:59,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{9:60,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},e(Q,[2,8]),{10:n,11:8,13:61,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{10:n,11:8,13:62,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},e(Q,[2,12]),e(Q,[2,21]),e(Q,[2,22]),{10:n,11:8,13:63,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{24:64,27:21,28:p,29:v,30:y,31:w,32:g,34:d},{10:n,11:8,13:65,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{7:66,9:5,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{24:67,27:21,28:p,29:v,30:y,31:w,32:g,34:d},{8:Z,10:X,33:[1,68]},{8:Z,10:X,35:[1,69]},{7:70,9:5,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{7:71,9:5,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{7:72,9:5,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{7:73,9:5,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{8:Z,10:X,43:[1,74]},{8:Z,10:X,45:[1,75]},{7:76,9:5,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{6:[1,77]},e(ue,[2,5],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:de,14:J,16:a,19:c,21:o,22:l,28:p,29:v,30:y,31:w,32:g,34:d,37:x,39:m,42:b,44:D,46:P}),e(ue,[2,6],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:de,14:J,16:a,19:c,21:o,22:l,28:p,29:v,30:y,31:w,32:g,34:d,37:x,39:m,42:b,44:D,46:P}),e(Q,[2,9]),e(Q,[2,10]),e(ie,[2,16]),e(ie,[2,20]),e(Q,[2,24]),{8:Z,10:X,33:[1,78]},e(i,[2,27]),e(i,[2,32]),e(i,[2,33]),{8:Z,10:X,35:[1,79]},{8:Z,10:X,33:[1,80]},{8:Z,10:X,41:[1,81]},{8:Z,10:X,35:[1,82]},e(i,[2,39]),e(i,[2,40]),{8:Z,10:X,35:[1,83]},{1:[2,1]},{32:[1,84]},e(i,[2,35]),e(i,[2,36]),{32:[1,85]},e(i,[2,38]),e(i,[2,41]),{7:86,9:5,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{7:87,9:5,10:n,11:8,13:6,15:12,16:a,17:9,19:c,20:10,21:o,22:l,24:18,25:11,26:16,27:21,28:p,29:v,30:y,31:w,32:g,34:d,36:31,37:x,38:19,39:m,42:b,43:E,44:D,46:P},{8:Z,10:X,33:[1,88]},{8:Z,10:X,33:[1,89]},e(i,[2,44]),e(i,[2,37])],defaultActions:{3:[2,3],33:[2,34],35:[2,2],77:[2,1]},parseError:function(N,V){if(V.recoverable)this.trace(N);else throw new Error(N)},parse:function(N){var V=this,A=[0],S=[null],G=[],q=this.table,ce="",C=0,le=0,me=2,t=1,r=G.slice.call(arguments,1),s=Object.create(this.lexer),u={yy:{}};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(u.yy[h]=this.yy[h]);s.setInput(N,u.yy),u.yy.lexer=s,u.yy.parser=this,typeof s.yylloc>"u"&&(s.yylloc={});var M=s.yylloc;G.push(M);var _=s.options&&s.options.ranges;typeof u.yy.parseError=="function"?this.parseError=u.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function F(){var ke;return ke=s.lex()||t,typeof ke!="number"&&(ke=V.symbols_[ke]||ke),ke}for(var R,W,$,ye,he={},Me,xe,$e,Re;;){if(W=A[A.length-1],this.defaultActions[W]?$=this.defaultActions[W]:((R===null||typeof R>"u")&&(R=F()),$=q[W]&&q[W][R]),typeof $>"u"||!$.length||!$[0]){var Ve="";Re=[];for(Me in q[W])this.terminals_[Me]&&Me>me&&Re.push("'"+this.terminals_[Me]+"'");s.showPosition?Ve="Parse error on line "+(C+1)+`:
`+s.showPosition()+`
Expecting `+Re.join(", ")+", got '"+(this.terminals_[R]||R)+"'":Ve="Parse error on line "+(C+1)+": Unexpected "+(R==t?"end of input":"'"+(this.terminals_[R]||R)+"'"),this.parseError(Ve,{text:s.match,token:this.terminals_[R]||R,line:s.yylineno,loc:M,expected:Re})}if($[0]instanceof Array&&$.length>1)throw new Error("Parse Error: multiple actions possible at state: "+W+", token: "+R);switch($[0]){case 1:A.push(R),S.push(s.yytext),G.push(s.yylloc),A.push($[1]),R=null,le=s.yyleng,ce=s.yytext,C=s.yylineno,M=s.yylloc;break;case 2:if(xe=this.productions_[$[1]][1],he.$=S[S.length-xe],he._$={first_line:G[G.length-(xe||1)].first_line,last_line:G[G.length-1].last_line,first_column:G[G.length-(xe||1)].first_column,last_column:G[G.length-1].last_column},_&&(he._$.range=[G[G.length-(xe||1)].range[0],G[G.length-1].range[1]]),ye=this.performAction.apply(he,[ce,le,C,u.yy,$[1],S,G].concat(r)),typeof ye<"u")return ye;xe&&(A=A.slice(0,-1*xe*2),S=S.slice(0,-1*xe),G=G.slice(0,-1*xe)),A.push(this.productions_[$[1]][0]),S.push(he.$),G.push(he._$),$e=q[A[A.length-2]][A[A.length-1]],A.push($e);break;case 3:return!0}}return!0}},ge=function(){var Y={EOF:1,parseError:function(V,A){if(this.yy.parser)this.yy.parser.parseError(V,A);else throw new Error(V)},setInput:function(N,V){return this.yy=V||this.yy||{},this._input=N,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var N=this._input[0];this.yytext+=N,this.yyleng++,this.offset++,this.match+=N,this.matched+=N;var V=N.match(/(?:\r\n?|\n).*/g);return V?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),N},unput:function(N){var V=N.length,A=N.split(/(?:\r\n?|\n)/g);this._input=N+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-V),this.offset-=V;var S=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),A.length-1&&(this.yylineno-=A.length-1);var G=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:A?(A.length===S.length?this.yylloc.first_column:0)+S[S.length-A.length].length-A[0].length:this.yylloc.first_column-V},this.options.ranges&&(this.yylloc.range=[G[0],G[0]+this.yyleng-V]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(N){this.unput(this.match.slice(N))},pastInput:function(){var N=this.matched.substr(0,this.matched.length-this.match.length);return(N.length>20?"...":"")+N.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var N=this.match;return N.length<20&&(N+=this._input.substr(0,20-N.length)),(N.substr(0,20)+(N.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var N=this.pastInput(),V=new Array(N.length+1).join("-");return N+this.upcomingInput()+`
`+V+"^"},test_match:function(N,V){var A,S,G;if(this.options.backtrack_lexer&&(G={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(G.yylloc.range=this.yylloc.range.slice(0))),S=N[0].match(/(?:\r\n?|\n).*/g),S&&(this.yylineno+=S.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:S?S[S.length-1].length-S[S.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+N[0].length},this.yytext+=N[0],this.match+=N[0],this.matches=N,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(N[0].length),this.matched+=N[0],A=this.performAction.call(this,this.yy,this,V,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),A)return A;if(this._backtrack){for(var q in G)this[q]=G[q];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var N,V,A,S;this._more||(this.yytext="",this.match="");for(var G=this._currentRules(),q=0;q<G.length;q++)if(A=this._input.match(this.rules[G[q]]),A&&(!V||A[0].length>V[0].length)){if(V=A,S=q,this.options.backtrack_lexer){if(N=this.test_match(A,G[q]),N!==!1)return N;if(this._backtrack){V=!1;continue}else return!1}else if(!this.options.flex)break}return V?(N=this.test_match(V,G[S]),N!==!1?N:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var V=this.next();return V||this.lex()},begin:function(V){this.conditionStack.push(V)},popState:function(){var V=this.conditionStack.length-1;return V>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(V){return V=this.conditionStack.length-1-Math.abs(V||0),V>=0?this.conditionStack[V]:"INITIAL"},pushState:function(V){this.begin(V)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0},performAction:function(V,A,S,G){switch(S){case 0:break;case 1:break;case 2:break;case 3:return"INT";case 4:return"FLOAT";case 5:return"^";case 6:return"*";case 7:return"*";case 8:return"*";case 9:return"*";case 10:return"/";case 11:return"/";case 12:return"-";case 13:return"-";case 14:return"+";case 15:return"^";case 16:return"(";case 17:return")";case 18:return"(";case 19:return")";case 20:return"[";case 21:return"]";case 22:return"{";case 23:return"}";case 24:return"{";case 25:return"}";case 26:return"_";case 27:return"|";case 28:return"LEFT|";case 29:return"RIGHT|";case 30:return"!";case 31:return"SIGN";case 32:return A.yytext="<=","SIGN";case 33:return A.yytext=">=","SIGN";case 34:return A.yytext="<=","SIGN";case 35:return A.yytext=">=","SIGN";case 36:return A.yytext="<>","SIGN";case 37:return A.yytext="<>","SIGN";case 38:return A.yytext="<>","SIGN";case 39:return A.yytext="<>","SIGN";case 40:return A.yytext="<=","SIGN";case 41:return A.yytext=">=","SIGN";case 42:return"FRAC";case 43:return"FRAC";case 44:return"sqrt";case 45:return"abs";case 46:return"ln";case 47:return"log";case 48:return"TRIG";case 49:return"TRIG";case 50:return"TRIG";case 51:return"TRIG";case 52:return A.yytext="sin","TRIG";case 53:return A.yytext="cos","TRIG";case 54:return A.yytext="tan","TRIG";case 55:return A.yytext="csc","TRIG";case 56:return A.yytext="sec","TRIG";case 57:return A.yytext="cot","TRIG";case 58:return A.yytext="arcsin","TRIG";case 59:return A.yytext="arccos","TRIG";case 60:return A.yytext="arctan","TRIG";case 61:return A.yytext="arccsc","TRIG";case 62:return A.yytext="arcsec","TRIG";case 63:return A.yytext="arccot","TRIG";case 64:return"TRIGINV";case 65:return"TRIGINV";case 66:return A.yytext="sinh","TRIG";case 67:return A.yytext="cosh","TRIG";case 68:return A.yytext="tanh","TRIG";case 69:return A.yytext="csch","TRIG";case 70:return A.yytext="sech","TRIG";case 71:return A.yytext="tanh","TRIG";case 72:return"CONST";case 73:return A.yytext="pi","CONST";case 74:return A.yytext="pi","CONST";case 75:return"VAR";case 76:return A.yytext="theta","VAR";case 77:return A.yytext="theta","VAR";case 78:return"VAR";case 79:return A.yytext="phi","VAR";case 80:return A.yytext="phi","VAR";case 81:return V.symbolLexer(A.yytext);case 82:return"EOF";case 83:return"INVALID";case 84:console.log(A.yytext);break}},rules:[/^(?:\s+)/,/^(?:\\space)/,/^(?:\\ )/,/^(?:[0-9]+\.?)/,/^(?:([0-9]+)?\.[0-9]+)/,/^(?:\*\*)/,/^(?:\*)/,/^(?:\\cdot|·)/,/^(?:\\times|×)/,/^(?:\\ast)/,/^(?:\/)/,/^(?:\\div|÷)/,/^(?:-)/,/^(?:−)/,/^(?:\+)/,/^(?:\^)/,/^(?:\()/,/^(?:\))/,/^(?:\\left\()/,/^(?:\\right\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:\\left\{)/,/^(?:\\right\})/,/^(?:_)/,/^(?:\|)/,/^(?:\\left\|)/,/^(?:\\right\|)/,/^(?:\!)/,/^(?:<=|>=|<>|<|>|=)/,/^(?:\\le)/,/^(?:\\ge)/,/^(?:\\leq)/,/^(?:\\geq)/,/^(?:=\/=)/,/^(?:\\ne)/,/^(?:\\neq)/,/^(?:≠)/,/^(?:≤)/,/^(?:≥)/,/^(?:\\frac)/,/^(?:\\dfrac)/,/^(?:sqrt|\\sqrt)/,/^(?:abs|\\abs)/,/^(?:ln|\\ln)/,/^(?:log|\\log)/,/^(?:sin|cos|tan)/,/^(?:csc|sec|cot)/,/^(?:sinh|cosh|tanh)/,/^(?:csch|sech|coth)/,/^(?:\\sin)/,/^(?:\\cos)/,/^(?:\\tan)/,/^(?:\\csc)/,/^(?:\\sec)/,/^(?:\\cot)/,/^(?:\\arcsin)/,/^(?:\\arccos)/,/^(?:\\arctan)/,/^(?:\\arccsc)/,/^(?:\\arcsec)/,/^(?:\\arccot)/,/^(?:arcsin|arccos|arctan)/,/^(?:arccsc|arcsec|arccot)/,/^(?:\\sinh)/,/^(?:\\cosh)/,/^(?:\\tanh)/,/^(?:\\csch)/,/^(?:\\sech)/,/^(?:\\coth)/,/^(?:pi)/,/^(?:π)/,/^(?:\\pi)/,/^(?:theta)/,/^(?:θ)/,/^(?:\\theta)/,/^(?:phi)/,/^(?:φ)/,/^(?:\\phi)/,/^(?:[a-zA-Z])/,/^(?:$)/,/^(?:.)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],inclusive:!0}}};return Y}();L.lexer=ge;function K(){this.yy={}}return K.prototype=L,L.Parser=K,new K}(),oe=function(){throw new Error("Abstract method - must override for expr: "+this.print())},Je=function(e){throw new Error(e)},Ze=function(e){return e!==e},xt=function(e,n){var a=n-e;return Math.random()*a+e},Ke=12,Ye=9;function ve(){}f.extend(ve.prototype,{func:oe,args:oe,construct:function(e){var n=new this.func;return this.func.apply(n,e),n},recurse:function(e){var n=Array.prototype.slice.call(arguments,1),a=f.map(this.args(),function(c){return f.isString(c)?c:c[e].apply(c,n)});return this.construct(a)},eval:oe,codegen:oe,compile:function(){var e=this.codegen();try{return new Function("vars","return "+e+";")}catch{throw new Error("Function did not compile: "+e)}},print:oe,tex:oe,asTex:function(e){e=e||{},f.defaults(e,{display:!0,dynamic:!0,times:!1});var n=this.tex();return e.display&&(n="\\displaystyle "+n),e.dynamic&&(n=n.replace(/\(/g,"\\left("),n=n.replace(/\)/g,"\\right)")),e.times&&(n=n.replace(/\\cdot/g,"\\times")),n},name:function(){return this.func.name?this.func.name:this.func.toString().match(/^function\s*([^\s(]+)/)[1]},repr:function(){return this.name()+"("+f.map(this.args(),function(e){return f.isString(e)?e:e.repr()}).join(",")+")"},strip:function(){return this.recurse("strip")},normalize:function(){return this.recurse("normalize")},expand:function(){return this.recurse("expand")},factor:function(e){return this.recurse("factor",e)},collect:function(e){return this.recurse("collect",e)},equals:function(e){return this.normalize().print()===e.normalize().print()},simplify:function(e){e=f.extend({once:!1},e);var n=this.factor(e),a=n.collect(e);n.equals(a)&&(a=this.collect(e));var c=a.expand(e),o=c.collect(e);c.equals(o)&&(o=a.collect(e));var l=o;return e.once||this.equals(l)?l:l.simplify(e)},isSimplified:function(){return this.equals(this.simplify())},exprArgs:function(){return f.filter(this.args(),function(e){return e instanceof ve})},getVars:function(e){return f.uniq(f.flatten(f.invoke(this.exprArgs(),"getVars",e))).sort()},getConsts:function(){return f.uniq(f.flatten(f.invoke(this.exprArgs(),"getConsts"))).sort()},getUnits:function(){return f.flatten(f.invoke(this.exprArgs(),"getUnits"))},is:function(e){return this instanceof e},has:function(e){return this instanceof e?!0:f.any(this.exprArgs(),function(n){return n.has(e)})},raiseToThe:function(e){return new z(this,e)},isSubtract:function(){return!1},isDivide:function(){return!1},isRoot:function(){return!1},needsExplicitMul:function(){return this.args()[0].needsExplicitMul()},sameVars:function(e){var n=this.getVars(),a=e.getVars(),c=function(v,y){return!f.difference(v,y).length},o=function(v){return f.uniq(f.invoke(v,"toLowerCase")).sort()},l=c(n,a),p=c(o(n),o(a));return{equal:l,equalIgnoringCase:p}},compare:function(e){if(e instanceof Ie)return!1;var n=f.union(this.getVars(!0),e.getVars(!0)),a=function(E,D){return Math.abs(E)<1||Math.abs(D)<1?Math.abs(E-D):Math.abs(1-E/D)},c=function(E,D){var P=a(E,D);return E===D||Ze(E)&&Ze(D)||P<Math.pow(10,-Ye)};if(!n.length&&!this.has(ae)&&!e.has(ae))return c(this.eval(),e.eval());var o=this.collect(),l=e.collect(),p=this.getUnits(),v=e.getUnits();if(!f.isEqual(p,v))return!1;for(var y=0;y<Ke;y++){var w={},g=Math.pow(10,1+Math.floor(3*y/Ke)),d=y%2===0;f.each(n,function(E){w[E]=d?xt(-g,g):f.random(-g,g)});var x;if(o.has(_e)||l.has(_e)||o.has(ae)||l.has(ae)){var m=o.partialEval(w),b=l.partialEval(w);x=m.simplify().equals(b.simplify())}else{var m=o.eval(w),b=l.eval(w);x=c(m,b)}if(!x)return!1}return!0},partialEval:function(e){return this instanceof ae?this:this.has(_e)?this instanceof _e?new _e(this.symbol,this.arg.partialEval(e)):this.recurse("partialEval",e):new ne(this.eval(e).toFixed(Ye)).collect()},sameForm:function(e){return this.strip().equals(e.strip())},findGCD:function(e){return this.equals(e)?e:I.One},getDenominator:function(){return I.One},asMul:function(){return new O(I.One,this)},isPositive:oe,isNegative:function(){return!1},asPositiveFactor:function(){return this.isPositive()?this:I.One},addHint:function(e){if(!e)return this;var n=this.construct(this.args());return n.hints=f.clone(this.hints),n.hints[e]=!0,n},hints:{parens:!1},asExpr:function(){return this},completeParse:function(){return this.recurse("completeParse")},abs:oe,negate:function(){return new O(I.Neg,this)}});function Ne(){}Ne.prototype=new ve;f.extend(Ne.prototype,{args:function(){return this.terms},normalize:function(){var e=f.sortBy(f.invoke(this.terms,"normalize"),function(n){return n.print()});return new this.func(e)},expand:function(){return this.recurse("expand").flatten()},partition:function(){var e=f.groupBy(this.terms,function(c){return c instanceof I}),n=e[!0]||[],a=e[!1]||[];return[new this.func(n),new this.func(a)]},flatten:function(){var e=this,n=f.reject(this.terms,function(p){return p.equals(e.identity)});if(n.length===0)return e.identity;if(n.length===1)return n[0];var a=f.groupBy(n,function(p){return p instanceof e.func}),c=a[!0]||[],o=a[!1]||[],l=o.concat(f.flatten(f.pluck(c,"terms"),!0));return new e.func(l)},identity:void 0,reduce:oe,isPositive:function(){var e=f.invoke(this.terms,"collect");return f.all(f.invoke(e,"isPositive"))},replace:function(e,n){var a;e instanceof ve?a=f.indexOf(this.terms,e):a=e;var c=[];f.isArray(n)?c=n:n&&(c=[n]);var o=this.terms.slice(0,a).concat(c).concat(this.terms.slice(a+1));return new this.func(o)},remove:function(e){return this.replace(e)},getDenominator:function(){return new O(f.invoke(this.terms,"getDenominator")).flatten()}});function ee(){arguments.length===1?this.terms=arguments[0]:this.terms=f.toArray(arguments)}ee.prototype=new Ne;f.extend(ee.prototype,{func:ee,eval:function(e,n){return f.reduce(this.terms,function(a,c){return a+c.eval(e,n)},0)},codegen:function(){return f.map(this.terms,function(e){return"("+e.codegen()+")"}).join(" + ")||"0"},print:function(){return f.invoke(this.terms,"print").join("+")},tex:function(){var e="";return f.each(this.terms,function(n){!e||n.isSubtract()?e+=n.tex():e+="+"+n.tex()}),e},collect:function(e){var n=f.invoke(this.terms,"collect",e),a=[];f.each(n,function(l){if(l instanceof O){var p=l.partition();a.push([p[1].flatten(),p[0].reduce(e)])}else l instanceof I?a.push([I.One,l]):a.push([l,I.One])});var c=f.groupBy(a,function(l){return l[0].normalize().print()}),o=f.compact(f.map(c,function(l){var p=l[0][0],v=new ee(f.zip.apply(f,l)[1]),y=v.reduce(e);return new O(y,p).collect(e)}));return new ee(o).flatten()},factor:function(e){e=f.extend({keepNegative:!1},e);var n=f.invoke(this.terms,"collect"),a;n[0]instanceof O?a=n[0].terms:a=[n[0]],f.each(f.rest(this.terms),function(o){a=f.map(a,function(l){return o.findGCD(l)})}),!e.keepNegative&&this.isNegative()&&a.push(I.Neg),a=new O(a).flatten().collect();var c=f.map(n,function(o){return O.handleDivide(o,a).simplify()});return c=new ee(c).flatten(),O.createOrAppend(a,c).flatten()},reduce:function(e){return f.reduce(this.terms,function(n,a){return n.add(a,e)},this.identity)},needsExplicitMul:function(){return!1},isNegative:function(){var e=f.invoke(this.terms,"collect");return f.all(f.invoke(e,"isNegative"))},negate:function(){return new ee(f.invoke(this.terms,"negate"))}});function O(){arguments.length===1?this.terms=arguments[0]:this.terms=f.toArray(arguments)}O.prototype=new Ne;f.extend(O.prototype,{func:O,eval:function(e,n){return f.reduce(this.terms,function(a,c){return a*c.eval(e,n)},1)},codegen:function(){return f.map(this.terms,function(e){return"("+e.codegen()+")"}).join(" * ")||"0"},print:function(){return f.map(this.terms,function(e){return e instanceof ee?"("+e.print()+")":e.print()}).join("*")},getUnits:function(){var e=f(this.terms).chain().map(function(n){return n.getUnits()}).flatten().value();return e.sort((n,a)=>n.unit.localeCompare(a.unit)),e},tex:function(){for(var e=" \\cdot ",n=f.groupBy(this.terms,function(m){return m.isDivide()?"inverse":m instanceof I?"number":"other"}),a=n.inverse||[],c=n.number||[],o=n.other||[],l="",p,v=0;v<c.length;v++){var y=c[v]instanceof B&&!(c[v]instanceof U);if(y&&o.length>0&&a.length>0){var w=c.slice();w.splice(v,1);var g=w.concat(a).concat(o);return c[v].tex()+new O(g).tex()}}if(c=f.compact(f.map(c,function(m){var b=m instanceof B&&!(m instanceof U),E=!m.hints.fraction||a.length>0;if(b&&E){a.push(new z(new U(m.d),I.Div));var D=new U(m.n);return D.hints=m.hints,f.any(m.hints)?D:null}else return m})),c.length===0&&o.length===1)p=o[0].tex();else{var d="";f.each(c,function(m){m.hints.subtract&&m.hints.entered?(l+="-",d+=(d?e:"")+m.abs().tex()):m instanceof U&&m.n===-1&&(m.hints.negate||m.hints.subtract)?l+="-":d+=(d?e:"")+m.tex()}),f.each(o,function(m){m.needsExplicitMul()?d+=(d?e:"")+m.tex():m instanceof ee?d+="("+m.tex()+")":d+=m.tex()}),p=d||"1"}if(a.length){var x=new O(f.invoke(a,"asDivide")).flatten().tex();return l+"\\frac{"+p+"}{"+x+"}"}else return l+p},strip:function(){var e=f.map(this.terms,function(n){return n instanceof I?n.abs():n.strip()});return new O(e).flatten()},expand:function(){var e=function(E){return E instanceof ee},n=function(E){return E instanceof z&&E.exp.isNegative()},a=function(E){return n(E)&&e(E.base)},c=this.recurse("expand").flatten(),o=f.any(c.terms,e),l=f.any(c.terms,a);if(!(o||l))return c;var p=f.groupBy(c.terms,n),v=p[!1]||[],y=p[!0]||[];if(o){var w=f.groupBy(v,e),g=w[!0]||[],d=w[!1]||[],x=f.reduce(g,function(E,D){return f.reduce(E,function(P,Z){return P.concat(f.map(D.terms,function(X){return Z.concat(X)}))},[])},[[]]),m=f.map(x,function(E){return new O(d.concat(E)).flatten()});v=[new ee(m)]}if(l){var b=new O(f.invoke(y,"getDenominator")).flatten();y=[new z(b.expand(),I.Div)]}return new O(v.concat(y)).flatten()},factor:function(e){var n=this.recurse("factor",e).flatten();if(!(n instanceof O))return n;var a=f.groupBy(n.terms,function(o){return o instanceof B}),c=f.reduce(a[!0],function(o,l){return{n:o.n*l.n,d:o.d*l.d}},{n:1,d:1});return c.d===1?c=new U(c.n):c=new B(c.n,c.d),new O((a[!1]||[]).concat(c)).flatten()},collect:function(e){var n=this.recurse("collect",e).partition(),a=n[0].reduce(e);if(a.eval()===0)return I.Zero;var c=n[1].flatten();if(!(c instanceof O))return new O(a,c).flatten();c=c.terms;var p=[];f.each(c,function(m){m instanceof z?p.push([m.base,m.exp]):p.push([m,I.One])});var o=f.groupBy(p,function(m){return m[0].normalize().print()}),l=f.compact(f.map(o,function(m){var b=m[0][0],E=new ee(f.zip.apply(f,m)[1]),D=E.collect(e);return D instanceof I&&D.eval()===0?null:[b,D]})),p=f.groupBy(l,function(m){return m[0]instanceof H&&m[0].isBasic()?"trig":m[0]instanceof re?"log":"expr"}),v=p.trig||[],y=p.log||[],w=p.expr||[];if(v.length>1){var g=f.groupBy(v,function(m){return m[0].arg.normalize().print()});v=[],f.each(g,function(m){var b=m[0][0].arg,E={sin:I.Zero,cos:I.Zero};f.each(m,function(D){E[D[0].type]=D[1]}),O.handleNegative(E.sin).collect(e).equals(E.cos)&&(E.cos.isNegative()?E={tan:E.sin}:E={cot:E.cos}),f.each(E,function(D,P){v.push([new H(P,b),D])})})}if(y.length>1){var d=f.groupBy(y,function(m){return m[0].base.normalize().print()});y=[],f.each(d,function(m){m.length===2&&O.handleNegative(m[0][1]).collect(e).equals(m[1][1])?m[0][1].isNegative()?y.push([new re(m[0][0].power,m[1][0].power),m[1][1]]):y.push([new re(m[1][0].power,m[0][0].power),m[0][1]]):y=y.concat(m)})}p=v.concat(y).concat(w);var x=f.map(p,function(m){return new z(m[0],m[1]).collect(e)});return new O([a].concat(x)).flatten()},isSubtract:function(){return f.any(this.terms,function(e){return e instanceof I&&e.hints.subtract})},factorIn:function(e){var n=this.partition(),a=n[0].terms,c=a.length&&f.all(a,function(l){return l.n>0});if(c){var o=a[0].negate();return o.hints=a[0].hints,this.replace(a[0],o.addHint(e))}else return new O([I.negativeOne(e)].concat(this.terms))},factorOut:function(){var e=!1,n=f.compact(f.map(this.terms,function(a,c,o){return!e&&a instanceof I&&a.hints.divide?(e=!0,a.n!==-1?a.negate():null):a}));return n.length===1?n[0]:new O(n)},reduce:function(e){return f.reduce(this.terms,function(n,a){return n.mul(a,e)},this.identity)},findGCD:function(e){return new O(f.invoke(this.terms,"findGCD",e)).flatten()},asMul:function(){return this},asPositiveFactor:function(){if(this.isPositive())return this;var e=f.invoke(this.collect().terms,"asPositiveFactor");return new O(e).flatten()},isNegative:function(){return f.any(f.invoke(this.collect().terms,"isNegative"))},fold:function(){return O.fold(this)},negate:function(){var e=function(a){return a instanceof I};if(f.any(this.terms,e)){var n=f.find(this.terms,e);return this.replace(n,n.negate())}else return new O([I.Neg].concat(this.terms))}});f.each([ee,O],function(e){f.extend(e,{createOrAppend:function(n,a){return n instanceof e?new e(n.terms.concat(a)):new e(n,a)}})});f.extend(O,{handleNegative:function(e,n){if(e instanceof I&&e.n>0){var a=e.negate();return a.hints=e.hints,a.addHint(n)}else return e instanceof O?e.factorIn(n):new O(I.negativeOne(n),e)},handleDivide:function(e,n){if(n instanceof O){var a=O.handleDivide(e,n.terms[0]),c=new O(f.rest(n.terms)).flatten();return O.handleDivide(a,c)}var o=function(d){return d instanceof U},l=function(d){return d instanceof B};if(o(n)&&e instanceof O&&f.any(e.terms,o)){var p=e.terms.slice().reverse(),v=f.find(p,l);if(!o(v))return new O(e.terms.concat([new B(1,n.n).addHint("fraction")]));var y=new B(v.n,n.n);return y.hints=v.hints,v===p[0]&&(y=y.addHint("fraction")),v.n<0&&n.n<0?(y.d=-y.d,e.replace(v,[I.Neg,y])):e.replace(v,y)}var w=function(d,x){if(x instanceof U){if(d instanceof U)return d.n<0&&x.n<0?[I.Neg,new B(d.n,-x.n).addHint("fraction")]:[new B(d.n,x.n).addHint("fraction")];var m=new B(1,x.eval());return x.eval()<0?[d,m.addHint("negate")]:[d,m]}else{var b;if(x instanceof H&&x.exp){var E=x.exp;x.exp=void 0,x=new z(x,E)}return x instanceof z?b=new z(x.base,O.handleNegative(x.exp,"divide")):b=new z(x,I.Div),d instanceof U&&d.n===1?[b]:[d,b]}};if(e instanceof O){var g=w(f.last(e.terms),n);return new O(f.initial(e.terms).concat(g))}else{var g=w(e,n);return new O(g).flatten()}},fold:function(e){if(e instanceof O){var n=f.find(f.initial(e.terms),function(x){return(x instanceof H||x instanceof re)&&x.hints.open}),a=f.indexOf(e.terms,n);if(n){var c=f.last(e.terms);if(n.hints.parens||c.hints.parens||c.has(H)||c.has(re))n.hints.open=!1;else{var o;return n instanceof H?o=H.create([n.type,n.exp],O.createOrAppend(n.arg,c).fold()):o=re.create(n.base,O.createOrAppend(n.power,c).fold()),a===0?o:new O(e.terms.slice(0,a).concat(o)).fold()}}var l=e.partition(),p=l[0].terms,v=function(x){return x.n>0},y=function(x){return x.n===-1&&x.hints.negate},w=function(x){return v(x)||y(x)};if(p.length>1&&f.some(p,y)&&f.some(p,v)&&f.every(p,w)){var g=f.indexOf(e.terms,f.find(e.terms,y)),d=f.indexOf(e.terms,f.find(e.terms,v));if(g<d)return e.replace(d,e.terms[d].negate()).remove(g)}}return e}});function z(e,n){this.base=e,this.exp=n}z.prototype=new ve;f.extend(z.prototype,{func:z,args:function(){return[this.base,this.exp]},eval:function(e,n){var a=this.base.eval(e,n),c=this.exp.eval(e,n);if(a<0){var o=this.exp.simplify();if(o instanceof ne){var l=o.n,p=(l-l.toFixed()).toString().length-2,v=Math.pow(10,p),y=new B(l*v,v);o=y.simplify()}if(o instanceof B){var w=Math.abs(o.d)%2===1;if(w){var g=Math.abs(o.n)%2===1,d=g?-1:1;return d*Math.pow(-1*a,c)}}}return Math.pow(a,c)},getUnits:function(){return this.base.getUnits().map((function(e){return{unit:e.unit,pow:e.pow*this.exp.n}}).bind(this))},codegen:function(){return"Math.pow("+this.base.codegen()+", "+this.exp.codegen()+")"},print:function(){var e=this.base.print();return(this.base instanceof Ne||this.base instanceof z)&&(e="("+e+")"),e+"^("+this.exp.print()+")"},tex:function(){if(this.isDivide())return"\\frac{1}{"+this.asDivide().tex()+"}";if(this.isRoot())return this.exp.n!==1&&Je("Node marked with hint 'root' does not have exponent of form 1/x."),this.exp.d===2?"\\sqrt{"+this.base.tex()+"}":"\\sqrt["+this.exp.d+"]{"+this.base.tex()+"}";if(this.base instanceof H&&!this.base.isInverse()&&this.exp instanceof I&&this.exp.isSimple()&&this.exp.eval()>=0){var e=this.base.tex({split:!0});return e[0]+"^{"+this.exp.tex()+"}"+e[1]}else{var n=this.base.tex();return this.base instanceof Ne||this.base instanceof z||this.base instanceof I&&!this.base.isSimple()?n="("+n+")":(this.base instanceof H||this.base instanceof re)&&(n="["+n+"]"),n+"^{"+this.exp.tex()+"}"}},needsExplicitMul:function(){return this.isRoot()?!1:this.base.needsExplicitMul()},expand:function(){var e=this.recurse("expand");if(e.base instanceof O){var n=f.map(e.base.terms,function(w){return new z(w,e.exp)});return new O(n).expand()}else if(e.base instanceof ee&&e.exp instanceof U&&e.exp.abs().eval()>1){for(var a=e.exp.eval()>0,c=e.exp.abs().eval(),o=function(w){return a?w:new z(w,I.Div)},l={1:e.base},p=2;p<=c;p*=2){var y=new O(l[p/2],l[p/2]);l[p]=y.expand().collect()}if(f.has(l,c))return o(l[c]);var v=f.map(c.toString(2).split(""),function(w,g,d){return Number(w)*Math.pow(2,d.length-g-1)});v=f.without(v,0);var y=new O(f.pick(l,v)).expand().collect();return o(y)}else if(e.exp instanceof ee){var n=f.map(e.exp.terms,function(g){return new z(e.base,g).expand()});return new O(n).expand()}else return e},factor:function(){var e=this.recurse("factor");if(e.base instanceof O){var n=f.map(e.base.terms,function(a){return a instanceof U&&e.exp.equals(I.Div)?new B(1,a.n):new z(a,e.exp)});return new O(n)}else return e},collect:function(e){if(this.base instanceof z){var n=this.base.base,a=O.createOrAppend(this.base.exp,this.exp);return new z(n,a).collect(e)}var c=this.recurse("collect",e),o=function(g){return g instanceof re&&g.base.equals(c.base)};if(c.exp instanceof I&&c.exp.eval()===0)return I.One;if(c.exp instanceof I&&c.exp.eval()===1)return c.base;if(o(c.exp))return c.exp.power;if(c.exp instanceof O&&f.any(c.exp.terms,o)){var l=f.find(c.exp.terms,o),n=l.power,a=c.exp.remove(l).flatten();return new z(n,a).collect(e)}else if(c.base instanceof I&&c.exp instanceof I){if(e&&e.preciseFloats){var a=c.exp.asRational(),p=c.base.getDecimalPlaces(),v=new z(c.base,new B(1,a.d)),y=v.collect().getDecimalPlaces();if(y>p){var w=new z(c.base,new U(a.n)).collect();return new z(w,new B(1,a.d))}}return c.base.raiseToThe(c.exp,e)}else return c},isDivide:function(){var e=function(n){return n instanceof I&&n.hints.divide};return e(this.exp)||this.exp instanceof O&&f.any(this.exp.terms,e)},asDivide:function(){if(this.exp instanceof I){if(this.exp.eval()===-1)return this.base;var e=this.exp.negate();return e.hints=f.clone(this.exp.hints),e.hints.divide=!1,new z(this.base,e)}else{if(this.exp instanceof O)return new z(this.base,this.exp.factorOut());Je("called asDivide() on an Expr that wasn't a Num or Mul")}},isRoot:function(){return this.exp instanceof B&&this.exp.hints.root},isSquaredTrig:function(){return this.base instanceof H&&!this.base.isInverse()&&this.exp instanceof I&&this.exp.eval()===2},getDenominator:function(){if(this.exp instanceof I&&this.exp.eval()===-1)return O.createOrAppend(this.base,this.base.getDenominator()).flatten();if(this.exp.isNegative()){var e=new z(this.base,O.handleNegative(this.exp).collect());return O.createOrAppend(e,e.collect().getDenominator()).flatten()}else return this.base instanceof I?new z(this.base.getDenominator(),this.exp).collect():I.One},findGCD:function(e){var n,a;if(e instanceof z?(n=e.base,a=e.exp):(n=e,a=I.One),this.base.equals(n)){if(this.exp.equals(a))return this;if(this.exp instanceof I&&a instanceof I)return new z(this.base,I.min(this.exp,a)).collect();if(this.exp instanceof I||a instanceof I)return I.One;var c=this.exp.asMul().partition(),o=a.asMul().partition();if(c[1].equals(o[1])){var l=I.min(c[0].reduce(),o[0].reduce()),p=new O(l,c[1].flatten()).flatten();return new z(n,p).collect()}}return I.One},isPositive:function(){if(this.base.isPositive())return!0;var e=this.exp.simplify();return e instanceof U&&e.eval()%2===0},asPositiveFactor:function(){if(this.isPositive())return this;var e=this.exp.simplify();if(e instanceof U){var n=e.eval();if(n>2)return new z(this.base,new U(n-1));if(n<-2)return new z(this.base,new U(n+1))}return I.One}});f.extend(z,{sqrt:function(e){return new z(e,I.Sqrt)},nthroot:function(e,n){var a=O.fold(O.handleDivide(new U(1),n));return new z(e,a.addHint("root"))}});function re(e,n){this.base=e,this.power=n}re.prototype=new ve;f.extend(re.prototype,{func:re,args:function(){return[this.base,this.power]},eval:function(e,n){return Math.log(this.power.eval(e,n))/Math.log(this.base.eval(e,n))},codegen:function(){return"(Math.log("+this.power.codegen()+") / Math.log("+this.base.codegen()+"))"},print:function(){var e="("+this.power.print()+")";return this.isNatural()?"ln"+e:"log_("+this.base.print()+") "+e},tex:function(){var e="("+this.power.tex()+")";return this.isNatural()?"\\ln"+e:"\\log_{"+this.base.tex()+"}"+e},collect:function(e){var n=this.recurse("collect",e);return n.power instanceof I&&n.power.eval()===1?I.Zero:n.base.equals(n.power)?I.One:n.power instanceof z&&n.power.base.equals(n.base)?n.power.exp:n},expand:function(){var e=this.recurse("expand");if(e.power instanceof O){var n=f.map(e.power.terms,function(a){return new re(e.base,a).expand()});return new ee(n)}else return e.power instanceof z?new O(e.power.exp,new re(e.base,e.power.base).expand()).flatten():e.isNatural()?e:O.handleDivide(new re(pe.e,e.power),new re(pe.e,e.base))},hints:f.extend(re.prototype.hints,{open:!1}),isPositive:function(){var e=this.collect();return e.base instanceof I&&e.power instanceof I?this.eval()>0:!1},needsExplicitMul:function(){return!1},isNatural:function(){return this.base.equals(pe.e)}});f.extend(re,{natural:function(){return pe.e},common:function(){return I.Ten},create:function(e,n){var a=new re(e,n);return n.hints.parens||(a=a.addHint("open")),a}});function H(e,n){this.type=e,this.arg=n}H.prototype=new ve;f.extend(H.prototype,{func:H,args:function(){return[this.type,this.arg]},functions:{sin:{eval:Math.sin,codegen:"Math.sin((",tex:"\\sin",expand:function(){return this}},cos:{eval:Math.cos,codegen:"Math.cos((",tex:"\\cos",expand:function(){return this}},tan:{eval:Math.tan,codegen:"Math.tan((",tex:"\\tan",expand:function(){return O.handleDivide(H.sin(this.arg),H.cos(this.arg))}},csc:{eval:function(e){return 1/Math.sin(e)},codegen:"(1/Math.sin(",tex:"\\csc",expand:function(){return O.handleDivide(I.One,H.sin(this.arg))}},sec:{eval:function(e){return 1/Math.cos(e)},codegen:"(1/Math.cos(",tex:"\\sec",expand:function(){return O.handleDivide(I.One,H.cos(this.arg))}},cot:{eval:function(e){return 1/Math.tan(e)},codegen:"(1/Math.tan(",tex:"\\cot",expand:function(){return O.handleDivide(H.cos(this.arg),H.sin(this.arg))}},arcsin:{eval:Math.asin,codegen:"Math.asin((",tex:"\\arcsin"},arccos:{eval:Math.acos,codegen:"Math.acos((",tex:"\\arccos"},arctan:{eval:Math.atan,codegen:"Math.atan((",tex:"\\arctan"},arccsc:{eval:function(e){return Math.asin(1/e)},codegen:"Math.asin(1/(",tex:"\\operatorname{arccsc}"},arcsec:{eval:function(e){return Math.acos(1/e)},codegen:"Math.acos(1/(",tex:"\\operatorname{arcsec}"},arccot:{eval:function(e){return Math.atan(1/e)},codegen:"Math.atan(1/(",tex:"\\operatorname{arccot}"},sinh:{eval:function(e){return(Math.exp(e)-Math.exp(-e))/2},codegen:function(e){return"((Math.exp("+e+") - Math.exp(-("+e+"))) / 2)"},tex:"\\sinh",expand:function(){return this}},cosh:{eval:function(e){return(Math.exp(e)+Math.exp(-e))/2},codegen:function(e){return"((Math.exp("+e+") + Math.exp(-("+e+"))) / 2)"},tex:"\\cosh",expand:function(){return this}},tanh:{eval:function(e){return(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))},codegen:function(e){return"((Math.exp("+e+") - Math.exp(-("+e+"))) / (Math.exp("+e+") + Math.exp(-("+e+"))))"},tex:"\\tanh",expand:function(){return O.handleDivide(H.sinh(this.arg),H.cosh(this.arg))}},csch:{eval:function(e){return 2/(Math.exp(e)-Math.exp(-e))},codegen:function(e){return"(2 / (Math.exp("+e+") - Math.exp(-("+e+"))))"},tex:"\\csch",expand:function(){return O.handleDivide(I.One,H.sinh(this.arg))}},sech:{eval:function(e){return 2/(Math.exp(e)+Math.exp(-e))},codegen:function(e){return"(2 / (Math.exp("+e+") + Math.exp(-("+e+"))))"},tex:"\\sech",expand:function(){return O.handleDivide(I.One,H.cosh(this.arg))}},coth:{eval:function(e){return(Math.exp(e)+Math.exp(-e))/(Math.exp(e)-Math.exp(-e))},codegen:function(e){return"((Math.exp("+e+") + Math.exp(-("+e+"))) / (Math.exp("+e+") - Math.exp(-("+e+"))))"},tex:"\\coth",expand:function(){return O.handleDivide(H.cosh(this.arg),H.sinh(this.arg))}}},isEven:function(){return f.contains(["cos","sec"],this.type)},isInverse:function(){return this.type.indexOf("arc")===0},isBasic:function(){return f.contains(["sin","cos"],this.type)},eval:function(e,n){var a=this.functions[this.type].eval,c=this.arg.eval(e,n);return a(c)},codegen:function(){var e=this.functions[this.type].codegen;if(typeof e=="function")return e(this.arg.codegen());if(typeof e=="string")return e+this.arg.codegen()+"))";throw new Error("codegen not implemented for "+this.type)},print:function(){return this.type+"("+this.arg.print()+")"},tex:function(e){var n=this.functions[this.type].tex,a="("+this.arg.tex()+")";return e&&e.split?[n,a]:n+a},hints:f.extend(H.prototype.hints,{open:!1}),isPositive:function(){var e=this.collect();return e.arg instanceof I?this.eval()>0:!1},completeParse:function(){if(this.exp){var e=new z(this,this.exp);return this.exp=void 0,e}else return this},needsExplicitMul:function(){return!1},expand:function(){var e=this.recurse("expand");if(e.isInverse())return e;var n=e.functions[e.type].expand;return f.bind(n,e)()},collect:function(e){var n=this.recurse("collect",e);if(!n.isInverse()&&n.arg.isNegative()){var a;return n.arg instanceof I?a=n.arg.abs():a=O.handleDivide(n.arg,I.Neg).collect(e),n.isEven()?new H(n.type,a):new O(I.Neg,new H(n.type,a))}else return n}});f.extend(H,{create:function(e,n){var a=e[0],c=e[1];c&&c.equals(I.Neg)&&(a="arc"+a,c=void 0);var o=new H(a,n);return n.hints.parens||(o=o.addHint("open")),c&&(o.exp=c),o},sin:function(e){return new H("sin",e)},cos:function(e){return new H("cos",e)},sinh:function(e){return new H("sinh",e)},cosh:function(e){return new H("cosh",e)}});function be(e){this.arg=e}be.prototype=new ve;f.extend(be.prototype,{func:be,args:function(){return[this.arg]},eval:function(e,n){return Math.abs(this.arg.eval(e,n))},codegen:function(){return"Math.abs("+this.arg.codegen()+")"},print:function(){return"abs("+this.arg.print()+")"},tex:function(){return"\\left|"+this.arg.tex()+"\\right|"},collect:function(e){var n=this.recurse("collect",e);if(n.arg.isPositive())return n.arg;if(n.arg instanceof I)return n.arg.abs();if(n.arg instanceof O){var a=f.groupBy(n.arg.terms,function(o){return o.isPositive()?"positive":o instanceof I?"number":"other"}),c=a.positive.concat(f.invoke(a.number,"abs"));return a.other.length&&c.push(new be(new O(a.other).flatten())),new O(c).flatten()}else return n},expand:function(){var e=this.recurse("expand");if(e.arg instanceof O){var n=f.map(e.arg.terms,function(a){return new be(a)});return new O(n)}else return e},isPositive:function(){return!0}});function Ie(e,n,a){this.left=e,this.type=n,this.right=a}Ie.prototype=new ve;f.extend(Ie.prototype,{func:Ie,args:function(){return[this.left,this.type,this.right]},needsExplicitMul:function(){return!1},print:function(){return this.left.print()+this.type+this.right.print()},signs:{"=":" = ","<":" < ",">":" > ","<>":" \\ne ","<=":" \\le ",">=":" \\ge "},tex:function(){return this.left.tex()+this.signs[this.type]+this.right.tex()},normalize:function(){var e=this.recurse("normalize");return f.contains([">",">="],e.type)?new Ie(e.right,e.type.replace(">","<"),e.left):e},asExpr:function(e){var n=function(v){return v instanceof I&&v.isSimple()&&v.eval()===0},a=[];this.left instanceof ee?a=f.clone(this.left.terms):n(this.left)||(a=[this.left]),this.right instanceof ee?a=a.concat(this.right.negate().terms):n(this.right)||a.push(this.right.negate());var c=!this.isEquality();a=f.invoke(a,"collect",{preciseFloats:!0});for(var o=0;o<a.length;o++){var l=a[o].getDenominator();c&&!l.isPositive()&&(l=l.asPositiveFactor()),l.equals(I.One)||(a=f.map(a,function(v){return O.createOrAppend(v,l).simplify({once:!0,preciseFloats:!0})}))}var p=new ee(a).flatten();return e?p:this.divideThrough(p)},divideThrough:function(e){var n=!this.isEquality(),a=e.simplify({once:!0}),c=a.factor({keepNegative:n});if(!(c instanceof O))return e;var o=c.terms,l=function(m){return m instanceof ee},p=function(m){return!!m.getVars().length},v=function(m){return m.equals(I.One)},y=f.groupBy(o,l),w=y[!0]||[],g=y[!1]||[];if(w.length&&this.isEquality())return new O(w).flatten();var d=g;w.length||(d=f.reject(d,p)),n&&(d=f.invoke(d,"asPositiveFactor")),d=f.reject(d,v),d=f.map(d,function(m){return new z(m,I.Div)});var x=new O(o.concat(d)).collect();return x.equals(c)?a:x},isEquality:function(){return f.contains(["=","<>"],this.type)},compare:function(e){if(!(e instanceof Ie))return!1;var n=this.normalize(),a=e.normalize();if(n.type!==a.type)return!1;var c=n.divideThrough(n.asExpr(!0).collect()),o=a.divideThrough(a.asExpr(!0).collect());return n.isEquality()?c.compare(o)||c.compare(O.handleNegative(o)):c.compare(o)},sameForm:function(e){var n=this.normalize(),a=e.normalize(),c=n.left.sameForm(a.left)&&n.right.sameForm(a.right);return n.isEquality()?c||n.left.sameForm(a.right)&&n.right.sameForm(a.left):c},isSimplified:function(){var e=this.asExpr(!0),n=this.divideThrough(e).simplify();return e.equals(n)&&this.left.isSimplified()&&this.right.isSimplified()}});f.extend(Ie.prototype,{solveLinearEquationForVariable:function(e){var n=this.asExpr();if(!n.is(ee)||n.terms.length!==2)throw new Error("Can only handle linear equations of the form a + bx (= 0)");var a=function(l){return l.has(Te)&&f.contains(l.getVars(),e.symbol)},c,o;return a(n.terms[0])?(c=O.handleNegative(n.terms[1]),o=O.handleDivide(n.terms[0],e)):(c=O.handleNegative(n.terms[0]),o=O.handleDivide(n.terms[1],e)),O.handleDivide(c,o).simplify()}});function Ee(){}Ee.prototype=new ve;f.extend(Ee.prototype,{needsExplicitMul:function(){return!1},findGCD:function(e){return e instanceof Ee||e instanceof I?this.equals(e)?this:I.One:e.findGCD(this)}});function _e(e,n){this.symbol=e,this.arg=n}_e.prototype=new Ee;f.extend(_e.prototype,{func:_e,args:function(){return[this.symbol,this.arg]},print:function(){return this.symbol+"("+this.arg.print()+")"},tex:function(){return this.symbol+"("+this.arg.tex()+")"},eval:function(e,n){var a=this.arg,c=e[this.symbol],o=f.extend(f.clone(e),{x:a.eval(e,n)}),l=Fe(c,n);return l.parsed?l.expr.eval(o,n):l},codegen:function(){return'vars["'+this.symbol+'"]('+this.arg.codegen()+")"},getUnits:function(){return this.arg.getUnits()},getVars:function(e){return e?this.arg.getVars():f.union(this.arg.getVars(),[this.symbol]).sort()},getConsts:function(){return this.arg.getConsts()}});function Te(e,n){this.symbol=e,this.subscript=n}Te.prototype=new Ee;f.extend(Te.prototype,{func:Te,args:function(){return[this.symbol,this.subscript]},exprArgs:function(){return[]},recurse:function(){return this},print:function(){var e="";return this.subscript&&(e="_("+this.subscript.print()+")"),this.symbol+e},prettyPrint:function(){var e=this.subscript;return e&&(e instanceof I||e instanceof Ee)?this.symbol+"_"+e.print():this.print()},tex:function(){var e="";this.subscript&&(e="_{"+this.subscript.tex()+"}");var n=this.symbol.length>1?"\\":"";return n+this.symbol+e},repr:function(){return"Var("+this.print()+")"},eval:function(e,n){return e[this.prettyPrint()]},codegen:function(){return'vars["'+this.prettyPrint()+'"]'},getVars:function(){return[this.prettyPrint()]},isPositive:function(){return!1}});function pe(e){this.symbol=e}pe.prototype=new Ee;f.extend(pe.prototype,{func:pe,args:function(){return[this.symbol]},recurse:function(){return this},eval:function(e,n){if(this.symbol==="pi")return Math.PI;if(this.symbol==="e")return Math.E},codegen:function(){if(this.symbol==="pi")return"Math.PI";if(this.symbol==="e")return"Math.E"},print:function(){return this.symbol},tex:function(){if(this.symbol==="pi")return"\\pi ";if(this.symbol==="e")return"e"},isPositive:function(){return this.eval()>0},abs:function(){return this.eval()>0?this:O.handleNegative(this)},getConsts:function(){return[this.print()]}});pe.e=new pe("e");pe.pi=new pe("pi");function I(){}I.prototype=new ve;f.extend(I.prototype,{repr:function(){return this.print()},strip:function(){return this.abs()},recurse:function(){return this},codegen:function(){return this.print()},add:oe,mul:oe,negate:oe,isSubtract:function(){return this.hints.subtract},abs:oe,needsExplicitMul:function(){return!0},findGCD:oe,isPositive:function(){return this.eval()>0},isNegative:function(){return this.eval()<0},asPositiveFactor:function(){return this.isPositive()?this:this.abs()},hints:f.extend(I.prototype.hints,{negate:!1,subtract:!1,divide:!1,root:!1,fraction:!1,entered:!1}),isSimple:oe,getDecimalPlaces:function(){var e=(""+this.n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0},asRational:oe});function B(e,n){var a=e,c=n;c<0&&(a=-a,c=-c),this.n=a,this.d=c}B.prototype=new I;f.extend(B.prototype,{func:B,args:function(){return[this.n,this.d]},eval:function(){return this.n/this.d},print:function(){return this.n.toString()+"/"+this.d.toString()},tex:function(){var e="\\frac{"+Math.abs(this.n).toString()+"}{"+this.d.toString()+"}";return this.n<0?"-"+e:e},add:function(e,n){return e instanceof B?new B(this.n*e.d+this.d*e.n,this.d*e.d).collect():e.add(this,n)},mul:function(e,n){return e instanceof B?new B(this.n*e.n,this.d*e.d).collect():e.mul(this,n)},collect:function(){var e=I.findGCD(this.n,this.d),n=this.n/e,a=this.d/e;return a===1?new U(n):new B(n,a)},negate:function(){return new B(-this.n,this.d)},abs:function(){return new B(Math.abs(this.n),this.d)},findGCD:function(e){if(e instanceof B){var n=I.findGCD(this.n*e.d,e.n*this.d),a=this.d*e.d;return new B(n,a).collect()}else return e instanceof U?new B(I.findGCD(this.n,e.n),this.d):e.findGCD(this)},raiseToThe:function(e){if(e instanceof U){var n=e.eval()>0,a=e.abs().eval(),c=Math.pow(this.n,a),o=Math.pow(this.d,a);return n?new B(c,o).collect():new B(o,c).collect()}else return new ne(this.eval()).raiseToThe(e)},getDenominator:function(){return new U(this.d)},isSimple:function(){return!1},asRational:function(){return this}});function U(e){this.n=e}U.prototype=new B(0,1);f.extend(U.prototype,{func:U,args:function(){return[this.n]},print:function(){return this.n.toString()},tex:function(){return this.n.toString()},negate:function(){return new U(-this.n)},abs:function(){return new U(Math.abs(this.n))},isSimple:function(){return!0},findGCD:function(e){return e instanceof U?new U(I.findGCD(this.n,e.n)):e.findGCD(this)}});f.extend(U,{create:function(e){return new U(e).addHint("entered")}});function ne(e){this.n=e}ne.prototype=new I;f.extend(ne.prototype,{func:ne,args:function(){return[this.n]},eval:function(){return this.n},print:function(){return this.n.toString()},tex:function(){return this.n.toString()},add:function(e,n){return n&&n.preciseFloats?ne.toDecimalPlaces(this.n+e.eval(),Math.max(this.getDecimalPlaces(),e.getDecimalPlaces())):new ne(this.n+e.eval()).collect()},mul:function(e,n){return n&&n.preciseFloats?ne.toDecimalPlaces(this.n*e.eval(),this.getDecimalPlaces()+e.getDecimalPlaces()):new ne(this.n*e.eval()).collect()},collect:function(){return this},negate:function(){return new ne(-this.n)},abs:function(){return new ne(Math.abs(this.n))},findGCD:function(e){return e instanceof I?new ne(I.findGCD(this.eval(),e.eval())).collect():e.findGCD(this)},raiseToThe:function(e,n){return n&&n.preciseFloats&&e instanceof U&&e.n>1?ne.toDecimalPlaces(new z(this,e).eval(),this.getDecimalPlaces()*e.n):new ne(new z(this,e).eval()).collect()},asRational:function(){var e=this.n.toString().split(".");if(e.length===1)return new B(this.n,1);var n=Number(e.join("")),a=Math.pow(10,e[1].length);return new B(n,a).collect()},getDenominator:function(){return this.asRational().getDenominator()},isSimple:function(){return!0}});f.extend(ne,{create:function(e){return new ne(e).addHint("entered")},toDecimalPlaces:function(e,n){return new ne(+e.toFixed(Math.min(n,20))).collect()}});f.extend(I,{negativeOne:function(e){return e==="subtract"?I.Sub:e==="divide"?I.Div:I.Neg},findGCD:function(e,n){var a;if(e=Math.abs(e),n=Math.abs(n),e!==Math.floor(e)||n!==Math.floor(n))return 1;for(;n;)a=e%n,e=n,n=a;return e},min:function(){return f.min(f.toArray(arguments),function(e){return e.eval()})},max:function(){return f.max(f.toArray(arguments),function(e){return e.eval()})}});I.Neg=new U(-1).addHint("negate");I.Sub=new U(-1).addHint("subtract");I.Div=new U(-1).addHint("divide");I.Sqrt=new B(1,2).addHint("root");I.Zero=new U(0);I.One=new U(1);I.Ten=new U(10);ee.prototype.identity=I.Zero;O.prototype.identity=I.One;var wt=function(e,n){throw new Error(n.loc.first_column)};Ae.yy={Add:ee,Mul:O,Pow:z,Log:re,Trig:H,Eq:Ie,Abs:be,Func:_e,Const:pe,Var:Te,Int:U,Float:ne,parseError:wt,constants:["e"],symbolLexer:function(e){return f.contains(Ae.yy.constants,e)?"CONST":f.contains(Ae.yy.functions,e)?"FUNC":"VAR"}};const Fe=function(e,n){try{n&&n.functions?Ae.yy.functions=f.without(n.functions,"i"):Ae.yy.functions=[],n&&n.decimal_separator&&(e=e.split(n.decimal_separator).join("."));var a=Ae.parse(e).completeParse();return{parsed:!0,expr:a}}catch(c){return{parsed:!1,error:c.message}}};function ae(e){this.symbol=e}ae.prototype=new Ee;f.extend(ae.prototype,{func:ae,args:function(){return[this.symbol]},recurse:function(){return this},eval:function(e,n){return 1},getUnits:function(){return[{unit:this.symbol,pow:1}]},codegen:function(){return"1"},print:function(){return this.symbol},tex:function(){return this.symbol},collect:function(e){if(f(_t).has(this.symbol))return this;if(f(Xe).has(this.symbol))return Xe[this.symbol].conversion;throw new Error("could not understand unit: "+this.symbol)}});var _t={m:new ae("m"),g:new ae("g"),s:new ae("s"),A:new ae("A"),K:new ae("K"),mol:new ae("mol"),cd:new ae("cd")},j={},T={},k=function(e,n){var a=e.split("|"),c=a[0].trim(),o=a[1].trim(),l=I.One;c!==""&&(l=Fe(c).expr);var p=o.split("/"),v=[l];return p[0]&&p[0].split(" ").filter(function(y){return y!==""}).map(function(y){v.push(new ae(y))}),p[1]&&p[1].split(" ").filter(function(y){return y!==""}).map(function(y){v.push(new z(new ae(y),I.Div))}),{conversion:new O(v),prefixes:n}},Xe={Da:k("1.6605388628 x 10^-24 | g",j),u:k("| Da",T),meter:k("| m",T),meters:k("| m",T),in:k("254 / 10000 | m",T),ft:k("3048  / 10000 | m",T),yd:k("9144  / 10000 | m",T),mi:k("1609344 / 1000 | m",T),ly:k("9.4607 x 10^15 | m",T),nmi:k("1852 | m",T),Å:k("10^-10 | m",T),pc:k("3.0857 x 10^16 | m",T),min:k("60 | s",T),hr:k("3600 | s",T),sec:k("| s",T),day:k("86400 | s",T),wk:k("604800 | s",T),fortnight:k("14 | day",T),shake:k("10^-8 | s",T),olympiad:k("126200000 | s",T),"°C":k("1 | K",T),"°F":k("5/9 | K",T),"°R":k("5/9 | K",T),e:k("1.6021765314 x 10^-19 | C",T),c:k("299792458 | m / s",T),kn:k("514/1000 | m / s",T),kt:k("| kn",T),knot:k("| kn",T),J:k("| N m",j),BTU:k("1060 | J",T),cal:k("4184 / 1000 | J",j),eV:k("1.602176514 x 10^-19 | J",j),erg:k("10^−7 | J",j),W:k("| J / s",j),"H-e":k("80 | W",T),N:k("1000 | g m / s s",j),lb:k("4448221615 / 1000000000 | N",T),dyn:k("10^-5 | N",T),Pa:k("1 | N / m m m",j),bar:k("10^5 | Pa",j),"㏔":k("1/1000 | bar",T),"㍴":k("| bar",T),atm:k("101325 | Pa",T),Torr:k("1/760 | atm",T),mmHg:k("| Torr",T),ha:k("10^4 | m m",T),b:k("10^−28 | m m",j),barn:k("| b",j),acre:k("4046.87 | m m",T),skilodge:k("10^-31 | m m",T),outhouse:k("10^-34 | m m",T),shed:k("10^-52 | m m",T),L:k("1/1000 | m m m",j),gal:k("3785/1000 | L",j),cup:k("1/16 | gal",T),qt:k("1/4 | gal",T),quart:k("| qt",T),p:k("1/8 | gal",T),pt:k("| p",T),pint:k("| p",T),"fl oz":k("1/8 | cup",T),"fl. oz.":k("1/8 | cup",T),tbsp:k("1/16 | cup",T),tsp:k("1/3 | tbsp",T),rev:k("2 pi | rad",T),deg:k("180 pi | rad",T),"°":k("| deg",T),arcminute:k("1/60 | deg",T),arcsec:k("1/3600 | deg",T),Hu:k("1000 | dB",j),dozen:k("12 |",T),mol:k("6.0221412927 x 10^23 |",j),"%":k("1/100 |",T),percent:k("| %",T),ppm:k("1/1000000 |",T),V:k("1000 | g m m / s s C",j),C:k("| A s",j),ampere:k("| A",T),Ω:k("| V / A",j),ohm:k("| Ω",T),F:k("| C / V",j),H:k("| ohm s",j),T:k("1000 | g / C s",j),Wb:k("1000 | g m m / C s",j),lm:k("pi x 10^4 | cd / m m",T),lx:k("| lm / m m",T),nit:k("| cd / m m",T),sb:k("10^4 | cd / m m",T),stilb:k("1 | sb",T),apostilb:k("1 / pi x 10^(-4) | sb",T),blondel:k("| apostilb",T),asb:k("| apostilb",T),la:k("| lm",T),Lb:k("| lm",T),sk:k("10^-7 | lm",T),skot:k("| sk",T),bril:k("10^-11 | lm",T),Hz:k("| / s",j)};I.Zero;I.One;const Qe=function(e,n,a){a={...{form:!1,simplify:!1},...a};const o=e.sameVars(n);if(!o.equal){let l;return o.equalIgnoringCase?l="Check your variables; one or more are using the wrong case (upper or lower).":l="Check your variables; you may have used the wrong letter for one or more of them.",{equal:!1,wrongVariableCase:o.equalIgnoringCase,wrongVariableNames:!o.equalIgnoringCase,message:l}}return e.compare(n)?a.form&&!e.sameForm(n)?{equal:!1,message:"Your answer is not in the correct form."}:a.simplify&&!e.isSimplified()?{equal:!1,message:"Your answer is not fully expanded and simplified."}:{equal:!0,message:null}:{equal:!1,message:null}},Mt="@khanacademy/kmath",It="__lib_version__";rt(Mt,It);var Ge={exports:{}};(function(e,n){(function(){var a=this,c=a._,o={},l=Array.prototype,p=Object.prototype,v=Function.prototype,y=l.push,w=l.slice,g=l.concat,d=p.toString,x=p.hasOwnProperty,m=l.forEach,b=l.map,E=l.reduce,D=l.reduceRight,P=l.filter,Z=l.every,X=l.some,ue=l.indexOf,de=l.lastIndexOf,J=Array.isArray,Q=Object.keys,ie=v.bind,i=function(t){if(t instanceof i)return t;if(!(this instanceof i))return new i(t);this._wrapped=t};e.exports&&(n=e.exports=i),n._=i,i.VERSION="1.4.4";var L=i.each=i.forEach=function(t,r,s){if(t!=null){if(m&&t.forEach===m)t.forEach(r,s);else if(t.length===+t.length){for(var u=0,h=t.length;u<h;u++)if(r.call(s,t[u],u,t)===o)return}else for(var M in t)if(i.has(t,M)&&r.call(s,t[M],M,t)===o)return}};i.map=i.collect=function(t,r,s){var u=[];return t==null?u:b&&t.map===b?t.map(r,s):(L(t,function(h,M,_){u[u.length]=r.call(s,h,M,_)}),u)};var ge="Reduce of empty array with no initial value";i.reduce=i.foldl=i.inject=function(t,r,s,u){var h=arguments.length>2;if(t==null&&(t=[]),E&&t.reduce===E)return u&&(r=i.bind(r,u)),h?t.reduce(r,s):t.reduce(r);if(L(t,function(M,_,F){h?s=r.call(u,s,M,_,F):(s=M,h=!0)}),!h)throw new TypeError(ge);return s},i.reduceRight=i.foldr=function(t,r,s,u){var h=arguments.length>2;if(t==null&&(t=[]),D&&t.reduceRight===D)return u&&(r=i.bind(r,u)),h?t.reduceRight(r,s):t.reduceRight(r);var M=t.length;if(M!==+M){var _=i.keys(t);M=_.length}if(L(t,function(F,R,W){R=_?_[--M]:--M,h?s=r.call(u,s,t[R],R,W):(s=t[R],h=!0)}),!h)throw new TypeError(ge);return s},i.find=i.detect=function(t,r,s){var u;return K(t,function(h,M,_){if(r.call(s,h,M,_))return u=h,!0}),u},i.filter=i.select=function(t,r,s){var u=[];return t==null?u:P&&t.filter===P?t.filter(r,s):(L(t,function(h,M,_){r.call(s,h,M,_)&&(u[u.length]=h)}),u)},i.reject=function(t,r,s){return i.filter(t,function(u,h,M){return!r.call(s,u,h,M)},s)},i.every=i.all=function(t,r,s){r||(r=i.identity);var u=!0;return t==null?u:Z&&t.every===Z?t.every(r,s):(L(t,function(h,M,_){if(!(u=u&&r.call(s,h,M,_)))return o}),!!u)};var K=i.some=i.any=function(t,r,s){r||(r=i.identity);var u=!1;return t==null?u:X&&t.some===X?t.some(r,s):(L(t,function(h,M,_){if(u||(u=r.call(s,h,M,_)))return o}),!!u)};i.contains=i.include=function(t,r){return t==null?!1:ue&&t.indexOf===ue?t.indexOf(r)!=-1:K(t,function(s){return s===r})},i.invoke=function(t,r){var s=w.call(arguments,2),u=i.isFunction(r);return i.map(t,function(h){return(u?r:h[r]).apply(h,s)})},i.pluck=function(t,r){return i.map(t,function(s){return s[r]})},i.where=function(t,r,s){return i.isEmpty(r)?s?null:[]:i[s?"find":"filter"](t,function(u){for(var h in r)if(r[h]!==u[h])return!1;return!0})},i.findWhere=function(t,r){return i.where(t,r,!0)},i.max=function(t,r,s){if(!r&&i.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!r&&i.isEmpty(t))return-1/0;var u={computed:-1/0,value:-1/0};return L(t,function(h,M,_){var F=r?r.call(s,h,M,_):h;F>=u.computed&&(u={value:h,computed:F})}),u.value},i.min=function(t,r,s){if(!r&&i.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!r&&i.isEmpty(t))return 1/0;var u={computed:1/0,value:1/0};return L(t,function(h,M,_){var F=r?r.call(s,h,M,_):h;F<u.computed&&(u={value:h,computed:F})}),u.value},i.shuffle=function(t){var r,s=0,u=[];return L(t,function(h){r=i.random(s++),u[s-1]=u[r],u[r]=h}),u};var Y=function(t){return i.isFunction(t)?t:function(r){return r[t]}};i.sortBy=function(t,r,s){var u=Y(r);return i.pluck(i.map(t,function(h,M,_){return{value:h,index:M,criteria:u.call(s,h,M,_)}}).sort(function(h,M){var _=h.criteria,F=M.criteria;if(_!==F){if(_>F||_===void 0)return 1;if(_<F||F===void 0)return-1}return h.index<M.index?-1:1}),"value")};var N=function(t,r,s,u){var h={},M=Y(r||i.identity);return L(t,function(_,F){var R=M.call(s,_,F,t);u(h,R,_)}),h};i.groupBy=function(t,r,s){return N(t,r,s,function(u,h,M){(i.has(u,h)?u[h]:u[h]=[]).push(M)})},i.countBy=function(t,r,s){return N(t,r,s,function(u,h){i.has(u,h)||(u[h]=0),u[h]++})},i.sortedIndex=function(t,r,s,u){s=s==null?i.identity:Y(s);for(var h=s.call(u,r),M=0,_=t.length;M<_;){var F=M+_>>>1;s.call(u,t[F])<h?M=F+1:_=F}return M},i.toArray=function(t){return t?i.isArray(t)?w.call(t):t.length===+t.length?i.map(t,i.identity):i.values(t):[]},i.size=function(t){return t==null?0:t.length===+t.length?t.length:i.keys(t).length},i.first=i.head=i.take=function(t,r,s){if(t!=null)return r!=null&&!s?w.call(t,0,r):t[0]},i.initial=function(t,r,s){return w.call(t,0,t.length-(r==null||s?1:r))},i.last=function(t,r,s){if(t!=null)return r!=null&&!s?w.call(t,Math.max(t.length-r,0)):t[t.length-1]},i.rest=i.tail=i.drop=function(t,r,s){return w.call(t,r==null||s?1:r)},i.compact=function(t){return i.filter(t,i.identity)};var V=function(t,r,s){return L(t,function(u){i.isArray(u)?r?y.apply(s,u):V(u,r,s):s.push(u)}),s};i.flatten=function(t,r){return V(t,r,[])},i.without=function(t){return i.difference(t,w.call(arguments,1))},i.uniq=i.unique=function(t,r,s,u){i.isFunction(r)&&(u=s,s=r,r=!1);var h=s?i.map(t,s,u):t,M=[],_=[];return L(h,function(F,R){(r?!R||_[_.length-1]!==F:!i.contains(_,F))&&(_.push(F),M.push(t[R]))}),M},i.union=function(){return i.uniq(g.apply(l,arguments))},i.intersection=function(t){var r=w.call(arguments,1);return i.filter(i.uniq(t),function(s){return i.every(r,function(u){return i.indexOf(u,s)>=0})})},i.difference=function(t){var r=g.apply(l,w.call(arguments,1));return i.filter(t,function(s){return!i.contains(r,s)})},i.zip=function(){for(var t=w.call(arguments),r=i.max(i.pluck(t,"length")),s=new Array(r),u=0;u<r;u++)s[u]=i.pluck(t,""+u);return s},i.object=function(t,r){if(t==null)return{};for(var s={},u=0,h=t.length;u<h;u++)r?s[t[u]]=r[u]:s[t[u][0]]=t[u][1];return s},i.indexOf=function(t,r,s){if(t==null)return-1;var u=0,h=t.length;if(s)if(typeof s=="number")u=s<0?Math.max(0,h+s):s;else return u=i.sortedIndex(t,r),t[u]===r?u:-1;if(ue&&t.indexOf===ue)return t.indexOf(r,s);for(;u<h;u++)if(t[u]===r)return u;return-1},i.lastIndexOf=function(t,r,s){if(t==null)return-1;var u=s!=null;if(de&&t.lastIndexOf===de)return u?t.lastIndexOf(r,s):t.lastIndexOf(r);for(var h=u?s:t.length;h--;)if(t[h]===r)return h;return-1},i.range=function(t,r,s){arguments.length<=1&&(r=t||0,t=0),s=arguments[2]||1;for(var u=Math.max(Math.ceil((r-t)/s),0),h=0,M=new Array(u);h<u;)M[h++]=t,t+=s;return M},i.bind=function(t,r){if(t.bind===ie&&ie)return ie.apply(t,w.call(arguments,1));var s=w.call(arguments,2);return function(){return t.apply(r,s.concat(w.call(arguments)))}},i.partial=function(t){var r=w.call(arguments,1);return function(){return t.apply(this,r.concat(w.call(arguments)))}},i.bindAll=function(t){var r=w.call(arguments,1);return r.length===0&&(r=i.functions(t)),L(r,function(s){t[s]=i.bind(t[s],t)}),t},i.memoize=function(t,r){var s={};return r||(r=i.identity),function(){var u=r.apply(this,arguments);return i.has(s,u)?s[u]:s[u]=t.apply(this,arguments)}},i.delay=function(t,r){var s=w.call(arguments,2);return setTimeout(function(){return t.apply(null,s)},r)},i.defer=function(t){return i.delay.apply(i,[t,1].concat(w.call(arguments,1)))},i.throttle=function(t,r){var s,u,h,M,_=0,F=function(){_=new Date,h=null,M=t.apply(s,u)};return function(){var R=new Date,W=r-(R-_);return s=this,u=arguments,W<=0?(clearTimeout(h),h=null,_=R,M=t.apply(s,u)):h||(h=setTimeout(F,W)),M}},i.debounce=function(t,r,s){var u,h;return function(){var M=this,_=arguments,F=function(){u=null,s||(h=t.apply(M,_))},R=s&&!u;return clearTimeout(u),u=setTimeout(F,r),R&&(h=t.apply(M,_)),h}},i.once=function(t){var r=!1,s;return function(){return r||(r=!0,s=t.apply(this,arguments),t=null),s}},i.wrap=function(t,r){return function(){var s=[t];return y.apply(s,arguments),r.apply(this,s)}},i.compose=function(){var t=arguments;return function(){for(var r=arguments,s=t.length-1;s>=0;s--)r=[t[s].apply(this,r)];return r[0]}},i.after=function(t,r){return t<=0?r():function(){if(--t<1)return r.apply(this,arguments)}},i.keys=Q||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var r=[];for(var s in t)i.has(t,s)&&(r[r.length]=s);return r},i.values=function(t){var r=[];for(var s in t)i.has(t,s)&&r.push(t[s]);return r},i.pairs=function(t){var r=[];for(var s in t)i.has(t,s)&&r.push([s,t[s]]);return r},i.invert=function(t){var r={};for(var s in t)i.has(t,s)&&(r[t[s]]=s);return r},i.functions=i.methods=function(t){var r=[];for(var s in t)i.isFunction(t[s])&&r.push(s);return r.sort()},i.extend=function(t){return L(w.call(arguments,1),function(r){if(r)for(var s in r)t[s]=r[s]}),t},i.pick=function(t){var r={},s=g.apply(l,w.call(arguments,1));return L(s,function(u){u in t&&(r[u]=t[u])}),r},i.omit=function(t){var r={},s=g.apply(l,w.call(arguments,1));for(var u in t)i.contains(s,u)||(r[u]=t[u]);return r},i.defaults=function(t){return L(w.call(arguments,1),function(r){if(r)for(var s in r)t[s]==null&&(t[s]=r[s])}),t},i.clone=function(t){return i.isObject(t)?i.isArray(t)?t.slice():i.extend({},t):t},i.tap=function(t,r){return r(t),t};var A=function(t,r,s,u){if(t===r)return t!==0||1/t==1/r;if(t==null||r==null)return t===r;t instanceof i&&(t=t._wrapped),r instanceof i&&(r=r._wrapped);var h=d.call(t);if(h!=d.call(r))return!1;switch(h){case"[object String]":return t==String(r);case"[object Number]":return t!=+t?r!=+r:t==0?1/t==1/r:t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object RegExp]":return t.source==r.source&&t.global==r.global&&t.multiline==r.multiline&&t.ignoreCase==r.ignoreCase}if(typeof t!="object"||typeof r!="object")return!1;for(var M=s.length;M--;)if(s[M]==t)return u[M]==r;s.push(t),u.push(r);var _=0,F=!0;if(h=="[object Array]"){if(_=t.length,F=_==r.length,F)for(;_--&&(F=A(t[_],r[_],s,u)););}else{var R=t.constructor,W=r.constructor;if(R!==W&&!(i.isFunction(R)&&R instanceof R&&i.isFunction(W)&&W instanceof W))return!1;for(var $ in t)if(i.has(t,$)&&(_++,!(F=i.has(r,$)&&A(t[$],r[$],s,u))))break;if(F){for($ in r)if(i.has(r,$)&&!_--)break;F=!_}}return s.pop(),u.pop(),F};i.isEqual=function(t,r){return A(t,r,[],[])},i.isEmpty=function(t){if(t==null)return!0;if(i.isArray(t)||i.isString(t))return t.length===0;for(var r in t)if(i.has(t,r))return!1;return!0},i.isElement=function(t){return!!(t&&t.nodeType===1)},i.isArray=J||function(t){return d.call(t)=="[object Array]"},i.isObject=function(t){return t===Object(t)},L(["Arguments","Function","String","Number","Date","RegExp"],function(t){i["is"+t]=function(r){return d.call(r)=="[object "+t+"]"}}),i.isArguments(arguments)||(i.isArguments=function(t){return!!(t&&i.has(t,"callee"))}),typeof/./!="function"&&(i.isFunction=function(t){return typeof t=="function"}),i.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},i.isNaN=function(t){return i.isNumber(t)&&t!=+t},i.isBoolean=function(t){return t===!0||t===!1||d.call(t)=="[object Boolean]"},i.isNull=function(t){return t===null},i.isUndefined=function(t){return t===void 0},i.has=function(t,r){return x.call(t,r)},i.noConflict=function(){return a._=c,this},i.identity=function(t){return t},i.times=function(t,r,s){for(var u=Array(t),h=0;h<t;h++)u[h]=r.call(s,h);return u},i.random=function(t,r){return r==null&&(r=t,t=0),t+Math.floor(Math.random()*(r-t+1))};var S={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};S.unescape=i.invert(S.escape);var G={escape:new RegExp("["+i.keys(S.escape).join("")+"]","g"),unescape:new RegExp("("+i.keys(S.unescape).join("|")+")","g")};i.each(["escape","unescape"],function(t){i[t]=function(r){return r==null?"":(""+r).replace(G[t],function(s){return S[t][s]})}}),i.result=function(t,r){if(t==null)return null;var s=t[r];return i.isFunction(s)?s.call(t):s},i.mixin=function(t){L(i.functions(t),function(r){var s=i[r]=t[r];i.prototype[r]=function(){var u=[this._wrapped];return y.apply(u,arguments),me.call(this,s.apply(i,u))}})};var q=0;i.uniqueId=function(t){var r=++q+"";return t?t+r:r},i.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ce=/(.)^/,C={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},le=/\\|'|\r|\n|\t|\u2028|\u2029/g;i.template=function(t,r,s){var u;s=i.defaults({},s,i.templateSettings);var h=new RegExp([(s.escape||ce).source,(s.interpolate||ce).source,(s.evaluate||ce).source].join("|")+"|$","g"),M=0,_="__p+='";t.replace(h,function(R,W,$,ye,he){return _+=t.slice(M,he).replace(le,function(Me){return"\\"+C[Me]}),W&&(_+=`'+
((__t=(`+W+`))==null?'':_.escape(__t))+
'`),$&&(_+=`'+
((__t=(`+$+`))==null?'':__t)+
'`),ye&&(_+=`';
`+ye+`
__p+='`),M=he+R.length,R}),_+=`';
`,s.variable||(_=`with(obj||{}){
`+_+`}
`),_=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+_+`return __p;
`;try{u=new Function(s.variable||"obj","_",_)}catch(R){throw R.source=_,R}if(r)return u(r,i);var F=function(R){return u.call(this,R,i)};return F.source="function("+(s.variable||"obj")+`){
`+_+"}",F},i.chain=function(t){return i(t).chain()};var me=function(t){return this._chain?i(t).chain():t};i.mixin(i),L(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var r=l[t];i.prototype[t]=function(){var s=this._wrapped;return r.apply(s,arguments),(t=="shift"||t=="splice")&&s.length===0&&delete s[0],me.call(this,s)}}),L(["concat","join","slice"],function(t){var r=l[t];i.prototype[t]=function(){return me.call(this,r.apply(this._wrapped,arguments))}}),i.extend(i.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(it)})(Ge,Ge.exports);var Et=Ge.exports;const je=st(Et),kt=1e-9,Ot=Math.pow(2,-42);function hn(e){return je.isNumber(e)&&!je.isNaN(e)}function Se(e,n,a){return e==null||n==null?e===n:e===n?!0:(a==null&&(a=kt),Math.abs(e-n)<a)}function pn(e,n){return Se(e,0,n)?0:Math.abs(e)/e}function bt(e,n){return Se(Math.round(e),e,n)}function dn(e,n){const a=Math.pow(10,n);return Math.round(e*a)/a}function vn(e,n){return Math.round(e/n)*n}function gn(e,n){return Math.floor(e/n)*n}function mn(e,n){return Math.ceil(e/n)*n}function et(e,n=Ot,a=1e3){let c=[1,0],o=[0,1],l=Math.floor(e),p=e-l;for(;o[0]<=a;){if(Se(c[0]/o[0],e,n))return[c[0],o[0]];c=[l*c[0]+c[1],c[0]],o=[l*o[0]+o[1],o[0]],l=Math.floor(1/p),p=1/p-l}return[e,1]}const se={cleanMath:function(e){return typeof e=="string"?e.replace(/\+\s*-/g,"- ").replace(/-\s*-/g,"+ ").replace(/\^1/g,""):e},bound:function(e){return e===0?e:e<0?-se.bound(-e):Math.max(1e-6,Math.min(e,1e20))},factorial:function(e){return e<=1?e:e*se.factorial(e-1)},getGCD:function(e,n){if(arguments.length>2){const c=[].slice.call(arguments,1);return se.getGCD(e,se.getGCD(...c))}let a;for(e=Math.abs(e),n=Math.abs(n);n;)a=e%n,e=n,n=a;return e},getLCM:function(e,n){if(arguments.length>2){const a=[].slice.call(arguments,1);return se.getLCM(e,se.getLCM(...a))}return Math.abs(e*n)/se.getGCD(e,n)},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],isPrime:function(e){if(e<=1)return!1;if(e<101)return!!fe.grep(se.primes,function(n,a){return Math.abs(n-e)<=.5}).length;if(e<=1||e>2&&e%2===0)return!1;for(let n=3,a=Math.sqrt(e);n<=a;n+=2)if(e%n===0)return!1;return!0},getPrimeFactorization:function(e){if(e===1)return[];if(se.isPrime(e))return[e];const n=Math.sqrt(e);for(let a=2;a<=n;a++)if(e%a===0)return fe.merge(se.getPrimeFactorization(a),se.getPrimeFactorization(e/a))},roundToNearest:function(e,n){return Math.round(n/e)*e},roundTo:function(e,n){const a=Math.pow(10,e).toFixed(5);return Math.round((n*a).toFixed(5))/a},toFixedApprox:function(e,n){const a=e.toFixed(n);return Se(+a,e)?a:"\\approx "+a},roundToApprox:function(e,n){const a=se.roundTo(n,e);return Se(a,e)?String(a):se.toFixedApprox(e,n)},toFraction:function(e,n){if(n==null&&(n=Math.pow(2,-46)),e<0||e>1){let y=e%1;y+=y<0?1:0;const w=se.toFraction(y,n);return w[0]+=Math.round(e-y)*w[1],w}if(Math.abs(Math.round(Number(e))-e)<=n)return[Math.round(e),1];let a=0,c=1,o=1,l=1,p=1,v=2;for(;;){if(Math.abs(Number(p/v)-e)<=n)return[p,v];p/v<e?(a=p,c=v):(o=p,l=v),p=a+o,v=c+l}},getNumericFormat:function(e){if(e=fe.trim(e),e=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1"),e.match(/^[+-]?\d+$/))return"integer";if(e.match(/^[+-]?\d+\s+\d+\s*\/\s*\d+$/))return"mixed";const n=e.match(/^[+-]?(\d+)\s*\/\s*(\d+)$/);return n?parseFloat(n[1])>parseFloat(n[2])?"improper":"proper":e.replace(/[,. ]/g,"").match(/^\d+$/)?"decimal":e.match(/(pi?|\u03c0|t(?:au)?|\u03c4|pau)/)?"pi":null},toNumericString:function(e,n){if(e==null)return"";if(e===0)return"0";if(n==="percent")return e*100+"%";if(n==="pi"){const a=et(e/Math.PI),c=Math.abs(a[0]),o=a[1];if(bt(c))return(e<0?"-":"")+(c===1?"":c)+"π"+(o===1?"":"/"+o)}if(te(["proper","improper","mixed","fraction"]).contains(n)){const a=et(e),c=Math.abs(a[0]),o=a[1],l=e<0?"-":"";if(o===1)return l+c;if(n==="mixed"){const p=c%o,v=(c-p)/o;return l+(v?v+" ":"")+p+"/"+o}return l+c+"/"+o}return String(e)}};function yn(e){return e.reduce(At,0)}function At(e,n){return e+n}const Nt=Math.pow(2,-42),Oe={predicate:{defaultForms:"integer, proper, improper, mixed, decimal",createValidatorFunctional:function(e,n,a){n=te.extend({simplify:"required",ratio:!1,forms:Oe.predicate.defaultForms},n);let c;te.isArray(n.forms)?c=n.forms:c=n.forms.split(/\s*,\s*/),n.inexact===void 0&&(n.maxError=0),n.maxError=+n.maxError+Nt,te.contains(c,"percent")&&(c=te.without(c,"percent"),c.push("percent"));const o=function(p){p=p.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").replace(/(^\s*)|(\s*$)/gi,"");const v=p.match(/^([+-]?\d+)\s*\/\s*([+-]?\d+)$/),y=p.match(/^([+-]?)\\frac\{([+-]?\d+)\}\{([+-]?\d+)\}$/),w=parseInt(p,10);if(v||y){let g,d,x=!0;return v?(g=parseFloat(v[1]),d=parseFloat(v[2])):(g=parseFloat(y[2]),y[1]==="-"&&(g<0&&(x=!1),g=-g),d=parseFloat(y[3])),x=x&&d>0&&(n.ratio||d!==1)&&se.getGCD(g,d)===1,[{value:g/d,exact:x}]}return!isNaN(w)&&""+w===p?[{value:w,exact:!0}]:[]},l={integer:function(p){const v=l.decimal(p),y=l.decimal(p,1);return v[0].value!=null&&v[0].value===y[0].value||v[1].value!=null&&v[1].value===y[1].value?v:[]},proper:function(p){return fe.map(o(p),function(v){return Math.abs(v.value)<1?[v]:[]})},improper:function(p){return fe.map(o(p),function(v){return Math.abs(v.value)>=1?[v]:[]})},pi:function(p){let v,y=[];if(p=p.replace(/\u2212/,"-"),v=p.match(/^([+-]?)\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))y=[{value:parseFloat(v[1]+"1"),exact:!0}];else if(v=p.match(/^([+-]?\s*\d+\s*(?:\/\s*[+-]?\s*\d+)?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))y=o(v[1]);else if(v=p.match(/^([+-]?)\s*(\d+)\s*([+-]?\d+)\s*\/\s*([+-]?\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i)){const g=parseFloat(v[1]+"1"),d=parseFloat(v[2]),x=parseFloat(v[3]),m=parseFloat(v[4]),b=x<m&&se.getGCD(x,m)===1;y=[{value:g*(d+x/m),exact:b}]}else if(v=p.match(/^([+-]?\s*\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\s*\d+))?$/i))y=o(v[1]+"/"+v[3]);else if(v=p.match(/^([+-]?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\d+))?$/i))y=o(v[1]+"1/"+v[3]);else if(p==="0")y=[{value:0,exact:!0}];else if(v=p.match(/^(.+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))y=l.decimal(v[1]);else{y=te.reduce(Oe.predicate.defaultForms.split(/\s*,\s*/),function(x,m){return x.concat(l[m](p))},[]);let g=!1;const d=parseFloat(p);if(!isNaN(d)&&d!==parseInt(p)){const x=Math.PI/12,m=x*Math.round(d/x);Math.abs(d-m)<.01&&(g=!0)}else p.match(/\/\s*7/)&&(g=!0);return g&&te.each(y,function(x){x.piApprox=!0}),y}let w=Math.PI;return p.match(/\\?tau|t|\u03c4/)&&(w=Math.PI*2),p.match(/pau/)&&(w=Math.PI*1.5),fe.each(y,function(g,d){d.value*=w}),y},coefficient:function(p){let v=[];return p=p.replace(/\u2212/,"-"),p===""?v=[{value:1,exact:!0}]:p==="-"&&(v=[{value:-1,exact:!0}]),v},log:function(p){let v,y=[];return p=p.replace(/\u2212/,"-"),p=p.replace(/[ \(\)]/g,""),(v=p.match(/^log\s*(\S+)\s*$/i))?y=l.decimal(v[1]):p==="0"&&(y=[{value:0,exact:!0}]),y},percent:function(p){p=fe.trim(p);let v=!1;p.indexOf("%")===p.length-1&&(p=fe.trim(p.substring(0,p.length-1)),v=!0);const y=l.decimal(p);return fe.each(y,function(w,g){g.exact=v,g.value=g.value/100}),y},mixed:function(p){const v=p.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?)(\d+)\s+(\d+)\s*\/\s*(\d+)$/);if(v){const y=parseFloat(v[1]+"1"),w=parseFloat(v[2]),g=parseFloat(v[3]),d=parseFloat(v[4]),x=g<d&&se.getGCD(g,d)===1;return[{value:y*(w+g/d),exact:x}]}return[]},decimal:function(p,v=1e10){const y=function(g){g=fe.trim(g);const d=g.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?(?:\d{1,3}(?:[, ]?\d{3})*\.?|\d{0,3}(?:[, ]?\d{3})*\.(?:\d{3}[, ]?)*\d{1,3}))$/),x=g.match(/^0[0,]*,/);if(d&&!x){let m=parseFloat(d[1].replace(/[, ]/g,""));return n.inexact===void 0&&(m=Math.round(m*v)/v),m}},w=function(g){return g=g.replace(/([\.,])/g,function(d,x){return x==="."?",":"."}),y(g)};return[{value:y(p),exact:!0},{value:w(p),exact:!0}]}};return function(p){const v=n.fallback!=null?""+n.fallback:"";p=fe.trim(p)||v;const y={empty:p==="",correct:!1,message:null,guess:p};if(fe.each(c,function(w,g){const d=l[g](p);for(let x=0,m=d.length;x<m;x++){const b=d[x].value,E=d[x].exact,D=d[x].piApprox;if(e(b,n.maxError))return E||n.simplify==="optional"?(y.correct=!0,y.message=n.message||null,y.empty=!1):g==="percent"?(y.empty=!0,y.message=a.MISSING_PERCENT_ERROR):(n.simplify!=="enforced"&&(y.empty=!0),y.message=a.NEEDS_TO_BE_SIMPLFIED_ERROR),!1;D&&e(b,Math.abs(b*.001))&&(y.empty=!0,y.message=a.APPROXIMATED_PI_ERROR)}}),y.correct===!1){let w=!1;if(te.each(l,function(g){te.any(g(p),function(x){return x.value!=null&&!te.isNaN(x.value)})&&(w=!0)}),!w)return y.empty=!0,y.message=a.EXTRA_SYMBOLS_ERROR,y}return y}}},number:{convertToPredicate:function(e,n){const a=parseFloat(e);return[function(c,o){return Math.abs(c-a)<o},fe.extend({},n,{type:"predicate"})]},createValidatorFunctional:function(e,n,a){return Oe.predicate.createValidatorFunctional(...Oe.number.convertToPredicate(e,n),a)}},expression:{parseSolution:function(e,n){let a=Fe(e,n);if(a.parsed){if(n.simplified&&!a.expr.isSimplified())throw new qe("The provided solution ("+e+") isn't fully expanded and simplified.",De.InvalidInput);a=a.expr}else throw new qe("The provided solution ("+e+") didn't parse.",De.InvalidInput);return a},createValidatorFunctional:function(e,n,a){return function(c){const o={empty:!1,correct:!1,message:null,guess:c,ungraded:!1};if(!c)return o.empty=!0,o;const l=Fe(c,n);if(!l.parsed)return o.empty=!0,o;typeof e=="string"&&(e=Oe.expression.parseSolution(e,n));const p=Qe(l.expr,e,n);if(p.equal)o.correct=!0;else if(p.wrongVariableNames||p.wrongVariableCase)o.ungraded=!0,o.message=p.wrongVariableCase?a.WRONG_CASE_ERROR:a.WRONG_LETTER_ERROR,o.suppressAlmostThere=!0;else if(p.message)o.message=p.message;else{const v=Fe(c.replace(/[xX]/g,"*"),n);if(v.parsed){const y=Qe(v.expr,e,n);y.equal?(o.ungraded=!0,o.message=a.MULTIPLICATION_SIGN_ERROR):y.message&&(o.message=y.message+" Also, I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign.")}}return o}}}},at=/^web\+graphie:/,ut=/^file\+graphie:/;function ze(e){return ct(e)?ot(e):e}function ct(e){return at.test(e)||ut.test(e)}function Ue(e){return e.replace(at,"https:").replace(ut,"file:")}function ot(e){return Ue(e)+".svg"}function Ft(e){return Ue(e)+"-data.json"}async function Tt(e){const n=new Image;return new Promise((a,c)=>{n.onload=()=>{a([n.naturalWidth,n.naturalHeight])},n.onerror=c,n.src=ze(e)})}let tt=!1;const lt=function(e,n,a){return Array.isArray(e)?te.map(e,function(c){return lt(c,n)}):n.call(a,e)};function St(e,n){return e==null||n==null?e==null==(n==null):e.length===n.length&&e.every((a,c)=>n[c]===a)}const ft=/^\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/,Rt=/^([a-z-]+) ([0-9]+)$/,Pt=new RegExp(ft.source+"$"),Dt="☃",ht={type:"points",earned:0,total:0,message:null},He=function(e){let n=e;return function(){let a=n;return a=a+2127912214+(a<<12)&4294967295,a=(a^3345072700^a>>>19)&4294967295,a=a+374761393+(a<<5)&4294967295,a=(a+3550635116^a<<9)&4294967295,a=a+4251993797+(a<<3)&4294967295,a=(a^3042594569^a>>>16)&4294967295,(n=a&268435455)/268435456}};function qt(e,n,a=!1){const c=te.clone(e);if(!c.length||te.all(c,function(l){return te.isEqual(l,c[0])}))return c;let o;typeof n=="function"?o=n:o=He(n);do for(let l=c.length;l>0;l--){const p=Math.floor(o()*l),v=c[p];c[p]=c[l-1],c[l-1]=v}while(a&&te.isEqual(e,c));return c}const Vt="x".split(/(.)/g).length?function(e,n){return e.split(n)}:function(e,n){const a=[];let c=n.lastIndex=0,o;for(;o=n.exec(e);){const l=o;a.push(e.slice(c,l.index)),a.push(...l.slice(1)),c=l.index+l[0].length}return a.push(e.slice(c)),a};function pt(e,n){let a;if(e.type==="points"&&n.type==="points")return e.message&&n.message&&e.message!==n.message?a=null:a=e.message||n.message,{type:"points",earned:e.earned+n.earned,total:e.total+n.total,message:a};if(e.type==="points"&&n.type==="invalid")return n;if(e.type==="invalid"&&n.type==="points")return e;if(e.type==="invalid"&&n.type==="invalid")return e.message&&n.message&&e.message!==n.message?a=null:a=e.message||n.message,{type:"invalid",message:a};throw new qe("PerseusScore with unknown type encountered",De.InvalidInput,{metadata:{scoreA:JSON.stringify(e),scoreB:JSON.stringify(n)}})}function Ct(e){return Object.values(e).reduce(pt,ht)}function Gt(e){return e.type==="points"&&e.earned>=e.total}function Lt(e,n,a){if(e.type==="points")return{empty:!1,correct:Gt(e),message:e.message,guess:n,state:a};if(e.type==="invalid")return{empty:!0,correct:!1,message:e.message,suppressAlmostThere:e.suppressAlmostThere,guess:n,state:a};throw new qe("Invalid score type: "+e.type,De.InvalidInput,{metadata:{score:JSON.stringify(e),guess:JSON.stringify(n),state:JSON.stringify(a)}})}function zt(e,n){let a;return Oe.predicate.createValidatorFunctional(function(o){return a=o,!0},{simplify:"optional",inexact:!0,forms:"integer, proper, improper, pi, log, mixed, decimal"},n)(e),a}function Ut(e){return te(e).times(function(){return""})}function Ht(e,n,a,c){const o=Be(n,a),p=e*o>30;return{scale:o,tickStep:e/c,unityLabel:p}}function Bt(e,n,a){return te(2).times(function(c){const o=Be(e[c],a);return dt(n[c],o)})}function Wt(e){return[e[0]/2,e[1]/2]}function dt(e,n){const a=e*n,c=e,o=Math.pow(10,Math.floor(Math.log(c)/Math.LN10)),l=Math.floor(c/o);if(a<25)return e;if(a<50)return l===5?e:e/2;if(l===1)return e/2;if(l===2)return e/4;if(l===5)return e/5}function Be(e,n){const a=e[1]-e[0];return n/a}function $t(e,n){const a=e[1]-e[0];let c;15<a&&a<=20?c=23:a>100||a<5?c=10:c=16;const o=n/500,l=c*o;return We(a,l)}function We(e,n){let a=Math.pow(10,Math.floor(Math.log(e/n)/Math.LN10));const c=n/e*a;return c<=.15?a*=10:c<=.35?a*=5:c<=.75&&(a*=2),a}const nt=(e,n)=>{const a=n[1]-n[0],c=a/e;return c<=10?e:c<=20?e*2:We(a,10)};function Jt(e,n){return[nt(e[0],n[0]),nt(e[1],n[1])]}function Le(e,n){return typeof e=="number"&&typeof n=="number"?Math.abs(e-n)<1e-9:e===n}function Pe(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;for(let a=0;a<e.length;a++)if(!Pe(e[a],n[a]))return!1;return!0}return Array.isArray(e)||Array.isArray(n)?!1:typeof e=="function"&&typeof n=="function"?Le(e,n):typeof e=="function"||typeof n=="function"?!1:typeof e=="object"&&typeof n=="object"&&e&&n?e===n||te.all(e,function(a,c){return Pe(n[c],a)})&&te.all(n,function(a,c){return Pe(e[c],a)}):typeof e=="object"&&e||typeof n=="object"&&n?!1:Le(e,n)}function Zt(e){e=e||window.location.search.substring(1);const n={},a=/\+/g,c=/([^&=]+)=?([^&]*)/g,o=function(p){return decodeURIComponent(p.replace(a," "))};let l;for(;l=c.exec(e);){const p=l;n[o(p[1])]=o(p[2])}return n}function Kt(e,n,a){a=encodeURIComponent(a);const c=new RegExp("([?&])"+n+"=.*?(&|$)","i"),o=e.indexOf("?")!==-1?"&":"?";return e.match(c)?e.replace(c,"$1"+n+"="+a+"$2"):e+o+n+"="+a}function Yt(e){return encodeURIComponent(e).replace(/['()!]/g,window.escape).replace(/\*/g,"%2A")}function Xt(e){return e.type==="invalid"&&(!e.message||e.message.length===0)}const we={pointerDown:!1,currentTouchIdentifier:null};function Qt(){Object.assign(we,{pointerDown:!1,currentTouchIdentifier:null})}function jt(e){let n;if(we.pointerDown){if(we.currentTouchIdentifier!=null){const c=e.changedTouches?e.changedTouches.length:0;for(let o=0;o<c;o++)e.changedTouches[o].identifier===we.currentTouchIdentifier&&(n=e.changedTouches[o])}else n=e;const a=e.type==="touchend"||e.type==="touchcancel";n&&a&&(we.pointerDown=!1,we.currentTouchIdentifier=null)}else we.pointerDown=!0,e.changedTouches?(n=e.changedTouches[0],we.currentTouchIdentifier=n.identifier):n=e;if(n)return{left:n.pageX,top:n.pageY}}const en=()=>{try{const e=Object.defineProperty({},"passive",{get:function(){tt=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}return tt};function tn(e){e.stopPropagation()}function nn(e,n){const a=new Image;a.onload=function(){var c;a.width===0&&a.height===0?((c=document.body)==null||c.appendChild(a),te.defer(function(){var o;n(a.clientWidth,a.clientHeight),(o=document.body)==null||o.removeChild(a)})):n(a.width,a.height)},a.src=ze(e)}function rn(e){const n=e.value,a=e.selectionStart-1,c=Math.max(n.lastIndexOf(`
`,a),n.lastIndexOf(" ",a))+1;return{string:n.substring(c,a+1),pos:{start:c,end:a}}}function sn(e,n){e.selectionStart=n,e.selectionEnd=n}const an={getWordBeforeCursor:rn,moveCursor:sn},un=e=>e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):e,cn=He(new Date().getTime()&4294967295);function vt(e){return Array.isArray(e)?e.map(vt):e}const xn={inputPathsEqual:St,nestedMap:lt,rWidgetRule:ft,rTypeFromWidgetId:Rt,rWidgetParts:Pt,snowman:Dt,noScore:ht,seededRNG:He,shuffle:qt,split:Vt,combineScores:pt,flattenScores:Ct,keScoreFromPerseusScore:Lt,firstNumericalParse:zt,stringArrayOfSize:Ut,gridDimensionConfig:Ht,getGridStep:Bt,snapStepFromGridStep:Wt,scaleFromExtent:Be,tickStepFromExtent:$t,gridStepFromTickStep:dt,tickStepFromNumTicks:We,constrainedTickStepsFromTickSteps:Jt,eq:Le,deepEq:Pe,parseQueryString:Zt,updateQueryString:Kt,strongEncodeURIComponent:Yt,scoreIsEmpty:Xt,touchHandlers:we,resetTouchHandlers:Qt,extractPointerLocation:jt,supportsPassiveEvents:en,captureScratchpadTouchStart:tn,getImageSize:nn,getImageSizeModern:Tt,getRealImageUrl:ze,isLabeledSVG:ct,getBaseUrl:Ue,getSvgUrl:ot,getDataUrl:Ft,textarea:an,unescapeMathMode:un,random:cn,deepClone:vt};export{kt as D,De as E,se as K,qe as P,xn as U,Gt as a,hn as b,vn as c,mn as d,Se as e,gn as f,Oe as g,pn as h,bt as i,Fe as p,dn as r,yn as s,et as t};
