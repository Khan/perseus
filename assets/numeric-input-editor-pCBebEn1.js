import{a as n,j as e}from"./jsx-runtime-BGVbfQ2Z.js";import"./article-renderer-eoMEF-t0.js";import{_ as l}from"./index-default-4_ZsnO94.js";import{U as k}from"./util-WvQWLN3r.js";import{c as q}from"./unit-1L4OY2_r.js";import"./dependencies-fnqF3NiV.js";import"./perseus-api-Ly41NhN4.js";import"./multi-renderer-UjK7nuVd.js";import"./hints-renderer-5RS6MTpk.js";import"./renderer-6cshdyqQ.js";import"./base-radio-0ty9nL18.js";import{c as O}from"./components-GhEX2-Hl.js";import{I as P}from"./icon-paths-AuJwhOz7.js";import"./jquery-5v7aFUvu.js";import{P as z}from"./i18n-context-9-s9cJ--.js";import{E as V}from"./editor-jsonify-TeR0H2Xw.js";import{r as I}from"./index-qhcEwEpg.js";import{E as j}from"./editor-U2B7P1TY.js";const{ButtonGroup:N,InfoTip:u,InlineIcon:C,MultiButtonGroup:D,NumberInput:y,PropCheckBox:b,TextInput:U}=O,{iconGear:B,iconTrash:M}=P,{firstNumericalParse:T}=k,_=[{title:"Integers",value:"integer",content:"6"},{title:"Decimals",value:"decimal",content:"0.75"},{title:"Proper fractions",value:"proper",content:"⅗"},{title:"Improper fractions",value:"improper",content:"⁷⁄₄"},{title:"Mixed numbers",value:"mixed",content:"1¾"},{title:"Numbers with π",value:"pi",content:"π"}],x=A=>({value:null,status:A,message:"",simplify:"required",answerForms:[],strict:!1,maxError:null}),h=class h extends I.Component{constructor(c){super(c),this.change=(...s)=>q.apply(this,s),this.onToggleOptions=s=>{const r=this.state.showOptions.slice();r[s]=!r[s],this.setState({showOptions:r})},this.onTrashAnswer=s=>{if(s>=0&&s<this.props.answers.length){const r=this.props.answers.slice(0);r.splice(s,1),this.props.onChange({answers:r})}},this.onSpace=(s,r,...a)=>{s.key===" "&&(s.preventDefault(),r.apply(this,a))},this.onStatusChange=s=>{const r=["wrong","ungraded","correct"],a=this.props.answers,p=l.indexOf(r,a[s].status),d=r[(p+1)%r.length];this.updateAnswer(s,{status:d,simplify:d==="correct"?"required":"accepted"})},this.updateAnswer=(s,r)=>{if(!l.isObject(r))return l.partial((p,d,v)=>{const m={};m[d]=v,this.updateAnswer(p,m)},s,r);let a=[...this.props.answers];if(s===a.length){const p=x(this.state.lastStatus);a=a.concat(p)}a[s]=l.extend({},a[s],r),this.props.onChange({answers:a})},this.addAnswer=()=>{const s=x(this.state.lastStatus),r=this.props.answers.concat(s);this.props.onChange({answers:r})},this.getSaveWarnings=()=>{const s=[];return l.contains(l.pluck(this.props.answers,"value"),"")&&s.push("One or more answers is empty"),this.props.answers.forEach((r,a)=>{r.strict&&(!r.answerForms||r.answerForms.length===0)&&s.push(`Answer ${a+1} is set to string format matching, but no format was selected`)}),s},this.serialize=()=>V.serialize.call(this),this.state={lastStatus:"wrong",showOptions:l.map(this.props.answers,()=>!1)}}render(){const c=this.props.answers,s=t=>n("div",{className:"perseus-widget-row",children:[e("label",{children:"Unsimplified answers are"}),e(N,{value:c[t].simplify,allowEmpty:!1,buttons:[{value:"required",content:"ungraded"},{value:"optional",content:"accepted"},{value:"enforced",content:"wrong"}],onChange:this.updateAnswer(t,"simplify")||(()=>{})}),n(u,{children:[e("p",{children:'Normally select "ungraded". This will give the user a message saying the answer is correct but not simplified. The user will then have to simplify it and re-enter, but will not be penalized. (5th grade and after)'}),e("p",{children:'Select "accepted" only if the user is not expected to know how to simplify fractions yet. (Anything prior to 5th grade)'}),n("p",{children:['Select "wrong" ',e("em",{children:"only"})," if we are specifically assessing the ability to simplify."]})]})]}),r=t=>n("div",{children:[n("div",{className:"perseus-widget-row",children:[e("label",{children:"Choose the suggested answer formats"}),e(D,{buttons:_,values:c[t].answerForms,onChange:this.updateAnswer(t,"answerForms")||(()=>{})}),n(u,{children:[e("p",{children:'Formats will be autoselected for you based on the given answer; to show no suggested formats and accept all types, simply have a decimal/integer be the answer. Values with π will have format "pi", and values that are fractions will have some subset (mixed will be "mixed" and "proper"; improper/proper will both be "improper" and "proper"). If you would like to specify that it is only a proper fraction (or only a mixed/improper fraction), deselect the other format. Except for specific cases, you should not need to change the autoselected formats.'}),n("p",{children:["To restrict the answer to ",e("em",{children:"only"}),' an improper fraction (i.e. 7/4), select the improper fraction and toggle "strict" to true. This ',e("b",{children:"will not"})," ","accept 1.75 as an answer."," "]}),e("p",{children:"Unless you are testing that specific skill, please do not restrict the answer format."})]})]}),e("div",{className:"perseus-widget-row",children:e(b,{label:"Strictly match only these formats",strict:c[t].strict,onChange:this.updateAnswer.bind(this,t)})})]}),a=t=>e("div",{className:"perseus-widget-row",children:n("label",{children:["Max error"," ",e(y,{className:"max-error",value:c[t].maxError,onChange:this.updateAnswer(t,"maxError"),placeholder:"0"})]})}),p=n("div",{className:"perseus-widget-row",children:[e("label",{children:"Width: "}),e(N,{value:this.props.size,allowEmpty:!1,buttons:[{value:"normal",content:"Normal (80px)"},{value:"small",content:"Small (40px)"}],onChange:this.change("size")}),e(u,{children:e("p",{children:'Use size "Normal" for all text boxes, unless there are multiple text boxes in one line and the answer area is too narrow to fit them.'})})]}),d=e("div",{className:"perseus-widget-row",children:e(b,{label:"Right alignment",rightAlign:this.props.rightAlign,onChange:this.props.onChange})}),v=n("div",{className:"perseus-widget-row",children:[n("label",{children:["Label text:"," ",e(U,{value:this.props.labelText,onChange:this.change("labelText")})]}),e(u,{children:e("p",{children:"Text to describe this input. This will be shown to users using screenreaders."})})]}),m=e("div",{children:n("div",{className:"perseus-widget-row",children:[e(b,{label:"Coefficient",coefficient:this.props.coefficient,onChange:this.props.onChange}),e(u,{children:e("p",{children:"A coefficient style number allows the student to use - for -1 and an empty string to mean 1."})})]})}),E=e("div",{children:e("a",{href:"javascript:void(0)",className:"simple-button orange",onClick:()=>this.addAnswer(),onKeyDown:t=>this.onSpace(t,this.addAnswer),children:e("span",{children:"Add new answer"})})}),F={wrong:"(address the mistake/misconception)",ungraded:"(explain in detail to avoid confusion)",correct:"(reinforce the user's understanding)"};return n("div",{className:"perseus-input-number-editor",children:[e("div",{className:"ui-title",children:"User input"}),e("div",{className:"msg-title",children:"Message shown to user on attempt"}),c.map((t,i)=>{const S=e(j,{apiOptions:this.props.apiOptions,content:t.message||"",placeholder:"Why is this answer "+t.status+"?	"+F[t.status],widgetEnabled:!1,onChange:o=>{"content"in o&&this.updateAnswer(i,{message:o.content})}});return n("div",{className:"perseus-widget-row",children:[n("div",{className:"input-answer-editor-value-container"+(t.maxError?" with-max-error":""),children:[e(y,{value:t.value,className:"numeric-input-value",placeholder:"answer",format:l.last(t.answerForms||[]),onFormatChange:(o,f)=>{let g;f==="pi"?g=["pi"]:f==="mixed"?g=["proper","mixed"]:(f==="proper"||f==="improper")&&(g=["proper","improper"]),this.updateAnswer(i,{value:T(o,this.context.strings),answerForms:g})},onChange:o=>{this.updateAnswer(i,{value:T(o,this.context.strings)})}}),t.strict&&e("div",{className:"is-strict-indicator",title:"strictly equivalent to",children:"≡"}),t.simplify!=="required"&&t.status==="correct"&&e("div",{className:"simplify-indicator "+t.simplify,title:"accepts unsimplified answers",children:"‰"}),t.maxError?n("div",{className:"max-error-container",children:[e("div",{className:"max-error-plusmn",children:"±"}),e(y,{placeholder:0,value:c[i].maxError,format:l.last(t.answerForms||[]),onChange:this.updateAnswer(i,"maxError")})]}):null,e("div",{className:"value-divider"}),e("a",{href:"javascript:void(0)",className:"answer-status "+t.status,onClick:()=>this.onStatusChange(i),onKeyDown:o=>this.onSpace(o,this.onStatusChange),children:t.status}),e("a",{href:"javascript:void(0)",className:"answer-trash","aria-label":"Delete answer",onClick:()=>this.onTrashAnswer(i),onKeyDown:o=>this.onSpace(o,this.onTrashAnswer),children:e(C,{...M})}),e("a",{href:"javascript:void(0)",className:"options-toggle","aria-label":"Toggle options",onClick:()=>this.onToggleOptions(i),onKeyDown:o=>this.onSpace(o,this.onToggleOptions),children:e(C,{...B})})]}),e("div",{className:"input-answer-editor-message",children:S}),this.state.showOptions[i]&&n("div",{className:"options-container",children:[a(i),t.status==="correct"&&s(i),r(i)]})]},i)}),E,p,d,m,v]})}};h.contextType=z,h.widgetName="numeric-input",h.displayName="NumericInputEditor",h.defaultProps={answers:[x("correct")],size:"normal",coefficient:!1,labelText:"",rightAlign:!1};let w=h;try{w.displayName="NumericInputEditor",w.__docgenInfo={description:"",displayName:"NumericInputEditor",props:{answers:{defaultValue:{value:'[initAnswer("correct")]'},description:"",name:"answers",required:!1,type:{name:"readonly PerseusNumericInputAnswer[]"}},labelText:{defaultValue:{value:""},description:"",name:"labelText",required:!1,type:{name:"string"}},size:{defaultValue:{value:"normal"},description:"",name:"size",required:!1,type:{name:"string"}},coefficient:{defaultValue:{value:"false"},description:"",name:"coefficient",required:!1,type:{name:"boolean"}},rightAlign:{defaultValue:{value:"false"},description:"",name:"rightAlign",required:!1,type:{name:"boolean"}},static:{defaultValue:null,description:"",name:"static",required:!1,type:{name:"boolean"}},answerForms:{defaultValue:null,description:"",name:"answerForms",required:!1,type:{name:"readonly PerseusNumericInputAnswerForm[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(results: any) => any"}},apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!1,type:{name:"Readonly<Readonly<{ isArticle?: boolean; onInputError?: ((widgetId: any, value: string, message?: string | null) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown..."}}}}}catch{}export{w as N};
