import{a,j as e}from"./jsx-runtime-BGVbfQ2Z.js";import"./article-renderer-lqD3WKBV.js";import{_ as l}from"./index-default-4_ZsnO94.js";import{U as k}from"./util-Kf-UsGkl.js";import{c as q}from"./unit-3mV5sRes.js";import"./version-akiLXZts.js";import"./dependencies-fnqF3NiV.js";import"./perseus-api-BF68z3pH.js";import"./multi-renderer-CIS8j2se.js";import"./hints-renderer-FhwyUnbj.js";import"./renderer--qvWlSJl.js";import"./base-radio-L2CQ04LW.js";import{c as O}from"./components-IoB9EuXw.js";import{I as P}from"./icon-paths-AuJwhOz7.js";import"./jquery-5v7aFUvu.js";import{P as D}from"./i18n-context-9-s9cJ--.js";import{E as z}from"./editor-jsonify-lRJL2fNS.js";import{r as V}from"./index-qhcEwEpg.js";import{E as I}from"./editor-M4fxQh5E.js";const{ButtonGroup:N,InfoTip:u,InlineIcon:C,MultiButtonGroup:U,NumberInput:y,PropCheckBox:b,TextInput:B}=O,{iconGear:M,iconTrash:_}=P,{firstNumericalParse:T}=k,j=[{title:"Integers",value:"integer",content:"6"},{title:"Decimals",value:"decimal",content:"0.75"},{title:"Proper fractions",value:"proper",content:"⅗"},{title:"Improper fractions",value:"improper",content:"⁷⁄₄"},{title:"Mixed numbers",value:"mixed",content:"1¾"},{title:"Numbers with π",value:"pi",content:"π"}],x=A=>({value:null,status:A,message:"",simplify:"required",answerForms:[],strict:!1,maxError:null}),h=class h extends V.Component{constructor(c){super(c),this.change=(...s)=>q.apply(this,s),this.onToggleOptions=s=>{const r=this.state.showOptions.slice();r[s]=!r[s],this.setState({showOptions:r})},this.onTrashAnswer=s=>{if(s>=0&&s<this.props.answers.length){const r=this.props.answers.slice(0);r.splice(s,1),this.props.onChange({answers:r})}},this.onSpace=(s,r,...i)=>{s.key===" "&&(s.preventDefault(),r.apply(this,i))},this.onStatusChange=s=>{const r=["wrong","ungraded","correct"],i=this.props.answers,p=l.indexOf(r,i[s].status),d=r[(p+1)%r.length];this.updateAnswer(s,{status:d,simplify:d==="correct"?"required":"accepted"})},this.updateAnswer=(s,r)=>{if(!l.isObject(r))return l.partial((p,d,v)=>{const m={};m[d]=v,this.updateAnswer(p,m)},s,r);let i=[...this.props.answers];if(s===i.length){const p=x(this.state.lastStatus);i=i.concat(p)}i[s]=l.extend({},i[s],r),this.props.onChange({answers:i})},this.addAnswer=()=>{const s=x(this.state.lastStatus),r=this.props.answers.concat(s);this.props.onChange({answers:r})},this.getSaveWarnings=()=>{const s=[];return l.contains(l.pluck(this.props.answers,"value"),"")&&s.push("One or more answers is empty"),this.props.answers.forEach((r,i)=>{r.strict&&(!r.answerForms||r.answerForms.length===0)&&s.push(`Answer ${i+1} is set to string format matching, but no format was selected`)}),s},this.serialize=()=>z.serialize.call(this),this.state={lastStatus:"wrong",showOptions:l.map(this.props.answers,()=>!1)}}render(){const c=this.props.answers,s=t=>a("div",{className:"perseus-widget-row",children:[e("label",{children:"Unsimplified answers are"}),e(N,{value:c[t].simplify,allowEmpty:!1,buttons:[{value:"required",content:"ungraded"},{value:"optional",content:"accepted"},{value:"enforced",content:"wrong"}],onChange:this.updateAnswer(t,"simplify")||(()=>{})}),a(u,{children:[e("p",{children:'Normally select "ungraded". This will give the user a message saying the answer is correct but not simplified. The user will then have to simplify it and re-enter, but will not be penalized. (5th grade and after)'}),e("p",{children:'Select "accepted" only if the user is not expected to know how to simplify fractions yet. (Anything prior to 5th grade)'}),a("p",{children:['Select "wrong" ',e("em",{children:"only"})," if we are specifically assessing the ability to simplify."]})]})]}),r=t=>a("div",{children:[a("div",{className:"perseus-widget-row",children:[e("label",{children:"Choose the suggested answer formats"}),e(U,{buttons:j,values:c[t].answerForms,onChange:this.updateAnswer(t,"answerForms")||(()=>{})}),a(u,{children:[e("p",{children:'Formats will be autoselected for you based on the given answer; to show no suggested formats and accept all types, simply have a decimal/integer be the answer. Values with π will have format "pi", and values that are fractions will have some subset (mixed will be "mixed" and "proper"; improper/proper will both be "improper" and "proper"). If you would like to specify that it is only a proper fraction (or only a mixed/improper fraction), deselect the other format. Except for specific cases, you should not need to change the autoselected formats.'}),a("p",{children:["To restrict the answer to ",e("em",{children:"only"}),' an improper fraction (i.e. 7/4), select the improper fraction and toggle "strict" to true. This ',e("b",{children:"will not"})," ","accept 1.75 as an answer."," "]}),e("p",{children:"Unless you are testing that specific skill, please do not restrict the answer format."})]})]}),e("div",{className:"perseus-widget-row",children:e(b,{label:"Strictly match only these formats",strict:c[t].strict,onChange:this.updateAnswer.bind(this,t)})})]}),i=t=>e("div",{className:"perseus-widget-row",children:a("label",{children:["Max error"," ",e(y,{className:"max-error",value:c[t].maxError,onChange:this.updateAnswer(t,"maxError"),placeholder:"0"})]})}),p=a("div",{className:"perseus-widget-row",children:[e("label",{children:"Width: "}),e(N,{value:this.props.size,allowEmpty:!1,buttons:[{value:"normal",content:"Normal (80px)"},{value:"small",content:"Small (40px)"}],onChange:this.change("size")}),e(u,{children:e("p",{children:'Use size "Normal" for all text boxes, unless there are multiple text boxes in one line and the answer area is too narrow to fit them.'})})]}),d=e("div",{className:"perseus-widget-row",children:e(b,{label:"Right alignment",rightAlign:this.props.rightAlign,onChange:this.props.onChange})}),v=a("div",{className:"perseus-widget-row",children:[a("label",{children:["Label text:"," ",e(B,{value:this.props.labelText,onChange:this.change("labelText")})]}),e(u,{children:e("p",{children:"Text to describe this input. This will be shown to users using screenreaders."})})]}),m=e("div",{children:a("div",{className:"perseus-widget-row",children:[e(b,{label:"Coefficient",coefficient:this.props.coefficient,onChange:this.props.onChange}),e(u,{children:e("p",{children:"A coefficient style number allows the student to use - for -1 and an empty string to mean 1."})})]})}),E=e("div",{children:e("a",{href:"#",className:"simple-button orange",onClick:t=>{t.preventDefault(),this.addAnswer()},onKeyDown:t=>this.onSpace(t,this.addAnswer),children:e("span",{children:"Add new answer"})})}),F={wrong:"(address the mistake/misconception)",ungraded:"(explain in detail to avoid confusion)",correct:"(reinforce the user's understanding)"};return a("div",{className:"perseus-input-number-editor",children:[e("div",{className:"ui-title",children:"User input"}),e("div",{className:"msg-title",children:"Message shown to user on attempt"}),c.map((t,o)=>{const S=e(I,{apiOptions:this.props.apiOptions,content:t.message||"",placeholder:"Why is this answer "+t.status+"?	"+F[t.status],widgetEnabled:!1,onChange:n=>{"content"in n&&this.updateAnswer(o,{message:n.content})}});return a("div",{className:"perseus-widget-row",children:[a("div",{className:"input-answer-editor-value-container"+(t.maxError?" with-max-error":""),children:[e(y,{value:t.value,className:"numeric-input-value",placeholder:"answer",format:l.last(t.answerForms||[]),onFormatChange:(n,f)=>{let g;f==="pi"?g=["pi"]:f==="mixed"?g=["proper","mixed"]:(f==="proper"||f==="improper")&&(g=["proper","improper"]),this.updateAnswer(o,{value:T(n,this.context.strings),answerForms:g})},onChange:n=>{this.updateAnswer(o,{value:T(n,this.context.strings)})}}),t.strict&&e("div",{className:"is-strict-indicator",title:"strictly equivalent to",children:"≡"}),t.simplify!=="required"&&t.status==="correct"&&e("div",{className:"simplify-indicator "+t.simplify,title:"accepts unsimplified answers",children:"‰"}),t.maxError?a("div",{className:"max-error-container",children:[e("div",{className:"max-error-plusmn",children:"±"}),e(y,{placeholder:0,value:c[o].maxError,format:l.last(t.answerForms||[]),onChange:this.updateAnswer(o,"maxError")})]}):null,e("div",{className:"value-divider"}),e("a",{href:"#",className:"answer-status "+t.status,onClick:n=>{n.preventDefault(),this.onStatusChange(o)},onKeyDown:n=>this.onSpace(n,this.onStatusChange),children:t.status}),e("a",{href:"#",className:"answer-trash","aria-label":"Delete answer",onClick:n=>{n.preventDefault(),this.onTrashAnswer(o)},onKeyDown:n=>this.onSpace(n,this.onTrashAnswer),children:e(C,{..._})}),e("a",{href:"#",className:"options-toggle","aria-label":"Toggle options",onClick:n=>{n.preventDefault(),this.onToggleOptions(o)},onKeyDown:n=>this.onSpace(n,this.onToggleOptions),children:e(C,{...M})})]}),e("div",{className:"input-answer-editor-message",children:S}),this.state.showOptions[o]&&a("div",{className:"options-container",children:[i(o),t.status==="correct"&&s(o),r(o)]})]},o)}),E,p,d,m,v]})}};h.contextType=D,h.widgetName="numeric-input",h.displayName="NumericInputEditor",h.defaultProps={answers:[x("correct")],size:"normal",coefficient:!1,labelText:"",rightAlign:!1};let w=h;try{w.displayName="NumericInputEditor",w.__docgenInfo={description:"",displayName:"NumericInputEditor",props:{answers:{defaultValue:{value:'[initAnswer("correct")]'},description:"",name:"answers",required:!1,type:{name:"readonly PerseusNumericInputAnswer[]"}},labelText:{defaultValue:{value:""},description:"",name:"labelText",required:!1,type:{name:"string"}},size:{defaultValue:{value:"normal"},description:"",name:"size",required:!1,type:{name:"string"}},coefficient:{defaultValue:{value:"false"},description:"",name:"coefficient",required:!1,type:{name:"boolean"}},rightAlign:{defaultValue:{value:"false"},description:"",name:"rightAlign",required:!1,type:{name:"boolean"}},static:{defaultValue:null,description:"",name:"static",required:!1,type:{name:"boolean"}},answerForms:{defaultValue:null,description:"",name:"answerForms",required:!1,type:{name:"readonly PerseusNumericInputAnswerForm[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(results: any) => any"}},apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!1,type:{name:"Readonly<Readonly<{ isArticle?: boolean; onInputError?: ((widgetId: any, value: string, message?: string | null) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown..."}}}}}catch{}export{w as N};
