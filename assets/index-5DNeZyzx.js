import{a as se}from"./version-akiLXZts.js";import{j as t,a as d}from"./jsx-runtime-BGVbfQ2Z.js";import"./article-renderer-4ybG3pwb.js";import{_ as m}from"./index-default-4_ZsnO94.js";import"./util-Kf-UsGkl.js";import{l as f}from"./unit-3mV5sRes.js";import{P as U,E as V}from"./perseus-error-l3K_anoI.js";import"./dependencies-fnqF3NiV.js";import{A as O}from"./perseus-api-BF68z3pH.js";import{e as re,d as oe}from"./multi-renderer-sqnU2hbR.js";import"./hints-renderer-_Xno86Gb.js";import{i as ie,r as ae,a as ce,j as le}from"./renderer--qvWlSJl.js";import"./base-radio-L2CQ04LW.js";import{c as $}from"./components-IoB9EuXw.js";import{I as G}from"./icon-paths-AuJwhOz7.js";import"./jquery-5v7aFUvu.js";import"./i18n-context-9-s9cJ--.js";import{r as y}from"./index-qhcEwEpg.js";import{D as de}from"./device-framer-DJLiyhX0.js";import{I as pe,J as K,H as he,E as ue,A as me,a as ge}from"./editor-page-vnCqbb1T.js";import{S as b}from"./section-control-button-iG7u4tCG.js";import{E as Q}from"./editor-nt0m-we9.js";import"./viewport-resizer-7Kz7WusC.js";import{P as p}from"./index-tvtfaFq4.js";import{R as j,W as fe}from"./structured-item-diff-knXnAdEp.js";import"./button-group-eBTrRsKy.js";import"./graph-Bysq6csc.js";import"./svg-image-ImGr8npy.js";import"./hud-Q7Km3N9P.js";import"./icon-HbAIhp4d.js";import"./info-tip-_E95qi8X.js";import"./inline-icon-MJBS_-2U.js";import"./math-input-Ah4BQ4X3.js";import"./multi-button-group-rHU9dGVb.js";import"./number-input-nytuiJQZ.js";import{c as X}from"./prop-check-box-s_QybB1E.js";import"./range-input-qxBl8f4w.js";import"./text-input-yDsqFbe3.js";import"./text-list-editor-bJphcq85.js";import{M as ve}from"./multi-items-EK0YCfEv.js";import{l as c}from"./index-awljIyHI.js";import{R as ye}from"./index-E09jvG0x.js";/* empty css                       */const we="@khanacademy/perseus-editor",Ce="__lib_version__";se(we,Ce);const{HUD:_e,InlineIcon:Ne}=$,{iconCircleArrowDown:Se,iconCircleArrowUp:Ee,iconPlus:W,iconTrash:be}=G,F=class F extends y.Component{constructor(){super(...arguments),this.state={highlightLint:!0},this._handleJsonChange=e=>{this.props.onChange({json:e})},this._handleEditorChange=(e,n)=>{const s=m.clone(this._sections());s[e]=m.extend({},s[e],n),this.props.onChange({json:s})}}componentDidMount(){this._updatePreviewFrames()}componentDidUpdate(){this._updatePreviewFrames()}_updatePreviewFrames(){this.props.mode==="preview"?this.refs["frame-all"].sendNewData({type:"article-all",data:this._sections().map((e,n)=>this._apiOptionsForSection(e,n))}):this.props.mode==="edit"&&this._sections().forEach((e,n)=>{this.refs["frame-"+n].sendNewData({type:"article",data:this._apiOptionsForSection(e,n)})})}_apiOptionsForSection(e,n){const s=this.refs[`editor${n}`];return{apiOptions:{...O.defaults,...this.props.apiOptions,showAlignmentOptions:!0,isArticle:!0},json:e,useNewStyles:this.props.useNewStyles,linterContext:{contentType:"article",highlightLint:this.state.highlightLint,paths:this.props.contentPaths},legacyPerseusLint:s?s.getSaveWarnings():[]}}_sections(){return Array.isArray(this.props.json)?this.props.json:[this.props.json]}_renderEditor(){const{imageUploader:e,sectionImageUploadGenerator:n}=this.props,s={...O.defaults,...this.props.apiOptions,showAlignmentOptions:!0,isArticle:!0},o=this._sections();return d("div",{className:"perseus-editor-table",children:[o.map((l,i)=>[d("div",{className:"perseus-editor-row",children:[d("div",{className:"perseus-editor-left-cell",children:[d("div",{className:"pod-title",children:["Section ",i+1,d("div",{style:{display:"inline-block",float:"right"},children:[n(i),t(b,{icon:W,onClick:()=>{this._handleAddSectionAfter(i)},title:"Add a new section after this one"}),i+1<o.length&&t(b,{icon:Se,onClick:()=>{this._handleMoveSectionLater(i)},title:"Move this section down"}),i>0&&t(b,{icon:Ee,onClick:()=>{this._handleMoveSectionEarlier(i)},title:"Move this section up"}),t(b,{icon:be,onClick:()=>{const h="Are you sure you want to delete section "+(i+1)+"?";confirm(h)&&this._handleRemoveSection(i)},title:"Delete this section"})]})]}),t(Q,{...l,apiOptions:s,imageUploader:e,onChange:m.partial(this._handleEditorChange,i),placeholder:"Type your section text here...",ref:"editor"+i})]}),t("div",{className:"editor-preview",children:this._renderIframePreview(i,!0)})]},i)]),this._renderAddSection(),this._renderLinterHUD()]})}_renderAddSection(){return t("div",{className:"perseus-editor-row",children:t("div",{className:"perseus-editor-left-cell",children:d("a",{href:"#",className:"simple-button orange",onClick:()=>{this._handleAddSectionAfter(this._sections().length-1)},children:[t(Ne,{...W})," Add a section"]})})})}_renderLinterHUD(){return t(_e,{message:"Style warnings",enabled:this.state.highlightLint,onClick:()=>{this.setState({highlightLint:!this.state.highlightLint})}})}_renderIframePreview(e,n){const s=this.props.screen==="phone"||this.props.screen==="tablet";return t(de,{deviceType:this.props.screen,nochrome:n,children:t(pe,{ref:"frame-"+e,datasetKey:"mobile",datasetValue:s,seamless:n,url:this.props.previewURL},this.props.screen)})}_renderPreviewMode(){return t("div",{className:"standalone-preview",children:this._renderIframePreview("all",!1)})}_handleMoveSectionEarlier(e){if(e===0)return;const n=m.clone(this._sections()),s=n[e];n.splice(e,1),n.splice(e-1,0,s),this.props.onChange({json:n})}_handleMoveSectionLater(e){const n=m.clone(this._sections());if(e+1===n.length)return;const s=n[e];n.splice(e,1),n.splice(e+1,0,s),this.props.onChange({json:n})}_handleAddSectionAfter(e){const n=m.clone(this.serialize()),s=e>=0?{widgets:n[e].widgets}:{};n.splice(e+1,0,s),this.props.onChange({json:n})}_handleRemoveSection(e){const n=m.clone(this._sections());n.splice(e,1),this.props.onChange({json:n})}serialize(){if(this.props.mode==="edit")return this._sections().map((e,n)=>this.refs["editor"+n].serialize());if(this.props.mode==="preview"||this.props.mode==="json")return this.props.json;throw new U("Could not serialize; mode "+this.props.mode+" not found",V.Internal)}getSaveWarnings(){if(this.props.mode!=="edit")throw new U("Can only get save warnings in edit mode.",V.NotAllowed);return this._sections().map((e,n)=>this.refs["editor"+n].getSaveWarnings())}render(){return d("div",{className:"framework-perseus perseus-article-editor",children:[this.props.mode==="edit"&&this._renderEditor(),this.props.mode==="preview"&&this._renderPreviewMode(),this.props.mode==="json"&&d("div",{className:"json-editor",children:[t("div",{className:"json-editor-warning",children:t("span",{children:"Warning: Editing in this mode can lead to broken articles!"})}),t(K,{multiLine:!0,onChange:this._handleJsonChange,value:this.props.json})]})]})}};F.defaultProps={contentPaths:[],json:[{}],mode:"edit",screen:"desktop",sectionImageUploadGenerator:()=>t("span",{}),useNewStyles:!1};let R=F;try{articleeditor.displayName="articleeditor",articleeditor.__docgenInfo={description:"",displayName:"articleeditor",props:{contentPaths:{defaultValue:{value:"[]"},description:"",name:"contentPaths",required:!1,type:{name:"readonly string[]"}},json:{defaultValue:{value:"[{}]"},description:"",name:"json",required:!1,type:{name:"JsonType"}},mode:{defaultValue:{value:"edit"},description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"json"'},{value:'"diff"'},{value:'"edit"'},{value:'"preview"'}]}},screen:{defaultValue:{value:"desktop"},description:"",name:"screen",required:!1,type:{name:"enum",value:[{value:'"phone"'},{value:'"tablet"'},{value:'"desktop"'}]}},sectionImageUploadGenerator:{defaultValue:{value:"() => <span />"},description:"",name:"sectionImageUploadGenerator",required:!1,type:{name:"(i: number) => ReactElement<DetailedHTMLProps<HTMLAttributes<HTMLSpanElement>, HTMLSpanElement>, string | JSXElementConstructor<...>>"}},useNewStyles:{defaultValue:{value:"false"},description:"",name:"useNewStyles",required:!1,type:{name:"boolean"}},apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!1,type:{name:"Readonly<{ isArticle?: boolean; onInputError?: ((widgetId: any, value: string, message?: string | null) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown) | undef..."}},imageUploader:{defaultValue:null,description:"",name:"imageUploader",required:!1,type:{name:"((arg1: string, arg2: (arg1: string) => unknown) => unknown)"}},previewURL:{defaultValue:null,description:"",name:"previewURL",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}}}}}catch{}const k=p.shape({content:p.string,images:p.objectOf(p.any),widgets:p.objectOf(p.any)}),_=class _ extends y.Component{constructor(){super(...arguments),this.state=_._stateFromProps(this.props)}UNSAFE_componentWillReceiveProps(e){this.setState(_._stateFromProps(e))}render(){const{before:e,after:n}=this.state,s=Math.max(e.length,n.length),o=m.times(s,l=>t(j,{before:l<e.length?e[l]:void 0,after:l<n.length?n[l]:void 0,title:`Section ${l+1}`,showAlignmentOptions:!0,showSeparator:l<s-1},l));return t("div",{className:"framework-perseus",children:o})}};_.propTypes={after:p.oneOfType([k,p.arrayOf(k)]).isRequired,before:p.oneOfType([k,p.arrayOf(k)]).isRequired},_._stateFromProps=e=>{const{before:n,after:s}=e;return{before:Array.isArray(n)?n:[n],after:Array.isArray(s)?s:[s]}};let A=_;try{A.displayName="ArticleDiff",A.__docgenInfo={description:"",displayName:"ArticleDiff",props:{}}}catch{}const z=p.shape({question:p.shape({}).isRequired,answerArea:p.shape({}).isRequired,hints:p.arrayOf(p.any).isRequired}),q=class q extends y.Component{render(){const{before:e,after:n}=this.props,s=Math.max(e.hints.length,n.hints.length),o=t(j,{before:e.question,after:n.question,title:"Question",showAlignmentOptions:!1,showSeparator:!0}),l=t(fe,{before:e.answerArea,after:n.answerArea,title:"Question extras"}),i=m.times(s,function(h){return t(j,{before:h<e.hints.length?e.hints[h]:void 0,after:h<n.hints.length?n.hints[h]:void 0,title:`Hint ${h+1}`,showAlignmentOptions:!1,showSeparator:h<s-1},h)});return d("div",{className:"framework-perseus",children:[o,l,i&&t("div",{className:"diff-separator"}),i]})}};q.propTypes={after:z.isRequired,before:z.isRequired};let M=q;try{M.displayName="ItemDiff",M.__docgenInfo={description:"",displayName:"ItemDiff",props:{}}}catch{}const L=class L extends y.Component{render(){const{children:e,color:n,onClick:s,...o}=this.props;return t("div",{className:c.css(T.baseButton,n==="green"&&T.green,n==="orange"&&T.orange),onClick:s,...o,children:e})}};L.propTypes={children:p.node,color:p.oneOf(["orange","green"]),onClick:p.func},L.defaultProps={children:null,color:"green",onClick:()=>{}};let w=L;const T=c.StyleSheet.create({baseButton:{top:"0",fontSize:"11px",padding:"3px 10px",backgroundRepeat:"repeat-x",borderColor:`
             rgba(0, 0, 0, 0.1)
             rgba(0, 0, 0, 0.1)
             rgba(0, 0, 0, 0.25)
         `,color:"#ffffff",borderRadius:"3px",lineHeight:"15px",cursor:"pointer",transition:"box-shadow ease-in-out 0.15s",appearance:"none",textDecoration:"none",textAlign:"center",":hover":{boxShadow:`0 1px 1px rgba(0, 0, 0, 0.35),
                 inset 0 0 50px 5px rgba(255, 255, 255, 0.2)`}},green:{border:"1px solid #7fab07",backgroundColor:"#80ac07",backgroundImage:"linear-gradient(to bottom, #8aba08, #719807)",":hover":{borderBottomColor:"#547105",backgroundColor:"#719807"}},orange:{border:"1px solid #d45704",backgroundColor:"#d55704",backgroundImage:"linear-gradient(to bottom, #e35d04, #c04f03)",":hover":{borderBottomColor:"#983e03",backgroundColor:"#c04f03"}}});try{w.displayName="SimpleButton",w.__docgenInfo={description:"",displayName:"SimpleButton",props:{}}}catch{}const{InlineIcon:I}=$,{iconChevronDown:B,iconTrash:ke}=G,{MultiRenderer:Pe}=ve;class P extends y.Component{constructor(){super(...arguments),this._handleSelectMode=e=>{if(this.props.onChange){const n=e.target.value;this.props.onChange(n)}}}render(){return d("label",{children:["Mode:"," ",d("select",{value:this.props.currentMode,onChange:this._handleSelectMode,children:[t("option",{value:"edit",children:"Edit"}),t("option",{value:"preview",children:"Preview"}),t("option",{value:"json",children:"Dev-only JSON"})]})]})}}function Y(r){return r.replace(/[A-Z]/g,e=>" "+e.toLowerCase())}function x(r){return r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()}function Z(r){return r.charAt(r.length-1)==="s"?r.slice(0,-1):r}function v(r){return["_multi",...r]}const H=({depth:r,...e})=>{const s=`h${Math.min(r,5)+1}`;return t(s,{...e})},D=r=>{const{shape:e,data:n,path:s,actions:o,name:l,controls:i,...h}=r,g=l||Y(s[s.length-1]||""),N=t(Le,{...h,shape:e,data:n,path:s,actions:o}),S=s.join(".");return e.type==="array"?t(Me,{name:g,controls:i,path:s,shape:e,actions:o,children:N},S):e.type==="object"?t(xe,{name:g,controls:i,path:s,children:N},S):t(Ae,{name:g,controls:i,path:s,shape:e,children:N},S)},Ae=({name:r,controls:e,children:n,path:s,shape:o})=>{const i=(o.type==="content"||o.type==="hint")&&t("div",{className:c.css(a.containerHeader),children:t(H,{depth:s.length,className:c.css(a.containerTitle),children:x(r)})});return d("div",{className:c.css(a.container),children:[d("span",{className:c.css(a.row,a.rowHeading),children:[t("div",{className:c.css(a.columnLeft),children:d("div",{className:"pod-title "+c.css(a.containerHeader),children:[t("div",{className:c.css(a.containerTitle),children:x(r)}),e]})}),t("div",{className:c.css(a.columnRight),children:i})]}),n]})},Me=r=>{const{name:e,controls:n,children:s,path:o,shape:l,actions:i}=r;return d("div",{className:c.css(a.container),children:[n&&t("div",{className:c.css(a.columnLeft,a.containerHeader),children:n}),t("div",{children:s}),t("div",{className:c.css(a.columnLeft),children:d("a",{href:"javascript:void 0",onClick:()=>i.addArrayElement(o,l.elementShape),children:["Add a ",Z(e)]})})]})},xe=({name:r,controls:e,children:n,path:s})=>{const o=d("div",{className:c.css(a.containerHeader),children:[t(H,{depth:s.length,className:c.css(a.containerTitle),children:x(r)}),e]}),l=(r||e)&&t("div",{className:c.css(a.containerHeader,a.previewCollectionHeader),children:t(H,{depth:s.length,className:c.css(a.containerTitle),children:x(r)})}),i=o&&l;return d("div",{className:c.css(a.container),children:[i&&d("span",{className:c.css(a.row),children:[t("div",{className:c.css(a.columnLeft),children:o}),t("div",{className:c.css(a.columnRight),children:l})]}),t("div",{className:c.css(s.length>0&&a.contentIndent),children:n})]})},Le=r=>{const{shape:e,data:n,...s}=r;return e.type==="content"?t(Te,{shape:e,data:n,...s}):e.type==="hint"?t(Ie,{shape:e,data:n,...s}):e.type==="tags"?t(Oe,{shape:e,data:n,...s}):e.type==="array"?t(je,{shape:e,data:n,...s}):e.type==="object"?t(Re,{shape:e,data:n,...s}):null},ee=r=>class extends y.Component{constructor(){super(...arguments),this.state={sticky:!1},this.updateStickiness=()=>{const s=ye.findDOMNode(this).offsetHeight,o=window.innerHeight,l=s>o;l!==this.state.sticky&&this.setState({sticky:l})}}componentDidMount(){this.stickynessTimer=setInterval(this.updateStickiness,1e3),this.updateStickiness()}componentWillUnmount(){clearInterval(this.stickynessTimer)}render(){return t(r,{...this.props,sticky:this.state.sticky})}},Te=ee(r=>{const{data:e,path:n,actions:s,apiOptions:o,renderers:l,sticky:i}=r,h=t("div",{className:"framework-perseus",children:f(l).get(n)});return t("span",{children:d("div",{className:c.css(a.row),children:[t("div",{className:c.css(a.columnLeft),children:t("div",{className:c.css(i&&a.sticky),children:t(Q,{...e,onChange:g=>s.mergeValueAtPath(n,g),apiOptions:o})})}),t("div",{className:c.css(a.columnRight),children:t("div",{className:c.css(i&&a.sticky),children:h})})]})})}),Ie=ee(r=>{const{data:e,path:n,actions:s,apiOptions:o,renderers:l,sticky:i}=r,h=t("div",{className:"framework-perseus",children:f(l).get(n)});return d("div",{className:c.css(a.row),children:[t("div",{className:c.css(a.columnLeft),children:t("div",{className:c.css(i&&a.sticky),children:t(he,{...e,className:c.css(a.hintEditor),onChange:g=>s.mergeValueAtPath(n,g),apiOptions:o,showTitle:!1,showRemoveButton:!1,showMoveButtons:!1,onRemove:()=>{},onMove:g=>{},isFirst:!0,isLast:!0})})}),t("div",{className:c.css(a.columnRight),children:t("div",{className:c.css(i&&a.sticky),children:h})})]})}),Oe=r=>{const{data:e,path:n,actions:s,apiOptions:o}=r,{GroupMetadataEditor:l}=o;return l==null?null:t("div",{className:c.css(a.columnLeft),children:t("div",{className:c.css(a.tagsEditor),children:t(l,{value:e,onChange:i=>s.setValueAtPath(n,i),showTitle:!1})})})},je=r=>{const{shape:e,data:n,path:s,actions:o,...l}=r,i=Y(s[s.length-1]),h=Z(i),g=e.elementShape.type,N=g==="content"||g==="hint",S=n.map((te,C)=>{const E=s.concat(C),ne=[C>0&&t("div",{className:c.css(a.control),children:t(w,{color:"orange",title:"Move up",onClick:()=>o.moveArrayElementUp(E),children:t("div",{className:c.css(a.verticalFlip),children:t(I,{...B})})})},"moveArrayElementUp"),C<n.length-1&&t("div",{className:c.css(a.control),children:t(w,{color:"orange",title:"Move down",onClick:()=>o.moveArrayElementDown(E),children:t(I,{...B})})},"moveArrayElementDown"),t("div",{className:c.css(a.control),children:t(w,{color:"orange",title:"Delete",onClick:()=>o.removeArrayElement(E),children:t(I,{...ke})})},"removeArrayElement")];return t("div",{className:c.css(a.arrayElement,!N&&a.arrayElementAndNotLeaf),children:y.createElement(D,{...l,key:C,shape:e.elementShape,data:te,path:E,actions:o,name:`${h} ${C+1}`,controls:ne})},C)});return t("div",{children:S})},Re=r=>{const{shape:e,data:n,path:s,...o}=r,l=Object.keys(e.shape).map(i=>t("div",{className:c.css(a.objectElement),children:t(D,{...o,shape:e.shape[i],data:n[i],path:s.concat(i)})},i));return t("div",{children:l})};class J extends y.Component{constructor(){super(...arguments),this._renderLayout=()=>{const{Layout:e,apiOptions:n,item:s}=this.props;return t(e,{ref:o=>this.layout=o,item:s,apiOptions:n})},this._renderJson=()=>d("div",{children:[t(P,{currentMode:this.props.editorMode,onChange:e=>this.props.onChange({editorMode:e})}),t(K,{multiLine:!0,value:this.props.item,onChange:e=>this.props.onChange({item:e})})]}),this._renderPreview=()=>d("div",{children:[t(P,{currentMode:this.props.editorMode,onChange:e=>this.props.onChange({editorMode:e})}),this._renderLayout()]}),this.mergeValueAtPath=(e,n)=>{this.props.onChange({item:f(this.props.item).merge(v(e),n).freeze()})},this.setValueAtPath=(e,n)=>{this.props.onChange({item:f(this.props.item).set(v(e),n).freeze()})},this.addArrayElement=(e,n)=>{const s=f(this.props.item).get(v(e)).length,o=e.concat(s),l=re(n);this.props.onChange({item:f(this.props.item).set(v(o),l).freeze()})},this.removeArrayElement=e=>{this.props.onChange({item:f(this.props.item).del(v(e)).freeze()})},this.moveArrayElementDown=e=>{const s=e[e.length-1]+1,o=e.slice(0,-1).concat(s),l=f(this.props.item).get(v(e)),i=f(this.props.item).get(v(o));this.props.onChange({item:f(this.props.item).set(v(e),i).set(v(o),l).freeze()})},this.moveArrayElementUp=e=>{const n=e[e.length-1],s=e.slice(0,-1).concat(n-1);this.moveArrayElementDown(s)},this._renderEdit=()=>{const e={...O.defaults,...this.props.apiOptions},{item:n}=this.props,s=this.props.Layout.shape;return d("div",{className:"perseus-multirenderer-editor",children:[t(P,{currentMode:this.props.editorMode,onChange:o=>this.props.onChange({editorMode:o})}),t(Pe,{item:n,shape:s,apiOptions:e,dependencies:{analytics:{onAnalyticsEvent:async()=>{}}},children:({renderers:o})=>t(D,{shape:s,data:oe(n),path:[],actions:this,apiOptions:e,renderers:o})})]})},this.score=()=>{if(this.layout)return this.layout.score()},this.getSerializedState=()=>{if(this.layout)return this.layout.getSerializedState()},this.restoreSerializedState=e=>{this.layout&&this.layout.restoreSerializedState(e)},this._renderContent=()=>{switch(this.props.editorMode){case"json":return this._renderJson();case"preview":return this._renderPreview();case"edit":return this._renderEdit();default:return t(P,{currentMode:this.props.editorMode,onChange:e=>this.props.onChange({editorMode:e})})}}}render(){return t("div",{id:"perseus",children:this._renderContent()})}}const a=c.StyleSheet.create({container:{},editor:{width:"100%"},treePreview:{position:"relative"},verticalFlip:{transform:"scaleY(-1)"},control:{marginLeft:12},containerHeader:{alignItems:"flex-end",display:"flex",flexDirection:"row"},previewCollectionHeader:{marginBottom:16},containerTitle:{flexGrow:1,margin:0},contentIndent:{marginLeft:8},hintEditor:{paddingBottom:0},arrayElement:{marginBottom:16},arrayElementAndNotLeaf:{borderBottom:"1px solid #ccc",":first-child":{borderTop:"1px solid #ccc",paddingTop:16}},objectElement:{marginBottom:16},tagsEditor:{border:"1px solid #ddd",padding:"5px 10px"},row:{display:"flex",position:"relative"},columnLeft:{width:360,marginRight:30,position:"relative"},columnRight:{flex:1,marginLeft:30,position:"relative"},sticky:{position:"sticky",top:33},rowHeading:{position:"sticky",backgroundColor:"white",width:"100%",zIndex:101,top:-1}});try{J.displayName="MultiRendererEditor",J.__docgenInfo={description:"",displayName:"MultiRendererEditor",props:{Layout:{defaultValue:null,description:"",name:"Layout",required:!0,type:{name:"ComponentType<any> & LayoutStatics"}},apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!0,type:{name:"Readonly<{ isArticle?: boolean | undefined; onInputError?: ((widgetId: any, value: string, message?: string | null | undefined) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown) | undef..."}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"Item"}},editorMode:{defaultValue:null,description:"",name:"editorMode",required:!0,type:{name:"enum",value:[{value:'"json"'},{value:'"edit"'},{value:'"preview"'}]}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"ChangeHandler"}}}}}catch{}X({displayName:"StatefulArticleEditor",getInitialState:function(){return m({}).extend(this.props,{mode:"edit",onChange:this.handleChange,ref:"editor",screen:"phone"})},componentDidMount:function(){this._isMounted=!0},UNSAFE_componentWillReceiveProps:function(r){this.setState(m(r).omit("onChange","ref"))},componentWillUnmount:function(){this._isMounted=!1},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(){return this.refs.editor.serialize()},handleChange:function(r,e){this._isMounted&&this.setState(r,e)},scorePreview:function(){return this.refs.editor.scorePreview()},render:function(){const{mode:r,screen:e}=this.state;return d("div",{children:[d("div",{style:u.controlBar,children:[d("span",{style:u.controls,children:["Mode:"," ",t("span",{onClick:()=>this.setState({mode:"edit"}),style:r==="edit"?u.controlSelected:u.control,children:"EDIT"})," | ",t("span",{onClick:()=>this.setState({mode:"preview"}),style:r==="preview"?u.controlSelected:u.control,children:"PREVIEW"})," | ",t("span",{onClick:()=>this.setState({mode:"json"}),style:r==="json"?u.controlSelected:u.control,children:"JSON"})]}),d("span",{style:u.controls,children:["Screen:"," ",t("span",{onClick:()=>this.setState({screen:"phone"}),style:e==="phone"?u.controlSelected:u.control,children:"PHONE"})," | ",t("span",{onClick:()=>this.setState({screen:"tablet"}),style:e==="tablet"?u.controlSelected:u.control,children:"TABLET"})," | ",t("span",{onClick:()=>this.setState({screen:"desktop"}),style:e==="desktop"?u.controlSelected:u.control,children:"DESKTOP"})]})]}),t("div",{style:u.editor,children:t(R,{...this.state})})]})}});const u={controlBar:{marginBottom:25,marginTop:5},controls:{marginRight:10},controlSelected:{cursor:"default",fontWeight:700},control:{cursor:"pointer"},editor:{marginTop:-20}};X({displayName:"StatefulEditorPage",propTypes:{componentClass:p.func},getDefaultProps:function(){return{componentClass:ue}},render:function(){const r=this.props.componentClass;return t(r,{...this.state})},getInitialState:function(){return m({}).extend(m.omit(this.props,"componentClass"),{onChange:this.handleChange,ref:"editor"})},componentDidMount:function(){this._isMounted=!0},componentWillUnmount:function(){this._isMounted=!1},UNSAFE_componentWillReceiveProps:function(r){this.setState(m(r).pick("apiOptions","imageUploader","developerMode","problemNum","previewDevice","frameSource"))},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(){return this.refs.editor.serialize()},handleChange:function(r,e){this._isMounted&&this.setState(r,e)},scorePreview:function(){return this.refs.editor.scorePreview()}});ie(ge);ae(me);ce();le();
