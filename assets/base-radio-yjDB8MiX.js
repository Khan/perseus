import{a as K,j as b}from"./jsx-runtime-BGVbfQ2Z.js";import{_ as E}from"./index-V35CFGao.js";import{l as C}from"./index-awljIyHI.js";import{c as L}from"./index-awCzqCwC.js";import{r as x}from"./index-qhcEwEpg.js";import{R as V}from"./index-E09jvG0x.js";import{_ as X}from"./index-default-4_ZsnO94.js";import{C as k}from"./perseus-api-Ly41NhN4.js";import{h as Z,r as H,n as B,s as D}from"./constants-I_nlPaPx.js";import{m as _}from"./media-queries-MaBBbpNq.js";import{s as ee}from"./shared-3pf9YZIg.js";import{U as te}from"./util-jqcWD9IE.js";import{C as oe}from"./choice-ycfm5rYV.js";import{C as ne}from"./choice-none-above-GtwLCnuD.js";typeof HTMLElement<"u"&&!HTMLElement.prototype.scrollTo&&(HTMLElement.prototype.scrollTo=function(e,o){this.scrollLeft=e,this.scrollTop=o});const U=(e,o)=>{typeof e.scrollTo=="function"?e.scrollTo(0,o):"scrollTop"in e&&(e.scrollTop=o)},se=(e,o,r=0,n)=>{const a=e===window?window.pageYOffset:e.scrollTop,c=o,m=c-a,d=17,T=r/d;let h=0;const y=setInterval(function(){if(h<T){const N=h/T,v=(-Math.cos(Math.PI*N)+1)/2,R=a+m*v;U(e,R),h+=1}else U(e,c),clearInterval(y),n&&n()},d)},z=e=>e===document.body||e==null?window:e.scrollHeight>e.clientHeight?e:z(e.parentElement),re=750,ie=(e,o)=>{setTimeout(()=>{const r=z(e),n=e.getBoundingClientRect(),a=r===window?{top:0,bottom:window.innerHeight}:r.getBoundingClientRect();let c=0;const m=r===window?window.scrollY:r.scrollTop;if(n.bottom>a.bottom){let d=n.bottom-a.bottom;n.top+d<a.top&&(d=n.top-a.top),c=m+d}else if(n.top<a.top){const d=n.top-a.top;c=m+d}se(r,c,re,o)},0)},{captureScratchpadTouchStart:ae}=te;function le(e,o,r){return e?o?E("Choose %(numCorrect)s answers:",{numCorrect:r}):E("Choose all answers that apply:"):E("Choose 1 answer:")}const de=function(e){const{apiOptions:o,reviewModeRubric:r,choices:n,editMode:a,multipleSelect:c,labelWrap:m,countChoices:d,numCorrect:T,isLastUsedWidget:h,registerFocusFunction:y}=e,N=x.useRef(),v=x.useRef([]);x.useEffect(()=>{if(o.canScrollPage&&h&&r&&!N.current){const t=n.findIndex(s=>s.checked);if(t>=0){const s=v.current[t],l=V.findDOMNode(s.current);l&&ie(l)}}N.current=r},[o,n,h,r]);function R(t,s){const{multipleSelect:g,choices:l,onChange:M}=e;let p;s.checked&&!g?p=l.map(f=>!1):p=l.map(f=>f.checked);const O=l.map(f=>f.crossedOut);p[t]=s.checked,O[t]=s.crossedOut,M({checked:p,crossedOut:O})}y==null||y(t=>{const s=v.current[t||0],l=V.findDOMNode(s.current);if(l)l.focus();else return!1;return!0});const S=!!r,I=o.isMobile,$=n[0].highlighted,j=n[n.length-1].highlighted,W=L("perseus-widget-radio",!a&&"perseus-rendered-radio",C.css(i.radio,i.responsiveRadioContainer,$&&I&&i.radioContainerFirstHighlighted,j&&I&&i.radioContainerLastHighlighted)),Y=L("instructions",C.css(i.instructions,I&&i.instructionsMobile)),F=le(c,d,T),Q=C.css(i.responsiveFieldset),G=K("fieldset",{className:`perseus-widget-radio-fieldset ${Q}`,children:[b("legend",{className:"perseus-sr-only",children:F}),b("div",{className:Y,"aria-hidden":"true",children:F}),b("ul",{className:W,style:{listStyle:"none"},children:n.map((t,s)=>{let g=oe;const l=x.createRef();v.current[s]=l;const M={apiOptions:o,multipleSelect:c,checked:t.checked,crossedOut:t.crossedOut,previouslyAnswered:t.previouslyAnswered,reviewMode:S,correct:t.correct,rationale:t.rationale,content:t.content,disabled:o.readOnly||t.disabled,showCorrectness:S||!!t.showCorrectness,showRationale:t.hasRationale&&(S||t.showRationale),pos:s,onChange:u=>{a||R(s,u)}};t.isNoneOfTheAbove&&(g=ne,X.extend(M,{showContent:t.revealNoneOfTheAbove}));const p=n[s+1],O=!!p&&p.highlighted,f=u=>C.css(ee.aboveScratchpad,i.item,i.responsiveItem,u&&i.selectedItem,u&&t.highlighted&&i.aboveBackdrop,u&&t.highlighted&&o.isMobile&&i.aboveBackdropMobile,O&&o.isMobile&&i.nextHighlighted);f(!0);let P;S&&r&&(P=r.choices[s].correct?k.CORRECT:k.INCORRECT);const J=L(f(t.checked),k.RADIO.OPTION,t.checked&&k.RADIO.SELECTED,P);let q=null,A=null;return a&&(A=u=>{let w=u.target;for(;w&&w!==q;){if(w.getAttribute("data-is-radio-icon")){R(s,{checked:!t.checked,crossedOut:t.crossedOut});return}w=w.parentNode}}),b("li",{ref:u=>q=u,className:J,onClick:A,onTouchStart:m?ae:null,children:b(g,{...M,ref:l})},s)})})]});return b("div",{className:C.css(i.responsiveContainer),children:G})};de.defaultProps={editMode:!1,multipleSelect:!1};const i=C.StyleSheet.create({instructions:{display:"block",color:Z,fontSize:14,lineHeight:1.25,fontFamily:"inherit",fontStyle:"normal",fontWeight:"bold",marginBottom:16},instructionsMobile:{fontSize:18,[_.smOrSmaller]:{fontSize:16},[_.xl]:{fontSize:20}},radio:{padding:0},responsiveRadioContainer:{borderBottom:`1px solid ${H}`,borderTop:`1px solid ${H}`,width:"auto",[_.smOrSmaller]:{marginLeft:B,marginRight:B}},radioContainerFirstHighlighted:{borderTop:"1px solid rgba(0, 0, 0, 0)"},radioContainerLastHighlighted:{borderBottom:"1px solid rgba(0, 0, 0, 0)"},item:{marginLeft:20},responsiveItem:{marginLeft:0,padding:0,":not(:last-child)":{borderBottom:`1px solid ${H}`}},selectedItem:{background:"white"},aboveBackdrop:{position:"relative",zIndex:1062},aboveBackdropMobile:{boxShadow:"0 0 4px 0 rgba(0, 0, 0, 0.2),0 0 2px 0 rgba(0, 0, 0, 0.1)",":not(:last-child)":{borderBottom:"1px solid rgba(0, 0, 0, 0)"}},nextHighlighted:{":not(:last-child)":{borderBottom:"1px solid rgba(0, 0, 0, 0)"}},responsiveContainer:{overflow:"auto",marginLeft:B,paddingLeft:D},responsiveFieldset:{paddingRight:D,minWidth:"auto"}});try{baseradio.displayName="baseradio",baseradio.__docgenInfo={description:"",displayName:"baseradio",props:{apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!0,type:{name:"Readonly<{ isArticle?: boolean | undefined; onInputError?: ((widgetId: any, value: string, message?: string | null | undefined) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown) | undef..."}},choices:{defaultValue:null,description:"",name:"choices",required:!0,type:{name:"readonly ChoiceType[]"}},deselectEnabled:{defaultValue:null,description:"",name:"deselectEnabled",required:!1,type:{name:"boolean"}},editMode:{defaultValue:{value:"false"},description:"",name:"editMode",required:!1,type:{name:"boolean"}},labelWrap:{defaultValue:null,description:"",name:"labelWrap",required:!0,type:{name:"boolean"}},countChoices:{defaultValue:null,description:"",name:"countChoices",required:!0,type:{name:"boolean | null | undefined"}},numCorrect:{defaultValue:null,description:"",name:"numCorrect",required:!0,type:{name:"number"}},multipleSelect:{defaultValue:{value:"false"},description:"",name:"multipleSelect",required:!1,type:{name:"boolean"}},reviewModeRubric:{defaultValue:null,description:"",name:"reviewModeRubric",required:!1,type:{name:"PerseusRadioWidgetOptions"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValues: { checked: readonly boolean[]; crossedOut: readonly boolean[]; }) => void"}},registerFocusFunction:{defaultValue:null,description:"",name:"registerFocusFunction",required:!1,type:{name:"((arg1: FocusFunction) => void)"}},isLastUsedWidget:{defaultValue:null,description:"",name:"isLastUsedWidget",required:!1,type:{name:"boolean"}}}}}catch{}export{de as B};
