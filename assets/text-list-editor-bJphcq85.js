import{j as h}from"./jsx-runtime-BGVbfQ2Z.js";import{$ as u}from"./jquery-5v7aFUvu.js";import{P as l}from"./index-tvtfaFq4.js";import{r as m}from"./index-qhcEwEpg.js";import{R as r}from"./index-E09jvG0x.js";import{_ as n}from"./index-default-4_ZsnO94.js";const f={};function d(a){if(!f[a]){const t=u("<span>").text(a).appendTo("body");f[a]=t.width()+5,t.remove()}return f[a]}const p=class p extends m.Component{constructor(){super(...arguments),this.state={items:this.props.options.concat("")},this.onChange=(t,o)=>{let e=n.clone(this.state.items);e[t]=o.target.value,t===e.length-1&&(e=e.concat("")),this.setState({items:e}),this.props.onChange(n.compact(e))},this.onKeyDown=(t,o)=>{const e=o.nativeEvent.keyCode;if(e===8&&this.state.items[t]===""){o.preventDefault();const s=n.clone(this.state.items),i=t===0?0:t-1;t===s.length-1&&(t===0||s[i]!=="")?r.findDOMNode(this.refs["input_"+i]).focus():(s.splice(t,1),this.setState({items:s},function(){r.findDOMNode(this.refs["input_"+i]).focus()}))}else if(e===8&&this.state.items[t].length===1&&t===this.state.items.length-2){o.preventDefault();const s=n.clone(this.state.items);s.splice(t,1),this.setState({items:s}),this.props.onChange(n.compact(s))}else if(e===13){o.preventDefault();const s=n.clone(this.state.items),i=t+1;t===s.length-2?r.findDOMNode(this.refs["input_"+i]).focus():(s.splice(i,0,""),this.setState({items:s},function(){r.findDOMNode(this.refs["input_"+i]).focus()}))}}}UNSAFE_componentWillReceiveProps(t){this.setState({items:t.options.concat("")})}render(){const t=["perseus-text-list-editor","perseus-clearfix","layout-"+this.props.layout].join(" "),o=n.map(this.state.items,function(e,s){return h("li",{children:h("input",{ref:"input_"+s,type:"text",value:e,onChange:this.onChange.bind(this,s),onKeyDown:this.onKeyDown.bind(this,s),style:{width:d(e)}})},s)},this);return h("ul",{className:t,children:o})}};p.propTypes={options:l.array,layout:l.string,onChange:l.func.isRequired},p.defaultProps={options:[],layout:"horizontal"};let c=p;try{c.displayName="TextListEditor",c.__docgenInfo={description:"",displayName:"TextListEditor",props:{}}}catch{}export{c as T};
