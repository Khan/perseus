var p=Object.defineProperty;var c=(s,n,e)=>n in s?p(s,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[n]=e;var a=(s,n,e)=>(c(s,typeof n!="symbol"?n+"":n,e),e);import{j as h}from"./jsx-runtime-BT65X5dW.js";import{r as g}from"./index-C6mWTJJr.js";import{g as y}from"./dependencies-BsVPGK1s.js";const t={PENDING:"pending",LOADING:"loading",LOADED:"loaded",FAILED:"failed"};class f extends g.Component{constructor(e){super(e);a(this,"img");a(this,"createLoader",()=>{this.destroyLoader(),this.img=new Image,this.img.onload=this.handleLoad,this.img.onerror=this.handleError,this.img.src=this.props.src});a(this,"destroyLoader",()=>{this.img&&(this.img.onload=null,this.img.onerror=null,this.img=null)});a(this,"handleLoad",e=>{this.destroyLoader(),this.setState({status:t.LOADED}),this.props.onLoad&&this.props.onLoad(e)});a(this,"handleError",e=>{this.destroyLoader(),this.setState({status:t.FAILED}),this.props.onError&&this.props.onError(e)});a(this,"renderImg",()=>{const{src:e,imgProps:r}=this.props;let o,d;r.onClick!=null&&(o=i=>{var u;(i.keyCode===13||i.keyCode===32)&&((u=r.onClick)==null||u.call(r,i))},d=i=>{i.keyCode===32&&i.preventDefault()});const l=y().staticUrl,m=r.onClick!==null?"button":"img";return h.jsx("img",{tabIndex:0,role:m,src:l(e),onKeyUp:o,onKeyDown:d,...r})});this.state={status:e.src?t.LOADING:t.PENDING}}componentDidMount(){this.state.status===t.LOADING&&this.createLoader()}UNSAFE_componentWillReceiveProps(e){this.props.src!==e.src&&this.setState({status:e.src?t.LOADING:t.PENDING})}componentDidUpdate(e,r){this.state.status===t.LOADING&&!this.img&&this.createLoader(),r.status!==this.state.status&&this.props.onUpdate(this.state.status)}componentWillUnmount(){this.destroyLoader()}render(){switch(this.state.status){case t.LOADED:return this.renderImg();case t.FAILED:if(this.props.children)return this.props.children;break;default:if(this.props.preloader)return this.props.preloader()}return null}}f.__docgenInfo={description:`Component to display an image (or other React components) while the desired
image is loading.

Derived from
https://github.com/hzdg/react-imageloader/blob/master/src/index.js
to better suit our environment/build tools. Additionally, this one does
not introduce a wrapper element, which makes styling easier.`,methods:[{name:"createLoader",docblock:null,modifiers:[],params:[],returns:null},{name:"destroyLoader",docblock:null,modifiers:[],params:[],returns:null},{name:"handleLoad",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:{name:"Event",alias:"Event"}}],returns:null},{name:"handleError",docblock:null,modifiers:[],params:[{name:"error",optional:!1,type:{name:"Event",alias:"Event"}}],returns:null},{name:"renderImg",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ImageLoader",props:{children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},imgProps:{required:!0,tsType:{name:"signature",type:"object",raw:`{
    alt: string;
    title?: string;
    ["aria-hidden"]?: boolean;
    tabIndex?: number;
    onClick?: (e: React.SyntheticEvent) => void;
    style?: Dimensions;
}`,signature:{properties:[{key:"alt",value:{name:"string",required:!0}},{key:"title",value:{name:"string",required:!1}},{key:"aria-hidden",value:{name:"boolean",required:!1}},{key:"tabIndex",value:{name:"number",required:!1}},{key:"onClick",value:{name:"signature",type:"function",raw:"(e: React.SyntheticEvent) => void",signature:{arguments:[{type:{name:"ReactSyntheticEvent",raw:"React.SyntheticEvent"},name:"e"}],return:{name:"void"}},required:!1}},{key:"style",value:{name:"signature",type:"object",raw:`{
    width?: number;
    height?: number;
}`,signature:{properties:[{key:"width",value:{name:"number",required:!1}},{key:"height",value:{name:"number",required:!1}}]},required:!1}}]}},description:""},onError:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: Event) => void",signature:{arguments:[{type:{name:"Event"},name:"event"}],return:{name:"void"}}},description:""},onLoad:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: Event) => void",signature:{arguments:[{type:{name:"Event"},name:"event"}],return:{name:"void"}}},description:""},onUpdate:{required:!0,tsType:{name:"signature",type:"function",raw:"(status: (typeof Status)[keyof typeof Status]) => void",signature:{arguments:[{type:{name:"unknown[union]",raw:"(typeof Status)[keyof typeof Status]"},name:"status"}],return:{name:"void"}}},description:""},preloader:{required:!0,tsType:{name:"union",raw:"(() => React.ReactNode) | null | undefined",elements:[{name:"unknown"},{name:"null"},{name:"undefined"}]},description:""},src:{required:!0,tsType:{name:"string"},description:""}}};export{f as I};
