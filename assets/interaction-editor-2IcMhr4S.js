var W=Object.defineProperty;var $=(d,p,s)=>p in d?W(d,p,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[p]=s;var l=(d,p,s)=>$(d,typeof p!="symbol"?p+"":p,s);import{r as m,cn as P,_ as a,ad as x,ai as J,U as w,j as e,bW as U,C as O,ae as X,co as K,o as H,cp as h,cq as Q,bk as Z,V as ee,n as se,l as z,cr as v,cs as te}from"./iframe-BY2pawzX.js";import"./item-version-deo1PzQO.js";import"./article-renderer-CIqqOhu0.js";import"./server-item-renderer-isXmAqTY.js";import"./hints-renderer-CFDgzRBN.js";import{E as b}from"./editor-jsonify-DB4J-XSR.js";import{c as g}from"./components-C_6fDHEh.js";import{f as ne,b as ae,a as re}from"./icon-paths-Cfjy_uoj.js";const{ButtonGroup:ie,InfoTip:le,RangeInput:S}=g,oe={url:null,width:0,height:0};function pe(d,p){return Math.floor((d[1]-d[0])/p)}class C extends m.Component{constructor(s){super(s);l(this,"_isMounted",!1);this.state=this.getInitialState(),this.change=this.change.bind(this),this.changeBackgroundUrl=this.changeBackgroundUrl.bind(this),this.changeGraph=this.changeGraph.bind(this),this.changeGridStep=this.changeGridStep.bind(this),this.changeLabel=this.changeLabel.bind(this),this.changeRange=this.changeRange.bind(this),this.changeRulerLabel=this.changeRulerLabel.bind(this),this.changeRulerTicks=this.changeRulerTicks.bind(this),this.changeSnapStep=this.changeSnapStep.bind(this),this.changeStep=this.changeStep.bind(this)}getInitialState(){return this.stateFromProps(this.props)}componentDidMount(){this._isMounted=!0,this.changeGraph=a.debounce(this.changeGraph,300)}UNSAFE_componentWillReceiveProps(s){(!a.isEqual(this.props.labels,s.labels)||!a.isEqual(this.props.gridStep,s.gridStep)||!a.isEqual(this.props.snapStep,s.snapStep)||!a.isEqual(this.props.step,s.step)||!a.isEqual(this.props.range,s.range)||!a.isEqual(this.props.backgroundImage,s.backgroundImage))&&this.setState(this.stateFromProps(s))}componentWillUnmount(){this._isMounted=!1}stateFromProps(s){return{labelsTextbox:s.labels,gridStepTextbox:s.gridStep,snapStepTextbox:s.snapStep,stepTextbox:s.step,rangeTextbox:s.range,backgroundImage:a.clone(s.backgroundImage)}}change(...s){return x.apply(this,s)}changeRulerLabel(s){this.change({rulerLabel:s.target.value})}changeRulerTicks(s){this.change({rulerTicks:+s.target.value})}changeBackgroundUrl(s){if(s.type==="keypress"&&s.key!=="Enter")return;const t=(r,i,c)=>{const u=a.clone(this.props.backgroundImage);u.url=r,u.width=i,u.height=c,this.setState({backgroundImage:u},this.changeGraph)},n=J.findDOMNode(this.refs["bg-url"]).value;n?w.getImageSize(n,(r,i)=>{this._isMounted&&t(n,r,i)}):t(null,0,0)}renderLabelChoices(s){return a.map(s,function([t,n]){return e.jsx("option",{value:n,children:t},n)})}validRange(s){return a.every(s,function(n){return a.isFinite(n)})?s[0]>=s[1]?"Range must have a higher number on the right":!0:"Range must be a valid number"}validateStepValue(s){const{step:t,range:n,name:r,minTicks:i,maxTicks:c}=s;if(!a.isFinite(t))return r+" must be a valid number";const u=pe(n,t);return u<i?r+" is too large, there must be at least "+i+" ticks.":u>c?r+" is too small, there can be at most "+c+" ticks.":!0}validSnapStep(s,t){return this.validateStepValue({step:s,range:t,name:"Snap step",minTicks:5,maxTicks:60})}validGridStep(s,t){return this.validateStepValue({step:s,range:t,name:"Grid step",minTicks:3,maxTicks:60})}validStep(s,t){return this.validateStepValue({step:s,range:t,name:"Step",minTicks:3,maxTicks:20})}validBackgroundImageSize(s){return s.url?s.width<=450&&s.height<=450?!0:"Image must be smaller than 450px x 450px.":!0}validateGraphSettings(s,t,n,r,i){const c=this;let u;if(!a.every(s,function(j){return u=c.validRange(j),u===!0})||!a.every(t,function(j,k){return u=c.validStep(j,s[k]),u===!0})||!a.every(n,function(j,k){return u=c.validGridStep(j,s[k]),u===!0})||!a.every(r,function(j,k){return u=c.validSnapStep(j,s[k]),u===!0}))return u;const F=this.validBackgroundImageSize(i);return F!==!0?(u=F,u):!0}changeLabel(s,t){const n=t.target.value,r=this.state.labelsTextbox.slice();r[s]=n,this.setState({labelsTextbox:r},this.changeGraph)}changeRange(s,t){const n=this.state.rangeTextbox.slice();n[s]=t;const r=this.state.stepTextbox.slice(),i=this.state.gridStepTextbox.slice(),c=this.state.snapStepTextbox.slice(),u=w.scaleFromExtent(n[s],this.props.box[s]);this.validRange(n[s])===!0&&(r[s]=w.tickStepFromExtent(n[s],this.props.box[s]),i[s]=w.gridStepFromTickStep(r[s],u),c[s]=i[s]/2),this.setState({stepTextbox:r,gridStepTextbox:i,snapStepTextbox:c,rangeTextbox:n},this.changeGraph)}changeStep(s){this.setState({stepTextbox:s},this.changeGraph)}changeSnapStep(s){this.setState({snapStepTextbox:s},this.changeGraph)}changeGridStep(s){this.setState({gridStepTextbox:s,snapStepTextbox:a.map(s,function(t){return t/2})},this.changeGraph)}changeGraph(){const s=this.state.labelsTextbox,t=a.map(this.state.rangeTextbox,function(A){return a.map(A,Number)}),n=a.map(this.state.stepTextbox,Number),r=this.state.gridStepTextbox,i=this.state.snapStepTextbox,c=this.state.backgroundImage,u=this.validateGraphSettings(t,n,r,i,c);u===!0?this.change({valid:!0,labels:s,range:t,step:n,gridStep:r,snapStep:i,backgroundImage:c}):this.change({valid:u})}render(){const s=[U.roundTo(2,w.scaleFromExtent(this.props.range[0],this.props.box[0])),U.roundTo(2,w.scaleFromExtent(this.props.range[1],this.props.box[1]))],{TeX:t}=O();return e.jsxs("div",{children:[a.contains(this.props.editableSettings,"canvas")&&e.jsxs("div",{className:"graph-settings",children:[e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx("label",{htmlFor:"canvas-size",children:"Canvas size (x,y pixels)"}),e.jsx(S,{id:"canvas-size",value:this.props.box,onChange:n=>{this.change({box:n})}})]}),e.jsxs("div",{className:"perseus-widget-row",children:["Scale (px per div):"," ",e.jsx(t,{children:"("+s[0]+", "+s[1]+")"})]})]}),a.contains(this.props.editableSettings,"graph")&&e.jsxs("div",{className:"graph-settings",children:[e.jsxs("div",{className:"perseus-widget-row",children:[e.jsxs("div",{className:"perseus-widget-left-col",children:[e.jsx("label",{htmlFor:"labels-x",children:"x Label"}),e.jsx("input",{id:"labels-x",type:"text",className:"graph-settings-axis-label",ref:"labels-0",onChange:n=>this.changeLabel(0,n),value:this.state.labelsTextbox[0]||""})]}),e.jsxs("div",{className:"perseus-widget-right-col",children:[e.jsx("label",{htmlFor:"labels-y",children:"y Label"}),e.jsx("input",{id:"labels-y",type:"text",className:"graph-settings-axis-label",ref:"labels-1",onChange:n=>this.changeLabel(1,n),value:this.state.labelsTextbox[1]||""})]})]}),e.jsxs("div",{className:"perseus-widget-row",children:[e.jsxs("div",{className:"perseus-widget-left-col",children:[e.jsx("label",{htmlFor:"range-x",children:"x Range"}),e.jsx(S,{id:"range-x",value:this.state.rangeTextbox[0],onChange:n=>this.changeRange(0,n)})]}),e.jsxs("div",{className:"perseus-widget-right-col",children:[e.jsx("label",{htmlFor:"range-y",children:"y Range"}),e.jsx(S,{id:"range-y",value:this.state.rangeTextbox[1],onChange:n=>this.changeRange(1,n)})]})]}),e.jsxs("div",{className:"perseus-widget-row",children:[e.jsxs("div",{className:"perseus-widget-left-col",children:[e.jsx("label",{htmlFor:"tick-step",children:"Tick Step"}),e.jsx(S,{id:"tick-step",value:this.state.stepTextbox,onChange:this.changeStep})]}),e.jsxs("div",{className:"perseus-widget-right-col",children:[e.jsx("label",{htmlFor:"grid-step",children:"Grid Step"}),e.jsx(S,{id:"grid-step",value:this.state.gridStepTextbox,onChange:this.changeGridStep})]})]}),a.contains(this.props.editableSettings,"snap")&&e.jsx("div",{className:"perseus-widget-row",children:e.jsxs("div",{className:"perseus-widget-left-col",children:[e.jsx("label",{htmlFor:"snap-step",children:"Snap Step"}),e.jsx(S,{id:"snap-step",value:this.state.snapStepTextbox,onChange:this.changeSnapStep})]})}),e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx("label",{children:"Markings: "}),e.jsx(ie,{value:this.props.markings,allowEmpty:!1,buttons:[{value:"graph",content:"Graph"},{value:"grid",content:"Grid"},{value:"none",content:"None"}],onChange:this.change("markings")})]}),e.jsx("div",{className:"perseus-widget-left-col",children:e.jsx(X,{label:"Show tooltips",checked:this.props.showTooltips,onChange:n=>{this.change({showTooltips:n})}})})]}),a.contains(this.props.editableSettings,"image")&&e.jsxs("div",{className:"image-settings",children:[e.jsx("div",{children:"Background image:"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bg-url",children:"Url:"}),e.jsx("input",{id:"bg-url",type:"text",className:"graph-settings-background-url",ref:"bg-url",value:this.state.backgroundImage.url||"",onChange:n=>{const r=a.clone(this.props.backgroundImage);r.url=n.target.value,this.setState({backgroundImage:r})},onKeyPress:this.changeBackgroundUrl,onBlur:this.changeBackgroundUrl}),e.jsx(le,{children:e.jsx("p",{children:'Create an image in graphie, or use the "Add image" function to create a background.'})})]})]}),a.contains(this.props.editableSettings,"measure")&&e.jsxs("div",{className:"misc-settings",children:[e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx("div",{className:"perseus-widget-left-col",children:e.jsx(X,{label:"Show ruler",checked:this.props.showRuler,onChange:n=>{this.change({showRuler:n})}})}),e.jsx("div",{className:"perseus-widget-right-col",children:e.jsx(X,{label:"Show protractor",checked:this.props.showProtractor,onChange:n=>{this.change({showProtractor:n})}})})]}),this.props.showRuler&&e.jsxs("div",{children:[e.jsx("div",{children:e.jsxs("label",{children:[" ","Ruler label:"," ",e.jsxs("select",{onChange:this.changeRulerLabel,value:this.props.rulerLabel,children:[e.jsx("option",{value:"",children:"None"}),e.jsx("optgroup",{label:"Metric",children:this.renderLabelChoices([["milimeters","mm"],["centimeters","cm"],["meters","m"],["kilometers","km"]])}),e.jsx("optgroup",{label:"Imperial",children:this.renderLabelChoices([["inches","in"],["feet","ft"],["yards","yd"],["miles","mi"]])})]})]})}),e.jsx("div",{children:e.jsxs("label",{children:[" ","Ruler ticks:"," ",e.jsx("select",{onChange:this.changeRulerTicks,value:this.props.rulerTicks,children:a.map([1,2,4,8,10,16],function(n){return e.jsx("option",{value:n,children:n},n)})})]})})]})]})]})}}l(C,"displayName"),l(C,"defaultProps",{editableSettings:["graph","snap","image","measure"],box:[P.defaultBoxSizeSmall,P.defaultBoxSizeSmall],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],snapStep:[1,1],valid:!0,backgroundImage:oe,markings:"graph",rulerLabel:"",rulerTicks:10,showProtractor:!1,showRuler:!1,showTooltips:!1});C.__docgenInfo={description:"",methods:[{name:"stateFromProps",docblock:null,modifiers:[],params:[{name:"props",optional:!1,type:null}],returns:null},{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"changeRulerLabel",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"changeRulerTicks",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"changeBackgroundUrl",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"renderLabelChoices",docblock:null,modifiers:[],params:[{name:"choices",optional:!1,type:null}],returns:null},{name:"validRange",docblock:null,modifiers:[],params:[{name:"range",optional:!1,type:null}],returns:null},{name:"validateStepValue",docblock:null,modifiers:[],params:[{name:"settings",optional:!1,type:null}],returns:null},{name:"validSnapStep",docblock:null,modifiers:[],params:[{name:"step",optional:!1,type:null},{name:"range",optional:!1,type:null}],returns:null},{name:"validGridStep",docblock:null,modifiers:[],params:[{name:"step",optional:!1,type:null},{name:"range",optional:!1,type:null}],returns:null},{name:"validStep",docblock:null,modifiers:[],params:[{name:"step",optional:!1,type:null},{name:"range",optional:!1,type:null}],returns:null},{name:"validBackgroundImageSize",docblock:null,modifiers:[],params:[{name:"image",optional:!1,type:null}],returns:null},{name:"validateGraphSettings",docblock:null,modifiers:[],params:[{name:"range",optional:!1,type:null},{name:"step",optional:!1,type:null},{name:"gridStep",optional:!1,type:null},{name:"snapStep",optional:!1,type:null},{name:"image",optional:!1,type:null}],returns:null},{name:"changeLabel",docblock:null,modifiers:[],params:[{name:"i",optional:!1,type:null},{name:"e",optional:!1,type:null}],returns:null},{name:"changeRange",docblock:null,modifiers:[],params:[{name:"i",optional:!1,type:null},{name:"values",optional:!1,type:null}],returns:null},{name:"changeStep",docblock:null,modifiers:[],params:[{name:"step",optional:!1,type:null}],returns:null},{name:"changeSnapStep",docblock:null,modifiers:[],params:[{name:"snapStep",optional:!1,type:null}],returns:null},{name:"changeGridStep",docblock:null,modifiers:[],params:[{name:"gridStep",optional:!1,type:null}],returns:null},{name:"changeGraph",docblock:null,modifiers:[],params:[],returns:null}],props:{editableSettings:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"union",raw:'"canvas" | "graph" | "snap" | "image" | "measure"',elements:[{name:"literal",value:'"canvas"'},{name:"literal",value:'"graph"'},{name:"literal",value:'"snap"'},{name:"literal",value:'"image"'},{name:"literal",value:'"measure"'}]}],raw:`ReadonlyArray<
    "canvas" | "graph" | "snap" | "image" | "measure"
>`},description:"",defaultValue:{value:'["graph", "snap", "image", "measure"]',computed:!1}},box:{required:!1,tsType:{name:"unknown"},description:"",defaultValue:{value:`[
    interactiveSizes.defaultBoxSizeSmall,
    interactiveSizes.defaultBoxSizeSmall,
]`,computed:!1}},labels:{required:!1,tsType:{name:"unknown"},description:"",defaultValue:{value:'["x", "y"]',computed:!1}},range:{required:!1,tsType:{name:"tuple",raw:"[Coord, Coord]",elements:[{name:"tuple",raw:"[x: number, y: number]",elements:[{name:"unknown"},{name:"unknown"}]},{name:"tuple",raw:"[x: number, y: number]",elements:[{name:"unknown"},{name:"unknown"}]}]},description:"",defaultValue:{value:`[
    [-10, 10],
    [-10, 10],
]`,computed:!1}},step:{required:!1,tsType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:"",defaultValue:{value:"[1, 1]",computed:!1}},gridStep:{required:!1,tsType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:"",defaultValue:{value:"[1, 1]",computed:!1}},snapStep:{required:!1,tsType:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}]},description:"",defaultValue:{value:"[1, 1]",computed:!1}},valid:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},backgroundImage:{required:!1,tsType:{name:"any"},description:"",defaultValue:{value:`{
    url: null,
    width: 0,
    height: 0,
}`,computed:!1}},markings:{required:!1,tsType:{name:"union",raw:'"axes" | "graph" | "grid" | "none"',elements:[{name:"literal",value:'"axes"'},{name:"literal",value:'"graph"'},{name:"literal",value:'"grid"'},{name:"literal",value:'"none"'}]},description:"",defaultValue:{value:'"graph"',computed:!1}},showProtractor:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},showRuler:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},showTooltips:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},rulerLabel:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},rulerTicks:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10",computed:!1}}}};const{InlineIcon:T}=g;class f extends m.Component{constructor(s){super(s);l(this,"toggle",s=>{s.preventDefault(),this.setState({show:!this.state.show})});this.state={show:s.initiallyVisible}}render(){return e.jsxs("div",{className:"perseus-interaction-element",children:[e.jsxs("a",{href:"#",className:"perseus-interaction-element-title "+(this.state.show?"open":"closed"),onClick:this.toggle,children:[this.state.show?e.jsx(T,{...K}):e.jsx(T,{...ne}),this.props.title]}),e.jsxs("div",{className:"perseus-interaction-element-content "+(this.state.show?"enter":"leave"),children:[this.props.children,(this.props.onUp!=null||this.props.onDown!=null||this.props.onDelete!=null)&&e.jsxs("div",{className:"edit-controls",children:[this.props.onUp!=null&&e.jsx("button",{onClick:this.props.onUp,children:e.jsx(T,{...ae})}),this.props.onDown!=null&&e.jsx("button",{onClick:this.props.onDown,children:e.jsx(T,{...re})}),this.props.onDelete!=null&&e.jsx("button",{onClick:this.props.onDelete,children:e.jsx(T,{...H})})]})]})]})}}l(f,"defaultProps",{initiallyVisible:!1,title:"More"});f.__docgenInfo={description:"",methods:[{name:"toggle",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"ReactSyntheticEvent",raw:"React.SyntheticEvent",alias:"React.SyntheticEvent"}}],returns:null}],displayName:"ElementContainer",props:{children:{required:!0,tsType:{name:"union",raw:"React.ReactElement<any> | ReadonlyArray<React.ReactElement<any>>",elements:[{name:"ReactReactElement",raw:"React.ReactElement<any>",elements:[{name:"any"}]},{name:"ReadonlyArray",elements:[{name:"ReactReactElement",raw:"React.ReactElement<any>",elements:[{name:"any"}]}],raw:"ReadonlyArray<React.ReactElement<any>>"}]},description:""},initiallyVisible:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onDelete:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void | null | undefined",signature:{arguments:[],return:{name:"union",raw:"void | null | undefined",elements:[{name:"void"},{name:"null"},{name:"undefined"}]}}},description:""},onDown:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void | null | undefined",signature:{arguments:[],return:{name:"union",raw:"void | null | undefined",elements:[{name:"void"},{name:"null"},{name:"undefined"}]}}},description:""},onUp:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void | null | undefined",signature:{arguments:[],return:{name:"union",raw:"void | null | undefined",elements:[{name:"void"},{name:"null"},{name:"undefined"}]}}},description:""},title:{required:!1,tsType:{name:"union",raw:"string | React.ReactElement<any>",elements:[{name:"string"},{name:"ReactReactElement",raw:"React.ReactElement<any>",elements:[{name:"any"}]}]},description:"",defaultValue:{value:'"More"',computed:!1}}}};const{ButtonGroup:ue}=g,de=[h.BLACK,h.BLUE,h.GREEN,h.PINK,h.PURPLE,h.RED,h.GRAY],ce=[h.LIGHT_BLUE,h.LIGHT_ORANGE,h.LIGHT_PINK,h.LIGHT_GREEN,h.LIGHT_PURPLE,h.LIGHT_RED,"#fff"];class y extends m.Component{render(){const p=this.props.lightColors?ce:de;return e.jsx(ue,{value:this.props.value,allowEmpty:!1,buttons:a.map(p,s=>({value:s,content:e.jsxs("span",{children:[e.jsx("span",{className:"colorpicker-circle",style:{background:s}})," "]})})),onChange:this.props.onChange})}}l(y,"defaultProps",{value:h.BLACK,lightColors:!1});y.__docgenInfo={description:"",methods:[],displayName:"ColorPicker",props:{lightColors:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},value:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"black"',computed:!1}}}};const{ButtonGroup:he}=g;class N extends m.Component{render(){return e.jsx(he,{value:this.props.value,allowEmpty:!1,buttons:[{value:"",content:e.jsx("span",{children:"—"})},{value:"-",content:e.jsx("span",{children:"–––"})},{value:"- ",content:e.jsx("span",{children:"–  –"})},{value:".",content:e.jsx("span",{children:"····"})},{value:". ",content:e.jsx("span",{children:"· · ·"})}],onChange:this.props.onChange})}}l(N,"defaultProps",{value:""});N.__docgenInfo={description:"",methods:[],displayName:"DashPicker",props:{value:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}}}};function o(d){const p=m.useRef(null),s=m.useRef(),{locale:t,strings:n}=Q();return m.useEffect(()=>{p.current&&!s.current&&(s.current=Z(p.current,t,n,r=>({...r,handlers:{edit:i=>{let c=i.latex();c=c.replace(/<>/g,"\\ne"),d.value!==c&&d.onChange(c)},upOutOf:i=>{i.typedText("^")}}})))}),e.jsx(ee,{style:me.outerWrapper,children:e.jsx("span",{ref:p,className:"perseus-math-input mq-editable-field mq-math-mode"})})}const me=se.StyleSheet.create({outerWrapper:{display:"inline-block",borderStyle:"solid",borderWidth:1,borderColor:z.offBlack50,borderRadius:3,background:z.white}});o.__docgenInfo={description:`A simple Mathquill MathField input for the InteractionEditor.
Unlike our other uses of Mathquill, we're not using a keypad here;
it's just the input itself for use writing TeX.`,methods:[],displayName:"MathquillInput",props:{value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}};const{NumberInput:ge}=g,{getDependencies:fe}=v;class q extends m.Component{constructor(){super(...arguments);l(this,"change",(...s)=>x.apply(this,s));l(this,"serialize",()=>b.serialize.call(this))}render(){const{TeX:s}=fe();return e.jsxs("div",{className:"graph-settings",children:[e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(s,{children:this.props.funcName+"(x)="})," ",e.jsx(o,{value:this.props.value,onChange:this.change("value")})]}),e.jsxs("div",{className:"perseus-widget-row",children:["Range: ",e.jsx(s,{children:"\\Large("}),e.jsx(o,{value:this.props.rangeMin,onChange:this.change("rangeMin")}),e.jsx(s,{children:","})," ",e.jsx(o,{value:this.props.rangeMax,onChange:this.change("rangeMax")}),e.jsx(s,{children:"\\Large)"})]}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(y,{value:this.props.color,onChange:this.change("color")})}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(N,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})}),e.jsx("div",{className:"perseus-widget-row",children:e.jsxs("div",{className:"perseus-widget-left-col",children:["Width:"," ",e.jsx(ge,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")})]})})]})}}l(q,"defaultProps",{value:"x",rangeMin:"-10",rangeMax:"10",color:h.BLUE,strokeDasharray:"",strokeWidth:2});q.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"FunctionEditor",props:{value:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"x"',computed:!1}},rangeMin:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-10"',computed:!1}},rangeMax:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"10"',computed:!1}},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"color.blue",computed:!0}},strokeDasharray:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},strokeWidth:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}}}};const{TextInput:xe}=g,{getDependencies:ve}=v;class R extends m.Component{constructor(){super(...arguments);l(this,"change",(...s)=>x.apply(this,s));l(this,"serialize",()=>b.serialize.call(this))}render(){const{TeX:s}=ve();return e.jsxs("div",{className:"graph-settings",children:[e.jsx("div",{className:"perseus-widget-row",children:e.jsx(xe,{value:this.props.label,onChange:this.change("label"),style:{width:"100%"}})}),e.jsxs("div",{className:"perseus-widget-row",children:["Location: ",e.jsx(s,{children:"\\Large("}),e.jsx(o,{value:this.props.coordX,onChange:this.change("coordX")}),e.jsx(s,{children:","})," ",e.jsx(o,{value:this.props.coordY,onChange:this.change("coordY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(y,{value:this.props.color,onChange:this.change("color")})})]})}}l(R,"defaultProps",{coordX:"0",coordY:"0",color:h.BLACK,label:"\\phi"});R.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"LabelEditor",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"black"',computed:!1}},coordX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},coordY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},label:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"\\\\phi"',computed:!1}}}};const{ButtonGroup:be}=g;class G extends m.Component{render(){return e.jsx(be,{value:this.props.value,allowEmpty:!1,buttons:[{value:"",content:e.jsx("span",{children:"—"})},{value:"->",content:e.jsx("span",{children:"→"})}],onChange:this.props.onChange})}}l(G,"defaultProps",{value:""});G.__docgenInfo={description:"",methods:[],displayName:"ArrowPicker",props:{value:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}}}};const{NumberInput:ye}=g,{getDependencies:je}=v;class _ extends m.Component{constructor(){super(...arguments);l(this,"change",(...s)=>x.apply(this,s));l(this,"serialize",()=>b.serialize.call(this))}render(){const{TeX:s}=je();return e.jsxs("div",{className:"graph-settings",children:[e.jsxs("div",{className:"perseus-widget-row",children:["Start: ",e.jsx(s,{children:"\\Large("}),e.jsx(o,{value:this.props.startX,onChange:this.change("startX")}),e.jsx(s,{children:","})," ",e.jsx(o,{value:this.props.startY,onChange:this.change("startY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsxs("div",{className:"perseus-widget-row",children:["End: ",e.jsx(s,{children:"\\Large("}),e.jsx(o,{value:this.props.endX,onChange:this.change("endX")}),e.jsx(s,{children:","})," ",e.jsx(o,{value:this.props.endY,onChange:this.change("endY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(y,{value:this.props.color,onChange:this.change("color")})}),e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(N,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")}),"   ",e.jsx(G,{value:this.props.arrows,onChange:this.change("arrows")})]}),e.jsx("div",{className:"perseus-widget-row",children:e.jsxs("div",{className:"perseus-widget-left-col",children:["Width:"," ",e.jsx(ye,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")})]})})]})}}l(_,"defaultProps",{startX:"-5",startY:"5",endX:"5",endY:"5",color:h.BLACK,strokeDasharray:"",arrows:"",strokeWidth:2});_.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"LineEditor",props:{startX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-5"',computed:!1}},startY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},endX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},endY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"black"',computed:!1}},strokeDasharray:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},arrows:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},strokeWidth:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}}}};const{ButtonGroup:we,NumberInput:Se}=g;class I extends m.Component{constructor(){super(...arguments);l(this,"change",s=>x.call(this,s))}render(){const{TeX:s}=O();return e.jsxs("div",{children:[e.jsxs("div",{className:"perseus-widget-row",children:["Constraint:"," ",e.jsx(we,{value:this.props.constraint,allowEmpty:!1,buttons:[{value:"none",content:"None"},{value:"snap",content:"Snap"},{value:"x",content:"x="},{value:"y",content:"y="}],onChange:this.change("constraint")})]}),this.props.constraint==="snap"&&e.jsxs("div",{className:"perseus-widget-row",children:["Snap:"," ",e.jsx(Se,{value:this.props.snap,placeholder:0,onChange:this.change("snap")})]}),this.props.constraint==="x"&&e.jsx("div",{className:"graph-settings",children:e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(s,{children:"x="})," ",e.jsx(o,{value:this.props.constraintFn,onChange:this.change("constraintFn")})]})}),this.props.constraint==="y"&&e.jsx("div",{className:"graph-settings",children:e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(s,{children:"y="})," ",e.jsx(o,{value:this.props.constraintFn,onChange:this.change("constraintFn")})]})}),"Ensure these are set so nothing can be dragged off the canvas:",e.jsx("div",{className:"perseus-widget-row",children:e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(s,{children:"x \\in \\Large["})," ",e.jsx(o,{value:this.props.constraintXMin,onChange:this.change("constraintXMin")}),e.jsx(s,{children:", "})," ",e.jsx(o,{value:this.props.constraintXMax,onChange:this.change("constraintXMax")})," ",e.jsx(s,{children:"\\Large]"})]})}),e.jsx("div",{className:"perseus-widget-row",children:e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(s,{children:"y \\in \\Large["})," ",e.jsx(o,{value:this.props.constraintYMin,onChange:this.change("constraintYMin")}),e.jsx(s,{children:", "})," ",e.jsx(o,{value:this.props.constraintYMax,onChange:this.change("constraintYMax")})," ",e.jsx(s,{children:"\\Large]"})]})})]})}}l(I,"defaultProps",{constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"});I.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"propName",optional:!1,type:{name:"string"}}],returns:{type:{name:"unknown"}}}],displayName:"ConstraintEditor",props:{constraint:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"none"',computed:!1}},constraintFn:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},constraintXMax:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"10"',computed:!1}},constraintXMin:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-10"',computed:!1}},constraintYMax:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"10"',computed:!1}},constraintYMin:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-10"',computed:!1}},snap:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0.5",computed:!1}}}};const{NumberInput:B}=g,{getDependencies:ke}=v;class E extends m.Component{constructor(){super(...arguments);l(this,"change",(...s)=>x.apply(this,s));l(this,"serialize",()=>b.serialize.call(this))}render(){const{TeX:s}=ke();return e.jsxs("div",{className:"graph-settings",children:["Initial position:",e.jsxs("div",{className:"perseus-widget-row",children:["Start: ",e.jsx(s,{children:"\\Large("}),e.jsx(o,{value:this.props.startX,onChange:this.change("startX")}),e.jsx(s,{children:","})," ",e.jsx(o,{value:this.props.startY,onChange:this.change("startY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsxs("div",{className:"perseus-widget-row",children:["End: ",e.jsx(s,{children:"\\Large("}),e.jsx(o,{value:this.props.endX,onChange:this.change("endX")}),e.jsx(s,{children:","})," ",e.jsx(o,{value:this.props.endY,onChange:this.change("endY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsxs("div",{className:"perseus-widget-row",children:["Start updates ",e.jsx(s,{children:"(x_n, y_n)"})," for ",e.jsx(s,{children:"n ="}),e.jsx(B,{value:this.props.startSubscript,placeholder:0,onChange:this.change("startSubscript")})]}),e.jsxs("div",{className:"perseus-widget-row",children:["End updates ",e.jsx(s,{children:"(x_m, y_m)"})," for ",e.jsx(s,{children:"m ="}),e.jsx(B,{value:this.props.endSubscript,placeholder:0,onChange:this.change("endSubscript")})]}),e.jsx("div",{className:"perseus-widget-row",children:"All constraints are applied to the start point."}),e.jsx(I,{...this.props})]})}}l(E,"defaultProps",{startX:"-5",startY:"5",endX:"5",endY:"5",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"});E.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MovableLineEditor",props:{startX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-5"',computed:!1}},startY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},endX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},endY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},constraint:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"none"',computed:!1}},snap:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0.5",computed:!1}},constraintFn:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},startSubscript:{required:!0,tsType:{name:"number"},description:""},endSubscript:{required:!0,tsType:{name:"number"},description:""},constraintXMin:{defaultValue:{value:'"-10"',computed:!1},required:!1},constraintXMax:{defaultValue:{value:'"10"',computed:!1},required:!1},constraintYMin:{defaultValue:{value:'"-10"',computed:!1},required:!1},constraintYMax:{defaultValue:{value:'"10"',computed:!1},required:!1}}};const{NumberInput:Te}=g,{getDependencies:Ne}=v;class V extends m.Component{constructor(){super(...arguments);l(this,"change",(...s)=>x.apply(this,s));l(this,"serialize",()=>b.serialize.call(this))}render(){const{TeX:s}=Ne();return e.jsxs("div",{className:"graph-settings",children:[e.jsxs("div",{className:"perseus-widget-row",children:["Start: ",e.jsx(s,{children:"\\Large("}),e.jsx(o,{value:this.props.startX,onChange:this.change("startX")}),e.jsx(s,{children:","})," ",e.jsx(o,{value:this.props.startY,onChange:this.change("startY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsxs("div",{className:"perseus-widget-row",children:["Update ",e.jsx(s,{children:"(x_n, y_n)"})," for ",e.jsx(s,{children:"n ="})," ",e.jsx(Te,{value:this.props.varSubscript,placeholder:0,onChange:this.change("varSubscript")})]}),e.jsx(I,{...this.props})]})}}l(V,"defaultProps",{startX:"0",startY:"0",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"});V.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MovablePointEditor",props:{startX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},startY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},constraint:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"none"',computed:!1}},snap:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0.5",computed:!1}},constraintFn:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},varSubscript:{required:!0,tsType:{name:"number"},description:""},constraintXMin:{defaultValue:{value:'"-10"',computed:!1},required:!1},constraintXMax:{defaultValue:{value:'"10"',computed:!1},required:!1},constraintYMin:{defaultValue:{value:'"-10"',computed:!1},required:!1},constraintYMax:{defaultValue:{value:'"10"',computed:!1},required:!1}}};const{NumberInput:Ce}=g,{getDependencies:qe}=v;class M extends m.Component{constructor(){super(...arguments);l(this,"change",(...s)=>x.apply(this,s));l(this,"serialize",()=>b.serialize.call(this))}render(){const{TeX:s}=qe();return e.jsxs("div",{className:"graph-settings",children:[e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(s,{children:"X(t) ="})," ",e.jsx(o,{value:this.props.x,onChange:this.change("x")})]}),e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(s,{children:"Y(t) ="})," ",e.jsx(o,{value:this.props.y,onChange:this.change("y")})]}),e.jsxs("div",{className:"perseus-widget-row",children:["Range: ",e.jsx(s,{children:"\\Large("}),e.jsx(o,{value:this.props.rangeMin,onChange:this.change("rangeMin")}),e.jsx(s,{children:","})," ",e.jsx(o,{value:this.props.rangeMax,onChange:this.change("rangeMax")}),e.jsx(s,{children:"\\Large)"})]}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(y,{value:this.props.color,onChange:this.change("color")})}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(N,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})}),e.jsx("div",{className:"perseus-widget-row",children:e.jsxs("div",{className:"perseus-widget-left-col",children:["Width:"," ",e.jsx(Ce,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")})]})})]})}}l(M,"defaultProps",{x:"cos(t)",y:"sin(t)",rangeMin:"0",rangeMax:"2\\pi",color:h.BLUE,strokeDasharray:"",strokeWidth:2});M.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ParametricEditor",props:{x:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"cos(t)"',computed:!1}},y:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"sin(t)"',computed:!1}},rangeMin:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},rangeMax:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"2\\\\pi"',computed:!1}},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"color.blue",computed:!0}},strokeDasharray:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},strokeWidth:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}}}};const{getDependencies:Re}=v;class L extends m.Component{constructor(){super(...arguments);l(this,"change",(...s)=>x.apply(this,s));l(this,"serialize",()=>b.serialize.call(this))}render(){const{TeX:s}=Re();return e.jsxs("div",{className:"graph-settings",children:[e.jsxs("div",{className:"perseus-widget-row",children:["Coordinate: ",e.jsx(s,{children:"\\Large("}),e.jsx(o,{value:this.props.coordX,onChange:this.change("coordX")}),e.jsx(s,{children:","})," ",e.jsx(o,{value:this.props.coordY,onChange:this.change("coordY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(y,{value:this.props.color,onChange:this.change("color")})})]})}}l(L,"defaultProps",{coordX:"0",coordY:"0",color:h.BLACK});L.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PointEditor",props:{coordX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},coordY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"black"',computed:!1}}}};const{getDependencies:_e}=v;class D extends m.Component{constructor(){super(...arguments);l(this,"change",(...s)=>x.apply(this,s));l(this,"serialize",()=>b.serialize.call(this))}render(){const{TeX:s}=_e();return e.jsxs("div",{className:"graph-settings",children:[e.jsxs("div",{className:"perseus-widget-row",children:["Bottom left: ",e.jsx(s,{children:"\\Large("}),e.jsx(o,{value:this.props.coordX,onChange:this.change("coordX")}),e.jsx(s,{children:","})," ",e.jsx(o,{value:this.props.coordY,onChange:this.change("coordY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsxs("div",{className:"perseus-widget-row",children:["Width:"," ",e.jsx(o,{value:this.props.width,onChange:this.change("width")})]}),e.jsxs("div",{className:"perseus-widget-row",children:["Height:"," ",e.jsx(o,{value:this.props.height,onChange:this.change("height")})]}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(y,{value:this.props.color,lightColors:!0,onChange:this.change("color")})}),e.jsx("div",{className:"perseus-widget-row",children:"You want a border? Sorry, draw your own."})]})}}l(D,"defaultProps",{coordX:"-5",coordY:"5",width:"2",height:"3",color:h.LIGHT_BLUE});D.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"RectangleEditor",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#9AB8ED"',computed:!1}},coordX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-5"',computed:!1}},coordY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},height:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"3"',computed:!1}},width:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"2"',computed:!1}}}};const{getDependencies:Ee}=v,{unescapeMathMode:Ve}=w;class Y extends m.Component{constructor(){super(...arguments);l(this,"state",{usedVarSubscripts:this._getAllVarSubscripts(this.props.elements),usedFunctionNames:this._getAllFunctionNames(this.props.elements)});l(this,"_updateGraphProps",s=>{this.change({graph:a.extend(a.omit(s,"step"),{tickStep:s.step})})});l(this,"_addNewElement",s=>{const t=s.target.value;if(t==="")return;s.target.value="";const n={type:t,key:t+"-"+(Math.random()*16777215<<0).toString(16),options:t==="point"?a.clone(L.defaultProps):t==="line"?a.clone(_.defaultProps):t==="movable-point"?a.clone(V.defaultProps):t==="movable-line"?a.clone(E.defaultProps):t==="function"?a.clone(q.defaultProps):t==="parametric"?a.clone(M.defaultProps):t==="label"?a.clone(R.defaultProps):t==="rectangle"?a.clone(D.defaultProps):{}};let r;if(t==="movable-point")r=a.max([a.max(this.state.usedVarSubscripts),-1])+1,n.options.varSubscript=r;else if(t==="movable-line")r=a.max([a.max(this.state.usedVarSubscripts),-1])+1,n.options.startSubscript=r,n.options.endSubscript=r+1;else if(t==="function"){const i=String.fromCharCode(a.max([a.max(a.map(this.state.usedFunctionNames,function(c){return c.charCodeAt(0)})),101])+1);n.options.funcName=i}this.change({elements:this.props.elements.concat(n)})});l(this,"_deleteElement",s=>{const t=this.props.elements[s];this.change({elements:a.without(this.props.elements,t)})});l(this,"_moveElementUp",s=>{const t=this.props.elements[s],n=a.without(this.props.elements,t);n.splice(s-1,0,t),this.change({elements:n})});l(this,"_moveElementDown",s=>{const t=this.props.elements[s],n=a.without(this.props.elements,t);n.splice(s+1,0,t),this.change({elements:n})});l(this,"change",(...s)=>x.apply(this,s));l(this,"serialize",()=>b.serialize.call(this))}UNSAFE_componentWillReceiveProps(s){this.setState({usedVarSubscripts:this._getAllVarSubscripts(s.elements),usedFunctionNames:this._getAllFunctionNames(s.elements)})}_getAllVarSubscripts(s){return a.map(a.where(s,{type:"movable-point"}),t=>t.options.varSubscript).concat(a.map(a.where(s,{type:"movable-line"}),t=>t.options.startSubscript)).concat(a.map(a.where(s,{type:"movable-line"}),t=>t.options.endSubscript))}_getAllFunctionNames(s){return a.map(a.where(s,{type:"function"}),t=>t.options.funcName)}render(){const{TeX:s}=Ee();return e.jsxs("div",{className:"perseus-widget-interaction-editor",children:[e.jsxs(f,{title:"Grid settings",children:[e.jsx(C,{editableSettings:["canvas","graph"],box:this.props.graph.box,labels:this.props.graph.labels,range:this.props.graph.range,step:this.props.graph.tickStep,gridStep:this.props.graph.gridStep,markings:this.props.graph.markings,onChange:this._updateGraphProps}),e.jsx(e.Fragment,{children:this.props.graph.valid!==!0&&e.jsx("div",{children:this.props.graph.valid})})]}),a.map(this.props.elements,function(t,n){if(t.type==="movable-point")return e.jsx(f,{title:e.jsxs("span",{children:["Movable point"," ",e.jsx(s,{children:"(x_{"+t.options.varSubscript+"}, y_{"+t.options.varSubscript+"})"})]}),onUp:n===0?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement.bind(this,n),children:e.jsx(V,{...t.options,onChange:r=>{const i=JSON.parse(JSON.stringify(this.props.elements));a.extend(i[n].options,r),this.change({elements:i})}})},t.key);if(t.type==="movable-line")return e.jsx(f,{title:e.jsxs("span",{children:["Movable line"," ",e.jsx(s,{children:"(x_{"+t.options.startSubscript+"}, y_{"+t.options.startSubscript+"})"})," ","to"," ",e.jsx(s,{children:"(x_{"+t.options.endSubscript+"}, y_{"+t.options.endSubscript+"})"})]}),onUp:n===0?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement.bind(this,n),children:e.jsx(E,{...t.options,onChange:r=>{const i=JSON.parse(JSON.stringify(this.props.elements));a.extend(i[n].options,r),this.change({elements:i})}})},t.key);if(t.type==="point")return e.jsx(f,{title:e.jsxs("span",{children:["Point"," ",e.jsx(s,{children:"("+t.options.coordX+", "+t.options.coordY+")"})]}),onUp:n===0?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement.bind(this,n),children:e.jsx(L,{...t.options,onChange:r=>{const i=JSON.parse(JSON.stringify(this.props.elements));a.extend(i[n].options,r),this.change({elements:i})}})},t.key);if(t.type==="line")return e.jsx(f,{title:e.jsxs("span",{children:["Line"," ",e.jsx(s,{children:"("+t.options.startX+", "+t.options.startY+")"})," ","to"," ",e.jsx(s,{children:"("+t.options.endX+", "+t.options.endY+")"})]}),onUp:n===0?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement.bind(this,n),children:e.jsx(_,{...t.options,onChange:r=>{const i=JSON.parse(JSON.stringify(this.props.elements));a.extend(i[n].options,r),this.change({elements:i})}})},t.key);if(t.type==="function")return e.jsx(f,{title:e.jsxs("span",{children:["Function"," ",e.jsx(s,{children:t.options.funcName+"(x) = "+t.options.value})]}),onUp:n===0?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement,children:e.jsx(q,{...t.options,onChange:r=>{const i=JSON.parse(JSON.stringify(this.props.elements));a.extend(i[n].options,r),this.change({elements:i})}})},t.key);if(t.type==="parametric")return e.jsx(f,{title:e.jsx("span",{children:"Parametric"}),onUp:n===0?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement,children:e.jsx(M,{...t.options,onChange:r=>{const i=JSON.parse(JSON.stringify(this.props.elements));a.extend(i[n].options,r),this.change({elements:i})}})},t.key);if(t.type==="label")return e.jsx(f,{title:e.jsxs("span",{children:["Label"," ",e.jsx(s,{children:Ve(t.options.label)})," "]}),onUp:n===0?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement,children:e.jsx(R,{...t.options,onChange:r=>{const i=JSON.parse(JSON.stringify(this.props.elements));a.extend(i[n].options,r),this.change({elements:i})}})},t.key);if(t.type==="rectangle")return e.jsx(f,{title:e.jsxs("span",{children:["Rectangle"," ",e.jsx(s,{children:"("+t.options.coordX+", "+t.options.coordY+")"})," — ",e.jsx(s,{children:t.options.width+" \\times "+t.options.height})]}),onUp:n===0?null:this._moveElementUp.bind(this,n),onDown:n===this.props.elements.length-1?null:this._moveElementDown.bind(this,n),onDelete:this._deleteElement,children:e.jsx(D,{...t.options,onChange:r=>{const i=JSON.parse(JSON.stringify(this.props.elements));a.extend(i[n].options,r),this.change({elements:i})}})},t.key)},this),e.jsx("div",{className:"perseus-widget-interaction-editor-select-element",children:e.jsxs("select",{onChange:this._addNewElement,children:[e.jsxs("option",{value:"",children:["Add an element","…"]}),e.jsx("option",{disabled:!0,children:"--"}),e.jsx("option",{value:"point",children:"Point"}),e.jsx("option",{value:"line",children:"Line segment"}),e.jsx("option",{value:"function",children:"Function plot"}),e.jsx("option",{value:"parametric",children:"Parametric plot"}),e.jsx("option",{value:"label",children:"Label"}),e.jsx("option",{value:"rectangle",children:"Rectangle"}),e.jsx("option",{value:"movable-point",children:"★ Movable point"}),e.jsx("option",{value:"movable-line",children:"★ Movable line segment"})]})})]})}}l(Y,"widgetName","interaction"),l(Y,"defaultProps",te.defaultWidgetOptions);Y.__docgenInfo={description:"",methods:[{name:"_getAllVarSubscripts",docblock:null,modifiers:[],params:[{name:"elements",optional:!1,type:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>",alias:"ReadonlyArray"}}],returns:{type:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>"}}},{name:"_getAllFunctionNames",docblock:null,modifiers:[],params:[{name:"elements",optional:!1,type:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>",alias:"ReadonlyArray"}}],returns:{type:{name:"ReadonlyArray",elements:[{name:"string"}],raw:"ReadonlyArray<string>"}}},{name:"_updateGraphProps",docblock:null,modifiers:[],params:[{name:"newProps",optional:!1,type:null}],returns:null},{name:"_addNewElement",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"_deleteElement",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"_moveElementUp",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"_moveElementDown",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"InteractionEditor",props:{elements:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>"},description:"",defaultValue:{value:"[]",computed:!1}},graph:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    box: ReadonlyArray<number>;
    labels: ReadonlyArray<string>;
    range: Coords;
    tickStep: [number, number];
    gridStep: [number, number];
    markings: MarkingsType;
    valid?: boolean;
}`,signature:{properties:[{key:"box",value:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>",required:!0}},{key:"labels",value:{name:"ReadonlyArray",elements:[{name:"string"}],raw:"ReadonlyArray<string>",required:!0}},{key:"range",value:{name:"tuple",raw:"[Coord, Coord]",elements:[{name:"tuple",raw:"[x: number, y: number]",elements:[{name:"unknown"},{name:"unknown"}]},{name:"tuple",raw:"[x: number, y: number]",elements:[{name:"unknown"},{name:"unknown"}]}],required:!0}},{key:"tickStep",value:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}],required:!0}},{key:"gridStep",value:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}],required:!0}},{key:"markings",value:{name:"union",raw:'"axes" | "graph" | "grid" | "none"',elements:[{name:"literal",value:'"axes"'},{name:"literal",value:'"graph"'},{name:"literal",value:'"grid"'},{name:"literal",value:'"none"'}],required:!0}},{key:"valid",value:{name:"boolean",required:!1}}]}},description:"",defaultValue:{value:`{
    box: [400, 400],
    labels: ["x", "y"],
    range: [
        [-10, 10],
        [-10, 10],
    ],
    tickStep: [1, 1],
    gridStep: [1, 1],
    markings: "graph",
}`,computed:!1}}}};export{C as G,Y as I};
