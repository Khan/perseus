import{a as n,j as e}from"./jsx-runtime-BGVbfQ2Z.js";import"./article-renderer-juLCqj5a.js";import{_ as l}from"./index-default-4_ZsnO94.js";import{U as k}from"./util-WvQWLN3r.js";import{c as q}from"./unit-1L4OY2_r.js";import"./dependencies-fnqF3NiV.js";import"./perseus-api-Ly41NhN4.js";import"./multi-renderer-KGpo0fUi.js";import"./hints-renderer-Gzz1n3re.js";import"./renderer-KgaMtYu2.js";import"./base-radio-_W0eQATd.js";import{c as O}from"./components--6wBnaAm.js";import{I as P}from"./icon-paths-fAaGW1jp.js";import"./jquery-5v7aFUvu.js";import{P as z}from"./i18n-context-9-s9cJ--.js";import{E as V}from"./editor-jsonify-TeR0H2Xw.js";import{r as I}from"./index-qhcEwEpg.js";import{E as j}from"./editor-3gWl8JOx.js";const{ButtonGroup:A,InfoTip:h,InlineIcon:N,MultiButtonGroup:D,NumberInput:v,PropCheckBox:y,TextInput:U}=O,{iconGear:B,iconTrash:M}=P,{firstNumericalParse:C}=k,_=[{title:"Integers",value:"integer",content:"6"},{title:"Decimals",value:"decimal",content:"0.75"},{title:"Proper fractions",value:"proper",content:"⅗"},{title:"Improper fractions",value:"improper",content:"⁷⁄₄"},{title:"Mixed numbers",value:"mixed",content:"1¾"},{title:"Numbers with π",value:"pi",content:"π"}],b=x=>({value:null,status:x,message:"",simplify:"required",answerForms:[],strict:!1,maxError:null}),d=class d extends I.Component{constructor(t){super(t),this.state={lastStatus:"wrong",showOptions:l.map(this.props.answers,()=>!1)}}render(){const t=this.props.answers,r=s=>n("div",{className:"perseus-widget-row",children:[e("label",{children:"Unsimplified answers are"}),e(A,{value:t[s].simplify,allowEmpty:!1,buttons:[{value:"required",content:"ungraded"},{value:"optional",content:"accepted"},{value:"enforced",content:"wrong"}],onChange:this.updateAnswer(s,"simplify")||(()=>{})}),n(h,{children:[e("p",{children:'Normally select "ungraded". This will give the user a message saying the answer is correct but not simplified. The user will then have to simplify it and re-enter, but will not be penalized. (5th grade and after)'}),e("p",{children:'Select "accepted" only if the user is not expected to know how to simplify fractions yet. (Anything prior to 5th grade)'}),n("p",{children:['Select "wrong" ',e("em",{children:"only"})," if we are specifically assessing the ability to simplify."]})]})]}),a=s=>n("div",{children:[n("div",{className:"perseus-widget-row",children:[e("label",{children:"Choose the suggested answer formats"}),e(D,{buttons:_,values:t[s].answerForms,onChange:this.updateAnswer(s,"answerForms")||(()=>{})}),n(h,{children:[e("p",{children:'Formats will be autoselected for you based on the given answer; to show no suggested formats and accept all types, simply have a decimal/integer be the answer. Values with π will have format "pi", and values that are fractions will have some subset (mixed will be "mixed" and "proper"; improper/proper will both be "improper" and "proper"). If you would like to specify that it is only a proper fraction (or only a mixed/improper fraction), deselect the other format. Except for specific cases, you should not need to change the autoselected formats.'}),n("p",{children:["To restrict the answer to ",e("em",{children:"only"}),' an improper fraction (i.e. 7/4), select the improper fraction and toggle "strict" to true. This ',e("b",{children:"will not"})," ","accept 1.75 as an answer."," "]}),e("p",{children:"Unless you are testing that specific skill, please do not restrict the answer format."})]})]}),e("div",{className:"perseus-widget-row",children:e(y,{label:"Strictly match only these formats",strict:t[s].strict,onChange:this.updateAnswer.bind(this,s)})})]}),c=s=>e("div",{className:"perseus-widget-row",children:n("label",{children:["Max error"," ",e(v,{className:"max-error",value:t[s].maxError,onChange:this.updateAnswer(s,"maxError"),placeholder:"0"})]})}),p=n("div",{className:"perseus-widget-row",children:[e("label",{children:"Width: "}),e(A,{value:this.props.size,allowEmpty:!1,buttons:[{value:"normal",content:"Normal (80px)"},{value:"small",content:"Small (40px)"}],onChange:this.change("size")}),e(h,{children:e("p",{children:'Use size "Normal" for all text boxes, unless there are multiple text boxes in one line and the answer area is too narrow to fit them.'})})]}),w=e("div",{className:"perseus-widget-row",children:e(y,{label:"Right alignment",rightAlign:this.props.rightAlign,onChange:this.props.onChange})}),u=n("div",{className:"perseus-widget-row",children:[n("label",{children:["Label text:"," ",e(U,{value:this.props.labelText,onChange:this.change("labelText")})]}),e(h,{children:e("p",{children:"Text to describe this input. This will be shown to users using screenreaders."})})]}),T=e("div",{children:n("div",{className:"perseus-widget-row",children:[e(y,{label:"Coefficient",coefficient:this.props.coefficient,onChange:this.props.onChange}),e(h,{children:e("p",{children:"A coefficient style number allows the student to use - for -1 and an empty string to mean 1."})})]})}),E=e("div",{children:e("a",{href:"javascript:void(0)",className:"simple-button orange",onClick:()=>this.addAnswer(),onKeyDown:s=>this.onSpace(s,this.addAnswer),children:e("span",{children:"Add new answer"})})}),F={wrong:"(address the mistake/misconception)",ungraded:"(explain in detail to avoid confusion)",correct:"(reinforce the user's understanding)"};return n("div",{className:"perseus-input-number-editor",children:[e("div",{className:"ui-title",children:"User input"}),e("div",{className:"msg-title",children:"Message shown to user on attempt"}),t.map((s,i)=>{const S=e(j,{apiOptions:this.props.apiOptions,content:s.message||"",placeholder:"Why is this answer "+s.status+"?	"+F[s.status],widgetEnabled:!1,onChange:o=>{"content"in o&&this.updateAnswer(i,{message:o.content})}});return n("div",{className:"perseus-widget-row",children:[n("div",{className:"input-answer-editor-value-container"+(s.maxError?" with-max-error":""),children:[e(v,{value:s.value,className:"numeric-input-value",placeholder:"answer",format:l.last(s.answerForms||[]),onFormatChange:(o,m)=>{let f;m==="pi"?f=["pi"]:m==="mixed"?f=["proper","mixed"]:(m==="proper"||m==="improper")&&(f=["proper","improper"]),this.updateAnswer(i,{value:C(o,this.context.strings),answerForms:f})},onChange:o=>{this.updateAnswer(i,{value:C(o,this.context.strings)})}}),s.strict&&e("div",{className:"is-strict-indicator",title:"strictly equivalent to",children:"≡"}),s.simplify!=="required"&&s.status==="correct"&&e("div",{className:"simplify-indicator "+s.simplify,title:"accepts unsimplified answers",children:"‰"}),s.maxError?n("div",{className:"max-error-container",children:[e("div",{className:"max-error-plusmn",children:"±"}),e(v,{placeholder:0,value:t[i].maxError,format:l.last(s.answerForms||[]),onChange:this.updateAnswer(i,"maxError")})]}):null,e("div",{className:"value-divider"}),e("a",{href:"javascript:void(0)",className:"answer-status "+s.status,onClick:()=>this.onStatusChange(i),onKeyDown:o=>this.onSpace(o,this.onStatusChange),children:s.status}),e("a",{href:"javascript:void(0)",className:"answer-trash","aria-label":"Delete answer",onClick:()=>this.onTrashAnswer(i),onKeyDown:o=>this.onSpace(o,this.onTrashAnswer),children:e(N,{...M})}),e("a",{href:"javascript:void(0)",className:"options-toggle","aria-label":"Toggle options",onClick:()=>this.onToggleOptions(i),onKeyDown:o=>this.onSpace(o,this.onToggleOptions),children:e(N,{...B})})]}),e("div",{className:"input-answer-editor-message",children:S}),this.state.showOptions[i]&&n("div",{className:"options-container",children:[c(i),s.status==="correct"&&r(i),a(i)]})]},i)}),E,p,w,T,u]})}change(...t){return q.apply(this,t)}onToggleOptions(t){const r=this.state.showOptions.slice();r[t]=!r[t],this.setState({showOptions:r})}onTrashAnswer(t){if(t>=0&&t<this.props.answers.length){const r=this.props.answers.slice(0);r.splice(t,1),this.props.onChange({answers:r})}}onSpace(t,r){if(t.key===" "){t.preventDefault();const a=l.toArray(arguments).slice(2);r.apply(this,a)}}onStatusChange(t){const r=["wrong","ungraded","correct"],a=this.props.answers,c=l.indexOf(r,a[t].status),p=r[(c+1)%r.length];this.updateAnswer(t,{status:p,simplify:p==="correct"?"required":"accepted"})}updateAnswer(t,r){if(!l.isObject(r))return l.partial((c,p,w)=>{const u={};u[p]=w,this.updateAnswer(c,u)},t,r);let a=[...this.props.answers];if(t===a.length){const c=b(this.state.lastStatus);a=a.concat(c)}a[t]=l.extend({},a[t],r),this.props.onChange({answers:a})}addAnswer(){const t=b(this.state.lastStatus),r=this.props.answers.concat(t);this.props.onChange({answers:r})}getSaveWarnings(){const t=[];return l.contains(l.pluck(this.props.answers,"value"),"")&&t.push("One or more answers is empty"),this.props.answers.forEach((r,a)=>{r.strict&&(!r.answerForms||r.answerForms.length===0)&&t.push(`Answer ${a+1} is set to string format matching, but no format was selected`)}),t}serialize(){return V.serialize.call(this)}};d.contextType=z,d.widgetName="numeric-input",d.displayName="NumericInputEditor",d.defaultProps={answers:[b("correct")],size:"normal",coefficient:!1,labelText:"",rightAlign:!1};let g=d;try{g.displayName="NumericInputEditor",g.__docgenInfo={description:"",displayName:"NumericInputEditor",props:{answers:{defaultValue:{value:'[initAnswer("correct")]'},description:"",name:"answers",required:!1,type:{name:"readonly PerseusNumericInputAnswer[]"}},labelText:{defaultValue:{value:""},description:"",name:"labelText",required:!1,type:{name:"string"}},size:{defaultValue:{value:"normal"},description:"",name:"size",required:!1,type:{name:"string"}},coefficient:{defaultValue:{value:"false"},description:"",name:"coefficient",required:!1,type:{name:"boolean"}},rightAlign:{defaultValue:{value:"false"},description:"",name:"rightAlign",required:!1,type:{name:"boolean"}},static:{defaultValue:null,description:"",name:"static",required:!1,type:{name:"boolean"}},answerForms:{defaultValue:null,description:"",name:"answerForms",required:!1,type:{name:"readonly PerseusNumericInputAnswerForm[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(results: any) => any"}},apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!1,type:{name:"Readonly<Readonly<{ isArticle?: boolean; onInputError?: ((widgetId: any, value: string, message?: string | null) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown..."}}}}}catch{}export{g as N};
