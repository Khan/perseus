import{j as s,a as r}from"./jsx-runtime-BGVbfQ2Z.js";import"./article-renderer-qpvQP4Tt.js";import{c as v,p as O}from"./unit-tpB2tohZ.js";import"./index-eZ2N530f.js";import{_ as y}from"./index-V35CFGao.js";import{r as b}from"./index-qhcEwEpg.js";import"./fixed-to-responsive-G5J_wmel.js";import"./dependencies-fnqF3NiV.js";import"./video-transcript-link-OKNeGZxl.js";import{_ as c}from"./index-default-4_ZsnO94.js";import{A as N}from"./perseus-api-Ly41NhN4.js";import"./multi-renderer-Y9FxmNV6.js";import"./hints-renderer-mDmT_73p.js";import"./renderer-MIwh026j.js";import{B as T}from"./base-radio-Y_aw4kUg.js";import{c as A}from"./components-VVvgjr_3.js";import{I as S}from"./icon-paths-fAaGW1jp.js";import"./util-HWMzrHku.js";import"./jquery-5v7aFUvu.js";import{P as i}from"./index-tvtfaFq4.js";import{E as C}from"./editor-PNdXDkTf.js";const{InlineIcon:d,PropCheckBox:l}=A,{iconPlus:g,iconTrash:D}=S,m=class m extends b.Component{render(){const e=this.props.choice.correct?"correct":"incorrect";let t="Type a choice here...";this.props.choice.isNoneOfTheAbove&&(t=this.props.choice.correct?"Type the answer to reveal to the user...":"None of the above");const o=s(C,{ref:"content-editor",apiOptions:this.props.apiOptions,content:this.props.choice.content||"",widgetEnabled:!1,placeholder:t,disabled:this.props.choice.isNoneOfTheAbove&&!this.props.choice.correct,onChange:this.props.onContentChange}),n=s(C,{ref:"clue-editor",apiOptions:this.props.apiOptions,content:this.props.choice.clue||"",widgetEnabled:!1,placeholder:y("Why is this choice %(correctOrIncorrect)s?",{correctOrIncorrect:e}),onChange:this.props.onClueChange}),p=s("a",{className:"simple-button orange delete-choice",href:"#",onClick:f=>{f.stopPropagation(),f.preventDefault(),this.props.onDelete()},title:"Remove this choice",children:s(d,{...D})});return r("div",{className:"choice-clue-editors",children:[s("div",{className:`choice-editor ${e}`,children:o}),s("div",{className:"clue-editor",children:n}),this.props.showDelete&&p]})}};m.propTypes={apiOptions:N.propTypes,choice:i.object,showDelete:i.bool,onClueChange:i.func,onContentChange:i.func,onDelete:i.func};let u=m;const h=class h extends b.Component{constructor(){super(...arguments),this.change=(...e)=>v.apply(this,e),this.onMultipleSelectChange=e=>{e=e.multipleSelect;const t=c.reduce(this.props.choices,function(o,n){return n.correct?o+1:o},0);if(!e&&t>1){const o=c.map(this.props.choices,function(n){return c.defaults({correct:!1},n)});this.props.onChange({multipleSelect:e,choices:o})}else this.props.onChange({multipleSelect:e})},this.onCountChoicesChange=e=>{e=e.countChoices,this.props.onChange({countChoices:e})},this.onChange=({checked:e})=>{const t=c.map(this.props.choices,(o,n)=>c.extend({},o,{correct:e[n],content:o.isNoneOfTheAbove&&!e[n]?"":o.content}));this.props.onChange({choices:t})},this.onContentChange=(e,t)=>{const o=this.props.choices.slice();o[e]=c.extend({},o[e],{content:t}),this.props.onChange({choices:o})},this.onClueChange=(e,t)=>{const o=this.props.choices.slice();o[e]=c.extend({},o[e],{clue:t}),t===""&&delete o[e].clue,this.props.onChange({choices:o})},this.onDelete=e=>{const t=this.props.choices.slice(),o=t[e];t.splice(e,1),this.props.onChange({choices:t,hasNoneOfTheAbove:this.props.hasNoneOfTheAbove&&!o.isNoneOfTheAbove})},this.addChoice=(e,t)=>{t.preventDefault();const o=this.props.choices.slice(),n={isNoneOfTheAbove:e},p=o.length-(this.props.hasNoneOfTheAbove?1:0);o.splice(p,0,n),this.props.onChange({choices:o,hasNoneOfTheAbove:e||this.props.hasNoneOfTheAbove},()=>{this.refs[`choice-editor${p}`].refs["content-editor"].focus()})},this.setDisplayCount=e=>{this.props.onChange({displayCount:e})},this.focus=()=>(this.refs["choice-editor0"].refs["content-editor"].focus(),!0),this.getSaveWarnings=()=>c.some(c.pluck(this.props.choices,"correct"))?[]:["No choice is marked as correct."],this.serialize=()=>c.pick(this.props,"choices","randomize","multipleSelect","countChoices","displayCount","hasNoneOfTheAbove","deselectEnabled")}render(){const e=c.reduce(this.props.choices,function(t,o){return o.correct?t+1:t},0);return r("div",{children:[r("div",{className:"perseus-widget-row",children:[s("a",{href:"https://docs.google.com/document/d/1frZf7yrWVWb1n4tVjqlzqVUiv1pn4cZXbxgP62-JDBY/edit#heading=h.8ng1isya19nu",target:"_blank",children:"Multiple choice style guide"}),s("br",{}),s("div",{className:"perseus-widget-left-col",children:s(l,{label:"Multiple selections",labelAlignment:"right",multipleSelect:this.props.multipleSelect,onChange:this.onMultipleSelectChange})}),s("div",{className:"perseus-widget-right-col",children:s(l,{label:"Randomize order",labelAlignment:"right",randomize:this.props.randomize,onChange:this.props.onChange})}),this.props.multipleSelect&&s("div",{className:"perseus-widget-left-col",children:s(l,{label:"Specify number correct",labelAlignment:"right",countChoices:this.props.countChoices,onChange:this.onCountChoicesChange})})]}),s(T,{multipleSelect:this.props.multipleSelect,countChoices:this.props.countChoices,numCorrect:e,editMode:!0,labelWrap:!1,apiOptions:this.props.apiOptions,choices:this.props.choices.map((t,o)=>({content:s(u,{ref:`choice-editor${o}`,apiOptions:this.props.apiOptions,choice:t,onContentChange:n=>{"content"in n&&this.onContentChange(o,n.content)},onClueChange:n=>{"content"in n&&this.onClueChange(o,n.content)},onDelete:()=>this.onDelete(o),showDelete:this.props.choices.length>=2}),isNoneOfTheAbove:t.isNoneOfTheAbove,checked:t.correct}),this),onChange:this.onChange}),r("div",{className:"add-choice-container",children:[r("a",{className:"simple-button orange",href:"#",onClick:this.addChoice.bind(this,!1),children:[s(d,{...g})," Add a choice"," "]}),!this.props.hasNoneOfTheAbove&&r("a",{className:"simple-button",href:"#",onClick:this.addChoice.bind(this,!0),children:[s(d,{...g})," None of the above"," "]})]})]})}};h.propTypes={...O,apiOptions:N.propTypes,choices:i.arrayOf(i.shape({content:i.string,clue:i.string,correct:i.bool})),displayCount:i.number,randomize:i.bool,hasNoneOfTheAbove:i.bool,multipleSelect:i.bool,countChoices:i.bool,deselectEnabled:i.bool,static:i.bool},h.widgetName="radio",h.defaultProps={choices:[{},{}],displayCount:null,randomize:!1,hasNoneOfTheAbove:!1,multipleSelect:!1,countChoices:!1,deselectEnabled:!1};let a=h;try{a.displayName="RadioEditor",a.__docgenInfo={description:"",displayName:"RadioEditor",props:{}}}catch{}export{a as R};
