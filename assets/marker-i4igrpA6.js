import{a as w,j as i,F as x}from"./jsx-runtime-BGVbfQ2Z.js";import{g as C,z as D}from"./article-renderer-IigOBFNA.js";import"./index-default-4_ZsnO94.js";import"./util-WvQWLN3r.js";import"./unit-uxf7imOh.js";import"./dependencies-fnqF3NiV.js";import"./perseus-api-BF68z3pH.js";import"./multi-renderer-JMnglM_W.js";import"./hints-renderer-sQRW0c7Y.js";import"./renderer-0WTyF9ZX.js";import"./base-radio-ZMSPcM4W.js";import"./button-group-eBTrRsKy.js";import"./graph-cl_EfieJ.js";import"./svg-image-xT-AdWRe.js";import"./hud-Q7Km3N9P.js";import"./icon-HbAIhp4d.js";import"./info-tip-8pHiOl5T.js";import"./inline-icon-MJBS_-2U.js";import"./math-input-6t-fO48d.js";import"./multi-button-group-rHU9dGVb.js";import"./number-input-QmtkIb5a.js";import"./prop-check-box-yQKE-Nit.js";import"./range-input-IMzA4hKn.js";import"./text-input-yDsqFbe3.js";import"./text-list-editor-bJphcq85.js";import"./jquery-5v7aFUvu.js";import"./i18n-context-9-s9cJ--.js";import{l as s}from"./index-awljIyHI.js";import{r as h}from"./index-qhcEwEpg.js";import{c as _}from"./components-04bRc_gR.js";import{R as V}from"./index-E09jvG0x.js";import{f as q}from"./util-RicqMZ0C.js";import{F as N}from"./form-wrapped-text-field-_SPDon01.js";const{Icon:R}=_,{colors:g}=C,M=c=>{const e=V.findDOMNode(c);e.focus&&q(e)},F=`M10,3.8C10,4,9.9,4.2,9.8,4.3L5.1,8.9L4.3,9.8C4.2,9.9,4,10,3.8,10
 S3.5,9.9,3.4,9.8L2.5,8.9L0.2,6.6C0.1,6.5,0,6.3,0,6.2s0.1-0.3,0.2-0.4
 l0.9-0.9c0.1-0.1,0.3-0.2,0.4-0.2s0.3,0.1,0.4,0.2l1.9,1.9l4.2-4.2c0.1
 -0.1,0.3-0.2,0.4-0.2c0.2,0,0.3,0.1,0.4,0.2l0.9,0.9C9.9,3.5,10,3.7,
 10,3.8z`,A=30;class y extends h.Component{handleKeyDown(r){const{onDropdownClose:e}=this.props,o=r.key,t=r.target;o==="ArrowDown"&&t.nextSibling&&(r.preventDefault(),t.nextSibling.focus()),o==="ArrowUp"&&t.previousSibling&&(r.preventDefault(),t.previousSibling.focus()),o==="ArrowUp"&&!t.previousSibling&&e&&(r.preventDefault(),e()),(o==="Escape"||o==="Tab")&&e&&e()}render(){const{selected:r,value:e,onClick:o,children:t,optionRenderer:l,disabled:a,hideFocusState:m,testId:n,ariaLabel:f}=this.props;return w("button",{ref:p=>this.node=p,value:e,role:"menuitemradio","aria-checked":r,className:s.css(d.notAButton,a&&d.cursorDefault,m&&d.noFocus),onClick:p=>{!a&&o&&o(p)},onKeyDown:p=>this.handleKeyDown(p),"aria-disabled":a,"aria-label":f,"data-testid":n,children:[l&&l(i(x,{children:t}),e||"",r||!1,a),!l&&w("span",{className:s.css(d.option,r&&d.optionSelected,a&&d.optionDisabled),children:[t,r&&i("span",{className:s.css(d.check),children:i(R,{icon:F})})]})]})}}class k extends h.Component{componentDidMount(){this.focusedElement&&M(this.focusedElement)}render(){const{children:r,onSelected:e,selectedValues:o,optionRenderer:t,noMargin:l,onDropdownClose:a,hideFocusState:m}=this.props;return i("div",{style:{top},className:s.css(d.optionGroup,l&&d.optionGroupNoMargin),children:h.Children.map(r,(n,f)=>{const p=o.includes(n.props.value),S=p||f===0?v=>this.focusedElement=v:null;return h.cloneElement(n,{...n.props,key:f,selected:p,onClick:()=>e(n.props.value),optionRenderer:t,ref:S,onDropdownClose:a,hideFocusState:m})})})}}const d=s.StyleSheet.create({optionGroup:{margin:"4px 0"},optionGroupNoMargin:{margin:0},option:{display:"flex",flexDirection:"row",alignItems:"center",paddingLeft:32,paddingRight:32,height:A,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:g.gray17,userSelect:"none",":hover":{backgroundColor:g.gray95}},optionSelected:{backgroundColor:g.gray95,color:"#11ACCD"},optionDisabled:{color:g.gray76,":hover":{backgroundColor:"transparent"}},check:{position:"absolute",left:11},notAButton:{backgroundColor:"transparent",border:"none",display:"block",padding:0,margin:0,width:"100%",font:"inherit"},noFocus:{outline:"none"},cursorDefault:{cursor:"default"}});try{k.displayName="OptionGroup",k.__docgenInfo={description:"",displayName:"OptionGroup",props:{onSelected:{defaultValue:null,description:"",name:"onSelected",required:!0,type:{name:"(value: string) => void"}},selectedValues:{defaultValue:null,description:"",name:"selectedValues",required:!0,type:{name:"string[]"}},optionRenderer:{defaultValue:null,description:"",name:"optionRenderer",required:!1,type:{name:"OptionRenderer"}},noMargin:{defaultValue:null,description:"",name:"noMargin",required:!1,type:{name:"boolean"}},onDropdownClose:{defaultValue:null,description:"",name:"onDropdownClose",required:!1,type:{name:"(() => void)"}},hideFocusState:{defaultValue:null,description:"",name:"hideFocusState",required:!1,type:{name:"boolean"}}}}}catch{}try{y.displayName="Option",y.__docgenInfo={description:"",displayName:"Option",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}},optionRenderer:{defaultValue:null,description:"",name:"optionRenderer",required:!1,type:{name:"OptionRenderer"}},onDropdownClose:{defaultValue:null,description:"",name:"onDropdownClose",required:!1,type:{name:"(() => void)"}},hideFocusState:{defaultValue:null,description:"",name:"hideFocusState",required:!1,type:{name:"boolean"}},testId:{defaultValue:null,description:"",name:"testId",required:!1,type:{name:"string"}},ariaLabel:{defaultValue:null,description:"",name:"ariaLabel",required:!1,type:{name:"string"}}}}}catch{}const{colors:b,borderRadius:L}=C;class he extends h.Component{constructor(r){super(r),this.handleClick=e=>{const{showDropdown:o}=this.state;this._marker===e.target?this.setState({showDropdown:!o}):o&&this._marker&&!this._marker.contains(e.target)&&(e.stopPropagation(),this.setState({showDropdown:!1}))},this.handleLabelChange=e=>{this.updateMarker({label:e.target.value})},this.handleSelectAnswer=e=>{let{answers:o}=this.props;o.includes(e)?o=o.filter(t=>t!==e):o=[...o,e],this.updateMarker({answers:o})},this.state={showDropdown:!1}}componentDidMount(){document.addEventListener("click",this.handleClick,!0)}UNSAFE_componentWillReceiveProps(r){const{answers:e}=this.props,o=e.filter(t=>r.choices.includes(t));JSON.stringify(e)!==JSON.stringify(o)&&setTimeout(()=>this.updateMarker({answers:o}))}componentWillUnmount(){document.removeEventListener("click",this.handleClick,!0)}openDropdown(){this.setState({showDropdown:!0})}updateMarker(r){const{answers:e,label:o,onChange:t,x:l,y:a}=this.props;t({answers:e,label:o,x:l,y:a,...r})}render(){const{answers:r,choices:e,label:o,onRemove:t,x:l,y:a}=this.props,{showDropdown:m}=this.state;return i("div",{className:s.css(u.marker,r.length>0&&u.markerWithAnswers,m&&u.markerSelected),ref:n=>this._marker=n,style:{left:`${l}%`,top:`${a}%`},title:"Click to select marker answers or to delete marker. Repositioning marker is not implemented.",children:m&&i("div",{children:w("div",{className:s.css(u.dropdownBody,u.dropdownPositionWithArrow),children:[i(y,{value:"",onClick:()=>t(),children:"Delete marker"}),i("hr",{className:s.css(u.dividerHorizontal)}),i(k,{onSelected:this.handleSelectAnswer,selectedValues:r,children:e.map(n=>i(y,{value:n,children:n},n))}),i("div",{className:s.css(u.labelContainer),children:i(N,{placeholder:"ARIA label (for screen readers)",onChange:this.handleLabelChange,value:o,width:"100%"})})]})})})}}const u=s.StyleSheet.create({marker:{position:"absolute",boxSizing:"content-box",width:16,height:16,marginLeft:-8,marginTop:-8,cursor:"pointer",background:"linear-gradient(to bottom, rgba(33, 36, 44, 0.2), rgba(33, 36, 44, 0.5))",border:"solid 2px #ffffff",borderRadius:16,boxShadow:"0 2px 10px 0 rgba(33, 36, 44, 0.1)"},markerSelected:{width:28,height:28,marginLeft:-12,marginTop:-12,border:"none",borderRadius:28,"::before":{content:"''",display:"block",width:20,height:20,marginLeft:2,marginTop:2,border:"solid 2px #ffffff",borderRadius:20}},markerWithAnswers:{background:"#1865f2"},dropdownPositionWithArrow:{left:46,bottom:-12,"::before":{content:"''",display:"block",position:"absolute",width:0,height:0,left:-16,bottom:8,borderRight:`solid 16px ${b.gray98}`,borderTop:"solid 16px transparent",borderBottom:"solid 16px transparent"}},labelContainer:{padding:4},dividerHorizontal:{height:0,margin:0,border:`solid ${b.gray85}`,borderWidth:"0 0 1px",boxShadow:"none"},dropdownBody:{position:"absolute",border:"solid 1px rgba(0, 0, 0, 0.1)",zIndex:D,color:b.gray17,backgroundColor:b.gray98,borderRadius:L,maxHeight:320,cursor:"pointer"}});try{marker.displayName="marker",marker.__docgenInfo={description:"",displayName:"marker",props:{answers:{defaultValue:null,description:"",name:"answers",required:!0,type:{name:"readonly string[]"}},label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},x:{defaultValue:null,description:"",name:"x",required:!0,type:{name:"number"}},y:{defaultValue:null,description:"",name:"y",required:!0,type:{name:"number"}},choices:{defaultValue:null,description:"",name:"choices",required:!0,type:{name:"readonly string[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(marker: MarkerType) => void"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"() => void"}}}}}catch{}export{he as M};
