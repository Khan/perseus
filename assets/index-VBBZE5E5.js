import{_ as v}from"./index-default-4_ZsnO94.js";const Te=(e,t)=>{let r="v";t==="__lib_version__"&&(r="");const o=`${r}${t}`;if(typeof globalThis<"u"){globalThis.__perseus_debug__=globalThis.__perseus_debug__??{};const i=globalThis.__perseus_debug__[e];if(i){if(i!==o){const u=Array.isArray(i)?i:[i];u.push(o),globalThis.__perseus_debug__[e]=u,console.warn(`Multiple versions of ${e} loaded on this page: ${u.sort().join(", ")}`)}}else globalThis.__perseus_debug__[e]=o}else console.warn(`globalThis not found found (${o})`)};function ie(e,t){return typeof e=="number"&&typeof t=="number"?Math.abs(e-t)<1e-9:e===t}function I(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!I(e[r],t[r]))return!1;return!0}return Array.isArray(e)||Array.isArray(t)?!1:typeof e=="function"&&typeof t=="function"?ie(e,t):typeof e=="function"||typeof t=="function"?!1:typeof e=="object"&&typeof t=="object"&&e&&t?e===t||v.all(e,function(r,o){return I(t[o],r)})&&v.all(t,function(r,o){return I(e[o],r)}):typeof e=="object"&&e||typeof t=="object"&&t?!1:ie(e,t)}const V={PLOT:"PLOT",PARABOLA:"PARABOLA",SINUSOID:"SINUSOID"};function ae(e){let t=e[0],r=e[1],o=e[2];const i=e[3];t<0&&(t*=-1,r*=-1,o*=-1);const u=2*Math.PI;for(r<0&&(r*=-1,o*=-1,o+=u/2);o>0;)o-=u;for(;o<0;)o+=u;return[t,r,o,i]}function ce(e){let t=e[0],r=e[1],o=e[2];const i=e[3];t<0&&(t*=-1,r*=-1,o*=-1);const u=Math.PI;for(r<0&&(r*=-1,o*=-1,o+=u/2);o>0;)o-=u;for(;o<0;)o+=u;return[t,r,o,i]}const W={areEqual:function(e,t){return I(e,t)},movable:V.PLOT,getPropsForCoeffs:function(e){return{fn:v.partial(this.getFunctionForCoeffs,e)}}},ke=v.extend({},W,{url:"https://ka-perseus-graphie.s3.amazonaws.com/67aaf581e6d9ef9038c10558a1f70ac21c11c9f8.png",defaultCoords:[[.25,.75],[.75,.75]],getCoefficients:function(e){const t=e[0],r=e[1],o=r[0]-t[0],i=r[1]-t[1];if(o===0)return;const u=i/o,f=r[1]-u*r[0];return[u,f]},getFunctionForCoeffs:function(e,t){const r=e[0],o=e[1];return r*t+o},getEquationString:function(e){const t=this.getCoefficients(e),r=t[0],o=t[1];return"y = "+r.toFixed(3)+"x + "+o.toFixed(3)}}),Fe=v.extend({},W,{url:"https://ka-perseus-graphie.s3.amazonaws.com/e23d36e6fc29ee37174e92c9daba2a66677128ab.png",defaultCoords:[[.5,.5],[.75,.75]],movable:V.PARABOLA,getCoefficients:function(e){const t=e[0],r=e[1],o=t[0],i=t[1],u=(r[1]-i)/((r[0]-o)*(r[0]-o)),f=-2*o*u,g=u*o*o+i;return[u,f,g]},getFunctionForCoeffs:function(e,t){const r=e[0],o=e[1],i=e[2];return(r*t+o)*t+i},getPropsForCoeffs:function(e){return{a:e[0],b:e[1],c:e[2]}},getEquationString:function(e){const t=this.getCoefficients(e),r=t[0],o=t[1],i=t[2];return"y = "+r.toFixed(3)+"x^2 + "+o.toFixed(3)+"x + "+i.toFixed(3)}}),Pe=v.extend({},W,{url:"https://ka-perseus-graphie.s3.amazonaws.com/3d68e7718498475f53b206c2ab285626baf8857e.png",defaultCoords:[[.5,.5],[.6,.6]],movable:V.SINUSOID,getCoefficients:function(e){const t=e[0],r=e[1],o=r[1]-t[1],i=Math.PI/(2*(r[0]-t[0])),u=t[0]*i,f=t[1];return[o,i,u,f]},getFunctionForCoeffs:function(e,t){const r=e[0],o=e[1],i=e[2],u=e[3];return r*Math.sin(o*t-i)+u},getPropsForCoeffs:function(e){return{a:e[0],b:e[1],c:e[2],d:e[3]}},getEquationString:function(e){const t=this.getCoefficients(e),r=t[0],o=t[1],i=t[2],u=t[3];return"y = "+r.toFixed(3)+" sin("+o.toFixed(3)+"x - "+i.toFixed(3)+") + "+u.toFixed(3)},areEqual:function(e,t){return I(ae(e),ae(t))}}),Ce=v.extend({},W,{url:"https://ka-perseus-graphie.s3.amazonaws.com/7db80d23c35214f98659fe1cf0765811c1bbfbba.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(e){const t=e[0],r=e[1],o=r[1]-t[1],i=Math.PI/(4*(r[0]-t[0])),u=t[0]*i,f=t[1];return[o,i,u,f]},getFunctionForCoeffs:function(e,t){const r=e[0],o=e[1],i=e[2],u=e[3];return r*Math.tan(o*t-i)+u},getEquationString:function(e){const t=this.getCoefficients(e),r=t[0],o=t[1],i=t[2],u=t[3];return"y = "+r.toFixed(3)+" sin("+o.toFixed(3)+"x - "+i.toFixed(3)+") + "+u.toFixed(3)},areEqual:function(e,t){return I(ce(e),ce(t))}}),pe=v.extend({},W,{url:"https://ka-perseus-graphie.s3.amazonaws.com/9cbfad55525e3ce755a31a631b074670a5dad611.png",defaultCoords:[[.5,.55],[.75,.75]],defaultAsymptote:[[0,.5],[1,.5]],extraCoordConstraint:function(e,t,r,o,i){const u=o[0][1];return v.all(r,f=>f[1]!==u)},extraAsymptoteConstraint:function(e,t,r,o,i){const u=e[1];if(v.all(r,S=>S[1]>u)||v.all(r,S=>S[1]<u))return[t[0],u];const g=t[1];if(v.all(r,S=>S[1]>g)){const S=v.min(v.map(r,K=>K[1]));return[t[0],S-i.snapStep[1]]}const A=v.max(v.map(r,S=>S[1]));return[t[0],A+i.snapStep[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(e,t){const r=e[0],o=e[1],i=t[0][1],u=Math.log((r[1]-i)/(o[1]-i))/(r[0]-o[0]);return[(r[1]-i)/Math.exp(u*r[0]),u,i]},getFunctionForCoeffs:function(e,t){const r=e[0],o=e[1],i=e[2];return r*Math.exp(o*t)+i},getEquationString:function(e,t){if(!t)return null;const r=this.getCoefficients(e,t),o=r[0],i=r[1],u=r[2];return"y = "+o.toFixed(3)+"e^("+i.toFixed(3)+"x) + "+u.toFixed(3)}}),Ae=v.extend({},W,{url:"https://ka-perseus-graphie.s3.amazonaws.com/f6491e99d34af34d924bfe0231728ad912068dc3.png",defaultCoords:[[.55,.5],[.75,.75]],defaultAsymptote:[[.5,0],[.5,1]],extraCoordConstraint:function(e,t,r,o,i){const u=o[0][0];return v.all(r,f=>f[0]!==u)&&r[0][1]!==r[1][1]},extraAsymptoteConstraint:function(e,t,r,o,i){const u=e[0];if(v.all(r,S=>S[0]>u)||v.all(r,S=>S[0]<u))return[u,t[1]];const g=t[0];return v.all(r,S=>S[0]>g)?[v.min(v.map(r,K=>K[0]))-i.snapStep[0],t[1]]:[v.max(v.map(r,S=>S[0]))+i.snapStep[0],t[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(e,t){const r=i=>[i[1],i[0]],o=pe.getCoefficients(v.map(e,r),v.map(t,r));if(o){const i=-o[2]/o[0],u=1/o[0];return[1/o[1],u,i]}},getFunctionForCoeffs:function(e,t,r){const o=e[0],i=e[1],u=e[2];return o*Math.log(i*t+u)},getEquationString:function(e,t){if(!t)return null;const r=this.getCoefficients(e,t),o=r[0],i=r[1],u=r[2];return"y = ln("+o.toFixed(3)+"x + "+i.toFixed(3)+") + "+u.toFixed(3)}}),Le=v.extend({},W,{url:"https://ka-perseus-graphie.s3.amazonaws.com/8256a630175a0cb1d11de223d6de0266daf98721.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(e){const t=e[0],r=e[1],o=r[0]-t[0],i=r[1]-t[1];if(o===0)return;let u=Math.abs(i/o);r[1]<t[1]&&(u*=-1);const f=t[0],g=t[1];return[u,f,g]},getFunctionForCoeffs:function(e,t){const r=e[0],o=e[1],i=e[2];return r*Math.abs(t-o)+i},getEquationString:function(e){const t=this.getCoefficients(e),r=t[0],o=t[1],i=t[2];return"y = "+r.toFixed(3)+"| x - "+o.toFixed(3)+"| + "+i.toFixed(3)}}),fe={linear:ke,quadratic:Fe,sinusoid:Pe,tangent:Ce,exponential:pe,logarithm:Ae,absolute_value:Le},dr=v.keys(fe);function gr(e){return fe[e]}function de(e){return{type:"success",value:e}}function ee(e){return{type:"failure",detail:e}}function F(e){return e.type==="failure"}function G(e){return e.type==="success"}function Oe(e,t=r=>r){const r=[],o=[];for(const i of e)i.type==="success"?r.push(i.value):o.push(i.detail);return o.length>0?ee(o.reduce(t)):de(r)}const R=(e,t)=>t.success(e);function d(e){return(t,r)=>{if(!Array.isArray(t))return r.failure("array",t);const o=t.map((i,u)=>e(i,r.forSubtree(u)));return Oe(o,xe)}}function xe(e,t){return[...e,...t]}function l(e,t){return typeof e=="boolean"?t.success(e):t.failure("boolean",e)}function p(e){return(t,r)=>t!==e?r.failure(String(JSON.stringify(e)),t):r.success(e)}function w(...e){return(t,r)=>{if(typeof t=="string"){const i=e.indexOf(t);if(i>-1)return r.success(e[i])}const o=e.map(i=>JSON.stringify(i));return r.failure(o,t)}}function z(e){return e!=null&&Object.getPrototypeOf(e)===Object.prototype}function b(e){return(t,r)=>t===null?r.success(t):e(t,r)}const c=(e,t)=>typeof e=="number"?t.success(e):t.failure("number",e);function a(e){return(t,r)=>{if(!z(t))return r.failure("object",t);const o={...t},i=[];for(const[u,f]of Object.entries(e)){const g=f(t[u],r.forSubtree(u));G(g)?(g.value!==void 0||u in t)&&(o[u]=g.value):i.push(...g.detail)}return i.length>0?ee(i):r.success(o)}}function n(e){return(t,r)=>t===void 0?r.success(t):e(t,r)}function T(e,t){return(r,o)=>{if(!Array.isArray(r))return o.failure("array",r);if(r.length!==2)return o.failure("array of length 2",r);const[i,u]=r,f=e(i,o.forSubtree(0));if(F(f))return f;const g=t(u,o.forSubtree(1));return F(g)?g:o.success([f.value,g.value])}}function P(e){return new te(e)}class te{constructor(t){this.parser=t}then(t){return new te(Be(this.parser,t))}}function Be(e,t){return(r,o)=>{const i=e(r,o);return F(i)?i:t(i.value,o)}}function re(e,t){return(r,o)=>{if(!z(r))return o.failure("object",r);const i={},u=[];for(const[f,g]of Object.entries(r)){const C=o.forSubtree(f),A=e(f,C);F(A)&&u.push(...A.detail);const S=t(g,C);F(S)&&u.push(...S.detail),G(A)&&G(S)&&(i[A.value]=S.value)}return u.length>0?ee(u):o.success(i)}}const s=(e,t)=>typeof e=="string"?t.success(e):t.failure("string",e);function X(e,t,r){return(o,i)=>{if(!Array.isArray(o))return i.failure("array",o);if(o.length!==3)return i.failure("array of length 3",o);const u=e(o[0],i.forSubtree(0));if(F(u))return u;const f=t(o[1],i.forSubtree(1));if(F(f))return f;const g=r(o[2],i.forSubtree(2));return F(g)?g:i.success([u.value,f.value,g.value])}}function k(e){return new ne(e)}class ne{constructor(t){this.parser=t}or(t){return new ne(We(this.parser,t))}}function We(e,t){return(r,o)=>{const i=e(r,o);return G(i)?i:t(r,o)}}function m(e,t){return(r,o)=>r==null?de(t(r)):e(r,o)}const ge=m(re(s,a({width:c,height:c})),()=>({}));function y(e,t){return a({type:e,static:n(l),graded:n(l),alignment:n(s),options:t,key:n(c),version:n(a({major:c,minor:c}))})}function he(e,t,r){return a({type:t,static:n(l),graded:n(l),alignment:n(s),options:r,key:n(c),version:e})}const Me=y(p("categorizer"),a({items:d(s),categories:d(s),randomizeItems:m(l,()=>!1),static:m(l,()=>!1),values:d(m(c,()=>0)),highlightLint:n(l),linterContext:n(a({contentType:s,paths:d(s),stack:d(s)}))})),$e=y(p("cs-program"),a({programID:s,programType:R,settings:d(a({name:s,value:s})),showEditor:l,showButtons:l,height:c,static:m(l,()=>!1)})),_e=y(p("definition"),a({togglePrompt:s,definition:s,static:m(l,()=>!1)})),Ee=y(p("dropdown"),a({placeholder:m(s,()=>""),ariaLabel:n(s),visibleLabel:n(s),static:m(l,()=>!1),choices:d(a({content:s,correct:l}))})),Ie=y(p("explanation"),a({showPrompt:s,hidePrompt:s,explanation:s,widgets:m((e,t)=>D(e,t),()=>({})),static:m(l,()=>!1)}));function x(e){return(t,r)=>r.success(e(t))}function Ne(e,t){return new se(e,t,r=>r,(r,o)=>o.failure("widget options with a known version number",r))}class se{constructor(t,r,o,i){this.migrateToLatest=o,this.parseOtherVersions=i;const u=P(r).then(x(this.migrateToLatest)).parser;this.parser=(f,g)=>{if(!z(f))return g.failure("object",f);const C=ze(f,g);return F(C)?C:C.value.version.major!==t?this.parseOtherVersions(f,g):u(f,g)}}withMigrationFrom(t,r,o){const i=this.parser,u=f=>this.migrateToLatest(o(f));return new se(t,r,u,i)}}const ze=a({version:m(a({major:c,minor:c}),()=>({major:0,minor:0}))}),Re=k(s).or(c).or(p(null)).or(p(void 0)).parser,De=a({value:n(s),form:m(l,()=>!1),simplify:m(l,()=>!1),considered:w("correct","wrong","ungraded"),key:P(Re).then(x(String)).parser});function je(e){const t=[];for(const r of e){const{value:o}=r;o!=null&&t.push({...r,value:o})}return t}const me=m(d(w("basic","basic+div","trig","prealgebra","logarithms","basic relations","advanced relations")),()=>["basic","trig","prealgebra","logarithms"]),qe=a({major:p(1),minor:c}),Ge=he(qe,p("expression"),a({answerForms:P(d(De)).then(x(je)).parser,functions:d(s),times:l,visibleLabel:n(s),ariaLabel:n(s),buttonSets:me,buttonsVisible:n(w("always","never","focused"))})),Xe=n(a({major:p(0),minor:c})),Ye=he(Xe,p("expression"),a({functions:d(s),times:l,visibleLabel:n(s),ariaLabel:n(s),form:l,simplify:l,value:s,buttonSets:me,buttonsVisible:n(w("always","never","focused"))}));function Ue(e){const{options:t}=e;return{...e,version:{major:1,minor:0},options:{times:t.times,buttonSets:t.buttonSets,functions:t.functions,buttonsVisible:t.buttonsVisible,visibleLabel:t.visibleLabel,ariaLabel:t.ariaLabel,answerForms:[{considered:"correct",form:t.form,simplify:t.simplify,value:t.value}]}}}const He=Ne(1,Ge).withMigrationFrom(0,Ye,Ue).parser,Ke=P(p(!1)).then(x(()=>null)).parser,be=a({title:m(s,()=>""),hasHint:n(b(l)),hint:k(Ke).or(p(null)).or(p(void 0)).or((e,t)=>N(e,t)).parser,content:s,widgets:(e,t)=>D(e,t),widgetEnabled:n(b(l)),immutableWidgets:n(b(l)),images:re(s,a({width:c,height:c}))}),Je=y(p("graded-group"),be),Qe=y(p("graded-group-set"),a({gradedGroups:d(be)}));function Y(e){const t=(r,o)=>z(r)?o.forSubtree(e).failure("a valid value",r[e]):o.failure("object",r);return new oe(e,t)}class oe{constructor(t,r){this.discriminantKey=t,this.parser=r}withBranch(t,r){const o=Ze(this.discriminantKey,t,r,this.parser);return new oe(this.discriminantKey,o)}}function Ze(e,t,r,o){return(i,u)=>z(i)?i[e]===t?r(i,u):o(i,u):u.failure("object",i)}const O=T(c,c),L=T(O,O),Ve=y(p("grapher"),a({availableTypes:d(w("absolute_value","exponential","linear","logarithm","quadratic","sinusoid","tangent")),correct:Y("type").withBranch("absolute_value",a({type:p("absolute_value"),coords:b(L)})).withBranch("exponential",a({type:p("exponential"),asymptote:L,coords:b(L)})).withBranch("linear",a({type:p("linear"),coords:b(L)})).withBranch("logarithm",a({type:p("logarithm"),asymptote:L,coords:b(L)})).withBranch("quadratic",a({type:p("quadratic"),coords:b(L)})).withBranch("sinusoid",a({type:p("sinusoid"),coords:b(L)})).withBranch("tangent",a({type:p("tangent"),coords:b(L)})).parser,graph:a({backgroundImage:a({bottom:n(c),height:n(c),left:n(c),scale:n(c),url:n(b(s)),width:n(c)}),box:n(O),editableSettings:n(d(w("graph","snap","image","measure"))),gridStep:n(O),labels:T(s,s),markings:w("graph","none","grid"),range:T(O,O),rulerLabel:p(""),rulerTicks:c,showProtractor:n(l),showRuler:n(l),showTooltips:n(l),snapStep:n(O),step:O,valid:n(k(l).or(s).parser)})})),et=y(p("group"),(e,t)=>N(e,t)),tt=y(p("iframe"),a({url:s,settings:n(d(a({name:s,value:s}))),width:k(c).or(s).parser,height:k(c).or(s).parser,allowFullScreen:m(l,()=>!1),allowTopNavigation:n(l),static:m(l,()=>!1)})),ye=(e,t)=>{if(typeof e=="number")return t.success(e);const r=+e;return e===""||isNaN(r)?t.failure("a number or numeric string",e):t.success(r)};function rt(e){return e===""?0:e}const _=P(k(c).or(s).parser).then(x(rt)).then(ye).parser,U=a({url:n(b(s)),width:n(_),height:n(_),top:n(_),left:n(_),bottom:n(_),scale:n(_)}),J=T(c,c),nt=y(p("image"),a({title:n(s),caption:n(s),alt:n(s),backgroundImage:U,static:n(l),labels:n(d(a({content:s,alignment:s,coordinates:d(c)}))),range:n(T(J,J)),box:n(J)})),st=(e,t)=>typeof e=="boolean"?t.success(String(e)):t.failure("boolean",e),ot=y(p("input-number"),a({answerType:n(w("number","decimal","integer","rational","improper","mixed","percent","pi")),inexact:n(l),maxError:n(k(c).or(s).parser),rightAlign:n(l),simplify:w("required","optional","enforced"),size:w("normal","small"),value:k(c).or(s).or(st).parser,customKeypad:n(l)})),E=T(c,c),j=m(s,()=>""),B=P(n(s)).then(x(String)).parser,it=a({type:p("function"),key:B,options:a({value:s,funcName:s,rangeMin:s,rangeMax:s,color:s,strokeDasharray:s,strokeWidth:c})}),at=a({type:p("label"),key:B,options:a({label:s,color:s,coordX:s,coordY:s})}),ct=a({type:p("line"),key:B,options:a({color:s,startX:s,startY:s,endX:s,endY:s,strokeDasharray:s,strokeWidth:c,arrows:s})}),ut=a({type:p("movable-line"),key:B,options:a({startX:s,startY:s,startSubscript:c,endX:s,endY:s,endSubscript:c,constraint:s,snap:c,constraintFn:s,constraintXMin:s,constraintXMax:s,constraintYMin:s,constraintYMax:s})}),lt=a({type:p("movable-point"),key:B,options:a({startX:s,startY:s,varSubscript:c,constraint:s,snap:c,constraintFn:s,constraintXMin:j,constraintXMax:j,constraintYMin:j,constraintYMax:j})}),pt=a({type:p("parametric"),key:B,options:a({x:s,y:s,rangeMin:s,rangeMax:s,color:s,strokeDasharray:s,strokeWidth:c})}),ft=a({type:p("point"),key:B,options:a({color:s,coordX:s,coordY:s})}),dt=a({type:p("rectangle"),key:B,options:a({color:s,coordX:s,coordY:s,width:s,height:s})}),gt=y(p("interaction"),a({static:m(l,()=>!1),graph:a({editableSettings:n(d(w("canvas","graph"))),box:E,labels:d(s),range:T(E,E),gridStep:E,markings:w("graph","grid","none"),snapStep:n(E),valid:n(k(l).or(s).parser),backgroundImage:n(U),showProtractor:n(l),showRuler:n(l),rulerLabel:n(s),rulerTicks:n(c),tickStep:E}),elements:d(Y("type").withBranch("function",it).withBranch("label",at).withBranch("line",ct).withBranch("movable-line",ut).withBranch("movable-point",lt).withBranch("parametric",pt).withBranch("point",ft).withBranch("rectangle",dt).parser)})),ht=["calculator","chi2Table","financialCalculatorMonthlyPayment","financialCalculatorTotalAmount","financialCalculatorTimeToPayOff","periodicTable","periodicTableWithKey","tTable","zTable"],hr=["correct","wrong","ungraded"],mt=["blue","green","grayH","purple","pink","orange","red"],mr={blue:"#3D7586",green:"#447A53",grayH:"#3B3D45",purple:"#594094",pink:"#B25071",red:"#D92916",orange:"#946700"},br={none:0,white:1,translucent:.4,solid:1},bt=["bar","line","pic","histogram","dotplot"],h=T(c,c),yt=a({type:p("angle"),showAngles:n(l),allowReflexAngles:n(l),angleOffsetDeg:n(c),snapDegrees:n(c),match:n(p("congruent")),coords:n(X(h,h,h)),startCoords:n(X(h,h,h))}),vt=a({type:p("circle"),center:n(h),radius:n(c),startCoords:n(a({center:h,radius:c})),coord:n(h)}),wt=a({type:p("linear"),coords:n(b(T(h,h))),startCoords:n(T(h,h)),coord:n(h)}),St=a({type:p("linear-system"),coords:n(b(d(T(h,h)))),startCoords:n(d(T(h,h))),coord:n(h)}),Tt=a({type:p("none")}),kt=a({type:p("point"),numPoints:n(k(c).or(p("unlimited")).parser),coords:n(b(d(h))),startCoords:n(d(h)),coord:n(h)}),Ft=a({type:p("polygon"),numSides:n(k(c).or(p("unlimited")).parser),showAngles:n(l),showSides:n(l),snapTo:n(w("grid","angles","sides")),match:n(w("similar","congruent","approx","exact")),startCoords:n(d(h)),coord:n(h)}),Pt=a({type:p("quadratic"),coords:n(b(X(h,h,h))),startCoords:n(X(h,h,h)),coord:n(h)}),Ct=a({type:p("ray"),coords:n(b(T(h,h))),startCoords:n(T(h,h)),coord:n(h)}),At=a({type:p("segment"),numSegments:n(c),coords:n(b(d(T(h,h)))),startCoords:n(d(T(h,h))),coord:n(h)}),Lt=a({type:p("sinusoid"),coords:n(b(d(h))),startCoords:n(d(h)),coord:n(h)}),ue=Y("type").withBranch("angle",yt).withBranch("circle",vt).withBranch("linear",wt).withBranch("linear-system",St).withBranch("none",Tt).withBranch("point",kt).withBranch("polygon",Ft).withBranch("quadratic",Pt).withBranch("ray",Ct).withBranch("segment",At).withBranch("sinusoid",Lt).parser,M=w(...mt),ve=w("none","white","translucent","solid"),H=w("solid","dashed"),$=a({type:p("label"),coord:h,text:s,color:M,size:w("small","medium","large")}),Z=a({type:p("point"),coord:h,color:M,filled:l,labels:n(d($)),ariaLabel:n(s)}),Ot=a({type:p("line"),kind:w("line","ray","segment"),points:T(Z,Z),color:M,lineStyle:H,showPoint1:m(l,()=>!1),showPoint2:m(l,()=>!1),labels:n(d($)),ariaLabel:n(s)}),xt=a({type:p("vector"),points:T(h,h),color:M,labels:n(d($)),ariaLabel:n(s)}),Bt=a({type:p("ellipse"),center:h,radius:h,angle:c,color:M,fillStyle:ve,strokeStyle:H,labels:n(d($)),ariaLabel:n(s)}),Wt=a({type:p("polygon"),points:d(h),color:M,showVertices:l,fillStyle:ve,strokeStyle:H,labels:n(d($)),ariaLabel:n(s)}),Mt=a({type:p("function"),color:M,strokeStyle:H,equation:s,directionalAxis:w("x","y"),domain:n(h),labels:n(d($)),ariaLabel:n(s)}),$t=Y("type").withBranch("point",Z).withBranch("line",Ot).withBranch("vector",xt).withBranch("ellipse",Bt).withBranch("polygon",Wt).withBranch("function",Mt).withBranch("label",$).parser,_t=y(p("interactive-graph"),a({step:h,gridStep:n(h),snapStep:n(h),backgroundImage:n(U),markings:w("graph","grid","none"),labels:n(d(s)),showProtractor:l,showRuler:n(l),showTooltips:n(l),rulerLabel:n(s),rulerTicks:n(c),range:T(h,h),graph:m(ue,()=>({type:"linear"})),correct:ue,lockedFigures:n(d($t)),fullGraphLabel:n(s),fullGraphAriaDescription:n(s)})),Et=y(p("label-image"),a({choices:d(s),imageUrl:s,imageAlt:s,imageHeight:c,imageWidth:c,markers:d(a({answers:d(s),label:s,x:c,y:c})),hideChoicesFromInstructions:l,multipleAnswers:l,static:m(l,()=>!1)})),It=y(p("matcher"),a({labels:d(s),left:d(s),right:d(s),orderMatters:l,padding:l})),Nt=k(c).or(s).parser,zt=P(m(Nt,()=>NaN)).then(ye).parser,Rt=y(m(p("matrix"),()=>"matrix"),a({prefix:n(s),suffix:n(s),answers:d(d(zt)),cursorPosition:n(d(c)),matrixBoardSize:d(c),static:n(l)})),Dt=y(p("measurer"),a({image:m(U,()=>({url:null,top:0,left:0})),showProtractor:l,showRuler:l,rulerLabel:s,rulerTicks:c,rulerPixels:c,rulerLength:c,box:T(c,c),static:m(l,()=>!1)})),jt=y(p("molecule-renderer"),a({widgetId:s,rotationAngle:n(c),smiles:n(s)})),qt=P(p("")).then(x(()=>null)).parser,Gt=y(p("number-line"),a({range:d(c),labelRange:d(b(k(c).or(qt).parser)),labelStyle:s,labelTicks:l,isTickCtrl:n(b(l)),divisionRange:d(c),numDivisions:n(b(c)),snapDivisions:m(c,()=>2),tickStep:n(b(c)),correctRel:n(b(s)),correctX:b(c),initialX:n(b(c)),showTooltips:n(l),static:m(l,()=>!1)})),le=w("integer","mixed","improper","proper","decimal","percent","pi"),Xt=y(p("numeric-input"),a({answers:d(a({message:s,value:n(b(c)),status:s,answerForms:n(d(le)),strict:l,maxError:n(b(c)),simplify:n(b(k(s).or(P(l).then(x(String)).parser).parser))})),labelText:n(s),size:s,coefficient:m(l,()=>!1),rightAlign:n(l),static:m(l,()=>!1),answerForms:n(d(a({name:le,simplify:n(b(w("required","correct","enforced","optional")))})))}));function Q(e,t){return N(e,t)}const Yt=(e,t)=>e==="large"?t.success("auto"):t.success(e),Ut=y(p("orderer"),a({options:m(d(Q),()=>[]),correctOptions:d(Q),otherOptions:d(Q),height:P(w("normal","auto","large")).then(Yt).parser,layout:m(w("horizontal","vertical"),()=>"horizontal")})),Ht=y(p("passage-ref"),a({passageNumber:c,referenceNumber:c,summaryText:n(s)})),Kt=y(p("passage"),a({footnotes:m(s,()=>""),passageText:s,passageTitle:m(s,()=>""),showLineNumbers:l,static:m(l,()=>!1)})),Jt=y(p("phet-simulation"),a({url:s,description:s})),Qt=y(p("plotter"),a({labels:d(s),categories:d(s),type:w(...bt),maxY:c,scaleY:m(c,()=>1),labelInterval:n(b(c)),snapsPerLine:m(c,()=>2),starting:d(c),correct:d(c),picUrl:n(b(s)),picSize:n(b(c)),picBoxHeight:n(b(c)),plotDimensions:m(d(c),()=>[380,300])})),Zt=y(p("python-program"),a({programID:s,height:c})),Vt=y(p("radio"),a({choices:d(a({content:m(s,()=>""),clue:n(s),correct:n(l),isNoneOfTheAbove:n(l),widgets:n((e,t)=>D(e,t))})),hasNoneOfTheAbove:n(l),countChoices:n(l),randomize:n(l),multipleSelect:n(l),deselectEnabled:n(l),onePerLine:n(l),displayCount:n(R),noneOfTheAbove:n(p(!1))})),er=y(p("sorter"),a({correct:d(s),padding:l,layout:w("horizontal","vertical")})),tr=y(p("table"),a({headers:d(s),rows:c,columns:c,answers:d(d(s))})),rr=y(p("video"),a({location:s,static:n(l)})),D=(e,t)=>{if(!z(e))return t.failure("PerseusWidgetsMap",e);const r={};for(const o of Object.keys(e)){const i=nr([o,e[o]],r,t.forSubtree(o));if(F(i))return i}return t.success(r)},nr=([e,t],r,o)=>{const i=or(e.split(" "),o.forSubtree("(widget ID)"));if(F(i))return i;const[u,f]=i.value;function g(C,A){const S=A(t,o);return F(S)?S:(r[C]=S.value,o.success(void 0))}switch(u){case"categorizer":return g(`categorizer ${f}`,Me);case"cs-program":return g(`cs-program ${f}`,$e);case"definition":return g(`definition ${f}`,_e);case"dropdown":return g(`dropdown ${f}`,Ee);case"explanation":return g(`explanation ${f}`,Ie);case"expression":return g(`expression ${f}`,He);case"grapher":return g(`grapher ${f}`,Ve);case"group":return g(`group ${f}`,et);case"graded-group":return g(`graded-group ${f}`,Je);case"graded-group-set":return g(`graded-group-set ${f}`,Qe);case"iframe":return g(`iframe ${f}`,tt);case"image":return g(`image ${f}`,nt);case"input-number":return g(`input-number ${f}`,ot);case"interaction":return g(`interaction ${f}`,gt);case"interactive-graph":return g(`interactive-graph ${f}`,_t);case"label-image":return g(`label-image ${f}`,Et);case"matcher":return g(`matcher ${f}`,It);case"matrix":return g(`matrix ${f}`,Rt);case"measurer":return g(`measurer ${f}`,Dt);case"molecule-renderer":return g(`molecule-renderer ${f}`,jt);case"number-line":return g(`number-line ${f}`,Gt);case"numeric-input":return g(`numeric-input ${f}`,Xt);case"orderer":return g(`orderer ${f}`,Ut);case"passage":return g(`passage ${f}`,Kt);case"passage-ref":return g(`passage-ref ${f}`,Ht);case"passage-ref-target":return g(`passage-ref-target ${f}`,R);case"phet-simulation":return g(`phet-simulation ${f}`,Jt);case"plotter":return g(`plotter ${f}`,Qt);case"python-program":return g(`python-program ${f}`,Zt);case"radio":return g(`radio ${f}`,Vt);case"sorter":return g(`sorter ${f}`,er);case"table":return g(`table ${f}`,tr);case"video":return g(`video ${f}`,rr);case"sequence":return g(`sequence ${f}`,q);case"lights-puzzle":return g(`lights-puzzle ${f}`,q);case"simulator":return g(`simulator ${f}`,q);case"transformer":return g(`transformer ${f}`,q);default:return g(`${u} ${f}`,y(p(u),R))}},q=y((e,t)=>t.success("deprecated-standin"),a({})),sr=(e,t)=>typeof e!="string"||!/^[1-9][0-9]*$/.test(e)?t.failure("a string representing a positive integer",e):t.success(+e),or=T(s,sr),N=m(a({content:m(s,()=>""),widgets:m((e,t)=>D(e,t),()=>({})),metadata:n(d(s)),images:ge}),()=>({content:"",widgets:{},images:{}}));k(N).or(d(N)).parser;const ir=a({replace:n(l),content:s,widgets:m(D,()=>({})),metadata:n(d(s)),images:ge});a({question:N,hints:m(d(ir),()=>[]),answerArea:P(m(a({}),()=>({}))).then(ar).then(re(w(...ht),l)).parser,itemDataVersion:n(a({major:c,minor:c})),answer:R});function ar(e,t){const{type:r,options:o,...i}=e;return t.success(i)}const cr="@khanacademy/perseus-core",ur="__lib_version__";Te(cr,ur);const we=4,Se=1,lr=new Array(we).fill(0).map(()=>new Array(Se).fill("")),pr={headers:[""],rows:we,columns:Se,answers:lr},yr={name:"table",defaultWidgetOptions:pr};export{ht as I,hr as P,br as a,Te as b,dr as c,ie as d,I as e,gr as f,mr as l,bt as p,yr as t};
