import{j as e,a as s}from"./jsx-runtime-BGVbfQ2Z.js";import"./article-renderer-YjXYDqIL.js";import{c}from"./unit-tpB2tohZ.js";import{V as O}from"./index-eZ2N530f.js";import"./index-V35CFGao.js";import{r as d}from"./index-qhcEwEpg.js";import"./fixed-to-responsive-G5J_wmel.js";import{a as h,g as J}from"./dependencies-fnqF3NiV.js";import"./video-transcript-link-OKNeGZxl.js";import{_ as a}from"./index-default-4_ZsnO94.js";import"./perseus-api-Ly41NhN4.js";import{C as x,D as X,A as T,E as u}from"./multi-renderer-18Vsm7JP.js";import"./hints-renderer-ET5vn7vu.js";import"./renderer-MIwh026j.js";import"./base-radio-Y_aw4kUg.js";import"./button-group-eBTrRsKy.js";import"./graph-ikvgyli5.js";import{K as q}from"./svg-image-Gtdh9yHY.js";import"./hud-Q7Km3N9P.js";import"./icon-HbAIhp4d.js";import"./info-tip-wjwyUctM.js";import"./inline-icon-MJBS_-2U.js";import"./math-input-H0Iwin6Q.js";import"./multi-button-group-rHU9dGVb.js";import"./number-input-33S79dZV.js";import"./prop-check-box-HVj5fBdn.js";import"./range-input-zsZZAHYZ.js";import"./text-input-wM71qCBt.js";import"./text-list-editor-bJphcq85.js";import{U as $}from"./util-HWMzrHku.js";import"./jquery-5v7aFUvu.js";import{E as g}from"./editor-jsonify-78WT2WXm.js";import{G as B}from"./graph-settings-kMo-PEPW.js";import{c as m}from"./components-VVvgjr_3.js";import"./prop-types-kPsd7mQ-.js";import{c as R}from"./key-translator-_9bpijyh.js";import"./index-ro9eMDh3.js";import"./button-assets-K2ZoY3Yc.js";import{c as W}from"./index-Hz0Gzck5.js";import{l as G}from"./index-awljIyHI.js";function i(p){const n=d.useRef(null),t=d.useRef();return d.useEffect(()=>{n.current&&!t.current&&(t.current=R(n.current,r=>({...r,handlers:{edit:l=>{let o=l.latex();o=o.replace(/<>/g,"\\ne"),p.value!==o&&p.onChange(o)},upOutOf:l=>{l.typedText("^")}}})))}),e(O,{style:K.outerWrapper,children:e("span",{ref:n,className:"perseus-math-input mq-editable-field mq-math-mode"})})}const K=G.StyleSheet.create({outerWrapper:{display:"inline-block",borderStyle:"solid",borderWidth:1,borderColor:W.offBlack50,borderRadius:3,background:W.white}});try{mathquillinput.displayName="mathquillinput",mathquillinput.__docgenInfo={description:`A simple Mathquill MathField input for the InteractionEditor.
Unlike our other uses of Mathquill, we're not using a keypad here;
it's just the input itself for use writing TeX.`,displayName:"mathquillinput",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}}}}}catch{}const{NumberInput:j}=m,{getDependencies:H}=h,D=class D extends d.Component{constructor(){super(...arguments),this.change=(...n)=>c.apply(this,n),this.serialize=()=>g.serialize.call(this)}render(){const{TeX:n}=H();return s("div",{className:"graph-settings",children:[s("div",{className:"perseus-widget-row",children:[e(n,{children:this.props.funcName+"(x)="})," ",e(i,{value:this.props.value,onChange:this.change("value")})]}),s("div",{className:"perseus-widget-row",children:["Range: ",e(n,{children:"\\Large("}),e(i,{value:this.props.rangeMin,onChange:this.change("rangeMin")}),e(n,{children:","})," ",e(i,{value:this.props.rangeMax,onChange:this.change("rangeMax")}),e(n,{children:"\\Large)"})]}),e("div",{className:"perseus-widget-row",children:e(x,{value:this.props.color,onChange:this.change("color")})}),e("div",{className:"perseus-widget-row",children:e(X,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})}),e("div",{className:"perseus-widget-row",children:s("div",{className:"perseus-widget-left-col",children:["Width:"," ",e(j,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")})]})})]})}};D.defaultProps={value:"x",rangeMin:"-10",rangeMax:"10",color:q.BLUE,strokeDasharray:"",strokeWidth:2};let f=D;try{f.displayName="FunctionEditor",f.__docgenInfo={description:"",displayName:"FunctionEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},value:{defaultValue:{value:"x"},description:"",name:"value",required:!1,type:{name:"string"}},rangeMin:{defaultValue:{value:"-10"},description:"",name:"rangeMin",required:!1,type:{name:"string"}},rangeMax:{defaultValue:{value:"10"},description:"",name:"rangeMax",required:!1,type:{name:"string"}},color:{defaultValue:{value:"#6495ED"},description:"",name:"color",required:!1,type:{name:"string"}},strokeDasharray:{defaultValue:{value:""},description:"",name:"strokeDasharray",required:!1,type:{name:"string"}},strokeWidth:{defaultValue:{value:"2"},description:"",name:"strokeWidth",required:!1,type:{name:"number"}}}}}catch{}const{TextInput:Q}=m,{getDependencies:Z}=h,M=class M extends d.Component{constructor(){super(...arguments),this.change=(...n)=>c.apply(this,n),this.serialize=()=>g.serialize.call(this)}render(){const{TeX:n}=Z();return s("div",{className:"graph-settings",children:[e("div",{className:"perseus-widget-row",children:e(Q,{value:this.props.label,onChange:this.change("label"),style:{width:"100%"}})}),s("div",{className:"perseus-widget-row",children:["Location: ",e(n,{children:"\\Large("}),e(i,{value:this.props.coordX,onChange:this.change("coordX")}),e(n,{children:","})," ",e(i,{value:this.props.coordY,onChange:this.change("coordY")}),e(n,{children:"\\Large)"})]}),e("div",{className:"perseus-widget-row",children:e(x,{value:this.props.color,onChange:this.change("color")})})]})}};M.defaultProps={coordX:"0",coordY:"0",color:q.BLACK,label:"\\phi"};let v=M;try{v.displayName="LabelEditor",v.__docgenInfo={description:"",displayName:"LabelEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},color:{defaultValue:{value:"black"},description:"",name:"color",required:!1,type:{name:"string"}},coordX:{defaultValue:{value:"0"},description:"",name:"coordX",required:!1,type:{name:"string"}},coordY:{defaultValue:{value:"0"},description:"",name:"coordY",required:!1,type:{name:"string"}},label:{defaultValue:{value:"\\phi"},description:"",name:"label",required:!1,type:{name:"string"}}}}}catch{}const{NumberInput:ee}=m,{getDependencies:ne}=h,Y=class Y extends d.Component{constructor(){super(...arguments),this.change=(...n)=>c.apply(this,n),this.serialize=()=>g.serialize.call(this)}render(){const{TeX:n}=ne();return s("div",{className:"graph-settings",children:[s("div",{className:"perseus-widget-row",children:["Start: ",e(n,{children:"\\Large("}),e(i,{value:this.props.startX,onChange:this.change("startX")}),e(n,{children:","})," ",e(i,{value:this.props.startY,onChange:this.change("startY")}),e(n,{children:"\\Large)"})]}),s("div",{className:"perseus-widget-row",children:["End: ",e(n,{children:"\\Large("}),e(i,{value:this.props.endX,onChange:this.change("endX")}),e(n,{children:","})," ",e(i,{value:this.props.endY,onChange:this.change("endY")}),e(n,{children:"\\Large)"})]}),e("div",{className:"perseus-widget-row",children:e(x,{value:this.props.color,onChange:this.change("color")})}),s("div",{className:"perseus-widget-row",children:[e(X,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")}),"   ",e(T,{value:this.props.arrows,onChange:this.change("arrows")})]}),e("div",{className:"perseus-widget-row",children:s("div",{className:"perseus-widget-left-col",children:["Width:"," ",e(ee,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")})]})})]})}};Y.defaultProps={startX:"-5",startY:"5",endX:"5",endY:"5",color:q.BLACK,strokeDasharray:"",arrows:"",strokeWidth:2};let y=Y;try{y.displayName="LineEditor",y.__docgenInfo={description:"",displayName:"LineEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},startX:{defaultValue:{value:"-5"},description:"",name:"startX",required:!1,type:{name:"string"}},startY:{defaultValue:{value:"5"},description:"",name:"startY",required:!1,type:{name:"string"}},endX:{defaultValue:{value:"5"},description:"",name:"endX",required:!1,type:{name:"string"}},endY:{defaultValue:{value:"5"},description:"",name:"endY",required:!1,type:{name:"string"}},color:{defaultValue:{value:"black"},description:"",name:"color",required:!1,type:{name:"string"}},strokeDasharray:{defaultValue:{value:""},description:"",name:"strokeDasharray",required:!1,type:{name:"string"}},arrows:{defaultValue:{value:""},description:"",name:"arrows",required:!1,type:{name:"string"}},strokeWidth:{defaultValue:{value:"2"},description:"",name:"strokeWidth",required:!1,type:{name:"number"}}}}}catch{}const{ButtonGroup:te,NumberInput:re}=m,E=class E extends d.Component{constructor(){super(...arguments),this.change=n=>c.call(this,n)}render(){const{TeX:n}=J();return s("div",{children:[s("div",{className:"perseus-widget-row",children:["Constraint:"," ",e(te,{value:this.props.constraint,allowEmpty:!1,buttons:[{value:"none",content:"None"},{value:"snap",content:"Snap"},{value:"x",content:"x="},{value:"y",content:"y="}],onChange:this.change("constraint")})]}),this.props.constraint==="snap"&&s("div",{className:"perseus-widget-row",children:["Snap:"," ",e(re,{value:this.props.snap,placeholder:0,onChange:this.change("snap")})]}),this.props.constraint==="x"&&e("div",{className:"graph-settings",children:s("div",{className:"perseus-widget-row",children:[e(n,{children:"x="})," ",e(i,{value:this.props.constraintFn,onChange:this.change("constraintFn")})]})}),this.props.constraint==="y"&&e("div",{className:"graph-settings",children:s("div",{className:"perseus-widget-row",children:[e(n,{children:"y="})," ",e(i,{value:this.props.constraintFn,onChange:this.change("constraintFn")})]})}),"Ensure these are set so nothing can be dragged off the canvas:",e("div",{className:"perseus-widget-row",children:s("div",{className:"perseus-widget-row",children:[e(n,{children:"x \\in \\Large["})," ",e(i,{value:this.props.constraintXMin,onChange:this.change("constraintXMin")}),e(n,{children:", "})," ",e(i,{value:this.props.constraintXMax,onChange:this.change("constraintXMax")})," ",e(n,{children:"\\Large]"})]})}),e("div",{className:"perseus-widget-row",children:s("div",{className:"perseus-widget-row",children:[e(n,{children:"y \\in \\Large["})," ",e(i,{value:this.props.constraintYMin,onChange:this.change("constraintYMin")}),e(n,{children:", "})," ",e(i,{value:this.props.constraintYMax,onChange:this.change("constraintYMax")})," ",e(n,{children:"\\Large]"})]})})]})}};E.defaultProps={constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"};let w=E;try{w.displayName="ConstraintEditor",w.__docgenInfo={description:"",displayName:"ConstraintEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},constraint:{defaultValue:{value:"none"},description:"",name:"constraint",required:!1,type:{name:"string"}},constraintFn:{defaultValue:{value:"0"},description:"",name:"constraintFn",required:!1,type:{name:"string"}},constraintXMax:{defaultValue:{value:"10"},description:"",name:"constraintXMax",required:!1,type:{name:"string"}},constraintXMin:{defaultValue:{value:"-10"},description:"",name:"constraintXMin",required:!1,type:{name:"string"}},constraintYMax:{defaultValue:{value:"10"},description:"",name:"constraintYMax",required:!1,type:{name:"string"}},constraintYMin:{defaultValue:{value:"-10"},description:"",name:"constraintYMin",required:!1,type:{name:"string"}},snap:{defaultValue:{value:"0.5"},description:"",name:"snap",required:!1,type:{name:"number"}}}}}catch{}const{NumberInput:z}=m,{getDependencies:se}=h,L=class L extends d.Component{constructor(){super(...arguments),this.change=(...n)=>c.apply(this,n),this.serialize=()=>g.serialize.call(this)}render(){const{TeX:n}=se();return s("div",{className:"graph-settings",children:["Initial position:",s("div",{className:"perseus-widget-row",children:["Start: ",e(n,{children:"\\Large("}),e(i,{value:this.props.startX,onChange:this.change("startX")}),e(n,{children:","})," ",e(i,{value:this.props.startY,onChange:this.change("startY")}),e(n,{children:"\\Large)"})]}),s("div",{className:"perseus-widget-row",children:["End: ",e(n,{children:"\\Large("}),e(i,{value:this.props.endX,onChange:this.change("endX")}),e(n,{children:","})," ",e(i,{value:this.props.endY,onChange:this.change("endY")}),e(n,{children:"\\Large)"})]}),s("div",{className:"perseus-widget-row",children:["Start updates ",e(n,{children:"(x_n, y_n)"})," for ",e(n,{children:"n ="}),e(z,{value:this.props.startSubscript,placeholder:0,onChange:this.change("startSubscript")})]}),s("div",{className:"perseus-widget-row",children:["End updates ",e(n,{children:"(x_m, y_m)"})," for ",e(n,{children:"m ="}),e(z,{value:this.props.endSubscript,placeholder:0,onChange:this.change("endSubscript")})]}),e("div",{className:"perseus-widget-row",children:"All constraints are applied to the start point."}),e(w,{...this.props})]})}};L.defaultProps={startX:"-5",startY:"5",endX:"5",endY:"5",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"};let b=L;try{b.displayName="MovableLineEditor",b.__docgenInfo={description:"",displayName:"MovableLineEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},startX:{defaultValue:{value:"-5"},description:"",name:"startX",required:!1,type:{name:"string"}},startY:{defaultValue:{value:"5"},description:"",name:"startY",required:!1,type:{name:"string"}},endX:{defaultValue:{value:"5"},description:"",name:"endX",required:!1,type:{name:"string"}},endY:{defaultValue:{value:"5"},description:"",name:"endY",required:!1,type:{name:"string"}},constraint:{defaultValue:{value:"none"},description:"",name:"constraint",required:!1,type:{name:"string"}},snap:{defaultValue:{value:"0.5"},description:"",name:"snap",required:!1,type:{name:"number"}},constraintFn:{defaultValue:{value:"0"},description:"",name:"constraintFn",required:!1,type:{name:"string"}},startSubscript:{defaultValue:null,description:"",name:"startSubscript",required:!0,type:{name:"number"}},endSubscript:{defaultValue:null,description:"",name:"endSubscript",required:!0,type:{name:"number"}}}}}catch{}const{NumberInput:ae}=m,{getDependencies:ie}=h,I=class I extends d.Component{constructor(){super(...arguments),this.change=(...n)=>c.apply(this,n),this.serialize=()=>g.serialize.call(this)}render(){const{TeX:n}=ie();return s("div",{className:"graph-settings",children:[s("div",{className:"perseus-widget-row",children:["Start: ",e(n,{children:"\\Large("}),e(i,{value:this.props.startX,onChange:this.change("startX")}),e(n,{children:","})," ",e(i,{value:this.props.startY,onChange:this.change("startY")}),e(n,{children:"\\Large)"})]}),s("div",{className:"perseus-widget-row",children:["Update ",e(n,{children:"(x_n, y_n)"})," for ",e(n,{children:"n ="})," ",e(ae,{value:this.props.varSubscript,placeholder:0,onChange:this.change("varSubscript")})]}),e(w,{...this.props})]})}};I.defaultProps={startX:"0",startY:"0",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"};let _=I;try{_.displayName="MovablePointEditor",_.__docgenInfo={description:"",displayName:"MovablePointEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},startX:{defaultValue:{value:"0"},description:"",name:"startX",required:!1,type:{name:"string"}},startY:{defaultValue:{value:"0"},description:"",name:"startY",required:!1,type:{name:"string"}},constraint:{defaultValue:{value:"none"},description:"",name:"constraint",required:!1,type:{name:"string"}},snap:{defaultValue:{value:"0.5"},description:"",name:"snap",required:!1,type:{name:"number"}},constraintFn:{defaultValue:{value:"0"},description:"",name:"constraintFn",required:!1,type:{name:"string"}},varSubscript:{defaultValue:null,description:"",name:"varSubscript",required:!0,type:{name:"number"}}}}}catch{}const{NumberInput:oe}=m,{getDependencies:le}=h,P=class P extends d.Component{constructor(){super(...arguments),this.change=(...n)=>c.apply(this,n),this.serialize=()=>g.serialize.call(this)}render(){const{TeX:n}=le();return s("div",{className:"graph-settings",children:[s("div",{className:"perseus-widget-row",children:[e(n,{children:"X(t) ="})," ",e(i,{value:this.props.x,onChange:this.change("x")})]}),s("div",{className:"perseus-widget-row",children:[e(n,{children:"Y(t) ="})," ",e(i,{value:this.props.y,onChange:this.change("y")})]}),s("div",{className:"perseus-widget-row",children:["Range: ",e(n,{children:"\\Large("}),e(i,{value:this.props.rangeMin,onChange:this.change("rangeMin")}),e(n,{children:","})," ",e(i,{value:this.props.rangeMax,onChange:this.change("rangeMax")}),e(n,{children:"\\Large)"})]}),e("div",{className:"perseus-widget-row",children:e(x,{value:this.props.color,onChange:this.change("color")})}),e("div",{className:"perseus-widget-row",children:e(X,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})}),e("div",{className:"perseus-widget-row",children:s("div",{className:"perseus-widget-left-col",children:["Width:"," ",e(oe,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")})]})})]})}};P.defaultProps={x:"cos(t)",y:"sin(t)",rangeMin:"0",rangeMax:"2\\pi",color:q.BLUE,strokeDasharray:"",strokeWidth:2};let N=P;try{N.displayName="ParametricEditor",N.__docgenInfo={description:"",displayName:"ParametricEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},x:{defaultValue:{value:"cos(t)"},description:"",name:"x",required:!1,type:{name:"string"}},y:{defaultValue:{value:"sin(t)"},description:"",name:"y",required:!1,type:{name:"string"}},rangeMin:{defaultValue:{value:"0"},description:"",name:"rangeMin",required:!1,type:{name:"string"}},rangeMax:{defaultValue:{value:"2\\pi"},description:"",name:"rangeMax",required:!1,type:{name:"string"}},color:{defaultValue:{value:"#6495ED"},description:"",name:"color",required:!1,type:{name:"string"}},strokeDasharray:{defaultValue:{value:""},description:"",name:"strokeDasharray",required:!1,type:{name:"string"}},strokeWidth:{defaultValue:{value:"2"},description:"",name:"strokeWidth",required:!1,type:{name:"number"}}}}}catch{}const{getDependencies:pe}=h,F=class F extends d.Component{constructor(){super(...arguments),this.change=(...n)=>c.apply(this,n),this.serialize=()=>g.serialize.call(this)}render(){const{TeX:n}=pe();return s("div",{className:"graph-settings",children:[s("div",{className:"perseus-widget-row",children:["Coordinate: ",e(n,{children:"\\Large("}),e(i,{value:this.props.coordX,onChange:this.change("coordX")}),e(n,{children:","})," ",e(i,{value:this.props.coordY,onChange:this.change("coordY")}),e(n,{children:"\\Large)"})]}),e("div",{className:"perseus-widget-row",children:e(x,{value:this.props.color,onChange:this.change("color")})})]})}};F.defaultProps={coordX:"0",coordY:"0",color:q.BLACK};let C=F;try{C.displayName="PointEditor",C.__docgenInfo={description:"",displayName:"PointEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},coordX:{defaultValue:{value:"0"},description:"",name:"coordX",required:!1,type:{name:"string"}},coordY:{defaultValue:{value:"0"},description:"",name:"coordY",required:!1,type:{name:"string"}},color:{defaultValue:{value:"black"},description:"",name:"color",required:!1,type:{name:"string"}}}}}catch{}const{getDependencies:de}=h,U=class U extends d.Component{constructor(){super(...arguments),this.change=(...n)=>c.apply(this,n),this.serialize=()=>g.serialize.call(this)}render(){const{TeX:n}=de();return s("div",{className:"graph-settings",children:[s("div",{className:"perseus-widget-row",children:["Bottom left: ",e(n,{children:"\\Large("}),e(i,{value:this.props.coordX,onChange:this.change("coordX")}),e(n,{children:","})," ",e(i,{value:this.props.coordY,onChange:this.change("coordY")}),e(n,{children:"\\Large)"})]}),s("div",{className:"perseus-widget-row",children:["Width:"," ",e(i,{value:this.props.width,onChange:this.change("width")})]}),s("div",{className:"perseus-widget-row",children:["Height:"," ",e(i,{value:this.props.height,onChange:this.change("height")})]}),e("div",{className:"perseus-widget-row",children:e(x,{value:this.props.color,lightColors:!0,onChange:this.change("color")})}),e("div",{className:"perseus-widget-row",children:"You want a border? Sorry, draw your own."})]})}};U.defaultProps={coordX:"-5",coordY:"5",width:"2",height:"3",color:q.LIGHT_BLUE};let k=U;try{k.displayName="RectangleEditor",k.__docgenInfo={description:"",displayName:"RectangleEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},color:{defaultValue:{value:"#9AB8ED"},description:"",name:"color",required:!1,type:{name:"string"}},coordX:{defaultValue:{value:"-5"},description:"",name:"coordX",required:!1,type:{name:"string"}},coordY:{defaultValue:{value:"5"},description:"",name:"coordY",required:!1,type:{name:"string"}},height:{defaultValue:{value:"3"},description:"",name:"height",required:!1,type:{name:"string"}},width:{defaultValue:{value:"2"},description:"",name:"width",required:!1,type:{name:"string"}}}}}catch{}const{getDependencies:ce}=h,{unescapeMathMode:ue}=$,he={graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]},S=class S extends d.Component{constructor(){super(...arguments),this.state={usedVarSubscripts:this._getAllVarSubscripts(this.props.elements),usedFunctionNames:this._getAllFunctionNames(this.props.elements)},this._updateGraphProps=n=>{this.change({graph:a.extend(a.omit(n,"step"),{tickStep:n.step})})},this._addNewElement=n=>{const t=n.target.value;if(t==="")return;n.target.value="";const r={type:t,key:t+"-"+(Math.random()*16777215<<0).toString(16),options:t==="point"?a.clone(C.defaultProps):t==="line"?a.clone(y.defaultProps):t==="movable-point"?a.clone(_.defaultProps):t==="movable-line"?a.clone(b.defaultProps):t==="function"?a.clone(f.defaultProps):t==="parametric"?a.clone(N.defaultProps):t==="label"?a.clone(v.defaultProps):t==="rectangle"?a.clone(k.defaultProps):{}};let l;if(t==="movable-point")l=a.max([a.max(this.state.usedVarSubscripts),-1])+1,r.options.varSubscript=l;else if(t==="movable-line")l=a.max([a.max(this.state.usedVarSubscripts),-1])+1,r.options.startSubscript=l,r.options.endSubscript=l+1;else if(t==="function"){const o=String.fromCharCode(a.max([a.max(a.map(this.state.usedFunctionNames,function(A){return A.charCodeAt(0)})),101])+1);r.options.funcName=o}this.change({elements:this.props.elements.concat(r)})},this._deleteElement=n=>{const t=this.props.elements[n];this.change({elements:a.without(this.props.elements,t)})},this._moveElementUp=n=>{const t=this.props.elements[n],r=a.without(this.props.elements,t);r.splice(n-1,0,t),this.change({elements:r})},this._moveElementDown=n=>{const t=this.props.elements[n],r=a.without(this.props.elements,t);r.splice(n+1,0,t),this.change({elements:r})},this.change=(...n)=>c.apply(this,n),this.serialize=()=>g.serialize.call(this)}UNSAFE_componentWillReceiveProps(n){this.setState({usedVarSubscripts:this._getAllVarSubscripts(n.elements),usedFunctionNames:this._getAllFunctionNames(n.elements)})}_getAllVarSubscripts(n){return a.map(a.where(n,{type:"movable-point"}),t=>t.options.varSubscript).concat(a.map(a.where(n,{type:"movable-line"}),t=>t.options.startSubscript)).concat(a.map(a.where(n,{type:"movable-line"}),t=>t.options.endSubscript))}_getAllFunctionNames(n){return a.map(a.where(n,{type:"function"}),t=>t.options.funcName)}render(){const{TeX:n}=ce();return s("div",{className:"perseus-widget-interaction-editor",children:[s(u,{title:"Grid settings",children:[e(B,{editableSettings:["canvas","graph"],box:this.props.graph.box,labels:this.props.graph.labels,range:this.props.graph.range,step:this.props.graph.tickStep,gridStep:this.props.graph.gridStep,markings:this.props.graph.markings,onChange:this._updateGraphProps}),this.props.graph.valid!==!0&&e("div",{children:this.props.graph.valid})]}),a.map(this.props.elements,function(t,r){if(t.type==="movable-point")return e(u,{title:s("span",{children:["Movable point"," ",e(n,{children:"(x_{"+t.options.varSubscript+"}, y_{"+t.options.varSubscript+"})"})]}),onUp:r===0?null:this._moveElementUp.bind(this,r),onDown:r===this.props.elements.length-1?null:this._moveElementDown.bind(this,r),onDelete:this._deleteElement.bind(this,r),children:e(_,{...t.options,onChange:l=>{const o=JSON.parse(JSON.stringify(this.props.elements));a.extend(o[r].options,l),this.change({elements:o})}})},t.key);if(t.type==="movable-line")return e(u,{title:s("span",{children:["Movable line"," ",e(n,{children:"(x_{"+t.options.startSubscript+"}, y_{"+t.options.startSubscript+"})"})," ","to"," ",e(n,{children:"(x_{"+t.options.endSubscript+"}, y_{"+t.options.endSubscript+"})"})]}),onUp:r===0?null:this._moveElementUp.bind(this,r),onDown:r===this.props.elements.length-1?null:this._moveElementDown.bind(this,r),onDelete:this._deleteElement.bind(this,r),children:e(b,{...t.options,onChange:l=>{const o=JSON.parse(JSON.stringify(this.props.elements));a.extend(o[r].options,l),this.change({elements:o})}})},t.key);if(t.type==="point")return e(u,{title:s("span",{children:["Point"," ",e(n,{children:"("+t.options.coordX+", "+t.options.coordY+")"})]}),onUp:r===0?null:this._moveElementUp.bind(this,r),onDown:r===this.props.elements.length-1?null:this._moveElementDown.bind(this,r),onDelete:this._deleteElement.bind(this,r),children:e(C,{...t.options,onChange:l=>{const o=JSON.parse(JSON.stringify(this.props.elements));a.extend(o[r].options,l),this.change({elements:o})}})},t.key);if(t.type==="line")return e(u,{title:s("span",{children:["Line"," ",e(n,{children:"("+t.options.startX+", "+t.options.startY+")"})," ","to"," ",e(n,{children:"("+t.options.endX+", "+t.options.endY+")"})]}),onUp:r===0?null:this._moveElementUp.bind(this,r),onDown:r===this.props.elements.length-1?null:this._moveElementDown.bind(this,r),onDelete:this._deleteElement.bind(this,r),children:e(y,{...t.options,onChange:l=>{const o=JSON.parse(JSON.stringify(this.props.elements));a.extend(o[r].options,l),this.change({elements:o})}})},t.key);if(t.type==="function")return e(u,{title:s("span",{children:["Function"," ",e(n,{children:t.options.funcName+"(x) = "+t.options.value})]}),onUp:r===0?null:this._moveElementUp.bind(this,r),onDown:r===this.props.elements.length-1?null:this._moveElementDown.bind(this,r),onDelete:this._deleteElement,children:e(f,{...t.options,onChange:l=>{const o=JSON.parse(JSON.stringify(this.props.elements));a.extend(o[r].options,l),this.change({elements:o})}})},t.key);if(t.type==="parametric")return e(u,{title:e("span",{children:"Parametric"}),onUp:r===0?null:this._moveElementUp.bind(this,r),onDown:r===this.props.elements.length-1?null:this._moveElementDown.bind(this,r),onDelete:this._deleteElement,children:e(N,{...t.options,onChange:l=>{const o=JSON.parse(JSON.stringify(this.props.elements));a.extend(o[r].options,l),this.change({elements:o})}})},t.key);if(t.type==="label")return e(u,{title:s("span",{children:["Label"," ",e(n,{children:ue(t.options.label)})," "]}),onUp:r===0?null:this._moveElementUp.bind(this,r),onDown:r===this.props.elements.length-1?null:this._moveElementDown.bind(this,r),onDelete:this._deleteElement,children:e(v,{...t.options,onChange:l=>{const o=JSON.parse(JSON.stringify(this.props.elements));a.extend(o[r].options,l),this.change({elements:o})}})},t.key);if(t.type==="rectangle")return e(u,{title:s("span",{children:["Rectangle"," ",e(n,{children:"("+t.options.coordX+", "+t.options.coordY+")"})," — ",e(n,{children:t.options.width+" \\times "+t.options.height})]}),onUp:r===0?null:this._moveElementUp.bind(this,r),onDown:r===this.props.elements.length-1?null:this._moveElementDown.bind(this,r),onDelete:this._deleteElement,children:e(k,{...t.options,onChange:l=>{const o=JSON.parse(JSON.stringify(this.props.elements));a.extend(o[r].options,l),this.change({elements:o})}})},t.key)},this),e("div",{className:"perseus-widget-interaction-editor-select-element",children:s("select",{onChange:this._addNewElement,children:[s("option",{value:"",children:["Add an element","…"]}),e("option",{disabled:!0,children:"--"}),e("option",{value:"point",children:"Point"}),e("option",{value:"line",children:"Line segment"}),e("option",{value:"function",children:"Function plot"}),e("option",{value:"parametric",children:"Parametric plot"}),e("option",{value:"label",children:"Label"}),e("option",{value:"rectangle",children:"Rectangle"}),e("option",{value:"movable-point",children:"★ Movable point"}),e("option",{value:"movable-line",children:"★ Movable line segment"})]})})]})}};S.widgetName="interaction",S.defaultProps=he;let V=S;try{V.displayName="InteractionEditor",V.__docgenInfo={description:"",displayName:"InteractionEditor",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},elements:{defaultValue:null,description:"",name:"elements",required:!0,type:{name:"readonly any[]"}},graph:{defaultValue:null,description:"",name:"graph",required:!0,type:{name:"Graph"}}}}}catch{}export{V as I};
