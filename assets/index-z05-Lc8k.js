import{r as s}from"./index-4g5l5LRQ.js";import{r as I}from"./index-jmm5gWkb.js";import{a as Q,V as y,I as ye,T as we,U as _e}from"./index-e4P84RkC.js";import{m as ie,c as ae,u as A,T as le,a as z}from"./index-skotlSua.js";import{c as a,b as F,s as m}from"./index-lUErx3pE.js";import{l as x}from"./index-awljIyHI.js";import{e as Ee,b as xe,H as ke,a as Se}from"./index-T3HXbpha.js";import{w as Ce}from"./index-FsYHUvK_.js";import{x as Ie,P as Fe}from"./Popper-bdbcdpLA.js";import{c as Me,L as Te,i as $e}from"./index-Cz55-Vre.js";import{P as te}from"./index-zE8cp1oq.js";import{M as Oe,S as de}from"./index-wjVcXLkf.js";function _(){return _=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},_.apply(this,arguments)}function ce(n,e){if(n==null)return{};var t={},o=Object.keys(n),r,i;for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}const Ae=n=>{switch(n){case"xsmall":return"small";case"small":return"medium";case"medium":return"medium"}},Re=n=>({xsmall:24,small:32,medium:40})[n],H={color:{bg:{hovered:"transparent",active:"transparent",disabled:"transparent",filled:{action:{hovered:"transparent",active:"transparent"},critical:{hovered:"transparent",active:"transparent"}}},stroke:{disabled:{default:a.offBlack32,inverse:a.white50},inverse:a.white,action:{default:a.blue,active:a.activeBlue,inverse:a.fadedBlue},critical:{default:a.red,active:a.activeRed,inverse:a.fadedRed},primary:{action:{hovered:a.blue,active:a.activeBlue},critical:{hovered:a.red,active:a.activeRed},inverse:{default:a.white,hovered:a.white}},secondary:{default:a.offBlack},tertiary:{default:a.offBlack64},filled:{action:{hovered:a.blue,active:a.activeBlue},critical:{hovered:a.red,active:a.activeRed}}}},border:{width:{default:F.width.thin,active:F.width.none,hovered:F.width.thin,hoveredInverse:F.width.thin},radius:{default:F.radius.medium_4}}},Be=ie(H,{color:{bg:{hovered:a.white,active:a.white64,filled:{action:{hovered:a.blue,active:a.activeBlue},critical:{hovered:a.red,active:a.activeRed}}},stroke:{action:{inverse:a.eggplant},critical:{inverse:a.eggplant},primary:{action:{hovered:a.eggplant,active:a.eggplant},critical:{hovered:a.eggplant,active:a.eggplant},inverse:{hovered:a.eggplant}},filled:{action:{hovered:a.white,active:a.white},critical:{hovered:a.white,active:a.white}}}},border:{width:{hovered:F.width.none,hoveredInverse:F.width.none}}}),De={default:H,khanmigo:Be},ue=ae(H);function Le(n){var e;const t=s.useContext(le),o=(e=De[t])!=null?e:H;return s.createElement(ue.Provider,{value:o},n.children)}const Pe=["color","disabled","href","icon","kind","light","size","skipClientNav","style","testId"];function Ne({icon:n,size:e}){switch(Ae(e)){case"small":return s.createElement(te,{size:"small",color:"currentColor",icon:n});case"medium":default:return s.createElement(te,{size:"medium",color:"currentColor",icon:n})}}const Ue=Q("a"),ze=Q("button"),He=Q(Te),je=s.forwardRef(function(e,t){const{color:o,disabled:r,href:i,icon:l,kind:c="primary",light:d=!1,size:h="medium",skipClientNav:u,style:b,testId:f}=e,p=ce(e,Pe),{theme:k,themeName:E}=A(ue),S=K=>{const ee=Ve(o,c,d,h,k,E),ge=[We.shared,ee.default,r&&ee.disabled],V=s.createElement(Ne,{size:h,icon:l}),Y=_({"data-testid":f,style:[ge,b]},p);return i&&!r?K&&!u&&$e(i)?s.createElement(He,_({},Y,{to:i,ref:t}),V):s.createElement(Ue,_({},Y,{href:i,ref:t}),V):s.createElement(ze,_({type:"button"},Y,{onClick:r?void 0:p.onClick,"aria-disabled":r,ref:t}),V)};return s.createElement(Me.Consumer,null,K=>S(K))}),We=x.StyleSheet.create({shared:{position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",padding:0,cursor:"pointer",border:"none",outline:"none",textDecoration:"none",background:"none",margin:-8,touchAction:"manipulation"}}),D={};function Ke(n,e,t,o,r){switch(n){case"primary":const i=r==="destructive"?e.color.stroke.primary.critical.hovered:e.color.stroke.primary.action.hovered;return{":hover":{backgroundColor:e.color.bg.hovered,color:o?e.color.stroke.primary.inverse.hovered:i,outlineColor:o?e.color.stroke.inverse:t,outlineOffset:1,outlineStyle:"solid",outlineWidth:o?e.border.width.hoveredInverse:e.border.width.hovered},":active":{backgroundColor:e.color.bg.active}};case"secondary":case"tertiary":return{":hover":{backgroundColor:r==="destructive"?e.color.bg.filled.critical.hovered:e.color.bg.filled.action.hovered,color:r==="destructive"?e.color.stroke.filled.critical.hovered:e.color.stroke.filled.action.hovered,outlineWidth:e.border.width.active},":active":{backgroundColor:r==="destructive"?e.color.bg.filled.critical.active:e.color.bg.filled.action.active,color:r==="destructive"?e.color.stroke.filled.critical.active:e.color.stroke.filled.action.active,outlineWidth:e.border.width.active}};default:return{":focus-visible":{},":hover":{},":active":{}}}}const Ve=(n="default",e,t,o,r,i)=>{const l=n==="destructive"?r.color.stroke.critical.default:r.color.stroke.action.default,c=`${l}-${e}-${t}-${o}-${i}`;if(D[c])return D[c];if(t&&e!=="primary")throw new Error("Light is only supported for primary IconButtons");const d=(()=>{switch(e){case"primary":return t?r.color.stroke.primary.inverse.default:l;case"secondary":return r.color.stroke.secondary.default;case"tertiary":return r.color.stroke.tertiary.default;default:throw new Error("IconButton kind not recognized")}})(),h=Re(o),u=Ke(e,r,l,t,n),b=n==="destructive"?r.color.stroke.critical.inverse:r.color.stroke.action.inverse,f=n==="destructive"?r.color.stroke.critical.active:r.color.stroke.action.active,p=t?r.color.stroke.inverse:l,k=t?r.color.stroke.disabled.inverse:r.color.stroke.disabled.default,E={backgroundColor:r.color.bg.disabled,color:k,outlineColor:k},S={default:{height:h,width:h,color:d,borderRadius:r.border.radius.default,":hover":_({boxShadow:"none",color:p,borderRadius:r.border.radius.default,outlineWidth:r.border.width.default},u[":hover"]),"@media not (hover: hover)":{":hover":{boxShadow:"none",color:d,borderRadius:r.border.radius.default,outline:"none",backgroundColor:"transparent"}},":focus":{boxShadow:`0 0 0 ${r.border.width.default}px ${p}`,borderRadius:r.border.radius.default},":focus:not(:focus-visible)":{boxShadow:"none"},":focus-visible":_({boxShadow:"none",outlineWidth:r.border.width.default,outlineColor:p,outlineOffset:1,outlineStyle:"solid",borderRadius:r.border.radius.default},u[":focus-visible"]),":active":_({color:t?b:f,outlineWidth:r.border.width.default,outlineColor:t?b:f,outlineOffset:1,outlineStyle:"solid",borderRadius:r.border.radius.default},u[":active"])},disabled:{color:k,cursor:"not-allowed",":hover":_({},E,{outline:"none"}),":active":_({},E,{outline:"none"}),":focus":{boxShadow:`0 0 0 ${r.border.width.default}px ${k}`,borderRadius:r.border.radius.default},":focus:not(:focus-visible)":{boxShadow:"none"},":focus-visible":E}};return D[c]=x.StyleSheet.create(S),D[c]},Ye=["color","disabled","href","kind","light","size","skipClientNav","tabIndex","target"],qe=s.forwardRef(function(e,t){const{color:o="default",disabled:r=!1,href:i,kind:l="primary",light:c=!1,size:d="medium",skipClientNav:h,tabIndex:u,target:b}=e,f=ce(e,Ye);function p(E){const S=E.key;!i&&(S==="Enter"||S==="Space")&&E.preventDefault()}function k(E){const S=E.key;!i&&(S==="Enter"||S==="Space")&&f.onClick&&f.onClick(E)}return s.createElement(Le,null,s.createElement(je,_({},f,{color:o,disabled:r,href:i,kind:l,light:c,ref:t,skipClientNav:h,size:d,target:b,tabIndex:u,onKeyDown:p,onKeyUp:k})))});function N(){return N=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},N.apply(this,arguments)}const j={color:{bg:{inverse:a.darkBlue},text:{inverse:a.white,secondary:a.offBlack64},shadow:{default:a.offBlack16}},border:{radius:F.radius.medium_4},spacing:{dialog:{small:m.medium_16},panel:{closeButton:m.medium_16,footer:m.xLarge_32},header:{xsmall:m.xSmall_8,small:m.medium_16,medium:m.large_24,large:m.xLarge_32}}},Ge=ie(j,{color:{bg:{inverse:a.eggplant}}}),Xe={default:j,khanmigo:Ge},R=ae(j);function Je(n){const e=s.useContext(le),t=Xe[e]||j;return s.createElement(R.Provider,{value:t},n.children)}const Qe=s.forwardRef(function(e,t){const{above:o,below:r,role:i="dialog",style:l,children:c,testId:d,"aria-labelledby":h,"aria-describedby":u}=e,{theme:b}=A(R),f=z(et,b);return s.createElement(y,{style:[f.wrapper,l]},r&&s.createElement(y,{style:f.below},r),s.createElement(y,{role:i,"aria-modal":"true","aria-labelledby":h,"aria-describedby":u,ref:t,style:f.dialog,testId:d},c),o&&s.createElement(y,{style:f.above},o))}),he=s.forwardRef(function(e,t){return s.createElement(Je,null,s.createElement(Qe,N({},e,{ref:t})))}),Ze="@media (max-width: 767px)",et=n=>({wrapper:{display:"flex",flexDirection:"row",alignItems:"stretch",width:"100%",height:"100%",position:"relative",[Ze]:{padding:n.spacing.dialog.small,flexDirection:"column"}},dialog:{width:"100%",height:"100%",borderRadius:n.border.radius,overflow:"hidden"},above:{pointerEvents:"none",position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:1},below:{pointerEvents:"none",position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:-1}});he.displayName="ModalDialog";function U({children:n}){return s.createElement(y,{style:tt.footer},n)}U.__IS_MODAL_FOOTER__=!0;U.isComponentOf=n=>n&&n.type&&n.type.__IS_MODAL_FOOTER__;const tt=x.StyleSheet.create({footer:{flex:"0 0 auto",boxSizing:"border-box",minHeight:m.xxxLarge_64,paddingLeft:m.medium_16,paddingRight:m.medium_16,paddingTop:m.xSmall_8,paddingBottom:m.xSmall_8,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",boxShadow:`0px -1px 0px ${a.offBlack16}`}});function P(n){const{breadcrumbs:e=void 0,light:t,subtitle:o=void 0,testId:r,title:i,titleId:l}=n;if(o&&e)throw new Error("'subtitle' and 'breadcrumbs' can't be used together");const{theme:c}=A(R),d=z(ot,c);return s.createElement(y,{style:[d.header,!t&&d.dark],testId:r},e&&s.createElement(y,{style:d.breadcrumbs},e),s.createElement(Ee,{style:d.title,id:l,testId:r&&`${r}-title`},i),o&&s.createElement(xe,{style:t&&d.subtitle,testId:r&&`${r}-subtitle`},o))}const oe="@media (max-width: 767px)",ot=n=>({header:{boxShadow:`0px 1px 0px ${n.color.shadow.default}`,display:"flex",flexDirection:"column",minHeight:66,padding:`${n.spacing.header.medium}px ${n.spacing.header.large}px`,position:"relative",width:"100%",[oe]:{paddingLeft:n.spacing.header.small,paddingRight:n.spacing.header.small}},dark:{background:n.color.bg.inverse,color:n.color.text.inverse},breadcrumbs:{color:n.color.text.secondary,marginBottom:n.spacing.header.xsmall},title:{paddingRight:n.spacing.header.small,[oe]:{paddingRight:n.spacing.header.large}},subtitle:{color:n.color.text.secondary,marginTop:n.spacing.header.xsmall}});P.defaultProps={light:!0};const nt='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';class rt extends s.Component{constructor(...e){super(...e),this.modalRoot=void 0,this.getModalRoot=t=>{if(!t)return;const o=I.findDOMNode(t);if(!o)throw new Error("Assertion error: modal root should exist after mount");this.modalRoot=o},this.handleFocusMoveToLast=()=>{this.focusElementIn(!1)},this.handleFocusMoveToFirst=()=>{this.focusElementIn(!0)}}tryToFocus(e){if(e instanceof HTMLElement){try{e.focus()}catch{}return document.activeElement===e}}focusElementIn(e){const t=this.modalRoot,o=Array.from(t.querySelectorAll(nt)),r=e?0:o.length-1,i=o[r];this.tryToFocus(i)}render(){const{style:e}=this.props;return s.createElement(s.Fragment,null,s.createElement("div",{tabIndex:0,className:"modal-focus-trap-first",onFocus:this.handleFocusMoveToLast,style:{position:"fixed"}}),s.createElement(y,{style:e,ref:this.getModalRoot},this.props.children),s.createElement("div",{tabIndex:0,className:"modal-focus-trap-last",onFocus:this.handleFocusMoveToFirst,style:{position:"fixed"}}))}}const me="data-modal-launcher-portal",st='a[href], details, input, textarea, select, button:not([aria-label^="Close"])';function it(n){return Array.from(n.querySelectorAll(st))}class at extends s.Component{constructor(...e){super(...e),this._mousePressedOutside=!1,this.handleMouseDown=t=>{this._mousePressedOutside=t.target===t.currentTarget},this.handleMouseUp=t=>{t.target===t.currentTarget&&this._mousePressedOutside&&this.props.onCloseModal(),this._mousePressedOutside=!1}}componentDidMount(){const e=I.findDOMNode(this);if(!e)return;const t=this._getInitialFocusElement(e)||this._getFirstFocusableElement(e)||this._getDialogElement(e);setTimeout(()=>{t.focus()},0)}_getInitialFocusElement(e){const{initialFocusId:t}=this.props;return t?I.findDOMNode(e.querySelector(`#${t}`)):null}_getFirstFocusableElement(e){const t=it(e);return t?t[0]:null}_getDialogElement(e){const t=I.findDOMNode(e.querySelector('[role="dialog"]'));return t.tabIndex=-1,t}render(){const{children:e,testId:t}=this.props,o={[me]:!0};return s.createElement(y,N({style:lt.modalPositioner,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,testId:t},o),e)}}const lt=x.StyleSheet.create({modalPositioner:{position:"fixed",left:0,top:0,width:"100%",height:"100%",alignItems:"center",justifyContent:"center",overflow:"auto",background:a.offBlack64}}),q=(()=>{if(typeof window>"u")return!1;const n=window.navigator.userAgent;return n.indexOf("iPad")>-1||n.indexOf("iPhone")>-1})();class v extends s.Component{componentDidMount(){if(v.numModalsOpened===0){const e=document.body;if(!e)throw new Error("couldn't find document.body");v.oldOverflow=e.style.overflow,v.oldScrollY=window.scrollY,q&&(v.oldPosition=e.style.position,v.oldWidth=e.style.width,v.oldTop=e.style.top),e.style.overflow="hidden",q&&(e.style.position="fixed",e.style.width="100%",e.style.top=`${-v.oldScrollY}px`)}v.numModalsOpened++}componentWillUnmount(){if(v.numModalsOpened--,v.numModalsOpened===0){const e=document.body;if(!e)throw new Error("couldn't find document.body");e.style.overflow=v.oldOverflow,q&&(e.style.position=v.oldPosition,e.style.width=v.oldWidth,e.style.top=v.oldTop),typeof window<"u"&&window.scrollTo&&window.scrollTo(0,v.oldScrollY)}}render(){return null}}v.oldOverflow=void 0;v.oldPosition=void 0;v.oldScrollY=void 0;v.oldWidth=void 0;v.oldTop=void 0;v.numModalsOpened=0;const dt={closeModal:void 0},Z=s.createContext(dt);Z.displayName="ModalContext";class fe extends s.Component{constructor(...e){super(...e),this.lastElementFocusedOutsideModal=void 0,this.state={opened:!1},this._saveLastElementFocused=()=>{this.lastElementFocusedOutsideModal=document.activeElement},this._openModal=()=>{this._saveLastElementFocused(),this.setState({opened:!0})},this._returnFocus=()=>{const{closedFocusId:t,schedule:o}=this.props,r=this.lastElementFocusedOutsideModal;if(t){const i=I.findDOMNode(document.getElementById(t));if(i){o.animationFrame(()=>{i.focus()});return}}r!=null&&o.animationFrame(()=>{r.focus()})},this.handleCloseModal=()=>{this.setState({opened:!1},()=>{const{onClose:t}=this.props;t==null||t(),this._returnFocus()})}}static getDerivedStateFromProps(e,t){return typeof e.opened=="boolean"&&e.children&&console.warn("'children' and 'opened' can't be used together"),typeof e.opened=="boolean"&&!e.onClose&&console.warn("'onClose' should be used with 'opened'"),typeof e.opened!="boolean"&&!e.children&&console.warn("either 'children' or 'opened' must be set"),{opened:typeof e.opened=="boolean"?e.opened:t.opened}}componentDidUpdate(e){!e.opened&&this.props.opened&&this._saveLastElementFocused()}_renderModal(){return typeof this.props.modal=="function"?this.props.modal({closeModal:this.handleCloseModal}):this.props.modal}render(){const e=this.props.children?this.props.children({openModal:this._openModal}):null,{body:t}=document;return t?s.createElement(Z.Provider,{value:{closeModal:this.handleCloseModal}},e,this.state.opened&&I.createPortal(s.createElement(rt,{style:ut.container},s.createElement(at,{initialFocusId:this.props.initialFocusId,testId:this.props.testId,onCloseModal:this.props.backdropDismissEnabled?this.handleCloseModal:()=>{}},this._renderModal())),t),this.state.opened&&s.createElement(ct,{onClose:this.handleCloseModal}),this.state.opened&&s.createElement(v,null)):null}}fe.defaultProps={backdropDismissEnabled:!0};class ct extends s.Component{constructor(...e){super(...e),this._handleKeyup=t=>{t.key==="Escape"&&(t.preventDefault(),t.stopPropagation(),this.props.onClose())}}componentDidMount(){window.addEventListener("keyup",this._handleKeyup)}componentWillUnmount(){window.removeEventListener("keyup",this._handleKeyup)}render(){return null}}const ut=x.StyleSheet.create({container:{zIndex:1080}});Ce(fe);function O(n){const{scrollOverflow:e,style:t,children:o}=n,{theme:r}=A(R),i=z(mt,r);return s.createElement(y,{style:[i.wrapper,e&&i.scrollOverflow]},s.createElement(y,{style:[i.content,t]},o))}O.__IS_MODAL_CONTENT__=!0;O.isComponentOf=n=>n&&n.type&&n.type.__IS_MODAL_CONTENT__;const ht="@media (max-width: 767px)",mt=n=>({wrapper:{flex:1,display:"block"},scrollOverflow:{overflow:"auto"},content:{flex:1,minHeight:"100%",padding:m.xLarge_32,boxSizing:"border-box",[ht]:{padding:`${m.xLarge_32}px ${m.medium_16}px`}}});O.defaultProps={scrollOverflow:!0};class ft extends s.Component{render(){const{light:e,onClick:t,style:o,testId:r}=this.props;return s.createElement(Z.Consumer,null,({closeModal:i})=>{if(i&&t)throw new Error("You've specified 'onClose' on a modal when using ModalLauncher.  Please specify 'onClose' on the ModalLauncher instead");return s.createElement(qe,{icon:Ie,"aria-label":"Close modal",onClick:t||i,kind:e?"primary":"tertiary",light:e,style:o,testId:r})})}}function pe({closeButtonVisible:n=!0,scrollOverflow:e=!0,light:t=!0,content:o,footer:r,header:i,onClose:l,style:c,testId:d}){const{theme:h}=A(R),u=z(pt,h),f=s.useCallback(()=>{const p=O.isComponentOf(o)?o:s.createElement(O,null,o);return p&&s.cloneElement(p,{scrollOverflow:e,style:[!!r&&u.hasFooter,p.props.style]})},[o,r,e,u.hasFooter])();return s.createElement(y,{style:[u.wrapper,!t&&u.dark,c],testId:d&&`${d}-panel`},n&&s.createElement(ft,{light:!t,onClick:l,style:u.closeButton,testId:d&&`${d}-close`}),i,f,!r||U.isComponentOf(r)?r:s.createElement(U,null,r))}pe.defaultProps={closeButtonVisible:!0,scrollOverflow:!0,light:!0};const pt=n=>({wrapper:{flex:"1 1 auto",position:"relative",display:"flex",flexDirection:"column",background:"white",boxSizing:"border-box",overflow:"hidden",height:"100%",width:"100%"},closeButton:{position:"absolute",right:n.spacing.panel.closeButton,top:n.spacing.panel.closeButton,zIndex:1},dark:{background:n.color.bg.inverse,color:n.color.text.inverse},hasFooter:{paddingBottom:n.spacing.panel.footer}});class vt extends s.Component{renderHeader(e){const{title:t,breadcrumbs:o=void 0,subtitle:r=void 0,testId:i}=this.props;return o?s.createElement(P,{title:t,breadcrumbs:o,titleId:e,testId:i&&`${i}-header`}):r?s.createElement(P,{title:t,subtitle:r,titleId:e,testId:i&&`${i}-header`}):s.createElement(P,{title:t,titleId:e,testId:i&&`${i}-header`})}render(){const{onClose:e,footer:t,content:o,above:r,below:i,style:l,closeButtonVisible:c,testId:d,titleId:h,role:u,"aria-describedby":b}=this.props;return s.createElement(Oe,{styleSheets:bt},({styles:f})=>s.createElement(ye,{id:h,scope:"modal"},p=>s.createElement(he,{style:[f.dialog,l],above:r,below:i,testId:d,"aria-labelledby":p,"aria-describedby":b,role:u},s.createElement(pe,{onClose:e,header:this.renderHeader(p),content:o,footer:t,closeButtonVisible:c,testId:d}))))}}vt.defaultProps={closeButtonVisible:!0};const bt={small:x.StyleSheet.create({dialog:{width:"100%",height:"100%",overflow:"hidden"}}),mdOrLarger:x.StyleSheet.create({dialog:{width:"93.75%",maxWidth:576,height:"81.25%",maxHeight:624}})};function gt(n){let e=n&&n.parentElement;for(;e&&!e.hasAttribute(me);)e=e.parentElement;return e}function yt(n){return gt(n)}class wt{constructor(){this._subscribers=[],this._active=!1}_getIndex(e){return this._subscribers.findIndex(t=>t===e)}steal(e){const t=!!this._active;this._active=!0;for(const o of this._subscribers)o!==e&&o.activeStateStolen();return t}giveup(){this._active=!1}subscribe(e){if(this._getIndex(e)>=0)throw new Error("Already subscribed.");return this._subscribers.push(e),()=>{const o=this._getIndex(e);this._subscribers.splice(o,1)}}}const _t=100,Et=75,G=new wt;class B extends s.Component{constructor(e){super(e),this._weSetFocusivity=void 0,this._anchorNode=void 0,this._focused=void 0,this._hovered=void 0,this._stolenFromUs=void 0,this._unsubscribeFromTracker=void 0,this._timeoutID=void 0,this.activeStateStolen=()=>{this._stolenFromUs=this.state.active||!!this._timeoutID,this._focused=!1,this._setActiveState(!1,!0)},this._handleFocusIn=()=>{this._updateActiveState(this._hovered,!0)},this._handleFocusOut=()=>{this._updateActiveState(this._hovered,!1)},this._handleMouseEnter=()=>{this._updateActiveState(!0,this._focused)},this._handleMouseLeave=()=>{this._updateActiveState(!1,this._focused)},this._handleKeyUp=t=>{t.key==="Escape"&&this.state.active&&(t.preventDefault(),t.stopPropagation(),this._updateActiveState(!1,!1))},this._focused=!1,this._hovered=!1,this.state={active:!1}}componentDidMount(){const e=I.findDOMNode(this);if(e instanceof Text)throw new Error("TooltipAnchor must be applied to an Element. Text content is not supported.");this._unsubscribeFromTracker=G.subscribe(this),this._anchorNode=e,this._updateFocusivity(),e&&(e.addEventListener("focusin",this._handleFocusIn),e.addEventListener("focusout",this._handleFocusOut),e.addEventListener("mouseenter",this._handleMouseEnter),e.addEventListener("mouseleave",this._handleMouseLeave),this.props.anchorRef(this._anchorNode))}componentDidUpdate(e){(e.forceAnchorFocusivity!==this.props.forceAnchorFocusivity||e.children!==this.props.children)&&this._updateFocusivity()}componentWillUnmount(){this._unsubscribeFromTracker&&this._unsubscribeFromTracker(),this._clearPendingAction();const e=this._anchorNode;e&&(e.removeEventListener("focusin",this._handleFocusIn),e.removeEventListener("focusout",this._handleFocusOut),e.removeEventListener("mouseenter",this._handleMouseEnter),e.removeEventListener("mouseleave",this._handleMouseLeave)),this.state.active&&document.removeEventListener("keyup",this._handleKeyUp)}_updateFocusivity(){const e=this._anchorNode;if(!e)return;const{forceAnchorFocusivity:t}=this.props,o=e.getAttribute("tabindex");t&&!o?(e.setAttribute("tabindex","0"),this._weSetFocusivity=!0):!t&&o&&this._weSetFocusivity&&(e.removeAttribute("tabindex"),this._weSetFocusivity=!1)}_updateActiveState(e,t){this._hovered=e,this._focused=t,this._setActiveState(e||t)}_clearPendingAction(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}_setActiveState(e,t){if(this._stolenFromUs||e!==this.state.active||!this.state.active&&this._timeoutID)this._clearPendingAction();else if(e===this.state.active&&!this._timeoutID)return;if(t=t||e&&G.steal(this),t)e?document.addEventListener("keyup",this._handleKeyUp):document.removeEventListener("keyup",this._handleKeyUp),this.setState({active:e}),this.props.onActiveChanged(e),!this._stolenFromUs&&!e&&G.giveup(),this._stolenFromUs=!1;else{const o=e?_t:Et;this._timeoutID=setTimeout(()=>{this._timeoutID=null,this._setActiveState(e,!0)},o)}}_renderAnchorableChildren(){const{children:e}=this.props;return typeof e=="string"?s.createElement(we,null,e):e}_renderAccessibleChildren(e){const t=this._renderAnchorableChildren();return s.cloneElement(t,{"aria-describedby":e.get(B.ariaContentId)})}render(){return this.props.ids?this._renderAccessibleChildren(this.props.ids):this._renderAnchorableChildren()}}B.defaultProps={forceAnchorFocusivity:!0};B.ariaContentId="aria-content";function X(){return X=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o])}return n},X.apply(this,arguments)}let xt=0;class ve extends s.Component{_calculateDimensionsFromPlacement(){const{placement:e}=this.props,t=.5;switch(e){case"top":return{trimlinePoints:[`0,-${t}`,`${g},-${t}`],points:["0,0",`${g/2},${w}`,`${g},0`],height:w,width:g};case"right":return{trimlinePoints:[`${w+t},0`,`${w+t},${g}`],points:[`${w},0`,`0,${g/2}`,`${w},${g}`],width:w,height:g};case"bottom":return{trimlinePoints:[`0, ${w+t}`,`${g},${w+t}`],points:[`0, ${w}`,`${g/2},0`,`${g},${w}`],width:g,height:w};case"left":return{trimlinePoints:[`-${t},0`,`-${t},${g}`],points:["0,0",`${w},${g/2}`,`0,${g}`],width:w,height:g};default:throw new Error(`Unknown placement: ${e}`)}}_getFilterPositioning(){const{placement:e}=this.props;switch(e){case"top":return{y:"-50%",x:"-50%",offsetShadowX:0};case"bottom":return null;case"left":return{y:"-50%",x:"0%",offsetShadowX:1};case"right":return{y:"-50%",x:"-100%",offsetShadowX:-1};default:throw new Error(`Unknown placement: ${e}`)}}_maybeRenderDropshadow(e){const t=this._getFilterPositioning();if(!t)return null;const{placement:o}=this.props,{y:r,x:i,offsetShadowX:l}=t,c=`tooltip-dropshadow-${o}-${xt++}`;return[s.createElement("filter",{key:"filter",id:c,width:"200%",height:"200%",x:i,y:r},s.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:m.xxSmall_6/2}),s.createElement("feComponentTransfer",null,s.createElement("feFuncA",{type:"linear",slope:"0.3"}))),s.createElement("g",{key:"dropshadow",transform:`translate(${l},5.5)`},s.createElement("polyline",{fill:a.offBlack16,points:e.join(" "),stroke:a.offBlack32,filter:`url(#${c})`}))]}_getFullTailWidth(){return g+2*C}_getFullTailHeight(){return w+$}_getContainerStyle(){const{placement:e}=this.props,t=this._getFullTailWidth(),o=this._getFullTailHeight();switch(e){case"top":return{top:-1,width:t,height:o};case"right":return{left:1,width:o,height:t};case"bottom":return{top:1,width:t,height:o};case"left":return{left:-1,width:o,height:t};default:throw new Error(`Unknown placement: ${e}`)}}_getArrowStyle(){const{placement:e}=this.props;switch(e){case"top":return{marginLeft:C,marginRight:C,paddingBottom:$};case"right":return{marginTop:C,marginBottom:C,paddingLeft:$};case"bottom":return{marginLeft:C,marginRight:C,paddingTop:$};case"left":return{marginTop:C,marginBottom:C,paddingRight:$};default:throw new Error(`Unknown placement: ${e}`)}}_renderArrow(){const{trimlinePoints:e,points:t,height:o,width:r}=this._calculateDimensionsFromPlacement(),{color:i,show:l}=this.props;return l?s.createElement("svg",{className:x.css(ne.arrow),style:this._getArrowStyle(),width:r,height:o,"aria-hidden":!0},this._maybeRenderDropshadow(t),s.createElement("polyline",{fill:a[i],stroke:a[i],points:t.join(" ")}),s.createElement("polyline",{fill:a[i],points:t.join(" "),stroke:a.offBlack16}),s.createElement("polyline",{stroke:a[i],points:e.join(" ")})):s.createElement(de,{size:o})}render(){const{offset:e,placement:t,updateRef:o}=this.props;return s.createElement(y,{style:[ne.tailContainer,X({},e),this._getContainerStyle()],"data-placement":t,ref:o},this._renderArrow())}}ve.defaultProps={color:"white",show:!0};const $=m.xSmall_8,C=m.xSmall_8,g=m.large_24,w=m.small_12,ne=x.StyleSheet.create({tailContainer:{position:"relative",pointerEvents:"none"},arrow:{overflow:"visible"}});class kt extends s.Component{constructor(...e){super(...e),this.state={active:!1},this.handleMouseEnter=()=>{this._setActiveState(!0)},this.handleMouseLeave=()=>{this.props.onActiveChanged(!1)}}_setActiveState(e){this.setState({active:e}),this.props.onActiveChanged(e)}render(){const{id:e,children:t,updateBubbleRef:o,placement:r,isReferenceHidden:i,style:l,updateTailRef:c,tailOffset:d,backgroundColor:h}=this.props;return s.createElement(y,{id:e,role:"tooltip","data-placement":r,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,ref:o,style:[i&&L.hide,L.bubble,L[`content-${r}`],l]},s.createElement(y,{style:[L.content,h&&{backgroundColor:a[h]}]},t),s.createElement(ve,{updateRef:c,placement:r,offset:d,color:h}))}}const L=x.StyleSheet.create({bubble:{position:"absolute"},hide:{pointerEvents:"none",opacity:0,backgroundColor:"transparent",color:"transparent"},"content-top":{flexDirection:"column"},"content-right":{flexDirection:"row-reverse"},"content-bottom":{flexDirection:"column-reverse"},"content-left":{flexDirection:"row"},content:{maxWidth:472,borderRadius:m.xxxSmall_4,border:`solid 1px ${a.offBlack16}`,backgroundColor:a.white,boxShadow:`0 ${m.xSmall_8}px ${m.xSmall_8}px 0 ${a.offBlack8}`,justifyContent:"center"}});class St extends s.Component{_renderTitle(){const{title:e}=this.props;return e?typeof e=="string"?s.createElement(ke,null,e):e:null}_renderChildren(){const{children:e}=this.props;return typeof e=="string"?s.createElement(Se,null,e):e}render(){const e=this._renderTitle(),t=this._renderChildren(),o=e?re.withTitle:re.withoutTitle;return s.createElement(y,{style:[o,this.props.contentStyle],testId:this.props.testId},e,e&&t&&s.createElement(de,{size:m.xxxSmall_4}),t)}}const re=x.StyleSheet.create({withoutTitle:{padding:`10px ${m.medium_16}px`},withTitle:{padding:m.medium_16}});var J=n=>n==null||typeof n!="object"?n:Array.isArray(n)?n.map(J):Object.keys(n).reduce((e,t)=>(e[t]=J(n[t]),e),{}),be=Object.freeze({Unknown:"Unknown",Internal:"Internal",InvalidInput:"InvalidInput",InvalidUse:"InvalidUse",NotFound:"NotFound",NotAllowed:"NotAllowed",Unauthorized:"Unauthorized",NotImplemented:"NotImplemented"});function M(n,e,t){return(e=function(o){var r=function(i,l){if(typeof i!="object"||i===null)return i;var c=i[Symbol.toPrimitive];if(c!==void 0){var d=c.call(i,l||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(i)}(o,"string");return typeof r=="symbol"?r:String(r)}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}class T{constructor(e,t,o){M(this,"_name",void 0),M(this,"_message",void 0),M(this,"_stackFrames",void 0),this._name=e,this._message=t,this._stackFrames=[...o]}get message(){return this._message}get name(){return this._name}get messageWithName(){return"".concat(this.name,": ").concat(this.message)}get stack(){return[...this._stackFrames]}get standardizedStack(){return"".concat(this.messageWithName,`
`).concat(this._stackFrames.join(`
`))}static fromConsequenceAndCause(e,t){for(var o,r=[],i=t.stack,l=(o=e==null?void 0:e.stack)!==null&&o!==void 0?o:[],c=i.length-1,d=l.length-1;c>=0&&d>=0&&i[c]===l[d];)r.unshift(i[c]),c--,d--;for(;c>=0;c--)r.unshift(i[c]);for(;d>=0;d--)r.unshift(l[d]);return new T(e.name,((h,u)=>{var b=p=>(p==null?void 0:p.trim())||"(empty message)",f=b(h);return u==null?f:"".concat(f,`
	caused by
		`).concat(b(u))})(e.message,t.messageWithName),r)}static normalize(e){var t,o,r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,c=(t=e.message.toString().split(`
`).find(b=>b.trim().length))!==null&&t!==void 0?t:"(empty message)",d=e.toString(),h=((o=e.stack)!==null&&o!==void 0&&o.startsWith(d)&&e.stack!==d?e.stack.substring(d.length):(r=e.stack)!==null&&r!==void 0?r:"").split(`
`).filter(b=>b.trim().length),u=h.length>=i+l?i:0;return new T(e.name,c,h.slice(u))}static from(e){var t,o,r=e.toString(),i=((t=e.stack)!==null&&t!==void 0&&t.startsWith(r)&&e.stack!==r?e.stack.substring(r.length):(o=e.stack)!==null&&o!==void 0?o:"").split(`
`).filter(l=>l.trim().length);return new T(e.name,e.message,i)}}class Ct extends Error{constructor(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:be.Unknown,{cause:o,prefix:r,name:i,metadata:l,stripStackFrames:c,minimumFrameCount:d,compositeStack:h}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Object.freeze({});super(e),M(this,"kind",void 0),M(this,"originalMessage",void 0),M(this,"originalStack",void 0),M(this,"metadata",void 0),M(this,"cause",void 0),this.originalMessage=e,this.metadata=(p=>{if(p==null)return p;var k=J(p);return Object.freeze(k)})(l),this.name="".concat(r??"").concat(t).concat(i??"","Error"),this.kind=t,this.originalStack=this.stack,this.cause=o;var u=T.normalize(this,c??0,d??1);if(delete this.stack,this.stack=u.standardizedStack,o!=null){var b=T.from(o),f=T.fromConsequenceAndCause(u,b);this.message=f.message,h===!0&&(this.stack=f.standardizedStack)}}}class It extends Ct{constructor(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:be.InvalidInput,o=arguments.length>2?arguments[2]:void 0;super("Unhandled case for '".concat(e,"'"),t,o)}}class se{constructor(){this._lastRef=void 0,this._targetFn=void 0,this.updateRef=e=>{if(e){const o=I.findDOMNode(e);if(o instanceof HTMLElement&&o!==this._lastRef){var t;this._lastRef=o,(t=this._targetFn)==null||t.call(this,o)}}},this.setCallback=e=>{if(this._targetFn!==e){if(e&&typeof e!="function")throw new Error("targetFn must be a function");this._targetFn=e||void 0,this._lastRef&&this._targetFn&&this._targetFn(this._lastRef)}}}}const Ft=n=>{switch(n){case"auto":case"auto-start":case"auto-end":case"top":case"top-start":case"top-end":return"top";case"bottom":case"bottom-start":case"bottom-end":return"bottom";case"right":case"right-start":case"right-end":return"right";case"left":case"left-start":case"left-end":return"left";default:throw new It(n)}};class Mt extends s.Component{constructor(...e){super(...e),this._bubbleRefTracker=new se,this._tailRefTracker=new se,this._observer=null,this._popperUpdate=null}componentDidMount(){const{anchorElement:e,autoUpdate:t}=this.props;!e||!t||(this._observer=new MutationObserver(()=>{var o;(o=this._popperUpdate)==null||o.call(this)}),this._observer.observe(e,{attributes:!0,childList:!0,subtree:!0}))}componentWillUnmount(){var e;(e=this._observer)==null||e.disconnect()}_renderPositionedContent(e){const{children:t}=this.props,o=Ft(e.placement)||this.props.placement;this._bubbleRefTracker.setCallback(e.ref),this._tailRefTracker.setCallback(e.arrowProps.ref),this._popperUpdate=e.update;const r={placement:o,style:{top:e.style.top,left:e.style.left,bottom:e.style.bottom,right:e.style.right,position:e.style.position,transform:e.style.transform},updateBubbleRef:this._bubbleRefTracker.updateRef,tailOffset:{bottom:e.arrowProps.style.bottom,right:e.arrowProps.style.right,top:e.arrowProps.style.top,left:e.arrowProps.style.left,transform:e.arrowProps.style.transform},updateTailRef:this._tailRefTracker.updateRef,isReferenceHidden:e.isReferenceHidden};return t(r)}render(){const{anchorElement:e,placement:t}=this.props;return s.createElement(Fe,{referenceElement:e,strategy:"fixed",placement:t,modifiers:[{name:"preventOverflow",options:{rootBoundary:"viewport"}}]},o=>this._renderPositionedContent(o))}}class W extends s.Component{constructor(...e){super(...e),this.state={active:!1,activeBubble:!1}}static getDerivedStateFromProps(e,t){return{active:typeof e.opened=="boolean"?e.opened:t.active}}_updateAnchorElement(e){e&&e!==this.state.anchorElement&&this.setState({anchorElement:e})}_renderBubbleContent(){const{title:e,content:t,contentStyle:o,testId:r}=this.props;return typeof t=="string"?s.createElement(St,{title:e,contentStyle:o,testId:r?`${r}-content`:void 0},t):e?s.cloneElement(t,{title:e}):t}_renderPopper(e){const{id:t,backgroundColor:o}=this.props,r=e?e.get(W.ariaContentId):t;if(!r)throw new Error("Did not get an identifier factory nor a id prop");const{placement:i}=this.props;return s.createElement(Mt,{anchorElement:this.state.anchorElement,placement:i,autoUpdate:this.props.autoUpdate},l=>s.createElement(kt,{id:r,style:l.style,backgroundColor:o,tailOffset:l.tailOffset,isReferenceHidden:l.isReferenceHidden,placement:l.placement,updateTailRef:l.updateTailRef,updateBubbleRef:l.updateBubbleRef,onActiveChanged:c=>this.setState({activeBubble:c})},this._renderBubbleContent()))}_getHost(){const{anchorElement:e}=this.state;return yt(e)||document.body}_renderTooltipAnchor(e){const{autoUpdate:t,children:o,forceAnchorFocusivity:r}=this.props,{active:i,activeBubble:l}=this.state,c=this._getHost(),d=t?this.state.anchorElement:!0,h=c&&(i||l)&&d;return s.createElement(s.Fragment,null,s.createElement(B,{forceAnchorFocusivity:r,anchorRef:u=>this._updateAnchorElement(u),onActiveChanged:u=>this.setState({active:u}),ids:e},o),h&&I.createPortal(this._renderPopper(e),c))}render(){const{id:e}=this.props;return e?this._renderTooltipAnchor():s.createElement(_e,{scope:"tooltip",mockOnFirstRender:!0},t=>this._renderTooltipAnchor(t))}}W.defaultProps={forceAnchorFocusivity:!0,placement:"top"};W.ariaContentId="aria-content";export{qe as I,W as T,yt as m};
