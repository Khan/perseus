import{a as ot}from"./version-akiLXZts.js";import{$ as he,_ as re}from"./jquery-yG1GhClm.js";import{c as ft,g as ht}from"./_commonjsHelpers-4gQjN7DL.js";const Le=Object.freeze({Unknown:"Unknown",Internal:"Internal",InvalidInput:"InvalidInput",NotAllowed:"NotAllowed",TransientService:"TransientService",Service:"Service"});class ze extends Error{constructor(e,n,u){super(e),this.kind=n,this.metadata=u==null?void 0:u.metadata}}const Mt="@khanacademy/kas",kt="__lib_version__";ot(Mt,kt);var $e={exports:{}};(function(a,e){(function(){var n=this,u=n._,l={},f=Array.prototype,o=Object.prototype,d=Function.prototype,v=f.push,y=f.slice,p=f.concat,g=o.toString,m=o.hasOwnProperty,M=f.forEach,E=f.map,A=f.reduce,O=f.reduceRight,D=f.filter,B=f.every,K=f.some,ie=f.indexOf,de=f.lastIndexOf,X=Array.isArray,j=Object.keys,se=d.bind,i=function(t){if(t instanceof i)return t;if(!(this instanceof i))return new i(t);this._wrapped=t};a.exports&&(e=a.exports=i),e._=i,i.VERSION="1.4.4";var L=i.each=i.forEach=function(t,r,s){if(t!=null){if(M&&t.forEach===M)t.forEach(r,s);else if(t.length===+t.length){for(var c=0,h=t.length;c<h;c++)if(r.call(s,t[c],c,t)===l)return}else for(var I in t)if(i.has(t,I)&&r.call(s,t[I],I,t)===l)return}};i.map=i.collect=function(t,r,s){var c=[];return t==null?c:E&&t.map===E?t.map(r,s):(L(t,function(h,I,x){c[c.length]=r.call(s,h,I,x)}),c)};var ge="Reduce of empty array with no initial value";i.reduce=i.foldl=i.inject=function(t,r,s,c){var h=arguments.length>2;if(t==null&&(t=[]),A&&t.reduce===A)return c&&(r=i.bind(r,c)),h?t.reduce(r,s):t.reduce(r);if(L(t,function(I,x,F){h?s=r.call(c,s,I,x,F):(s=I,h=!0)}),!h)throw new TypeError(ge);return s},i.reduceRight=i.foldr=function(t,r,s,c){var h=arguments.length>2;if(t==null&&(t=[]),O&&t.reduceRight===O)return c&&(r=i.bind(r,c)),h?t.reduceRight(r,s):t.reduceRight(r);var I=t.length;if(I!==+I){var x=i.keys(t);I=x.length}if(L(t,function(F,R,W){R=x?x[--I]:--I,h?s=r.call(c,s,t[R],R,W):(s=t[R],h=!0)}),!h)throw new TypeError(ge);return s},i.find=i.detect=function(t,r,s){var c;return Z(t,function(h,I,x){if(r.call(s,h,I,x))return c=h,!0}),c},i.filter=i.select=function(t,r,s){var c=[];return t==null?c:D&&t.filter===D?t.filter(r,s):(L(t,function(h,I,x){r.call(s,h,I,x)&&(c[c.length]=h)}),c)},i.reject=function(t,r,s){return i.filter(t,function(c,h,I){return!r.call(s,c,h,I)},s)},i.every=i.all=function(t,r,s){r||(r=i.identity);var c=!0;return t==null?c:B&&t.every===B?t.every(r,s):(L(t,function(h,I,x){if(!(c=c&&r.call(s,h,I,x)))return l}),!!c)};var Z=i.some=i.any=function(t,r,s){r||(r=i.identity);var c=!1;return t==null?c:K&&t.some===K?t.some(r,s):(L(t,function(h,I,x){if(c||(c=r.call(s,h,I,x)))return l}),!!c)};i.contains=i.include=function(t,r){return t==null?!1:ie&&t.indexOf===ie?t.indexOf(r)!=-1:Z(t,function(s){return s===r})},i.invoke=function(t,r){var s=y.call(arguments,2),c=i.isFunction(r);return i.map(t,function(h){return(c?r:h[r]).apply(h,s)})},i.pluck=function(t,r){return i.map(t,function(s){return s[r]})},i.where=function(t,r,s){return i.isEmpty(r)?s?null:[]:i[s?"find":"filter"](t,function(c){for(var h in r)if(r[h]!==c[h])return!1;return!0})},i.findWhere=function(t,r){return i.where(t,r,!0)},i.max=function(t,r,s){if(!r&&i.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!r&&i.isEmpty(t))return-1/0;var c={computed:-1/0,value:-1/0};return L(t,function(h,I,x){var F=r?r.call(s,h,I,x):h;F>=c.computed&&(c={value:h,computed:F})}),c.value},i.min=function(t,r,s){if(!r&&i.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!r&&i.isEmpty(t))return 1/0;var c={computed:1/0,value:1/0};return L(t,function(h,I,x){var F=r?r.call(s,h,I,x):h;F<c.computed&&(c={value:h,computed:F})}),c.value},i.shuffle=function(t){var r,s=0,c=[];return L(t,function(h){r=i.random(s++),c[s-1]=c[r],c[r]=h}),c};var Q=function(t){return i.isFunction(t)?t:function(r){return r[t]}};i.sortBy=function(t,r,s){var c=Q(r);return i.pluck(i.map(t,function(h,I,x){return{value:h,index:I,criteria:c.call(s,h,I,x)}}).sort(function(h,I){var x=h.criteria,F=I.criteria;if(x!==F){if(x>F||x===void 0)return 1;if(x<F||F===void 0)return-1}return h.index<I.index?-1:1}),"value")};var S=function(t,r,s,c){var h={},I=Q(r||i.identity);return L(t,function(x,F){var R=I.call(s,x,F,t);c(h,R,x)}),h};i.groupBy=function(t,r,s){return S(t,r,s,function(c,h,I){(i.has(c,h)?c[h]:c[h]=[]).push(I)})},i.countBy=function(t,r,s){return S(t,r,s,function(c,h){i.has(c,h)||(c[h]=0),c[h]++})},i.sortedIndex=function(t,r,s,c){s=s==null?i.identity:Q(s);for(var h=s.call(c,r),I=0,x=t.length;I<x;){var F=I+x>>>1;s.call(c,t[F])<h?I=F+1:x=F}return I},i.toArray=function(t){return t?i.isArray(t)?y.call(t):t.length===+t.length?i.map(t,i.identity):i.values(t):[]},i.size=function(t){return t==null?0:t.length===+t.length?t.length:i.keys(t).length},i.first=i.head=i.take=function(t,r,s){if(t!=null)return r!=null&&!s?y.call(t,0,r):t[0]},i.initial=function(t,r,s){return y.call(t,0,t.length-(r==null||s?1:r))},i.last=function(t,r,s){if(t!=null)return r!=null&&!s?y.call(t,Math.max(t.length-r,0)):t[t.length-1]},i.rest=i.tail=i.drop=function(t,r,s){return y.call(t,r==null||s?1:r)},i.compact=function(t){return i.filter(t,i.identity)};var V=function(t,r,s){return L(t,function(c){i.isArray(c)?r?v.apply(s,c):V(c,r,s):s.push(c)}),s};i.flatten=function(t,r){return V(t,r,[])},i.without=function(t){return i.difference(t,y.call(arguments,1))},i.uniq=i.unique=function(t,r,s,c){i.isFunction(r)&&(c=s,s=r,r=!1);var h=s?i.map(t,s,c):t,I=[],x=[];return L(h,function(F,R){(r?!R||x[x.length-1]!==F:!i.contains(x,F))&&(x.push(F),I.push(t[R]))}),I},i.union=function(){return i.uniq(p.apply(f,arguments))},i.intersection=function(t){var r=y.call(arguments,1);return i.filter(i.uniq(t),function(s){return i.every(r,function(c){return i.indexOf(c,s)>=0})})},i.difference=function(t){var r=p.apply(f,y.call(arguments,1));return i.filter(t,function(s){return!i.contains(r,s)})},i.zip=function(){for(var t=y.call(arguments),r=i.max(i.pluck(t,"length")),s=new Array(r),c=0;c<r;c++)s[c]=i.pluck(t,""+c);return s},i.object=function(t,r){if(t==null)return{};for(var s={},c=0,h=t.length;c<h;c++)r?s[t[c]]=r[c]:s[t[c][0]]=t[c][1];return s},i.indexOf=function(t,r,s){if(t==null)return-1;var c=0,h=t.length;if(s)if(typeof s=="number")c=s<0?Math.max(0,h+s):s;else return c=i.sortedIndex(t,r),t[c]===r?c:-1;if(ie&&t.indexOf===ie)return t.indexOf(r,s);for(;c<h;c++)if(t[c]===r)return c;return-1},i.lastIndexOf=function(t,r,s){if(t==null)return-1;var c=s!=null;if(de&&t.lastIndexOf===de)return c?t.lastIndexOf(r,s):t.lastIndexOf(r);for(var h=c?s:t.length;h--;)if(t[h]===r)return h;return-1},i.range=function(t,r,s){arguments.length<=1&&(r=t||0,t=0),s=arguments[2]||1;for(var c=Math.max(Math.ceil((r-t)/s),0),h=0,I=new Array(c);h<c;)I[h++]=t,t+=s;return I},i.bind=function(t,r){if(t.bind===se&&se)return se.apply(t,y.call(arguments,1));var s=y.call(arguments,2);return function(){return t.apply(r,s.concat(y.call(arguments)))}},i.partial=function(t){var r=y.call(arguments,1);return function(){return t.apply(this,r.concat(y.call(arguments)))}},i.bindAll=function(t){var r=y.call(arguments,1);return r.length===0&&(r=i.functions(t)),L(r,function(s){t[s]=i.bind(t[s],t)}),t},i.memoize=function(t,r){var s={};return r||(r=i.identity),function(){var c=r.apply(this,arguments);return i.has(s,c)?s[c]:s[c]=t.apply(this,arguments)}},i.delay=function(t,r){var s=y.call(arguments,2);return setTimeout(function(){return t.apply(null,s)},r)},i.defer=function(t){return i.delay.apply(i,[t,1].concat(y.call(arguments,1)))},i.throttle=function(t,r){var s,c,h,I,x=0,F=function(){x=new Date,h=null,I=t.apply(s,c)};return function(){var R=new Date,W=r-(R-x);return s=this,c=arguments,W<=0?(clearTimeout(h),h=null,x=R,I=t.apply(s,c)):h||(h=setTimeout(F,W)),I}},i.debounce=function(t,r,s){var c,h;return function(){var I=this,x=arguments,F=function(){c=null,s||(h=t.apply(I,x))},R=s&&!c;return clearTimeout(c),c=setTimeout(F,r),R&&(h=t.apply(I,x)),h}},i.once=function(t){var r=!1,s;return function(){return r||(r=!0,s=t.apply(this,arguments),t=null),s}},i.wrap=function(t,r){return function(){var s=[t];return v.apply(s,arguments),r.apply(this,s)}},i.compose=function(){var t=arguments;return function(){for(var r=arguments,s=t.length-1;s>=0;s--)r=[t[s].apply(this,r)];return r[0]}},i.after=function(t,r){return t<=0?r():function(){if(--t<1)return r.apply(this,arguments)}},i.keys=j||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var r=[];for(var s in t)i.has(t,s)&&(r[r.length]=s);return r},i.values=function(t){var r=[];for(var s in t)i.has(t,s)&&r.push(t[s]);return r},i.pairs=function(t){var r=[];for(var s in t)i.has(t,s)&&r.push([s,t[s]]);return r},i.invert=function(t){var r={};for(var s in t)i.has(t,s)&&(r[t[s]]=s);return r},i.functions=i.methods=function(t){var r=[];for(var s in t)i.isFunction(t[s])&&r.push(s);return r.sort()},i.extend=function(t){return L(y.call(arguments,1),function(r){if(r)for(var s in r)t[s]=r[s]}),t},i.pick=function(t){var r={},s=p.apply(f,y.call(arguments,1));return L(s,function(c){c in t&&(r[c]=t[c])}),r},i.omit=function(t){var r={},s=p.apply(f,y.call(arguments,1));for(var c in t)i.contains(s,c)||(r[c]=t[c]);return r},i.defaults=function(t){return L(y.call(arguments,1),function(r){if(r)for(var s in r)t[s]==null&&(t[s]=r[s])}),t},i.clone=function(t){return i.isObject(t)?i.isArray(t)?t.slice():i.extend({},t):t},i.tap=function(t,r){return r(t),t};var b=function(t,r,s,c){if(t===r)return t!==0||1/t==1/r;if(t==null||r==null)return t===r;t instanceof i&&(t=t._wrapped),r instanceof i&&(r=r._wrapped);var h=g.call(t);if(h!=g.call(r))return!1;switch(h){case"[object String]":return t==String(r);case"[object Number]":return t!=+t?r!=+r:t==0?1/t==1/r:t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object RegExp]":return t.source==r.source&&t.global==r.global&&t.multiline==r.multiline&&t.ignoreCase==r.ignoreCase}if(typeof t!="object"||typeof r!="object")return!1;for(var I=s.length;I--;)if(s[I]==t)return c[I]==r;s.push(t),c.push(r);var x=0,F=!0;if(h=="[object Array]"){if(x=t.length,F=x==r.length,F)for(;x--&&(F=b(t[x],r[x],s,c)););}else{var R=t.constructor,W=r.constructor;if(R!==W&&!(i.isFunction(R)&&R instanceof R&&i.isFunction(W)&&W instanceof W))return!1;for(var J in t)if(i.has(t,J)&&(x++,!(F=i.has(r,J)&&b(t[J],r[J],s,c))))break;if(F){for(J in r)if(i.has(r,J)&&!x--)break;F=!x}}return s.pop(),c.pop(),F};i.isEqual=function(t,r){return b(t,r,[],[])},i.isEmpty=function(t){if(t==null)return!0;if(i.isArray(t)||i.isString(t))return t.length===0;for(var r in t)if(i.has(t,r))return!1;return!0},i.isElement=function(t){return!!(t&&t.nodeType===1)},i.isArray=X||function(t){return g.call(t)=="[object Array]"},i.isObject=function(t){return t===Object(t)},L(["Arguments","Function","String","Number","Date","RegExp"],function(t){i["is"+t]=function(r){return g.call(r)=="[object "+t+"]"}}),i.isArguments(arguments)||(i.isArguments=function(t){return!!(t&&i.has(t,"callee"))}),typeof/./!="function"&&(i.isFunction=function(t){return typeof t=="function"}),i.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},i.isNaN=function(t){return i.isNumber(t)&&t!=+t},i.isBoolean=function(t){return t===!0||t===!1||g.call(t)=="[object Boolean]"},i.isNull=function(t){return t===null},i.isUndefined=function(t){return t===void 0},i.has=function(t,r){return m.call(t,r)},i.noConflict=function(){return n._=u,this},i.identity=function(t){return t},i.times=function(t,r,s){for(var c=Array(t),h=0;h<t;h++)c[h]=r.call(s,h);return c},i.random=function(t,r){return r==null&&(r=t,t=0),t+Math.floor(Math.random()*(r-t+1))};var T={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};T.unescape=i.invert(T.escape);var C={escape:new RegExp("["+i.keys(T.escape).join("")+"]","g"),unescape:new RegExp("("+i.keys(T.unescape).join("|")+")","g")};i.each(["escape","unescape"],function(t){i[t]=function(r){return r==null?"":(""+r).replace(C[t],function(s){return T[t][s]})}}),i.result=function(t,r){if(t==null)return null;var s=t[r];return i.isFunction(s)?s.call(t):s},i.mixin=function(t){L(i.functions(t),function(r){var s=i[r]=t[r];i.prototype[r]=function(){var c=[this._wrapped];return v.apply(c,arguments),me.call(this,s.apply(i,c))}})};var q=0;i.uniqueId=function(t){var r=++q+"";return t?t+r:r},i.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var le=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},fe=/\\|'|\r|\n|\t|\u2028|\u2029/g;i.template=function(t,r,s){var c;s=i.defaults({},s,i.templateSettings);var h=new RegExp([(s.escape||le).source,(s.interpolate||le).source,(s.evaluate||le).source].join("|")+"|$","g"),I=0,x="__p+='";t.replace(h,function(R,W,J,ye,pe){return x+=t.slice(I,pe).replace(fe,function(Ee){return"\\"+G[Ee]}),W&&(x+=`'+
((__t=(`+W+`))==null?'':_.escape(__t))+
'`),J&&(x+=`'+
((__t=(`+J+`))==null?'':__t)+
'`),ye&&(x+=`';
`+ye+`
__p+='`),I=pe+R.length,R}),x+=`';
`,s.variable||(x=`with(obj||{}){
`+x+`}
`),x=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+x+`return __p;
`;try{c=new Function(s.variable||"obj","_",x)}catch(R){throw R.source=x,R}if(r)return c(r,i);var F=function(R){return c.call(this,R,i)};return F.source="function("+(s.variable||"obj")+`){
`+x+"}",F},i.chain=function(t){return i(t).chain()};var me=function(t){return this._chain?i(t).chain():t};i.mixin(i),L(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var r=f[t];i.prototype[t]=function(){var s=this._wrapped;return r.apply(s,arguments),(t=="shift"||t=="splice")&&s.length===0&&delete s[0],me.call(this,s)}}),L(["concat","join","slice"],function(t){var r=f[t];i.prototype[t]=function(){return me.call(this,r.apply(this._wrapped,arguments))}}),i.extend(i.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(ft)})($e,$e.exports);var Nt=$e.exports;const w=ht(Nt);(function(){var a=function(y,p,g,m){for(g=g||{},m=y.length;m--;g[y[m]]=p);return g},e=[1,11],n=[1,9],u=[8,17],l=[6,11],f=[6,11,13,17],o={trace:function(){},yy:{},symbols_:{error:2,unitvalue:3,magnitude:4,unit:5,EOF:6,float:7,POW:8,int:9,multatoms:10,DIV:11,expatom:12,MUL:13,atom:14,"^":15,nat:16,ATOM:17,FLOAT:18,NAT:19,NEG:20,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",8:"POW",11:"DIV",13:"MUL",15:"^",17:"ATOM",18:"FLOAT",19:"NAT",20:"NEG"},productions_:[0,[3,3],[3,2],[4,3],[4,1],[5,3],[5,1],[10,3],[10,2],[10,1],[12,3],[12,1],[14,1],[7,1],[7,1],[16,1],[9,2],[9,1]],performAction:function(p,g,m,M,E,A,O){var D=A.length-1;switch(E){case 1:return{type:"unitMagnitude",magnitude:A[D-2],unit:A[D-1]};case 2:return{type:"unitStandalone",unit:A[D-1]};case 3:this.$=A[D-2]+"e"+A[D];break;case 4:case 13:case 14:case 15:case 17:this.$=A[D];break;case 5:this.$={num:A[D-2],denom:A[D]};break;case 6:this.$={num:A[D],denom:null};break;case 7:this.$=[A[D-2]].concat(A[D]);break;case 8:this.$=[A[D-1]].concat(A[D]);break;case 9:this.$=[A[D]];break;case 10:this.$={name:A[D-2],pow:A[D]};break;case 11:this.$={name:A[D],pow:1};break;case 12:this.$=p;break;case 16:this.$="-"+A[D];break}},table:[{3:1,4:2,5:3,7:4,10:5,12:8,14:10,16:7,17:e,18:[1,6],19:n},{1:[3]},{5:12,10:5,12:8,14:10,17:e},{6:[1,13]},{8:[1,14],17:[2,4]},{6:[2,6],11:[1,15]},a(u,[2,13]),a(u,[2,14]),a(l,[2,9],{12:8,14:10,10:17,13:[1,16],17:e}),a([6,8,11,13,17],[2,15]),a(f,[2,11],{15:[1,18]}),a([6,11,13,15,17],[2,12]),{6:[1,19]},{1:[2,2]},{9:20,19:[1,22],20:[1,21]},{10:23,12:8,14:10,17:e},{10:24,12:8,14:10,17:e},a(l,[2,8]),{16:25,19:n},{1:[2,1]},{17:[2,3]},{19:[1,26]},{17:[2,17]},{6:[2,5]},a(l,[2,7]),a(f,[2,10]),{17:[2,16]}],defaultActions:{13:[2,2],19:[2,1],20:[2,3],22:[2,17],23:[2,5],26:[2,16]},parseError:function(p,g){if(g.recoverable)this.trace(p);else throw new Error(p)},parse:function(p){var g=this,m=[0],M=[null],E=[],A=this.table,O="",D=0,B=0,K=2,ie=1,de=E.slice.call(arguments,1),X=Object.create(this.lexer),j={yy:{}};for(var se in this.yy)Object.prototype.hasOwnProperty.call(this.yy,se)&&(j.yy[se]=this.yy[se]);X.setInput(p,j.yy),j.yy.lexer=X,j.yy.parser=this,typeof X.yylloc>"u"&&(X.yylloc={});var i=X.yylloc;E.push(i);var L=X.options&&X.options.ranges;typeof j.yy.parseError=="function"?this.parseError=j.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function ge(){var fe;return fe=X.lex()||ie,typeof fe!="number"&&(fe=g.symbols_[fe]||fe),fe}for(var Z,Q,S,V,b={},T,C,q,le;;){if(Q=m[m.length-1],this.defaultActions[Q]?S=this.defaultActions[Q]:((Z===null||typeof Z>"u")&&(Z=ge()),S=A[Q]&&A[Q][Z]),typeof S>"u"||!S.length||!S[0]){var G="";le=[];for(T in A[Q])this.terminals_[T]&&T>K&&le.push("'"+this.terminals_[T]+"'");X.showPosition?G="Parse error on line "+(D+1)+`:
`+X.showPosition()+`
Expecting `+le.join(", ")+", got '"+(this.terminals_[Z]||Z)+"'":G="Parse error on line "+(D+1)+": Unexpected "+(Z==ie?"end of input":"'"+(this.terminals_[Z]||Z)+"'"),this.parseError(G,{text:X.match,token:this.terminals_[Z]||Z,line:X.yylineno,loc:i,expected:le})}if(S[0]instanceof Array&&S.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Q+", token: "+Z);switch(S[0]){case 1:m.push(Z),M.push(X.yytext),E.push(X.yylloc),m.push(S[1]),Z=null,B=X.yyleng,O=X.yytext,D=X.yylineno,i=X.yylloc;break;case 2:if(C=this.productions_[S[1]][1],b.$=M[M.length-C],b._$={first_line:E[E.length-(C||1)].first_line,last_line:E[E.length-1].last_line,first_column:E[E.length-(C||1)].first_column,last_column:E[E.length-1].last_column},L&&(b._$.range=[E[E.length-(C||1)].range[0],E[E.length-1].range[1]]),V=this.performAction.apply(b,[O,B,D,j.yy,S[1],M,E].concat(de)),typeof V<"u")return V;C&&(m=m.slice(0,-1*C*2),M=M.slice(0,-1*C),E=E.slice(0,-1*C)),m.push(this.productions_[S[1]][0]),M.push(b.$),E.push(b._$),q=A[m[m.length-2]][m[m.length-1]],m.push(q);break;case 3:return!0}}return!0}},d=function(){var y={EOF:1,parseError:function(g,m){if(this.yy.parser)this.yy.parser.parseError(g,m);else throw new Error(g)},setInput:function(p,g){return this.yy=g||this.yy||{},this._input=p,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var p=this._input[0];this.yytext+=p,this.yyleng++,this.offset++,this.match+=p,this.matched+=p;var g=p.match(/(?:\r\n?|\n).*/g);return g?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),p},unput:function(p){var g=p.length,m=p.split(/(?:\r\n?|\n)/g);this._input=p+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-g),this.offset-=g;var M=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),m.length-1&&(this.yylineno-=m.length-1);var E=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:m?(m.length===M.length?this.yylloc.first_column:0)+M[M.length-m.length].length-m[0].length:this.yylloc.first_column-g},this.options.ranges&&(this.yylloc.range=[E[0],E[0]+this.yyleng-g]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(p){this.unput(this.match.slice(p))},pastInput:function(){var p=this.matched.substr(0,this.matched.length-this.match.length);return(p.length>20?"...":"")+p.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var p=this.match;return p.length<20&&(p+=this._input.substr(0,20-p.length)),(p.substr(0,20)+(p.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var p=this.pastInput(),g=new Array(p.length+1).join("-");return p+this.upcomingInput()+`
`+g+"^"},test_match:function(p,g){var m,M,E;if(this.options.backtrack_lexer&&(E={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(E.yylloc.range=this.yylloc.range.slice(0))),M=p[0].match(/(?:\r\n?|\n).*/g),M&&(this.yylineno+=M.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:M?M[M.length-1].length-M[M.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+p[0].length},this.yytext+=p[0],this.match+=p[0],this.matches=p,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(p[0].length),this.matched+=p[0],m=this.performAction.call(this,this.yy,this,g,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),m)return m;if(this._backtrack){for(var A in E)this[A]=E[A];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var p,g,m,M;this._more||(this.yytext="",this.match="");for(var E=this._currentRules(),A=0;A<E.length;A++)if(m=this._input.match(this.rules[E[A]]),m&&(!g||m[0].length>g[0].length)){if(g=m,M=A,this.options.backtrack_lexer){if(p=this.test_match(m,E[A]),p!==!1)return p;if(this._backtrack){g=!1;continue}else return!1}else if(!this.options.flex)break}return g?(p=this.test_match(g,E[M]),p!==!1?p:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var g=this.next();return g||this.lex()},begin:function(g){this.conditionStack.push(g)},popState:function(){var g=this.conditionStack.length-1;return g>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(g){return g=this.conditionStack.length-1-Math.abs(g||0),g>=0?this.conditionStack[g]:"INITIAL"},pushState:function(g){this.begin(g)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(g,m,M,E){switch(M){case 0:return 11;case 1:return"(";case 2:return")";case 3:return 8;case 4:return 15;case 5:return 13;case 6:return 18;case 7:return 19;case 8:return 20;case 9:return 17;case 10:return 17;case 11:return 17;case 12:break;case 13:return 6}},rules:[/^(?:\/)/,/^(?:\()/,/^(?:\))/,/^(?:(\*|x|\u00d7|\u2219|\u22c5|\u00b7)\s*10\s*\^)/,/^(?:\^)/,/^(?:\*)/,/^(?:[0-9]+\.[0-9]+)/,/^(?:[0-9]+)/,/^(?:-)/,/^(?:\u00b0( ?)[cCfF])/,/^(?:fl\.? oz\.?)/,/^(?:[\u00b5]?([A-Za-z-]+|[\u2103\u2109\u212b]))/,/^(?:\s+)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return y}();o.lexer=d;function v(){this.yy={}}return v.prototype=o,o.Parser=v,new v})();var Fe=function(){var a=function(Q,S,V,b){for(V=V||{},b=Q.length;b--;V[Q[b]]=S);return V},e=[1,7],n=[1,17],u=[1,13],l=[1,14],f=[1,15],o=[1,32],d=[1,22],v=[1,23],y=[1,24],p=[1,25],g=[1,26],m=[1,33],M=[1,27],E=[1,28],A=[1,29],O=[1,30],D=[1,20],B=[1,36],K=[1,37],ie=[5,6,8,10,33,35,41,43,45],de=[1,39],X=[1,40],j=[5,6,8,10,12,14,16,19,21,22,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],se=[10,16,19,21,22,28,29,30,31,32,34,37,39,42,43,44,46],i=[5,6,8,10,12,14,16,18,19,21,22,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],L={trace:function(){},yy:{},symbols_:{error:2,equation:3,expression:4,SIGN:5,EOF:6,additive:7,"+":8,multiplicative:9,"-":10,triglog:11,"*":12,negative:13,"/":14,trig:15,TRIG:16,trigfunc:17,"^":18,TRIGINV:19,logbase:20,ln:21,log:22,_:23,subscriptable:24,power:25,primitive:26,variable:27,VAR:28,CONST:29,INT:30,FLOAT:31,"{":32,"}":33,"(":34,")":35,function:36,FUNC:37,invocation:38,sqrt:39,"[":40,"]":41,abs:42,"|":43,"LEFT|":44,"RIGHT|":45,FRAC:46,$accept:0,$end:1},terminals_:{2:"error",5:"SIGN",6:"EOF",8:"+",10:"-",12:"*",14:"/",16:"TRIG",18:"^",19:"TRIGINV",21:"ln",22:"log",23:"_",28:"VAR",29:"CONST",30:"INT",31:"FLOAT",32:"{",33:"}",34:"(",35:")",37:"FUNC",39:"sqrt",40:"[",41:"]",42:"abs",43:"|",44:"LEFT|",45:"RIGHT|",46:"FRAC"},productions_:[0,[3,4],[3,2],[3,1],[4,1],[7,3],[7,3],[7,1],[9,2],[9,3],[9,3],[9,1],[13,2],[13,1],[15,1],[17,1],[17,3],[17,1],[20,1],[20,1],[20,3],[11,2],[11,2],[11,1],[25,3],[25,1],[27,1],[24,3],[24,1],[24,1],[24,1],[24,1],[24,3],[24,3],[36,1],[38,4],[38,4],[38,7],[38,4],[38,3],[38,3],[38,4],[26,1],[26,1],[26,7]],performAction:function(S,V,b,T,C,q,le){var G=q.length-1;switch(C){case 1:return new T.Eq(q[G-3],q[G-2],q[G-1]);case 2:return q[G-1];case 3:return new T.Add([]);case 4:case 7:case 11:case 13:case 15:case 20:case 23:case 25:case 42:case 43:this.$=q[G];break;case 5:this.$=T.Add.createOrAppend(q[G-2],q[G]);break;case 6:this.$=T.Add.createOrAppend(q[G-2],T.Mul.handleNegative(q[G],"subtract"));break;case 8:this.$=T.Mul.fold(T.Mul.createOrAppend(q[G-1],q[G]));break;case 9:this.$=T.Mul.fold(T.Mul.createOrAppend(q[G-2],q[G]));break;case 10:this.$=T.Mul.fold(T.Mul.handleDivide(q[G-2],q[G]));break;case 12:this.$=T.Mul.handleNegative(q[G]);break;case 14:case 17:this.$=[S];break;case 16:this.$=q[G-2].concat(q[G]);break;case 18:this.$=T.Log.natural();break;case 19:this.$=T.Log.common();break;case 21:this.$=T.Trig.create(q[G-1],q[G]);break;case 22:this.$=T.Log.create(q[G-1],q[G]);break;case 24:this.$=new T.Pow(q[G-2],q[G]);break;case 26:case 34:this.$=S;break;case 27:this.$=new T.Var(q[G-2],q[G]);break;case 28:this.$=new T.Var(q[G]);break;case 29:this.$=new T.Const(S.toLowerCase());break;case 30:this.$=T.Int.create(Number(S));break;case 31:this.$=T.Float.create(Number(S));break;case 32:this.$=q[G-1].completeParse();break;case 33:this.$=q[G-1].completeParse().addHint("parens");break;case 35:case 36:this.$=T.Pow.sqrt(q[G-1]);break;case 37:this.$=new T.Pow.nthroot(q[G-1],q[G-4]);break;case 38:case 39:case 40:this.$=new T.Abs(q[G-1]);break;case 41:this.$=new T.Func(q[G-3],q[G-1]);break;case 44:this.$=T.Mul.handleDivide(q[G-4],q[G-1]);break}},table:[{3:1,4:2,6:[1,3],7:4,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{1:[3]},{5:[1,34],6:[1,35]},{1:[2,3]},a([5,6],[2,4],{8:B,10:K}),a(ie,[2,7],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:de,14:X,16:n,19:u,21:l,22:f,28:o,29:d,30:v,31:y,32:p,34:g,37:m,39:M,42:E,44:O,46:D}),a(j,[2,11]),{10:e,11:8,13:41,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},a(j,[2,13]),{10:e,11:8,13:42,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{10:e,11:8,13:43,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},a(j,[2,23]),a(se,[2,15],{18:[1,44]}),a(se,[2,17]),a(se,[2,18]),a(se,[2,19],{23:[1,45]}),a(j,[2,25],{18:[1,46]}),a([10,16,18,19,21,22,28,29,30,31,32,34,37,39,42,43,44,46],[2,14]),a(i,[2,42]),a(i,[2,43]),{32:[1,47]},a(i,[2,28],{23:[1,48]}),a(i,[2,29]),a(i,[2,30]),a(i,[2,31]),{7:49,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{7:50,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{32:[1,52],34:[1,51],40:[1,53]},{34:[1,54]},{7:55,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{7:56,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{34:[1,57]},a([5,6,8,10,12,14,16,18,19,21,22,23,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],[2,26]),{34:[2,34]},{4:58,7:4,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{1:[2,2]},{9:59,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{9:60,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},a(j,[2,8]),{10:e,11:8,13:61,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{10:e,11:8,13:62,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},a(j,[2,12]),a(j,[2,21]),a(j,[2,22]),{10:e,11:8,13:63,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{24:64,27:21,28:o,29:d,30:v,31:y,32:p,34:g},{10:e,11:8,13:65,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{7:66,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{24:67,27:21,28:o,29:d,30:v,31:y,32:p,34:g},{8:B,10:K,33:[1,68]},{8:B,10:K,35:[1,69]},{7:70,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{7:71,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{7:72,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{7:73,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{8:B,10:K,43:[1,74]},{8:B,10:K,45:[1,75]},{7:76,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{6:[1,77]},a(ie,[2,5],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:de,14:X,16:n,19:u,21:l,22:f,28:o,29:d,30:v,31:y,32:p,34:g,37:m,39:M,42:E,44:O,46:D}),a(ie,[2,6],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:de,14:X,16:n,19:u,21:l,22:f,28:o,29:d,30:v,31:y,32:p,34:g,37:m,39:M,42:E,44:O,46:D}),a(j,[2,9]),a(j,[2,10]),a(se,[2,16]),a(se,[2,20]),a(j,[2,24]),{8:B,10:K,33:[1,78]},a(i,[2,27]),a(i,[2,32]),a(i,[2,33]),{8:B,10:K,35:[1,79]},{8:B,10:K,33:[1,80]},{8:B,10:K,41:[1,81]},{8:B,10:K,35:[1,82]},a(i,[2,39]),a(i,[2,40]),{8:B,10:K,35:[1,83]},{1:[2,1]},{32:[1,84]},a(i,[2,35]),a(i,[2,36]),{32:[1,85]},a(i,[2,38]),a(i,[2,41]),{7:86,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{7:87,9:5,10:e,11:8,13:6,15:12,16:n,17:9,19:u,20:10,21:l,22:f,24:18,25:11,26:16,27:21,28:o,29:d,30:v,31:y,32:p,34:g,36:31,37:m,38:19,39:M,42:E,43:A,44:O,46:D},{8:B,10:K,33:[1,88]},{8:B,10:K,33:[1,89]},a(i,[2,44]),a(i,[2,37])],defaultActions:{3:[2,3],33:[2,34],35:[2,2],77:[2,1]},parseError:function(S,V){if(V.recoverable)this.trace(S);else throw new Error(S)},parse:function(S){var V=this,b=[0],T=[null],C=[],q=this.table,le="",G=0,fe=0,me=2,t=1,r=C.slice.call(arguments,1),s=Object.create(this.lexer),c={yy:{}};for(var h in this.yy)Object.prototype.hasOwnProperty.call(this.yy,h)&&(c.yy[h]=this.yy[h]);s.setInput(S,c.yy),c.yy.lexer=s,c.yy.parser=this,typeof s.yylloc>"u"&&(s.yylloc={});var I=s.yylloc;C.push(I);var x=s.options&&s.options.ranges;typeof c.yy.parseError=="function"?this.parseError=c.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function F(){var Oe;return Oe=s.lex()||t,typeof Oe!="number"&&(Oe=V.symbols_[Oe]||Oe),Oe}for(var R,W,J,ye,pe={},Ee,we,et,Ve;;){if(W=b[b.length-1],this.defaultActions[W]?J=this.defaultActions[W]:((R===null||typeof R>"u")&&(R=F()),J=q[W]&&q[W][R]),typeof J>"u"||!J.length||!J[0]){var Be="";Ve=[];for(Ee in q[W])this.terminals_[Ee]&&Ee>me&&Ve.push("'"+this.terminals_[Ee]+"'");s.showPosition?Be="Parse error on line "+(G+1)+`:
`+s.showPosition()+`
Expecting `+Ve.join(", ")+", got '"+(this.terminals_[R]||R)+"'":Be="Parse error on line "+(G+1)+": Unexpected "+(R==t?"end of input":"'"+(this.terminals_[R]||R)+"'"),this.parseError(Be,{text:s.match,token:this.terminals_[R]||R,line:s.yylineno,loc:I,expected:Ve})}if(J[0]instanceof Array&&J.length>1)throw new Error("Parse Error: multiple actions possible at state: "+W+", token: "+R);switch(J[0]){case 1:b.push(R),T.push(s.yytext),C.push(s.yylloc),b.push(J[1]),R=null,fe=s.yyleng,le=s.yytext,G=s.yylineno,I=s.yylloc;break;case 2:if(we=this.productions_[J[1]][1],pe.$=T[T.length-we],pe._$={first_line:C[C.length-(we||1)].first_line,last_line:C[C.length-1].last_line,first_column:C[C.length-(we||1)].first_column,last_column:C[C.length-1].last_column},x&&(pe._$.range=[C[C.length-(we||1)].range[0],C[C.length-1].range[1]]),ye=this.performAction.apply(pe,[le,fe,G,c.yy,J[1],T,C].concat(r)),typeof ye<"u")return ye;we&&(b=b.slice(0,-1*we*2),T=T.slice(0,-1*we),C=C.slice(0,-1*we)),b.push(this.productions_[J[1]][0]),T.push(pe.$),C.push(pe._$),et=q[b[b.length-2]][b[b.length-1]],b.push(et);break;case 3:return!0}}return!0}},ge=function(){var Q={EOF:1,parseError:function(V,b){if(this.yy.parser)this.yy.parser.parseError(V,b);else throw new Error(V)},setInput:function(S,V){return this.yy=V||this.yy||{},this._input=S,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var S=this._input[0];this.yytext+=S,this.yyleng++,this.offset++,this.match+=S,this.matched+=S;var V=S.match(/(?:\r\n?|\n).*/g);return V?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),S},unput:function(S){var V=S.length,b=S.split(/(?:\r\n?|\n)/g);this._input=S+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-V),this.offset-=V;var T=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),b.length-1&&(this.yylineno-=b.length-1);var C=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:b?(b.length===T.length?this.yylloc.first_column:0)+T[T.length-b.length].length-b[0].length:this.yylloc.first_column-V},this.options.ranges&&(this.yylloc.range=[C[0],C[0]+this.yyleng-V]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(S){this.unput(this.match.slice(S))},pastInput:function(){var S=this.matched.substr(0,this.matched.length-this.match.length);return(S.length>20?"...":"")+S.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var S=this.match;return S.length<20&&(S+=this._input.substr(0,20-S.length)),(S.substr(0,20)+(S.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var S=this.pastInput(),V=new Array(S.length+1).join("-");return S+this.upcomingInput()+`
`+V+"^"},test_match:function(S,V){var b,T,C;if(this.options.backtrack_lexer&&(C={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(C.yylloc.range=this.yylloc.range.slice(0))),T=S[0].match(/(?:\r\n?|\n).*/g),T&&(this.yylineno+=T.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:T?T[T.length-1].length-T[T.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+S[0].length},this.yytext+=S[0],this.match+=S[0],this.matches=S,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(S[0].length),this.matched+=S[0],b=this.performAction.call(this,this.yy,this,V,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),b)return b;if(this._backtrack){for(var q in C)this[q]=C[q];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var S,V,b,T;this._more||(this.yytext="",this.match="");for(var C=this._currentRules(),q=0;q<C.length;q++)if(b=this._input.match(this.rules[C[q]]),b&&(!V||b[0].length>V[0].length)){if(V=b,T=q,this.options.backtrack_lexer){if(S=this.test_match(b,C[q]),S!==!1)return S;if(this._backtrack){V=!1;continue}else return!1}else if(!this.options.flex)break}return V?(S=this.test_match(V,C[T]),S!==!1?S:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var V=this.next();return V||this.lex()},begin:function(V){this.conditionStack.push(V)},popState:function(){var V=this.conditionStack.length-1;return V>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(V){return V=this.conditionStack.length-1-Math.abs(V||0),V>=0?this.conditionStack[V]:"INITIAL"},pushState:function(V){this.begin(V)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0},performAction:function(V,b,T,C){switch(T){case 0:break;case 1:break;case 2:break;case 3:return"INT";case 4:return"FLOAT";case 5:return"^";case 6:return"*";case 7:return"*";case 8:return"*";case 9:return"*";case 10:return"/";case 11:return"/";case 12:return"-";case 13:return"-";case 14:return"+";case 15:return"^";case 16:return"(";case 17:return")";case 18:return"(";case 19:return")";case 20:return"[";case 21:return"]";case 22:return"{";case 23:return"}";case 24:return"{";case 25:return"}";case 26:return"_";case 27:return"|";case 28:return"LEFT|";case 29:return"RIGHT|";case 30:return"!";case 31:return"SIGN";case 32:return b.yytext="<=","SIGN";case 33:return b.yytext=">=","SIGN";case 34:return b.yytext="<=","SIGN";case 35:return b.yytext=">=","SIGN";case 36:return b.yytext="<>","SIGN";case 37:return b.yytext="<>","SIGN";case 38:return b.yytext="<>","SIGN";case 39:return b.yytext="<>","SIGN";case 40:return b.yytext="<=","SIGN";case 41:return b.yytext=">=","SIGN";case 42:return"FRAC";case 43:return"FRAC";case 44:return"sqrt";case 45:return"abs";case 46:return"ln";case 47:return"log";case 48:return"TRIG";case 49:return"TRIG";case 50:return"TRIG";case 51:return"TRIG";case 52:return b.yytext="sin","TRIG";case 53:return b.yytext="cos","TRIG";case 54:return b.yytext="tan","TRIG";case 55:return b.yytext="csc","TRIG";case 56:return b.yytext="sec","TRIG";case 57:return b.yytext="cot","TRIG";case 58:return b.yytext="arcsin","TRIG";case 59:return b.yytext="arccos","TRIG";case 60:return b.yytext="arctan","TRIG";case 61:return b.yytext="arccsc","TRIG";case 62:return b.yytext="arcsec","TRIG";case 63:return b.yytext="arccot","TRIG";case 64:return"TRIGINV";case 65:return"TRIGINV";case 66:return b.yytext="sinh","TRIG";case 67:return b.yytext="cosh","TRIG";case 68:return b.yytext="tanh","TRIG";case 69:return b.yytext="csch","TRIG";case 70:return b.yytext="sech","TRIG";case 71:return b.yytext="tanh","TRIG";case 72:return"CONST";case 73:return b.yytext="pi","CONST";case 74:return b.yytext="pi","CONST";case 75:return"VAR";case 76:return b.yytext="theta","VAR";case 77:return b.yytext="theta","VAR";case 78:return"VAR";case 79:return b.yytext="phi","VAR";case 80:return b.yytext="phi","VAR";case 81:return V.symbolLexer(b.yytext);case 82:return"EOF";case 83:return"INVALID";case 84:console.log(b.yytext);break}},rules:[/^(?:\s+)/,/^(?:\\space)/,/^(?:\\ )/,/^(?:[0-9]+\.?)/,/^(?:([0-9]+)?\.[0-9]+)/,/^(?:\*\*)/,/^(?:\*)/,/^(?:\\cdot|·)/,/^(?:\\times|×)/,/^(?:\\ast)/,/^(?:\/)/,/^(?:\\div|÷)/,/^(?:-)/,/^(?:−)/,/^(?:\+)/,/^(?:\^)/,/^(?:\()/,/^(?:\))/,/^(?:\\left\()/,/^(?:\\right\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:\\left\{)/,/^(?:\\right\})/,/^(?:_)/,/^(?:\|)/,/^(?:\\left\|)/,/^(?:\\right\|)/,/^(?:\!)/,/^(?:<=|>=|<>|<|>|=)/,/^(?:\\le)/,/^(?:\\ge)/,/^(?:\\leq)/,/^(?:\\geq)/,/^(?:=\/=)/,/^(?:\\ne)/,/^(?:\\neq)/,/^(?:≠)/,/^(?:≤)/,/^(?:≥)/,/^(?:\\frac)/,/^(?:\\dfrac)/,/^(?:sqrt|\\sqrt)/,/^(?:abs|\\abs)/,/^(?:ln|\\ln)/,/^(?:log|\\log)/,/^(?:sin|cos|tan)/,/^(?:csc|sec|cot)/,/^(?:sinh|cosh|tanh)/,/^(?:csch|sech|coth)/,/^(?:\\sin)/,/^(?:\\cos)/,/^(?:\\tan)/,/^(?:\\csc)/,/^(?:\\sec)/,/^(?:\\cot)/,/^(?:\\arcsin)/,/^(?:\\arccos)/,/^(?:\\arctan)/,/^(?:\\arccsc)/,/^(?:\\arcsec)/,/^(?:\\arccot)/,/^(?:arcsin|arccos|arctan)/,/^(?:arccsc|arcsec|arccot)/,/^(?:\\sinh)/,/^(?:\\cosh)/,/^(?:\\tanh)/,/^(?:\\csch)/,/^(?:\\sech)/,/^(?:\\coth)/,/^(?:pi)/,/^(?:π)/,/^(?:\\pi)/,/^(?:theta)/,/^(?:θ)/,/^(?:\\theta)/,/^(?:phi)/,/^(?:φ)/,/^(?:\\phi)/,/^(?:[a-zA-Z])/,/^(?:$)/,/^(?:.)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],inclusive:!0}}};return Q}();L.lexer=ge;function Z(){this.yy={}}return Z.prototype=L,L.Parser=Z,new Z}();const tt=function(a){return a!==a},bt=function(a,e){var n=e-a;return Math.random()*n+a};var nt=12,rt=9;function Pe(a,e){const n=[],u=[];return w.forEach(a,(l,f,o)=>{e(l,f,o)?n.push(l):u.push(l)}),[n,u]}function At(a){return a instanceof ve}const Ge=function(a){return a instanceof ne};function Ot(a){return a instanceof H}function We(a){return a instanceof N?a.terms:[a]}class ve{constructor(){this.hints={parens:!1}}construct(e){const n=this.func,u=new n(...e);if(typeof u>"u")throw new Error("constructor function returning undefined");return u}recurse(e,...n){var u=this.args().map(function(l){return w.isString(l)||w.isNumber(l)?l:l==null?void 0:l[e].apply(l,n)});return this.construct(u)}eval(e={},n){throw new Error("Abstract method - must override for expr: "+this.print())}codegen(){throw new Error("Abstract method - must override for expr: "+this.print())}compile(){var e=this.codegen();try{return new Function("vars","return "+e+";")}catch{throw new Error("Function did not compile: "+e)}}asTex(e){e=e||{},w.defaults(e,{display:!0,dynamic:!0,times:!1});let n=this.tex();return e.display&&(n="\\displaystyle "+n),e.dynamic&&(n=n.replace(/\(/g,"\\left("),n=n.replace(/\)/g,"\\right)")),e.times&&(n=n.replace(/\\cdot/g,"\\times")),n}name(){return this.func.name}repr(){return this.name()+"("+this.args().map(function(e){return w.isString(e)||w.isNumber(e)?e:e==null?void 0:e.repr()}).join(",")+")"}strip(){return this.recurse("strip")}normalize(){return this.recurse("normalize")}expand(){return this.recurse("expand")}factor(e){return this.recurse("factor",e)}collect(e){return this.recurse("collect",e)}equals(e){return this.normalize().print()===e.normalize().print()}simplify(e){e={once:!1,...e};var n=this.factor(e),u=n.collect(e);n.equals(u)&&(u=this.collect(e));var l=u.expand(),f=l.collect(e);l.equals(f)&&(f=u.collect(e));var o=f;return e.once||this.equals(o)?o:o.simplify(e)}isSimplified(){return this.equals(this.simplify())}exprArgs(){return this.args().filter(At)}getVars(e){return w.uniq(w.flatten(w.invoke(this.exprArgs(),"getVars",e))).sort()}getConsts(){return w.uniq(w.flatten(w.invoke(this.exprArgs(),"getConsts"))).sort()}getUnits(){return w.flatten(w.invoke(this.exprArgs(),"getUnits"))}is(e){return this instanceof e}has(e){return this instanceof e?!0:w.any(this.exprArgs(),function(n){return n.has(e)})}raiseToThe(e,n){return new U(this,e)}isSubtract(){return!1}isDivide(){return!1}isRoot(){return!1}needsExplicitMul(){return this.exprArgs()[0].needsExplicitMul()}sameVars(e){var n=this.getVars(),u=e.getVars(),l=function(v,y){return!w.difference(v,y).length},f=function(v){return w.uniq(w.invoke(v,"toLowerCase")).sort()},o=l(n,u),d=l(f(n),f(u));return{equal:o,equalIgnoringCase:d}}compare(e){if(e instanceof Te)return!1;var n=w.union(this.getVars(!0),e.getVars(!0)),u=function(M,E){return Math.abs(M)<1||Math.abs(E)<1?Math.abs(M-E):Math.abs(1-M/E)},l=function(M,E){var A=u(M,E);return M===E||tt(M)&&tt(E)||A<Math.pow(10,-rt)};if(!n.length&&!this.has(oe)&&!e.has(oe))return l(this.eval(),e.eval());var f=this.collect(),o=e.collect(),d=this.getUnits(),v=e.getUnits();if(!w.isEqual(d,v))return!1;for(var y=0;y<nt;y++){var p={},g=Math.pow(10,1+Math.floor(3*y/nt)),m=y%2===0;w.each(n,function(E){p[E]=m?bt(-g,g):w.random(-g,g)});let M;if(f.has(Me)||o.has(Me)||f.has(oe)||o.has(oe)){const E=f.partialEval(p),A=o.partialEval(p);M=E.simplify().equals(A.simplify())}else{const E=f.eval(p),A=o.eval(p);M=l(E,A)}if(!M)return!1}return!0}partialEval(e){return this instanceof oe?this:this.has(Me)?this instanceof Me?new Me(this.symbol,this.arg.partialEval(e)):this.recurse("partialEval",e):new ue(+this.eval(e).toFixed(rt)).collect()}sameForm(e){return this.strip().equals(e.strip())}findGCD(e){return this.equals(e)?e:te}getDenominator(){return te}asMul(){return new N(te,this)}isPositive(){throw new Error("Abstract method - must override for expr: "+this.print())}isNegative(){return!1}asPositiveFactor(){return this.isPositive()?this:te}addHint(e){if(!e)return this;var n=this.construct(this.args());return n.hints=w.clone(this.hints),n.hints[e]=!0,n}completeParse(){return this.recurse("completeParse")}abs(){throw new Error("Abstract method - must override for expr: "+this.print())}negate(){return new N(Ie,this)}}class Ue extends ve{constructor(...e){super(),e.length===1?this.terms=e[0]:this.terms=e}args(){return this.terms}normalize(){var e=w.sortBy(w.invoke(this.terms,"normalize"),n=>n.print());return new this.func(e)}expand(){return this.recurse("expand").flatten()}partition(){var[e,n]=Pe(this.terms,u=>u instanceof z);return[new this.func(e),new this.func(n)]}flatten(){var e=this,n=w.reject(this.terms,o=>o.equals(e.identity));if(n.length===0)return e.identity;if(n.length===1)return n[0];const[u,l]=Pe(n,o=>o instanceof e.func);var f=l.concat(w.flatten(w.pluck(u,"terms"),!0));return new e.func(f)}isPositive(){var e=w.invoke(this.terms,"collect");return w.all(w.invoke(e,"isPositive"))}replace(e,n){const u=e instanceof ve?w.indexOf(this.terms,e):e;var l=[];Array.isArray(n)?l=n:n&&(l=[n]);var f=this.terms.slice(0,u).concat(l).concat(this.terms.slice(u+1));return new this.func(f)}remove(e){return this.replace(e)}getDenominator(){return new N(w.invoke(this.terms,"getDenominator")).flatten()}}class ne extends Ue{constructor(){super(...arguments),this.identity=_e,this.func=ne}eval(e={},n){return w.reduce(this.terms,(u,l)=>u+l.eval(e,n),0)}codegen(){return w.map(this.terms,e=>"("+e.codegen()+")").join(" + ")||"0"}print(){return w.invoke(this.terms,"print").join("+")}tex(){let e="";return w.each(this.terms,n=>{!e||n.isSubtract()?e+=n.tex():e+="+"+n.tex()}),e}collect(e){var n=w.invoke(this.terms,"collect",e),u=[];w.each(n,o=>{if(o instanceof N){var d=o.partition();u.push([d[1].flatten(),d[0].reduce(e)])}else o instanceof z?u.push([te,o]):u.push([o,te])});var l=w.groupBy(u,o=>o[0].normalize().print()),f=w.compact(w.map(l,o=>{var d=o[0][0],v=new ne(w.zip.apply(w,o)[1]),y=v.reduce(e);return new N(y,d).collect(e)}));return new ne(f).flatten()}factor(e={keepNegative:!1}){const n=this.terms.map(d=>d.collect());let u;n[0]instanceof N?u=n[0].terms:u=[n[0]],w.each(w.rest(this.terms),d=>{u=w.map(u,v=>d.findGCD(v))}),!e.keepNegative&&this.isNegative()&&u.push(Ie);const l=new N(u).flatten().collect(),f=n.map(d=>N.handleDivide(d,l).simplify()),o=new ne(f).flatten();return N.createOrAppend(l,o).flatten()}reduce(e){return w.reduce(this.terms,(n,u)=>n.add(u,e),this.identity)}needsExplicitMul(){return!1}isNegative(){var e=w.invoke(this.terms,"collect");return w.all(w.invoke(e,"isNegative"))}negate(){return new ne(w.invoke(this.terms,"negate"))}static createOrAppend(e,n){return e instanceof ne?new ne(e.terms.concat(n)):new ne(e,n)}}class N extends Ue{constructor(){super(...arguments),this.identity=te,this.func=N}eval(e={},n){return w.reduce(this.terms,(u,l)=>u*l.eval(e,n),1)}codegen(){return w.map(this.terms,e=>"("+e.codegen()+")").join(" * ")||"0"}print(){return w.map(this.terms,e=>e instanceof ne?"("+e.print()+")":e.print()).join("*")}getUnits(){var e=w(this.terms).chain().map(n=>n.getUnits()).flatten().value();return e.sort((n,u)=>n.unit.localeCompare(u.unit)),e}tex(){for(var e=" \\cdot ",n=w.groupBy(this.terms,E=>E.isDivide()?"inverse":E instanceof z?"number":"other"),u=n.inverse||[],l=n.number||[],f=n.other||[],o="",d,v=0;v<l.length;v++){var y=l[v]instanceof H&&!(l[v]instanceof _);if(y&&f.length>0&&u.length>0){var p=l.slice();p.splice(v,1);var g=p.concat(u).concat(f);return l[v].tex()+new N(g).tex()}}if(l=w.compact(w.map(l,E=>{var A=!E.hints.fraction||u.length>0;if(E instanceof H&&!(E instanceof _)&&A){u.push(new U(new _(E.d),ke));var O=new _(E.n);return O.hints=E.hints,w.any(E.hints)?O:null}else return E})),l.length===0&&f.length===1)d=f[0].tex();else{var m="";w.each(l,E=>{E.hints.subtract&&E.hints.entered?(o+="-",m+=(m?e:"")+E.abs().tex()):E instanceof _&&E.n===-1&&(E.hints.negate||E.hints.subtract)?o+="-":m+=(m?e:"")+E.tex()}),w.each(f,E=>{E.needsExplicitMul()?m+=(m?e:"")+E.tex():E instanceof ne?m+="("+E.tex()+")":m+=E.tex()}),d=m||"1"}if(u.length){var M=new N(w.invoke(u,"asDivide")).flatten().tex();return o+"\\frac{"+d+"}{"+M+"}"}else return o+d}strip(){var e=w.map(this.terms,n=>n instanceof z?n.abs():n.strip());return new N(e).flatten()}expand(){const e=function(y){return y instanceof U&&y.exp.isNegative()},n=function(y){return e(y)&&Ge(y.base)},u=this.recurse("expand").flatten(),l=We(u),f=w.any(l,Ge),o=w.any(l,n);if(!(f||o))return u;let[d,v]=Pe(l,e);if(f){const[y,p]=Pe(v,Ge),g=w.reduce(y,function(M,E){return w.reduce(M,function(A,O){return A.concat(w.map(E.terms,D=>O.concat(D)))},[])},[[]]),m=w.map(g,function(M){return new N(p.concat(M)).flatten()});v=[new ne(m)]}if(o){const y=new N(w.invoke(d,"getDenominator")).flatten();d=[new U(y.expand(),ke)]}return new N(v.concat(d)).flatten()}factor(e){var n=this.recurse("factor",e).flatten();if(!(n instanceof N))return n;var[u,l]=Pe(n.terms,d=>d instanceof H);const f=w.reduce(u,(d,v)=>({n:d.n*v.n,d:d.d*v.d}),{n:1,d:1}),o=f.d===1?new _(f.n):new H(f.n,f.d);return new N(l.concat(o)).flatten()}collect(e){var n=this.recurse("collect",e).partition(),u=n[0].reduce(e);if(u.eval()===0)return _e;const l=n[1].flatten();if(!(l instanceof N))return new N(u,l).flatten();const f=l.terms;var o=[];w.each(f,O=>{O instanceof U?o.push([O.base,O.exp]):o.push([O,te])});var d=w.groupBy(o,O=>O[0].normalize().print()),v=w.compact(w.map(d,O=>{var D=O[0][0],B=new ne(w.zip.apply(w,O)[1]),K=B.collect(e);return K instanceof z&&K.eval()===0?null:[D,K]}));const y=w.groupBy(v,O=>O[0]instanceof $&&O[0].isBasic()?"trig":O[0]instanceof ce?"log":"expr");let p=y.trig||[],g=y.log||[];const m=y.expr||[];if(p.length>1){var M=w.groupBy(p,O=>O[0].arg.normalize().print());p=[],w.each(M,O=>{const D=O[0][0].arg;let B={sin:_e,cos:_e};w.each(O,K=>{B[K[0].type]=K[1]}),N.handleNegative(B.sin).collect(e).equals(B.cos)&&(B.cos.isNegative()?B={tan:B.sin}:B={cot:B.cos}),w.each(B,(K,ie)=>{p.push([new $(ie,D),K])})})}if(g.length>1){var E=w.groupBy(g,O=>O[0].base.normalize().print());g=[],w.each(E,O=>{O.length===2&&N.handleNegative(O[0][1]).collect(e).equals(O[1][1])?O[0][1].isNegative()?g.push([new ce(O[0][0].power,O[1][0].power),O[1][1]]):g.push([new ce(O[1][0].power,O[0][0].power),O[0][1]]):g=g.concat(O)})}var A=w.map([...p,...g,...m],O=>new U(O[0],O[1]).collect(e));return new N([u].concat(A)).flatten()}isSubtract(){return w.any(this.terms,e=>e instanceof z&&!!e.hints.subtract)}factorIn(e){var n=this.partition(),u=n[0].terms,l=u.length&&w.all(u,o=>o.n>0);if(l){var f=u[0].negate();return f.hints=u[0].hints,this.replace(u[0],f.addHint(e))}else return new N([z.negativeOne(e)].concat(this.terms))}factorOut(){var e=!1,n=w.compact(w.map(this.terms,u=>!e&&u instanceof z&&u.hints.divide?(e=!0,u.n!==-1?u.negate():null):u));return n.length===1?n[0]:new N(n)}reduce(e){return w.reduce(this.terms,(n,u)=>n.mul(u,e),this.identity)}findGCD(e){return new N(w.invoke(this.terms,"findGCD",e)).flatten()}asMul(){return this}asPositiveFactor(){if(this.isPositive())return this;{const e=We(this.collect()).map(n=>n.asPositiveFactor());return new N(e).flatten()}}isNegative(){const e=We(this.collect()).map(n=>n.isNegative());return w.any(e)}fold(){return N.fold(this)}negate(){var e=u=>u instanceof z;const n=w.find(this.terms,e);return n?this.replace(n,n.negate()):new N([Ie].concat(this.terms))}static handleNegative(e,n){if(e instanceof z&&e.n>0){var u=e.negate();return u.hints=e.hints,u.addHint(n)}else return e instanceof N?e.factorIn(n):new N(z.negativeOne(n),e)}static handleDivide(e,n){if(n instanceof N){var u=N.handleDivide(e,n.terms[0]),l=new N(w.rest(n.terms)).flatten();return N.handleDivide(u,l)}var f=m=>m instanceof _,o=m=>m instanceof H;if(f(n)&&e instanceof N&&w.any(e.terms,f)){var d=e.terms.slice().reverse(),v=d.find(o);if(!f(v))return new N(e.terms.concat([new H(1,n.n).addHint("fraction")]));var y=new H(v.n,n.n);return y.hints=v.hints,v===d[0]&&(y=y.addHint("fraction")),v.n<0&&n.n<0?(y.d=-y.d,e.replace(v,[Ie,y])):e.replace(v,y)}var p=(m,M)=>{if(M instanceof _){if(m instanceof _)return m.n<0&&M.n<0?[Ie,new H(m.n,-M.n).addHint("fraction")]:[new H(m.n,M.n).addHint("fraction")];var E=new H(1,M.eval());return M.eval()<0?[m,E.addHint("negate")]:[m,E]}else{var A;if(M instanceof $&&M.exp){var O=M.exp;M.exp=void 0,M=new U(M,O)}return M instanceof U?A=new U(M.base,N.handleNegative(M.exp,"divide")):A=new U(M,ke),m instanceof _&&m.n===1?[A]:[m,A]}};if(e instanceof N){var g=p(w.last(e.terms),n);return new N(w.initial(e.terms).concat(g))}else{var g=p(e,n);return new N(g).flatten()}}static fold(e){if(e instanceof N){var n=w.find(w.initial(e.terms),m=>(m instanceof $||m instanceof ce)&&!!m.hints.open);if(n){const m=w.last(e.terms);if(n.hints.parens||m.hints.parens||m.has($)||m.has(ce))n.hints.open=!1;else{const M=n instanceof $?$.create([n.type,n.exp],N.createOrAppend(n.arg,m).fold()):ce.create(n.base,N.createOrAppend(n.power,m).fold()),E=w.indexOf(e.terms,n);return E===0?M:new N(e.terms.slice(0,E).concat(M)).fold()}}var u=e.partition(),l=u[0].terms,f=m=>m.n>0,o=m=>m.n===-1&&!!m.hints.negate,d=function(m){return f(m)||o(m)};const p=l.find(f),g=l.find(o);if(l.length>1&&g&&p&&w.every(l,d)){var v=w.indexOf(e.terms,g),y=w.indexOf(e.terms,p);if(v<y)return e.replace(y,e.terms[y].negate()).remove(v)}}return e}static createOrAppend(e,n){return e instanceof N?new N(e.terms.concat(n)):new N(e,n)}}const Y=class Y extends ve{constructor(e,n){super(),this.func=Y,this.base=e,this.exp=n}args(){return[this.base,this.exp]}eval(e={},n){var u=this.base.eval(e,n),l=this.exp.eval(e,n);if(u<0){var f=this.exp.simplify();if(f instanceof ue){var o=f.n,d=(o-+o.toFixed()).toString().length-2,v=Math.pow(10,d),y=new H(o*v,v);f=y.simplify()}if(f instanceof H){var p=Math.abs(f.d)%2===1;if(p){var g=Math.abs(f.n)%2===1,m=g?-1:1;return m*Math.pow(-1*u,l)}}}return Math.pow(u,l)}getUnits(){return this.base.getUnits().map(e=>({unit:e.unit,pow:e.pow*this.exp.n}))}codegen(){return"Math.pow("+this.base.codegen()+", "+this.exp.codegen()+")"}print(){var e=this.base.print();return(this.base instanceof Ue||this.base instanceof Y)&&(e="("+e+")"),e+"^("+this.exp.print()+")"}tex(){if(this.isDivide())return"\\frac{1}{"+this.asDivide().tex()+"}";if(this.isRoot()&&Ot(this.exp)){if(this.exp.n!==1)throw new Error("Node marked with hint 'root' does not have exponent of form 1/x.");return this.exp.d===2?"\\sqrt{"+this.base.tex()+"}":"\\sqrt["+this.exp.d+"]{"+this.base.tex()+"}"}else if(this.base instanceof $&&!this.base.isInverse()&&this.exp instanceof z&&this.exp.isSimple()&&this.exp.eval()>=0){var e=this.base.texSplit();return e[0]+"^{"+this.exp.tex()+"}"+e[1]}else{var n=this.base.tex();return this.base instanceof Ue||this.base instanceof Y||this.base instanceof z&&!this.base.isSimple()?n="("+n+")":(this.base instanceof $||this.base instanceof ce)&&(n="["+n+"]"),n+"^{"+this.exp.tex()+"}"}}needsExplicitMul(){return this.isRoot()?!1:this.base.needsExplicitMul()}expand(){var e=this.recurse("expand");if(e.base instanceof N){var n=w.map(e.base.terms,d=>new Y(d,e.exp));return new N(n).expand()}else if(e.base instanceof ne&&e.exp instanceof _&&e.exp.abs().eval()>1){var u=e.exp.eval()>0,l=e.exp.abs().eval(),f=function(g){return u?g:new Y(g,ke)};const d={1:e.base};for(var o=2;o<=l;o*=2){const g=new N(d[o/2],d[o/2]);d[o]=g.expand().collect()}if(l in d)return f(d[l]);let v=w.map(l.toString(2).split(""),function(g,m,M){return Number(g)*Math.pow(2,M.length-m-1)});v=w.without(v,0);const y=[];for(const g of v)g in d&&y.push(d[g]);const p=new N(y).expand().collect();return f(p)}else if(e.exp instanceof ne){const d=w.map(e.exp.terms,v=>new Y(e.base,v).expand());return new N(d).expand()}else return e}factor(){var e=this.recurse("factor");if(e.base instanceof N){var n=w.map(e.base.terms,u=>u instanceof _&&e.exp.equals(ke)?new H(1,u.n):new Y(u,e.exp));return new N(n)}else return e}collect(e){if(this.base instanceof Y){const l=this.base.base,f=N.createOrAppend(this.base.exp,this.exp);return new Y(l,f).collect(e)}const n=this.recurse("collect",e),u=function(l){return l instanceof ce&&l.base.equals(n.base)};if(n.exp instanceof z&&n.exp.eval()===0)return te;if(n.exp instanceof z&&n.exp.eval()===1)return n.base;if(u(n.exp))return n.exp.power;if(n.exp instanceof N&&w.any(n.exp.terms,u)){const l=n.exp.terms.find(u),f=l.power,o=n.exp.remove(l).flatten();return new Y(f,o).collect(e)}else if(n.base instanceof z&&n.exp instanceof z){if(e&&e.preciseFloats){const l=n.exp.asRational(),f=n.base.getDecimalPlaces();if(new Y(n.base,new H(1,l.d)).collect().getDecimalPlaces()>f){const v=new Y(n.base,new _(l.n)).collect();return new Y(v,new H(1,l.d))}}return n.base.raiseToThe(n.exp,e)}else return n}isDivide(){var e=function(n){return n instanceof z&&!!n.hints.divide};return e(this.exp)||this.exp instanceof N&&w.any(this.exp.terms,e)}asDivide(){if(this.exp instanceof z){if(this.exp.eval()===-1)return this.base;var e=this.exp.negate();return e.hints=w.clone(this.exp.hints),e.hints.divide=!1,new Y(this.base,e)}else{if(this.exp instanceof N)return new Y(this.base,this.exp.factorOut());throw new Error("called asDivide() on an Expr that wasn't a Num or Mul")}}isRoot(){return this.exp instanceof H&&!!this.exp.hints.root}isSquaredTrig(){return this.base instanceof $&&!this.base.isInverse()&&this.exp instanceof z&&this.exp.eval()===2}getDenominator(){if(this.exp instanceof z&&this.exp.eval()===-1)return N.createOrAppend(this.base,this.base.getDenominator()).flatten();if(this.exp.isNegative()){var e=new Y(this.base,N.handleNegative(this.exp).collect());return N.createOrAppend(e,e.collect().getDenominator()).flatten()}else return this.base instanceof z?new Y(this.base.getDenominator(),this.exp).collect():te}findGCD(e){const[n,u]=e instanceof Y?[e.base,e.exp]:[e,te];if(this.base.equals(n)){if(this.exp.equals(u))return this;if(this.exp instanceof z&&u instanceof z)return new Y(this.base,z.min(this.exp,u)).collect();if(this.exp instanceof z||u instanceof z)return te;var l=this.exp.asMul().partition(),f=u.asMul().partition();if(l[1].equals(f[1])){var o=z.min(l[0].reduce(),f[0].reduce()),d=new N(o,l[1].flatten()).flatten();return new Y(n,d).collect()}}return te}isPositive(){if(this.base.isPositive())return!0;var e=this.exp.simplify();return e instanceof _&&e.eval()%2===0}asPositiveFactor(){if(this.isPositive())return this;var e=this.exp.simplify();if(e instanceof _){var n=e.eval();if(n>2)return new Y(this.base,new _(n-1));if(n<-2)return new Y(this.base,new _(n+1))}return te}static sqrt(e){return new Y(e,Ft)}};Y.nthroot=function(e,n){var u=N.fold(N.handleDivide(new _(1),n));return new Y(e,u.addHint("root"))};let U=Y;class ce extends ve{constructor(e,n){super(),this.func=ce,this.base=e,this.power=n,this.hints={...this.hints,open:!1}}args(){return[this.base,this.power]}eval(e={},n){return Math.log(this.power.eval(e,n))/Math.log(this.base.eval(e,n))}codegen(){return"(Math.log("+this.power.codegen()+") / Math.log("+this.base.codegen()+"))"}print(){var e="("+this.power.print()+")";return this.isNatural()?"ln"+e:"log_("+this.base.print()+") "+e}tex(){var e="("+this.power.tex()+")";return this.isNatural()?"\\ln"+e:"\\log_{"+this.base.tex()+"}"+e}collect(e){var n=this.recurse("collect",e);return n.power instanceof z&&n.power.eval()===1?_e:n.base.equals(n.power)?te:n.power instanceof U&&n.power.base.equals(n.base)?n.power.exp:n}expand(){var e=this.recurse("expand");if(e.power instanceof N){var n=w.map(e.power.terms,u=>new ce(e.base,u).expand());return new ne(n)}else return e.power instanceof U?new N(e.power.exp,new ce(e.base,e.power.base).expand()).flatten():e.isNatural()?e:N.handleDivide(new ce(be.e,e.power),new ce(be.e,e.base))}isPositive(){var e=this.collect();return e instanceof ce&&e.base instanceof z&&e.power instanceof z?this.eval()>0:!1}needsExplicitMul(){return!1}isNatural(){return this.base.equals(be.e)}static natural(){return be.e}static common(){return Pt}static create(e,n){var u=new ce(e,n);return n.hints.parens||(u=u.addHint("open")),u}}class $ extends ve{constructor(e,n){super(),this.func=$,this.functions={sin:{eval:Math.sin,codegen:"Math.sin((",tex:"\\sin",expand:()=>this},cos:{eval:Math.cos,codegen:"Math.cos((",tex:"\\cos",expand:()=>this},tan:{eval:Math.tan,codegen:"Math.tan((",tex:"\\tan",expand:()=>N.handleDivide($.sin(this.arg),$.cos(this.arg))},csc:{eval:u=>1/Math.sin(u),codegen:"(1/Math.sin(",tex:"\\csc",expand:()=>N.handleDivide(te,$.sin(this.arg))},sec:{eval:u=>1/Math.cos(u),codegen:"(1/Math.cos(",tex:"\\sec",expand:()=>N.handleDivide(te,$.cos(this.arg))},cot:{eval:u=>1/Math.tan(u),codegen:"(1/Math.tan(",tex:"\\cot",expand:()=>N.handleDivide($.cos(this.arg),$.sin(this.arg))},arcsin:{eval:Math.asin,codegen:"Math.asin((",tex:"\\arcsin"},arccos:{eval:Math.acos,codegen:"Math.acos((",tex:"\\arccos"},arctan:{eval:Math.atan,codegen:"Math.atan((",tex:"\\arctan"},arccsc:{eval:u=>Math.asin(1/u),codegen:"Math.asin(1/(",tex:"\\operatorname{arccsc}"},arcsec:{eval:u=>Math.acos(1/u),codegen:"Math.acos(1/(",tex:"\\operatorname{arcsec}"},arccot:{eval:u=>Math.atan(1/u),codegen:"Math.atan(1/(",tex:"\\operatorname{arccot}"},sinh:{eval:u=>(Math.exp(u)-Math.exp(-u))/2,codegen:u=>"((Math.exp("+u+") - Math.exp(-("+u+"))) / 2)",tex:"\\sinh",expand:()=>this},cosh:{eval:u=>(Math.exp(u)+Math.exp(-u))/2,codegen:u=>"((Math.exp("+u+") + Math.exp(-("+u+"))) / 2)",tex:"\\cosh",expand:()=>this},tanh:{eval:u=>(Math.exp(u)-Math.exp(-u))/(Math.exp(u)+Math.exp(-u)),codegen:u=>"((Math.exp("+u+") - Math.exp(-("+u+"))) / (Math.exp("+u+") + Math.exp(-("+u+"))))",tex:"\\tanh",expand:()=>N.handleDivide($.sinh(this.arg),$.cosh(this.arg))},csch:{eval:u=>2/(Math.exp(u)-Math.exp(-u)),codegen:u=>"(2 / (Math.exp("+u+") - Math.exp(-("+u+"))))",tex:"\\csch",expand:()=>N.handleDivide(te,$.sinh(this.arg))},sech:{eval:u=>2/(Math.exp(u)+Math.exp(-u)),codegen:u=>"(2 / (Math.exp("+u+") + Math.exp(-("+u+"))))",tex:"\\sech",expand:()=>N.handleDivide(te,$.cosh(this.arg))},coth:{eval:u=>(Math.exp(u)+Math.exp(-u))/(Math.exp(u)-Math.exp(-u)),codegen:u=>"((Math.exp("+u+") + Math.exp(-("+u+"))) / (Math.exp("+u+") - Math.exp(-("+u+"))))",tex:"\\coth",expand:()=>N.handleDivide($.cosh(this.arg),$.sinh(this.arg))}},this.type=e,this.arg=n,this.hints={...this.hints,open:!1}}args(){return[this.type,this.arg]}isEven(){return w.contains(["cos","sec"],this.type)}isInverse(){return this.type.indexOf("arc")===0}isBasic(){return w.contains(["sin","cos"],this.type)}eval(e={},n){var u=this.functions[this.type].eval,l=this.arg.eval(e,n);return u(l)}codegen(){var e=this.functions[this.type].codegen;if(typeof e=="function")return e(this.arg.codegen());if(typeof e=="string")return e+this.arg.codegen()+"))";throw new Error("codegen not implemented for "+this.type)}print(){return this.type+"("+this.arg.print()+")"}tex(){var e=this.functions[this.type].tex,n="("+this.arg.tex()+")";return e+n}texSplit(){var e=this.functions[this.type].tex,n="("+this.arg.tex()+")";return[e,n]}isPositive(){var e=this.collect();return e instanceof $&&e.arg instanceof z?this.eval()>0:!1}completeParse(){if(this.exp){var e=new U(this,this.exp);return this.exp=void 0,e}else return this}needsExplicitMul(){return!1}expand(){var e=this.recurse("expand");if(e.isInverse())return e;var n=e.functions[e.type].expand;return w.bind(n,e)()}collect(e){var n=this.recurse("collect",e);if(!n.isInverse()&&n.arg.isNegative()){const u=n.arg instanceof z?n.arg.abs():N.handleDivide(n.arg,Ie).collect(e);return n.isEven()?new $(n.type,u):new N(Ie,new $(n.type,u))}else return n}static create(e,n){var u=e[0],l=e[1];l&&l.equals(Ie)&&(u="arc"+u,l=void 0);var f=new $(u,n);return n.hints.parens||(f=f.addHint("open")),l&&(f.exp=l),f}static sin(e){return new $("sin",e)}static cos(e){return new $("cos",e)}static sinh(e){return new $("sinh",e)}static cosh(e){return new $("cosh",e)}}class Re extends ve{constructor(e){super(),this.func=Re,this.arg=e}args(){return[this.arg]}eval(e={},n){return Math.abs(this.arg.eval(e,n))}codegen(){return"Math.abs("+this.arg.codegen()+")"}print(){return"abs("+this.arg.print()+")"}tex(){return"\\left|"+this.arg.tex()+"\\right|"}collect(e){var n=this.recurse("collect",e);if(n.arg.isPositive())return n.arg;if(n.arg instanceof z)return n.arg.abs();if(n.arg instanceof N){var u=w.groupBy(n.arg.terms,f=>f.isPositive()?"positive":f instanceof z?"number":"other"),l=u.positive.concat(w.invoke(u.number,"abs"));return u.other.length&&l.push(new Re(new N(u.other).flatten())),new N(l).flatten()}else return n}expand(){var e=this.recurse("expand");if(e.arg instanceof N){var n=w.map(e.arg.terms,u=>new Re(u));return new N(n)}else return e}isPositive(){return!0}}class Te extends ve{constructor(e,n,u){super(),this.func=Te,this.signs={"=":" = ","<":" < ",">":" > ","<>":" \\ne ","<=":" \\le ",">=":" \\ge "},this.left=e,this.type=n,this.right=u}args(){return[this.left,this.type,this.right]}needsExplicitMul(){return!1}print(){return this.left.print()+this.type+this.right.print()}tex(){return this.left.tex()+this.signs[this.type]+this.right.tex()}normalize(){var e=this.recurse("normalize");return w.contains([">",">="],e.type)?new Te(e.right,e.type.replace(">","<"),e.left):e}asExpr(e=!1){var n=v=>v instanceof z&&v.isSimple()&&v.eval()===0;let u=[];this.left instanceof ne?u=w.clone(this.left.terms):n(this.left)||(u=[this.left]),this.right instanceof ne?u=u.concat(this.right.negate().terms):n(this.right)||u.push(this.right.negate());var l=!this.isEquality();u=w.invoke(u,"collect",{preciseFloats:!0});for(var f=0;f<u.length;f++){var o=u[f].getDenominator();l&&!o.isPositive()&&(o=o.asPositiveFactor()),o.equals(te)||(u=w.map(u,v=>N.createOrAppend(v,o).simplify({once:!0,preciseFloats:!0})))}var d=new ne(u).flatten();return e?d:this.divideThrough(d)}divideThrough(e){const n=!this.isEquality(),u=e.simplify({once:!0}),l=u.factor({keepNegative:n});if(!(l instanceof N))return e;const f=l.terms,o=m=>!!m.getVars().length,d=m=>m.equals(te),[v,y]=Pe(f,Ge);if(v.length&&this.isEquality())return new N(v).flatten();let p=y;v.length||(p=w.reject(p,o)),n&&(p=w.invoke(p,"asPositiveFactor")),p=w.reject(p,d),p=w.map(p,m=>new U(m,ke));const g=new N(f.concat(p)).collect();return g.equals(l)?u:g}isEquality(){return w.contains(["=","<>"],this.type)}compare(e){if(!(e instanceof Te))return!1;var n=this.normalize(),u=e.normalize();if(n.type!==u.type)return!1;var l=n.divideThrough(n.asExpr(!0).collect()),f=u.divideThrough(u.asExpr(!0).collect());return n.isEquality()?l.compare(f)||l.compare(N.handleNegative(f)):l.compare(f)}sameForm(e){var n=this.normalize(),u=e.normalize(),l=n.left.sameForm(u.left)&&n.right.sameForm(u.right);return n.isEquality()?l||n.left.sameForm(u.right)&&n.right.sameForm(u.left):l}isSimplified(){var e=this.asExpr(!0),n=this.divideThrough(e).simplify();return e.equals(n)&&this.left.isSimplified()&&this.right.isSimplified()}solveLinearEquationForVariable(e){var n=this.asExpr();if(!(n instanceof ne)||n.terms.length!==2)throw new Error("Can only handle linear equations of the form a + bx (= 0)");var u=d=>d.has(He)&&w.contains(d.getVars(),e.symbol);const l=u(n.terms[0]),f=l?N.handleNegative(n.terms[1]):N.handleNegative(n.terms[0]),o=l?N.handleDivide(n.terms[0],e):N.handleDivide(n.terms[1],e);return N.handleDivide(f,o).simplify()}}class Ae extends ve{needsExplicitMul(){return!1}findGCD(e){return e instanceof Ae||e instanceof z?this.equals(e)?this:te:e.findGCD(this)}}class Me extends Ae{constructor(e,n){super(),this.func=Me,this.symbol=e,this.arg=n}args(){return[this.symbol,this.arg]}print(){return this.symbol+"("+this.arg.print()+")"}tex(){return this.symbol+"("+this.arg.tex()+")"}eval(e={},n){var u=this.arg,l=e[this.symbol],f=w.extend(w.clone(e),{x:u.eval(e,n)}),o=De(l,n);return o.parsed?o.expr.eval(f,n):o}codegen(){return'vars["'+this.symbol+'"]('+this.arg.codegen()+")"}getUnits(){return this.arg.getUnits()}getVars(e){return e?this.arg.getVars():w.union(this.arg.getVars(),[this.symbol]).sort()}getConsts(){return this.arg.getConsts()}}class He extends Ae{constructor(e,n){super(),this.func=He,this.symbol=e,this.subscript=n}args(){return[this.symbol,this.subscript]}exprArgs(){return[]}recurse(){return this}print(){var e="";return this.subscript&&(e="_("+this.subscript.print()+")"),this.symbol+e}prettyPrint(){var e=this.subscript;return e&&(e instanceof z||e instanceof Ae)?this.symbol+"_"+e.print():this.print()}tex(){var e="";this.subscript&&(e="_{"+this.subscript.tex()+"}");var n=this.symbol.length>1?"\\":"";return n+this.symbol+e}repr(){return"Var("+this.print()+")"}eval(e={},n){return e[this.prettyPrint()]}codegen(){return'vars["'+this.prettyPrint()+'"]'}getVars(){return[this.prettyPrint()]}isPositive(){return!1}}const Ne=class Ne extends Ae{constructor(e){super(),this.func=Ne,this.symbol=e}args(){return[this.symbol]}recurse(){return this}eval(e={},n){return this.symbol==="pi"?Math.PI:this.symbol==="e"?Math.E:void 0}codegen(){return this.symbol==="pi"?"Math.PI":this.symbol==="e"?"Math.E":void 0}print(){return this.symbol}tex(){return this.symbol==="pi"?"\\pi ":this.symbol==="e"?"e":void 0}isPositive(){return this.eval()>0}abs(){return this.eval()>0?this:N.handleNegative(this)}getConsts(){return[this.print()]}};Ne.e=new Ne("e"),Ne.pi=new Ne("pi");let be=Ne;class z extends ve{constructor(){super(),this.n=0,this.hints={...this.hints,negate:!1,subtract:!1,divide:!1,root:!1,fraction:!1,entered:!1}}repr(){return this.print()}strip(){return this.abs()}recurse(){return this}codegen(){return this.print()}isSubtract(){return!!this.hints.subtract}needsExplicitMul(){return!0}isPositive(){return this.eval()>0}isNegative(){return this.eval()<0}asPositiveFactor(){return this.isPositive()?this:this.abs()}getDecimalPlaces(){var e=(""+this.n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}static negativeOne(e){return e==="subtract"?St:e==="divide"?ke:Ie}static findGCD(e,n){var u;if(e=Math.abs(e),n=Math.abs(n),e!==Math.floor(e)||n!==Math.floor(n))return 1;for(;n;)u=e%n,e=n,n=u;return e}static min(...e){return w.min(e,n=>n.eval())}static max(...e){return w.max(e,n=>n.eval())}}class H extends z{constructor(e,n){super(),this.func=H;var u=e,l=n;l<0&&(u=-u,l=-l),this.n=u,this.d=l}args(){return[this.n,this.d]}eval(){return this.n/this.d}print(){return this.n.toString()+"/"+this.d.toString()}tex(){var e="\\frac{"+Math.abs(this.n).toString()+"}{"+this.d.toString()+"}";return this.n<0?"-"+e:e}add(e,n){return e instanceof H?new H(this.n*e.d+this.d*e.n,this.d*e.d).collect():e.add(this,n)}mul(e,n){return e instanceof H?new H(this.n*e.n,this.d*e.d).collect():e.mul(this,n)}collect(){var e=z.findGCD(this.n,this.d),n=this.n/e,u=this.d/e;return u===1?new _(n):new H(n,u)}negate(){return new H(-this.n,this.d)}abs(){return new H(Math.abs(this.n),this.d)}findGCD(e){if(e instanceof H){var n=z.findGCD(this.n*e.d,e.n*this.d),u=this.d*e.d;return new H(n,u).collect()}else return e instanceof _?new H(z.findGCD(this.n,e.n),this.d):e.findGCD(this)}raiseToThe(e){if(e instanceof _){var n=e.eval()>0,u=e.abs().eval(),l=Math.pow(this.n,u),f=Math.pow(this.d,u);return n?new H(l,f).collect():new H(f,l).collect()}else return new ue(this.eval()).raiseToThe(e)}getDenominator(){return new _(this.d)}isSimple(){return!1}asRational(){return this}}class _ extends H{constructor(e){super(e,1),this.func=_}args(){return[this.n]}print(){return this.n.toString()}tex(){return this.n.toString()}negate(){return new _(-this.n)}abs(){return new _(Math.abs(this.n))}isSimple(){return!0}findGCD(e){return e instanceof _?new _(z.findGCD(this.n,e.n)):e.findGCD(this)}static create(e){return new _(e).addHint("entered")}}class ue extends z{constructor(e){super(),this.func=ue,this.n=e}args(){return[this.n]}eval(){return this.n}print(){return this.n.toString()}tex(){return this.n.toString()}add(e,n){return n&&n.preciseFloats?ue.toDecimalPlaces(this.n+e.eval(),Math.max(this.getDecimalPlaces(),e.getDecimalPlaces())):new ue(this.n+e.eval()).collect()}mul(e,n){return n&&n.preciseFloats?ue.toDecimalPlaces(this.n*e.eval(),this.getDecimalPlaces()+e.getDecimalPlaces()):new ue(this.n*e.eval()).collect()}collect(e){return this}negate(){return new ue(-this.n)}abs(){return new ue(Math.abs(this.n))}findGCD(e){return e instanceof z?new ue(z.findGCD(this.eval(),e.eval())).collect():e.findGCD(this)}raiseToThe(e,n){return n&&n.preciseFloats&&e instanceof _&&e.n>1?ue.toDecimalPlaces(new U(this,e).eval(),this.getDecimalPlaces()*e.n):new ue(new U(this,e).eval()).collect()}asRational(){var e=this.n.toString().split(".");if(e.length===1)return new H(this.n,1);var n=Number(e.join("")),u=Math.pow(10,e[1].length);return new H(n,u).collect()}getDenominator(){return this.asRational().getDenominator()}isSimple(){return!0}static create(e){return new ue(e).addHint("entered")}static toDecimalPlaces(e,n){return new ue(+e.toFixed(Math.min(n,20))).collect()}}const Ie=new _(-1).addHint("negate"),St=new _(-1).addHint("subtract"),ke=new _(-1).addHint("divide"),Ft=new H(1,2).addHint("root"),_e=new _(0),te=new _(1),Pt=new _(10);var Tt=function(a,e){throw new Error(e.loc.first_column)};Fe.yy={Add:ne,Mul:N,Pow:U,Log:ce,Trig:$,Eq:Te,Abs:Re,Func:Me,Const:be,Var:He,Int:_,Float:ue,parseError:Tt,constants:["e"],symbolLexer:function(a){return w.contains(Fe.yy.constants,a)?"CONST":w.contains(Fe.yy.functions,a)?"FUNC":"VAR"}};const De=function(a,e){try{e&&e.functions?Fe.yy.functions=w.without(e.functions,"i"):Fe.yy.functions=[],e&&e.decimal_separator&&(a=a.split(e.decimal_separator).join("."));var n=Fe.parse(a).completeParse();return{parsed:!0,expr:n}}catch(u){return{parsed:!1,error:u.message}}};class oe extends Ae{constructor(e){super(),this.func=oe,this.symbol=e}args(){return[this.symbol]}recurse(){return this}eval(e={},n){return 1}getUnits(){return[{unit:this.symbol,pow:1}]}codegen(){return"1"}print(){return this.symbol}tex(){return this.symbol}collect(e){if(w(Rt).has(this.symbol))return this;if(w(it).has(this.symbol))return it[this.symbol].conversion;throw new Error("could not understand unit: "+this.symbol)}}var Rt={m:new oe("m"),g:new oe("g"),s:new oe("s"),A:new oe("A"),K:new oe("K"),mol:new oe("mol"),cd:new oe("cd")};new U(new _(10),new _(-18)),new U(new _(10),new _(-15)),new U(new _(10),new _(-12)),new U(new _(10),new _(-9)),new U(new _(10),new _(-6)),new U(new _(10),new _(-3)),new U(new _(10),new _(-2)),new U(new _(10),new _(-1)),new _(10),new U(new _(10),new _(2)),new U(new _(10),new _(3)),new U(new _(10),new _(6)),new U(new _(10),new _(9)),new U(new _(10),new _(12)),new U(new _(10),new _(15)),new U(new _(10),new _(18)),new U(new _(10),new _(27));const ee="hasPrefixes",P="hasntPrefixes",k=function(a,e){var n=a.split("|"),u=n[0].trim(),l=n[1].trim(),f=te;u!==""&&(f=De(u).expr);var o=l.split("/"),d=[f];return o[0]&&o[0].split(" ").filter(v=>v!=="").forEach(v=>d.push(new oe(v))),o[1]&&o[1].split(" ").filter(v=>v!=="").forEach(v=>d.push(new U(new oe(v),ke))),{conversion:new N(d),prefixes:e}};var it={Da:k("1.6605388628 x 10^-24 | g",ee),u:k("| Da",P),meter:k("| m",P),meters:k("| m",P),in:k("254 / 10000 | m",P),ft:k("3048  / 10000 | m",P),yd:k("9144  / 10000 | m",P),mi:k("1609344 / 1000 | m",P),ly:k("9.4607 x 10^15 | m",P),nmi:k("1852 | m",P),Å:k("10^-10 | m",P),pc:k("3.0857 x 10^16 | m",P),min:k("60 | s",P),hr:k("3600 | s",P),sec:k("| s",P),day:k("86400 | s",P),wk:k("604800 | s",P),fortnight:k("14 | day",P),shake:k("10^-8 | s",P),olympiad:k("126200000 | s",P),"°C":k("1 | K",P),"°F":k("5/9 | K",P),"°R":k("5/9 | K",P),e:k("1.6021765314 x 10^-19 | C",P),c:k("299792458 | m / s",P),kn:k("514/1000 | m / s",P),kt:k("| kn",P),knot:k("| kn",P),J:k("| N m",ee),BTU:k("1060 | J",P),cal:k("4184 / 1000 | J",ee),eV:k("1.602176514 x 10^-19 | J",ee),erg:k("10^−7 | J",ee),W:k("| J / s",ee),"H-e":k("80 | W",P),N:k("1000 | g m / s s",ee),lb:k("4448221615 / 1000000000 | N",P),dyn:k("10^-5 | N",P),Pa:k("1 | N / m m m",ee),bar:k("10^5 | Pa",ee),"㏔":k("1/1000 | bar",P),"㍴":k("| bar",P),atm:k("101325 | Pa",P),Torr:k("1/760 | atm",P),mmHg:k("| Torr",P),ha:k("10^4 | m m",P),b:k("10^−28 | m m",ee),barn:k("| b",ee),acre:k("4046.87 | m m",P),skilodge:k("10^-31 | m m",P),outhouse:k("10^-34 | m m",P),shed:k("10^-52 | m m",P),L:k("1/1000 | m m m",ee),gal:k("3785/1000 | L",ee),cup:k("1/16 | gal",P),qt:k("1/4 | gal",P),quart:k("| qt",P),p:k("1/8 | gal",P),pt:k("| p",P),pint:k("| p",P),"fl oz":k("1/8 | cup",P),"fl. oz.":k("1/8 | cup",P),tbsp:k("1/16 | cup",P),tsp:k("1/3 | tbsp",P),rev:k("2 pi | rad",P),deg:k("180 pi | rad",P),"°":k("| deg",P),arcminute:k("1/60 | deg",P),arcsec:k("1/3600 | deg",P),Hu:k("1000 | dB",ee),dozen:k("12 |",P),mol:k("6.0221412927 x 10^23 |",ee),"%":k("1/100 |",P),percent:k("| %",P),ppm:k("1/1000000 |",P),V:k("1000 | g m m / s s C",ee),C:k("| A s",ee),ampere:k("| A",P),Ω:k("| V / A",ee),ohm:k("| Ω",P),F:k("| C / V",ee),H:k("| ohm s",ee),T:k("1000 | g / C s",ee),Wb:k("1000 | g m m / C s",ee),lm:k("pi x 10^4 | cd / m m",P),lx:k("| lm / m m",P),nit:k("| cd / m m",P),sb:k("10^4 | cd / m m",P),stilb:k("1 | sb",P),apostilb:k("1 / pi x 10^(-4) | sb",P),blondel:k("| apostilb",P),asb:k("| apostilb",P),la:k("| lm",P),Lb:k("| lm",P),sk:k("10^-7 | lm",P),skot:k("| sk",P),bril:k("10^-11 | lm",P),Hz:k("| / s",ee)};const st=function(a,e,n={}){const l={...{form:!1,simplify:!1},...n},f=a.sameVars(e);if(!f.equal){let o;return f.equalIgnoringCase?o="Check your variables; one or more are using the wrong case (upper or lower).":o="Check your variables; you may have used the wrong letter for one or more of them.",{equal:!1,wrongVariableCase:f.equalIgnoringCase,wrongVariableNames:!f.equalIgnoringCase,message:o}}return a.compare(e)?l.form&&!a.sameForm(e)?{equal:!1,message:"Your answer is not in the correct form."}:l.simplify&&!a.isSimplified()?{equal:!1,message:"Your answer is not fully expanded and simplified."}:{equal:!0,message:null}:{equal:!1,message:null}},_t="@khanacademy/kmath",Dt="__lib_version__";ot(_t,Dt);var Je={exports:{}};(function(a,e){(function(){var n=this,u=n._,l={},f=Array.prototype,o=Object.prototype,d=Function.prototype,v=f.push,y=f.slice,p=f.concat,g=o.toString,m=o.hasOwnProperty,M=f.forEach,E=f.map,A=f.reduce,O=f.reduceRight,D=f.filter,B=f.every,K=f.some,ie=f.indexOf,de=f.lastIndexOf,X=Array.isArray,j=Object.keys,se=d.bind,i=function(t){if(t instanceof i)return t;if(!(this instanceof i))return new i(t);this._wrapped=t};a.exports&&(e=a.exports=i),e._=i,i.VERSION="1.4.4";var L=i.each=i.forEach=function(t,r,s){if(t!=null){if(M&&t.forEach===M)t.forEach(r,s);else if(t.length===+t.length){for(var c=0,h=t.length;c<h;c++)if(r.call(s,t[c],c,t)===l)return}else for(var I in t)if(i.has(t,I)&&r.call(s,t[I],I,t)===l)return}};i.map=i.collect=function(t,r,s){var c=[];return t==null?c:E&&t.map===E?t.map(r,s):(L(t,function(h,I,x){c[c.length]=r.call(s,h,I,x)}),c)};var ge="Reduce of empty array with no initial value";i.reduce=i.foldl=i.inject=function(t,r,s,c){var h=arguments.length>2;if(t==null&&(t=[]),A&&t.reduce===A)return c&&(r=i.bind(r,c)),h?t.reduce(r,s):t.reduce(r);if(L(t,function(I,x,F){h?s=r.call(c,s,I,x,F):(s=I,h=!0)}),!h)throw new TypeError(ge);return s},i.reduceRight=i.foldr=function(t,r,s,c){var h=arguments.length>2;if(t==null&&(t=[]),O&&t.reduceRight===O)return c&&(r=i.bind(r,c)),h?t.reduceRight(r,s):t.reduceRight(r);var I=t.length;if(I!==+I){var x=i.keys(t);I=x.length}if(L(t,function(F,R,W){R=x?x[--I]:--I,h?s=r.call(c,s,t[R],R,W):(s=t[R],h=!0)}),!h)throw new TypeError(ge);return s},i.find=i.detect=function(t,r,s){var c;return Z(t,function(h,I,x){if(r.call(s,h,I,x))return c=h,!0}),c},i.filter=i.select=function(t,r,s){var c=[];return t==null?c:D&&t.filter===D?t.filter(r,s):(L(t,function(h,I,x){r.call(s,h,I,x)&&(c[c.length]=h)}),c)},i.reject=function(t,r,s){return i.filter(t,function(c,h,I){return!r.call(s,c,h,I)},s)},i.every=i.all=function(t,r,s){r||(r=i.identity);var c=!0;return t==null?c:B&&t.every===B?t.every(r,s):(L(t,function(h,I,x){if(!(c=c&&r.call(s,h,I,x)))return l}),!!c)};var Z=i.some=i.any=function(t,r,s){r||(r=i.identity);var c=!1;return t==null?c:K&&t.some===K?t.some(r,s):(L(t,function(h,I,x){if(c||(c=r.call(s,h,I,x)))return l}),!!c)};i.contains=i.include=function(t,r){return t==null?!1:ie&&t.indexOf===ie?t.indexOf(r)!=-1:Z(t,function(s){return s===r})},i.invoke=function(t,r){var s=y.call(arguments,2),c=i.isFunction(r);return i.map(t,function(h){return(c?r:h[r]).apply(h,s)})},i.pluck=function(t,r){return i.map(t,function(s){return s[r]})},i.where=function(t,r,s){return i.isEmpty(r)?s?null:[]:i[s?"find":"filter"](t,function(c){for(var h in r)if(r[h]!==c[h])return!1;return!0})},i.findWhere=function(t,r){return i.where(t,r,!0)},i.max=function(t,r,s){if(!r&&i.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!r&&i.isEmpty(t))return-1/0;var c={computed:-1/0,value:-1/0};return L(t,function(h,I,x){var F=r?r.call(s,h,I,x):h;F>=c.computed&&(c={value:h,computed:F})}),c.value},i.min=function(t,r,s){if(!r&&i.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!r&&i.isEmpty(t))return 1/0;var c={computed:1/0,value:1/0};return L(t,function(h,I,x){var F=r?r.call(s,h,I,x):h;F<c.computed&&(c={value:h,computed:F})}),c.value},i.shuffle=function(t){var r,s=0,c=[];return L(t,function(h){r=i.random(s++),c[s-1]=c[r],c[r]=h}),c};var Q=function(t){return i.isFunction(t)?t:function(r){return r[t]}};i.sortBy=function(t,r,s){var c=Q(r);return i.pluck(i.map(t,function(h,I,x){return{value:h,index:I,criteria:c.call(s,h,I,x)}}).sort(function(h,I){var x=h.criteria,F=I.criteria;if(x!==F){if(x>F||x===void 0)return 1;if(x<F||F===void 0)return-1}return h.index<I.index?-1:1}),"value")};var S=function(t,r,s,c){var h={},I=Q(r||i.identity);return L(t,function(x,F){var R=I.call(s,x,F,t);c(h,R,x)}),h};i.groupBy=function(t,r,s){return S(t,r,s,function(c,h,I){(i.has(c,h)?c[h]:c[h]=[]).push(I)})},i.countBy=function(t,r,s){return S(t,r,s,function(c,h){i.has(c,h)||(c[h]=0),c[h]++})},i.sortedIndex=function(t,r,s,c){s=s==null?i.identity:Q(s);for(var h=s.call(c,r),I=0,x=t.length;I<x;){var F=I+x>>>1;s.call(c,t[F])<h?I=F+1:x=F}return I},i.toArray=function(t){return t?i.isArray(t)?y.call(t):t.length===+t.length?i.map(t,i.identity):i.values(t):[]},i.size=function(t){return t==null?0:t.length===+t.length?t.length:i.keys(t).length},i.first=i.head=i.take=function(t,r,s){if(t!=null)return r!=null&&!s?y.call(t,0,r):t[0]},i.initial=function(t,r,s){return y.call(t,0,t.length-(r==null||s?1:r))},i.last=function(t,r,s){if(t!=null)return r!=null&&!s?y.call(t,Math.max(t.length-r,0)):t[t.length-1]},i.rest=i.tail=i.drop=function(t,r,s){return y.call(t,r==null||s?1:r)},i.compact=function(t){return i.filter(t,i.identity)};var V=function(t,r,s){return L(t,function(c){i.isArray(c)?r?v.apply(s,c):V(c,r,s):s.push(c)}),s};i.flatten=function(t,r){return V(t,r,[])},i.without=function(t){return i.difference(t,y.call(arguments,1))},i.uniq=i.unique=function(t,r,s,c){i.isFunction(r)&&(c=s,s=r,r=!1);var h=s?i.map(t,s,c):t,I=[],x=[];return L(h,function(F,R){(r?!R||x[x.length-1]!==F:!i.contains(x,F))&&(x.push(F),I.push(t[R]))}),I},i.union=function(){return i.uniq(p.apply(f,arguments))},i.intersection=function(t){var r=y.call(arguments,1);return i.filter(i.uniq(t),function(s){return i.every(r,function(c){return i.indexOf(c,s)>=0})})},i.difference=function(t){var r=p.apply(f,y.call(arguments,1));return i.filter(t,function(s){return!i.contains(r,s)})},i.zip=function(){for(var t=y.call(arguments),r=i.max(i.pluck(t,"length")),s=new Array(r),c=0;c<r;c++)s[c]=i.pluck(t,""+c);return s},i.object=function(t,r){if(t==null)return{};for(var s={},c=0,h=t.length;c<h;c++)r?s[t[c]]=r[c]:s[t[c][0]]=t[c][1];return s},i.indexOf=function(t,r,s){if(t==null)return-1;var c=0,h=t.length;if(s)if(typeof s=="number")c=s<0?Math.max(0,h+s):s;else return c=i.sortedIndex(t,r),t[c]===r?c:-1;if(ie&&t.indexOf===ie)return t.indexOf(r,s);for(;c<h;c++)if(t[c]===r)return c;return-1},i.lastIndexOf=function(t,r,s){if(t==null)return-1;var c=s!=null;if(de&&t.lastIndexOf===de)return c?t.lastIndexOf(r,s):t.lastIndexOf(r);for(var h=c?s:t.length;h--;)if(t[h]===r)return h;return-1},i.range=function(t,r,s){arguments.length<=1&&(r=t||0,t=0),s=arguments[2]||1;for(var c=Math.max(Math.ceil((r-t)/s),0),h=0,I=new Array(c);h<c;)I[h++]=t,t+=s;return I},i.bind=function(t,r){if(t.bind===se&&se)return se.apply(t,y.call(arguments,1));var s=y.call(arguments,2);return function(){return t.apply(r,s.concat(y.call(arguments)))}},i.partial=function(t){var r=y.call(arguments,1);return function(){return t.apply(this,r.concat(y.call(arguments)))}},i.bindAll=function(t){var r=y.call(arguments,1);return r.length===0&&(r=i.functions(t)),L(r,function(s){t[s]=i.bind(t[s],t)}),t},i.memoize=function(t,r){var s={};return r||(r=i.identity),function(){var c=r.apply(this,arguments);return i.has(s,c)?s[c]:s[c]=t.apply(this,arguments)}},i.delay=function(t,r){var s=y.call(arguments,2);return setTimeout(function(){return t.apply(null,s)},r)},i.defer=function(t){return i.delay.apply(i,[t,1].concat(y.call(arguments,1)))},i.throttle=function(t,r){var s,c,h,I,x=0,F=function(){x=new Date,h=null,I=t.apply(s,c)};return function(){var R=new Date,W=r-(R-x);return s=this,c=arguments,W<=0?(clearTimeout(h),h=null,x=R,I=t.apply(s,c)):h||(h=setTimeout(F,W)),I}},i.debounce=function(t,r,s){var c,h;return function(){var I=this,x=arguments,F=function(){c=null,s||(h=t.apply(I,x))},R=s&&!c;return clearTimeout(c),c=setTimeout(F,r),R&&(h=t.apply(I,x)),h}},i.once=function(t){var r=!1,s;return function(){return r||(r=!0,s=t.apply(this,arguments),t=null),s}},i.wrap=function(t,r){return function(){var s=[t];return v.apply(s,arguments),r.apply(this,s)}},i.compose=function(){var t=arguments;return function(){for(var r=arguments,s=t.length-1;s>=0;s--)r=[t[s].apply(this,r)];return r[0]}},i.after=function(t,r){return t<=0?r():function(){if(--t<1)return r.apply(this,arguments)}},i.keys=j||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var r=[];for(var s in t)i.has(t,s)&&(r[r.length]=s);return r},i.values=function(t){var r=[];for(var s in t)i.has(t,s)&&r.push(t[s]);return r},i.pairs=function(t){var r=[];for(var s in t)i.has(t,s)&&r.push([s,t[s]]);return r},i.invert=function(t){var r={};for(var s in t)i.has(t,s)&&(r[t[s]]=s);return r},i.functions=i.methods=function(t){var r=[];for(var s in t)i.isFunction(t[s])&&r.push(s);return r.sort()},i.extend=function(t){return L(y.call(arguments,1),function(r){if(r)for(var s in r)t[s]=r[s]}),t},i.pick=function(t){var r={},s=p.apply(f,y.call(arguments,1));return L(s,function(c){c in t&&(r[c]=t[c])}),r},i.omit=function(t){var r={},s=p.apply(f,y.call(arguments,1));for(var c in t)i.contains(s,c)||(r[c]=t[c]);return r},i.defaults=function(t){return L(y.call(arguments,1),function(r){if(r)for(var s in r)t[s]==null&&(t[s]=r[s])}),t},i.clone=function(t){return i.isObject(t)?i.isArray(t)?t.slice():i.extend({},t):t},i.tap=function(t,r){return r(t),t};var b=function(t,r,s,c){if(t===r)return t!==0||1/t==1/r;if(t==null||r==null)return t===r;t instanceof i&&(t=t._wrapped),r instanceof i&&(r=r._wrapped);var h=g.call(t);if(h!=g.call(r))return!1;switch(h){case"[object String]":return t==String(r);case"[object Number]":return t!=+t?r!=+r:t==0?1/t==1/r:t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object RegExp]":return t.source==r.source&&t.global==r.global&&t.multiline==r.multiline&&t.ignoreCase==r.ignoreCase}if(typeof t!="object"||typeof r!="object")return!1;for(var I=s.length;I--;)if(s[I]==t)return c[I]==r;s.push(t),c.push(r);var x=0,F=!0;if(h=="[object Array]"){if(x=t.length,F=x==r.length,F)for(;x--&&(F=b(t[x],r[x],s,c)););}else{var R=t.constructor,W=r.constructor;if(R!==W&&!(i.isFunction(R)&&R instanceof R&&i.isFunction(W)&&W instanceof W))return!1;for(var J in t)if(i.has(t,J)&&(x++,!(F=i.has(r,J)&&b(t[J],r[J],s,c))))break;if(F){for(J in r)if(i.has(r,J)&&!x--)break;F=!x}}return s.pop(),c.pop(),F};i.isEqual=function(t,r){return b(t,r,[],[])},i.isEmpty=function(t){if(t==null)return!0;if(i.isArray(t)||i.isString(t))return t.length===0;for(var r in t)if(i.has(t,r))return!1;return!0},i.isElement=function(t){return!!(t&&t.nodeType===1)},i.isArray=X||function(t){return g.call(t)=="[object Array]"},i.isObject=function(t){return t===Object(t)},L(["Arguments","Function","String","Number","Date","RegExp"],function(t){i["is"+t]=function(r){return g.call(r)=="[object "+t+"]"}}),i.isArguments(arguments)||(i.isArguments=function(t){return!!(t&&i.has(t,"callee"))}),typeof/./!="function"&&(i.isFunction=function(t){return typeof t=="function"}),i.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},i.isNaN=function(t){return i.isNumber(t)&&t!=+t},i.isBoolean=function(t){return t===!0||t===!1||g.call(t)=="[object Boolean]"},i.isNull=function(t){return t===null},i.isUndefined=function(t){return t===void 0},i.has=function(t,r){return m.call(t,r)},i.noConflict=function(){return n._=u,this},i.identity=function(t){return t},i.times=function(t,r,s){for(var c=Array(t),h=0;h<t;h++)c[h]=r.call(s,h);return c},i.random=function(t,r){return r==null&&(r=t,t=0),t+Math.floor(Math.random()*(r-t+1))};var T={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};T.unescape=i.invert(T.escape);var C={escape:new RegExp("["+i.keys(T.escape).join("")+"]","g"),unescape:new RegExp("("+i.keys(T.unescape).join("|")+")","g")};i.each(["escape","unescape"],function(t){i[t]=function(r){return r==null?"":(""+r).replace(C[t],function(s){return T[t][s]})}}),i.result=function(t,r){if(t==null)return null;var s=t[r];return i.isFunction(s)?s.call(t):s},i.mixin=function(t){L(i.functions(t),function(r){var s=i[r]=t[r];i.prototype[r]=function(){var c=[this._wrapped];return v.apply(c,arguments),me.call(this,s.apply(i,c))}})};var q=0;i.uniqueId=function(t){var r=++q+"";return t?t+r:r},i.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var le=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},fe=/\\|'|\r|\n|\t|\u2028|\u2029/g;i.template=function(t,r,s){var c;s=i.defaults({},s,i.templateSettings);var h=new RegExp([(s.escape||le).source,(s.interpolate||le).source,(s.evaluate||le).source].join("|")+"|$","g"),I=0,x="__p+='";t.replace(h,function(R,W,J,ye,pe){return x+=t.slice(I,pe).replace(fe,function(Ee){return"\\"+G[Ee]}),W&&(x+=`'+
((__t=(`+W+`))==null?'':_.escape(__t))+
'`),J&&(x+=`'+
((__t=(`+J+`))==null?'':__t)+
'`),ye&&(x+=`';
`+ye+`
__p+='`),I=pe+R.length,R}),x+=`';
`,s.variable||(x=`with(obj||{}){
`+x+`}
`),x=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+x+`return __p;
`;try{c=new Function(s.variable||"obj","_",x)}catch(R){throw R.source=x,R}if(r)return c(r,i);var F=function(R){return c.call(this,R,i)};return F.source="function("+(s.variable||"obj")+`){
`+x+"}",F},i.chain=function(t){return i(t).chain()};var me=function(t){return this._chain?i(t).chain():t};i.mixin(i),L(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var r=f[t];i.prototype[t]=function(){var s=this._wrapped;return r.apply(s,arguments),(t=="shift"||t=="splice")&&s.length===0&&delete s[0],me.call(this,s)}}),L(["concat","join","slice"],function(t){var r=f[t];i.prototype[t]=function(){return me.call(this,r.apply(this._wrapped,arguments))}}),i.extend(i.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(ft)})(Je,Je.exports);var qt=Je.exports;const at=ht(qt),Vt=1e-9,Gt=Math.pow(2,-42);function kn(a){return at.isNumber(a)&&!at.isNaN(a)}function qe(a,e,n){return a==null||e==null?a===e:a===e?!0:(n==null&&(n=Vt),Math.abs(a-e)<n)}function Nn(a,e){return qe(a,0,e)?0:Math.abs(a)/a}function Ct(a,e){return qe(Math.round(a),a,e)}function bn(a,e){const n=Math.pow(10,e);return Math.round(a*n)/n}function An(a,e){return Math.round(a/e)*e}function On(a,e){return Math.floor(a/e)*e}function Sn(a,e){return Math.ceil(a/e)*e}function ut(a,e=Gt,n=1e3){let u=[1,0],l=[0,1],f=Math.floor(a),o=a-f;for(;l[0]<=n;){if(qe(u[0]/l[0],a,e))return[u[0],l[0]];u=[f*u[0]+u[1],u[0]],l=[f*l[0]+l[1],l[0]],f=Math.floor(1/o),o=1/o-f}return[a,1]}const ae={cleanMath:function(a){return typeof a=="string"?a.replace(/\+\s*-/g,"- ").replace(/-\s*-/g,"+ ").replace(/\^1/g,""):a},bound:function(a){return a===0?a:a<0?-ae.bound(-a):Math.max(1e-6,Math.min(a,1e20))},factorial:function(a){return a<=1?a:a*ae.factorial(a-1)},getGCD:function(a,e){if(arguments.length>2){const u=[].slice.call(arguments,1);return ae.getGCD(a,ae.getGCD(...u))}let n;for(a=Math.abs(a),e=Math.abs(e);e;)n=a%e,a=e,e=n;return a},getLCM:function(a,e){if(arguments.length>2){const n=[].slice.call(arguments,1);return ae.getLCM(a,ae.getLCM(...n))}return Math.abs(a*e)/ae.getGCD(a,e)},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],isPrime:function(a){if(a<=1)return!1;if(a<101)return!!he.grep(ae.primes,function(e,n){return Math.abs(e-a)<=.5}).length;if(a<=1||a>2&&a%2===0)return!1;for(let e=3,n=Math.sqrt(a);e<=n;e+=2)if(a%e===0)return!1;return!0},getPrimeFactorization:function(a){if(a===1)return[];if(ae.isPrime(a))return[a];const e=Math.sqrt(a);for(let n=2;n<=e;n++)if(a%n===0)return he.merge(ae.getPrimeFactorization(n),ae.getPrimeFactorization(a/n))},roundToNearest:function(a,e){return Math.round(e/a)*a},roundTo:function(a,e){const n=Math.pow(10,a).toFixed(5);return Math.round((e*n).toFixed(5))/n},toFixedApprox:function(a,e){const n=a.toFixed(e);return qe(+n,a)?n:"\\approx "+n},roundToApprox:function(a,e){const n=ae.roundTo(e,a);return qe(n,a)?String(n):ae.toFixedApprox(a,e)},toFraction:function(a,e){if(e==null&&(e=Math.pow(2,-46)),a<0||a>1){let v=a%1;v+=v<0?1:0;const y=ae.toFraction(v,e);return y[0]+=Math.round(a-v)*y[1],y}if(Math.abs(Math.round(Number(a))-a)<=e)return[Math.round(a),1];let n=0,u=1,l=1,f=1,o=1,d=2;for(;;){if(Math.abs(Number(o/d)-a)<=e)return[o,d];o/d<a?(n=o,u=d):(l=o,f=d),o=n+l,d=u+f}},getNumericFormat:function(a){if(a=he.trim(a),a=a.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1"),a.match(/^[+-]?\d+$/))return"integer";if(a.match(/^[+-]?\d+\s+\d+\s*\/\s*\d+$/))return"mixed";const e=a.match(/^[+-]?(\d+)\s*\/\s*(\d+)$/);return e?parseFloat(e[1])>parseFloat(e[2])?"improper":"proper":a.replace(/[,. ]/g,"").match(/^\d+$/)?"decimal":a.match(/(pi?|\u03c0|t(?:au)?|\u03c4|pau)/)?"pi":null},toNumericString:function(a,e){if(a==null)return"";if(a===0)return"0";if(e==="percent")return a*100+"%";if(e==="pi"){const n=ut(a/Math.PI),u=Math.abs(n[0]),l=n[1];if(Ct(u))return(a<0?"-":"")+(u===1?"":u)+"π"+(l===1?"":"/"+l)}if(re(["proper","improper","mixed","fraction"]).contains(e)){const n=ut(a),u=Math.abs(n[0]),l=n[1],f=a<0?"-":"";if(l===1)return f+u;if(e==="mixed"){const o=u%l,d=(u-o)/l;return f+(d?d+" ":"")+o+"/"+l}return f+u+"/"+l}return String(a)}};function Fn(a){return a.reduce(Lt,0)}function Lt(a,e){return a+e}const zt=Math.pow(2,-42),Se={predicate:{defaultForms:"integer, proper, improper, mixed, decimal",createValidatorFunctional:function(a,e,n){e=re.extend({simplify:"required",ratio:!1,forms:Se.predicate.defaultForms},e);let u;re.isArray(e.forms)?u=e.forms:u=e.forms.split(/\s*,\s*/),e.inexact===void 0&&(e.maxError=0),e.maxError=+e.maxError+zt,re.contains(u,"percent")&&(u=re.without(u,"percent"),u.push("percent"));const l=function(o){o=o.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").replace(/(^\s*)|(\s*$)/gi,"");const d=o.match(/^([+-]?\d+)\s*\/\s*([+-]?\d+)$/),v=o.match(/^([+-]?)\\frac\{([+-]?\d+)\}\{([+-]?\d+)\}$/),y=parseInt(o,10);if(d||v){let p,g,m=!0;return d?(p=parseFloat(d[1]),g=parseFloat(d[2])):(p=parseFloat(v[2]),v[1]==="-"&&(p<0&&(m=!1),p=-p),g=parseFloat(v[3])),m=m&&g>0&&(e.ratio||g!==1)&&ae.getGCD(p,g)===1,[{value:p/g,exact:m}]}return!isNaN(y)&&""+y===o?[{value:y,exact:!0}]:[]},f={integer:function(o){const d=f.decimal(o),v=f.decimal(o,1);return d[0].value!=null&&d[0].value===v[0].value||d[1].value!=null&&d[1].value===v[1].value?d:[]},proper:function(o){return he.map(l(o),function(d){return Math.abs(d.value)<1?[d]:[]})},improper:function(o){return he.map(l(o),function(d){return Math.abs(d.value)>=1?[d]:[]})},pi:function(o){let d,v=[];if(o=o.replace(/\u2212/,"-"),d=o.match(/^([+-]?)\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))v=[{value:parseFloat(d[1]+"1"),exact:!0}];else if(d=o.match(/^([+-]?\s*\d+\s*(?:\/\s*[+-]?\s*\d+)?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))v=l(d[1]);else if(d=o.match(/^([+-]?)\s*(\d+)\s*([+-]?\d+)\s*\/\s*([+-]?\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i)){const p=parseFloat(d[1]+"1"),g=parseFloat(d[2]),m=parseFloat(d[3]),M=parseFloat(d[4]),E=m<M&&ae.getGCD(m,M)===1;v=[{value:p*(g+m/M),exact:E}]}else if(d=o.match(/^([+-]?\s*\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\s*\d+))?$/i))v=l(d[1]+"/"+d[3]);else if(d=o.match(/^([+-]?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\d+))?$/i))v=l(d[1]+"1/"+d[3]);else if(o==="0")v=[{value:0,exact:!0}];else if(d=o.match(/^(.+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))v=f.decimal(d[1]);else{v=re.reduce(Se.predicate.defaultForms.split(/\s*,\s*/),function(m,M){return m.concat(f[M](o))},[]);let p=!1;const g=parseFloat(o);if(!isNaN(g)&&g!==parseInt(o)){const m=Math.PI/12,M=m*Math.round(g/m);Math.abs(g-M)<.01&&(p=!0)}else o.match(/\/\s*7/)&&(p=!0);return p&&re.each(v,function(m){m.piApprox=!0}),v}let y=Math.PI;return o.match(/\\?tau|t|\u03c4/)&&(y=Math.PI*2),o.match(/pau/)&&(y=Math.PI*1.5),he.each(v,function(p,g){g.value*=y}),v},coefficient:function(o){let d=[];return o=o.replace(/\u2212/,"-"),o===""?d=[{value:1,exact:!0}]:o==="-"&&(d=[{value:-1,exact:!0}]),d},log:function(o){let d,v=[];return o=o.replace(/\u2212/,"-"),o=o.replace(/[ \(\)]/g,""),(d=o.match(/^log\s*(\S+)\s*$/i))?v=f.decimal(d[1]):o==="0"&&(v=[{value:0,exact:!0}]),v},percent:function(o){o=he.trim(o);let d=!1;o.indexOf("%")===o.length-1&&(o=he.trim(o.substring(0,o.length-1)),d=!0);const v=f.decimal(o);return he.each(v,function(y,p){p.exact=d,p.value=p.value/100}),v},mixed:function(o){const d=o.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?)(\d+)\s+(\d+)\s*\/\s*(\d+)$/);if(d){const v=parseFloat(d[1]+"1"),y=parseFloat(d[2]),p=parseFloat(d[3]),g=parseFloat(d[4]),m=p<g&&ae.getGCD(p,g)===1;return[{value:v*(y+p/g),exact:m}]}return[]},decimal:function(o,d=1e10){const v=function(p){p=he.trim(p);const g=p.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?(?:\d{1,3}(?:[, ]?\d{3})*\.?|\d{0,3}(?:[, ]?\d{3})*\.(?:\d{3}[, ]?)*\d{1,3}))$/),m=p.match(/^0[0,]*,/);if(g&&!m){let M=parseFloat(g[1].replace(/[, ]/g,""));return e.inexact===void 0&&(M=Math.round(M*d)/d),M}},y=function(p){return p=p.replace(/([\.,])/g,function(g,m){return m==="."?",":"."}),v(p)};return[{value:v(o),exact:!0},{value:y(o),exact:!0}]}};return function(o){const d=e.fallback!=null?""+e.fallback:"";o=he.trim(o)||d;const v={empty:o==="",correct:!1,message:null,guess:o};if(he.each(u,function(y,p){const g=f[p](o);for(let m=0,M=g.length;m<M;m++){const E=g[m].value,A=g[m].exact,O=g[m].piApprox;if(a(E,e.maxError))return A||e.simplify==="optional"?(v.correct=!0,v.message=e.message||null,v.empty=!1):p==="percent"?(v.empty=!0,v.message=n.MISSING_PERCENT_ERROR):(e.simplify!=="enforced"&&(v.empty=!0),v.message=n.NEEDS_TO_BE_SIMPLFIED_ERROR),!1;O&&a(E,Math.abs(E*.001))&&(v.empty=!0,v.message=n.APPROXIMATED_PI_ERROR)}}),v.correct===!1){let y=!1;if(re.each(f,function(p){re.any(p(o),function(m){return m.value!=null&&!re.isNaN(m.value)})&&(y=!0)}),!y)return v.empty=!0,v.message=n.EXTRA_SYMBOLS_ERROR,v}return v}}},number:{convertToPredicate:function(a,e){const n=parseFloat(a);return[function(u,l){return Math.abs(u-n)<l},he.extend({},e,{type:"predicate"})]},createValidatorFunctional:function(a,e,n){return Se.predicate.createValidatorFunctional(...Se.number.convertToPredicate(a,e),n)}},expression:{parseSolution:function(a,e){let n=De(a,e);if(n.parsed){if(e.simplified&&!n.expr.isSimplified())throw new ze("The provided solution ("+a+") isn't fully expanded and simplified.",Le.InvalidInput);n=n.expr}else throw new ze("The provided solution ("+a+") didn't parse.",Le.InvalidInput);return n},createValidatorFunctional:function(a,e,n){return function(u){const l={empty:!1,correct:!1,message:null,guess:u,ungraded:!1};if(!u)return l.empty=!0,l;const f=De(u,e);if(!f.parsed)return l.empty=!0,l;typeof a=="string"&&(a=Se.expression.parseSolution(a,e));const o=st(f.expr,a,e);if(o.equal)l.correct=!0;else if(o.wrongVariableNames||o.wrongVariableCase)l.ungraded=!0,l.message=o.wrongVariableCase?n.WRONG_CASE_ERROR:n.WRONG_LETTER_ERROR,l.suppressAlmostThere=!0;else if(o.message)l.message=o.message;else{const d=De(u.replace(/[xX]/g,"*"),e);if(d.parsed){const v=st(d.expr,a,e);v.equal?(l.ungraded=!0,l.message=n.MULTIPLICATION_SIGN_ERROR):v.message&&(l.message=v.message+" Also, I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign.")}}return l}}}},pt=/^web\+graphie:/,dt=/^file\+graphie:/;function Ye(a){return vt(a)?gt(a):a}function vt(a){return pt.test(a)||dt.test(a)}function Xe(a){return a.replace(pt,"https:").replace(dt,"file:")}function gt(a){return Xe(a)+".svg"}function Ut(a){return Xe(a)+"-data.json"}async function Ht(a){const e=new Image;return new Promise((n,u)=>{e.onload=()=>{n([e.naturalWidth,e.naturalHeight])},e.onerror=u,e.src=Ye(a)})}let ct=!1;const mt=function(a,e,n){return Array.isArray(a)?re.map(a,function(u){return mt(u,e)}):e.call(n,a)};function Bt(a,e){return a==null||e==null?a==null==(e==null):a.length===e.length&&a.every((n,u)=>e[u]===n)}const yt=/^\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/,Wt=/^([a-z-]+) ([0-9]+)$/,$t=new RegExp(yt.source+"$"),Jt="☃",wt={type:"points",earned:0,total:0,message:null},Ze=function(a){let e=a;return function(){let n=e;return n=n+2127912214+(n<<12)&4294967295,n=(n^3345072700^n>>>19)&4294967295,n=n+374761393+(n<<5)&4294967295,n=(n+3550635116^n<<9)&4294967295,n=n+4251993797+(n<<3)&4294967295,n=(n^3042594569^n>>>16)&4294967295,(e=n&268435455)/268435456}};function Kt(a,e,n=!1){const u=re.clone(a);if(!u.length||re.all(u,function(f){return re.isEqual(f,u[0])}))return u;let l;typeof e=="function"?l=e:l=Ze(e);do for(let f=u.length;f>0;f--){const o=Math.floor(l()*f),d=u[o];u[o]=u[f-1],u[f-1]=d}while(n&&re.isEqual(a,u));return u}const Yt="x".split(/(.)/g).length?function(a,e){return a.split(e)}:function(a,e){const n=[];let u=e.lastIndex=0,l;for(;l=e.exec(a);){const f=l;n.push(a.slice(u,f.index)),n.push(...f.slice(1)),u=f.index+f[0].length}return n.push(a.slice(u)),n};function xt(a,e){let n;if(a.type==="points"&&e.type==="points")return a.message&&e.message&&a.message!==e.message?n=null:n=a.message||e.message,{type:"points",earned:a.earned+e.earned,total:a.total+e.total,message:n};if(a.type==="points"&&e.type==="invalid")return e;if(a.type==="invalid"&&e.type==="points")return a;if(a.type==="invalid"&&e.type==="invalid")return a.message&&e.message&&a.message!==e.message?n=null:n=a.message||e.message,{type:"invalid",message:n};throw new ze("PerseusScore with unknown type encountered",Le.InvalidInput,{metadata:{scoreA:JSON.stringify(a),scoreB:JSON.stringify(e)}})}function Xt(a){return Object.values(a).reduce(xt,wt)}function Zt(a){return a.type==="points"&&a.earned>=a.total}function Qt(a,e,n){if(a.type==="points")return{empty:!1,correct:Zt(a),message:a.message,guess:e,state:n};if(a.type==="invalid")return{empty:!0,correct:!1,message:a.message,suppressAlmostThere:a.suppressAlmostThere,guess:e,state:n};throw new ze("Invalid score type: "+a.type,Le.InvalidInput,{metadata:{score:JSON.stringify(a),guess:JSON.stringify(e),state:JSON.stringify(n)}})}function jt(a,e){let n;return Se.predicate.createValidatorFunctional(function(l){return n=l,!0},{simplify:"optional",inexact:!0,forms:"integer, proper, improper, pi, log, mixed, decimal"},e)(a),n}function en(a){return re(a).times(function(){return""})}function tn(a,e,n,u){const l=Qe(e,n),o=a*l>30;return{scale:l,tickStep:a/u,unityLabel:o}}function nn(a,e,n){return re(2).times(function(u){const l=Qe(a[u],n);return It(e[u],l)})}function rn(a){return[a[0]/2,a[1]/2]}function It(a,e){const n=a*e,u=a,l=Math.pow(10,Math.floor(Math.log(u)/Math.LN10)),f=Math.floor(u/l);if(n<25)return a;if(n<50)return f===5?a:a/2;if(f===1)return a/2;if(f===2)return a/4;if(f===5)return a/5}function Qe(a,e){const n=a[1]-a[0];return e/n}function sn(a,e){const n=a[1]-a[0];let u;15<n&&n<=20?u=23:n>100||n<5?u=10:u=16;const l=e/500,f=u*l;return je(n,f)}function je(a,e){let n=Math.pow(10,Math.floor(Math.log(a/e)/Math.LN10));const u=e/a*n;return u<=.15?n*=10:u<=.35?n*=5:u<=.75&&(n*=2),n}const lt=(a,e)=>{const n=e[1]-e[0],u=n/a;return u<=10?a:u<=20?a*2:je(n,10)};function an(a,e){return[lt(a[0],e[0]),lt(a[1],e[1])]}function Ke(a,e){return typeof a=="number"&&typeof e=="number"?Math.abs(a-e)<1e-9:a===e}function Ce(a,e){if(Array.isArray(a)&&Array.isArray(e)){if(a.length!==e.length)return!1;for(let n=0;n<a.length;n++)if(!Ce(a[n],e[n]))return!1;return!0}return Array.isArray(a)||Array.isArray(e)?!1:typeof a=="function"&&typeof e=="function"?Ke(a,e):typeof a=="function"||typeof e=="function"?!1:typeof a=="object"&&typeof e=="object"&&a&&e?a===e||re.all(a,function(n,u){return Ce(e[u],n)})&&re.all(e,function(n,u){return Ce(a[u],n)}):typeof a=="object"&&a||typeof e=="object"&&e?!1:Ke(a,e)}function un(a){a=a||window.location.search.substring(1);const e={},n=/\+/g,u=/([^&=]+)=?([^&]*)/g,l=function(o){return decodeURIComponent(o.replace(n," "))};let f;for(;f=u.exec(a);){const o=f;e[l(o[1])]=l(o[2])}return e}function cn(a,e,n){n=encodeURIComponent(n);const u=new RegExp("([?&])"+e+"=.*?(&|$)","i"),l=a.indexOf("?")!==-1?"&":"?";return a.match(u)?a.replace(u,"$1"+e+"="+n+"$2"):a+l+e+"="+n}function ln(a){return encodeURIComponent(a).replace(/['()!]/g,window.escape).replace(/\*/g,"%2A")}function on(a){return a.type==="invalid"&&(!a.message||a.message.length===0)}const xe={pointerDown:!1,currentTouchIdentifier:null};function fn(){Object.assign(xe,{pointerDown:!1,currentTouchIdentifier:null})}function hn(a){let e;if(xe.pointerDown){if(xe.currentTouchIdentifier!=null){const u=a.changedTouches?a.changedTouches.length:0;for(let l=0;l<u;l++)a.changedTouches[l].identifier===xe.currentTouchIdentifier&&(e=a.changedTouches[l])}else e=a;const n=a.type==="touchend"||a.type==="touchcancel";e&&n&&(xe.pointerDown=!1,xe.currentTouchIdentifier=null)}else xe.pointerDown=!0,a.changedTouches?(e=a.changedTouches[0],xe.currentTouchIdentifier=e.identifier):e=a;if(e)return{left:e.pageX,top:e.pageY}}const pn=()=>{try{const a=Object.defineProperty({},"passive",{get:function(){ct=!0}});window.addEventListener("testPassive",null,a),window.removeEventListener("testPassive",null,a)}catch{}return ct};function dn(a){a.stopPropagation()}function vn(a,e){const n=new Image;n.onload=function(){var u;n.width===0&&n.height===0?((u=document.body)==null||u.appendChild(n),re.defer(function(){var l;e(n.clientWidth,n.clientHeight),(l=document.body)==null||l.removeChild(n)})):e(n.width,n.height)},n.src=Ye(a)}function gn(a){const e=a.value,n=a.selectionStart-1,u=Math.max(e.lastIndexOf(`
`,n),e.lastIndexOf(" ",n))+1;return{string:e.substring(u,n+1),pos:{start:u,end:n}}}function mn(a,e){a.selectionStart=e,a.selectionEnd=e}const yn={getWordBeforeCursor:gn,moveCursor:mn},wn=a=>a.startsWith("$")&&a.endsWith("$")?a.slice(1,-1):a,xn=Ze(new Date().getTime()&4294967295);function Et(a){return Array.isArray(a)?a.map(Et):a}const Pn={inputPathsEqual:Bt,nestedMap:mt,rWidgetRule:yt,rTypeFromWidgetId:Wt,rWidgetParts:$t,snowman:Jt,noScore:wt,seededRNG:Ze,shuffle:Kt,split:Yt,combineScores:xt,flattenScores:Xt,keScoreFromPerseusScore:Qt,firstNumericalParse:jt,stringArrayOfSize:en,gridDimensionConfig:tn,getGridStep:nn,snapStepFromGridStep:rn,scaleFromExtent:Qe,tickStepFromExtent:sn,gridStepFromTickStep:It,tickStepFromNumTicks:je,constrainedTickStepsFromTickSteps:an,eq:Ke,deepEq:Ce,parseQueryString:un,updateQueryString:cn,strongEncodeURIComponent:ln,scoreIsEmpty:on,touchHandlers:xe,resetTouchHandlers:fn,extractPointerLocation:hn,supportsPassiveEvents:pn,captureScratchpadTouchStart:dn,getImageSize:vn,getImageSizeModern:Ht,getRealImageUrl:Ye,isLabeledSVG:vt,getBaseUrl:Xe,getSvgUrl:gt,getDataUrl:Ut,textarea:yn,unescapeMathMode:wn,random:xn,deepClone:Et};export{Vt as D,Le as E,ae as K,ze as P,Pn as U,Zt as a,kn as b,An as c,Sn as d,qe as e,On as f,Se as g,Nn as h,Ct as i,De as p,bn as r,Fn as s,ut as t};
