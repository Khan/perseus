import{a as Q}from"./version-akiLXZts.js";import"./index-default-4_ZsnO94.js";import{j as d}from"./jsx-runtime-63Ea5SlK.js";import{a as V,V as $}from"./mobile-keypad-ZHZ0NI5E.js";import{c as S}from"./index-dmcq622U.js";import{e as Y}from"./index-J2t_5nK1.js";import{l as X}from"./index-awljIyHI.js";import{r as N}from"./index-6oxdNXpR.js";import{F as _}from"./index-9gkyvru-.js";import{M as q}from"./button-assets-ozecF1qE.js";import{m as p,i as z,s as v,b as G,e as I,f as J,h as Z,M as g,j as k,k as P,c as ee,a as te,l as ne,g as oe}from"./key-translator-T3Ft2Fiq.js";import{g as se}from"./_commonjsHelpers-4gQjN7DL.js";const ie="@khanacademy/math-input",ae="__lib_version__";Q(ie,ae);const R=11,D=1.045,A=2*R,re=2*A,F=2*A,K=R,B=D*(K*4),L=4*K,M=class M extends N.Component{render(){const{x:e,y:t,animateIntoPosition:o}=this.props,n=o?{transitionDuration:"100ms",transitionProperty:"transform"}:{},i=`translate(${e}px, ${t}px)`,a={position:"absolute",zIndex:4,left:-F/2,top:0,transform:i,width:F,height:re,touchAction:"none",...n};return d.jsx("span",{style:a,onTouchStart:this.props.onTouchStart,onTouchMove:this.props.onTouchMove,onTouchEnd:this.props.onTouchEnd,onTouchCancel:this.props.onTouchCancel,children:d.jsxs("svg",{fill:"none",width:L,height:B,viewBox:`0 0 ${L} ${B}`,children:[d.jsxs("filter",{id:"math-input_cursor",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:B*.87,width:L*.82,x:"4",y:"0",children:[d.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),d.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),d.jsx("feOffset",{dy:"4"}),d.jsx("feGaussianBlur",{stdDeviation:"4"}),d.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.129412 0 0 0 0 0.141176 0 0 0 0 0.172549 0 0 0 0.08 0"}),d.jsx("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow"}),d.jsx("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",mode:"normal",result:"shape"})]}),d.jsx("g",{filter:"url(#math-input_cursor)",children:d.jsx("path",{d:"m22 4-7.07 7.0284c-1.3988 1.3901-2.3515 3.1615-2.7376 5.09-.3861 1.9284-.1883 3.9274.5685 5.7441s2.0385 3.3694 3.6831 4.4619c1.6445 1.0925 3.5781 1.6756 5.556 1.6756s3.9115-.5831 5.556-1.6756c1.6446-1.0925 2.9263-2.6452 3.6831-4.4619s.9546-3.8157.5685-5.7441c-.3861-1.9285-1.3388-3.6999-2.7376-5.09z",fill:"#1865f2"})}),d.jsx("path",{d:"m14.9301 10.4841 7.0699-7.06989 7.0699 7.06989.0001.0001c1.3988 1.3984 2.3515 3.1802 2.7376 5.1201s.1883 3.9507-.5685 5.7782c-.7568 1.8274-2.0385 3.3894-3.6831 4.4883-1.6445 1.099-3.5781 1.6855-5.556 1.6855s-3.9115-.5865-5.556-1.6855c-1.6446-1.0989-2.9263-2.6609-3.6831-4.4883-.7568-1.8275-.9546-3.8383-.5685-5.7782s1.3388-3.7217 2.7376-5.1201z",stroke:"#fff",strokeWidth:"2"})]})})}};M.defaultProps={animateIntoPosition:!1,visible:!1,x:0,y:0};let C=M;C.__docgenInfo={description:"",methods:[],displayName:"CursorHandle",props:{animateIntoPosition:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onTouchCancel:{required:!0,tsType:{name:"signature",type:"function",raw:"(arg1: React.TouchEvent<HTMLSpanElement>) => void",signature:{arguments:[{type:{name:"ReactTouchEvent",raw:"React.TouchEvent<HTMLSpanElement>",elements:[{name:"HTMLSpanElement"}]},name:"arg1"}],return:{name:"void"}}},description:""},onTouchEnd:{required:!0,tsType:{name:"signature",type:"function",raw:"(arg1: React.TouchEvent<HTMLSpanElement>) => void",signature:{arguments:[{type:{name:"ReactTouchEvent",raw:"React.TouchEvent<HTMLSpanElement>",elements:[{name:"HTMLSpanElement"}]},name:"arg1"}],return:{name:"void"}}},description:""},onTouchMove:{required:!0,tsType:{name:"signature",type:"function",raw:"(arg1: React.TouchEvent<HTMLSpanElement>) => void",signature:{arguments:[{type:{name:"ReactTouchEvent",raw:"React.TouchEvent<HTMLSpanElement>",elements:[{name:"HTMLSpanElement"}]},name:"arg1"}],return:{name:"void"}}},description:""},onTouchStart:{required:!0,tsType:{name:"signature",type:"function",raw:"(arg1: React.TouchEvent<HTMLSpanElement>) => void",signature:{arguments:[{type:{name:"ReactTouchEvent",raw:"React.TouchEvent<HTMLSpanElement>",elements:[{name:"HTMLSpanElement"}]},name:"arg1"}],return:{name:"void"}}},description:""},visible:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},x:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},y:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}}}};const O=8;class le{constructor(e,t){this._scrollListener=()=>{e()};const o={};for(let n=0;n<t.changedTouches.length;n++){const i=t.changedTouches[n];o[i.identifier]=[i.clientX,i.clientY]}this._moveListener=n=>{for(let i=0;i<n.changedTouches.length;i++){const a=n.changedTouches[i],l=o[a.identifier];if(l){const r=[a.clientX,a.clientY],c=r[0]-l[0],u=r[1]-l[1],T=c*c+u*u,b=O*O;T>b&&e()}}},this._endAndCancelListener=n=>{for(let i=0;i<n.changedTouches.length;i++)delete o[n.changedTouches[i].identifier]}}attach(){window.addEventListener("scroll",this._scrollListener),window.addEventListener("touchmove",this._moveListener),window.addEventListener("touchend",this._endAndCancelListener),window.addEventListener("touchcancel",this._endAndCancelListener)}detach(){window.removeEventListener("scroll",this._scrollListener),window.removeEventListener("touchmove",this._moveListener),window.removeEventListener("touchend",this._endAndCancelListener),window.removeEventListener("touchcancel",this._endAndCancelListener)}}function ce(s,e){const t=e[p.L]===g.MQ_END,o=k(e.parent.parent.blocks[0].ends);t?(v(e.parent.parent,e),o&&s.keystroke("Backspace")):s.keystroke("Backspace")}function de(s,e){if(k(e)){const t=e.parent.parent,o=t.latex(),n=t[p.L];v(t,e),t.blocks[1]._el.textContent===""?s.keystroke("Backspace"):(s.keystroke("Backspace"),s.write(o.replace(/^\\sqrt\[\]/,"\\sqrt")),n===g.MQ_END?s.moveToLeftEnd():e.insRightOf(n))}else e[p.L]!==g.MQ_END&&s.keystroke("Backspace")}function ue(s,e){if(k(e)){const t=e.parent.parent,o=P(t);e.insLeftOf(o==null?void 0:o.startNode),e.startSelection(),t[p.R]!==g.MQ_END?e.insRightOf(t[p.R]):e.insRightOf(t),e.select(),e.endSelection(),t[p.R]._el.textContent===""&&s.keystroke("Backspace")}else s.keystroke("Backspace")}function he(s){const e=s[p.L],t=s[p.R],o=P(e);o&&o.startNode?(s.insLeftOf(o.startNode),s.startSelection(),t===g.MQ_END?s.insAtRightEnd(s.parent):s.insLeftOf(t),s.select(),s.endSelection()):(s.startSelection(),s.insLeftOf(e),s.select(),s.endSelection())}function pe(s,e){if(e[p.L]!==g.MQ_END){s.keystroke("Backspace");return}const t=e.parent.parent;if(t[p.L].sub&&t[p.L].sub._el.textContent){e.insAtRightEnd(t[p.L].sub);return}const o=k(e),n=P(t);e.insLeftOf(n&&n.startNode||t),e.startSelection(),e.insRightOf(t),e.select(),e.endSelection(),o&&s.keystroke("Backspace")}function me(s){s.keystroke("Backspace"),s.keystroke("Backspace")}function fe(s){const e=s.cursor();if(e.selection)s.keystroke("Backspace");else{const t=e.parent,o=t.parent,n=e[p.L];z(n)?v(n,e):G(n)?v(n,e):I(n)?v(n,e):J(t)?de(s,e):n.ctrlSeq==="\\left("?he(e):o.ctrlSeq==="\\left("?pe(s,e):Z(e)?ue(s,e):n.ctrlSeq==="\\ge "||n.ctrlSeq==="\\le "?me(s):I(o)&&n===g.MQ_END?ce(s,e):s.keystroke("Backspace")}}class ge{constructor(e,t,o,n,i={}){var a;this.mathField=ee(e,n,o,()=>({substituteTextarea:function(){return document.createElement("span")}})),(a=this.mathField)==null||a.setAriaLabel(t),this.callbacks=i,this.mobileKeyTranslator={...te(n,o),BACKSPACE:fe}}focus(){this.mathField.cursor().show(),this.mathField.focus()}blur(){this.mathField.cursor().hide(),this.mathField.blur()}pressKey(e){const t=this.getCursor(),o=this.mobileKeyTranslator[e];return o&&o(this.mathField,e),t.selection||t.show(),this.callbacks.onSelectionChanged&&this.callbacks.onSelectionChanged(t.selection),{context:this.contextForCursor()}}setCursorPosition(e,t,o){const n=o||document.elementFromPoint(e,t);if(n){const i=this.getCursor();if(n.hasAttribute("mq-root-block"))i.insAtRightEnd(this.mathField.controller().root);else{const a=this.mathField.controller(),l=e-document.body.scrollLeft,r=t-document.body.scrollTop;a.seek(n,l,r).cursor.startSelection();const c=ne(i[p.L]);c&&c.endNode&&(i.insLeftOf(c.endNode),this.mathField.keystroke("Right"))}this.callbacks.onCursorMove&&this.callbacks.onCursorMove({context:this.contextForCursor()})}}getCursor(){return this.mathField.cursor()}contextForCursor(){return oe(this.mathField)}getSelection(){return this.getCursor().selection}getContent(){return this.mathField.latex()}setContent(e){this.mathField.latex(e)}isEmpty(){const e=this.getCursor();return e.parent.id===1&&e[1]===0&&e[-1]===0}}const ye=60,Te=(s,e)=>{const t=s.getBoundingClientRect(),o=t.bottom,n=t.top,i=document.scrollingElement,a=16;if(e){const l=window.innerHeight,r=e.clientHeight,c=l-(r+ye);if(o>c){const u=Math.min(o-c+a,n);i&&(i.scrollTop+=u);return}}i&&n<a&&(i.scrollTop-=t.height+a)},H=.8,E=class E extends N.Component{constructor(){super(...arguments),this.state={focused:!1,showInputFocusStyle:!1,handle:{animateIntoPosition:!1,visible:!1,x:0,y:0}},this._updateInputPadding=()=>{this._container=_.findDOMNode(this),this._root=this._container.querySelector(".mq-root-block");const e=this.getInputInnerPadding();this._root.style.padding=`${e.paddingTop}px ${e.paddingRight}px ${e.paddingBottom}px ${e.paddingLeft}px`,this._root.style.fontSize=`${ve}pt`},this._updateCursorHandle=e=>{const t=this._container.getBoundingClientRect(),n=this._container.querySelector(".mq-cursor").getBoundingClientRect(),i=n.width,a=2,l=this.getInputInnerPadding(),r=t.right-i-l.paddingRight,c=t.left+i+l.paddingLeft;let u=n.left;n.left>r?u=r:n.left<c&&(u=c),this.setState({handle:{visible:!0,animateIntoPosition:e,x:u+i/2-t.left,y:n.bottom+a-t.top}})},this._hideCursorHandle=()=>{this.setState({handle:{visible:!1,x:0,y:0}})},this._handleScroll=()=>{this.state.handle.animateIntoPosition!==!1&&this._hideCursorHandle()},this.blur=()=>{this.mathField.blur(),this.setState({showInputFocusStyle:!1,handle:{visible:!1}})},this.focus=e=>{var t,o;(t=this.props.keypadElement)==null||t.setKeyHandler(n=>{const i=this.mathField.pressKey(n),a=()=>{this.setState({handle:{visible:!1}})},l=this.mathField.getContent();return this.props.value!==l?this.props.onChange(l,a):a(),i}),this.mathField.focus(),(o=this.props)==null||o.onFocus(),e(!0),this.setState({focused:!0,showInputFocusStyle:!0},()=>{setTimeout(()=>{var n;if(this._isMounted){const i=(n=this.props.keypadElement)==null?void 0:n.getDOMNode();Te(this._container,i)}})})},this._findHitNode=(e,t,o,n,i)=>{for(;o>=e.top&&o<=e.bottom;){o+=i;const l=[[t-n,o],[t,o],[t+n,o]].map(h=>document.elementFromPoint(...h)).filter(h=>h&&this._root.contains(h)&&(!h.classList.contains("mq-root-block")&&!h.classList.contains("mq-non-leaf")||h.classList.contains("mq-empty")||h.classList.contains("mq-hasCursor")));let r=null;const c=[];let u=0;const T={},b={};for(const h of l){const m=h.getAttribute("mathquill-command-id");m!=null?(T[m]=(T[m]||0)+1,b[m]=h):c.push(h)}for(const[h,m]of Y(T))m>u&&(u=m,r=b[h]);if(r==null&&c.length>0&&(r=c[0]),r!==null)return this.mathField.setCursorPosition(t,o,r),!0}return!1},this._insertCursorAtClosestNode=(e,t)=>{var u;const o=this.mathField.getCursor();if(!this._root.hasChildNodes()){o.insAtLeftEnd(this.mathField.mathField.controller().root);return}t>this._containerBounds.bottom?t=this._containerBounds.bottom-10:t<this._containerBounds.top&&(t=this._containerBounds.top+10),e>this._containerBounds.right?e=this._containerBounds.right-15:e<this._containerBounds.left&&(e=this._containerBounds.left+15);let n;n=-8;const i=5;if(this._findHitNode(this._containerBounds,e,t,i,n)||(t=this._containerBounds.top,n=8,this._findHitNode(this._containerBounds,e,t,i,n)))return;const a=this._root.firstChild.getBoundingClientRect(),l=this._root.lastChild.getBoundingClientRect(),r=a.left,c=l.right;Math.abs(e-c)<Math.abs(e-r)?o.insAtRightEnd(this.mathField.mathField.controller().root):o.insAtLeftEnd(this.mathField.mathField.controller().root),(u=this.props.keypadElement)==null||u.setCursor({context:this.mathField.contextForCursor()})},this.handleTouchStart=(e,t,o)=>{var n;if(e.stopPropagation(),this._hideCursorHandle(),this.mathField.getContent()!==""){this._containerBounds=this._container.getBoundingClientRect();const i=e.changedTouches[0];this._insertCursorAtClosestNode(i.clientX,i.clientY)}this.state.focused&&!t&&o(!0),this.state.focused||this.focus(o),(n=this.inputRef)==null||n.focus()},this.handleClick=(e,t,o)=>{var n;e.stopPropagation(),this._hideCursorHandle(),this.mathField.getContent()!==""&&(this._containerBounds=this._container.getBoundingClientRect(),this._insertCursorAtClosestNode(e.clientX,e.clientY)),this.state.focused&&!t&&o(!0),this.state.focused||this.focus(o),(n=this.inputRef)==null||n.focus()},this.handleTouchMove=e=>{if(e.stopPropagation(),this.mathField.getContent()!==""&&this.state.focused){const t=e.changedTouches[0];this._insertCursorAtClosestNode(t.clientX,t.clientY)}},this.handleTouchEnd=e=>{e.stopPropagation(),this.mathField.getContent()!==""&&this.state.focused&&this._updateCursorHandle()},this.onCursorHandleTouchStart=e=>{e.stopPropagation(),e.preventDefault(),this._containerBounds=this._container.getBoundingClientRect()},this._constrainToBound=(e,t,o,n)=>e<t?t+(e-t)*n:e>o?o+(e-o)*n:e,this.onCursorHandleTouchMove=e=>{e.stopPropagation();const t=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY,n=t-this._containerBounds.left,i=o-2*R*D-this._containerBounds.top;this.setState({handle:{animateIntoPosition:!1,visible:!0,x:this._constrainToBound(n,0,this._containerBounds.width,H),y:this._constrainToBound(i,0,this._containerBounds.height,H)}});const l=o-22;this._insertCursorAtClosestNode(t,l)},this.onCursorHandleTouchEnd=e=>{e.stopPropagation(),this._updateCursorHandle(!0)},this.onCursorHandleTouchCancel=e=>{e.stopPropagation(),this._updateCursorHandle(!0)},this.domKeyToMathQuillKey=e=>{const t={"+":"PLUS","-":"MINUS","*":"TIMES","/":"DIVIDE",".":"DECIMAL","%":"PERCENT","=":"EQUAL",">":"GT","<":"LT","^":"EXP"};return["0","1","2","3","4","5","6","7","8","9"].includes(e)?`NUM_${e}`:e==="Backspace"?"BACKSPACE":e in t?t[e]:null},this.handleKeyUp=e=>{const t=this.domKeyToMathQuillKey(e.key);if(t){this.mathField.pressKey(t);const o=this.mathField.getContent();this.props.value!==o&&(this.mathField.setContent(this.props.value),this.props.onChange(o,()=>{}),this._hideCursorHandle())}},this.getBorderWidthPx=()=>this.state.focused?2:1,this.getInputInnerPadding=()=>{const e=j-this.getBorderWidthPx();return{paddingTop:e-1,paddingRight:e,paddingBottom:e-3,paddingLeft:e}}}componentDidMount(){this._isMounted=!0,this.mathField=new ge(this._mathContainer,this.props.ariaLabel,this.context.strings,this.context.locale,{onCursorMove:t=>{var o;(o=this.props.keypadElement)==null||o.setCursor(t)}}),this.mathField.setContent(this.props.value),this._updateInputPadding(),this._container=_.findDOMNode(this),this._root=this._container.querySelector(".mq-root-block"),this._root.addEventListener("scroll",this._handleScroll);const e=(t,o)=>{const n=this._getKeypadBounds();return n?n.left<=t&&n.right>=t&&n.top<=o&&n.bottom>=o||n.bottom<o:!1};this.recordTouchStartOutside=t=>{if(this.state.focused&&!this._container.contains(t.target)){let o=!1;if(this.props.keypadElement&&this.props.keypadElement.getDOMNode())for(let n=0;n<t.changedTouches.length;n++){const[i,a]=[t.changedTouches[n].clientX,t.changedTouches[n].clientY];if(e(i,a)){o=!0;break}}o||(this.didTouchOutside=!0,this.dragListener&&this.dragListener.detach(),this.dragListener=new le(()=>{this.didScroll=!0,this.dragListener.detach()},t),this.dragListener.attach())}},this.blurOnTouchEndOutside=t=>{var o,n;this.state.focused&&this.didTouchOutside&&!this.didScroll&&(this.blur(),this.mathField.blur(),(n=(o=this.props).onBlur)==null||n.call(o)),this.didTouchOutside=!1,this.didScroll=!1,this.dragListener&&this.dragListener.detach()},this.blurOnClickOutside=t=>{var o,n;if(this.state.focused&&!this._container.contains(t.target)&&this.props.keypadElement&&this.props.keypadElement.getDOMNode()){const[i,a]=[t.clientX,t.clientY];e(i,a)||(this.blur(),(n=(o=this.props).onBlur)==null||n.call(o))}},window.addEventListener("touchstart",this.recordTouchStartOutside),window.addEventListener("touchend",this.blurOnTouchEndOutside),window.addEventListener("touchcancel",this.blurOnTouchEndOutside),window.addEventListener("click",this.blurOnClickOutside)}componentDidUpdate(e,t){this.mathField.getContent()!==this.props.value&&this.mathField.setContent(this.props.value),t.focused!==this.state.focused&&this._updateInputPadding()}componentWillUnmount(){this._isMounted=!1,window.removeEventListener("touchstart",this.recordTouchStartOutside),window.removeEventListener("touchend",this.blurOnTouchEndOutside),window.removeEventListener("touchcancel",this.blurOnTouchEndOutside),window.removeEventListener("click",this.blurOnClickOutside)}_getKeypadBounds(){var t;const e=(t=this.props.keypadElement)==null?void 0:t.getDOMNode();return e instanceof Element?e.getBoundingClientRect():null}render(){const{showInputFocusStyle:e,handle:t}=this.state,{style:o}=this.props,n={...ke.innerContainer,borderWidth:this.getBorderWidthPx(),...e?{borderColor:S.blue}:{},...o},i=this.context.strings.mathInputBox+" "+this.context.strings.fingerTap;return d.jsx(V.Consumer,{children:({keypadActive:a,setKeypadActive:l})=>d.jsxs($,{style:Ee.input,onTouchStart:r=>{this.handleTouchStart(r,a,l)},onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onClick:r=>{this.handleClick(r,a,l)},role:"textbox",ariaLabel:i,children:[d.jsx("div",{className:"keypad-input",tabIndex:"0",ref:r=>{this.inputRef=r},onFocus:()=>{this.focus(l)},onBlur:this.blur,onKeyUp:this.handleKeyUp,children:d.jsx("div",{ref:r=>{this._mathContainer=_.findDOMNode(r)},style:n})}),e&&t.visible&&d.jsx(C,{...t,onTouchStart:this.onCursorHandleTouchStart,onTouchMove:this.onCursorHandleTouchMove,onTouchEnd:this.onCursorHandleTouchEnd,onTouchCancel:this.onCursorHandleTouchCancel})]})})}};E.contextType=q,E.defaultProps={style:{},value:""};let x=E;x.contextType=q;const ve=18,W=128,be=20,j=12,Ce=be+j*2,xe=64,Ee=X.StyleSheet.create({input:{position:"relative",display:"inline-block",verticalAlign:"middle",maxWidth:W}}),ke={innerContainer:{backgroundColor:"white",minHeight:Ce,minWidth:xe,maxWidth:W,boxSizing:"border-box",position:"relative",borderStyle:"solid",borderColor:S.offBlack50,borderRadius:4,color:S.offBlack}};x.__docgenInfo={description:"",methods:[{name:"_updateInputPadding",docblock:null,modifiers:[],params:[],returns:null},{name:"_getKeypadBounds",docblock:"Returns the current bounds of the keypadElement",modifiers:[],params:[],returns:{type:{name:"union",raw:"DOMRect | null",elements:[{name:"DOMRect"},{name:"null"}]}},description:"Returns the current bounds of the keypadElement"},{name:"_updateCursorHandle",docblock:null,modifiers:[],params:[{name:"animateIntoPosition",optional:!1,type:null}],returns:null},{name:"_hideCursorHandle",docblock:null,modifiers:[],params:[],returns:null},{name:"_handleScroll",docblock:null,modifiers:[],params:[],returns:null},{name:"blur",docblock:null,modifiers:[],params:[],returns:null},{name:"focus",docblock:null,modifiers:[],params:[{name:"setKeypadActive",optional:!1,type:null}],returns:null},{name:"_findHitNode",docblock:`Tries to determine which DOM node to place the cursor next to based on
where the user drags the cursor handle.  If it finds a node it will
place the cursor next to it, update the handle to be under the cursor,
and return true.  If it doesn't find a node, it returns false.

It searches for nodes by doing it tests at the following points:

  (x - dx, y), (x, y), (x + dx, y)

If it doesn't find any nodes from the rendered math it will update y
by adding dy.

The algorithm ends its search when y goes outside the bounds of
containerBounds.

@param {DOMRect} containerBounds - bounds of the container node
@param {number} x - the initial x coordinate in the viewport
@param {number} y - the initial y coordinate in the viewport
@param {number} dx - horizontal spacing between elementFromPoint calls
@param {number} dy - vertical spacing between elementFromPoint calls,
                     sign determines direction.
@returns {boolean} - true if a node was hit, false otherwise.`,modifiers:[],params:[{name:"containerBounds",description:"bounds of the container node",type:{name:"DOMRect"},optional:!1},{name:"x",description:"the initial x coordinate in the viewport",type:{name:"number"},optional:!1},{name:"y",description:"the initial y coordinate in the viewport",type:{name:"number"},optional:!1},{name:"dx",description:"horizontal spacing between elementFromPoint calls",type:{name:"number"},optional:!1},{name:"dy",description:`vertical spacing between elementFromPoint calls,
                     sign determines direction.`,type:{name:"number"},optional:!1}],returns:{description:"true if a node was hit, false otherwise.",type:{name:"boolean"}},description:`Tries to determine which DOM node to place the cursor next to based on
where the user drags the cursor handle.  If it finds a node it will
place the cursor next to it, update the handle to be under the cursor,
and return true.  If it doesn't find a node, it returns false.

It searches for nodes by doing it tests at the following points:

  (x - dx, y), (x, y), (x + dx, y)

If it doesn't find any nodes from the rendered math it will update y
by adding dy.

The algorithm ends its search when y goes outside the bounds of
containerBounds.`},{name:"_insertCursorAtClosestNode",docblock:`Inserts the cursor at the DOM node closest to the given coordinates,
based on hit-tests conducted using #_findHitNode.

@param {number} x - the x coordinate in the viewport
@param {number} y - the y coordinate in the viewport`,modifiers:[],params:[{name:"x",description:"the x coordinate in the viewport",type:{name:"number"},optional:!1},{name:"y",description:"the y coordinate in the viewport",type:{name:"number"},optional:!1}],returns:null,description:`Inserts the cursor at the DOM node closest to the given coordinates,
based on hit-tests conducted using #_findHitNode.`},{name:"handleTouchStart",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"ReactTouchEvent",raw:"React.TouchEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}],alias:"React.TouchEvent"}},{name:"keypadActive",optional:!1,type:{name:"boolean",raw:'KeypadContextType["keypadActive"]'}},{name:"setKeypadActive",optional:!1,type:{name:"signature",raw:'KeypadContextType["setKeypadActive"]'}}],returns:{type:{name:"void"}}},{name:"handleClick",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}],alias:"React.MouseEvent"}},{name:"keypadActive",optional:!1,type:{name:"boolean",raw:'KeypadContextType["keypadActive"]'}},{name:"setKeypadActive",optional:!1,type:{name:"signature",raw:'KeypadContextType["setKeypadActive"]'}}],returns:{type:{name:"void"}}},{name:"handleTouchMove",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"handleTouchEnd",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"onCursorHandleTouchStart",docblock:`When a touch starts in the cursor handle, we track it so as to avoid
handling any touch events ourself.

@param {TouchEvent} e - the raw touch event from the browser`,modifiers:[],params:[{name:"e",description:"the raw touch event from the browser",type:{name:"TouchEvent"},optional:!1}],returns:null,description:`When a touch starts in the cursor handle, we track it so as to avoid
handling any touch events ourself.`},{name:"_constrainToBound",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null},{name:"min",optional:!1,type:null},{name:"max",optional:!1,type:null},{name:"friction",optional:!1,type:null}],returns:null},{name:"onCursorHandleTouchMove",docblock:`When the user moves the cursor handle update the position of the cursor
and the handle.

@param {TouchEvent} e - the raw touch event from the browser`,modifiers:[],params:[{name:"e",description:"the raw touch event from the browser",type:{name:"TouchEvent"},optional:!1}],returns:null,description:`When the user moves the cursor handle update the position of the cursor
and the handle.`},{name:"onCursorHandleTouchEnd",docblock:`When the user releases the cursor handle, animate it back into place.

@param {TouchEvent} e - the raw touch event from the browser`,modifiers:[],params:[{name:"e",description:"the raw touch event from the browser",type:{name:"TouchEvent"},optional:!1}],returns:null,description:"When the user releases the cursor handle, animate it back into place."},{name:"onCursorHandleTouchCancel",docblock:`If the gesture is cancelled mid-drag, simply hide it.

@param {TouchEvent} e - the raw touch event from the browser`,modifiers:[],params:[{name:"e",description:"the raw touch event from the browser",type:{name:"TouchEvent"},optional:!1}],returns:null,description:"If the gesture is cancelled mid-drag, simply hide it."},{name:"domKeyToMathQuillKey",docblock:null,modifiers:[],params:[{name:"key",optional:!1,type:null}],returns:null},{name:"handleKeyUp",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"getBorderWidthPx",docblock:null,modifiers:[],params:[],returns:null},{name:"getInputInnerPadding",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MathInput",props:{keypadElement:{required:!1,tsType:{name:"KeypadAPI"},description:""},ariaLabel:{required:!0,tsType:{name:"string"},description:""},onBlur:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string, callback: any) => void",signature:{arguments:[{type:{name:"string"},name:"value"},{type:{name:"any"},name:"callback"}],return:{name:"void"}}},description:""},onFocus:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},style:{required:!1,tsType:{name:"any"},description:"",defaultValue:{value:"{}",computed:!1}},value:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}}}};var U={exports:{}};function w(s){return function(){return s}}var y=function(){};y.thatReturns=w;y.thatReturnsFalse=w(!1);y.thatReturnsTrue=w(!0);y.thatReturnsNull=w(null);y.thatReturnsThis=function(){return this};y.thatReturnsArgument=function(s){return s};var we=y;function _e(s,e,t,o,n,i,a,l){if(!s){var r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[t,o,n,i,a,l],u=0;r=new Error(e.replace(/%s/g,function(){return c[u++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}var Be=_e,Le="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Se=Le,Pe=we,Re=Be,Me=Se,Ie=function(){function s(o,n,i,a,l,r){r!==Me&&Re(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}s.isRequired=s;function e(){return s}var t={array:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:e,element:s,instanceOf:e,node:s,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return t.checkPropTypes=Pe,t.PropTypes=t,t};U.exports=Ie();var Fe=U.exports;const f=se(Fe),$e=f.shape({activate:f.func.isRequired,dismiss:f.func.isRequired,configure:f.func.isRequired,setCursor:f.func.isRequired,setKeyHandler:f.func.isRequired,getDOMNode:f.func.isRequired});export{x as M,$e as k};
