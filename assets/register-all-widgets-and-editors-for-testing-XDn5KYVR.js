import{j as t}from"./jsx-runtime-63Ea5SlK.js";import{r as o}from"./index-6oxdNXpR.js";import{_ as i}from"./index-default-4_ZsnO94.js";import{D as _e,x as Me,y as $e,z as Fe,B as He,c as u,p as d,G as Be,M as Ke,F as Ge,H as Ye,J as Je,K as Xe,L as Ze,T as Qe,w as et}from"./article-renderer-RqfXkrXG.js";import{b as tt,t as st}from"./index-sg7rMpMn.js";import{U as De,r as at}from"./util-IRB86axJ.js";import{$ as rt}from"./jquery-5v7aFUvu.js";import"./phet-simulation-FbTArG7F.js";import{L as Ee}from"./svg-image-baEPfRKx.js";import{A as ye}from"./perseus-api-_PWPZoDE.js";import"./perseus-item-dEnjc25I.js";import"./hints-renderer-Ki3ObVzO.js";import{o as nt,q as it,r as lt,c as ot,a as pt,d as ut}from"./renderer-7Qx8ywNo.js";import"./base-radio-YK_gwAr5.js";import"./button-group-G5CZaedn.js";import"./graph-FZyQZ4hX.js";import"./hud-ifw9Ofbw.js";import"./icon-7RFbyLiL.js";import"./index-ioZjKB__.js";import"./inline-icon-6fh0Wu1y.js";import"./math-input-6HIKB8TT.js";import"./multi-button-group-QUVHbBcE.js";import"./number-input-cOifiEn8.js";import"./range-input-fLCjpotd.js";import"./text-input-dNVzcDwH.js";import"./text-list-editor-ND6Qift6.js";import{g as Ue}from"./dependencies-CP7Uh8Kq.js";import"./i18n-context-QDJ9FYgZ.js";import"./index-smZ6iCr_.js";import{C as dt}from"./categorizer-editor-jeQrw3gE.js";import{E as ct}from"./perseus-error-l3K_anoI.js";import{c as g}from"./components-0Om0f5Tw.js";import{E as h}from"./editor-jsonify-h_F0RdAU.js";import{C as x}from"./index-5tV1Z6Un.js";import{P as r}from"./index-IiwcBdIZ.js";import{B as f}from"./blur-input-6j4bgLwx.js";import{D as ht}from"./definition-editor-pJ6D5LaZ.js";import{D as mt}from"./dropdown-editor-80ClWvo5.js";import{E as gt}from"./explanation-editor-mK5WL2Ld.js";import{E as ft}from"./expression-editor-IkbuHBIB.js";import{i as yt}from"./icon-paths-5JCXzGsq.js";import{l as _}from"./index-awljIyHI.js";import{E as y}from"./editor-Rb7tlKEA.js";import{i as bt}from"./icon-paths-I0HruMmX.js";import{G as xt}from"./graph-settings-mzDT-goT.js";import{I as vt}from"./image-editor-iHUrghfN.js";import{I as jt}from"./input-number-editor-4Uaykhjw.js";import{I as wt}from"./interaction-editor-6V9bE4pU.js";import{I as Ct}from"./interactive-graph-editor-rcAsx93Z.js";import{L as Tt}from"./label-image-editor-3mw8r_wp.js";import{M as qt}from"./matcher-editor-DD5G3d9o.js";import{N as kt}from"./number-line-editor-qz4Xj2Td.js";import{N as St}from"./numeric-input-editor-xPdnCagH.js";import{P as Ot}from"./phet-simulation-editor-z9FWGID3.js";import{F as le}from"./index-9gkyvru-.js";import{P as Nt}from"./python-program-editor--ur2JIpe.js";import{R as It}from"./editor-fOKwatJt.js";import{S as Pt}from"./sorter-editor--cnKp9yl.js";const At=400,Vt={programID:"",programType:null,settings:[{name:"",value:""}],showEditor:!1,showButtons:!1,height:At},Rt={name:"cs-program",defaultWidgetOptions:Vt},zt={title:"",content:"",widgets:{},images:{},hint:null},Lt={name:"graded-group",defaultWidgetOptions:zt},Wt={gradedGroups:[]},Dt={name:"graded-group-set",defaultWidgetOptions:Wt},Et={content:"",widgets:{},images:{},metadata:void 0},Ut={name:"group",defaultWidgetOptions:Et},_t={url:"",settings:[{name:"",value:""}],width:"400",height:"400",allowFullScreen:!1,allowTopNavigation:!1},Mt={name:"iframe",defaultWidgetOptions:_t},$t={matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0]},Ft={name:"matrix",defaultWidgetOptions:$t},Ht={correctOptions:[{content:"$x$"}],otherOptions:[{content:"$y$"}],height:"normal",layout:"horizontal"},Bt={name:"orderer",defaultWidgetOptions:Ht},Kt={passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0},Gt={name:"passage",defaultWidgetOptions:Kt},Yt={content:""},Jt={name:"passageRefTarget",defaultWidgetOptions:Yt},Xt={location:""},Zt={name:"video",defaultWidgetOptions:Xt},Qt={DEFAULT_GRAPHER_PROPS:_e,chooseType:Me,defaultPlotProps:$e,getEquationString:Fe,typeToButton:He},be=class be extends o.Component{constructor(e){super(e),this.state=this.getInitialState(),this.handleBlur=this.handleBlur.bind(this),this.handleChange=this.handleChange.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this)}getInitialState(){return{currentValue:JSON.stringify(this.props.value,null,4),valid:!0}}UNSAFE_componentWillReceiveProps(e){(!this.state.valid||!i.isEqual(e.value,JSON.parse(this.state.currentValue?this.state.currentValue:"")))&&this.setState(this.getInitialState())}handleKeyDown(e){if(e.key==="Tab"){const s=e.target.selectionStart,a=e.target.value,n=a.substring(0,s),l=a.substring(s,a.length);e.target.value=n+"    "+l,e.target.selectionStart=n.length+4,e.target.selectionEnd=n.length+4,e.preventDefault(),this.handleChange(e)}}handleChange(e){const s=e.target.value;try{let a=JSON.parse(s);i.isString(a)&&(a=JSON.parse(a)),this.setState({currentValue:s,valid:!0},function(){this.props.onChange(a)})}catch{this.setState({currentValue:s,valid:!1})}}handleBlur(e){const s=e.target.value;try{let a=JSON.parse(s);i.isString(a)&&(a=JSON.parse(a)),this.setState({currentValue:JSON.stringify(a,null,4),valid:!0},function(){this.props.onChange(a)})}catch{this.setState({currentValue:JSON.stringify(this.props.value,null,4),valid:!0})}}render(){const e="perseus-json-editor "+(this.state.valid?"valid":"invalid");return t.jsx("textarea",{className:e,value:this.state.currentValue,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur})}};be.defaultProps={value:{}};let ue=be;ue.__docgenInfo={description:"",methods:[{name:"handleKeyDown",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"handleChange",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"handleBlur",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null}],props:{multiLine:{required:!0,tsType:{name:"boolean"},description:""},value:{required:!1,tsType:{name:"any"},description:"",defaultValue:{value:"{}",computed:!1}},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(newJson: any) => void",signature:{arguments:[{type:{name:"any"},name:"newJson"}],return:{name:"void"}}},description:""}}};let Ce=0;const de={},ce={};window.iframeDataStore={};window.addEventListener("message",p=>{if(typeof p.data=="string"){const e=de[p.data];e&&e()}else p.data.id&&(p.data.height!==void 0?ce[p.data.id](p.data.height):p.data.lintWarnings&&Ee.log("LINTER REPORT",{lintWarnings:JSON.stringify(p.data.lintWarnings)}))});class es extends o.Component{constructor(){super(...arguments),this.container=o.createRef()}componentDidMount(){this._isMounted=!0,this.iframeID=Ce,Ce++,this._prepareFrame(),de[this.iframeID]=()=>{this.sendNewData(this._lastData)},ce[this.iframeID]=e=>{this._lastHeight=e,this._isMounted&&this.props.seamless&&this.container.current&&(this.container.current.style.height=e+"px")}}shouldComponentUpdate(e){return e.datasetValue!==this.props.datasetValue||e.seamless!==this.props.seamless}componentDidUpdate(e){this.container.current&&(this.props.seamless?this.container.current.style.height=this._lastHeight+"px":this.container.current.style.height="100%"),e.datasetValue!==this.props.datasetValue&&this._prepareFrame()}componentWillUnmount(){de[this.iframeID]=null,ce[this.iframeID]=null,this._isMounted=!1}_prepareFrame(){var s,a;this._frame&&((s=this.container.current)==null||s.removeChild(this._frame));const e=document.createElement("iframe");e.style.width="100%",e.style.height="100%",e.src=this.props.url,this.props.datasetKey&&(e.dataset[this.props.datasetKey]=this.props.datasetValue),e.dataset.id=String(this.iframeID),this.props.seamless&&(e.dataset.lintGutter="true"),(a=this.container.current)==null||a.appendChild(e),this._frame=e}sendNewData(e){const s=this._frame;this._isMounted&&e&&(s!=null&&s.contentWindow)&&(this._lastData=e,window.iframeDataStore[this.iframeID]=e,s.contentWindow.postMessage(this.iframeID,"*"))}render(){return t.jsx("div",{ref:this.container,style:{width:"100%",height:"100%"}})}}es.__docgenInfo={description:"",methods:[{name:"_prepareFrame",docblock:null,modifiers:[],params:[],returns:null},{name:"sendNewData",docblock:null,modifiers:[],params:[{name:"data",optional:!1,type:{name:"any"}}],returns:null}],displayName:"IframeContentRenderer",props:{url:{required:!0,tsType:{name:"string"},description:""},datasetKey:{required:!0,tsType:{name:"string"},description:""},datasetValue:{required:!0,tsType:{name:"any"},description:""},seamless:{required:!0,tsType:{name:"boolean"},description:""}}};const{InfoTip:Te}=g,ts=400,ss=400;var j;let as=(j=class extends o.Component{constructor(){super(...arguments),this.change=(...e)=>u.apply(this,e),this.serialize=()=>h.serialize.call(this)}render(){return t.jsxs("fieldset",{className:"pair-editor",children:[t.jsxs("label",{children:["Name:"," ",t.jsx(f,{value:this.props.name,onChange:this.change("name")})]}),t.jsxs("label",{children:[" ","Value:"," ",t.jsx(f,{value:this.props.value,onChange:this.change("value")})]})]})}},j.propTypes={...d,name:r.string,value:r.string},j.defaultProps={name:"",value:""},j);var W;let rs=(W=class extends o.Component{constructor(){super(...arguments),this.change=(...e)=>u.apply(this,e),this.handlePairChange=(e,s)=>{const a=this.props.pairs.slice();a[e]=s;const n=a[a.length-1];n.name&&n.value&&a.push({name:"",value:""}),this.change("pairs",a)},this.serialize=()=>h.serialize.call(this)}render(){const e=i.map(this.props.pairs,(s,a)=>t.jsx(as,{name:s.name,value:s.value,onChange:this.handlePairChange.bind(this,a)},a));return t.jsx("div",{children:e})}},W.propTypes={...d,pairs:r.arrayOf(r.shape({name:r.string,value:r.string})).isRequired},W);const ns=/khanacademy\.org\/computer-programming\/[^\/]+\/(\d+)/;function is(p){const e=ns.exec(p);return e&&(p=e[1]),p}const C=class C extends o.Component{constructor(){super(...arguments),this.change=(...e)=>u.apply(this,e),this._handleSettingsChange=e=>{this.change({settings:e.pairs})},this._handleProgramIDChange=e=>{e=is(e);const{isDevServer:s,InitialRequestUrl:a}=Ue(),l=`${s?a.origin:"https://www.khanacademy.org"}/api/internal/scratchpads/${e}`;rt.getJSON(l).done(m=>{const c=m.userAuthoredContentType;this.change({width:m.width,height:m.height,programID:e,programType:c})}).fail((m,c,b)=>{Ee.error("Error retrieving scratchpad info for program ID ",ct.TransientService,{cause:b,loggedMetadata:{textStatus:c,programID:e}}),this.change({width:ts,height:ss,programID:e,programType:null})})},this.serialize=()=>h.serialize.call(this)}render(){return t.jsxs("div",{children:[t.jsxs("label",{children:["Url or Program ID:"," ",t.jsx(f,{value:this.props.programID,onChange:this._handleProgramIDChange})]}),t.jsx("br",{}),t.jsx(x,{label:"Show Editor",checked:this.props.showEditor,onChange:e=>{this.props.onChange({showEditor:e})}}),t.jsx(Te,{children:'If you show the editor, you should use the "full-width" alignment to make room for the width of the editor.'}),t.jsx("br",{}),t.jsx(x,{label:"Show Buttons",checked:this.props.showButtons,onChange:e=>{this.props.onChange({showButtons:e})}}),t.jsx("br",{}),t.jsxs("label",{children:["Settings:",t.jsx(rs,{name:"settings",pairs:this.props.settings,onChange:this._handleSettingsChange}),t.jsxs(Te,{children:["Settings that you add here are available to the program as an object returned by ",t.jsx("code",{children:"Program.settings()"})]})]})]})}};C.propTypes={...d},C.widgetName="cs-program",C.defaultProps=Rt.defaultWidgetOptions;let M=C;M.__docgenInfo={description:"This is the main editor for this widget, to specify all the options.",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"_handleSettingsChange",docblock:null,modifiers:[],params:[{name:"settings",optional:!1,type:null}],returns:null},{name:"_handleProgramIDChange",docblock:null,modifiers:[],params:[{name:"programID",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"CSProgramEditor",props:{programID:{defaultValue:{value:'""',computed:!1},required:!1},programType:{defaultValue:{value:"null",computed:!1},required:!1},settings:{defaultValue:{value:'[{name: "", value: ""}]',computed:!1},required:!1},showEditor:{defaultValue:{value:"false",computed:!1},required:!1},showButtons:{defaultValue:{value:"false",computed:!1},required:!1},height:{defaultValue:{value:"400",computed:!1},required:!1}},composes:["@khanacademy/perseus"]};const xe=class xe extends o.Component{serialize(){return h.serialize.call(this)}render(){return t.jsxs("div",{children:[t.jsx("p",{children:"This widget has been deprecated and removed"}),t.jsx("p",{children:"Learners will see a message and they will not be graded on this part. Please replace this widget with a supported one."})]})}};xe.widgetName="deprecated-standin";let $=xe;$.__docgenInfo={description:"",methods:[{name:"serialize",docblock:null,modifiers:[],params:[],returns:{type:{name:"any"}}}],displayName:"DeprecatedStandinEditor",props:{onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(options: any) => void",signature:{arguments:[{type:{name:"any"},name:"options"}],return:{name:"void"}}},description:""}}};const{InlineIcon:qe,TextInput:ls}=g,T=class T extends o.Component{constructor(){super(...arguments),this.editor=o.createRef(),this.hintEditor=o.createRef(),this.change=(...e)=>u.apply(this,e),this.handleAddHint=()=>{const e={content:""};this.props.onChange({hint:e},()=>{var s;(s=this.hintEditor.current)==null||s.focus()})},this.handleRemoveHint=e=>{this.props.onChange({hint:null})},this.getSaveWarnings=()=>{var e;return(e=this.editor.current)==null?void 0:e.getSaveWarnings()},this.serialize=()=>{var e,s;return{title:this.props.title,...(e=this.editor.current)==null?void 0:e.serialize(),hint:(s=this.hintEditor.current)==null?void 0:s.serialize()}}}render(){return t.jsxs("div",{className:"perseus-group-editor",children:[t.jsx("div",{className:"perseus-widget-row",children:t.jsxs("label",{className:_.css(oe.title),children:["Title:"," ",t.jsx(ls,{value:this.props.title,className:_.css(oe.input),onChange:this.change("title")})]})}),t.jsx(y,{ref:this.editor,content:this.props.content,widgets:this.props.widgets,apiOptions:this.props.apiOptions,images:this.props.images,widgetEnabled:!0,immutableWidgets:!1,onChange:this.props.onChange,warnNoPrompt:!0,warnNoWidgets:!0}),!this.props.hint&&t.jsxs("button",{type:"button",style:{marginTop:10},className:"add-hint simple-button orange",onClick:this.handleAddHint,children:[t.jsx(qe,{...bt})," Add a hint"]}),this.props.hint&&t.jsxs("div",{className:"perseus-hint-editor",children:[t.jsx("div",{className:_.css(oe.hintsTitle),children:"Hint"}),t.jsx(y,{ref:this.hintEditor,content:this.props.hint?this.props.hint.content:"",widgets:this.props.hint?this.props.hint.widgets:{},apiOptions:this.props.apiOptions,images:this.props.hint&&this.props.hint.images,widgetEnabled:!0,immutableWidgets:!1,onChange:e=>{this.change("hint",Object.assign({},this.props.hint,e))}}),t.jsxs("button",{type:"button",className:"remove-hint simple-button orange",onClick:this.handleRemoveHint,children:[t.jsx(qe,{...yt})," Remove this hint"]})]})]})}};T.propTypes={...d,title:r.string,content:r.string,widgets:r.object,images:r.object,apiOptions:ye.propTypes},T.widgetName="graded-group",T.defaultProps=Lt.defaultWidgetOptions;let v=T;const oe=_.StyleSheet.create({title:{fontSize:18,fontWeight:"bold"},input:{fontSize:18},hintsTitle:{marginTop:10,fontSize:"110%",fontWeight:"bold"}});v.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"handleAddHint",docblock:null,modifiers:[],params:[],returns:null},{name:"handleRemoveHint",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GradedGroupEditor",props:{title:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},content:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},widgets:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},images:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},hint:{defaultValue:{value:"null",computed:!1},required:!1},apiOptions:{description:"",type:{name:"shape",value:{isArticle:{name:"bool",required:!0},onFocusChange:{name:"func",required:!0},GroupMetadataEditor:{name:"func",required:!0},showAlignmentOptions:{name:"bool",required:!0},readOnly:{name:"bool",required:!0},answerableCallback:{name:"func",required:!1},getAnotherHint:{name:"func",required:!1},interactionCallback:{name:"func",required:!1},groupAnnotator:{name:"func",required:!0},imagePlaceholder:{name:"node",required:!1},widgetPlaceholder:{name:"node",required:!1},baseElements:{name:"shape",value:{Link:{name:"func",required:!1}},required:!1},imagePreloader:{name:"func",required:!1},trackInteraction:{name:"func",required:!1},customKeypad:{name:"bool",required:!1},nativeKeypadProxy:{name:"func",required:!1},isMobile:{name:"bool",required:!1},setDrawingAreaAvailable:{name:"func",required:!1},hintProgressColor:{name:"string",required:!1},canScrollPage:{name:"bool",required:!1},crossOutEnabled:{name:"bool",required:!1},editorChangeDelay:{name:"number",required:!1}}},required:!0}},composes:["@khanacademy/perseus"]};const q=class q extends o.Component{constructor(){super(...arguments),this.change=(...e)=>u.apply(this,e),this.getSaveWarnings=()=>[].concat(...this._editors.map(e=>e?e.getSaveWarnings():[])),this.serialize=()=>({gradedGroups:this.props.gradedGroups}),this.renderGroups=()=>this.props.gradedGroups?this.props.gradedGroups.map((e,s)=>t.jsx(v,{ref:a=>this._editors[s]=a,...e,apiOptions:this.props.apiOptions,widgetEnabled:!0,immutableWidgets:!1,onChange:a=>this.change("gradedGroups",os(this.props.gradedGroups,s,{...this.props.gradedGroups[s],...a}))},s)):null,this.addGroup=()=>{const e=this.props.gradedGroups||[];this.change("gradedGroups",e.concat([v.defaultProps]))}}UNSAFE_componentWillMount(){this._editors=[]}render(){return t.jsxs("div",{className:"perseus-group-editor",children:[this.renderGroups(),t.jsx("button",{onClick:this.addGroup,children:"Add group"})]})}};q.propTypes={...d,apiOptions:ye.propTypes,gradedGroups:r.array,onChange:r.func.isRequired},q.widgetName="graded-group-set",q.defaultProps=Dt.defaultWidgetOptions;let F=q;const os=(p,e,s)=>[...p.slice(0,e),s,...p.slice(e+1)];F.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null},{name:"renderGroups",docblock:null,modifiers:[],params:[],returns:null},{name:"addGroup",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GradedGroupSetEditor",props:{gradedGroups:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"array"},required:!1},apiOptions:{description:"",type:{name:"shape",value:{isArticle:{name:"bool",required:!0},onFocusChange:{name:"func",required:!0},GroupMetadataEditor:{name:"func",required:!0},showAlignmentOptions:{name:"bool",required:!0},readOnly:{name:"bool",required:!0},answerableCallback:{name:"func",required:!1},getAnotherHint:{name:"func",required:!1},interactionCallback:{name:"func",required:!1},groupAnnotator:{name:"func",required:!0},imagePlaceholder:{name:"node",required:!1},widgetPlaceholder:{name:"node",required:!1},baseElements:{name:"shape",value:{Link:{name:"func",required:!1}},required:!1},imagePreloader:{name:"func",required:!1},trackInteraction:{name:"func",required:!1},customKeypad:{name:"bool",required:!1},nativeKeypadProxy:{name:"func",required:!1},isMobile:{name:"bool",required:!1},setDrawingAreaAvailable:{name:"func",required:!1},hintProgressColor:{name:"string",required:!1},canScrollPage:{name:"bool",required:!1},crossOutEnabled:{name:"bool",required:!1},editorChangeDelay:{name:"number",required:!1}}},required:!0},onChange:{description:"",type:{name:"func"},required:!0}},composes:["@khanacademy/perseus"]};const{InfoTip:ps,MultiButtonGroup:us}=g,ds=Be.widget,{DEFAULT_GRAPHER_PROPS:pe,chooseType:cs,defaultPlotProps:hs,getEquationString:ms,typeToButton:gs}=Qt,k=class k extends o.Component{constructor(){super(...arguments),this.change=(...e)=>u.apply(this,e),this.handleAvailableTypesChange=e=>{let s=this.props.correct;if(!i.contains(e,this.props.correct.type)){const a=this.props.graph,n=cs(e);s=hs(n,a)}this.props.onChange({availableTypes:e,correct:s})},this.serialize=()=>i.chain(this.props).pick("correct","availableTypes").extend({graph:i.omit(this.props.graph,"box")}).value()}render(){const e=it.SMALL;let s,a;if(this.props.graph.valid===!0){const n={graph:this.props.graph,plot:this.props.correct,availableTypes:this.props.availableTypes,onChange:(l,m)=>{var b;let c=this.props.correct;c.type===((b=l.plot)==null?void 0:b.type)?c=i.extend({},c,l.plot):c=l.plot,this.props.onChange({correct:c},m)},trackInteraction:function(){}};a=t.jsx(ds,{...n,apiOptions:this.props.apiOptions,containerSizeClass:e}),s=ms(n)}else a=t.jsx("div",{className:"perseus-error",children:this.props.graph.valid});return t.jsxs("div",{children:[t.jsxs("div",{children:["Correct answer"," ",t.jsx(ps,{children:t.jsx("p",{children:"Graph the correct answer in the graph below and ensure the equation or point coordinates displayed represent the correct answer."})})," ",": ",s]}),t.jsx(xt,{editableSettings:["graph","snap","image"],box:nt(e),range:this.props.graph.range,labels:this.props.graph.labels,step:this.props.graph.step,gridStep:this.props.graph.gridStep,snapStep:this.props.graph.snapStep,valid:this.props.graph.valid,backgroundImage:this.props.graph.backgroundImage,markings:this.props.graph.markings,rulerLabel:this.props.graph.rulerLabel,rulerTicks:this.props.graph.rulerTicks,showTooltips:this.props.graph.showTooltips,onChange:this.change("graph")}),t.jsxs("div",{className:"perseus-widget-row",children:[t.jsx("label",{children:"Available functions: "}),t.jsx(us,{allowEmpty:!1,values:this.props.availableTypes,buttons:i.map(tt,gs),onChange:this.handleAvailableTypesChange})]}),a]})}};k.propTypes={...d},k.widgetName="grapher",k.defaultProps={correct:pe.plot,graph:pe.graph,availableTypes:pe.availableTypes};let H=k;H.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"handleAvailableTypesChange",docblock:null,modifiers:[],params:[{name:"newAvailableTypes",optional:!1,type:{name:"Array",elements:[{name:"any"}],raw:"Array<any>",alias:"Array"}}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GrapherEditor",props:{correct:{defaultValue:{value:"DEFAULT_GRAPHER_PROPS.plot",computed:!0},required:!1},graph:{defaultValue:{value:"DEFAULT_GRAPHER_PROPS.graph",computed:!0},required:!1},availableTypes:{defaultValue:{value:"DEFAULT_GRAPHER_PROPS.availableTypes",computed:!0},required:!1}},composes:["@khanacademy/perseus"]};const S=class S extends o.Component{constructor(){super(...arguments),this.editor=o.createRef(),this._renderMetadataEditor=()=>{const e=this.props.apiOptions.GroupMetadataEditor;return t.jsx(e,{value:this.props.metadata,onChange:this.change("metadata")})},this.change=(...e)=>u.apply(this,e),this.getSaveWarnings=()=>{var e;return(e=this.editor.current)==null?void 0:e.getSaveWarnings()},this.serialize=()=>{var e;return i.extend({},(e=this.editor.current)==null?void 0:e.serialize(),{metadata:this.props.metadata})}}render(){return t.jsxs("div",{className:"perseus-group-editor",children:[t.jsx("div",{children:this._renderMetadataEditor()}),t.jsx(y,{ref:this.editor,content:this.props.content,widgets:this.props.widgets,apiOptions:this.props.apiOptions,images:this.props.images,widgetEnabled:!0,immutableWidgets:!1,onChange:this.props.onChange})]})}};S.propTypes={...d,content:r.string,widgets:r.object,images:r.object,metadata:r.any,apiOptions:ye.propTypes},S.widgetName="group",S.defaultProps=Ut.defaultWidgetOptions;let B=S;B.__docgenInfo={description:"",methods:[{name:"_renderMetadataEditor",docblock:null,modifiers:[],params:[],returns:null},{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GroupEditor",props:{content:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},widgets:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},images:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},metadata:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"any"},required:!1},apiOptions:{description:"",type:{name:"shape",value:{isArticle:{name:"bool",required:!0},onFocusChange:{name:"func",required:!0},GroupMetadataEditor:{name:"func",required:!0},showAlignmentOptions:{name:"bool",required:!0},readOnly:{name:"bool",required:!0},answerableCallback:{name:"func",required:!1},getAnotherHint:{name:"func",required:!1},interactionCallback:{name:"func",required:!1},groupAnnotator:{name:"func",required:!0},imagePlaceholder:{name:"node",required:!1},widgetPlaceholder:{name:"node",required:!1},baseElements:{name:"shape",value:{Link:{name:"func",required:!1}},required:!1},imagePreloader:{name:"func",required:!1},trackInteraction:{name:"func",required:!1},customKeypad:{name:"bool",required:!1},nativeKeypadProxy:{name:"func",required:!1},isMobile:{name:"bool",required:!1},setDrawingAreaAvailable:{name:"func",required:!1},hintProgressColor:{name:"string",required:!1},canScrollPage:{name:"bool",required:!1},crossOutEnabled:{name:"bool",required:!1},editorChangeDelay:{name:"number",required:!1}}},required:!0}},composes:["@khanacademy/perseus"]};const re=class re extends o.Component{constructor(){super(...arguments),this.change=(...e)=>u.apply(this,e),this.serialize=()=>h.serialize.call(this)}render(){return t.jsxs("fieldset",{children:[t.jsxs("label",{children:["Name:",t.jsx(f,{value:this.props.name,onChange:this.change("name")})]}),t.jsxs("label",{children:["Value:",t.jsx(f,{value:this.props.value,onChange:this.change("value")})]})]})}};re.propTypes={...d,name:r.string,value:r.string},re.defaultProps={name:"",value:""};let he=re;const ve=class ve extends o.Component{constructor(){super(...arguments),this.change=(...e)=>u.apply(this,e),this.handlePairChange=(e,s)=>{const a=this.props.pairs.slice();a[e]=s;const n=a[a.length-1];n.name&&n.value&&a.push({name:"",value:""}),this.change("pairs",a)},this.serialize=()=>h.serialize.call(this)}render(){const e=i.map(this.props.pairs,(s,a)=>t.jsx(he,{name:s.name,value:s.value,onChange:this.handlePairChange.bind(this,a)},a));return t.jsx("div",{children:e})}};ve.propTypes={...d,pairs:r.arrayOf(r.shape({name:r.string,value:r.string})).isRequired};let me=ve;const O=class O extends o.Component{constructor(){super(...arguments),this.change=(...e)=>u.apply(this,e),this.handleSettingsChange=e=>{this.change({settings:e.pairs})},this.serialize=()=>h.serialize.call(this)}render(){return t.jsxs("div",{children:[t.jsxs("div",{style:{fontWeight:"bold",textAlign:"center"},children:["This widget is deprecated! ",t.jsx("br",{}),"Try using the Video or CS Program widgets instead."]}),t.jsxs("label",{children:["Url or Program ID:",t.jsx(f,{value:this.props.url,onChange:this.change("url")})]}),t.jsx("br",{}),t.jsxs("label",{children:["Settings:",t.jsx(me,{name:"settings",pairs:this.props.settings,onChange:this.handleSettingsChange})]}),t.jsx("br",{}),t.jsxs("label",{children:["Width:",t.jsx(f,{value:this.props.width,onChange:this.change("width")})]}),t.jsxs("label",{children:["Height:",t.jsx(f,{value:this.props.height,onChange:this.change("height")})]}),t.jsx(x,{label:"Allow full screen",checked:this.props.allowFullScreen,onChange:e=>{this.props.onChange({allowFullScreen:e})}}),t.jsx("br",{}),t.jsx(x,{label:"Allow iframe content to redirect the page",checked:this.props.allowTopNavigation,onChange:e=>{this.props.onChange({allowTopNavigation:e})}})]})}};O.propTypes={...d},O.widgetName="iframe",O.defaultProps=Mt.defaultWidgetOptions;let K=O;K.__docgenInfo={description:"This is the main editor for this widget, to specify all the options.",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"handleSettingsChange",docblock:null,modifiers:[],params:[{name:"settings",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"IframeEditor",props:{url:{defaultValue:{value:'""',computed:!1},required:!1},settings:{defaultValue:{value:'[{name: "", value: ""}]',computed:!1},required:!1},width:{defaultValue:{value:'"400"',computed:!1},required:!1},height:{defaultValue:{value:'"400"',computed:!1},required:!1},allowFullScreen:{defaultValue:{value:"false",computed:!1},required:!1},allowTopNavigation:{defaultValue:{value:"false",computed:!1},required:!1}},composes:["@khanacademy/perseus"]};const{RangeInput:fs}=g,ys=Ke.widget,ke=6,N=class N extends o.Component{constructor(){super(...arguments),this.change=(...e)=>u.apply(this,e),this.onMatrixBoardSizeChange=e=>{const s=Ge(this.props.answers);if(e[0]!==null&&e[1]!==null){e=[Math.round(Math.min(Math.max(e[0],1),ke)),Math.round(Math.min(Math.max(e[1],1),ke))];const a=i(Math.min(e[0],s[0])).times(n=>i(Math.min(e[1],s[1])).times(l=>this.props.answers[n][l]));this.props.onChange({matrixBoardSize:e,answers:a})}},this.serialize=()=>h.serialize.call(this)}render(){const e=i.extend({numericInput:!0,onBlur:()=>{},onFocus:()=>{},trackInteraction:()=>{}},this.props);return t.jsxs("div",{className:"perseus-matrix-editor",children:[t.jsxs("div",{className:"perseus-widget-row",children:[" ","Max matrix size:"," ",t.jsx(fs,{value:this.props.matrixBoardSize,onChange:this.onMatrixBoardSizeChange,format:this.props.labelStyle,useArrowKeys:!0})]}),t.jsx("div",{className:"perseus-widget-row",children:t.jsx(ys,{...e})}),t.jsxs("div",{className:"perseus-widget-row",children:[" ","Matrix prefix:"," ",t.jsx(y,{ref:"prefix",apiOptions:this.props.apiOptions,content:this.props.prefix,widgetEnabled:!1,onChange:s=>{this.change({prefix:s.content})}})]}),t.jsxs("div",{className:"perseus-widget-row",children:[" ","Matrix suffix:"," ",t.jsx(y,{ref:"suffix",apiOptions:this.props.apiOptions,content:this.props.suffix,widgetEnabled:!1,onChange:s=>{this.change({suffix:s.content})}})]})]})}};N.propTypes={...d,matrixBoardSize:r.arrayOf(r.number).isRequired,answers:r.arrayOf(r.arrayOf(r.number)),prefix:r.string,suffix:r.string,cursorPosition:r.arrayOf(r.number)},N.widgetName="matrix",N.defaultProps=Ft.defaultWidgetOptions;let G=N;G.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"onMatrixBoardSizeChange",docblock:null,modifiers:[],params:[{name:"range",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MatrixEditor",props:{matrixBoardSize:{defaultValue:{value:"[3, 3]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"number"}},required:!1},answers:{defaultValue:{value:"[[]]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"arrayOf",value:{name:"number"}}},required:!1},prefix:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},suffix:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},cursorPosition:{defaultValue:{value:"[0, 0]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"number"}},required:!1}},composes:["@khanacademy/perseus"]};const{InfoTip:bs,NumberInput:D,RangeInput:xs}=g,vs={url:null,top:0,left:0},I=class I extends o.Component{constructor(){super(...arguments),this.className="perseus-widget-measurer",this.change=(...e)=>u.apply(this,e),this._changeUrl=e=>{this._changeImage("url",e.target.value)},this._changeTop=e=>{this._changeImage("top",e)},this._changeLeft=e=>{this._changeImage("left",e)},this._changeImage=(e,s)=>{const a=i.clone(this.props.image);a[e]=s,this.change("image",a)},this.renderLabelChoices=e=>i.map(e,function(s){const[a,n]=s;return t.jsx("option",{value:n,children:a},n)}),this.serialize=()=>h.serialize.call(this)}render(){const e=i.extend({},vs,this.props.image);return t.jsxs("div",{className:"perseus-widget-measurer",children:[t.jsx("div",{children:"Image displayed under protractor and/or ruler:"}),t.jsxs("div",{children:["URL:"," ",t.jsx("input",{type:"text",className:"perseus-widget-measurer-url",ref:"image-url",defaultValue:e.url,onChange:this._changeUrl}),t.jsx(bs,{children:t.jsx("p",{children:'Create an image in graphie, or use the "Add image" function to create a background.'})})]}),e.url&&t.jsxs("div",{className:"perseus-widget-row",children:[t.jsxs("label",{className:"perseus-widget-left-col",children:["Pixels from top:"," ",t.jsx(D,{placeholder:0,onChange:this._changeTop,value:e.top,useArrowKeys:!0})]}),t.jsxs("label",{className:"perseus-widget-right-col",children:["Pixels from left:"," ",t.jsx(D,{placeholder:0,onChange:this._changeLeft,value:e.left,useArrowKeys:!0})]})]}),t.jsxs("div",{children:["Containing area [width, height]:"," ",t.jsx(xs,{onChange:this.change("box"),value:this.props.box,useArrowKeys:!0})]}),t.jsxs("div",{className:"perseus-widget-row",children:[t.jsx("div",{className:"perseus-widget-left-col",children:t.jsx(x,{label:"Show ruler",checked:this.props.showRuler,onChange:s=>{this.props.onChange({showRuler:s})}})}),t.jsx("div",{className:"perseus-widget-right-col",children:t.jsx(x,{label:"Show protractor",checked:this.props.showProtractor,onChange:s=>{this.props.onChange({showProtractor:s})}})})]}),this.props.showRuler&&t.jsxs("div",{children:[t.jsx("div",{children:t.jsxs("label",{children:[" ","Ruler label:"," ",t.jsxs("select",{onChange:s=>this.change("rulerLabel",s.target.value),value:this.props.rulerLabel,children:[t.jsx("option",{value:"",children:"None"}),t.jsx("optgroup",{label:"Metric",children:this.renderLabelChoices([["milimeters","mm"],["centimeters","cm"],["meters","m"],["kilometers","km"]])}),t.jsx("optgroup",{label:"Imperial",children:this.renderLabelChoices([["inches","in"],["feet","ft"],["yards","yd"],["miles","mi"]])})]})]})}),t.jsx("div",{children:t.jsxs("label",{children:[" ","Ruler ticks:"," ",t.jsx("select",{onChange:s=>this.change("rulerTicks",+s.target.value),value:this.props.rulerTicks,children:i.map([1,2,4,8,10,16],function(s){return t.jsx("option",{value:s,children:s},s)})})]})}),t.jsx("div",{children:t.jsxs("label",{children:["Ruler pixels per unit:"," ",t.jsx(D,{placeholder:40,onChange:this.change("rulerPixels"),value:this.props.rulerPixels,useArrowKeys:!0})]})}),t.jsx("div",{children:t.jsxs("label",{children:["Ruler length in units:"," ",t.jsx(D,{placeholder:10,onChange:this.change("rulerLength"),value:this.props.rulerLength,useArrowKeys:!0})]})})]})]})}};I.widgetName="measurer",I.propTypes={...d,box:r.arrayOf(r.number),image:r.shape({url:r.string,top:r.number,left:r.number}),showProtractor:r.bool,showRuler:r.bool,rulerLabel:r.string,rulerTicks:r.number,rulerPixels:r.number,rulerLength:r.number},I.defaultProps=Ye.defaultWidgetOptions;let Y=I;Y.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"_changeUrl",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"_changeTop",docblock:null,modifiers:[],params:[{name:"newTop",optional:!1,type:null}],returns:null},{name:"_changeLeft",docblock:null,modifiers:[],params:[{name:"newLeft",optional:!1,type:null}],returns:null},{name:"_changeImage",docblock:null,modifiers:[],params:[{name:"subProp",optional:!1,type:null},{name:"newValue",optional:!1,type:null}],returns:null},{name:"renderLabelChoices",docblock:null,modifiers:[],params:[{name:"choices",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MeasurerEditor",props:{box:{defaultValue:{value:"[480, 480]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"number"}},required:!1},image:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"shape",value:{url:{name:"string",required:!1},top:{name:"number",required:!1},left:{name:"number",required:!1}}},required:!1},showProtractor:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},showRuler:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},rulerLabel:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},rulerTicks:{defaultValue:{value:"10",computed:!1},description:"",type:{name:"number"},required:!1},rulerPixels:{defaultValue:{value:"40",computed:!1},description:"",type:{name:"number"},required:!1},rulerLength:{defaultValue:{value:"10",computed:!1},description:"",type:{name:"number"},required:!1}},composes:["@khanacademy/perseus"]};const{NumberInput:js,TextInput:ws}=g,ne=class ne extends o.Component{constructor(){super(...arguments),this.change=(...e)=>u.apply(this,e),this.updateMolecule=e=>{this.change({smiles:e})},this.updateRotation=e=>{this.change({rotationAngle:e})},this.serialize=()=>h.serialize.call(this)}render(){return t.jsxs("div",{children:[t.jsx("div",{children:t.jsxs("label",{children:["SMILES: ",t.jsx(ws,{onChange:this.updateMolecule,value:this.props.smiles})]})}),t.jsx("div",{children:t.jsxs("label",{children:["Rotation (deg): ",t.jsx(js,{onChange:this.updateRotation,value:this.props.rotationAngle})]})})]})}};ne.propTypes={...d,rotationAngle:r.number,smiles:r.string},ne.widgetName="molecule-renderer";let J=ne;J.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"updateMolecule",docblock:null,modifiers:[],params:[{name:"newValue",optional:!1,type:null}],returns:null},{name:"updateRotation",docblock:null,modifiers:[],params:[{name:"newValue",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MoleculeWidgetEditor",props:{rotationAngle:{description:"",type:{name:"number"},required:!1},smiles:{description:"",type:{name:"string"},required:!1}},composes:["@khanacademy/perseus"]};const{InfoTip:E,TextListEditor:Se}=g,Oe="normal",Ne="auto",Ie="horizontal",Pe="vertical",P=class P extends o.Component{constructor(){super(...arguments),this.onOptionsChange=(e,s,a)=>{const n={};n[e]=i.map(s,function(l){return{content:l}}),this.props.onChange(n,a)},this.onLayoutChange=e=>{this.props.onChange({layout:e.target.value})},this.onHeightChange=e=>{this.props.onChange({height:e.target.value})},this.serialize=()=>({options:i.chain(i.pluck(this.props.correctOptions,"content")).union(i.pluck(this.props.otherOptions,"content")).uniq().reject(function(s){return s===""}).sort().sortBy(function(s){return/\d/.test(s)?0:/^\$?[a-zA-Z]+\$?$/.test(s)?2:1}).map(function(s){return{content:s}}).value(),correctOptions:this.props.correctOptions,otherOptions:this.props.otherOptions,height:this.props.height,layout:this.props.layout})}render(){return t.jsxs("div",{className:"perseus-widget-orderer",children:[t.jsxs("div",{children:[" ","Correct answer:"," ",t.jsx(E,{children:t.jsx("p",{children:"Place the cards in the correct order. The same card can be used more than once in the answer but will only be displayed once at the top of a stack of identical cards."})})]}),t.jsx(Se,{options:i.pluck(this.props.correctOptions,"content"),onChange:this.onOptionsChange.bind(this,"correctOptions"),layout:this.props.layout}),t.jsxs("div",{children:[" ","Other cards:"," ",t.jsx(E,{children:t.jsx("p",{children:"Create cards that are not part of the answer."})})]}),t.jsx(Se,{options:i.pluck(this.props.otherOptions,"content"),onChange:this.onOptionsChange.bind(this,"otherOptions"),layout:this.props.layout}),t.jsxs("div",{children:[t.jsxs("label",{children:[" ","Layout:"," ",t.jsxs("select",{value:this.props.layout,onChange:this.onLayoutChange,children:[t.jsx("option",{value:Ie,children:"Horizontal"}),t.jsx("option",{value:Pe,children:"Vertical"})]})]}),t.jsx(E,{children:t.jsx("p",{children:"Use the horizontal layout for short text and small images. The vertical layout is best for longer text (e.g. proofs)."})})]}),t.jsxs("div",{children:[t.jsxs("label",{children:[" ","Height:"," ",t.jsxs("select",{value:this.props.height,onChange:this.onHeightChange,children:[t.jsx("option",{value:Oe,children:"Normal"}),t.jsx("option",{value:Ne,children:"Automatic"})]})]}),t.jsx(E,{children:t.jsx("p",{children:'Use "Normal" for text, "Automatic" for images.'})})]})]})}};P.propTypes={correctOptions:r.array,otherOptions:r.array,height:r.oneOf([Oe,Ne]),layout:r.oneOf([Ie,Pe]),onChange:r.func.isRequired},P.widgetName="orderer",P.defaultProps=Bt.defaultWidgetOptions;let X=P;X.__docgenInfo={description:"",methods:[{name:"onOptionsChange",docblock:null,modifiers:[],params:[{name:"whichOptions",optional:!1,type:null},{name:"options",optional:!1,type:null},{name:"cb",optional:!1,type:null}],returns:null},{name:"onLayoutChange",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"onHeightChange",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"OrdererEditor",props:{correctOptions:{defaultValue:{value:'[{content: "$x$"}]',computed:!1},description:"",type:{name:"array"},required:!1},otherOptions:{defaultValue:{value:'[{content: "$y$"}]',computed:!1},description:"",type:{name:"array"},required:!1},height:{defaultValue:{value:'"normal"',computed:!1},description:"",type:{name:"enum",value:[{value:'"normal"',computed:!1},{value:'"auto"',computed:!1}]},required:!1},layout:{defaultValue:{value:'"horizontal"',computed:!1},description:"",type:{name:"enum",value:[{value:'"horizontal"',computed:!1},{value:'"vertical"',computed:!1}]},required:!1},onChange:{description:"",type:{name:"func"},required:!0}}};const{InfoTip:Ae}=g,A=class A extends o.Component{constructor(){super(...arguments),this.change=(...e)=>u.apply(this,e),this.serialize=()=>h.serialize.call(this)}render(){const e=t.jsx(y,{ref:"passage-editor",apiOptions:this.props.apiOptions,content:this.props.passageText,widgetEnabled:!1,placeholder:"Type passage here...",onChange:a=>{this.change({passageText:a.content})},showWordCount:!0}),s=t.jsx(y,{ref:"passage-footnotes-editor",apiOptions:this.props.apiOptions,content:this.props.footnotes,widgetEnabled:!1,placeholder:"Type footnotes here...",onChange:a=>{this.change({footnotes:a.content})}});return t.jsxs("div",{className:"perseus-widget-passage-editor",children:[t.jsx("div",{className:"perseus-widget-row",children:t.jsx(x,{label:"Show line numbers",checked:this.props.showLineNumbers,onChange:a=>{this.props.onChange({showLineNumbers:a})}})}),t.jsxs("div",{children:["Passage title:",t.jsx(Ae,{children:t.jsx("p",{children:"An optional title that will appear directly above the passage in the same font style. (E.g. Passage 1)"})}),t.jsx("div",{children:t.jsx("input",{type:"text",defaultValue:this.props.passageTitle,onChange:a=>{this.change({passageTitle:a.target.value})}})})]}),t.jsxs("div",{children:["Passage Text:",e]}),t.jsxs("div",{children:["Footnotes:",t.jsx(Ae,{children:t.jsx("p",{children:"To add footnotes, add ^ characters where they belong in the passage. Then, add ^ in the footnotes area to reference the footnotes in the passage."})}),s]})]})}};A.propTypes={...d,passageTitle:r.string,passageText:r.string,footnotes:r.string,showLineNumbers:r.bool},A.widgetName="passage",A.defaultProps=Gt.defaultWidgetOptions;let Z=A;Z.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PassageEditor",props:{passageTitle:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},passageText:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},footnotes:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},showLineNumbers:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1}},composes:["@khanacademy/perseus"]};const{InfoTip:Cs,NumberInput:Ve,TextInput:Ts}=g,V=class V extends o.Component{constructor(){super(...arguments),this.change=(...e)=>u.apply(this,e),this.serialize=()=>h.serialize.call(this)}render(){return t.jsxs("div",{children:[t.jsx("div",{children:t.jsxs("label",{children:["Passage Number: ",t.jsx(Ve,{value:this.props.passageNumber,onChange:this.change("passageNumber")})]})}),t.jsx("div",{children:t.jsxs("label",{children:["Reference Number: ",t.jsx(Ve,{value:this.props.referenceNumber,onChange:this.change("referenceNumber")})]})}),t.jsx("div",{children:t.jsxs("label",{children:["Summary Text: ",t.jsx(Ts,{value:this.props.summaryText,onChange:this.change("summaryText")}),t.jsxs(Cs,{children:[t.jsx("p",{children:"Short summary of the referenced section. This will be included in parentheses and quotes automatically."}),t.jsx("p",{children:"Ex: The start ... the end"})]})]})})]})}};V.propTypes={...d,passageNumber:r.number,referenceNumber:r.number,summaryText:r.string},V.widgetName="passage-ref",V.defaultProps=Je.defaultWidgetOptions;let Q=V;Q.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PassageRefEditor",props:{passageNumber:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"number"},required:!1},referenceNumber:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"number"},required:!1},summaryText:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1}},composes:["@khanacademy/perseus"]};const R=class R extends o.Component{constructor(){super(...arguments),this.change=(...e)=>u.apply(this,e),this.handleContentChange=e=>{this.change({content:e.target.value})},this.serialize=()=>h.serialize.call(this)}render(){return t.jsxs("div",{children:["Content:",t.jsx("input",{type:"text",value:this.props.content,onChange:this.handleContentChange})]})}};R.propTypes={...d,content:r.string},R.widgetName="passage-ref-target",R.defaultProps=Jt.defaultWidgetOptions;let ee=R;ee.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"handleContentChange",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PassageRefTargetEditor",props:{content:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1}},composes:["@khanacademy/perseus"]};const{InfoTip:w,NumberInput:Re,RangeInput:qs,TextListEditor:ks}=g,Ss=Xe.widget,ge="starting",fe="correct",Os=[ge,fe];function ze(p,e,s){const a=i.clone(p);a.length=e;for(let n=p.length;n<e;n++)a[n]=s;return a}const U={scaleY:1,maxY:10,snapsPerLine:2},Le=p=>"$"+at(p,2)+"$",ie=class ie extends o.Component{constructor(){super(...arguments),this.state={editing:this.props.static?ge:fe,pic:null,loadedUrl:null,minX:null,maxX:null,tickStep:null},this.fetchPic=e=>{if(this.state.loadedUrl!==e){const s=new Image;s.src=e,s.onload=()=>{this.setState({pic:s,loadedUrl:e})}}},this.handleChangeTickStep=e=>{this.setState({tickStep:e})},this.handleChangeRange=e=>{this.setState({minX:e[0],maxX:e[1]})},this.changeLabelInterval=e=>{this.props.onChange({labelInterval:e})},this.handlePlotterChange=e=>{const s={};s[this.state.editing]=e.values,this.props.onChange(s)},this.changeType=e=>{let s;if(e==="histogram"?(s=[Le(0)].concat(this.props.categories),this.props.onChange({type:e,categories:s})):this.props.type==="histogram"?(s=this.props.categories.slice(1),this.props.onChange({type:e,categories:s})):this.props.onChange({type:e}),s){const a=le.findDOMNode(this.refs.categories);a.value=s.join(", ")}},this.changeLabel=(e,s)=>{const a=i.clone(this.props.labels);a[e]=s.target.value,this.props.onChange({labels:a})},this.changePicUrl=e=>{const s=De.getRealImageUrl(e);this.props.onChange({picUrl:s})},this.changeCategories=e=>{let s=e.length;this.props.type==="histogram"&&s--;const a=this.props.scaleY;this.props.onChange({categories:e,correct:ze(this.props.correct,s,a),starting:ze(this.props.starting,s,a)})},this.changeScale=e=>{const s=this.props.scaleY,a=+e.target.value||U.scaleY,n=function(m){return m*a/s},l=n(this.props.maxY);this.props.onChange({scaleY:a,maxY:l,correct:i.map(this.props.correct,n),starting:i.map(this.props.starting,n)}),le.findDOMNode(this.refs.maxY).value=l},this.changeMax=e=>{this.props.onChange({maxY:+e.target.value||U.maxY})},this.changeSnaps=e=>{this.props.onChange({snapsPerLine:+e.target.value||U.snapsPerLine})},this.changeEditing=e=>{this.setState({editing:e})},this.setCategoriesFromScale=()=>{const e=this.state.tickStep||1,s=this.state.minX||0,a=this.state.maxX||0,n=Math.floor((a-s)/e)*e;let l;this.props.type==="histogram"||this.props.type==="dotplot"?l=i.range(0,n+e,e):l=i.range(e,n+e,e),l=i.map(l,c=>c+s),l=i.map(l,Le),this.changeCategories(l);const m=le.findDOMNode(this.refs.categories);m.value=l.join(", ")},this.serialize=()=>{const e=i.pick(this.props,"correct","starting","type","labels","categories","scaleY","maxY","snapsPerLine","labelInterval");return this.props.type==="pic"&&(e.picUrl=this.props.picUrl),e}}UNSAFE_componentWillMount(){this.fetchPic(this.props.picUrl)}UNSAFE_componentWillReceiveProps(e){this.fetchPic(e.picUrl),e.static&&this.setState({editing:"starting"})}render(){const e=i.contains(["line","histogram","dotplot"],this.props.type),s=!i.contains(["pic","dotplot"],this.props.type),a={trackInteraction:()=>{},...this.props};return t.jsxs("div",{className:"perseus-widget-plotter-editor",children:[t.jsxs("div",{children:["Chart type:"," ",Ze.map(n=>t.jsxs("label",{children:[t.jsx("input",{type:"radio",name:"chart-type",checked:this.props.type===n,onChange:i.partial(this.changeType,n)}),n]},n),this)]}),t.jsxs("div",{children:["Labels:"," ",["x","y"].map((n,l)=>t.jsxs("label",{children:[n+":",t.jsx("input",{type:"text",onChange:i.partial(this.changeLabel,l),defaultValue:this.props.labels[l]})]},n),this)]}),e&&t.jsxs("div",{className:"set-from-scale-box",children:[t.jsx("span",{className:"categories-title",children:"Set Categories From Scale"}),t.jsxs("div",{children:[t.jsxs("label",{children:["Tick Step:"," ",t.jsx(Re,{placeholder:1,useArrowKeys:!0,value:this.state.tickStep,onChange:this.handleChangeTickStep})]}),t.jsx(w,{children:t.jsx("p",{children:"The difference between adjacent ticks."})})]}),t.jsx("div",{children:t.jsxs("label",{children:["Range:"," ",t.jsx(qs,{placeholder:[0,10],useArrowKeys:!0,value:[this.state.minX,this.state.maxX],onChange:this.handleChangeRange})]})}),t.jsx("div",{children:t.jsxs("button",{onClick:this.setCategoriesFromScale,children:["Set Categories"," "]})})]}),t.jsxs("div",{children:[t.jsxs("label",{children:["Label Interval:"," ",t.jsx(Re,{useArrowKeys:!0,value:this.props.labelInterval,onChange:this.changeLabelInterval})]}),t.jsx(w,{children:t.jsx("p",{children:'Which ticks to display the labels for. For instance, setting this to "4" will only show every 4th label (plus the last one)'})})]}),this.props.type==="pic"&&t.jsxs("div",{children:[t.jsxs("label",{children:["Picture:"," ",t.jsx(f,{className:"pic-url",value:this.props.picUrl,onChange:this.changePicUrl}),t.jsx(w,{children:t.jsx("p",{children:'Use the default picture of Earth, or insert the URL for a different picture using the "Add image" function.'})})]}),this.state.pic&&this.state.pic.width!==this.state.pic.height&&t.jsxs("p",{className:"warning",children:[t.jsx("b",{children:"Warning"}),": You are using a picture which is not square. This means the image will get distorted. You should probably crop it to be square."]})]}),t.jsx("div",{children:t.jsxs("label",{children:["Categories:"," ",t.jsx(ks,{ref:"categories",layout:"horizontal",options:this.props.categories,onChange:this.changeCategories})]})}),t.jsx("div",{children:t.jsxs("label",{children:["Scale (y):"," ",t.jsx("input",{type:"text",onChange:this.changeScale,defaultValue:this.props.scaleY})]})}),t.jsx("div",{children:t.jsxs("label",{children:["Max y:"," ",t.jsx("input",{type:"text",ref:"maxY",onChange:this.changeMax,defaultValue:this.props.maxY})]})}),s&&t.jsxs("div",{children:[t.jsxs("label",{children:["Snaps per line:"," ",t.jsx("input",{type:"text",onChange:this.changeSnaps,defaultValue:this.props.snapsPerLine})]}),t.jsx(w,{children:t.jsx("p",{children:"Creates the specified number of divisions between the horizontal lines. Fewer snaps between lines makes the graph easier for the student to create correctly."})})]}),t.jsxs("div",{children:["Editing values:"," ",Os.map(n=>t.jsxs("label",{children:[t.jsx("input",{type:"radio",disabled:n===fe&&this.props.static,checked:this.props.static?n===ge:this.state.editing===n,onChange:l=>this.changeEditing(n)}),n]},n)),t.jsxs(w,{children:[t.jsx("p",{children:"Use this toggle to switch between editing the correct answer (what the student will be graded on) and the starting values (what the student will see plotted when they start the problem). Note: These cannot be the same."}),t.jsx("p",{children:"In static mode, the starting values are rendered out to the displayed widget."})]})]}),t.jsx(Ss,{...a,starting:this.props[this.state.editing],onChange:this.handlePlotterChange})]})}};ie.widgetName="plotter",ie.defaultProps={...U,correct:[1],starting:[1],type:"bar",labels:["",""],categories:[""],picSize:30,picBoxHeight:36,plotDimensions:[275,200],labelInterval:1,get picUrl(){const e=Ue().staticUrl;return e?e("/images/badges/earth-small.png"):null}};let te=ie;te.__docgenInfo={description:"",methods:[{name:"fetchPic",docblock:null,modifiers:[],params:[{name:"url",optional:!1,type:null}],returns:null},{name:"handleChangeTickStep",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null}],returns:null},{name:"handleChangeRange",docblock:null,modifiers:[],params:[{name:"newValue",optional:!1,type:null}],returns:null},{name:"changeLabelInterval",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null}],returns:null},{name:"handlePlotterChange",docblock:null,modifiers:[],params:[{name:"newProps",optional:!1,type:null}],returns:null},{name:"changeType",docblock:null,modifiers:[],params:[{name:"type",optional:!1,type:null}],returns:null},{name:"changeLabel",docblock:null,modifiers:[],params:[{name:"i",optional:!1,type:null},{name:"e",optional:!1,type:null}],returns:null},{name:"changePicUrl",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null}],returns:null},{name:"changeCategories",docblock:null,modifiers:[],params:[{name:"categories",optional:!1,type:null}],returns:null},{name:"changeScale",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"changeMax",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"changeSnaps",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"changeEditing",docblock:null,modifiers:[],params:[{name:"editing",optional:!1,type:null}],returns:null},{name:"setCategoriesFromScale",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PlotterEditor",props:{type:{required:!1,tsType:{name:"unknown[number]",raw:'PerseusPlotterWidgetOptions["type"]'},description:"",defaultValue:{value:'"bar"',computed:!1}},labels:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},description:"",defaultValue:{value:'["", ""]',computed:!1}},categories:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]}],raw:"ReadonlyArray<string | number>"},description:"",defaultValue:{value:'[""]',computed:!1}},scaleY:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},maxY:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10",computed:!1}},snapsPerLine:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}},picSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"30",computed:!1}},picBoxHeight:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"36",computed:!1}},picUrl:{required:!0,tsType:{name:"string"},description:""},plotDimensions:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>"},description:"",defaultValue:{value:"[275, 200]",computed:!1}},labelInterval:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},starting:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>"},description:"",defaultValue:{value:"[1]",computed:!1}},correct:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>"},description:"",defaultValue:{value:"[1]",computed:!1}},static:{required:!0,tsType:{name:"boolean"},description:""},onChange:{required:!0,tsType:{name:"any"},description:""}}};const{InfoTip:Ns,NumberInput:We}=g,Is=Qe.widget,z=class z extends o.Component{constructor(){super(...arguments),this.numberOfColumns=o.createRef(),this.focus=()=>{var e;(e=this.numberOfColumns.current)==null||e.focus()},this.onSizeInput=(e,s)=>{let a=+e||0,n=+s||0;a=Math.min(Math.max(1,a),30),n=Math.min(Math.max(1,n),6);const l=this.props.columns,m=this.props.rows,c=this.props.answers;a<=m?c.length=a:i(a-m).times(function(){c.push(De.stringArrayOfSize(l))});function b(we){n<=l?we.length=n:i(n-l).times(function(){we.push("")})}const je=this.props.headers;b(je),i.each(c,b),this.props.onChange({rows:a,columns:n,answers:c,headers:je})},this.serialize=()=>{const e=i.pick(this.props,"headers","rows","columns");return i.extend({},e,{answers:i.map(this.props.answers,i.clone)})}}render(){return t.jsxs("div",{children:[t.jsx("div",{className:"perseus-widget-row",children:t.jsxs("label",{children:["Number of columns:"," ",t.jsx(We,{ref:this.numberOfColumns,value:this.props.columns,onChange:e=>{e&&this.onSizeInput(this.props.rows,e)},useArrowKeys:!0})]})}),t.jsx("div",{className:"perseus-widget-row",children:t.jsxs("label",{children:["Number of rows:"," ",t.jsx(We,{ref:"numberOfRows",value:this.props.rows,onChange:e=>{e&&this.onSizeInput(e,this.props.columns)},useArrowKeys:!0})]})}),t.jsxs("div",{children:[" ","Table of answers:"," ",t.jsx(Ns,{children:t.jsx("p",{children:"The student has to fill out all cells in the table. For partially filled tables create a table using the template, and insert text input boxes as desired."})})]}),t.jsx("div",{children:t.jsx(Is,{headers:this.props.headers,answers:this.props.answers,onChange:this.props.onChange,apiOptions:this.props.apiOptions,editableHeaders:!0,onFocus:()=>{},onBlur:()=>{},trackInteraction:()=>{},Editor:y})})]})}};z.propTypes={rows:r.number,columns:r.number,headers:r.arrayOf(r.string),answers:r.arrayOf(r.arrayOf(r.string))},z.widgetName="table",z.defaultProps=st.defaultWidgetOptions;let se=z;se.__docgenInfo={description:"",methods:[{name:"focus",docblock:null,modifiers:[],params:[],returns:null},{name:"onSizeInput",docblock:null,modifiers:[],params:[{name:"numRawRows",optional:!1,type:null},{name:"numRawColumns",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"TableEditor",props:{headers:{defaultValue:{value:'[""]',computed:!1},description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},rows:{defaultValue:{value:"4",computed:!1},description:"",type:{name:"number"},required:!1},columns:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"number"},required:!1},answers:{defaultValue:{value:`new Array(defaultRows)
.fill(0)
.map(() => new Array(defaultColumns).fill(""))`,computed:!0},description:"",type:{name:"arrayOf",value:{name:"arrayOf",value:{name:"string"}}},required:!1}}};const{InfoTip:Ps}=g,As=/khanacademy\.org\/.*\/v\/(.*)$/;function Vs(p){const e=As.exec(p);return e?e[1]:p}const L=class L extends o.Component{constructor(){super(...arguments),this._handleUrlChange=e=>{this.props.onChange({location:Vs(e)})},this.change=(...e)=>u.apply(this,e),this.serialize=()=>h.serialize.call(this)}render(){return t.jsx("div",{children:t.jsxs("label",{children:["KA Video Slug:"," ",t.jsx(f,{value:this.props.location,style:{width:290},onChange:this._handleUrlChange}),t.jsx(Ps,{children:"KA video URLs will be converted to just the slug."})]})})}};L.propTypes={...d,location:r.string,onChange:r.func},L.widgetName="video",L.defaultProps=Zt.defaultWidgetOptions;let ae=L;ae.__docgenInfo={description:"This is the main editor for this widget, to specify all the options.",methods:[{name:"_handleUrlChange",docblock:null,modifiers:[],params:[{name:"url",optional:!1,type:null}],returns:null},{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"VideoEditor",props:{location:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},onChange:{description:"",type:{name:"func"},required:!1}},composes:["@khanacademy/perseus"]};const Rs=[dt,M,ht,mt,gt,ft,v,F,H,B,K,vt,jt,wt,Ct,Tt,qt,G,Y,J,kt,St,X,Z,Q,ee,Ot,te,Nt,Pt,se,ae,It,$],Ea=()=>{lt(et),ot(Rs),pt(),ut()};export{Rs as A,es as I,ue as J,Ea as r};
