import{j as r,a as p}from"./jsx-runtime-BGVbfQ2Z.js";import{l as d,R as h,p as m}from"./renderer-D-YI6qGu.js";import{r as c}from"./index-qhcEwEpg.js";import{_ as s}from"./index-default-4_ZsnO94.js";import{C as o}from"./perseus-api-Ly41NhN4.js";import{U as f}from"./util-G-g1AweO.js";import{M as x}from"./math-input-vBHKIVuy.js";import{M as y}from"./math-output-o5-UebzW.js";import{T as C}from"./text-input-zeKg0zcv.js";import{T as b,H as i,V as v}from"./tooltip-K2JbXmT6.js";const{captureScratchpadTouchStart:g}=f,n=class n extends c.Component{constructor(){super(...arguments),this.state={focused:!1,showExamples:!1},this._getUniqueId=()=>`input-with-examples-${btoa(this.props.id).replace(/=/g,"")}`,this._getInputClassName=()=>{if(this.props.type==="tex")return this.props.className;let e=o.INPUT+" "+o.INTERACTIVE;return this.state.focused&&(e+=" "+o.FOCUSED),this.props.className&&(e+=" "+this.props.className),e},this._getPropsForInputType=()=>{const e=this._getUniqueId(),t={id:e,"aria-describedby":e,ref:"input",className:this._getInputClassName(),labelText:this.props.labelText,value:this.props.value,onFocus:this._handleFocus,onBlur:this._handleBlur,disabled:this.props.disabled,style:this.props.style};if(this.props.type==="tex")return t;if(s.extend(t,{onChange:this.props.onChange,onTouchStart:g}),this.props.type==="math")return s.extend({buttonSet:this.props.buttonSet,buttonsVisible:this.props.buttonsVisible,convertDotToTimes:this.props.convertDotToTimes},t);if(this.props.type==="text")return s.extend({autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:"false"},t)},this._getComponentForInputType=()=>{switch(this.props.type){case"tex":return y;case"math":return x;case"text":return C;default:return this.props.type,null}},this._renderInput=()=>{const e=this._getPropsForInputType(),t=this._getComponentForInputType();return r(t,{...e})},this._handleFocus=()=>{this.props.onFocus(),this.setState({focused:!0,showExamples:!0})},this.show=()=>{this.setState({showExamples:!0})},this.hide=()=>{this.setState({showExamples:!1})},this._handleBlur=()=>{this.props.onBlur(),this.setState({focused:!1,showExamples:!1})},this.focus=()=>{this.refs.input.focus()},this.blur=()=>{this.refs.input.blur()},this.handleChange=e=>{this.props.onChange(e.target.value)}}render(){const e=this._renderInput();if(this.props.type==="tex")return e;const t=s.map(this.props.examples,u=>"- "+u).join(`
`),l=this.props.shouldShowExamples&&this.state.showExamples;return p(b,{ref:"tooltip",className:"perseus-formats-tooltip preview-measure",horizontalPosition:i.Left,horizontalAlign:i.Left,verticalPosition:v.Bottom,arrowSize:10,borderColor:"#ccc",show:l,children:[e,r("div",{id:this._getUniqueId(),children:r(h,{content:t,linterContext:m(this.props.linterContext,"input-with-examples")})})]})}};n.defaultProps={type:"text",shouldShowExamples:!0,onFocus:function(){},onBlur:function(){},disabled:!1,linterContext:d,className:""};let a=n;try{a.displayName="InputWithExamples",a.__docgenInfo={description:"",displayName:"InputWithExamples",props:{type:{defaultValue:{value:"text"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"math"'},{value:'"tex"'}]}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"any"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},examples:{defaultValue:null,description:"",name:"examples",required:!0,type:{name:"readonly string[]"}},shouldShowExamples:{defaultValue:{value:"true"},description:"",name:"shouldShowExamples",required:!1,type:{name:"boolean"}},convertDotToTimes:{defaultValue:null,description:"",name:"convertDotToTimes",required:!1,type:{name:"boolean"}},buttonSet:{defaultValue:null,description:"",name:"buttonSet",required:!1,type:{name:"string"}},buttonsVisible:{defaultValue:null,description:"",name:"buttonsVisible",required:!1,type:{name:"enum",value:[{value:'"always"'},{value:'"never"'},{value:'"focused"'}]}},labelText:{defaultValue:null,description:"",name:"labelText",required:!1,type:{name:"string"}},onFocus:{defaultValue:{value:"function () {}"},description:"",name:"onFocus",required:!1,type:{name:"() => void"}},onBlur:{defaultValue:{value:"function () {}"},description:"",name:"onBlur",required:!1,type:{name:"() => void"}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},linterContext:{defaultValue:{value:"PerseusLinter.linterContextDefault"},description:"",name:"linterContext",required:!1,type:{name:"LinterContextProps"}}}}}catch{}export{a as I};
