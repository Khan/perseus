import{j as t,a}from"./jsx-runtime-FVsy8kgq.js";import{c as at,W as rt,G as nt,r as it,M as lt,s as ot,u as pt,T as ut,w as ht}from"./article-renderer-4C37I9ol.js";import{_ as l}from"./index-default-4_ZsnO94.js";import{U as j,r as ct}from"./util-d6C3c8a_.js";import{c as h,p as c}from"./phet-simulation-J1z7IyT1.js";import"./version-akiLXZts.js";import{L as Ze,b as dt}from"./svg-image-BeclIbdJ.js";import{A as Ve}from"./perseus-api-OW2_bRsL.js";import"./multi-renderer-W7xQnQuS.js";import"./hints-renderer-FGa-4BFu.js";import{S as mt,P as Qe,r as gt,b as ft,a as yt,c as bt}from"./renderer-jzjEe9n9.js";import"./base-radio-C7ezBjG5.js";import"./button-group-nsoLlHtM.js";import"./graph-_lfeZ1ip.js";import"./hud-FI3E3dT_.js";import"./icon-YuYiVxsK.js";import"./index-K9BSJPWl.js";import"./inline-icon-tKY1iMkH.js";import"./math-input-i_rWBSVt.js";import"./multi-button-group-a0iIfrwx.js";import"./number-input-QJ7SuV66.js";import"./range-input-KJf9tq1R.js";import"./text-input-UKLpKhjh.js";import"./text-list-editor-_UIkAa1J.js";import{g as et}from"./dependencies-8XILypbq.js";import{$ as vt}from"./jquery-5v7aFUvu.js";import"./index-k-0mNqHS.js";import"./i18n-context-W41LcU6B.js";import{r as p}from"./index-TT1qJ6UJ.js";import{C as wt}from"./categorizer-editor-3tPmYvBg.js";import{E as Ct}from"./perseus-error-l3K_anoI.js";import{c as f}from"./components-LfwSqJlx.js";import{E as d}from"./editor-jsonify-O7oWism0.js";import{C as w}from"./index-aLQwBKgs.js";import{P as n}from"./index-0C4KXdeC.js";import{B as y}from"./blur-input-hjJsfoK9.js";import{D as xt}from"./definition-editor-nE9T513x.js";import{D as Tt}from"./dropdown-editor-Sf1Hpohf.js";import{E as kt}from"./explanation-editor-PExRBx1L.js";import{E as Nt}from"./expression-editor-RrI-GQHu.js";import{I as St}from"./icon-paths-AuJwhOz7.js";import{l as G}from"./index-awljIyHI.js";import{E as b}from"./editor-UYGUhYOX.js";import{G as It}from"./graph-settings-qO3Kyy9d.js";import{I as Ot}from"./image-editor-NgQHIL5r.js";import{I as qt}from"./input-number-editor-aF0P9bgy.js";import{I as Pt}from"./index-o1qlzkZd.js";import{I as zt}from"./interactive-graph-editor-DlqIy5Wr.js";import{L as Vt}from"./label-image-editor-ZlsNS3WY.js";import{M as At}from"./matcher-editor-WpCFN_Uk.js";import{N as Rt}from"./number-line-editor-028-r6Rv.js";import{N as Lt}from"./numeric-input-editor-km6BwgDS.js";import{P as Ut}from"./phet-simulation-editor-0jF2kj2-.js";import{R as be}from"./index-7vsPyIck.js";import{P as Dt}from"./python-program-editor-9TRpQwJA.js";import{R as Mt}from"./editor-Veh9vCm2.js";import{S as _t}from"./sorter-editor-fF-5dQ-c.js";const Ma=at({displayName:"JsonEditor",getInitialState:function(){return{currentValue:JSON.stringify(this.props.value,null,4),valid:!0}},UNSAFE_componentWillReceiveProps:function(o){(!this.state.valid||!l.isEqual(o.value,JSON.parse(this.state.currentValue)))&&this.setState(this.getInitialState())},render:function(){const o="perseus-json-editor "+(this.state.valid?"valid":"invalid");return t("textarea",{className:o,value:this.state.currentValue,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur})},handleKeyDown:function(o){if(o.key==="Tab"){const e=o.target.selectionStart,s=o.target.value,r=s.substring(0,e),i=s.substring(e,s.length);o.target.value=r+"    "+i,o.target.selectionStart=r.length+4,o.target.selectionEnd=r.length+4,o.preventDefault(),this.handleChange(o)}},handleChange:function(o){const e=o.target.value;try{let s=JSON.parse(e);l.isString(s)&&(s=JSON.parse(s)),this.setState({currentValue:e,valid:!0},function(){this.props.onChange(s)})}catch{this.setState({currentValue:e,valid:!1})}},handleBlur:function(o){const e=o.target.value;try{let s=JSON.parse(e);l.isString(s)&&(s=JSON.parse(s)),this.setState({currentValue:JSON.stringify(s,null,4),valid:!0},function(){this.props.onChange(s)})}catch{this.setState({currentValue:JSON.stringify(this.props.value,null,4),valid:!0})}}});let De=0;const ke={},Ne={};window.iframeDataStore={};window.addEventListener("message",o=>{if(typeof o.data=="string"){const e=ke[o.data];e&&e()}else o.data.id&&(o.data.height!==void 0?Ne[o.data.id](o.data.height):o.data.lintWarnings&&Ze.log("LINTER REPORT",{lintWarnings:JSON.stringify(o.data.lintWarnings)}))});class Wt extends p.Component{constructor(){super(...arguments),this.container=p.createRef()}componentDidMount(){this._isMounted=!0,this.iframeID=De,De++,this._prepareFrame(),ke[this.iframeID]=()=>{this.sendNewData(this._lastData)},Ne[this.iframeID]=e=>{this._lastHeight=e,this._isMounted&&this.props.seamless&&this.container.current&&(this.container.current.style.height=e+"px")}}shouldComponentUpdate(e){return e.datasetValue!==this.props.datasetValue||e.seamless!==this.props.seamless}componentDidUpdate(e){this.container.current&&(this.props.seamless?this.container.current.style.height=this._lastHeight+"px":this.container.current.style.height="100%"),e.datasetValue!==this.props.datasetValue&&this._prepareFrame()}componentWillUnmount(){ke[this.iframeID]=null,Ne[this.iframeID]=null,this._isMounted=!1}_prepareFrame(){var s,r;this._frame&&((s=this.container.current)==null||s.removeChild(this._frame));const e=document.createElement("iframe");e.style.width="100%",e.style.height="100%",e.src=this.props.url,this.props.datasetKey&&(e.dataset[this.props.datasetKey]=this.props.datasetValue),e.dataset.id=String(this.iframeID),this.props.seamless&&(e.dataset.lintGutter="true"),(r=this.container.current)==null||r.appendChild(e),this._frame=e}sendNewData(e){const s=this._frame;this._isMounted&&e&&(s!=null&&s.contentWindow)&&(this._lastData=e,window.iframeDataStore[this.iframeID]=e,s.contentWindow.postMessage(this.iframeID,"*"))}render(){return t("div",{ref:this.container,style:{width:"100%",height:"100%"}})}}Wt.__docgenInfo={description:"",methods:[{name:"_prepareFrame",docblock:null,modifiers:[],params:[],returns:null},{name:"sendNewData",docblock:null,modifiers:[],params:[{name:"data",optional:!1,type:{name:"any"}}],returns:null}],displayName:"IframeContentRenderer",props:{url:{required:!0,tsType:{name:"string"},description:""},datasetKey:{required:!0,tsType:{name:"string"},description:""},datasetValue:{required:!0,tsType:{name:"any"},description:""},seamless:{required:!0,tsType:{name:"boolean"},description:""}}};const{InfoTip:Me}=f,_e=400,We=400;var x;let $t=(x=class extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.serialize=()=>d.serialize.call(this)}render(){return a("fieldset",{className:"pair-editor",children:[a("label",{children:["Name:"," ",t(y,{value:this.props.name,onChange:this.change("name")})]}),a("label",{children:[" ","Value:"," ",t(y,{value:this.props.value,onChange:this.change("value")})]})]})}},x.propTypes={...c,name:n.string,value:n.string},x.defaultProps={name:"",value:""},x);var E;let Et=(E=class extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.handlePairChange=(e,s)=>{const r=this.props.pairs.slice();r[e]=s;const i=r[r.length-1];i.name&&i.value&&r.push({name:"",value:""}),this.change("pairs",r)},this.serialize=()=>d.serialize.call(this)}render(){const e=l.map(this.props.pairs,(s,r)=>t($t,{name:s.name,value:s.value,onChange:this.handlePairChange.bind(this,r)},r));return t("div",{children:e})}},E.propTypes={...c,pairs:n.arrayOf(n.shape({name:n.string,value:n.string})).isRequired},E);const Ft=/khanacademy\.org\/computer-programming\/[^\/]+\/(\d+)/;function Bt(o){const e=Ft.exec(o);return e&&(o=e[1]),o}const N=class N extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this._handleSettingsChange=e=>{this.change({settings:e.pairs})},this._handleProgramIDChange=e=>{e=Bt(e);const{isDevServer:s,InitialRequestUrl:r}=et(),u=`${s?r.origin:"https://www.khanacademy.org"}/api/internal/scratchpads/${e}`;vt.getJSON(u).done(g=>{const m=g.userAuthoredContentType;this.change({width:g.width,height:g.height,programID:e,programType:m})}).fail((g,m,v)=>{Ze.error("Error retrieving scratchpad info for program ID ",Ct.TransientService,{cause:v,loggedMetadata:{textStatus:m,programID:e}}),this.change({width:_e,height:We,programID:e,programType:null})})},this.serialize=()=>d.serialize.call(this)}render(){return a("div",{children:[a("label",{children:["Url or Program ID:"," ",t(y,{value:this.props.programID,onChange:this._handleProgramIDChange})]}),t("br",{}),t(w,{label:"Show Editor",checked:this.props.showEditor,onChange:e=>{this.props.onChange({showEditor:e})}}),t(Me,{children:'If you show the editor, you should use the "full-width" alignment to make room for the width of the editor.'}),t("br",{}),t(w,{label:"Show Buttons",checked:this.props.showButtons,onChange:e=>{this.props.onChange({showButtons:e})}}),t("br",{}),a("label",{children:["Settings:",t(Et,{name:"settings",pairs:this.props.settings,onChange:this._handleSettingsChange}),a(Me,{children:["Settings that you add here are available to the program as an object returned by ",t("code",{children:"Program.settings()"})]})]})]})}};N.propTypes={...c},N.widgetName="cs-program",N.defaultProps={programID:"",programType:null,settings:[{name:"",value:""}],showEditor:!1,showButtons:!1,width:_e,height:We};let K=N;K.__docgenInfo={description:"This is the main editor for this widget, to specify all the options.",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"_handleSettingsChange",docblock:null,modifiers:[],params:[{name:"settings",optional:!1,type:null}],returns:null},{name:"_handleProgramIDChange",docblock:null,modifiers:[],params:[{name:"programID",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"CSProgramEditor",props:{programID:{defaultValue:{value:'""',computed:!1},required:!1},programType:{defaultValue:{value:"null",computed:!1},required:!1},settings:{defaultValue:{value:'[{name: "", value: ""}]',computed:!1},required:!1},showEditor:{defaultValue:{value:"false",computed:!1},required:!1},showButtons:{defaultValue:{value:"false",computed:!1},required:!1},width:{defaultValue:{value:"400",computed:!1},required:!1},height:{defaultValue:{value:"400",computed:!1},required:!1}},composes:["@khanacademy/perseus"]};const Ae=class Ae extends p.Component{serialize(){return d.serialize.call(this)}render(){return a("div",{children:[t("p",{children:"This widget has been deprecated and removed"}),t("p",{children:"Learners will see a message and they will not be graded on this part. Please replace this widget with a supported one."})]})}};Ae.widgetName="deprecated-standin";let Y=Ae;Y.__docgenInfo={description:"",methods:[{name:"serialize",docblock:null,modifiers:[],params:[],returns:{type:{name:"any"}}}],displayName:"DeprecatedStandinEditor",props:{onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(options: any) => void",signature:{arguments:[{type:{name:"any"},name:"options"}],return:{name:"void"}}},description:""}}};const{Graphie:tt}=f,ve=tt.MovablePoint;var T;let Ht=(T=class extends p.Component{constructor(){super(...arguments),this.getUserInput=()=>rt.getUserInput.call(this),this.change=(...e)=>h.apply(this,e),this.movePoint=e=>{this.change({coord:e})},this._getGridConfig=e=>l.map(e.step,function(s,r){return j.gridDimensionConfig(s,e.range[r],e.box[r],e.gridStep[r])}),this.setupGraphie=(e,s)=>{const r=this._getGridConfig(s);e.graphInit({range:s.range,scale:l.pluck(r,"scale"),axisArrows:"<->",labelFormat:function(i){return"\\small{"+i+"}"},gridStep:s.gridStep,tickStep:l.pluck(r,"tickStep"),labelStep:1,unityLabels:l.pluck(r,"unityLabel")}),e.label([0,s.range[1][1]],s.labels[1],"above")},this.simpleValidate=e=>T.validate(this.getUserInput(),e)}static validate(e,s){return e.coord==null?{type:"invalid",message:null}:dt(e.coord,s.correct)?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}}render(){var e;return t(tt,{ref:"graphie",box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this.setupGraphie,setDrawingAreaAvailable:(e=this.props.apiOptions)==null?void 0:e.setDrawingAreaAvailable,children:t(ve,{pointSize:5,coord:this.props.coord||[0,0],constraints:[ve.constraints.snap(),ve.constraints.bound()],onMove:this.movePoint})})}},T.defaultProps={coord:null,graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],valid:!0,backgroundImage:null,markings:"grid",showProtractor:!1}},T);const st={name:"example-graphie-widget",displayName:"Example Graphie Widget",hidden:!0,widget:Ht},Gt=st.widget,S=class S extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.handleChange=e=>{e.coord&&this.change({correct:e.coord})},this.serialize=()=>d.serialize.call(this)}render(){return t("div",{children:t(Gt,{graph:this.props.graph,coord:this.props.correct,onChange:this.handleChange,apiOptions:this.props.apiOptions})})}};S.propTypes={...c},S.widgetName="example-graphie-widget",S.defaultProps={correct:[4,4],graph:{box:[340,340],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],valid:!0,backgroundImage:null,markings:"grid",showProtractor:!1}};let J=S;J.__docgenInfo={description:`This is the widget's editor. This is what shows up on the left side
of the screen in the demo page. Only the question writer sees this.`,methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"handleChange",docblock:null,modifiers:[],params:[{name:"newProps",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ExampleGraphieWidgetEditor",props:{correct:{defaultValue:{value:"[4, 4]",computed:!1},required:!1},graph:{defaultValue:{value:`{
    box: [340, 340],
    labels: ["x", "y"],
    range: [
        [-10, 10],
        [-10, 10],
    ],
    step: [1, 1],
    gridStep: [1, 1],
    valid: true,
    backgroundImage: null,
    markings: "grid",
    showProtractor: false,
}`,computed:!1},required:!1}},composes:["@khanacademy/perseus"]};const I=class I extends p.Component{constructor(){super(...arguments),this.input=p.createRef(),this.handleAnswerChange=e=>{this.change({correct:e.target.value})},this.change=(...e)=>h.apply(this,e),this.focus=()=>{var e;return(e=this.input.current)==null||e.focus(),!0},this.serialize=()=>d.serialize.call(this)}render(){return t("div",{children:a("label",{children:["Correct answer:",t("input",{value:this.props.correct,onChange:this.handleAnswerChange,ref:this.input})]})})}};I.propTypes={...c},I.widgetName="example-widget",I.defaultProps={correct:""};let X=I;X.__docgenInfo={description:`This is the widget's editor. This is what shows up on the left side
of the screen in the demo. Only the question writer sees this.`,methods:[{name:"handleAnswerChange",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"focus",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ExampleWidgetEditor",props:{correct:{defaultValue:{value:'""',computed:!1},required:!1}},composes:["@khanacademy/perseus"]};const{InlineIcon:$e,TextInput:jt}=f,{iconPlus:Kt,iconTrash:Yt}=St,O=class O extends p.Component{constructor(){super(...arguments),this.editor=p.createRef(),this.hintEditor=p.createRef(),this.change=(...e)=>h.apply(this,e),this.handleAddHint=()=>{const e={content:""};this.props.onChange({hint:e},()=>{var s;(s=this.hintEditor.current)==null||s.focus()})},this.handleRemoveHint=e=>{this.props.onChange({hint:null})},this.getSaveWarnings=()=>{var e;return(e=this.editor.current)==null?void 0:e.getSaveWarnings()},this.serialize=()=>{var e,s;return{title:this.props.title,...(e=this.editor.current)==null?void 0:e.serialize(),hint:(s=this.hintEditor.current)==null?void 0:s.serialize()}}}render(){return a("div",{className:"perseus-group-editor",children:[t("div",{className:"perseus-widget-row",children:a("label",{className:G.css(we.title),children:["Title:"," ",t(jt,{value:this.props.title,className:G.css(we.input),onChange:this.change("title")})]})}),t(b,{ref:this.editor,content:this.props.content,widgets:this.props.widgets,apiOptions:this.props.apiOptions,images:this.props.images,widgetEnabled:!0,immutableWidgets:!1,onChange:this.props.onChange,warnNoPrompt:!0,warnNoWidgets:!0}),!this.props.hint&&a("button",{type:"button",style:{marginTop:10},className:"add-hint simple-button orange",onClick:this.handleAddHint,children:[t($e,{...Kt})," Add a hint"]}),this.props.hint&&a("div",{className:"perseus-hint-editor",children:[t("div",{className:G.css(we.hintsTitle),children:"Hint"}),t(b,{ref:this.hintEditor,content:this.props.hint?this.props.hint.content:"",widgets:this.props.hint?this.props.hint.widgets:{},apiOptions:this.props.apiOptions,images:this.props.hint&&this.props.hint.images,widgetEnabled:!0,immutableWidgets:!1,onChange:e=>{this.change("hint",Object.assign({},this.props.hint,e))}}),a("button",{type:"button",className:"remove-hint simple-button orange",onClick:this.handleRemoveHint,children:[t($e,{...Yt})," Remove this hint"]})]})]})}};O.propTypes={...c,title:n.string,content:n.string,widgets:n.object,images:n.object,apiOptions:Ve.propTypes},O.widgetName="graded-group",O.defaultProps={title:"",content:"",widgets:{},images:{},hint:null};let C=O;const we=G.StyleSheet.create({title:{fontSize:18,fontWeight:"bold"},input:{fontSize:18},hintsTitle:{marginTop:10,fontSize:"110%",fontWeight:"bold"}});C.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"handleAddHint",docblock:null,modifiers:[],params:[],returns:null},{name:"handleRemoveHint",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GradedGroupEditor",props:{title:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},content:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},widgets:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},images:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},hint:{defaultValue:{value:"null",computed:!1},required:!1},apiOptions:{description:"",type:{name:"custom",raw:"ApiOptions.propTypes"},required:!1}},composes:["@khanacademy/perseus"]};const q=class q extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.getSaveWarnings=()=>[].concat(...this._editors.map(e=>e?e.getSaveWarnings():[])),this.serialize=()=>({gradedGroups:this.props.gradedGroups}),this.renderGroups=()=>this.props.gradedGroups?this.props.gradedGroups.map((e,s)=>t(C,{ref:r=>this._editors[s]=r,...e,apiOptions:this.props.apiOptions,widgetEnabled:!0,immutableWidgets:!1,onChange:r=>this.change("gradedGroups",Jt(this.props.gradedGroups,s,{...this.props.gradedGroups[s],...r}))},s)):null,this.addGroup=()=>{const e=this.props.gradedGroups||[];this.change("gradedGroups",e.concat([C.defaultProps]))}}UNSAFE_componentWillMount(){this._editors=[]}render(){return a("div",{className:"perseus-group-editor",children:[this.renderGroups(),t("button",{onClick:this.addGroup,children:"Add group"})]})}};q.propTypes={...c,apiOptions:Ve.propTypes,gradedGroups:n.array,onChange:n.func.isRequired},q.widgetName="graded-group-set",q.defaultProps={gradedGroups:[]};let Z=q;const Jt=(o,e,s)=>[...o.slice(0,e),s,...o.slice(e+1)];Z.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null},{name:"renderGroups",docblock:null,modifiers:[],params:[],returns:null},{name:"addGroup",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GradedGroupSetEditor",props:{gradedGroups:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"array"},required:!1},apiOptions:{description:"",type:{name:"custom",raw:"ApiOptions.propTypes"},required:!1},onChange:{description:"",type:{name:"func"},required:!0}},composes:["@khanacademy/perseus"]};const{InfoTip:Xt,MultiButtonGroup:Zt}=f,{containerSizeClass:Qt,getInteractiveBoxFromSizeClass:es}=mt,ts=nt.widget,{DEFAULT_GRAPHER_PROPS:Ce,allTypes:ss,chooseType:as,defaultPlotProps:rs,getEquationString:ns,typeToButton:is}=it,P=class P extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.handleAvailableTypesChange=e=>{let s=this.props.correct;if(!l.contains(e,this.props.correct.type)){const r=this.props.graph,i=as(e);s=rs(i,r)}this.props.onChange({availableTypes:e,correct:s})},this.serialize=()=>l.chain(this.props).pick("correct","availableTypes").extend({graph:l.omit(this.props.graph,"box")}).value()}render(){const e=Qt.SMALL;let s,r;if(this.props.graph.valid===!0){const i={graph:this.props.graph,plot:this.props.correct,availableTypes:this.props.availableTypes,onChange:(u,g)=>{var v;let m=this.props.correct;m.type===((v=u.plot)==null?void 0:v.type)?m=l.extend({},m,u.plot):m=u.plot,this.props.onChange({correct:m},g)},trackInteraction:function(){}};r=t(ts,{...i,apiOptions:this.props.apiOptions,containerSizeClass:e}),s=ns(i)}else r=t("div",{className:"perseus-error",children:this.props.graph.valid});return a("div",{children:[a("div",{children:["Correct answer"," ",t(Xt,{children:t("p",{children:"Graph the correct answer in the graph below and ensure the equation or point coordinates displayed represent the correct answer."})})," ",": ",s]}),t(It,{editableSettings:["graph","snap","image"],box:es(e),range:this.props.graph.range,labels:this.props.graph.labels,step:this.props.graph.step,gridStep:this.props.graph.gridStep,snapStep:this.props.graph.snapStep,valid:this.props.graph.valid,backgroundImage:this.props.graph.backgroundImage,markings:this.props.graph.markings,rulerLabel:this.props.graph.rulerLabel,rulerTicks:this.props.graph.rulerTicks,showTooltips:this.props.graph.showTooltips,onChange:this.change("graph")}),a("div",{className:"perseus-widget-row",children:[t("label",{children:"Available functions: "}),t(Zt,{allowEmpty:!1,values:this.props.availableTypes,buttons:l.map(ss,is),onChange:this.handleAvailableTypesChange})]}),r]})}};P.propTypes={...c},P.widgetName="grapher",P.defaultProps={correct:Ce.plot,graph:Ce.graph,availableTypes:Ce.availableTypes};let Q=P;Q.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"handleAvailableTypesChange",docblock:null,modifiers:[],params:[{name:"newAvailableTypes",optional:!1,type:{name:"Array",elements:[{name:"any"}],raw:"Array<any>",alias:"Array"}}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GrapherEditor",props:{correct:{defaultValue:{value:"DEFAULT_GRAPHER_PROPS.plot",computed:!0},required:!1},graph:{defaultValue:{value:"DEFAULT_GRAPHER_PROPS.graph",computed:!0},required:!1},availableTypes:{defaultValue:{value:"DEFAULT_GRAPHER_PROPS.availableTypes",computed:!0},required:!1}},composes:["@khanacademy/perseus"]};const z=class z extends p.Component{constructor(){super(...arguments),this.editor=p.createRef(),this._renderMetadataEditor=()=>{const e=this.props.apiOptions.GroupMetadataEditor;return t(e,{value:this.props.metadata,onChange:this.change("metadata")})},this.change=(...e)=>h.apply(this,e),this.getSaveWarnings=()=>{var e;return(e=this.editor.current)==null?void 0:e.getSaveWarnings()},this.serialize=()=>{var e;return l.extend({},(e=this.editor.current)==null?void 0:e.serialize(),{metadata:this.props.metadata})}}render(){return a("div",{className:"perseus-group-editor",children:[t("div",{children:this._renderMetadataEditor()}),t(b,{ref:this.editor,content:this.props.content,widgets:this.props.widgets,apiOptions:this.props.apiOptions,images:this.props.images,widgetEnabled:!0,immutableWidgets:!1,onChange:this.props.onChange})]})}};z.propTypes={...c,content:n.string,widgets:n.object,images:n.object,metadata:n.any,apiOptions:Ve.propTypes},z.widgetName="group",z.defaultProps={content:"",widgets:{},images:{},metadata:void 0};let ee=z;ee.__docgenInfo={description:"",methods:[{name:"_renderMetadataEditor",docblock:null,modifiers:[],params:[],returns:null},{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GroupEditor",props:{content:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},widgets:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},images:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},metadata:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"any"},required:!1},apiOptions:{description:"",type:{name:"custom",raw:"ApiOptions.propTypes"},required:!1}},composes:["@khanacademy/perseus"]};const de=class de extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.serialize=()=>d.serialize.call(this)}render(){return a("fieldset",{children:[a("label",{children:["Name:",t(y,{value:this.props.name,onChange:this.change("name")})]}),a("label",{children:["Value:",t(y,{value:this.props.value,onChange:this.change("value")})]})]})}};de.propTypes={...c,name:n.string,value:n.string},de.defaultProps={name:"",value:""};let Se=de;const Re=class Re extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.handlePairChange=(e,s)=>{const r=this.props.pairs.slice();r[e]=s;const i=r[r.length-1];i.name&&i.value&&r.push({name:"",value:""}),this.change("pairs",r)},this.serialize=()=>d.serialize.call(this)}render(){const e=l.map(this.props.pairs,(s,r)=>t(Se,{name:s.name,value:s.value,onChange:this.handlePairChange.bind(this,r)},r));return t("div",{children:e})}};Re.propTypes={...c,pairs:n.arrayOf(n.shape({name:n.string,value:n.string})).isRequired};let Ie=Re;const V=class V extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.handleSettingsChange=e=>{this.change({settings:e.pairs})},this.serialize=()=>d.serialize.call(this)}render(){return a("div",{children:[a("div",{style:{fontWeight:"bold",textAlign:"center"},children:["This widget is deprecated! ",t("br",{}),"Try using the Video or CS Program widgets instead."]}),a("label",{children:["Url or Program ID:",t(y,{value:this.props.url,onChange:this.change("url")})]}),t("br",{}),a("label",{children:["Settings:",t(Ie,{name:"settings",pairs:this.props.settings,onChange:this.handleSettingsChange})]}),t("br",{}),a("label",{children:["Width:",t(y,{value:this.props.width,onChange:this.change("width")})]}),a("label",{children:["Height:",t(y,{value:this.props.height,onChange:this.change("height")})]}),t(w,{label:"Allow full screen",checked:this.props.allowFullScreen,onChange:e=>{this.props.onChange({allowFullScreen:e})}}),t("br",{}),t(w,{label:"Allow iframe content to redirect the page",checked:this.props.allowTopNavigation,onChange:e=>{this.props.onChange({allowTopNavigation:e})}})]})}};V.propTypes={...c},V.widgetName="iframe",V.defaultProps={url:"",settings:[{name:"",value:""}],width:"400",height:"400",allowFullScreen:!1,allowTopNavigation:!1};let te=V;te.__docgenInfo={description:"This is the main editor for this widget, to specify all the options.",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"handleSettingsChange",docblock:null,modifiers:[],params:[{name:"settings",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"IframeEditor",props:{url:{defaultValue:{value:'""',computed:!1},required:!1},settings:{defaultValue:{value:'[{name: "", value: ""}]',computed:!1},required:!1},width:{defaultValue:{value:'"400"',computed:!1},required:!1},height:{defaultValue:{value:'"400"',computed:!1},required:!1},allowFullScreen:{defaultValue:{value:"false",computed:!1},required:!1},allowTopNavigation:{defaultValue:{value:"false",computed:!1},required:!1}},composes:["@khanacademy/perseus"]};const{RangeInput:ls}=f,os=lt.widget,Ee=6,ps=function(o){const e=[1,1];return l(o).each((s,r)=>{let i=0;l(s).each((u,g)=>{u!=null&&u.toString().length&&(i=g+1)}),e[1]=Math.max(e[1],i),i>0&&(e[0]=Math.max(e[0],r+1))}),e},A=class A extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.onMatrixBoardSizeChange=e=>{const s=ps(this.props.answers);if(e[0]!==null&&e[1]!==null){e=[Math.round(Math.min(Math.max(e[0],1),Ee)),Math.round(Math.min(Math.max(e[1],1),Ee))];const r=l(Math.min(e[0],s[0])).times(i=>l(Math.min(e[1],s[1])).times(u=>this.props.answers[i][u]));this.props.onChange({matrixBoardSize:e,answers:r})}},this.serialize=()=>d.serialize.call(this)}render(){const e=l.extend({numericInput:!0,onBlur:()=>{},onFocus:()=>{},trackInteraction:()=>{}},this.props);return a("div",{className:"perseus-matrix-editor",children:[a("div",{className:"perseus-widget-row",children:[" ","Max matrix size:"," ",t(ls,{value:this.props.matrixBoardSize,onChange:this.onMatrixBoardSizeChange,format:this.props.labelStyle,useArrowKeys:!0})]}),t("div",{className:"perseus-widget-row",children:t(os,{...e})}),a("div",{className:"perseus-widget-row",children:[" ","Matrix prefix:"," ",t(b,{ref:"prefix",apiOptions:this.props.apiOptions,content:this.props.prefix,widgetEnabled:!1,onChange:s=>{this.change({prefix:s.content})}})]}),a("div",{className:"perseus-widget-row",children:[" ","Matrix suffix:"," ",t(b,{ref:"suffix",apiOptions:this.props.apiOptions,content:this.props.suffix,widgetEnabled:!1,onChange:s=>{this.change({suffix:s.content})}})]})]})}};A.propTypes={...c,matrixBoardSize:n.arrayOf(n.number).isRequired,answers:n.arrayOf(n.arrayOf(n.number)),prefix:n.string,suffix:n.string,cursorPosition:n.arrayOf(n.number)},A.widgetName="matrix",A.defaultProps={matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0]};let se=A;se.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"onMatrixBoardSizeChange",docblock:null,modifiers:[],params:[{name:"range",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MatrixEditor",props:{matrixBoardSize:{defaultValue:{value:"[3, 3]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"number"}},required:!1},answers:{defaultValue:{value:"[[]]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"arrayOf",value:{name:"number"}}},required:!1},prefix:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},suffix:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},cursorPosition:{defaultValue:{value:"[0, 0]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"number"}},required:!1}},composes:["@khanacademy/perseus"]};const{InfoTip:us,NumberInput:F,RangeInput:hs}=f,cs={url:null,top:0,left:0},R=class R extends p.Component{constructor(){super(...arguments),this.className="perseus-widget-measurer",this.change=(...e)=>h.apply(this,e),this._changeUrl=e=>{this._changeImage("url",e.target.value)},this._changeTop=e=>{this._changeImage("top",e)},this._changeLeft=e=>{this._changeImage("left",e)},this._changeImage=(e,s)=>{const r=l.clone(this.props.image);r[e]=s,this.change("image",r)},this.renderLabelChoices=e=>l.map(e,function(s){const[r,i]=s;return t("option",{value:i,children:r},i)}),this.serialize=()=>d.serialize.call(this)}render(){const e=l.extend({},cs,this.props.image);return a("div",{className:"perseus-widget-measurer",children:[t("div",{children:"Image displayed under protractor and/or ruler:"}),a("div",{children:["URL:"," ",t("input",{type:"text",className:"perseus-widget-measurer-url",ref:"image-url",defaultValue:e.url,onChange:this._changeUrl}),t(us,{children:t("p",{children:'Create an image in graphie, or use the "Add image" function to create a background.'})})]}),e.url&&a("div",{className:"perseus-widget-row",children:[a("label",{className:"perseus-widget-left-col",children:["Pixels from top:"," ",t(F,{placeholder:0,onChange:this._changeTop,value:e.top,useArrowKeys:!0})]}),a("label",{className:"perseus-widget-right-col",children:["Pixels from left:"," ",t(F,{placeholder:0,onChange:this._changeLeft,value:e.left,useArrowKeys:!0})]})]}),a("div",{children:["Containing area [width, height]:"," ",t(hs,{onChange:this.change("box"),value:this.props.box,useArrowKeys:!0})]}),a("div",{className:"perseus-widget-row",children:[t("div",{className:"perseus-widget-left-col",children:t(w,{label:"Show ruler",checked:this.props.showRuler,onChange:s=>{this.props.onChange({showRuler:s})}})}),t("div",{className:"perseus-widget-right-col",children:t(w,{label:"Show protractor",checked:this.props.showProtractor,onChange:s=>{this.props.onChange({showProtractor:s})}})})]}),this.props.showRuler&&a("div",{children:[t("div",{children:a("label",{children:[" ","Ruler label:"," ",a("select",{onChange:s=>this.change("rulerLabel",s.target.value),value:this.props.rulerLabel,children:[t("option",{value:"",children:"None"}),t("optgroup",{label:"Metric",children:this.renderLabelChoices([["milimeters","mm"],["centimeters","cm"],["meters","m"],["kilometers","km"]])}),t("optgroup",{label:"Imperial",children:this.renderLabelChoices([["inches","in"],["feet","ft"],["yards","yd"],["miles","mi"]])})]})]})}),t("div",{children:a("label",{children:[" ","Ruler ticks:"," ",t("select",{onChange:s=>this.change("rulerTicks",+s.target.value),value:this.props.rulerTicks,children:l.map([1,2,4,8,10,16],function(s){return t("option",{value:s,children:s},s)})})]})}),t("div",{children:a("label",{children:["Ruler pixels per unit:"," ",t(F,{placeholder:40,onChange:this.change("rulerPixels"),value:this.props.rulerPixels,useArrowKeys:!0})]})}),t("div",{children:a("label",{children:["Ruler length in units:"," ",t(F,{placeholder:10,onChange:this.change("rulerLength"),value:this.props.rulerLength,useArrowKeys:!0})]})})]})]})}};R.widgetName="measurer",R.propTypes={...c,box:n.arrayOf(n.number),image:n.shape({url:n.string,top:n.number,left:n.number}),showProtractor:n.bool,showRuler:n.bool,rulerLabel:n.string,rulerTicks:n.number,rulerPixels:n.number,rulerLength:n.number},R.defaultProps={box:[480,480],image:{},showProtractor:!0,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10};let ae=R;ae.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"_changeUrl",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"_changeTop",docblock:null,modifiers:[],params:[{name:"newTop",optional:!1,type:null}],returns:null},{name:"_changeLeft",docblock:null,modifiers:[],params:[{name:"newLeft",optional:!1,type:null}],returns:null},{name:"_changeImage",docblock:null,modifiers:[],params:[{name:"subProp",optional:!1,type:null},{name:"newValue",optional:!1,type:null}],returns:null},{name:"renderLabelChoices",docblock:null,modifiers:[],params:[{name:"choices",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MeasurerEditor",props:{box:{defaultValue:{value:"[480, 480]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"number"}},required:!1},image:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"shape",value:{url:{name:"string",required:!1},top:{name:"number",required:!1},left:{name:"number",required:!1}}},required:!1},showProtractor:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},showRuler:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},rulerLabel:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},rulerTicks:{defaultValue:{value:"10",computed:!1},description:"",type:{name:"number"},required:!1},rulerPixels:{defaultValue:{value:"40",computed:!1},description:"",type:{name:"number"},required:!1},rulerLength:{defaultValue:{value:"10",computed:!1},description:"",type:{name:"number"},required:!1}},composes:["@khanacademy/perseus"]};const{NumberInput:ds,TextInput:ms}=f,me=class me extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.updateMolecule=e=>{this.change({smiles:e})},this.updateRotation=e=>{this.change({rotationAngle:e})},this.serialize=()=>d.serialize.call(this)}render(){return a("div",{children:[t("div",{children:a("label",{children:["SMILES: ",t(ms,{onChange:this.updateMolecule,value:this.props.smiles})]})}),t("div",{children:a("label",{children:["Rotation (deg): ",t(ds,{onChange:this.updateRotation,value:this.props.rotationAngle})]})})]})}};me.propTypes={...c,rotationAngle:n.number,smiles:n.string},me.widgetName="molecule-renderer";let re=me;re.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"updateMolecule",docblock:null,modifiers:[],params:[{name:"newValue",optional:!1,type:null}],returns:null},{name:"updateRotation",docblock:null,modifiers:[],params:[{name:"newValue",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MoleculeWidgetEditor",props:{rotationAngle:{description:"",type:{name:"number"},required:!1},smiles:{description:"",type:{name:"string"},required:!1}},composes:["@khanacademy/perseus"]};const{InfoTip:B,TextListEditor:Fe}=f,xe="normal",Be="auto",Te="horizontal",He="vertical",L=class L extends p.Component{constructor(){super(...arguments),this.onOptionsChange=(e,s,r)=>{const i={};i[e]=l.map(s,function(u){return{content:u}}),this.props.onChange(i,r)},this.onLayoutChange=e=>{this.props.onChange({layout:e.target.value})},this.onHeightChange=e=>{this.props.onChange({height:e.target.value})},this.serialize=()=>({options:l.chain(l.pluck(this.props.correctOptions,"content")).union(l.pluck(this.props.otherOptions,"content")).uniq().reject(function(s){return s===""}).sort().sortBy(function(s){return/\d/.test(s)?0:/^\$?[a-zA-Z]+\$?$/.test(s)?2:1}).map(function(s){return{content:s}}).value(),correctOptions:this.props.correctOptions,otherOptions:this.props.otherOptions,height:this.props.height,layout:this.props.layout})}render(){return a("div",{className:"perseus-widget-orderer",children:[a("div",{children:[" ","Correct answer:"," ",t(B,{children:t("p",{children:"Place the cards in the correct order. The same card can be used more than once in the answer but will only be displayed once at the top of a stack of identical cards."})})]}),t(Fe,{options:l.pluck(this.props.correctOptions,"content"),onChange:this.onOptionsChange.bind(this,"correctOptions"),layout:this.props.layout}),a("div",{children:[" ","Other cards:"," ",t(B,{children:t("p",{children:"Create cards that are not part of the answer."})})]}),t(Fe,{options:l.pluck(this.props.otherOptions,"content"),onChange:this.onOptionsChange.bind(this,"otherOptions"),layout:this.props.layout}),a("div",{children:[a("label",{children:[" ","Layout:"," ",a("select",{value:this.props.layout,onChange:this.onLayoutChange,children:[t("option",{value:Te,children:"Horizontal"}),t("option",{value:He,children:"Vertical"})]})]}),t(B,{children:t("p",{children:"Use the horizontal layout for short text and small images. The vertical layout is best for longer text (e.g. proofs)."})})]}),a("div",{children:[a("label",{children:[" ","Height:"," ",a("select",{value:this.props.height,onChange:this.onHeightChange,children:[t("option",{value:xe,children:"Normal"}),t("option",{value:Be,children:"Automatic"})]})]}),t(B,{children:t("p",{children:'Use "Normal" for text, "Automatic" for images.'})})]})]})}};L.propTypes={correctOptions:n.array,otherOptions:n.array,height:n.oneOf([xe,Be]),layout:n.oneOf([Te,He]),onChange:n.func.isRequired},L.widgetName="orderer",L.defaultProps={correctOptions:[{content:"$x$"}],otherOptions:[{content:"$y$"}],height:xe,layout:Te};let ne=L;ne.__docgenInfo={description:"",methods:[{name:"onOptionsChange",docblock:null,modifiers:[],params:[{name:"whichOptions",optional:!1,type:null},{name:"options",optional:!1,type:null},{name:"cb",optional:!1,type:null}],returns:null},{name:"onLayoutChange",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"onHeightChange",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"OrdererEditor",props:{correctOptions:{defaultValue:{value:'[{content: "$x$"}]',computed:!1},description:"",type:{name:"array"},required:!1},otherOptions:{defaultValue:{value:'[{content: "$y$"}]',computed:!1},description:"",type:{name:"array"},required:!1},height:{defaultValue:{value:'"normal"',computed:!1},description:"",type:{name:"enum",value:[{value:'"normal"',computed:!1},{value:'"auto"',computed:!1}]},required:!1},layout:{defaultValue:{value:'"horizontal"',computed:!1},description:"",type:{name:"enum",value:[{value:'"horizontal"',computed:!1},{value:'"vertical"',computed:!1}]},required:!1},onChange:{description:"",type:{name:"func"},required:!0}}};const{InfoTip:Ge}=f,U=class U extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.serialize=()=>d.serialize.call(this)}render(){const e=t(b,{ref:"passage-editor",apiOptions:this.props.apiOptions,content:this.props.passageText,widgetEnabled:!1,placeholder:"Type passage here...",onChange:r=>{this.change({passageText:r.content})},showWordCount:!0}),s=t(b,{ref:"passage-footnotes-editor",apiOptions:this.props.apiOptions,content:this.props.footnotes,widgetEnabled:!1,placeholder:"Type footnotes here...",onChange:r=>{this.change({footnotes:r.content})}});return a("div",{className:"perseus-widget-passage-editor",children:[t("div",{className:"perseus-widget-row",children:t(w,{label:"Show line numbers",checked:this.props.showLineNumbers,onChange:r=>{this.props.onChange({showLineNumbers:r})}})}),a("div",{children:["Passage title:",t(Ge,{children:t("p",{children:"An optional title that will appear directly above the passage in the same font style. (E.g. Passage 1)"})}),t("div",{children:t("input",{type:"text",defaultValue:this.props.passageTitle,onChange:r=>{this.change({passageTitle:r.target.value})}})})]}),a("div",{children:["Passage Text:",e]}),a("div",{children:["Footnotes:",t(Ge,{children:t("p",{children:"To add footnotes, add ^ characters where they belong in the passage. Then, add ^ in the footnotes area to reference the footnotes in the passage."})}),s]})]})}};U.propTypes={...c,passageTitle:n.string,passageText:n.string,footnotes:n.string,showLineNumbers:n.bool},U.widgetName="passage",U.defaultProps={passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0};let ie=U;ie.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PassageEditor",props:{passageTitle:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},passageText:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},footnotes:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},showLineNumbers:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1}},composes:["@khanacademy/perseus"]};const{InfoTip:gs,NumberInput:je,TextInput:fs}=f,D=class D extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.serialize=()=>d.serialize.call(this)}render(){return a("div",{children:[t("div",{children:a("label",{children:["Passage Number: ",t(je,{value:this.props.passageNumber,onChange:this.change("passageNumber")})]})}),t("div",{children:a("label",{children:["Reference Number: ",t(je,{value:this.props.referenceNumber,onChange:this.change("referenceNumber")})]})}),t("div",{children:a("label",{children:["Summary Text: ",t(fs,{value:this.props.summaryText,onChange:this.change("summaryText")}),a(gs,{children:[t("p",{children:"Short summary of the referenced section. This will be included in parentheses and quotes automatically."}),t("p",{children:"Ex: The start ... the end"})]})]})})]})}};D.propTypes={...c,passageNumber:n.number,referenceNumber:n.number,summaryText:n.string},D.widgetName="passage-ref",D.defaultProps={passageNumber:1,referenceNumber:1,summaryText:""};let le=D;le.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PassageRefEditor",props:{passageNumber:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"number"},required:!1},referenceNumber:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"number"},required:!1},summaryText:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1}},composes:["@khanacademy/perseus"]};const M=class M extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.handleContentChange=e=>{this.change({content:e.target.value})},this.serialize=()=>d.serialize.call(this)}render(){return a("div",{children:["Content:",t("input",{type:"text",value:this.props.content,onChange:this.handleContentChange})]})}};M.propTypes={...c,content:n.string},M.widgetName="passage-ref-target",M.defaultProps={content:""};let oe=M;oe.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"handleContentChange",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PassageRefTargetEditor",props:{content:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1}},composes:["@khanacademy/perseus"]};const{InfoTip:k,NumberInput:Ke,RangeInput:ys,TextListEditor:bs}=f,vs=ot.widget,Oe="starting",qe="correct",ws=[Oe,qe];function Ye(o,e,s){const r=l.clone(o);r.length=e;for(let i=o.length;i<e;i++)r[i]=s;return r}const H={scaleY:1,maxY:10,snapsPerLine:2},Je=o=>"$"+ct(o,2)+"$",ge=class ge extends p.Component{constructor(){super(...arguments),this.state={editing:this.props.static?Oe:qe,pic:null,loadedUrl:null,minX:null,maxX:null,tickStep:null},this.fetchPic=e=>{if(this.state.loadedUrl!==e){const s=new Image;s.src=e,s.onload=()=>{this.setState({pic:s,loadedUrl:e})}}},this.handleChangeTickStep=e=>{this.setState({tickStep:e})},this.handleChangeRange=e=>{this.setState({minX:e[0],maxX:e[1]})},this.changeLabelInterval=e=>{this.props.onChange({labelInterval:e})},this.handlePlotterChange=e=>{const s={};s[this.state.editing]=e.values,this.props.onChange(s)},this.changeType=e=>{let s;if(e==="histogram"?(s=[Je(0)].concat(this.props.categories),this.props.onChange({type:e,categories:s})):this.props.type==="histogram"?(s=this.props.categories.slice(1),this.props.onChange({type:e,categories:s})):this.props.onChange({type:e}),s){const r=be.findDOMNode(this.refs.categories);r.value=s.join(", ")}},this.changeLabel=(e,s)=>{const r=l.clone(this.props.labels);r[e]=s.target.value,this.props.onChange({labels:r})},this.changePicUrl=e=>{const s=j.getRealImageUrl(e);this.props.onChange({picUrl:s})},this.changeCategories=e=>{let s=e.length;this.props.type==="histogram"&&s--;const r=this.props.scaleY;this.props.onChange({categories:e,correct:Ye(this.props.correct,s,r),starting:Ye(this.props.starting,s,r)})},this.changeScale=e=>{const s=this.props.scaleY,r=+e.target.value||H.scaleY,i=function(g){return g*r/s},u=i(this.props.maxY);this.props.onChange({scaleY:r,maxY:u,correct:l.map(this.props.correct,i),starting:l.map(this.props.starting,i)}),be.findDOMNode(this.refs.maxY).value=u},this.changeMax=e=>{this.props.onChange({maxY:+e.target.value||H.maxY})},this.changeSnaps=e=>{this.props.onChange({snapsPerLine:+e.target.value||H.snapsPerLine})},this.changeEditing=e=>{this.setState({editing:e})},this.setCategoriesFromScale=()=>{const e=this.state.tickStep||1,s=this.state.minX||0,r=this.state.maxX||0,i=Math.floor((r-s)/e)*e;let u;this.props.type==="histogram"||this.props.type==="dotplot"?u=l.range(0,i+e,e):u=l.range(e,i+e,e),u=l.map(u,m=>m+s),u=l.map(u,Je),this.changeCategories(u);const g=be.findDOMNode(this.refs.categories);g.value=u.join(", ")},this.serialize=()=>{const e=l.pick(this.props,"correct","starting","type","labels","categories","scaleY","maxY","snapsPerLine","labelInterval");return this.props.type==="pic"&&(e.picUrl=this.props.picUrl),e}}UNSAFE_componentWillMount(){this.fetchPic(this.props.picUrl)}UNSAFE_componentWillReceiveProps(e){this.fetchPic(e.picUrl),e.static&&this.setState({editing:"starting"})}render(){const e=l.contains(["line","histogram","dotplot"],this.props.type),s=!l.contains(["pic","dotplot"],this.props.type),r={trackInteraction:()=>{},...this.props};return a("div",{className:"perseus-widget-plotter-editor",children:[a("div",{children:["Chart type:"," ",pt.map(i=>a("label",{children:[t("input",{type:"radio",name:"chart-type",checked:this.props.type===i,onChange:l.partial(this.changeType,i)}),i]},i),this)]}),a("div",{children:["Labels:"," ",["x","y"].map((i,u)=>a("label",{children:[i+":",t("input",{type:"text",onChange:l.partial(this.changeLabel,u),defaultValue:this.props.labels[u]})]},i),this)]}),e&&a("div",{className:"set-from-scale-box",children:[t("span",{className:"categories-title",children:"Set Categories From Scale"}),a("div",{children:[a("label",{children:["Tick Step:"," ",t(Ke,{placeholder:1,useArrowKeys:!0,value:this.state.tickStep,onChange:this.handleChangeTickStep})]}),t(k,{children:t("p",{children:"The difference between adjacent ticks."})})]}),t("div",{children:a("label",{children:["Range:"," ",t(ys,{placeholder:[0,10],useArrowKeys:!0,value:[this.state.minX,this.state.maxX],onChange:this.handleChangeRange})]})}),t("div",{children:a("button",{onClick:this.setCategoriesFromScale,children:["Set Categories"," "]})})]}),a("div",{children:[a("label",{children:["Label Interval:"," ",t(Ke,{useArrowKeys:!0,value:this.props.labelInterval,onChange:this.changeLabelInterval})]}),t(k,{children:t("p",{children:'Which ticks to display the labels for. For instance, setting this to "4" will only show every 4th label (plus the last one)'})})]}),this.props.type==="pic"&&a("div",{children:[a("label",{children:["Picture:"," ",t(y,{className:"pic-url",value:this.props.picUrl,onChange:this.changePicUrl}),t(k,{children:t("p",{children:'Use the default picture of Earth, or insert the URL for a different picture using the "Add image" function.'})})]}),this.state.pic&&this.state.pic.width!==this.state.pic.height&&a("p",{className:"warning",children:[t("b",{children:"Warning"}),": You are using a picture which is not square. This means the image will get distorted. You should probably crop it to be square."]})]}),t("div",{children:a("label",{children:["Categories:"," ",t(bs,{ref:"categories",layout:"horizontal",options:this.props.categories,onChange:this.changeCategories})]})}),t("div",{children:a("label",{children:["Scale (y):"," ",t("input",{type:"text",onChange:this.changeScale,defaultValue:this.props.scaleY})]})}),t("div",{children:a("label",{children:["Max y:"," ",t("input",{type:"text",ref:"maxY",onChange:this.changeMax,defaultValue:this.props.maxY})]})}),s&&a("div",{children:[a("label",{children:["Snaps per line:"," ",t("input",{type:"text",onChange:this.changeSnaps,defaultValue:this.props.snapsPerLine})]}),t(k,{children:t("p",{children:"Creates the specified number of divisions between the horizontal lines. Fewer snaps between lines makes the graph easier for the student to create correctly."})})]}),a("div",{children:["Editing values:"," ",ws.map(i=>a("label",{children:[t("input",{type:"radio",disabled:i===qe&&this.props.static,checked:this.props.static?i===Oe:this.state.editing===i,onChange:u=>this.changeEditing(i)}),i]},i)),a(k,{children:[t("p",{children:"Use this toggle to switch between editing the correct answer (what the student will be graded on) and the starting values (what the student will see plotted when they start the problem). Note: These cannot be the same."}),t("p",{children:"In static mode, the starting values are rendered out to the displayed widget."})]})]}),t(vs,{...r,starting:this.props[this.state.editing],onChange:this.handlePlotterChange})]})}};ge.widgetName="plotter",ge.defaultProps={...H,correct:[1],starting:[1],type:"bar",labels:["",""],categories:[""],picSize:30,picBoxHeight:36,plotDimensions:[275,200],labelInterval:1,get picUrl(){const e=et().staticUrl;return e?e("/images/badges/earth-small.png"):null}};let pe=ge;pe.__docgenInfo={description:"",methods:[{name:"fetchPic",docblock:null,modifiers:[],params:[{name:"url",optional:!1,type:null}],returns:null},{name:"handleChangeTickStep",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null}],returns:null},{name:"handleChangeRange",docblock:null,modifiers:[],params:[{name:"newValue",optional:!1,type:null}],returns:null},{name:"changeLabelInterval",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null}],returns:null},{name:"handlePlotterChange",docblock:null,modifiers:[],params:[{name:"newProps",optional:!1,type:null}],returns:null},{name:"changeType",docblock:null,modifiers:[],params:[{name:"type",optional:!1,type:null}],returns:null},{name:"changeLabel",docblock:null,modifiers:[],params:[{name:"i",optional:!1,type:null},{name:"e",optional:!1,type:null}],returns:null},{name:"changePicUrl",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null}],returns:null},{name:"changeCategories",docblock:null,modifiers:[],params:[{name:"categories",optional:!1,type:null}],returns:null},{name:"changeScale",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"changeMax",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"changeSnaps",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"changeEditing",docblock:null,modifiers:[],params:[{name:"editing",optional:!1,type:null}],returns:null},{name:"setCategoriesFromScale",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PlotterEditor",props:{type:{required:!1,tsType:{name:'PerseusPlotterWidgetOptions["type"]',raw:'PerseusPlotterWidgetOptions["type"]'},description:"",defaultValue:{value:'"bar"',computed:!1}},labels:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},description:"",defaultValue:{value:'["", ""]',computed:!1}},categories:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]}],raw:"ReadonlyArray<string | number>"},description:"",defaultValue:{value:'[""]',computed:!1}},scaleY:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},maxY:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10",computed:!1}},snapsPerLine:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}},picSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"30",computed:!1}},picBoxHeight:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"36",computed:!1}},picUrl:{required:!0,tsType:{name:"string"},description:""},plotDimensions:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>"},description:"",defaultValue:{value:"[275, 200]",computed:!1}},labelInterval:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},starting:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>"},description:"",defaultValue:{value:"[1]",computed:!1}},correct:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>"},description:"",defaultValue:{value:"[1]",computed:!1}},static:{required:!0,tsType:{name:"boolean"},description:""},onChange:{required:!0,tsType:{name:"any"},description:""}}};class Cs extends p.Component{constructor(){super(...arguments),this.focus=()=>(this.refs.input.focus(),!0),this.changeValue=e=>{this.props.onChange(e.target.value)}}render(){return t("textarea",{ref:"input",value:this.props.value||"",onChange:this.changeValue})}}const _=class _ extends p.Component{constructor(){super(...arguments),this.input=p.createRef(),this.change=(...e)=>h.apply(this,e),this.focus=()=>{var e;return(e=this.input.current)==null||e.focus(),!0},this.serialize=()=>d.serialize.call(this)}render(){return t("div",{children:a("label",{children:[t("div",{children:"Simple markdown contents:"}),t("div",{children:t(Cs,{value:this.props.value,onChange:this.change("value"),ref:this.input})})]})})}};_.propTypes={...c},_.widgetName="simple-markdown-tester",_.defaultProps={value:""};let ue=_;ue.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"focus",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"SimpleMarkdownTesterEditor",props:{value:{defaultValue:{value:'""',computed:!1},required:!1}},composes:["@khanacademy/perseus"]};const{InfoTip:xs,NumberInput:Xe}=f,Ts=ut.widget,W=class W extends p.Component{constructor(){super(...arguments),this.numberOfColumns=p.createRef(),this.focus=()=>{var e;(e=this.numberOfColumns.current)==null||e.focus()},this.onSizeInput=(e,s)=>{let r=+e||0,i=+s||0;r=Math.min(Math.max(1,r),30),i=Math.min(Math.max(1,i),6);const u=this.props.columns,g=this.props.rows,m=this.props.answers;r<=g?m.length=r:l(r-g).times(function(){m.push(j.stringArrayOfSize(u))});function v(Ue){i<=u?Ue.length=i:l(i-u).times(function(){Ue.push("")})}const Le=this.props.headers;v(Le),l.each(m,v),this.props.onChange({rows:r,columns:i,answers:m,headers:Le})},this.serialize=()=>{const e=l.pick(this.props,"headers","rows","columns");return l.extend({},e,{answers:l.map(this.props.answers,l.clone)})}}render(){const e=l.pick(this.props,"headers","answers","onChange","apiOptions");return l.extend(e,{editableHeaders:!0,Editor:b,onFocus:()=>{},onBlur:()=>{},trackInteraction:()=>{}}),a("div",{children:[t("div",{className:"perseus-widget-row",children:a("label",{children:["Number of columns:"," ",t(Xe,{ref:this.numberOfColumns,value:this.props.columns,onChange:s=>{s&&this.onSizeInput(this.props.rows,s)},useArrowKeys:!0})]})}),t("div",{className:"perseus-widget-row",children:a("label",{children:["Number of rows:"," ",t(Xe,{ref:"numberOfRows",value:this.props.rows,onChange:s=>{s&&this.onSizeInput(s,this.props.columns)},useArrowKeys:!0})]})}),a("div",{children:[" ","Table of answers:"," ",t(xs,{children:t("p",{children:"The student has to fill out all cells in the table. For partially filled tables create a table using the template, and insert text input boxes as desired."})})]}),t("div",{children:t(Ts,{...e})})]})}};W.propTypes={rows:n.number,columns:n.number,headers:n.arrayOf(n.string),answers:n.arrayOf(n.arrayOf(n.string))},W.widgetName="table",W.defaultProps=function(){const r=l(4).times(function(){return j.stringArrayOfSize(1)});return{headers:[""],rows:4,columns:1,answers:r}}();let he=W;he.__docgenInfo={description:"",methods:[{name:"focus",docblock:null,modifiers:[],params:[],returns:null},{name:"onSizeInput",docblock:null,modifiers:[],params:[{name:"numRawRows",optional:!1,type:null},{name:"numRawColumns",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"TableEditor",props:{rows:{description:"",type:{name:"number"},required:!1},columns:{description:"",type:{name:"number"},required:!1},headers:{description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},answers:{description:"",type:{name:"arrayOf",value:{name:"arrayOf",value:{name:"string"}}},required:!1}}};const{InfoTip:ks}=f,Ns=/khanacademy\.org\/.*\/v\/(.*)$/;function Ss(o){const e=Ns.exec(o);return e?e[1]:o}const $=class $ extends p.Component{constructor(){super(...arguments),this._handleUrlChange=e=>{this.props.onChange({location:Ss(e)})},this.change=(...e)=>h.apply(this,e),this.serialize=()=>d.serialize.call(this)}render(){return t("div",{children:a("label",{children:["KA Video Slug:"," ",t(y,{value:this.props.location,style:{width:290},onChange:this._handleUrlChange}),t(ks,{children:"KA video URLs will be converted to just the slug."})]})})}};$.propTypes={...c,location:n.string,onChange:n.func},$.widgetName="video",$.defaultProps={location:""};let ce=$;ce.__docgenInfo={description:"This is the main editor for this widget, to specify all the options.",methods:[{name:"_handleUrlChange",docblock:null,modifiers:[],params:[{name:"url",optional:!1,type:null}],returns:null},{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"VideoEditor",props:{location:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},onChange:{description:"",type:{name:"func"},required:!1}},composes:["@khanacademy/perseus"]};const Is=[wt,K,xt,Tt,J,X,kt,Nt,C,Z,Q,ee,te,Ot,qt,Pt,zt,Vt,At,se,ae,re,Rt,Lt,ne,ie,le,oe,Ut,pe,Dt,ue,_t,he,ce,Mt,Y];class Os extends p.Component{constructor(){super(...arguments),this.input=p.createRef(),this.focus=()=>{var e;return(e=this.input.current)==null||e.focus(),!0},this.changeValue=e=>{this.props.onChange(e.target.value)}}render(){return t("input",{ref:this.input,value:this.props.value||"",onChange:this.changeValue})}}const fe=class fe extends p.Component{constructor(){super(...arguments),this.input=p.createRef(),this.change=(...e)=>h.apply(this,e),this.getUserInput=()=>this.props.value,this.focus=()=>{var e;return(e=this.input.current)==null||e.focus(),!0},this.simpleValidate=e=>fe.validate(this.getUserInput(),e)}static validate(e,s){return e===""?{type:"invalid",message:"It looks like you haven't answered all of the question yet."}:e===s.correct?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}}render(){return t(Os,{ref:this.input,value:this.props.value,onChange:this.change("value")})}};fe.defaultProps={value:""};let Pe=fe;const qs={name:"example-widget",displayName:"Example Widget",defaultAlignment:"inline-block",hidden:!0,widget:Pe},Ps=Qe.parse,zs=Qe.basicOutput,ye=class ye extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.toJSON=()=>({}),this.focus=()=>(this.refs.input.focus(),!0),this.simpleValidate=e=>ye.validate(this.toJSON(),e)}static validate(e,s){return{type:"points",earned:0,total:0,message:null}}render(){const e=Ps(this.props.value),s=zs(e);return t("div",{children:s})}};ye.defaultProps={value:""};let ze=ye;const Vs={name:"simple-markdown-tester",displayName:"Simple Markdown Tester",hidden:!0,widget:ze,transform:l.identity},As=[st,qs,Vs],Rs=[...ht,...As],_a=()=>{gt(Rs),ft(Is),yt(),bt()};export{Rs as A,Wt as I,Ma as J,Is as a,_a as r};
