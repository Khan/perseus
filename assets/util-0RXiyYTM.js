import{_ as I}from"./index-default-4_ZsnO94.js";import{P as W,E as z}from"./perseus-error-OpXxk17X.js";import{p as K,c as dn}from"./compare-59FC1ybr.js";import{_ as S}from"./index-V35CFGao.js";import{$ as O}from"./jquery-5v7aFUvu.js";import{a as Dn}from"./version-akiLXZts.js";import{c as Ln,g as $n}from"./_commonjsHelpers-4gQjN7DL.js";const Cn="@khanacademy/kmath",Gn="__lib_version__";Dn(Cn,Gn);var B={exports:{}};(function(e,r){(function(){var a=this,l=a._,p={},c=Array.prototype,f=Object.prototype,h=Function.prototype,M=c.push,g=c.slice,w=c.concat,y=f.toString,F=f.hasOwnProperty,A=c.forEach,C=c.map,G=c.reduce,en=c.reduceRight,tn=c.filter,rn=c.every,un=c.some,q=c.indexOf,an=c.lastIndexOf,On=Array.isArray,Tn=Object.keys,V=h.bind,i=function(n){if(n instanceof i)return n;if(!(this instanceof i))return new i(n);this._wrapped=n};e.exports&&(r=e.exports=i),r._=i,i.VERSION="1.4.4";var R=i.each=i.forEach=function(n,t,u){if(n!=null){if(A&&n.forEach===A)n.forEach(t,u);else if(n.length===+n.length){for(var s=0,o=n.length;s<o;s++)if(t.call(u,n[s],s,n)===p)return}else for(var m in n)if(i.has(n,m)&&t.call(u,n[m],m,n)===p)return}};i.map=i.collect=function(n,t,u){var s=[];return n==null?s:C&&n.map===C?n.map(t,u):(R(n,function(o,m,d){s[s.length]=t.call(u,o,m,d)}),s)};var sn="Reduce of empty array with no initial value";i.reduce=i.foldl=i.inject=function(n,t,u,s){var o=arguments.length>2;if(n==null&&(n=[]),G&&n.reduce===G)return s&&(t=i.bind(t,s)),o?n.reduce(t,u):n.reduce(t);if(R(n,function(m,d,v){o?u=t.call(s,u,m,d,v):(u=m,o=!0)}),!o)throw new TypeError(sn);return u},i.reduceRight=i.foldr=function(n,t,u,s){var o=arguments.length>2;if(n==null&&(n=[]),en&&n.reduceRight===en)return s&&(t=i.bind(t,s)),o?n.reduceRight(t,u):n.reduceRight(t);var m=n.length;if(m!==+m){var d=i.keys(n);m=d.length}if(R(n,function(v,E,T){E=d?d[--m]:--m,o?u=t.call(s,u,n[E],E,T):(u=n[E],o=!0)}),!o)throw new TypeError(sn);return u},i.find=i.detect=function(n,t,u){var s;return cn(n,function(o,m,d){if(t.call(u,o,m,d))return s=o,!0}),s},i.filter=i.select=function(n,t,u){var s=[];return n==null?s:tn&&n.filter===tn?n.filter(t,u):(R(n,function(o,m,d){t.call(u,o,m,d)&&(s[s.length]=o)}),s)},i.reject=function(n,t,u){return i.filter(n,function(s,o,m){return!t.call(u,s,o,m)},u)},i.every=i.all=function(n,t,u){t||(t=i.identity);var s=!0;return n==null?s:rn&&n.every===rn?n.every(t,u):(R(n,function(o,m,d){if(!(s=s&&t.call(u,o,m,d)))return p}),!!s)};var cn=i.some=i.any=function(n,t,u){t||(t=i.identity);var s=!1;return n==null?s:un&&n.some===un?n.some(t,u):(R(n,function(o,m,d){if(s||(s=t.call(u,o,m,d)))return p}),!!s)};i.contains=i.include=function(n,t){return n==null?!1:q&&n.indexOf===q?n.indexOf(t)!=-1:cn(n,function(u){return u===t})},i.invoke=function(n,t){var u=g.call(arguments,2),s=i.isFunction(t);return i.map(n,function(o){return(s?t:o[t]).apply(o,u)})},i.pluck=function(n,t){return i.map(n,function(u){return u[t]})},i.where=function(n,t,u){return i.isEmpty(t)?u?null:[]:i[u?"find":"filter"](n,function(s){for(var o in t)if(t[o]!==s[o])return!1;return!0})},i.findWhere=function(n,t){return i.where(n,t,!0)},i.max=function(n,t,u){if(!t&&i.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);if(!t&&i.isEmpty(n))return-1/0;var s={computed:-1/0,value:-1/0};return R(n,function(o,m,d){var v=t?t.call(u,o,m,d):o;v>=s.computed&&(s={value:o,computed:v})}),s.value},i.min=function(n,t,u){if(!t&&i.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);if(!t&&i.isEmpty(n))return 1/0;var s={computed:1/0,value:1/0};return R(n,function(o,m,d){var v=t?t.call(u,o,m,d):o;v<s.computed&&(s={value:o,computed:v})}),s.value},i.shuffle=function(n){var t,u=0,s=[];return R(n,function(o){t=i.random(u++),s[u-1]=s[t],s[t]=o}),s};var X=function(n){return i.isFunction(n)?n:function(t){return t[n]}};i.sortBy=function(n,t,u){var s=X(t);return i.pluck(i.map(n,function(o,m,d){return{value:o,index:m,criteria:s.call(u,o,m,d)}}).sort(function(o,m){var d=o.criteria,v=m.criteria;if(d!==v){if(d>v||d===void 0)return 1;if(d<v||v===void 0)return-1}return o.index<m.index?-1:1}),"value")};var ln=function(n,t,u,s){var o={},m=X(t||i.identity);return R(n,function(d,v){var E=m.call(u,d,v,n);s(o,E,d)}),o};i.groupBy=function(n,t,u){return ln(n,t,u,function(s,o,m){(i.has(s,o)?s[o]:s[o]=[]).push(m)})},i.countBy=function(n,t,u){return ln(n,t,u,function(s,o){i.has(s,o)||(s[o]=0),s[o]++})},i.sortedIndex=function(n,t,u,s){u=u==null?i.identity:X(u);for(var o=u.call(s,t),m=0,d=n.length;m<d;){var v=m+d>>>1;u.call(s,n[v])<o?m=v+1:d=v}return m},i.toArray=function(n){return n?i.isArray(n)?g.call(n):n.length===+n.length?i.map(n,i.identity):i.values(n):[]},i.size=function(n){return n==null?0:n.length===+n.length?n.length:i.keys(n).length},i.first=i.head=i.take=function(n,t,u){if(n!=null)return t!=null&&!u?g.call(n,0,t):n[0]},i.initial=function(n,t,u){return g.call(n,0,n.length-(t==null||u?1:t))},i.last=function(n,t,u){if(n!=null)return t!=null&&!u?g.call(n,Math.max(n.length-t,0)):n[n.length-1]},i.rest=i.tail=i.drop=function(n,t,u){return g.call(n,t==null||u?1:t)},i.compact=function(n){return i.filter(n,i.identity)};var on=function(n,t,u){return R(n,function(s){i.isArray(s)?t?M.apply(u,s):on(s,t,u):u.push(s)}),u};i.flatten=function(n,t){return on(n,t,[])},i.without=function(n){return i.difference(n,g.call(arguments,1))},i.uniq=i.unique=function(n,t,u,s){i.isFunction(t)&&(s=u,u=t,t=!1);var o=u?i.map(n,u,s):n,m=[],d=[];return R(o,function(v,E){(t?!E||d[d.length-1]!==v:!i.contains(d,v))&&(d.push(v),m.push(n[E]))}),m},i.union=function(){return i.uniq(w.apply(c,arguments))},i.intersection=function(n){var t=g.call(arguments,1);return i.filter(i.uniq(n),function(u){return i.every(t,function(s){return i.indexOf(s,u)>=0})})},i.difference=function(n){var t=w.apply(c,g.call(arguments,1));return i.filter(n,function(u){return!i.contains(t,u)})},i.zip=function(){for(var n=g.call(arguments),t=i.max(i.pluck(n,"length")),u=new Array(t),s=0;s<t;s++)u[s]=i.pluck(n,""+s);return u},i.object=function(n,t){if(n==null)return{};for(var u={},s=0,o=n.length;s<o;s++)t?u[n[s]]=t[s]:u[n[s][0]]=n[s][1];return u},i.indexOf=function(n,t,u){if(n==null)return-1;var s=0,o=n.length;if(u)if(typeof u=="number")s=u<0?Math.max(0,o+u):u;else return s=i.sortedIndex(n,t),n[s]===t?s:-1;if(q&&n.indexOf===q)return n.indexOf(t,u);for(;s<o;s++)if(n[s]===t)return s;return-1},i.lastIndexOf=function(n,t,u){if(n==null)return-1;var s=u!=null;if(an&&n.lastIndexOf===an)return s?n.lastIndexOf(t,u):n.lastIndexOf(t);for(var o=s?u:n.length;o--;)if(n[o]===t)return o;return-1},i.range=function(n,t,u){arguments.length<=1&&(t=n||0,n=0),u=arguments[2]||1;for(var s=Math.max(Math.ceil((t-n)/u),0),o=0,m=new Array(s);o<s;)m[o++]=n,n+=u;return m},i.bind=function(n,t){if(n.bind===V&&V)return V.apply(n,g.call(arguments,1));var u=g.call(arguments,2);return function(){return n.apply(t,u.concat(g.call(arguments)))}},i.partial=function(n){var t=g.call(arguments,1);return function(){return n.apply(this,t.concat(g.call(arguments)))}},i.bindAll=function(n){var t=g.call(arguments,1);return t.length===0&&(t=i.functions(n)),R(t,function(u){n[u]=i.bind(n[u],n)}),n},i.memoize=function(n,t){var u={};return t||(t=i.identity),function(){var s=t.apply(this,arguments);return i.has(u,s)?u[s]:u[s]=n.apply(this,arguments)}},i.delay=function(n,t){var u=g.call(arguments,2);return setTimeout(function(){return n.apply(null,u)},t)},i.defer=function(n){return i.delay.apply(i,[n,1].concat(g.call(arguments,1)))},i.throttle=function(n,t){var u,s,o,m,d=0,v=function(){d=new Date,o=null,m=n.apply(u,s)};return function(){var E=new Date,T=t-(E-d);return u=this,s=arguments,T<=0?(clearTimeout(o),o=null,d=E,m=n.apply(u,s)):o||(o=setTimeout(v,T)),m}},i.debounce=function(n,t,u){var s,o;return function(){var m=this,d=arguments,v=function(){s=null,u||(o=n.apply(m,d))},E=u&&!s;return clearTimeout(s),s=setTimeout(v,t),E&&(o=n.apply(m,d)),o}},i.once=function(n){var t=!1,u;return function(){return t||(t=!0,u=n.apply(this,arguments),n=null),u}},i.wrap=function(n,t){return function(){var u=[n];return M.apply(u,arguments),t.apply(this,u)}},i.compose=function(){var n=arguments;return function(){for(var t=arguments,u=n.length-1;u>=0;u--)t=[n[u].apply(this,t)];return t[0]}},i.after=function(n,t){return n<=0?t():function(){if(--n<1)return t.apply(this,arguments)}},i.keys=Tn||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var u in n)i.has(n,u)&&(t[t.length]=u);return t},i.values=function(n){var t=[];for(var u in n)i.has(n,u)&&t.push(n[u]);return t},i.pairs=function(n){var t=[];for(var u in n)i.has(n,u)&&t.push([u,n[u]]);return t},i.invert=function(n){var t={};for(var u in n)i.has(n,u)&&(t[n[u]]=u);return t},i.functions=i.methods=function(n){var t=[];for(var u in n)i.isFunction(n[u])&&t.push(u);return t.sort()},i.extend=function(n){return R(g.call(arguments,1),function(t){if(t)for(var u in t)n[u]=t[u]}),n},i.pick=function(n){var t={},u=w.apply(c,g.call(arguments,1));return R(u,function(s){s in n&&(t[s]=n[s])}),t},i.omit=function(n){var t={},u=w.apply(c,g.call(arguments,1));for(var s in n)i.contains(u,s)||(t[s]=n[s]);return t},i.defaults=function(n){return R(g.call(arguments,1),function(t){if(t)for(var u in t)n[u]==null&&(n[u]=t[u])}),n},i.clone=function(n){return i.isObject(n)?i.isArray(n)?n.slice():i.extend({},n):n},i.tap=function(n,t){return t(n),n};var Y=function(n,t,u,s){if(n===t)return n!==0||1/n==1/t;if(n==null||t==null)return n===t;n instanceof i&&(n=n._wrapped),t instanceof i&&(t=t._wrapped);var o=y.call(n);if(o!=y.call(t))return!1;switch(o){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:n==0?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if(typeof n!="object"||typeof t!="object")return!1;for(var m=u.length;m--;)if(u[m]==n)return s[m]==t;u.push(n),s.push(t);var d=0,v=!0;if(o=="[object Array]"){if(d=n.length,v=d==t.length,v)for(;d--&&(v=Y(n[d],t[d],u,s)););}else{var E=n.constructor,T=t.constructor;if(E!==T&&!(i.isFunction(E)&&E instanceof E&&i.isFunction(T)&&T instanceof T))return!1;for(var N in n)if(i.has(n,N)&&(d++,!(v=i.has(t,N)&&Y(n[N],t[N],u,s))))break;if(v){for(N in t)if(i.has(t,N)&&!d--)break;v=!d}}return u.pop(),s.pop(),v};i.isEqual=function(n,t){return Y(n,t,[],[])},i.isEmpty=function(n){if(n==null)return!0;if(i.isArray(n)||i.isString(n))return n.length===0;for(var t in n)if(i.has(n,t))return!1;return!0},i.isElement=function(n){return!!(n&&n.nodeType===1)},i.isArray=On||function(n){return y.call(n)=="[object Array]"},i.isObject=function(n){return n===Object(n)},R(["Arguments","Function","String","Number","Date","RegExp"],function(n){i["is"+n]=function(t){return y.call(t)=="[object "+n+"]"}}),i.isArguments(arguments)||(i.isArguments=function(n){return!!(n&&i.has(n,"callee"))}),typeof/./!="function"&&(i.isFunction=function(n){return typeof n=="function"}),i.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},i.isNaN=function(n){return i.isNumber(n)&&n!=+n},i.isBoolean=function(n){return n===!0||n===!1||y.call(n)=="[object Boolean]"},i.isNull=function(n){return n===null},i.isUndefined=function(n){return n===void 0},i.has=function(n,t){return F.call(n,t)},i.noConflict=function(){return a._=l,this},i.identity=function(n){return n},i.times=function(n,t,u){for(var s=Array(n),o=0;o<n;o++)s[o]=t.call(u,o);return s},i.random=function(n,t){return t==null&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var L={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};L.unescape=i.invert(L.escape);var Nn={escape:new RegExp("["+i.keys(L.escape).join("")+"]","g"),unescape:new RegExp("("+i.keys(L.unescape).join("|")+")","g")};i.each(["escape","unescape"],function(n){i[n]=function(t){return t==null?"":(""+t).replace(Nn[n],function(u){return L[n][u]})}}),i.result=function(n,t){if(n==null)return null;var u=n[t];return i.isFunction(u)?u.call(n):u},i.mixin=function(n){R(i.functions(n),function(t){var u=i[t]=n[t];i.prototype[t]=function(){var s=[this._wrapped];return M.apply(s,arguments),J.call(this,u.apply(i,s))}})};var Pn=0;i.uniqueId=function(n){var t=++Pn+"";return n?n+t:t},i.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,An={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},Sn=/\\|'|\r|\n|\t|\u2028|\u2029/g;i.template=function(n,t,u){var s;u=i.defaults({},u,i.templateSettings);var o=new RegExp([(u.escape||H).source,(u.interpolate||H).source,(u.evaluate||H).source].join("|")+"|$","g"),m=0,d="__p+='";n.replace(o,function(E,T,N,fn,pn){return d+=n.slice(m,pn).replace(Sn,function(xn){return"\\"+An[xn]}),T&&(d+=`'+
((__t=(`+T+`))==null?'':_.escape(__t))+
'`),N&&(d+=`'+
((__t=(`+N+`))==null?'':__t)+
'`),fn&&(d+=`';
`+fn+`
__p+='`),m=pn+E.length,E}),d+=`';
`,u.variable||(d=`with(obj||{}){
`+d+`}
`),d=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+d+`return __p;
`;try{s=new Function(u.variable||"obj","_",d)}catch(E){throw E.source=d,E}if(t)return s(t,i);var v=function(E){return s.call(this,E,i)};return v.source="function("+(u.variable||"obj")+`){
`+d+"}",v},i.chain=function(n){return i(n).chain()};var J=function(n){return this._chain?i(n).chain():n};i.mixin(i),R(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=c[n];i.prototype[n]=function(){var u=this._wrapped;return t.apply(u,arguments),(n=="shift"||n=="splice")&&u.length===0&&delete u[0],J.call(this,u)}}),R(["concat","join","slice"],function(n){var t=c[n];i.prototype[n]=function(){return J.call(this,t.apply(this._wrapped,arguments))}}),i.extend(i.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(Ln)})(B,B.exports);var qn=B.exports;const hn=$n(qn),Un=1e-9,Wn=Math.pow(2,-42);function xe(e){return hn.isNumber(e)&&!hn.isNaN(e)}function $(e,r,a){return e==null||r==null?e===r:e===r?!0:(a==null&&(a=Un),Math.abs(e-r)<a)}function De(e,r){return $(e,0,r)?0:Math.abs(e)/e}function zn(e,r){return $(Math.round(e),e,r)}function Le(e,r){const a=Math.pow(10,r);return Math.round(e*a)/a}function $e(e,r){return Math.round(e/r)*r}function Ce(e,r){return Math.floor(e/r)*r}function Ge(e,r){return Math.ceil(e/r)*r}function gn(e,r=Wn,a=1e3){let l=[1,0],p=[0,1],c=Math.floor(e),f=e-c;for(;p[0]<=a;){if($(l[0]/p[0],e,r))return[l[0],p[0]];l=[c*l[0]+l[1],l[0]],p=[c*p[0]+p[1],p[0]],c=Math.floor(1/f),f=1/f-c}return[e,1]}const _={cleanMath:function(e){return typeof e=="string"?e.replace(/\+\s*-/g,"- ").replace(/-\s*-/g,"+ ").replace(/\^1/g,""):e},bound:function(e){return e===0?e:e<0?-_.bound(-e):Math.max(1e-6,Math.min(e,1e20))},factorial:function(e){return e<=1?e:e*_.factorial(e-1)},getGCD:function(e,r){if(arguments.length>2){const l=[].slice.call(arguments,1);return _.getGCD(e,_.getGCD(...l))}let a;for(e=Math.abs(e),r=Math.abs(r);r;)a=e%r,e=r,r=a;return e},getLCM:function(e,r){if(arguments.length>2){const a=[].slice.call(arguments,1);return _.getLCM(e,_.getLCM(...a))}return Math.abs(e*r)/_.getGCD(e,r)},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],isPrime:function(e){if(e<=1)return!1;if(e<101)return!!O.grep(_.primes,function(r,a){return Math.abs(r-e)<=.5}).length;if(e<=1||e>2&&e%2===0)return!1;for(let r=3,a=Math.sqrt(e);r<=a;r+=2)if(e%r===0)return!1;return!0},getPrimeFactorization:function(e){if(e===1)return[];if(_.isPrime(e))return[e];const r=Math.sqrt(e);for(let a=2;a<=r;a++)if(e%a===0)return O.merge(_.getPrimeFactorization(a),_.getPrimeFactorization(e/a))},roundToNearest:function(e,r){return Math.round(r/e)*e},roundTo:function(e,r){const a=Math.pow(10,e).toFixed(5);return Math.round((r*a).toFixed(5))/a},toFixedApprox:function(e,r){const a=e.toFixed(r);return $(+a,e)?a:"\\approx "+a},roundToApprox:function(e,r){const a=_.roundTo(r,e);return $(a,e)?String(a):_.toFixedApprox(e,r)},toFraction:function(e,r){if(r==null&&(r=Math.pow(2,-46)),e<0||e>1){let M=e%1;M+=M<0?1:0;const g=_.toFraction(M,r);return g[0]+=Math.round(e-M)*g[1],g}if(Math.abs(Math.round(Number(e))-e)<=r)return[Math.round(e),1];let a=0,l=1,p=1,c=1,f=1,h=2;for(;;){if(Math.abs(Number(f/h)-e)<=r)return[f,h];f/h<e?(a=f,l=h):(p=f,c=h),f=a+p,h=l+c}},getNumericFormat:function(e){if(e=O.trim(e),e=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1"),e.match(/^[+-]?\d+$/))return"integer";if(e.match(/^[+-]?\d+\s+\d+\s*\/\s*\d+$/))return"mixed";const r=e.match(/^[+-]?(\d+)\s*\/\s*(\d+)$/);return r?parseFloat(r[1])>parseFloat(r[2])?"improper":"proper":e.replace(/[,. ]/g,"").match(/^\d+$/)?"decimal":e.match(/(pi?|\u03c0|t(?:au)?|\u03c4|pau)/)?"pi":null},toNumericString:function(e,r){if(e==null)return"";if(e===0)return"0";if(r==="percent")return e*100+"%";if(r==="pi"){const a=gn(e/Math.PI),l=Math.abs(a[0]),p=a[1];if(zn(l))return(e<0?"-":"")+(l===1?"":l)+"π"+(p===1?"":"/"+p)}if(I(["proper","improper","mixed","fraction"]).contains(r)){const a=gn(e),l=Math.abs(a[0]),p=a[1],c=e<0?"-":"";if(p===1)return c+l;if(r==="mixed"){const f=l%p,h=(l-f)/p;return c+(h?h+" ":"")+f+"/"+p}return c+l+"/"+p}return String(e)}};function qe(e){return e.reduce(Vn,0)}function Vn(e,r){return e+r}const Xn=Math.pow(2,-42),x={APPROXIMATED_PI_ERROR:S("Your answer is close, but you may have approximated pi. Enter your answer as a multiple of pi, like <code>12\\ \\text{pi}</code> or <code>2/3\\ \\text{pi}</code>"),EXTRA_SYMBOLS_ERROR:S("We could not understand your answer. Please check your answer for extra text or symbols."),NEEDS_TO_BE_SIMPLFIED_ERROR:S("Your answer is almost correct, but it needs to be simplified."),MISSING_PERCENT_ERROR:S("Your answer is almost correct, but it is missing a <code>\\%</code> at the end."),MULTIPLICATION_SIGN_ERROR:S("I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign."),WRONG_CASE_ERROR:S("Your answer includes use of a variable with the wrong case."),WRONG_LETTER_ERROR:S("Your answer includes a wrong variable letter.")},D={predicate:{defaultForms:"integer, proper, improper, mixed, decimal",createValidatorFunctional:function(e,r){r=I.extend({simplify:"required",ratio:!1,forms:D.predicate.defaultForms},r);let a;I.isArray(r.forms)?a=r.forms:a=r.forms.split(/\s*,\s*/),r.inexact===void 0&&(r.maxError=0),r.maxError=+r.maxError+Xn,I.contains(a,"percent")&&(a=I.without(a,"percent"),a.push("percent"));const l=function(c){c=c.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").replace(/(^\s*)|(\s*$)/gi,"");const f=c.match(/^([+-]?\d+)\s*\/\s*([+-]?\d+)$/),h=c.match(/^([+-]?)\\frac\{([+-]?\d+)\}\{([+-]?\d+)\}$/),M=parseInt(c,10);if(f||h){let g,w,y=!0;return f?(g=parseFloat(f[1]),w=parseFloat(f[2])):(g=parseFloat(h[2]),h[1]==="-"&&(g<0&&(y=!1),g=-g),w=parseFloat(h[3])),y=y&&w>0&&(r.ratio||w!==1)&&_.getGCD(g,w)===1,[{value:g/w,exact:y}]}return!isNaN(M)&&""+M===c?[{value:M,exact:!0}]:[]},p={integer:function(c){const f=p.decimal(c),h=p.decimal(c,1);return f[0].value!=null&&f[0].value===h[0].value||f[1].value!=null&&f[1].value===h[1].value?f:[]},proper:function(c){return O.map(l(c),function(f){return Math.abs(f.value)<1?[f]:[]})},improper:function(c){return O.map(l(c),function(f){return Math.abs(f.value)>=1?[f]:[]})},pi:function(c){let f,h=[];if(c=c.replace(/\u2212/,"-"),f=c.match(/^([+-]?)\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))h=[{value:parseFloat(f[1]+"1"),exact:!0}];else if(f=c.match(/^([+-]?\s*\d+\s*(?:\/\s*[+-]?\s*\d+)?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))h=l(f[1]);else if(f=c.match(/^([+-]?)\s*(\d+)\s*([+-]?\d+)\s*\/\s*([+-]?\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i)){const g=parseFloat(f[1]+"1"),w=parseFloat(f[2]),y=parseFloat(f[3]),F=parseFloat(f[4]),A=y<F&&_.getGCD(y,F)===1;h=[{value:g*(w+y/F),exact:A}]}else if(f=c.match(/^([+-]?\s*\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\s*\d+))?$/i))h=l(f[1]+"/"+f[3]);else if(f=c.match(/^([+-]?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\d+))?$/i))h=l(f[1]+"1/"+f[3]);else if(c==="0")h=[{value:0,exact:!0}];else if(f=c.match(/^(.+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))h=p.decimal(f[1]);else{h=I.reduce(D.predicate.defaultForms.split(/\s*,\s*/),function(y,F){return y.concat(p[F](c))},[]);let g=!1;const w=parseFloat(c);if(!isNaN(w)&&w!==parseInt(c)){const y=Math.PI/12,F=y*Math.round(w/y);Math.abs(w-F)<.01&&(g=!0)}else c.match(/\/\s*7/)&&(g=!0);return g&&I.each(h,function(y){y.piApprox=!0}),h}let M=Math.PI;return c.match(/\\?tau|t|\u03c4/)&&(M=Math.PI*2),c.match(/pau/)&&(M=Math.PI*1.5),O.each(h,function(g,w){w.value*=M}),h},coefficient:function(c){let f=[];return c=c.replace(/\u2212/,"-"),c===""?f=[{value:1,exact:!0}]:c==="-"&&(f=[{value:-1,exact:!0}]),f},log:function(c){let f,h=[];return c=c.replace(/\u2212/,"-"),c=c.replace(/[ \(\)]/g,""),(f=c.match(/^log\s*(\S+)\s*$/i))?h=p.decimal(f[1]):c==="0"&&(h=[{value:0,exact:!0}]),h},percent:function(c){c=O.trim(c);let f=!1;c.indexOf("%")===c.length-1&&(c=O.trim(c.substring(0,c.length-1)),f=!0);const h=p.decimal(c);return O.each(h,function(M,g){g.exact=f,g.value=g.value/100}),h},mixed:function(c){const f=c.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?)(\d+)\s+(\d+)\s*\/\s*(\d+)$/);if(f){const h=parseFloat(f[1]+"1"),M=parseFloat(f[2]),g=parseFloat(f[3]),w=parseFloat(f[4]),y=g<w&&_.getGCD(g,w)===1;return[{value:h*(M+g/w),exact:y}]}return[]},decimal:function(c,f=1e10){const h=function(g){g=O.trim(g);const w=g.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?(?:\d{1,3}(?:[, ]?\d{3})*\.?|\d{0,3}(?:[, ]?\d{3})*\.(?:\d{3}[, ]?)*\d{1,3}))$/),y=g.match(/^0[0,]*,/);if(w&&!y){let F=parseFloat(w[1].replace(/[, ]/g,""));return r.inexact===void 0&&(F=Math.round(F*f)/f),F}},M=function(g){return g=g.replace(/([\.,])/g,function(w,y){return y==="."?",":"."}),h(g)};return[{value:h(c),exact:!0},{value:M(c),exact:!0}]}};return function(c){const f=r.fallback!=null?""+r.fallback:"";c=O.trim(c)||f;const h={empty:c==="",correct:!1,message:null,guess:c};if(O.each(a,function(M,g){const w=p[g](c);for(let y=0,F=w.length;y<F;y++){const A=w[y].value,C=w[y].exact,G=w[y].piApprox;if(e(A,r.maxError))return C||r.simplify==="optional"?(h.correct=!0,h.message=r.message||null,h.empty=!1):g==="percent"?(h.empty=!0,h.message=x.MISSING_PERCENT_ERROR):(r.simplify!=="enforced"&&(h.empty=!0),h.message=x.NEEDS_TO_BE_SIMPLFIED_ERROR),!1;G&&e(A,Math.abs(A*.001))&&(h.empty=!0,h.message=x.APPROXIMATED_PI_ERROR)}}),h.correct===!1){let M=!1;if(I.each(p,function(g){I.any(g(c),function(y){return y.value!=null&&!I.isNaN(y.value)})&&(M=!0)}),!M)return h.empty=!0,h.message=x.EXTRA_SYMBOLS_ERROR,h}return h}}},number:{convertToPredicate:function(e,r){const a=parseFloat(e);return[function(l,p){return Math.abs(l-a)<p},O.extend({},r,{type:"predicate"})]},createValidatorFunctional:function(e,r){return D.predicate.createValidatorFunctional(...D.number.convertToPredicate(e,r))}},expression:{parseSolution:function(e,r){let a=K(e,r);if(a.parsed){if(r.simplified&&!a.expr.isSimplified())throw new W("The provided solution ("+e+") isn't fully expanded and simplified.",z.InvalidInput);a=a.expr}else throw new W("The provided solution ("+e+") didn't parse.",z.InvalidInput);return a},createValidatorFunctional:function(e,r){return function(a){const l={empty:!1,correct:!1,message:null,guess:a,ungraded:!1};if(!a)return l.empty=!0,l;const p=K(a,r);if(!p.parsed)return l.empty=!0,l;typeof e=="string"&&(e=D.expression.parseSolution(e,r));const c=dn(p.expr,e,r);if(c.equal)l.correct=!0;else if(c.wrongVariableNames||c.wrongVariableCase)l.ungraded=!0,l.message=c.wrongVariableCase?x.WRONG_CASE_ERROR:x.WRONG_LETTER_ERROR,l.suppressAlmostThere=!0;else if(c.message)l.message=c.message;else{const f=K(a.replace(/[xX]/g,"*"),r);if(f.parsed){const h=dn(f.expr,e,r);h.equal?(l.ungraded=!0,l.message=x.MULTIPLICATION_SIGN_ERROR):h.message&&(l.message=h.message+" Also, I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign.")}}return l}}}},yn=/^web\+graphie:/,wn=/^file\+graphie:/;function Z(e){return En(e)?Mn(e):e}function En(e){return yn.test(e)||wn.test(e)}function k(e){return e.replace(yn,"https:").replace(wn,"file:")}function Mn(e){return k(e)+".svg"}function Yn(e){return k(e)+"-data.json"}async function Hn(e){const r=new Image;return new Promise((a,l)=>{r.onload=()=>{a([r.naturalWidth,r.naturalHeight])},r.onerror=l,r.src=Z(e)})}let mn=!1;const In=function(e,r,a){return Array.isArray(e)?I.map(e,function(l){return In(l,r)}):r.call(a,e)};function Jn(e,r){return e==null||r==null?e==null==(r==null):e.length===r.length&&e.every((a,l)=>r[l]===a)}const Rn=/^\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/,Kn=/^([a-z-]+) ([0-9]+)$/,Bn=new RegExp(Rn.source+"$"),Qn="☃",Zn={type:"points",earned:0,total:0,message:null},b=function(e){let r=e;return function(){let a=r;return a=a+2127912214+(a<<12)&4294967295,a=(a^3345072700^a>>>19)&4294967295,a=a+374761393+(a<<5)&4294967295,a=(a+3550635116^a<<9)&4294967295,a=a+4251993797+(a<<3)&4294967295,a=(a^3042594569^a>>>16)&4294967295,(r=a&268435455)/268435456}};function kn(e,r,a=!1){const l=I.clone(e);if(!l.length||I.all(l,function(c){return I.isEqual(c,l[0])}))return l;let p;typeof r=="function"?p=r:p=b(r);do for(let c=l.length;c>0;c--){const f=Math.floor(p()*c),h=l[f];l[f]=l[c-1],l[c-1]=h}while(a&&I.isEqual(e,l));return l}const bn="x".split(/(.)/g).length?function(e,r){return e.split(r)}:function(e,r){const a=[];let l=r.lastIndex=0,p;for(;p=r.exec(e);){const c=p;a.push(e.slice(l,c.index)),a.push(...c.slice(1)),l=c.index+c[0].length}return a.push(e.slice(l)),a};function jn(e,r){let a;if(e.type==="points"&&r.type==="points")return e.message&&r.message&&e.message!==r.message?a=null:a=e.message||r.message,{type:"points",earned:e.earned+r.earned,total:e.total+r.total,message:a};if(e.type==="points"&&r.type==="invalid")return r;if(e.type==="invalid"&&r.type==="points")return e;if(e.type==="invalid"&&r.type==="invalid")return e.message&&r.message&&e.message!==r.message?a=null:a=e.message||r.message,{type:"invalid",message:a};throw new W("PerseusScore with unknown type encountered",z.InvalidInput,{metadata:{scoreA:JSON.stringify(e),scoreB:JSON.stringify(r)}})}function ne(e){return e.type==="points"&&e.earned>=e.total}function ee(e,r,a){if(e.type==="points")return{empty:!1,correct:ne(e),message:e.message,guess:r,state:a};if(e.type==="invalid")return{empty:!0,correct:!1,message:e.message,suppressAlmostThere:e.suppressAlmostThere,guess:r,state:a};throw new W("Invalid score type: "+e.type,z.InvalidInput,{metadata:{score:JSON.stringify(e),guess:JSON.stringify(r),state:JSON.stringify(a)}})}function te(e){let r;return D.predicate.createValidatorFunctional(function(l){return r=l,!0},{simplify:"optional",inexact:!0,forms:"integer, proper, improper, pi, log, mixed, decimal"})(e),r}function re(e){return I(e).times(function(){return""})}function ie(e,r,a,l){const p=j(r,a),f=e*p>30;return{scale:p,tickStep:e/l,unityLabel:f}}function ue(e,r,a){return I(2).times(function(l){const p=j(e[l],a);return _n(r[l],p)})}function ae(e){return[e[0]/2,e[1]/2]}function _n(e,r){const a=e*r,l=e,p=Math.pow(10,Math.floor(Math.log(l)/Math.LN10)),c=Math.floor(l/p);if(a<25)return e;if(a<50)return c===5?e:e/2;if(c===1)return e/2;if(c===2)return e/4;if(c===5)return e/5}function j(e,r){const a=e[1]-e[0];return r/a}function se(e,r){const a=e[1]-e[0];let l;15<a&&a<=20?l=23:a>100||a<5?l=10:l=16;const p=r/500,c=l*p;return nn(a,c)}function nn(e,r){let a=Math.pow(10,Math.floor(Math.log(e/r)/Math.LN10));const l=r/e*a;return l<=.15?a*=10:l<=.35?a*=5:l<=.75&&(a*=2),a}const vn=(e,r)=>{const a=r[1]-r[0],l=a/e;return l<=10?e:l<=20?e*2:nn(a,10)};function ce(e,r){return[vn(e[0],r[0]),vn(e[1],r[1])]}const le={UNSAFE_componentWillMount:function(){const e={};I.each(this.deprecatedProps,function(r,a){I.has(this.props,a)&&I.extend(e,r(this.props))},this),I.isEmpty(e)||(I.extend(this.props,e),setTimeout(this.props.onChange,0,e))}};function Q(e,r){return typeof e=="number"&&typeof r=="number"?Math.abs(e-r)<1e-9:e===r}function U(e,r){if(Array.isArray(e)&&Array.isArray(r)){if(e.length!==r.length)return!1;for(let a=0;a<e.length;a++)if(!U(e[a],r[a]))return!1;return!0}return Array.isArray(e)||Array.isArray(r)?!1:typeof e=="function"&&typeof r=="function"?Q(e,r):typeof e=="function"||typeof r=="function"?!1:typeof e=="object"&&typeof r=="object"&&e&&r?e===r||I.all(e,function(a,l){return U(r[l],a)})&&I.all(r,function(a,l){return U(e[l],a)}):typeof e=="object"&&e||typeof r=="object"&&r?!1:Q(e,r)}function oe(e){e=e||window.location.search.substring(1);const r={},a=/\+/g,l=/([^&=]+)=?([^&]*)/g,p=function(f){return decodeURIComponent(f.replace(a," "))};let c;for(;c=l.exec(e);){const f=c;r[p(f[1])]=p(f[2])}return r}function fe(e,r,a){a=encodeURIComponent(a);const l=new RegExp("([?&])"+r+"=.*?(&|$)","i"),p=e.indexOf("?")!==-1?"&":"?";return e.match(l)?e.replace(l,"$1"+r+"="+a+"$2"):e+p+r+"="+a}function pe(e){return encodeURIComponent(e).replace(/['()!]/g,window.escape).replace(/\*/g,"%2A")}function de(e){if(!e)return!1;switch(e.type){case"measurer":case"protractor":return!0;default:return!1}}function he(e){return e.type==="invalid"&&(!e.message||e.message.length===0)}const P={pointerDown:!1,currentTouchIdentifier:null};function ge(){Object.assign(P,{pointerDown:!1,currentTouchIdentifier:null})}function me(e){let r;if(P.pointerDown){if(P.currentTouchIdentifier!=null){const l=e.changedTouches?e.changedTouches.length:0;for(let p=0;p<l;p++)e.changedTouches[p].identifier===P.currentTouchIdentifier&&(r=e.changedTouches[p])}else r=e;const a=e.type==="touchend"||e.type==="touchcancel";r&&a&&(P.pointerDown=!1,P.currentTouchIdentifier=null)}else P.pointerDown=!0,e.changedTouches?(r=e.changedTouches[0],P.currentTouchIdentifier=r.identifier):r=e;if(r)return{left:r.pageX,top:r.pageY}}const ve=()=>{try{const e=Object.defineProperty({},"passive",{get:function(){mn=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}return mn};function ye(e){e.stopPropagation()}function we(e,r){const a=new Image;a.onload=function(){var l;a.width===0&&a.height===0?((l=document.body)==null||l.appendChild(a),I.defer(function(){var p;r(a.clientWidth,a.clientHeight),(p=document.body)==null||p.removeChild(a)})):r(a.width,a.height)},a.src=Z(e)}function Ee(e){const r=e.value,a=e.selectionStart-1,l=Math.max(r.lastIndexOf(`
`,a),r.lastIndexOf(" ",a))+1;return{string:r.substring(l,a+1),pos:{start:l,end:a}}}function Me(e,r){e.selectionStart=r,e.selectionEnd=r}const Ie={getWordBeforeCursor:Ee,moveCursor:Me},Re=e=>e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):e,_e=b(new Date().getTime()&4294967295);function Fn(e){return Array.isArray(e)?e.map(Fn):e}const Ue={inputPathsEqual:Jn,nestedMap:In,rWidgetRule:Rn,rTypeFromWidgetId:Kn,rWidgetParts:Bn,snowman:Qn,noScore:Zn,seededRNG:b,shuffle:kn,split:bn,combineScores:jn,keScoreFromPerseusScore:ee,firstNumericalParse:te,stringArrayOfSize:re,gridDimensionConfig:ie,getGridStep:ue,snapStepFromGridStep:ae,scaleFromExtent:j,tickStepFromExtent:se,gridStepFromTickStep:_n,tickStepFromNumTicks:nn,constrainedTickStepsFromTickSteps:ce,DeprecationMixin:le,eq:Q,deepEq:U,parseQueryString:oe,updateQueryString:fe,strongEncodeURIComponent:pe,widgetShouldHighlight:de,scoreIsEmpty:he,touchHandlers:P,resetTouchHandlers:ge,extractPointerLocation:me,supportsPassiveEvents:ve,captureScratchpadTouchStart:ye,getImageSize:we,getImageSizeModern:Hn,getRealImageUrl:Z,isLabeledSVG:En,getBaseUrl:k,getSvgUrl:Mn,getDataUrl:Yn,textarea:Ie,unescapeMathMode:Re,random:_e,deepClone:Fn};export{Un as D,_ as K,Ue as U,ne as a,xe as b,Ge as c,Le as d,$ as e,Ce as f,D as g,De as h,zn as i,$e as r,qe as s,gn as t};
