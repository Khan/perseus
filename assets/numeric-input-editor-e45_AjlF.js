import{a as n,j as e}from"./jsx-runtime-BGVbfQ2Z.js";import"./article-renderer-jOlec-v8.js";import{p as T,c as S}from"./unit-tpB2tohZ.js";import"./index-eZ2N530f.js";import"./index-V35CFGao.js";import"./index-qhcEwEpg.js";import"./fixed-to-responsive-G5J_wmel.js";import"./dependencies-fnqF3NiV.js";import"./video-transcript-link-JriNv8Pc.js";import{_ as l}from"./index-default-4_ZsnO94.js";import"./perseus-api-Ly41NhN4.js";import"./multi-renderer-Od3vIw_B.js";import"./hints-renderer-zscRL_N0.js";import"./renderer-uh8HDrJD.js";import"./base-radio-AAPbZcYa.js";import{c as k}from"./components-4K8BQnI7.js";import{I as O}from"./icon-paths-fAaGW1jp.js";import{U as F}from"./util-1QHV8SS2.js";import"./jquery-5v7aFUvu.js";import{E as j}from"./editor-jsonify-78WT2WXm.js";import{c as z}from"./prop-check-box-TM2oQvxZ.js";import{E as D}from"./editor-g4FV4lsg.js";const{ButtonGroup:y,InfoTip:h,InlineIcon:b,MultiButtonGroup:I,NumberInput:g,PropCheckBox:f,TextInput:U}=k,{iconGear:q,iconTrash:B}=O,{firstNumericalParse:N}=F,K=[{title:"Integers",value:"integer",content:"6"},{title:"Decimals",value:"decimal",content:"0.75"},{title:"Proper fractions",value:"proper",content:"⅗"},{title:"Improper fractions",value:"improper",content:"⁷⁄₄"},{title:"Mixed numbers",value:"mixed",content:"1¾"},{title:"Numbers with π",value:"pi",content:"π"}],v=t=>({value:null,status:t,message:"",simplify:"required",answerForms:[],strict:!1,maxError:null}),le=z({displayName:"NumericInputEditor",propTypes:{...T},statics:{widgetName:"numeric-input"},getDefaultProps:function(){return{answers:[v("correct")],size:"normal",coefficient:!1,labelText:"",rightAlign:!1}},getInitialState:function(){return{lastStatus:"wrong",showOptions:l.map(this.props.answers,()=>!1)}},render:function(){const t=this.props.answers,r=s=>n("div",{className:"perseus-widget-row",children:[e("label",{children:"Unsimplified answers are"}),e(y,{value:t[s].simplify,allowEmpty:!1,buttons:[{value:"required",content:"ungraded"},{value:"optional",content:"accepted"},{value:"enforced",content:"wrong"}],onChange:this.updateAnswer(s,"simplify")}),n(h,{children:[e("p",{children:'Normally select "ungraded". This will give the user a message saying the answer is correct but not simplified. The user will then have to simplify it and re-enter, but will not be penalized. (5th grade and after)'}),e("p",{children:'Select "accepted" only if the user is not expected to know how to simplify fractions yet. (Anything prior to 5th grade)'}),n("p",{children:['Select "wrong" ',e("em",{children:"only"})," if we are specifically assessing the ability to simplify."]})]})]}),a=s=>n("div",{children:[n("div",{className:"perseus-widget-row",children:[e("label",{children:"Choose the suggested answer formats"}),e(I,{buttons:K,values:t[s].answerForms,onChange:this.updateAnswer(s,"answerForms")}),n(h,{children:[e("p",{children:'Formats will be autoselected for you based on the given answer; to show no suggested formats and accept all types, simply have a decimal/integer be the answer. Values with π will have format "pi", and values that are fractions will have some subset (mixed will be "mixed" and "proper"; improper/proper will both be "improper" and "proper"). If you would like to specify that it is only a proper fraction (or only a mixed/improper fraction), deselect the other format. Except for specific cases, you should not need to change the autoselected formats.'}),n("p",{children:["To restrict the answer to ",e("em",{children:"only"}),' an improper fraction (i.e. 7/4), select the improper fraction and toggle "strict" to true. This ',e("b",{children:"will not"})," ","accept 1.75 as an answer."," "]}),e("p",{children:"Unless you are testing that specific skill, please do not restrict the answer format."})]})]}),e("div",{className:"perseus-widget-row",children:e(f,{label:"Strictly match only these formats",strict:t[s].strict,onChange:this.updateAnswer.bind(this,s)})})]}),c=s=>e("div",{className:"perseus-widget-row",children:n("label",{children:["Max error"," ",e(g,{className:"max-error",value:t[s].maxError,onChange:this.updateAnswer(s,"maxError"),placeholder:"0"})]})}),p=n("div",{className:"perseus-widget-row",children:[e("label",{children:"Width: "}),e(y,{value:this.props.size,allowEmpty:!1,buttons:[{value:"normal",content:"Normal (80px)"},{value:"small",content:"Small (40px)"}],onChange:this.change("size")}),e(h,{children:e("p",{children:'Use size "Normal" for all text boxes, unless there are multiple text boxes in one line and the answer area is too narrow to fit them.'})})]}),w=e("div",{className:"perseus-widget-row",children:e(f,{label:"Right alignment",rightAlign:this.props.rightAlign,onChange:this.props.onChange})}),d=n("div",{className:"perseus-widget-row",children:[n("label",{children:["Label text:"," ",e(U,{value:this.props.labelText,onChange:this.change("labelText")})]}),e(h,{children:e("p",{children:"Text to describe this input. This will be shown to users using screenreaders."})})]}),x=e("div",{children:n("div",{className:"perseus-widget-row",children:[e(f,{label:"Coefficient",coefficient:this.props.coefficient,onChange:this.props.onChange}),e(h,{children:e("p",{children:"A coefficient style number allows the student to use - for -1 and an empty string to mean 1."})})]})}),A=e("div",{children:e("a",{href:"javascript:void(0)",className:"simple-button orange",onClick:()=>this.addAnswer(),onKeyDown:s=>this.onSpace(s,this.addAnswer),children:e("span",{children:"Add new answer"})})}),C={wrong:"(address the mistake/misconception)",ungraded:"(explain in detail to avoid confusion)",correct:"(reinforce the user's understanding)"};return n("div",{className:"perseus-input-number-editor",children:[e("div",{className:"ui-title",children:"User input"}),e("div",{className:"msg-title",children:"Message shown to user on attempt"}),t.map((s,i)=>{const E=e(D,{apiOptions:this.props.apiOptions,content:s.message||"",placeholder:"Why is this answer "+s.status+"?	"+C[s.status],widgetEnabled:!1,onChange:o=>{"content"in o&&this.updateAnswer(i,{message:o.content})}});return n("div",{className:"perseus-widget-row",children:[n("div",{className:"input-answer-editor-value-container"+(s.maxError?" with-max-error":""),children:[e(g,{value:s.value,className:"numeric-input-value",placeholder:"answer",format:l.last(s.answerForms),onFormatChange:(o,m)=>{let u;m==="pi"?u=["pi"]:m==="mixed"?u=["proper","mixed"]:(m==="proper"||m==="improper")&&(u=["proper","improper"]),this.updateAnswer(i,{value:N(o),answerForms:u})},onChange:o=>{this.updateAnswer(i,{value:N(o)})}}),s.strict&&e("div",{className:"is-strict-indicator",title:"strictly equivalent to",children:"≡"}),s.simplify!=="required"&&s.status==="correct"&&e("div",{className:"simplify-indicator "+s.simplify,title:"accepts unsimplified answers",children:"‰"}),s.maxError?n("div",{className:"max-error-container",children:[e("div",{className:"max-error-plusmn",children:"±"}),e(g,{placeholder:0,value:t[i].maxError,format:l.last(s.answerForms),onChange:this.updateAnswer(i,"maxError")})]}):null,e("div",{className:"value-divider"}),e("a",{href:"javascript:void(0)",className:"answer-status "+s.status,onClick:()=>this.onStatusChange(i),onKeyDown:o=>this.onSpace(o,this.onStatusChange,i),children:s.status}),e("a",{href:"javascript:void(0)",className:"answer-trash","aria-label":"Delete answer",onClick:()=>this.onTrashAnswer(i),onKeyDown:o=>this.onSpace(o,this.onTrashAnswer,i),children:e(b,{...B})}),e("a",{href:"javascript:void(0)",className:"options-toggle","aria-label":"Toggle options",onClick:()=>this.onToggleOptions(i),onKeyDown:o=>this.onSpace(o,this.onToggleOptions,i),children:e(b,{...q})})]}),e("div",{className:"input-answer-editor-message",children:E}),this.state.showOptions[i]&&n("div",{className:"options-container",children:[c(i),s.status==="correct"&&r(i),a(i)]})]},i)}),A,p,w,x,d]})},change(...t){return S.apply(this,t)},onToggleOptions:function(t){const r=this.state.showOptions.slice();r[t]=!r[t],this.setState({showOptions:r})},onTrashAnswer:function(t){if(t>=0&&t<this.props.answers.length){const r=this.props.answers.slice(0);r.splice(t,1),this.props.onChange({answers:r})}},onSpace:function(t,r){if(t.key===" "){t.preventDefault();const a=l.toArray(arguments).slice(2);r.apply(this,a)}},onStatusChange:function(t){const r=["wrong","ungraded","correct"],a=this.props.answers,c=l.indexOf(r,a[t].status),p=r[(c+1)%r.length];this.updateAnswer(t,{status:p,simplify:p==="correct"?"required":"accepted"})},updateAnswer:function(t,r){if(!l.isObject(r))return l.partial((c,p,w)=>{const d={};d[p]=w,this.updateAnswer(c,d)},t,r);let a=l.clone(this.props.answers);if(t===a.length){const c=v(this.state.lastStatus);a=a.concat(c)}a[t]=l.extend({},a[t],r),this.props.onChange({answers:a})},addAnswer:function(){const t=v(this.state.lastStatus),r=this.props.answers.concat(t);this.props.onChange({answers:r})},getSaveWarnings:function(){const t=[];return l.contains(l.pluck(this.props.answers,"value"),"")&&t.push("One or more answers is empty"),this.props.answers.forEach((r,a)=>{r.strict&&(!r.answerForms||r.answerForms.length===0)&&t.push(`Answer ${a+1} is set to string format matching, but no format was selected`)}),t},serialize(){return j.serialize.call(this)}});export{le as N};
