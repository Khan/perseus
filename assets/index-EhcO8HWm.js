import{r as h}from"./index-4g5l5LRQ.js";import{l as I}from"./index-awljIyHI.js";import{w as P,c as _,L as A}from"./react-router-dom-hVaNq8bQ.js";import{a as k}from"./index-e4P84RkC.js";import{c as b}from"./index-lUErx3pE.js";function j(o,t){if(o==null)return{};var e={},n=Object.keys(o),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(e[i]=o[i]);return e}function d(){return d=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n])}return o},d.apply(this,arguments)}const U=o=>{switch(o){case"link":return{triggerOnEnter:!0,triggerOnSpace:!1};case"checkbox":case"radio":case"listbox":return{triggerOnEnter:!1,triggerOnSpace:!0};case"button":case"menuitem":case"menu":case"option":default:return{triggerOnEnter:!0,triggerOnSpace:!0}}},H={onClick:()=>{},onMouseEnter:()=>{},onMouseLeave:()=>{},onMouseDown:()=>{},onMouseUp:()=>{},onTouchStart:()=>{},onTouchEnd:()=>{},onTouchCancel:()=>{},onKeyDown:()=>{},onKeyUp:()=>{}},f={enter:13,space:32},K={hovered:!1,focused:!1,pressed:!1,waiting:!1};class C extends h.Component{static getDerivedStateFromProps(t,e){return t.disabled?d({},K,{focused:e.focused}):null}constructor(t){super(t),this.waitingForClick=void 0,this.enterClick=void 0,this.handleClick=e=>{const{onClick:n=void 0,beforeNav:i=void 0,safeWithNav:s=void 0}=this.props;this.enterClick||((n||i||s)&&(this.waitingForClick=!1),this.runCallbackAndMaybeNavigate(e))},this.handleMouseEnter=e=>{this.waitingForClick||this.setState({hovered:!0})},this.handleMouseLeave=()=>{this.waitingForClick||this.setState({hovered:!1,pressed:!1,focused:!1})},this.handleMouseDown=e=>{this.props.onMouseDown&&this.props.onMouseDown(e),this.setState({pressed:!0})},this.handleMouseUp=e=>{this.props.onMouseUp&&this.props.onMouseUp(e),this.setState({pressed:!1,focused:!1})},this.handleTouchStart=()=>{this.setState({pressed:!0})},this.handleTouchEnd=()=>{this.setState({pressed:!1}),this.waitingForClick=!0},this.handleTouchCancel=()=>{this.setState({pressed:!1}),this.waitingForClick=!0},this.handleKeyDown=e=>{const{onKeyDown:n,role:i}=this.props;n&&n(e);const s=e.which||e.keyCode,{triggerOnEnter:r,triggerOnSpace:a}=U(i);r&&s===f.enter||a&&s===f.space?(e.preventDefault(),this.setState({pressed:!0})):!r&&s===f.enter&&(this.enterClick=!0)},this.handleKeyUp=e=>{const{onKeyUp:n,role:i}=this.props;n&&n(e);const s=e.which||e.keyCode,{triggerOnEnter:r,triggerOnSpace:a}=U(i);r&&s===f.enter||a&&s===f.space?(this.setState({pressed:!1,focused:!0}),this.runCallbackAndMaybeNavigate(e)):!r&&s===f.enter&&(this.enterClick=!1)},this.handleFocus=e=>{const{onFocus:n}=this.props;this.setState({focused:!0},()=>{n&&n(e)})},this.handleBlur=e=>{this.setState({focused:!1,pressed:!1})},this.state=K,this.waitingForClick=!1,this.enterClick=!1}navigateOrReset(t){if(t){const{history:e,href:n,skipClientNav:i,target:s=void 0}=this.props;n&&(s==="_blank"?(window.open(n,"_blank"),this.setState({waiting:!1})):e&&!i?(e.push(n),this.setState({waiting:!1})):window.location.assign(n))}else this.setState({waiting:!1})}handleSafeWithNav(t,e){const{skipClientNav:n,history:i}=this.props;return i&&!n||this.props.target==="_blank"?(t(),this.navigateOrReset(e),Promise.resolve()):(this.state.waiting||this.setState({waiting:!0}),t().then(()=>{this.state.waiting||this.setState({waiting:!0})}).catch(s=>{}).finally(()=>{this.navigateOrReset(e)}))}runCallbackAndMaybeNavigate(t){const{onClick:e=void 0,beforeNav:n=void 0,safeWithNav:i=void 0,href:s,type:r}=this.props;let a=!0,u=!0;if(e&&e(t),t.defaultPrevented&&(a=!1,u=!1),t.preventDefault(),!s&&r==="submit"&&u){let l=t.currentTarget;for(;l;){if(l instanceof window.HTMLFormElement){const p=new window.Event("submit",{bubbles:!0,cancelable:!0});l.dispatchEvent(p);break}l=l.parentElement}}if(n)this.setState({waiting:!0}),n().then(()=>i?this.handleSafeWithNav(i,a):this.navigateOrReset(a)).catch(()=>{});else{if(i)return this.handleSafeWithNav(i,a);this.navigateOrReset(a)}}render(){const t=this.props.rel||(this.props.target==="_blank"?"noopener noreferrer":void 0),e=this.props.disabled?d({},H,{onFocus:this.handleFocus,onBlur:this.handleBlur,tabIndex:this.props.tabIndex,rel:t}):{onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onTouchCancel:this.handleTouchCancel,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onFocus:this.handleFocus,onBlur:this.handleBlur,tabIndex:this.props.tabIndex,rel:t},{children:n}=this.props;return n&&n(this.state,e)}}C.defaultProps={disabled:!1};const T=o=>typeof o!="string"?!1:!/^(https?:)?\/\//i.test(o)&&!/^([^#]*#[\w-]*|[\w\-.]+:)/.test(o),$=P(C);function z(o,t,e){return e&&t!==!0&&o&&T(o)?$:C}const q=["href","onClick","skipClientNav","beforeNav","safeWithNav","style","target","testId","onFocus","onKeyDown","onKeyUp","onMouseDown","onMouseUp","hideDefaultFocusRing","light","disabled","tabIndex"],G=k("a"),J=k("button"),Q=k(A),V=h.forwardRef(function(t,e){const n=(s,r,a)=>{const u=t.href&&!t.disabled,l=r&&!t.skipClientNav&&T(t.href||"");return u&&l&&t.href?h.createElement(Q,d({},a,{to:t.href,role:t.role,target:t.target||void 0,"aria-disabled":t.disabled?"true":"false",ref:e}),t.children(s)):u&&!l?h.createElement(G,d({},a,{href:t.href,role:t.role,target:t.target||void 0,"aria-disabled":t.disabled?"true":"false",ref:e}),t.children(s)):h.createElement(J,d({},a,{type:"button","aria-disabled":t.disabled,ref:e}),t.children(s))},i=s=>{const{href:r,onClick:a,skipClientNav:u,beforeNav:l=void 0,safeWithNav:p=void 0,style:B,target:L=void 0,testId:y,onFocus:S,onKeyDown:m,onKeyUp:M,onMouseDown:x,onMouseUp:D,hideDefaultFocusRing:R,light:W,disabled:v,tabIndex:E}=t,F=j(t,q),O=z(r,u,s),N=c=>[g.reset,g.link,!R&&c.focused&&(W?g.focusedLight:g.focused),v&&g.disabled,B];return l?h.createElement(O,{href:r,onClick:a,beforeNav:l,safeWithNav:p,onFocus:S,onKeyDown:m,onKeyUp:M,onMouseDown:x,onMouseUp:D,disabled:v,tabIndex:E},(c,w)=>n(c,s,d({},F,{"data-testid":y,style:N(c)},w))):h.createElement(O,{href:r,onClick:a,safeWithNav:p,onFocus:S,onKeyDown:m,onKeyUp:M,onMouseDown:x,onMouseUp:D,target:L,disabled:v,tabIndex:E},(c,w)=>n(c,s,d({},F,{"data-testid":y,style:N(c)},w)))};return h.createElement(_.Consumer,null,s=>i(s))});V.defaultProps={light:!1,disabled:!1};const g=I.StyleSheet.create({reset:{border:"none",margin:0,padding:0,width:"auto",overflow:"visible",background:"transparent",textDecoration:"none",color:"inherit",font:"inherit",boxSizing:"border-box",touchAction:"manipulation",userSelect:"none",outline:"none",lineHeight:"normal",WebkitFontSmoothing:"inherit",MozOsxFontSmoothing:"inherit"},link:{cursor:"pointer"},focused:{":focus":{outline:`solid 2px ${b.blue}`}},focusedLight:{outline:`solid 2px ${b.white}`},disabled:{color:b.offBlack32,cursor:"not-allowed",":focus":{outline:"none"},":focus-visible":{outline:`solid 2px ${b.blue}`}}});export{V as C,C as a,z as g,T as i};
