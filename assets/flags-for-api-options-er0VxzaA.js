import{j as e,a as o,F as K}from"./jsx-runtime-BGVbfQ2Z.js";import{U as k}from"./util-2H85FoUC.js";import{_ as p}from"./index-default-4_ZsnO94.js";import{e as X}from"./svg-image-8PSZcgZf.js";import{d as Z}from"./article-renderer-974ndISD.js";import"./unit-uxf7imOh.js";import"./dependencies-fnqF3NiV.js";import{A as H}from"./perseus-api-BF68z3pH.js";import"./multi-renderer-Tp5Muahf.js";import"./hints-renderer-AnI_OBMT.js";import{S as ee}from"./renderer-UcSLEi0P.js";import"./base-radio-fzQkHKOj.js";import{c as re}from"./components-gdi6OLZ_.js";import"./jquery-5v7aFUvu.js";import{i as te}from"./constants-I_nlPaPx.js";import"./i18n-context-9-s9cJ--.js";import{V as v}from"./index-oMd7J_hd.js";import{S as c,O as t}from"./answer-choices-mXwBl9Hu.js";import{C as j}from"./index-ZObC1LzG.js";import{s as Y}from"./index-lUErx3pE.js";import{b as Q,e as ne}from"./index-B3k62xyQ.js";import{l as S}from"./index-awljIyHI.js";import{r as ae}from"./index-qhcEwEpg.js";import{L as l,I as se}from"./interactive-graph-settings-QAysN2PZ.js";import{L as oe}from"./locked-figures-section-EJkiZ2ka.js";import"./button-group-eBTrRsKy.js";import"./graph-dQsUdvbG.js";import"./hud-Q7Km3N9P.js";import"./icon-HbAIhp4d.js";import"./info-tip-_E95qi8X.js";import"./inline-icon-MJBS_-2U.js";import"./math-input-Ah4BQ4X3.js";import"./multi-button-group-rHU9dGVb.js";import"./number-input-HiFoiqvr.js";import"./prop-check-box-Z3f7giBx.js";import"./range-input-FmO-T3Pe.js";import"./text-input-yDsqFbe3.js";import"./text-list-editor-bJphcq85.js";const C="unlimited",J=s=>{const n=parseInt(s,10);return isNaN(n)||n===0?C:n},ie=({numPoints:s=1,onChange:n})=>e(c,{selectedValue:`${s}`,onChange:r=>{n(J(r))},placeholder:"",style:le.singleSelectShort,children:[...[...Array(7).keys()].map(r=>e(t,{value:`${r}`,label:`${r} point${r>1?"s":""}`},r)),e(t,{value:C,label:"unlimited"},"unlimited")]}),le=S.StyleSheet.create({singleSelectShort:{height:26}});try{graphpointscountselector.displayName="graphpointscountselector",graphpointscountselector.__docgenInfo={description:"",displayName:"graphpointscountselector",props:{numPoints:{defaultValue:{value:"1"},description:"",name:"numPoints",required:!1,type:{name:"PointValue"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(points: PointValue) => void"}}}}}catch{}const pe=s=>o(c,{selectedValue:s.graphType,onChange:s.onChange,placeholder:"Select a graph type",style:he.singleSelectShort,children:[e(t,{value:"linear",label:"Linear function"}),e(t,{value:"quadratic",label:"Quadratic function"}),e(t,{value:"sinusoid",label:"Sinusoid function"}),e(t,{value:"circle",label:"Circle"}),e(t,{value:"point",label:"Point(s)"}),e(t,{value:"linear-system",label:"Linear System"}),e(t,{value:"polygon",label:"Polygon"}),e(t,{value:"segment",label:"Line Segment(s)"}),e(t,{value:"ray",label:"Ray"}),e(t,{value:"angle",label:"Angle"})]}),he=S.StyleSheet.create({singleSelectShort:{height:26}});try{graphtypeselector.displayName="graphtypeselector",graphtypeselector.__docgenInfo={description:"",displayName:"graphtypeselector",props:{graphType:{defaultValue:null,description:"",name:"graphType",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newGraphType: string) => void"}}}}}catch{}const ce=({numSegments:s=1,onChange:n})=>e(c,{selectedValue:`${s}`,placeholder:"",onChange:r=>{const i=+r;n(i)},style:ue.singleSelectShort,children:p.range(1,7).map(r=>e(t,{value:`${r}`,label:`${r} segment${r>1?"s":""}`},r))},"segment-select"),ue=S.StyleSheet.create({singleSelectShort:{height:26}});try{segmentcountselector.displayName="segmentcountselector",segmentcountselector.__docgenInfo={description:"",displayName:"segmentcountselector",props:{numSegments:{defaultValue:{value:"1"},description:"",name:"numSegments",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(numSegments: number) => void"}}}}}catch{}const{InfoTip:d}=re,{containerSizeClass:de,getInteractiveBoxFromSizeClass:ge}=ee,me=k.DeprecationMixin,y=Z.widget,ye={url:null},fe={showGraph:function(s){return{markings:s.showGraph?"graph":"none"}}},be=p.map(p.range(3,13),function(s){return e(t,{value:`${s}`,label:`${s} sides`},`polygon-sides-${s}`)}),b=class b extends ae.Component{constructor(){super(...arguments),this.displayName="InteractiveGraphEditor",this.className="perseus-widget-interactive-graph",this.deprecatedProps=fe,this.changeMatchType=n=>{const r={...this.props.correct,match:n};this.props.onChange({correct:r})},this.getSaveWarnings=()=>{const n=[];for(const r of this.props.lockedFigures??[])r.type==="line"&&X(r.points[0].coord,r.points[1].coord)&&n.push("The line cannot have length 0.");return n}}UNSAFE_componentWillMount(){me.UNSAFE_componentWillMount.call(this)}render(){var T,I,P,V,_,q,F,L,N,A,G,M,$,O,R,z,E,B,D,U,W;let n,r;const i=this.props.gridStep||k.getGridStep(this.props.range,this.props.step,te.defaultBoxSize),u=this.props.snapStep||k.snapStepFromGridStep(i),x=de.SMALL;if(this.props.valid===!0){const a=this.props.correct,h={ref:"graph",box:this.props.box,range:this.props.range,labels:this.props.labels,step:this.props.step,gridStep:i,snapStep:u,graph:a,backgroundImage:this.props.backgroundImage,markings:this.props.markings,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,showTooltips:this.props.showTooltips,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,lockedFigures:this.props.lockedFigures,trackInteraction:function(){},onChange:w=>{let m=this.props.correct;m.type===w.graph.type?m=p.extend({},m,w.graph):m=w.graph,this.props.onChange({correct:m})}};n=e(y,{...h,containerSizeClass:x,apiOptions:{...this.props.apiOptions,isMobile:!1}}),r=y.getEquationString(h)}else n=e("div",{className:"perseus-error",children:this.props.valid});return o(v,{children:[e(l,{label:"Type of Graph:",children:e(pe,{graphType:((T=this.props.graph)==null?void 0:T.type)??y.defaultProps.graph.type,onChange:a=>{this.props.onChange({graph:{type:a},correct:{type:a}})}})}),((I=this.props.correct)==null?void 0:I.type)==="point"&&e(l,{label:"Number of Points:",children:e(ie,{numPoints:(P=this.props.correct)==null?void 0:P.numPoints,onChange:a=>{this.props.onChange({correct:{type:"point",numPoints:a},graph:{type:"point",numPoints:a}})}})}),((V=this.props.correct)==null?void 0:V.type)==="polygon"&&o(K,{children:[e(l,{label:"Number of sides:",children:e(c,{selectedValue:(_=this.props.correct)!=null&&_.numSides?`${this.props.correct.numSides}`:"3",placeholder:"",onChange:a=>{const h={...this.props.correct,numSides:J(a),coords:null,snapTo:"grid"};this.props.onChange({correct:h,graph:h})},style:g.singleSelectShort,children:[...be,e(t,{value:"unlimited",label:"unlimited sides"},"unlimited")]},"polygon-select")}),o(l,{label:"Snap to:",children:[o(c,{selectedValue:((q=this.props.correct)==null?void 0:q.snapTo)||"grid",placeholder:"",onChange:a=>{const h={...this.props.correct,snapTo:a,coords:null};this.props.onChange({correct:h})},style:g.singleSelectShort,children:[e(t,{value:"grid",label:"grid"}),((F=this.props.correct)==null?void 0:F.numSides)!=="unlimited"&&e(t,{value:"angles",label:"interior angles"}),((L=this.props.correct)==null?void 0:L.numSides)!=="unlimited"&&e(t,{value:"sides",label:"side measures"})]}),o(d,{children:[e("p",{children:"These options affect the movement of the vertex points. The grid option will guide the points to the nearest half step along the grid."}),e("p",{children:"The interior angle and side measure options guide the points to the nearest whole angle or side measure respectively."})]})]}),o(v,{style:g.row,children:[e(j,{label:e(Q,{children:"Show angle measures"}),checked:!!((N=this.props.correct)!=null&&N.showAngles),onChange:()=>{var a;((a=this.props.graph)==null?void 0:a.type)==="polygon"&&this.props.onChange({correct:{...this.props.correct,showAngles:!this.props.correct.showAngles},graph:{...this.props.graph,showAngles:!this.props.graph.showAngles}})}}),e(d,{children:e("p",{children:"Displays the interior angle measures."})})]}),o(v,{style:g.row,children:[e(j,{label:e(Q,{children:"Show side measures"}),checked:!!((A=this.props.correct)!=null&&A.showSides),onChange:()=>{var a;((a=this.props.graph)==null?void 0:a.type)==="polygon"&&this.props.onChange({correct:{...this.props.correct,showSides:!this.props.correct.showSides},graph:{...this.props.graph,showSides:!this.props.graph.showSides}})}}),e(d,{children:e("p",{children:"Displays the side lengths."})})]})]}),((G=this.props.correct)==null?void 0:G.type)==="segment"&&e(l,{label:"Number of segments:",children:e(ce,{numSegments:(M=this.props.correct)==null?void 0:M.numSegments,onChange:a=>{this.props.onChange({correct:{type:"segment",numSegments:a,coords:null},graph:{type:"segment",numSegments:a}})}})}),e(se,{box:ge(x),range:this.props.range,labels:this.props.labels,step:this.props.step,gridStep:i,snapStep:u,valid:this.props.valid,backgroundImage:this.props.backgroundImage,markings:this.props.markings,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,showTooltips:this.props.showTooltips,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,onChange:this.props.onChange}),this.props.correct.type==="polygon"&&o(l,{label:"Student answer must",children:[o(c,{selectedValue:this.props.correct.match||"exact",onChange:this.changeMatchType,placeholder:"",style:g.singleSelectShort,children:[e(t,{value:"exact",label:"match exactly"}),e(t,{value:"congruent",label:"be congruent"}),e(t,{value:"approx",label:"be approximately congruent"}),e(t,{value:"similar",label:"be similar"})]}),e(d,{children:o("ul",{children:[e("li",{children:o("p",{children:[e("b",{children:"Match Exactly:"})," Match exactly in size, orientation, and location on the grid even if it is not shown in the background."]})}),e("li",{children:o("p",{children:[e("b",{children:"Be Congruent:"})," Be congruent in size and shape, but can be located anywhere on the grid."]})}),e("li",{children:o("p",{children:[e("b",{children:"Be Approximately Congruent:"})," Be exactly similar, and congruent in size and shape to within 0.1 units, but can be located anywhere on the grid."," ",e("em",{children:"Use this with snapping to angle measure."})]})}),e("li",{children:o("p",{children:[e("b",{children:"Be Similar:"})," Be similar with matching interior angles, and side measures that are matching or a multiple of the correct side measures. The figure can be located anywhere on the grid."]})})]})})]}),this.props.correct.type==="angle"&&o(l,{label:"Student answer must",children:[o(c,{selectedValue:this.props.correct.match||"exact",onChange:this.changeMatchType,placeholder:"",style:g.singleSelectShort,children:[e(t,{value:"exact",label:"match exactly"}),e(t,{value:"congruent",label:"be congruent"})]}),e(d,{children:e("p",{children:"Congruency requires only that the angle measures are the same. An exact match implies congruency, but also requires that the angles have the same orientation and that the vertices are in the same position."})})]}),o(l,{label:"Correct answer:",children:[e(ne,{style:{fontSize:12,backgroundColor:"#eee",paddingInline:Y.xxSmall_6,borderColor:"#ccc",borderStyle:"solid",borderWidth:1},children:r}),e(d,{children:e("p",{children:"Graph the correct answer in the graph below and ensure the equation or point coordinates displayed represent the correct answer."})})]}),n,this.props.graph&&((R=(O=($=this.props.apiOptions)==null?void 0:$.flags)==null?void 0:O.mafs)==null?void 0:R[this.props.graph.type])&&e(oe,{showM2Features:(B=(E=(z=this.props.apiOptions)==null?void 0:z.flags)==null?void 0:E.mafs)==null?void 0:B["interactive-graph-locked-features-m2"],showM2bFeatures:(W=(U=(D=this.props.apiOptions)==null?void 0:D.flags)==null?void 0:U.mafs)==null?void 0:W["interactive-graph-locked-features-m2b"],figures:this.props.lockedFigures,onChange:this.props.onChange})]})}serialize(){const n=p.pick(this.props,"step","backgroundImage","markings","labels","showProtractor","showRuler","showTooltips","rulerLabel","rulerTicks","range","gridStep","snapStep","lockedFigures"),r=this.refs.graph;if(r){const i=r&&r.getUserInput();p.extend(n,{graph:{type:i.type},correct:i}),p.each(["allowReflexAngles","angleOffsetDeg","numPoints","numSides","numSegments","showAngles","showSides","snapTo","snapDegrees"],function(u){p.has(i,u)&&(n.graph[u]=i[u])})}return n}};b.widgetName="interactive-graph",b.defaultProps={...y.defaultProps,valid:!0,backgroundImage:ye,showTooltips:!1,correct:{type:y.defaultProps.graph.type,coords:null}};let f=b;const g=S.StyleSheet.create({singleSelectShort:{height:26},row:{flexDirection:"row",marginTop:Y.xSmall_8,alignItems:"center"}}),ar=f;try{f.displayName="InteractiveGraphEditor",f.__docgenInfo={description:`An editor for the InteractiveGraph widget, which allows the user to
specify the graph's properties and the correct answer.

Used in the exercise editor.`,displayName:"InteractiveGraphEditor",props:{apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!0,type:{name:"Readonly<Readonly<{ isArticle?: boolean | undefined; onInputError?: ((widgetId: any, value: string, message?: string | null | undefined) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown..."}},labels:{defaultValue:null,description:"The labels for the x and y axes.",name:"labels",required:!0,type:{name:"readonly string[]"}},range:{defaultValue:null,description:"The range of the graph in the x and y directions.",name:"range",required:!0,type:{name:"[x: Range, y: Range]"}},step:{defaultValue:null,description:`How far apart the tick marks on the axes are in the x and y
directions.`,name:"step",required:!0,type:{name:"[x: number, y: number]"}},gridStep:{defaultValue:null,description:"How far apart the grid lines are in the x and y directions.",name:"gridStep",required:!0,type:{name:"[x: number, y: number]"}},snapStep:{defaultValue:null,description:"How far apart the snap-to points are in the x and y directions.",name:"snapStep",required:!0,type:{name:"[x: number, y: number]"}},box:{defaultValue:null,description:"The size of the graph in pixels.",name:"box",required:!0,type:{name:"[x: number, y: number]"}},valid:{defaultValue:{value:"true"},description:`An error message to display in the graph area, or true if the
graph is valid.`,name:"valid",required:!1,type:{name:"string | boolean"}},backgroundImage:{defaultValue:{value:`{
    url: null,
} as const`},description:"The background image to display in the graph area and its properties.",name:"backgroundImage",required:!1,type:{name:"PerseusImageBackground"}},markings:{defaultValue:null,description:`The type of markings to display on the graph.
- graph: shows the axes and the grid lines
- grid: shows only the grid lines
- none: shows no markings`,name:"markings",required:!0,type:{name:"enum",value:[{value:'"graph"'},{value:'"grid"'},{value:'"none"'}]}},showProtractor:{defaultValue:null,description:"Whether to show the protractor on the graph.",name:"showProtractor",required:!0,type:{name:"boolean"}},showRuler:{defaultValue:null,description:"Whether to show the ruler on the graph.",name:"showRuler",required:!0,type:{name:"boolean"}},showTooltips:{defaultValue:{value:"false"},description:`Whether to show tooltips on the graph.
(Currently not used, but will be in the future.)`,name:"showTooltips",required:!1,type:{name:"boolean"}},rulerLabel:{defaultValue:null,description:"The label to display on the ruler, if any.",name:"rulerLabel",required:!0,type:{name:"string"}},rulerTicks:{defaultValue:null,description:"The number of ticks to display on the ruler.",name:"rulerTicks",required:!0,type:{name:"number"}},correct:{defaultValue:{value:`{
            type: InteractiveGraph.defaultProps.graph.type,
            coords: null,
        }`},description:`The current correct answer for the graph. Updated by this component
when the graph is changed.

Note that the "Correct answer:" textbox is not an interactive
element. Instead, it is a representation of the correct answer based
on the state of the interactive graph previewed at the bottom of the
editor page.`,name:"correct",required:!1,type:{name:"any"}},lockedFigures:{defaultValue:null,description:`The locked figures to display in the graph area.
Locked figures are graph elements (points, lines, line segmeents,
etc.) that are locked in place and not interactive.`,name:"lockedFigures",required:!1,type:{name:"LockedFigure[]"}},graph:{defaultValue:null,description:"The graph to display in the graph area.",name:"graph",required:!0,type:{name:"PerseusGraphType | undefined"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(props: Partial<Props>) => void"}}}}}catch{}const Se={mafs:{angle:!0,segment:!0,circle:!0,quadratic:!0,sinusoid:!0,polygon:!0,linear:!0,"linear-system":!0,ray:!0,"interactive-graph-locked-features-m2":!0,"interactive-graph-locked-features-m2b":!0}},sr={...H.defaults,flags:{...H.defaults.flags,...Se}};export{ar as I,sr as a,Se as f};
