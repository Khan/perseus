import{r as c,j as o,bf as _,a7 as m,bg as F,aj as G,Z as k,ag as S,V as y,bh as X,bi as Y,bj as le,bk as Q,bl as Z,bm as J,bn as ce,bo as de,b3 as he,b4 as ue,bp as pe,bq as me,br as fe,bs as be,bt as N,m as ye,bu as ge,d as ve}from"./iframe-P8a0QwVR.js";import{P as xe}from"./Popper-BR2hYYZN.js";class _e{_getIndex(e){return this._subscribers.findIndex(t=>t===e)}steal(e){const t=!!this._active;this._active=!0;for(const n of this._subscribers)n!==e&&n.activeStateStolen();return t}giveup(){this._active=!1}subscribe(e){if(this._getIndex(e)>=0)throw new Error("Already subscribed.");return this._subscribers.push(e),()=>{const n=this._getIndex(e);this._subscribers.splice(n,1)}}constructor(){this._subscribers=[],this._active=!1}}const Ee=100,we=75,j=new _e;class ee extends c.Component{componentDidMount(){const e=_.findDOMNode(this);if(e instanceof Text)throw new Error("TooltipAnchor must be applied to an Element. Text content is not supported.");this._unsubscribeFromTracker=j.subscribe(this),this._anchorNode=e,this._updateFocusivity(),e&&(e.addEventListener("focusin",this._handleFocusIn),e.addEventListener("focusout",this._handleFocusOut),e.addEventListener("mouseenter",this._handleMouseEnter),e.addEventListener("mouseleave",this._handleMouseLeave),this.props.anchorRef(this._anchorNode))}componentDidUpdate(e){(e.forceAnchorFocusivity!==this.props.forceAnchorFocusivity||e.children!==this.props.children)&&this._updateFocusivity()}componentWillUnmount(){this._unsubscribeFromTracker&&this._unsubscribeFromTracker(),this._clearPendingAction();const e=this._anchorNode;e&&(e.removeEventListener("focusin",this._handleFocusIn),e.removeEventListener("focusout",this._handleFocusOut),e.removeEventListener("mouseenter",this._handleMouseEnter),e.removeEventListener("mouseleave",this._handleMouseLeave)),this.state.active&&document.removeEventListener("keyup",this._handleKeyUp)}_updateFocusivity(){const e=this._anchorNode;if(!e)return;const{forceAnchorFocusivity:t}=this.props,n=e.getAttribute("tabindex");t&&!n?(e.setAttribute("tabindex","0"),this._weSetFocusivity=!0):!t&&n&&this._weSetFocusivity&&(e.removeAttribute("tabindex"),this._weSetFocusivity=!1)}_updateActiveState(e,t){this._hovered=e,this._focused=t,this._setActiveState(e||t)}_clearPendingAction(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}_setActiveState(e,t){if(this._stolenFromUs||e!==this.state.active||!this.state.active&&this._timeoutID)this._clearPendingAction();else if(e===this.state.active){this._timeoutID&&this._clearPendingAction();return}if(t=t||e&&j.steal(this),t)e?document.addEventListener("keyup",this._handleKeyUp):document.removeEventListener("keyup",this._handleKeyUp),this.setState({active:e}),this.props.onActiveChanged(e),!this._stolenFromUs&&!e&&j.giveup(),this._stolenFromUs=!1;else{const n=e?Ee:we;this._timeoutID=setTimeout(()=>{this._timeoutID=null,this._setActiveState(e,!0)},n)}}_renderAnchorableChildren(){const{children:e}=this.props;return typeof e=="string"?o.jsx(le,{children:e}):e}render(){const{"aria-describedby":e}=this.props,t=this._renderAnchorableChildren();return c.cloneElement(t,{"aria-describedby":e})}constructor(e){super(e),this.activeStateStolen=()=>{this._stolenFromUs=this.state.active||!!this._timeoutID,this._focused=!1,this._setActiveState(!1,!0)},this._handleFocusIn=()=>{this._updateActiveState(this._hovered,!0)},this._handleFocusOut=()=>{this._updateActiveState(this._hovered,!1)},this._handleMouseEnter=()=>{this._updateActiveState(!0,this._focused)},this._handleMouseLeave=()=>{this._updateActiveState(!1,this._focused)},this._handleKeyUp=t=>{t.key==="Escape"&&this.state.active&&(t.preventDefault(),t.stopPropagation(),this._updateActiveState(!1,!1))},this._focused=!1,this._hovered=!1,this.state={active:!1}}}ee.defaultProps={forceAnchorFocusivity:!0};let Fe=0;class B extends c.Component{_calculateDimensionsFromPlacement(){const{placement:e}=this.props,t=.5;switch(e){case"top":return{trimlinePoints:[`0,-${t}`,`${f},-${t}`],points:["0,0",`${f/2},${b}`,`${f},0`],height:b,width:f};case"right":return{trimlinePoints:[`${b+t},0`,`${b+t},${f}`],points:[`${b},0`,`0,${f/2}`,`${b},${f}`],width:b,height:f};case"bottom":return{trimlinePoints:[`0, ${b+t}`,`${f},${b+t}`],points:[`0, ${b}`,`${f/2},0`,`${f},${b}`],width:f,height:b};case"left":return{trimlinePoints:[`-${t},0`,`-${t},${f}`],points:["0,0",`${b},${f/2}`,`0,${f}`],width:b,height:f};default:throw new Error(`Unknown placement: ${e}`)}}_getFilterPositioning(){const{placement:e}=this.props;switch(e){case"top":return{y:"-50%",x:"-50%",offsetShadowX:0};case"bottom":return null;case"left":return{y:"-50%",x:"0%",offsetShadowX:1};case"right":return{y:"-50%",x:"-100%",offsetShadowX:-1};default:throw new Error(`Unknown placement: ${e}`)}}_maybeRenderDropshadow(e){const t=this._getFilterPositioning();if(!t)return null;const{placement:n}=this.props,{y:s,x:i,offsetShadowX:a}=t,l=`tooltip-dropshadow-${n}-${Fe++}`;return[o.jsxs("filter",{id:l,width:"200%",height:"200%",x:i,y:s,children:[o.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:m.xxSmall_6/2}),o.jsx("feComponentTransfer",{children:o.jsx("feFuncA",{type:"linear",slope:"0.3"})})]},"filter"),o.jsx("g",{transform:`translate(${a},5.5)`,children:o.jsx("polyline",{fill:F.core.shadow.transparent.mid,points:e.join(" "),stroke:F.core.shadow.transparent.mid,filter:`url(#${l})`})},"dropshadow")]}_getFullTailWidth(){return f+2*x}_getFullTailHeight(){return b+P}_getContainerStyle(){const{placement:e}=this.props,t=this._getFullTailWidth(),n=this._getFullTailHeight();switch(e){case"top":return{top:-1,width:t,height:n};case"right":return{left:1,width:n,height:t};case"bottom":return{top:1,width:t,height:n};case"left":return{left:-1,width:n,height:t};default:throw new Error(`Unknown placement: ${e}`)}}_getArrowStyle(){const{placement:e}=this.props;switch(e){case"top":return{marginLeft:x,marginRight:x,paddingBottom:P};case"right":return{marginTop:x,marginBottom:x,paddingLeft:P};case"bottom":return{marginLeft:x,marginRight:x,paddingTop:P};case"left":return{marginTop:x,marginBottom:x,paddingRight:P};default:throw new Error(`Unknown placement: ${e}`)}}_renderArrow(){const{trimlinePoints:e,points:t,height:n,width:s}=this._calculateDimensionsFromPlacement(),{color:i,show:a}=this.props;return a?o.jsxs("svg",{className:k.css(O.arrow),style:this._getArrowStyle(),width:s,height:n,"aria-hidden":!0,children:[this._maybeRenderDropshadow(t),o.jsx("polyline",{fill:S[i],stroke:S[i],points:t.join(" ")}),o.jsx("polyline",{fill:S[i],points:t.join(" "),stroke:F.core.shadow.transparent.mid}),o.jsx("polyline",{stroke:S[i],points:e.join(" ")})]}):o.jsx(G,{size:n})}render(){const{offset:e,placement:t,updateRef:n}=this.props;return o.jsx(y,{style:[O.tailContainer,{...e},this._getContainerStyle()],"data-placement":t,ref:n,children:this._renderArrow()})}}B.defaultProps={color:"white",show:!0};const P=m.xSmall_8,x=m.xSmall_8,f=m.large_24,b=m.small_12,O=k.StyleSheet.create({tailContainer:{position:"relative",pointerEvents:"none"},arrow:{overflow:"visible"}});class Ce extends c.Component{_setActiveState(e){this.setState({active:e}),this.props.onActiveChanged(e)}render(){const{id:e,children:t,updateBubbleRef:n,placement:s,isReferenceHidden:i,style:a,updateTailRef:l,tailOffset:d,backgroundColor:h}=this.props;return o.jsxs(y,{id:e,role:"tooltip","data-placement":s,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,ref:n,style:[i&&R.hide,R.bubble,R[`content-${s}`],a],children:[o.jsx(y,{style:[R.content,h&&{backgroundColor:S[h]}],children:t}),o.jsx(B,{updateRef:l,placement:s,offset:d,color:h})]})}constructor(...e){super(...e),this.state={active:!1},this.handleMouseEnter=()=>{this._setActiveState(!0)},this.handleMouseLeave=()=>{this.props.onActiveChanged(!1)}}}const R=k.StyleSheet.create({bubble:{position:"absolute"},hide:{pointerEvents:"none",opacity:0,backgroundColor:"transparent",color:"transparent"},"content-top":{flexDirection:"column"},"content-right":{flexDirection:"row-reverse"},"content-bottom":{flexDirection:"column-reverse"},"content-left":{flexDirection:"row"},content:{maxWidth:472,borderRadius:Y.radius.radius_040,border:`solid 1px ${F.core.border.neutral.subtle}`,backgroundColor:F.core.background.base.default,boxShadow:X.mid,justifyContent:"center"}});class ke extends c.Component{_renderTitle(){const{title:e}=this.props;return e?typeof e=="string"?o.jsx(J,{children:e}):e:null}_renderChildren(){const{children:e}=this.props;return typeof e=="string"?o.jsx(ce,{children:e}):e}render(){const e=this._renderTitle(),t=this._renderChildren(),n=e?K.withTitle:K.withoutTitle;return o.jsxs(y,{style:[n,this.props.contentStyle],testId:this.props.testId,children:[e,e&&t&&o.jsx(G,{size:m.xxxSmall_4}),t]})}}const K=k.StyleSheet.create({withoutTitle:{padding:`10px ${m.medium_16}px`},withTitle:{padding:m.medium_16}});var D=r=>r==null||typeof r!="object"?r:Array.isArray(r)?r.map(D):Object.keys(r).reduce((e,t)=>(e[t]=D(r[t]),e),{}),te=Object.freeze({Unknown:"Unknown",Internal:"Internal",InvalidInput:"InvalidInput",InvalidUse:"InvalidUse",NotFound:"NotFound",NotAllowed:"NotAllowed",Unauthorized:"Unauthorized",NotImplemented:"NotImplemented"});function w(r,e,t){return(e=function(n){var s=function(i,a){if(typeof i!="object"||i===null)return i;var l=i[Symbol.toPrimitive];if(l!==void 0){var d=l.call(i,a);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(i)}(n,"string");return typeof s=="symbol"?s:String(s)}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}class C{constructor(e,t,n){w(this,"_name",void 0),w(this,"_message",void 0),w(this,"_stackFrames",void 0),this._name=e,this._message=t,this._stackFrames=[...n]}get message(){return this._message}get name(){return this._name}get messageWithName(){return"".concat(this.name,": ").concat(this.message)}get stack(){return[...this._stackFrames]}get standardizedStack(){return"".concat(this.messageWithName,`
`).concat(this._stackFrames.join(`
`))}static fromConsequenceAndCause(e,t){for(var n,s=[],i=t.stack,a=(n=e==null?void 0:e.stack)!==null&&n!==void 0?n:[],l=i.length-1,d=a.length-1;l>=0&&d>=0&&i[l]===a[d];)s.unshift(i[l]),l--,d--;for(;l>=0;l--)s.unshift(i[l]);for(;d>=0;d--)s.unshift(a[d]);return new C(e.name,((h,u)=>{var p=v=>(v==null?void 0:v.trim())||"(empty message)",g=p(h);return u==null?g:"".concat(g,`
	caused by
		`).concat(p(u))})(e.message,t.messageWithName),s)}static normalize(e){var t,n,s,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,l=(t=e.message.toString().split(`
`).find(p=>p.trim().length))!==null&&t!==void 0?t:"(empty message)",d=e.toString(),h=((n=e.stack)!==null&&n!==void 0&&n.startsWith(d)&&e.stack!==d?e.stack.substring(d.length):(s=e.stack)!==null&&s!==void 0?s:"").split(`
`).filter(p=>p.trim().length),u=h.length>=i+a?i:0;return new C(e.name,l,h.slice(u))}static from(e){var t,n,s=e.toString(),i=((t=e.stack)!==null&&t!==void 0&&t.startsWith(s)&&e.stack!==s?e.stack.substring(s.length):(n=e.stack)!==null&&n!==void 0?n:"").split(`
`).filter(a=>a.trim().length);return new C(e.name,e.message,i)}}class Ie extends Error{constructor(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.Unknown,{cause:n,prefix:s,name:i,metadata:a,stripStackFrames:l,minimumFrameCount:d,compositeStack:h}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Object.freeze({});super(e),w(this,"kind",void 0),w(this,"originalMessage",void 0),w(this,"originalStack",void 0),w(this,"metadata",void 0),w(this,"cause",void 0),this.originalMessage=e,this.metadata=(v=>{if(v==null)return v;var I=D(v);return Object.freeze(I)})(a),this.name="".concat(s??"").concat(t).concat(i??"","Error"),this.kind=t,this.originalStack=this.stack,this.cause=n;var u=C.normalize(this,l??0,d??1);if(delete this.stack,this.stack=u.standardizedStack,n!=null){var p=C.from(n),g=C.fromConsequenceAndCause(u,p);this.message=g.message,h===!0&&(this.stack=g.standardizedStack)}}}class Se extends Ie{constructor(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:te.InvalidInput,n=arguments.length>2?arguments[2]:void 0;super("Unhandled case for '".concat(e,"'"),t,n)}}class U{constructor(){this.updateRef=e=>{var t;if(e){const n=_.findDOMNode(e);n instanceof HTMLElement&&n!==this._lastRef&&(this._lastRef=n,(t=this._targetFn)==null||t.call(this,n))}},this.setCallback=e=>{if(this._targetFn!==e){if(e&&typeof e!="function")throw new Error("targetFn must be a function");this._targetFn=e||void 0,this._lastRef&&this._targetFn&&this._targetFn(this._lastRef)}}}}const Pe=r=>{switch(r){case"auto":case"auto-start":case"auto-end":case"top":case"top-start":case"top-end":return"top";case"bottom":case"bottom-start":case"bottom-end":return"bottom";case"right":case"right-start":case"right-end":return"right";case"left":case"left-start":case"left-end":return"left";default:throw new Se(r)}};function Te({state:r}){const e=r.rects.popper.height+r.rects.reference.height;document.documentElement.clientHeight<e&&r.modifiersData.hide&&(r.modifiersData.hide={...r.modifiersData.hide,isReferenceHidden:!1})}const Re={name:"smallViewport",enabled:!0,phase:"main",fn:Te};class $ extends c.Component{componentDidMount(){const{anchorElement:e,autoUpdate:t}=this.props;!e||!t||(this._observer=new MutationObserver(()=>{var n;(n=this._popperUpdate)==null||n.call(this)}),this._observer.observe(e,{attributes:!0,childList:!0,subtree:!0}))}componentWillUnmount(){var e;(e=this._observer)==null||e.disconnect()}_renderPositionedContent(e){const{children:t}=this.props,{isReady:n}=this.state,s=Pe(e.placement)||this.props.placement;this._bubbleRefTracker.setCallback(e.ref),this._tailRefTracker.setCallback(e.arrowProps.ref),this._popperUpdate=e.update;const i={placement:s,style:{top:e.style.top,left:e.style.left,bottom:e.style.bottom,right:e.style.right,position:e.style.position,transform:e.style.transform,visibility:n?void 0:"hidden"},updateBubbleRef:this._bubbleRefTracker.updateRef,tailOffset:{bottom:e.arrowProps.style.bottom,right:e.arrowProps.style.right,top:e.arrowProps.style.top,left:e.arrowProps.style.left,transform:e.arrowProps.style.transform},updateTailRef:this._tailRefTracker.updateRef,isReferenceHidden:e.isReferenceHidden};return t(i)}render(){const{anchorElement:e,placement:t,rootBoundary:n,viewportPadding:s}=this.props,i=[Re];return n==="viewport"?i.push({name:"preventOverflow",options:{rootBoundary:"viewport",padding:s}}):i.push({name:"flip",options:{rootBoundary:"document"}}),o.jsx(xe,{referenceElement:e,strategy:"fixed",placement:t,modifiers:i,onFirstUpdate:this.handleFirstUpdate,children:a=>this._renderPositionedContent(a)})}constructor(e){super(e),this._bubbleRefTracker=new U,this._tailRefTracker=new U,this._observer=null,this._popperUpdate=null,this.handleFirstUpdate=()=>{this.setState({isReady:!0})},this.state={isReady:!1}}}$.defaultProps={rootBoundary:"viewport",viewportPadding:m.small_12};class Ae extends c.Component{static getDerivedStateFromProps(e,t){return{active:typeof e.opened=="boolean"?e.opened:t.active}}_updateAnchorElement(e){e&&e!==this.state.anchorElement&&this.setState({anchorElement:e})}_renderBubbleContent(){const{title:e,content:t,contentStyle:n,testId:s}=this.props;return typeof t=="string"?o.jsx(ke,{title:e,contentStyle:n,testId:s?`${s}-content`:void 0,children:t}):e?c.cloneElement(t,{title:e}):t}_renderPopper(e){const{backgroundColor:t,placement:n}=this.props;return o.jsx($,{anchorElement:this.state.anchorElement,placement:n,autoUpdate:this.props.autoUpdate,viewportPadding:this.props.viewportPadding,children:s=>o.jsx(Ce,{id:e,style:s.style,backgroundColor:t,tailOffset:s.tailOffset,isReferenceHidden:s.isReferenceHidden,placement:s.placement,updateTailRef:s.updateTailRef,updateBubbleRef:s.updateBubbleRef,onActiveChanged:i=>this.setState({activeBubble:i}),children:this._renderBubbleContent()})})}_getHost(){const{anchorElement:e}=this.state;return Q(e)||document.body}_renderTooltipAnchor(e){const{autoUpdate:t,children:n,forceAnchorFocusivity:s}=this.props,{active:i,activeBubble:a}=this.state,l=this._getHost(),d=t?this.state.anchorElement:!0,h=l&&(i||a)&&d,u=`${e}-aria-content`;return o.jsxs(c.Fragment,{children:[o.jsx(ee,{forceAnchorFocusivity:s,anchorRef:p=>this._updateAnchorElement(p),onActiveChanged:p=>this.setState({active:p}),"aria-describedby":h?u:void 0,children:n}),h&&_.createPortal(this._renderPopper(u),l)]})}render(){const{id:e}=this.props;return o.jsx(Z,{id:e,children:t=>this._renderTooltipAnchor(t)})}constructor(...e){super(...e),this.state={active:!1,activeBubble:!1}}}Ae.defaultProps={forceAnchorFocusivity:!0,placement:"top"};const je={close:void 0,placement:"top"},A=c.createContext(je);A.displayName="PopoverContext";class De extends c.Component{componentDidMount(){const e=_.findDOMNode(this);e&&this.props.anchorRef(e)}render(){const{children:e,id:t,onClick:n,"aria-controls":s,"aria-expanded":i}=this.props,a={id:t,"aria-controls":s,"aria-expanded":i};if(typeof e=="function"){const l=e({open:n});return c.cloneElement(l,a)}else return c.cloneElement(e,{...e.props,...a,onClick:e.props.onClick?l=>{l.stopPropagation(),e.props.onClick(),n()}:n})}}class Le extends c.Component{componentDidUpdate(e){e.placement!==this.props.placement&&this.props.onUpdate(this.props.placement)}render(){const{placement:e,children:t,id:n,isReferenceHidden:s,updateBubbleRef:i,updateTailRef:a,tailOffset:l,style:d,showTail:h,"aria-describedby":u,"aria-labelledby":p,"aria-label":g}=this.props,I=t.props.color;return o.jsx(c.Fragment,{children:o.jsxs(y,{"aria-label":g,"aria-describedby":u,"aria-labelledby":p,id:n,role:"dialog",ref:i,"data-placement":e,style:[s&&W.hide,W[`content-${e}`],d],children:[t,o.jsx(B,{show:h,color:I,updateRef:a,placement:e,offset:l})]})})}}const W=k.StyleSheet.create({hide:{pointerEvents:"none",opacity:0,backgroundColor:"transparent",color:"transparent"},"content-top":{flexDirection:"column"},"content-right":{flexDirection:"row-reverse"},"content-bottom":{flexDirection:"column-reverse"},"content-left":{flexDirection:"row"}}),ne='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';function L(r){return Array.from(r.querySelectorAll(ne))}function Be(r){return r.matches(ne)}class $e extends c.Component{componentDidMount(){window.addEventListener("keyup",this._handleKeyup),window.addEventListener("click",this._handleClick)}componentWillUnmount(){window.removeEventListener("keyup",this._handleKeyup),window.removeEventListener("click",this._handleClick)}render(){return null}constructor(...e){super(...e),this.state={isFirstClick:!0},this._handleKeyup=t=>{t.key==="Escape"&&(t.preventDefault(),t.stopPropagation(),this.props.onClose(!0))},this._handleClick=t=>{var s;if(this.state.isFirstClick){this.setState({isFirstClick:!1});return}const n=_.findDOMNode((s=this.props.contentRef)==null?void 0:s.current);if(n&&!n.contains(t.target)){t.preventDefault(),t.stopPropagation();const i=!Be(t.target);this.props.onClose(i)}}}}class se extends c.Component{componentDidMount(){const e=_.findDOMNode(this);e&&this.setInitialFocusableElement(e)}maybeGetInitialFocusElement(e){const{initialFocusId:t}=this.props;return t?e.querySelector(`#${t}`):null}maybeGetFirstFocusableElement(e){const t=L(e);return t.length?t[0]:null}render(){return this.props.children}constructor(...e){super(...e),this.setInitialFocusableElement=t=>{const n=this.maybeGetInitialFocusElement(t)||this.maybeGetFirstFocusableElement(t)||t;n===t&&(t.tabIndex=-1),setTimeout(()=>{n.focus()},this.props.delay||0)}}}class Me extends c.Component{componentDidMount(){this.addEventListeners()}componentDidUpdate(){this.removeEventListeners(),this.addEventListeners()}componentWillUnmount(){this.changeFocusabilityInsidePopover(!0),this.removeEventListeners()}removeEventListeners(){const{anchorElement:e}=this.props;e&&e.removeEventListener("keydown",this.handleKeydownPreviousFocusableElement),this.nextElementAfterPopover||window.removeEventListener("blur",()=>{this.changeFocusabilityInsidePopover(!0)}),this.firstFocusableElementInPopover&&this.firstFocusableElementInPopover.removeEventListener("keydown",this.handleKeydownFirstFocusableElement),this.lastFocusableElementInPopover&&this.lastFocusableElementInPopover.removeEventListener("keydown",this.handleKeydownLastFocusableElement),this.nextElementAfterPopover&&this.nextElementAfterPopover.removeEventListener("keydown",this.handleKeydownNextFocusableElement)}render(){const{children:e}=this.props;return o.jsx("div",{ref:this.getComponentRootNode,onClick:()=>{this.changeFocusabilityInsidePopover(!0)},onFocus:()=>{this.changeFocusabilityInsidePopover(!0)},onBlur:()=>{this.changeFocusabilityInsidePopover(!1)},children:o.jsx(se,{initialFocusId:this.props.initialFocusId,delay:this.props.initialFocusDelay,children:e})})}constructor(...e){super(...e),this.elementsThatCanBeFocusableInsidePopover=[],this.firstFocusableElementInPopover=null,this.lastFocusableElementInPopover=null,this.addEventListeners=()=>{const{anchorElement:t}=this.props;t&&t.addEventListener("keydown",this.handleKeydownPreviousFocusableElement),this.rootNode&&(this.elementsThatCanBeFocusableInsidePopover=L(this.rootNode),this.firstFocusableElementInPopover=this.elementsThatCanBeFocusableInsidePopover[0],this.lastFocusableElementInPopover=this.elementsThatCanBeFocusableInsidePopover[this.elementsThatCanBeFocusableInsidePopover.length-1]),this.nextElementAfterPopover=this.getNextFocusableElement(),this.nextElementAfterPopover||window.addEventListener("blur",()=>{this.changeFocusabilityInsidePopover(!0)}),this.firstFocusableElementInPopover&&this.firstFocusableElementInPopover.addEventListener("keydown",this.handleKeydownFirstFocusableElement),this.lastFocusableElementInPopover&&this.lastFocusableElementInPopover.addEventListener("keydown",this.handleKeydownLastFocusableElement),this.nextElementAfterPopover&&this.nextElementAfterPopover.addEventListener("keydown",this.handleKeydownNextFocusableElement)},this.handleKeydownFirstFocusableElement=t=>{var n;t.key==="Tab"&&t.shiftKey&&(t.preventDefault(),(n=this.props.anchorElement)==null||n.focus())},this.handleKeydownLastFocusableElement=t=>{var n;this.nextElementAfterPopover&&t.key==="Tab"&&!t.shiftKey&&(t.preventDefault(),(n=this.nextElementAfterPopover)==null||n.focus())},this.getNextFocusableElement=()=>{const{anchorElement:t}=this.props;if(!t)return;const s=L(document).filter(a=>this.elementsThatCanBeFocusableInsidePopover.indexOf(a)<0),i=s.indexOf(t);if(i>=0&&i!==s.length-1){const a=i<s.length-1?i+1:0;return s[a]}},this.getComponentRootNode=t=>{if(!t)return;const n=_.findDOMNode(t);if(!n)throw new Error("Assertion error: root node should exist after mount");this.rootNode=n},this.handleFocusPreviousFocusableElement=()=>{this.props.anchorElement&&this.props.anchorElement.focus()},this.changeFocusabilityInsidePopover=(t=!0)=>{const n=t?"0":"-1";this.elementsThatCanBeFocusableInsidePopover.forEach(s=>{s.setAttribute("tabIndex",n)})},this.handleFocusNextFocusableElement=()=>{this.nextElementAfterPopover&&this.nextElementAfterPopover.focus()},this.handleKeydownPreviousFocusableElement=t=>{var n;t.key==="Tab"&&!t.shiftKey&&(t.preventDefault(),(n=this.firstFocusableElementInPopover)==null||n.focus())},this.handleKeydownNextFocusableElement=t=>{var n;t.key==="Tab"&&t.shiftKey&&(t.preventDefault(),(n=this.lastFocusableElementInPopover)==null||n.focus())}}}class oe extends c.Component{static getDerivedStateFromProps(e,t){return{opened:typeof e.opened=="boolean"?e.opened:t.opened}}renderContent(e){const{content:t}=this.props,n=typeof t=="function"?t({close:this.handleClose}):t;return c.cloneElement(n,{ref:this.contentRef,uniqueId:e})}renderPopper(e){const{initialFocusId:t,placement:n,showTail:s,portal:i,"aria-label":a,"aria-describedby":l,rootBoundary:d,viewportPadding:h,initialFocusDelay:u}=this.props,{anchorElement:p}=this.state,g=l||`${e}-content`,v=a?void 0:`${e}-title`,I=o.jsx($,{anchorElement:p,placement:n,rootBoundary:d,viewportPadding:h,children:re=>o.jsx(Le,{...re,"aria-label":a,"aria-describedby":g,"aria-labelledby":v,id:e,onUpdate:ae=>this.setState({placement:ae}),showTail:s,children:this.renderContent(e)})});return i?o.jsx(Me,{anchorElement:p,initialFocusId:t,initialFocusDelay:u,children:I}):o.jsx(se,{initialFocusId:t,delay:u,children:I})}getHost(){return Q(this.state.anchorElement)||document.body}renderPortal(e,t){if(!t)return null;const{portal:n}=this.props,s=this.getHost();return n&&s?_.createPortal(this.renderPopper(e),s):this.renderPopper(e)}render(){const{children:e,dismissEnabled:t,id:n}=this.props,{opened:s,placement:i}=this.state;return o.jsxs(A.Provider,{value:{close:this.handleClose,placement:i},children:[o.jsx(Z,{id:n,children:a=>o.jsxs(c.Fragment,{children:[o.jsx(De,{anchorRef:this.updateRef,id:`${a}-anchor`,"aria-controls":a,"aria-expanded":s?"true":"false",onClick:this.handleOpen,children:e}),this.renderPortal(a,s)]})}),t&&s&&o.jsx($e,{onClose:this.handleClose,contentRef:this.contentRef})]})}constructor(...e){super(...e),this.state={opened:!!this.props.opened,placement:this.props.placement},this.contentRef=c.createRef(),this.maybeReturnFocus=()=>{const{anchorElement:t}=this.state,{closedFocusId:n}=this.props;if(n){const s=_.findDOMNode(document.getElementById(n));s==null||s.focus();return}t&&t.focus()},this.handleClose=(t=!0)=>{this.setState({opened:!1},()=>{var n,s;(s=(n=this.props).onClose)==null||s.call(n),t&&this.maybeReturnFocus()})},this.handleOpen=()=>{this.props.dismissEnabled&&this.state.opened?this.handleClose(!0):this.setState({opened:!0})},this.updateRef=t=>{t&&this.state.anchorElement!==t&&this.setState({anchorElement:t})}}}oe.defaultProps={placement:"top",showTail:!0,portal:!0,rootBoundary:"viewport"};class ie extends c.Component{render(){const{"aria-label":e,style:t,testId:n}=this.props;return o.jsx(A.Consumer,{children:({close:s})=>o.jsx(he,{icon:ue,"aria-label":e,onClick:s,kind:"tertiary",actionType:"neutral",style:t,testId:n})})}}ie.defaultProps={"aria-label":"Close Popover"};class M extends c.Component{render(){const{"aria-label":e,children:t,closeButtonLight:n,closeButtonLabel:s,closeButtonVisible:i,style:a,testId:l}=this.props;return o.jsxs(y,{testId:l,style:[H.content,a],"aria-label":e,children:[i&&o.jsx(ie,{"aria-label":s,style:[H.closeButton,n&&de.inverse],testId:`${l||"popover"}-close-btn`}),t]})}}M.defaultProps={closeButtonLight:!1,closeButtonVisible:!1};const H=k.StyleSheet.create({content:{borderRadius:Y.radius.radius_040,border:`solid 1px ${F.core.border.neutral.subtle}`,backgroundColor:F.core.background.base.default,boxShadow:X.mid,margin:0,maxWidth:m.medium_16*18,padding:m.large_24,overflow:"hidden",justifyContent:"center"},closeButton:{margin:0,position:"absolute",right:m.xxxSmall_4,top:m.xxxSmall_4,zIndex:1}}),Ne=pe("img");class Oe extends c.Component{componentDidMount(){const{icon:e,image:t}=this.props;if(t&&e)throw new Error("'image' and 'icon' cannot be used at the same time. You can fix this by either removing 'image' or 'icon' from your instance.")}validateProps({placement:e}){if(this.props.image&&(e==="left"||e==="right"))throw new Error("'image' can only be vertically placed. You can fix this by either changing `placement` to `top` or `bottom` or removing the `image` prop inside `content`.")}render(){const{closeButtonLabel:e,closeButtonVisible:t,content:n,icon:s,image:i,style:a,title:l,testId:d,uniqueId:h}=this.props;return o.jsx(A.Consumer,{children:({close:u,placement:p})=>(this.validateProps({close:u,placement:p}),o.jsxs(M,{closeButtonLight:i&&p==="top",closeButtonLabel:e,closeButtonVisible:t,style:a,testId:d,children:[o.jsxs(y,{style:!!s&&E.withIcon,children:[this.maybeRenderImage({placement:p}),this.maybeRenderIcon(),o.jsxs(y,{style:E.text,children:[o.jsx(J,{id:`${h}-title`,style:E.title,children:l}),o.jsx(me,{id:`${h}-content`,children:n})]})]}),this.maybeRenderActions(u)]}))})}constructor(...e){super(...e),this.maybeRenderImage=({placement:t})=>{const{image:n}=this.props;return n?o.jsx(y,{style:[E.image,t==="bottom"&&E.imageToBottom],children:n}):null},this.maybeRenderIcon=()=>{const{icon:t,iconAlt:n}=this.props;return t?o.jsx(y,{style:E.iconContainer,children:typeof t!="string"?t:o.jsx(Ne,{src:t,style:E.icon,alt:n||""})}):null},this.maybeRenderActions=t=>{const{actions:n}=this.props;return n?o.jsx(y,{style:E.actions,children:typeof n=="function"?n({close:t}):n}):null}}}Oe.defaultProps={closeButtonVisible:!1};const E=k.StyleSheet.create({actions:{marginTop:m.large_24,flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},text:{justifyContent:"center"},title:{marginBottom:m.xSmall_8},iconContainer:{alignItems:"center",justifyContent:"center",height:m.xxxLarge_64,width:m.xxxLarge_64,minWidth:m.xxxLarge_64,marginRight:m.medium_16,overflow:"hidden"},icon:{width:"100%"},withIcon:{flexDirection:"row"},image:{marginBottom:m.large_24,marginLeft:-24,marginRight:-24,marginTop:-24,width:`calc(100% + ${m.large_24*2}px)`},imageToBottom:{marginBottom:-24,marginTop:m.large_24,order:1}}),We={title:"Math Input/Components/v2 Keypad With Mathquill",tags:["!dev"]};function T(){const r=c.useRef(null),[e,t]=c.useState(),[n,s]=c.useState(!0),[i,a]=c.useState(fe.NONE);c.useEffect(()=>{if(!e&&r.current){const h=be(r.current,"en",ye,u=>({...u,handlers:{edit:p=>{a(N(p))}}}));t(h)}},[e]);const l=ge("en",{sin:"sin",cos:"cos",tan:"tan"});function d(h){if(!e)return;h==="DISMISS"&&s(!1);const u=l[h];u?(u(e,h),a(N(e))):console.warn(`No translation to Mathquill for: ${h}`)}return o.jsxs("div",{style:{maxWidth:"400px",margin:"2em"},children:[o.jsx(oe,{content:o.jsx(M,{style:{padding:0,paddingBottom:m.xxSmall_6,maxWidth:"initial"},children:o.jsx(ve,{extraKeys:["x","y","PI","THETA"],onClickKey:d,cursorContext:i,advancedRelations:!0,basicRelations:!0,divisionKey:!0,logarithms:!0,convertDotToTimes:!0,preAlgebra:!0,trigonometry:!0,onAnalyticsEvent:async()=>{},showDismiss:!0})}),dismissEnabled:!0,opened:n,children:o.jsx("div",{style:{width:"100%",marginBottom:"1em",border:`1px solid ${S.offBlack16}`},ref:r})}),o.jsx("button",{onClick:()=>s(!n),children:n?"close keypad":"open keypad"})]})}T.__docgenInfo={description:"",methods:[],displayName:"V2KeypadWithMathquill"};var V,z,q;T.parameters={...T.parameters,docs:{...(V=T.parameters)==null?void 0:V.docs,source:{originalSource:`function V2KeypadWithMathquill() {
  const mathFieldWrapperRef = React.useRef<HTMLDivElement>(null);
  const [mathField, setMathField] = React.useState<MathFieldInterface>();
  const [keypadOpen, setKeypadOpen] = React.useState<boolean>(true);
  const [cursorContext, setCursorContext] = React.useState<(typeof CursorContext)[keyof typeof CursorContext]>(CursorContext.NONE);
  React.useEffect(() => {
    if (!mathField && mathFieldWrapperRef.current) {
      const mathFieldInstance = createMathField(mathFieldWrapperRef.current, "en", mockStrings,
      // TODO(LEMS-2656): remove TS suppression
      // @ts-expect-error: Type 'EditableMathQuill' is not assignable to type 'MathFieldInterface'.
      baseConfig => ({
        ...baseConfig,
        handlers: {
          edit: (_mathField: MathFieldInterface) => {
            setCursorContext(getCursorContext(_mathField));
          }
        }
      }));
      setMathField(mathFieldInstance);
    }
  }, [mathField]);
  const keyTranslator = getKeyTranslator("en", {
    sin: "sin",
    cos: "cos",
    tan: "tan"
  });
  function handleClickKey(key: KeypadKey) {
    if (!mathField) {
      return;
    }
    if (key === "DISMISS") {
      setKeypadOpen(false);
    }
    const mathFieldCallback = keyTranslator[key];
    // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions
    if (mathFieldCallback) {
      mathFieldCallback(mathField, key);
      setCursorContext(getCursorContext(mathField));
    } else {
      // eslint-disable-next-line no-console
      console.warn(\`No translation to Mathquill for: \${key}\`);
    }
  }
  return <div style={{
    maxWidth: "400px",
    margin: "2em"
  }}>
            <Popover content={<PopoverContentCore style={{
      padding: 0,
      paddingBottom: spacing.xxSmall_6,
      maxWidth: "initial"
    }}>
                        <Keypad extraKeys={["x", "y", "PI", "THETA"]} onClickKey={handleClickKey} cursorContext={cursorContext} advancedRelations basicRelations divisionKey logarithms convertDotToTimes preAlgebra trigonometry onAnalyticsEvent={async () => {}} showDismiss />
                    </PopoverContentCore>} dismissEnabled opened={keypadOpen}>
                <div style={{
        width: "100%",
        marginBottom: "1em",
        border: \`1px solid \${color.offBlack16}\`
      }} ref={mathFieldWrapperRef} />
            </Popover>
            <button onClick={() => setKeypadOpen(!keypadOpen)}>
                {keypadOpen ? "close keypad" : "open keypad"}
            </button>
        </div>;
}`,...(q=(z=T.parameters)==null?void 0:z.docs)==null?void 0:q.source}}};const He=["V2KeypadWithMathquill"];export{T as V2KeypadWithMathquill,He as __namedExportsOrder,We as default};
