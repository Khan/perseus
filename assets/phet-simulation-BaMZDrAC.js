var ae=Object.defineProperty;var se=(e,r,t)=>r in e?ae(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var C=(e,r,t)=>(se(e,typeof r!="symbol"?r+"":r,t),t);import{j as n}from"./jsx-runtime-BT65X5dW.js";import{r as _}from"./index-C6mWTJJr.js";import{n as F}from"./no-important-DlFk8a1I.js";import{T as le,c as de,m as ce,u as ue,b as pe,f as P,I as M,x as Q}from"./index-BDsoIsav.js";import{u as Z,g as me,i as fe,L as he}from"./index-BN1f3DJf.js";import{c as X,L as ge}from"./index-gdjMQqRz.js";import{V as v,a as V}from"./index-C0xJ1VDw.js";import{C as be}from"./index-DD9muzfp.js";import{e as w,b as c,a as y,f as $,c as j,s as f}from"./index-BfjDPqC2.js";import{P as q}from"./index-BPL71wmx.js";import{L as ye}from"./index-DE1wyAWu.js";import{w as xe}from"./warning-circle-BLJ1dLdU.js";import{V as U}from"./index-DyG-XbLr.js";import{a as ve}from"./i18n-context-BlpvwUdd.js";import{g as we}from"./dependencies-BsVPGK1s.js";import{l as Se}from"./constants-BIpV3g0K.js";const Ce=(e,r="")=>({type:e,isSupported:!1,message:r}),ke=w.size_040,D={root:{color:y.action,border:{width:{primary:{default:c.width.none,hover:c.width.medium,press:c.width.medium},secondary:{default:c.width.thin,hover:c.width.thin,press:c.width.thin},tertiary:{default:c.width.none,hover:c.width.medium,press:c.width.medium}},offset:{primary:c.width.medium,secondary:0,tertiary:0},radius:{small:c.radius.radius_040,medium:c.radius.radius_040,large:c.radius.radius_040}},sizing:{height:{small:w.size_320,medium:w.size_400,large:w.size_560},underline:{hover:w.size_020,press:w.size_010}},padding:{medium:w.size_160,large:w.size_320},font:{size:{large:"1.8rem"},lineHeight:{small:$.lineHeight.xMedium,default:$.lineHeight.large,large:"2.6rem"},weight:{default:$.weight.bold},offset:{default:ke}}},icon:{color:{secondary:{progressive:{hover:{background:"transparent",foreground:y.action.secondary.progressive.hover.foreground}},destructive:{hover:{background:"transparent",foreground:y.action.secondary.destructive.hover.foreground}},neutral:{hover:{background:"transparent",foreground:y.action.secondary.neutral.hover.foreground}}}},border:{radius:c.radius.radius_full},margin:{inline:{inner:w.size_060,outer:`calc(-1 * ${c.width.medium})`}},padding:w.size_020}},N=j.offWhite,Ie=ce(D,{root:{color:{secondary:{progressive:{default:{border:j.fadedBlue,background:N},hover:{background:N,foreground:y.action.secondary.progressive.default.foreground},press:{background:j.fadedBlue8}},destructive:{default:{border:j.fadedRed,background:N},hover:{background:N,foreground:y.action.secondary.destructive.default.foreground},press:{background:j.fadedRed8}}}},border:{radius:{medium:c.radius.radius_120,small:c.radius.radius_080,large:c.radius.radius_120}},font:{weight:{default:$.weight.regular}}},icon:{color:{secondary:{progressive:{hover:{background:j.fadedBlue16,foreground:y.action.secondary.progressive.default.foreground}},destructive:{hover:{background:j.fadedRed16,foreground:y.action.secondary.destructive.default.foreground}}}},border:{radius:c.radius.radius_full},margin:{inline:{outer:`calc(-1 * ${w.size_080})`}},padding:w.size_020}}),je={default:D,khanmigo:Ie},Y=de(D);function _e(e){const r=_.useContext(le),t=je[r]||D;return n.jsx(Y.Provider,{value:t,children:e.children})}function G({icon:e,size:r,style:t,testId:o}){const s={"aria-hidden":!0,color:"currentColor",style:t,testId:o};switch(r){case"small":return n.jsx(q,{...s,size:"small",icon:e});case"medium":default:return n.jsx(q,{...s,size:"medium",icon:e})}}const Le=V("a"),ze=V("button"),We=V(he),Be=_.forwardRef(function(r,t){const{children:o,disabled:s,href:i,id:u,skipClientNav:d,style:h,testId:a,type:p,...m}=r,l={"data-testid":a,id:u,role:"button",style:[Te.reset,h],...m},g=Z();return i&&!s?g&&!d&&fe(i)?n.jsx(We,{...l,to:i,ref:t,children:o}):n.jsx(Le,{...l,href:i,ref:t,children:o}):n.jsx(ze,{type:p||"button",...l,"aria-disabled":s,ref:t,children:o})}),Te=F.StyleSheet.create({reset:{position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",margin:0,padding:0,border:"none",cursor:"pointer",outline:"none",textDecoration:"none",boxSizing:"border-box",touchAction:"manipulation",userSelect:"none",":focus":{WebkitTapHighlightColor:"rgba(0,0,0,0)"}}}),Pe=_.forwardRef(function(r,t){const{theme:o,themeName:s}=ue(Y),i=pe(Re,o),{children:u,skipClientNav:d,actionType:h,disabled:a,focused:p,hovered:m,href:l=void 0,kind:g="primary",labelStyle:L,pressed:A,size:S="medium",style:O,testId:x,type:H=void 0,spinner:W,startIcon:B,endIcon:z,id:E,waiting:Ve,...ee}=r,k=$e(h,g,S,o,s),T=W||a,re=[i.shared,B&&i.withStartIcon,z&&i.withEndIcon,k.default,T&&k.disabled,!T&&(A?k.pressed:p&&k.focused),S==="small"&&i.small,S==="large"&&i.large],te=S==="small"?X:ge,ne=n.jsx(te,{style:[i.text,S==="small"&&i.smallText,S==="large"&&i.largeText,L,W&&i.hiddenText,g==="tertiary"&&!T&&(A?[k.hover,k.active]:m&&k.hover)],testId:x?`${x}-inner-label`:void 0,children:u}),oe={medium:"small",small:"xsmall",large:"medium"},K=S==="small"?"small":"medium",ie=n.jsxs(_.Fragment,{children:[B&&n.jsx(v,{style:i.iconWrapper,children:n.jsx(G,{size:K,icon:B,style:[i.startIcon,g==="tertiary"&&i.tertiaryStartIcon],testId:x?`${x}-start-icon`:void 0})}),ne,W&&n.jsx(be,{style:i.spinner,size:oe[S],light:g==="primary",testId:`${x||"button"}-spinner`}),z&&n.jsx(v,{testId:x?`${x}-end-icon-wrapper`:void 0,style:[R.endIcon,i.iconWrapper,i.endIconWrapper,g==="tertiary"&&i.endIconWrapperTertiary,!T&&(p||m)&&g!=="primary"&&k.iconWrapperHovered],children:n.jsx(G,{size:K,icon:z,testId:x?`${x}-end-icon`:void 0})})]});return n.jsx(Be,{...ee,disabled:T,href:l,id:E,ref:t,skipClientNav:d,style:[re,O],testId:x,tabIndex:r.tabIndex,type:H,children:ie})}),Re=e=>({shared:{height:e.root.sizing.height.medium,paddingBlock:0,paddingInline:e.root.padding.medium},small:{borderRadius:e.root.border.radius.small,height:e.root.sizing.height.small},large:{borderRadius:e.root.border.radius.large,height:e.root.sizing.height.large},text:{alignItems:"center",fontWeight:e.root.font.weight.default,whiteSpace:"nowrap",overflow:"hidden",lineHeight:e.root.font.lineHeight.default,textOverflow:"ellipsis",display:"inline-block",pointerEvents:"none"},smallText:{lineHeight:e.root.font.lineHeight.small},largeText:{fontSize:e.root.font.size.large,lineHeight:e.root.font.lineHeight.large},hiddenText:{visibility:"hidden"},spinner:{position:"absolute"},startIcon:{marginInlineStart:e.icon.margin.inline.outer,marginInlineEnd:e.icon.margin.inline.inner},tertiaryStartIcon:{marginInlineStart:0},endIcon:{marginInlineStart:e.icon.margin.inline.inner},iconWrapper:{borderRadius:e.icon.border.radius,padding:e.icon.padding,minWidth:"auto"},endIconWrapper:{marginInlineStart:e.icon.margin.inline.inner,marginInlineEnd:e.icon.margin.inline.outer},endIconWrapperTertiary:{marginInlineEnd:0}}),R={},$e=(e="progressive",r,t,o,s)=>{const i=`${e}-${r}-${t}-${s}`;if(R[i])return R[i];const u=t==="large"?o.root.padding.large:o.root.padding.medium,d=o.root.border.width[r],h=o.root.border.offset[r],a=o.root.color[r][e],p=o.root.color[r].disabled,m={borderColor:p.border,borderWidth:d.default,background:p.background,color:p.foreground},l={...m,outline:"none",boxShadow:"none",textDecoration:"none",textDecorationThickness:"unset",textUnderlineOffset:"unset"},g={default:{borderRadius:o.root.border.radius[t],paddingInline:r==="tertiary"?0:u,borderStyle:"solid",borderWidth:d.default,borderColor:a.default.border,background:a.default.background,color:a.default.foreground,":hover":{background:a.hover.background,color:a.hover.foreground,...r==="primary"?{outline:`${d.hover} solid ${a.hover.border}`,outlineOffset:h}:void 0,...r==="secondary"?{borderColor:a.hover.border,boxShadow:`inset 0 0 0 ${d.hover} ${a.hover.border}`}:void 0,...r==="tertiary"?{textDecoration:"underline",textUnderlineOffset:o.root.font.offset.default,textDecorationThickness:o.root.sizing.underline.hover}:void 0},"@media not (hover: hover)":{":hover":{backgroundColor:"transparent"}},":active":{background:a.press.background,color:a.press.foreground,...r==="primary"?{outline:`${d.press} solid ${a.press.border}`,outlineOffset:h}:void 0,...r==="secondary"?{borderColor:a.press.border,boxShadow:`inset 0 0 0 ${d.press} ${a.press.border}`}:void 0,...r==="tertiary"?{textDecoration:"underline",textUnderlineOffset:o.root.font.offset.default,textDecorationThickness:o.root.sizing.underline.press}:void 0},...P.focus,...r==="secondary"?{":focus-visible:hover":{...P.focus[":focus-visible"],boxShadow:`inset 0 0 0 ${d.hover} ${a.hover.border}, ${P.focus[":focus-visible"].boxShadow}`},":focus-visible:active":{...P.focus[":focus-visible"],boxShadow:`inset 0 0 0 ${d.press} ${a.press.border}, ${P.focus[":focus-visible"].boxShadow}`}}:{}},disabled:{cursor:"not-allowed",...m,":hover":l,":active":l,":focus-visible":m},iconWrapperHovered:{...r==="secondary"?{backgroundColor:o.icon.color[r][e].hover.background,color:o.icon.color[r][e].hover.foreground}:void 0}};return R[i]=F.StyleSheet.create(g),R[i]},Fe=_.forwardRef(function(r,t){const{href:o=void 0,type:s=void 0,children:i,skipClientNav:u,onClick:d,beforeNav:h=void 0,safeWithNav:a=void 0,tabIndex:p,target:m,rel:l,actionType:g="progressive",kind:L="primary",size:A="medium",disabled:S=!1,spinner:O=!1,...x}=r,H=Z(),W=me(o,u,H),B=h?{beforeNav:h}:{target:m};return n.jsx(W,{disabled:O||S,href:o,role:"button",type:s,onClick:d,safeWithNav:a,rel:l,...B,children:(z,E)=>n.jsx(_e,{children:n.jsx(Pe,{...x,...z,...E,disabled:S,spinner:O||z.waiting,actionType:g,kind:L,size:A,skipClientNav:u,href:o,target:m,type:s,tabIndex:p,ref:t,children:i})})})}),Ae=""+new URL("info-C9QkPWf7.svg",import.meta.url).href,Oe=""+new URL("smiley-DF1jp_kf.svg",import.meta.url).href,Ue=""+new URL("warning-By3DoRa6.svg",import.meta.url).href,Ne=e=>{switch(e){case"success":return{color:y.status.success.foreground,icon:Oe,role:"status"};case"warning":return{color:y.status.warning.foreground,icon:Ue,role:"alert",ariaLive:"polite"};case"critical":return{color:y.status.critical.foreground,icon:xe,role:"alert"};default:return{color:y.status.notice.foreground,icon:Ae,role:"status"}}},De=e=>{const{actions:r,"aria-label":t,dismissAriaLabel:o="Dismiss banner.",onDismiss:s,kind:i="info",layout:u,text:d,testId:h,icon:a}=e,p=()=>r==null?void 0:r.filter(Boolean).map((l,g)=>{if(l.type==="custom")return n.jsx(v,{style:b.action,children:l.node},`custom-action-${g}`);const L=l.onClick;return l.type==="link"?n.jsx(v,{style:b.action,children:n.jsx(ye,{href:l.href,onClick:L,"aria-label":l.ariaLabel??l.title,style:b.link,children:l.title})},l.title):n.jsx(v,{style:b.action,children:n.jsx(Fe,{kind:"tertiary",size:"small","aria-label":l.ariaLabel??l.title,onClick:L,children:l.title})},l.title)}),m=Ne(i);return n.jsxs(v,{style:[b.containerOuter,u==="floating"&&b.floatingBorder,{borderInlineStartColor:m.color}],role:m.role,"aria-label":t,"aria-live":m.ariaLive,testId:h,children:[n.jsx(v,{style:[b.backgroundColor,{backgroundColor:m.color}]}),n.jsxs(v,{style:b.containerInner,children:[n.jsx(q,{icon:a||m.icon,size:"medium",style:b.icon,"aria-label":i,testId:"banner-kind-icon",role:"img"}),n.jsxs(v,{style:b.labelAndButtonsContainer,children:[n.jsx(v,{style:b.labelContainer,children:n.jsx(X,{children:d})}),r&&n.jsx(v,{style:b.actionsContainer,children:p()})]}),s?n.jsx(v,{style:b.dismissContainer,children:n.jsx(M,{icon:Q,kind:"tertiary",actionType:"neutral",onClick:s,style:b.dismiss,"aria-label":o})}):null]})]})},b=F.StyleSheet.create({backgroundColor:{position:"absolute",top:0,bottom:0,left:0,right:0,opacity:.08},containerOuter:{borderInlineStartWidth:f.xxSmall_6,width:"100%",backgroundColor:y.surface.primary},containerInner:{flexDirection:"row",padding:f.xSmall_8},icon:{marginTop:f.xSmall_8,marginBottom:f.xSmall_8,marginInlineStart:f.xxxxSmall_2,marginInlineEnd:f.xSmall_8,alignSelf:"flex-start",color:y.icon.primary},labelAndButtonsContainer:{flex:1,flexDirection:"row",alignItems:"center",alignContent:"center",flexWrap:"wrap",justifyContent:"space-between"},labelContainer:{flexShrink:1,margin:f.xSmall_8,textAlign:"start",overflowWrap:"break-word"},actionsContainer:{flexDirection:"row",justifyContent:"flex-start",marginTop:f.xSmall_8,marginBottom:f.xSmall_8,height:18,alignItems:"center"},action:{marginLeft:f.xSmall_8,marginRight:f.xSmall_8,justifyContent:"center"},link:{fontSize:$.size.small},dismiss:{flexShrink:1},dismissContainer:{height:40,width:40,justifyContent:"center",alignItems:"center",marginLeft:f.xSmall_8,marginRight:f.xSmall_8},floatingBorder:{borderRadius:c.radius.radius_040,overflow:"hidden"}}),He=""+new URL("corners-out-Blw9vUtj.svg",import.meta.url).href,Ee=()=>Ce("phet-simulation"),Me=66;class J extends _.Component{constructor(t){super(t);C(this,"iframeRef",_.createRef());C(this,"locale");C(this,"isWidget",!0);C(this,"state",{url:null,banner:null,isFullScreen:!1});C(this,"getPhetCompatibleLocale",t=>{switch(t){case"pt-pt":return"pt";case"zh-hans":return"zh_CN";case"zh-hant":return"zh_TW";case"fa-af":return"fa_DA";default:return t}});C(this,"displayLoadFailure",()=>{this.setState({url:null,banner:{message:this.context.strings.simulationLoadFail,kind:"critical"}})});C(this,"toggleFullScreen",()=>{this.setState(t=>({isFullScreen:!t.isFullScreen}))});this.locale=this.getPhetCompatibleLocale(we().kaLocale)}async componentDidMount(){await this.updateSimState(this.props.url)}async componentDidUpdate(t){t.url!==this.props.url&&await this.updateSimState(this.props.url)}getPromptJSON(){return Ee()}async updateSimState(t){const o=qe(t,this.locale);if(o===null){this.displayLoadFailure();return}if(!(await fetch(o)).ok){this.displayLoadFailure();return}const i=await this.showLocaleWarning(o);this.setState({url:o,banner:i?{message:this.context.strings.simulationLocaleWarning,kind:"warning"}:null})}async showLocaleWarning(t){if(!t)return!1;const s=/https:\/\/phet\.colorado\.edu\/sims\/html\/([a-zA-Z0-9-]+)\/.*/g.exec(t.toString());if(s===null)return!1;const i=s[1],u=await fetch(`https://phet.colorado.edu/sims/html/${i}/latest/string-map.json`);if(!u.ok)return!1;let d;try{d=await u.json()}catch{return!1}const h=Object.keys(d),a=this.locale.split("_")[0];for(const p of h)if(a===p.split("_")[0])return!1;return!0}render(){const{isFullScreen:t,banner:o,url:s}=this.state,{isMobileApp:i}=this.props.apiOptions,u=t&&i,d=u?{...I.appFullScreenWidgetContainer}:I.widgetContainer,h=u?I.appFullScreenIframeContainer:I.iframeContainer;return n.jsxs(U,{style:d,children:[o!==null&&n.jsx(U,{style:{marginBottom:Se},children:n.jsx(De,{layout:"floating",kind:o.kind,text:o.message})}),u&&n.jsx(U,{style:I.closeButtonContainer,children:n.jsx(M,{icon:Q,onClick:this.toggleFullScreen,kind:"tertiary",actionType:"neutral","aria-label":"Exit fullscreen",style:I.closeButton})}),n.jsx(U,{style:h,children:n.jsx("iframe",{ref:this.iframeRef,title:this.props.description,sandbox:"allow-same-origin allow-scripts",className:F.css(I.iframeResponsive),src:s==null?void 0:s.toString(),allow:"fullscreen"})}),s!==null&&!u&&n.jsx(M,{icon:He,onClick:i?this.toggleFullScreen:()=>{var p;(p=this.iframeRef.current)==null||p.requestFullscreen()},kind:"tertiary",actionType:"neutral","aria-label":"Fullscreen",style:{marginTop:5,marginBottom:5,alignSelf:"flex-end"}})]})}}C(J,"contextType",ve);const qe=(e,r)=>{if(!URL.canParse(e))return null;const t=new URL(e);return t.origin!=="https://phet.colorado.edu"?null:(t.searchParams.set("locale",r),t)},I=F.StyleSheet.create({widgetContainer:{borderRadius:6,borderWidth:1,borderColor:"#CCC",padding:f.medium_16,paddingBottom:0},iframeContainer:{position:"relative",overflow:"hidden",width:"100%",paddingTop:"56.25%"},iframeResponsive:{borderWidth:0,position:"absolute",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%"},appFullScreenWidgetContainer:{position:"fixed",top:0,left:0,right:0,bottom:Me,width:"100%",height:"auto",zIndex:1e3,backgroundColor:"white",display:"flex",flexDirection:"column"},appFullScreenIframeContainer:{position:"relative",overflow:"hidden",width:"100%",flex:1},closeButtonContainer:{position:"absolute",top:f.xSmall_8,right:f.xSmall_8,zIndex:1001},closeButton:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"50%"}}),cr={name:"phet-simulation",displayName:"PhET Simulation",widget:J,isLintable:!0};J.__docgenInfo={description:"",methods:[{name:"getPhetCompatibleLocale",docblock:null,modifiers:[],params:[{name:"kaLocale",optional:!1,type:null}],returns:null},{name:"getPromptJSON",docblock:null,modifiers:[],params:[],returns:{type:{name:"signature",type:"object",raw:`{
    type: UnsupportedWidget;
    message?: string;
    isSupported: boolean;
}`,signature:{properties:[{key:"type",value:{name:"union",raw:`| "cs-program"
| "iframe"
| "interaction"
| "interactive-graph-unsupported"
| "measurer"
| "phet-simulation"
| "plotter"
| "python-program"
| "video"`,elements:[{name:"literal",value:'"cs-program"'},{name:"literal",value:'"iframe"'},{name:"literal",value:'"interaction"'},{name:"literal",value:'"interactive-graph-unsupported"'},{name:"literal",value:'"measurer"'},{name:"literal",value:'"phet-simulation"'},{name:"literal",value:'"plotter"'},{name:"literal",value:'"python-program"'},{name:"literal",value:'"video"'}],required:!0}},{key:"message",value:{name:"string",required:!1}},{key:"isSupported",value:{name:"boolean",required:!0}}]}}}},{name:"displayLoadFailure",docblock:null,modifiers:[],params:[],returns:null},{name:"updateSimState",docblock:null,modifiers:["async"],params:[{name:"urlString",optional:!1,type:{name:"string"}}],returns:null},{name:"showLocaleWarning",docblock:null,modifiers:["async"],params:[{name:"url",optional:!1,type:{name:"URL",alias:"URL"}}],returns:{type:{name:"Promise",elements:[{name:"boolean"}],raw:"Promise<boolean>"}}},{name:"toggleFullScreen",docblock:`Mobile App Fullscreen Implementation

The mobile app environment doesn't support the standard browser fullscreen API.
Instead, we implement a "fake" fullscreen mode with the following approach:

1. When fullscreen is toggled, we use a fixed position container that covers
   almost the entire viewport (appFullScreenWidgetContainer)
2. We leave space at the bottom for the mobile app's Check Answer bar (66px)
3. We position a close button in the top-right corner for exiting fullscreen
4. The iframe container expands to fill the available space

This differs from the web implementation which uses the browser's
native Fullscreen API via requestFullscreen().

Note: Unfortunately, full screen is not supported in iOS mobile web due to
the lack of support for the Fullscreen API.`,modifiers:[],params:[],returns:null,description:`Mobile App Fullscreen Implementation

The mobile app environment doesn't support the standard browser fullscreen API.
Instead, we implement a "fake" fullscreen mode with the following approach:

1. When fullscreen is toggled, we use a fixed position container that covers
   almost the entire viewport (appFullScreenWidgetContainer)
2. We leave space at the bottom for the mobile app's Check Answer bar (66px)
3. We position a close button in the top-right corner for exiting fullscreen
4. The iframe container expands to fill the available space

This differs from the web implementation which uses the browser's
native Fullscreen API via requestFullscreen().

Note: Unfortunately, full screen is not supported in iOS mobile web due to
the lack of support for the Fullscreen API.`}],displayName:"PhetSimulation"};export{Fe as B,J as P,De as a,cr as b,Ce as g,qe as m};
