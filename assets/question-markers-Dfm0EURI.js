var k=Object.defineProperty;var b=(i,a,e)=>a in i?k(i,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[a]=e;var g=(i,a,e)=>(b(i,typeof a!="symbol"?a+"":a,e),e);import{r as h,af as f,j as s,n as l,aB as x,cK as v}from"./iframe-B7rrjhX-.js";import"./item-version-C71bDQee.js";import"./article-renderer-CKpNj7Wm.js";import"./server-item-renderer-CzC3QTOf.js";import"./hints-renderer-B1JL43nH.js";import{b as M,a as w}from"./global-colors-BJx09mFA.js";import{M as C}from"./marker-B8z4KjYn.js";class I extends h.Component{constructor(){super(...arguments);g(this,"_markers",[]);g(this,"handleImageDoubleClick",e=>{e.preventDefault();const r=e.currentTarget.getBoundingClientRect(),n=Math.round((e.clientX-r.left)/r.width*1e3)/10,d=Math.round((e.clientY-r.top)/r.height*1e3)/10,{markers:t,onChange:m}=this.props;m([...t,{answers:[],label:"",x:n,y:d}])})}openDropdownForMarkerIndices(e){e.forEach(r=>{var n;this._markers[r]&&((n=this._markers[r])==null||n.openDropdown())})}render(){const{choices:e,imageUrl:r,imageWidth:n,imageHeight:d,markers:t,onChange:m}=this.props,y=f().staticUrl;return s.jsxs("div",{children:[s.jsx("div",{className:l.css(c.title),children:"Markers"}),s.jsx("div",{className:l.css(c.subtitle),children:r?s.jsxs("span",{children:["Double-click on the image to add a marker.",s.jsx("br",{}),s.jsx("br",{}),"Markers are read by screen readers in the order that you add them here, so add in a logical order for the learner (e.g. sequentially, clockwise). You can test order by using keyboard tabbing."]}):"Upload an image to place markers."}),r&&s.jsxs("div",{className:l.css(c.markersCanvas),style:{maxWidth:n,maxHeight:d},children:[s.jsx("img",{alt:"",className:l.css(c.image),src:y(x.getRealImageUrl(r)),onDoubleClick:this.handleImageDoubleClick}),t.map((p,o)=>h.createElement(C,{...p,choices:e,key:`${p.x}.${p.y}`,onChange:u=>m([...t.slice(0,o),u,...t.slice(o+1)]),onRemove:()=>m([...t.slice(0,o),...t.slice(o+1)]),ref:u=>this._markers[o]=u}))]})]})}}const c=l.StyleSheet.create({title:{...v,marginBottom:6,color:w},subtitle:{fontFamily:"inherit",fontSize:12,lineHeight:"14px",marginBottom:12,color:M},markersCanvas:{position:"relative",border:"solid 1px rgba(33, 36, 44, 0.16)"},image:{display:"block",maxWidth:"100%"}});I.__docgenInfo={description:"",methods:[{name:"openDropdownForMarkerIndices",docblock:null,modifiers:[],params:[{name:"indices",optional:!1,type:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>",alias:"ReadonlyArray"}}],returns:null},{name:"handleImageDoubleClick",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"ReactMouseEvent",raw:"React.MouseEvent",alias:"React.MouseEvent"}}],returns:null}],displayName:"QuestionMarkers",props:{choices:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},imageUrl:{required:!0,tsType:{name:"string"},description:""},imageWidth:{required:!0,tsType:{name:"number"},description:""},imageHeight:{required:!0,tsType:{name:"number"},description:""},markers:{required:!0,tsType:{name:"Array",raw:'PerseusLabelImageWidgetOptions["markers"]'},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:'(markers: PerseusLabelImageWidgetOptions["markers"]) => void',signature:{arguments:[{type:{name:"Array",raw:'PerseusLabelImageWidgetOptions["markers"]'},name:"markers"}],return:{name:"void"}}},description:""}}};export{I as Q};
