import{j as i,a as g}from"./jsx-runtime-FVsy8kgq.js";import{p as q,c as K}from"./article-renderer-IXeFV2sm.js";import{_ as u}from"./jquery-yG1GhClm.js";import{U as T,K as j}from"./util-AYeX86gl.js";import"./phet-simulation-XVZsZpMv.js";import"./version-akiLXZts.js";import{g as V}from"./dependencies-d8cZibFS.js";import"./perseus-api-Nq3s7IMx.js";import"./perseus-item-r0HxAp0G.js";import"./hints-renderer-mV4P0nzg.js";import"./renderer-iggp3GU1.js";import"./base-radio-aSIz26Ah.js";import{c as $}from"./components-NB-NCNDt.js";import{i as A}from"./constants-iPV6vHZm.js";import"./index-k-0mNqHS.js";import"./i18n-context-_nSLXFpk.js";import"./svg-image-B1YVHqDk.js";import"./index-xs9l8-Af.js";import{C as k}from"./index-QCAhLhLD.js";import{g as X}from"./_commonjsHelpers-4gQjN7DL.js";import{r as Q}from"./index-TT1qJ6UJ.js";import{i as H}from"./invariant-bu5zBsRS.js";import{P as d}from"./index-0C4KXdeC.js";import{R as J}from"./index-7vsPyIck.js";/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var P=Object.getOwnPropertySymbols,Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;function te(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function ae(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var s={},a=0;a<10;a++)s["_"+String.fromCharCode(a)]=a;var l=Object.getOwnPropertyNames(s).map(function(p){return s[p]});if(l.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(p){c[p]=p}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var ne=ae()?Object.assign:function(e,s){for(var a,l=te(e),c,p=1;p<arguments.length;p++){a=Object(arguments[p]);for(var o in a)Z.call(a,o)&&(l[o]=a[o]);if(P){c=P(a);for(var v=0;v<c.length;v++)ee.call(a,c[v])&&(l[c[v]]=a[c[v]])}}return l},re={},ie=re,_=ne,se=ie,b=H,G="mixins";function oe(e,s,a){var l=[],c={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},p={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},o={displayName:function(n,t){n.displayName=t},mixins:function(n,t){if(t)for(var r=0;r<t.length;r++)y(n,t[r])},childContextTypes:function(n,t){n.childContextTypes=_({},n.childContextTypes,t)},contextTypes:function(n,t){n.contextTypes=_({},n.contextTypes,t)},getDefaultProps:function(n,t){n.getDefaultProps?n.getDefaultProps=N(n.getDefaultProps,t):n.getDefaultProps=t},propTypes:function(n,t){n.propTypes=_({},n.propTypes,t)},statics:function(n,t){D(n,t)},autobind:function(){}};function v(n,t){var r=c.hasOwnProperty(t)?c[t]:null;F.hasOwnProperty(t)&&b(r==="OVERRIDE_BASE","ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),n&&b(r==="DEFINE_MANY"||r==="DEFINE_MANY_MERGED","ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function y(n,t){if(t){b(typeof t!="function","ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),b(!s(t),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=n.prototype,f=r.__reactAutoBindPairs;t.hasOwnProperty(G)&&o.mixins(n,t.mixins);for(var h in t)if(t.hasOwnProperty(h)&&h!==G){var m=t[h],x=r.hasOwnProperty(h);if(v(x,h),o.hasOwnProperty(h))o[h](n,m);else{var O=c.hasOwnProperty(h),W=typeof m=="function",z=W&&!O&&!x&&t.autobind!==!1;if(z)f.push(h,m),r[h]=m;else if(x){var w=c[h];b(O&&(w==="DEFINE_MANY_MERGED"||w==="DEFINE_MANY"),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",w,h),w==="DEFINE_MANY_MERGED"?r[h]=N(r[h],m):w==="DEFINE_MANY"&&(r[h]=S(r[h],m))}else r[h]=m}}}}function D(n,t){if(t)for(var r in t){var f=t[r];if(t.hasOwnProperty(r)){var h=r in o;b(!h,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r);var m=r in n;if(m){var x=p.hasOwnProperty(r)?p[r]:null;b(x==="DEFINE_MANY_MERGED","ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r),n[r]=N(n[r],f);return}n[r]=f}}}function M(n,t){b(n&&t&&typeof n=="object"&&typeof t=="object","mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects.");for(var r in t)t.hasOwnProperty(r)&&(b(n[r]===void 0,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r),n[r]=t[r]);return n}function N(n,t){return function(){var f=n.apply(this,arguments),h=t.apply(this,arguments);if(f==null)return h;if(h==null)return f;var m={};return M(m,f),M(m,h),m}}function S(n,t){return function(){n.apply(this,arguments),t.apply(this,arguments)}}function E(n,t){var r=t.bind(n);return r}function Y(n){for(var t=n.__reactAutoBindPairs,r=0;r<t.length;r+=2){var f=t[r],h=t[r+1];n[f]=E(n,h)}}var U={componentDidMount:function(){this.__isMounted=!0}},B={componentWillUnmount:function(){this.__isMounted=!1}},F={replaceState:function(n,t){this.updater.enqueueReplaceState(this,n,t)},isMounted:function(){return!!this.__isMounted}},C=function(){};_(C.prototype,e.prototype,F);function L(n){var t=function(f,h,m){this.__reactAutoBindPairs.length&&Y(this),this.props=f,this.context=h,this.refs=se,this.updater=m||a,this.state=null;var x=this.getInitialState?this.getInitialState():null;b(typeof x=="object"&&!Array.isArray(x),"%s.getInitialState(): must return an object or null",t.displayName||"ReactCompositeComponent"),this.state=x};t.prototype=new C,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],l.forEach(y.bind(null,t)),y(t,U),y(t,n),y(t,B),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),b(t.prototype.render,"createClass(...): Class specification must implement a `render` method.");for(var r in c)t.prototype[r]||(t.prototype[r]=null);return t}return L}var le=oe,R=Q,ce=le;if(typeof R>"u")throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var pe=new R.Component().updater,ue=ce(R.Component,R.isValidElement,pe);const he=X(ue),{ButtonGroup:de,InfoTip:ge,RangeInput:I}=$,me={url:null,width:0,height:0};function fe(e,s){return Math.floor((e[1]-e[0])/s)}const be=he({displayName:"GraphSettings",propTypes:{...q,editableSettings:d.arrayOf(d.oneOf(["canvas","graph","snap","image","measure"])),box:d.arrayOf(d.number),labels:d.arrayOf(d.string),range:d.arrayOf(d.arrayOf(d.number)),step:d.arrayOf(d.number),gridStep:d.arrayOf(d.number),snapStep:d.arrayOf(d.number),valid:d.oneOfType([d.bool,d.string]),backgroundImage:d.object,markings:d.oneOf(["graph","grid","none"]),showProtractor:d.bool,showRuler:d.bool,showTooltips:d.bool,rulerLabel:d.string,rulerTicks:d.number},getDefaultProps:function(){return{editableSettings:["graph","snap","image","measure"],box:[A.defaultBoxSizeSmall,A.defaultBoxSizeSmall],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],snapStep:[1,1],valid:!0,backgroundImage:me,markings:"graph",showProtractor:!1,showRuler:!1,showTooltips:!1,rulerLabel:"",rulerTicks:10}},getInitialState:function(){return this.stateFromProps(this.props)},componentDidMount:function(){this._isMounted=!0,this.changeGraph=u.debounce(this.changeGraph,300)},UNSAFE_componentWillReceiveProps:function(e){(!u.isEqual(this.props.labels,e.labels)||!u.isEqual(this.props.gridStep,e.gridStep)||!u.isEqual(this.props.snapStep,e.snapStep)||!u.isEqual(this.props.step,e.step)||!u.isEqual(this.props.range,e.range)||!u.isEqual(this.props.backgroundImage,e.backgroundImage))&&this.setState(this.stateFromProps(e))},componentWillUnmount:function(){this._isMounted=!1},stateFromProps:function(e){return{labelsTextbox:e.labels,gridStepTextbox:e.gridStep,snapStepTextbox:e.snapStep,stepTextbox:e.step,rangeTextbox:e.range,backgroundImage:u.clone(e.backgroundImage)}},change(...e){return K.apply(this,e)},changeRulerLabel:function(e){this.change({rulerLabel:e.target.value})},changeRulerTicks:function(e){this.change({rulerTicks:+e.target.value})},changeBackgroundUrl:function(e){if(e.type==="keypress"&&e.key!=="Enter")return;const s=(l,c,p)=>{const o=u.clone(this.props.backgroundImage);o.url=l,o.width=c,o.height=p,this.setState({backgroundImage:o},this.changeGraph)},a=J.findDOMNode(this.refs["bg-url"]).value;a?T.getImageSize(a,(l,c)=>{this._isMounted&&s(a,l,c)}):s(null,0,0)},renderLabelChoices:function(e){return u.map(e,function([s,a]){return i("option",{value:a,children:s},a)})},validRange:function(e){return u.every(e,function(a){return u.isFinite(a)})?e[0]>=e[1]?"Range must have a higher number on the right":!0:"Range must be a valid number"},validateStepValue:function(e){const{step:s,range:a,name:l,minTicks:c,maxTicks:p}=e;if(!u.isFinite(s))return l+" must be a valid number";const o=fe(a,s);return o<c?l+" is too large, there must be at least "+c+" ticks.":o>p?l+" is too small, there can be at most "+p+" ticks.":!0},validSnapStep:function(e,s){return this.validateStepValue({step:e,range:s,name:"Snap step",minTicks:5,maxTicks:60})},validGridStep:function(e,s){return this.validateStepValue({step:e,range:s,name:"Grid step",minTicks:3,maxTicks:60})},validStep:function(e,s){return this.validateStepValue({step:e,range:s,name:"Step",minTicks:3,maxTicks:20})},validBackgroundImageSize:function(e){return e.url?e.width<=450&&e.height<=450?!0:"Image must be smaller than 450px x 450px.":!0},validateGraphSettings:function(e,s,a,l,c){const p=this;let o;if(!u.every(e,function(S){return o=p.validRange(S),o===!0})||!u.every(s,function(S,E){return o=p.validStep(S,e[E]),o===!0})||!u.every(a,function(S,E){return o=p.validGridStep(S,e[E]),o===!0})||!u.every(l,function(S,E){return o=p.validSnapStep(S,e[E]),o===!0}))return o;const N=this.validBackgroundImageSize(c);return N!==!0?(o=N,o):!0},changeLabel:function(e,s){const a=s.target.value,l=this.state.labelsTextbox.slice();l[e]=a,this.setState({labelsTextbox:l},this.changeGraph)},changeRange:function(e,s){const a=this.state.rangeTextbox.slice();a[e]=s;const l=this.state.stepTextbox.slice(),c=this.state.gridStepTextbox.slice(),p=this.state.snapStepTextbox.slice(),o=T.scaleFromExtent(a[e],this.props.box[e]);this.validRange(a[e])===!0&&(l[e]=T.tickStepFromExtent(a[e],this.props.box[e]),c[e]=T.gridStepFromTickStep(l[e],o),p[e]=c[e]/2),this.setState({stepTextbox:l,gridStepTextbox:c,snapStepTextbox:p,rangeTextbox:a},this.changeGraph)},changeStep:function(e){this.setState({stepTextbox:e},this.changeGraph)},changeSnapStep:function(e){this.setState({snapStepTextbox:e},this.changeGraph)},changeGridStep:function(e){this.setState({gridStepTextbox:e,snapStepTextbox:u.map(e,function(s){return s/2})},this.changeGraph)},changeGraph:function(){const e=this.state.labelsTextbox,s=u.map(this.state.rangeTextbox,function(v){return u.map(v,Number)}),a=u.map(this.state.stepTextbox,Number),l=this.state.gridStepTextbox,c=this.state.snapStepTextbox,p=this.state.backgroundImage,o=this.validateGraphSettings(s,a,l,c,p);o===!0?this.change({valid:!0,labels:e,range:s,step:a,gridStep:l,snapStep:c,backgroundImage:p}):this.change({valid:o})},render:function(){const e=[j.roundTo(2,T.scaleFromExtent(this.props.range[0],this.props.box[0])),j.roundTo(2,T.scaleFromExtent(this.props.range[1],this.props.box[1]))],{TeX:s}=V();return g("div",{children:[u.contains(this.props.editableSettings,"canvas")&&g("div",{className:"graph-settings",children:[g("div",{className:"perseus-widget-row",children:[i("label",{htmlFor:"canvas-size",children:"Canvas size (x,y pixels)"}),i(I,{id:"canvas-size",value:this.props.box,onChange:a=>{this.change({box:a})}})]}),g("div",{className:"perseus-widget-row",children:["Scale (px per div):"," ",i(s,{children:"("+e[0]+", "+e[1]+")"})]})]}),u.contains(this.props.editableSettings,"graph")&&g("div",{className:"graph-settings",children:[g("div",{className:"perseus-widget-row",children:[g("div",{className:"perseus-widget-left-col",children:[i("label",{htmlFor:"labels-x",children:"x Label"}),i("input",{id:"labels-x",type:"text",className:"graph-settings-axis-label",ref:"labels-0",onChange:a=>this.changeLabel(0,a),value:this.state.labelsTextbox[0]||""})]}),g("div",{className:"perseus-widget-right-col",children:[i("label",{htmlFor:"labels-y",children:"y Label"}),i("input",{id:"labels-y",type:"text",className:"graph-settings-axis-label",ref:"labels-1",onChange:a=>this.changeLabel(1,a),value:this.state.labelsTextbox[1]||""})]})]}),g("div",{className:"perseus-widget-row",children:[g("div",{className:"perseus-widget-left-col",children:[i("label",{htmlFor:"range-x",children:"x Range"}),i(I,{id:"range-x",value:this.state.rangeTextbox[0],onChange:a=>this.changeRange(0,a)})]}),g("div",{className:"perseus-widget-right-col",children:[i("label",{htmlFor:"range-y",children:"y Range"}),i(I,{id:"range-y",value:this.state.rangeTextbox[1],onChange:a=>this.changeRange(1,a)})]})]}),g("div",{className:"perseus-widget-row",children:[g("div",{className:"perseus-widget-left-col",children:[i("label",{htmlFor:"tick-step",children:"Tick Step"}),i(I,{id:"tick-step",value:this.state.stepTextbox,onChange:this.changeStep})]}),g("div",{className:"perseus-widget-right-col",children:[i("label",{htmlFor:"grid-step",children:"Grid Step"}),i(I,{id:"grid-step",value:this.state.gridStepTextbox,onChange:this.changeGridStep})]})]}),u.contains(this.props.editableSettings,"snap")&&i("div",{className:"perseus-widget-row",children:g("div",{className:"perseus-widget-left-col",children:[i("label",{htmlFor:"snap-step",children:"Snap Step"}),i(I,{id:"snap-step",value:this.state.snapStepTextbox,onChange:this.changeSnapStep})]})}),g("div",{className:"perseus-widget-row",children:[i("label",{children:"Markings: "}),i(de,{value:this.props.markings,allowEmpty:!1,buttons:[{value:"graph",content:"Graph"},{value:"grid",content:"Grid"},{value:"none",content:"None"}],onChange:this.change("markings")})]}),i("div",{className:"perseus-widget-left-col",children:i(k,{label:"Show tooltips",checked:this.props.showTooltips,onChange:a=>{this.change({showTooltips:a})}})})]}),u.contains(this.props.editableSettings,"image")&&g("div",{className:"image-settings",children:[i("div",{children:"Background image:"}),g("div",{children:[i("label",{htmlFor:"bg-url",children:"Url:"}),i("input",{id:"bg-url",type:"text",className:"graph-settings-background-url",ref:"bg-url",value:this.state.backgroundImage.url||"",onChange:a=>{const l=u.clone(this.props.backgroundImage);l.url=a.target.value,this.setState({backgroundImage:l})},onKeyPress:this.changeBackgroundUrl,onBlur:this.changeBackgroundUrl}),i(ge,{children:i("p",{children:'Create an image in graphie, or use the "Add image" function to create a background.'})})]})]}),u.contains(this.props.editableSettings,"measure")&&g("div",{className:"misc-settings",children:[g("div",{className:"perseus-widget-row",children:[i("div",{className:"perseus-widget-left-col",children:i(k,{label:"Show ruler",checked:this.props.showRuler,onChange:a=>{this.change({showRuler:a})}})}),i("div",{className:"perseus-widget-right-col",children:i(k,{label:"Show protractor",checked:this.props.showProtractor,onChange:a=>{this.change({showProtractor:a})}})})]}),this.props.showRuler&&g("div",{children:[i("div",{children:g("label",{children:[" ","Ruler label:"," ",g("select",{onChange:this.changeRulerLabel,value:this.props.rulerLabel,children:[i("option",{value:"",children:"None"}),i("optgroup",{label:"Metric",children:this.renderLabelChoices([["milimeters","mm"],["centimeters","cm"],["meters","m"],["kilometers","km"]])}),i("optgroup",{label:"Imperial",children:this.renderLabelChoices([["inches","in"],["feet","ft"],["yards","yd"],["miles","mi"]])})]})]})}),i("div",{children:g("label",{children:[" ","Ruler ticks:"," ",i("select",{onChange:this.changeRulerTicks,value:this.props.rulerTicks,children:u.map([1,2,4,8,10,16],function(a){return i("option",{value:a,children:a},a)})})]})})]})]})]})}}),Le=be;export{Le as G,he as c};
