import{r as h,j as l,I as oe,co as Le,s as c,n as C,cp as at,a2 as Re,aH as B,V as T,y as ge,i as ne,cq as dt,cr as ct,a4 as K,cs as Ae,f as d,g as I,ct as ut,c as W,cu as _,cv as ht,cw as Pe,cx as pt,e as Me,b as ft,L as mt,bC as bt,cy as gt,bP as xt,x as yt,c1 as St,cz as Ct}from"./iframe-DTktfcfm.js";import{P as It,d as kt}from"./Popper-DlaF0ENk.js";import{C as wt}from"./util-Bn69jzv6.js";const vt={marginTop:c.xSmall_8,marginBottom:c.xSmall_8},Ot={minHeight:100},P=40,ze=9,$e=9,F={clearSearch:"Clear search",filter:"Filter",noResults:"No results",someSelected:n=>n===1?"1 item":`${n} items`};class re extends h.Component{static isClassOf(t){return t&&t.type&&t.type.__IS_ACTION_ITEM__}render(){const{disabled:t,horizontalRule:e,href:o,target:r,indent:s,label:i,lang:a,leftAccessory:u,rightAccessory:p,onClick:m,role:g,style:S,testId:b,active:x}=this.props,O=[N.wrapper,S],k=typeof i=="string"?l.jsx(B,{lang:a,style:N.label,children:i}):h.cloneElement(i,{lang:a,style:N.label,...i.props});return l.jsx(pt,{disabled:t,horizontalRule:e,rootStyle:O,leftAccessory:u,rightAccessory:p,style:[N.shared,s&&N.indent],role:g,testId:b,title:k,href:o,target:r,onClick:m,active:x})}}re.defaultProps={disabled:!1,horizontalRule:"none",indent:!1,role:"menuitem"};re.__IS_ACTION_ITEM__=!0;const Y=d.action.primary.progressive,Z={actionItem:{color:{hover:{background:Y.hover.background,foreground:Y.hover.foreground},press:{background:Y.press.background,foreground:Y.press.foreground}}}},N=C.StyleSheet.create({wrapper:{minHeight:P,touchAction:"manipulation",":focus":{borderRadius:I.radius.radius_040,outline:`${c.xxxxSmall_2}px solid ${d.focus.outer}`,outlineOffset:-c.xxxxSmall_2},":hover[aria-disabled=false]":{color:Z.actionItem.color.hover.foreground,background:Z.actionItem.color.hover.background},":active[aria-disabled=false]":{color:Z.actionItem.color.press.foreground,background:Z.actionItem.color.press.background}},shared:{minHeight:P,paddingBlock:bt.size_100},label:{whiteSpace:"nowrap",userSelect:"none"},indent:{paddingLeft:c.medium_16*2}}),_t=function(n){const{selected:t}=n;return l.jsx(K,{icon:Ae,size:"small",style:[Fe.bounds,!t&&Fe.hide]})},Fe=C.StyleSheet.create({bounds:{alignSelf:"center",height:c.medium_16,minHeight:c.medium_16,minWidth:c.medium_16},hide:{visibility:"hidden"}}),Rt=function(n){const{disabled:t,selected:e}=n;return l.jsx(T,{className:"checkbox",style:[J.checkbox,e&&!t&&J.noBorder,t&&J.disabledCheckbox],children:e&&l.jsx(K,{icon:Ae,size:"small",className:"check",style:[{width:c.small_12,height:c.small_12,margin:c.xxxxSmall_2},t&&e&&J.disabledCheckFormatting]})})},pe={checkbox:{color:{default:{border:d.input.default.border},disabled:{border:d.input.disabled.border,background:d.input.disabled.background}}}},J=C.StyleSheet.create({checkbox:{alignSelf:"center",minHeight:c.medium_16,minWidth:c.medium_16,height:c.medium_16,borderRadius:3,borderWidth:I.width.thin,borderStyle:"solid",borderColor:pe.checkbox.color.default.border},noBorder:{borderWidth:0},disabledCheckbox:{borderColor:pe.checkbox.color.disabled.border,backgroundColor:pe.checkbox.color.disabled.background},disabledCheckFormatting:{position:"absolute",top:-1,left:-1}}),Ft=ne("li");class L extends h.Component{static isClassOf(t){return t&&t.type&&t.type.__IS_OPTION_ITEM__}getCheckComponent(){return this.props.variant==="check"?_t:Rt}renderCell(){const{disabled:t,label:e,selected:o,testId:r,leftAccessory:s,horizontalRule:i,parentComponent:a,rightAccessory:u,style:p,subtitle1:m,subtitle2:g,value:S,onClick:b,onToggle:x,variant:O,role:k,...E}=this.props,q=this.getCheckComponent(),le=[j.item,p];return l.jsx(at,{disabled:t,horizontalRule:i,rootStyle:a==="listbox"?j.listboxItem:le,style:j.itemContainer,"aria-selected":a!=="listbox"&&o?"true":"false",role:a!=="listbox"?k:void 0,testId:r,leftAccessory:l.jsx(l.Fragment,{children:s?l.jsxs(T,{style:{flexDirection:"row"},children:[l.jsx(q,{disabled:t,selected:o}),l.jsx(ge,{size:c.xSmall_8}),s]}):l.jsx(q,{disabled:t,selected:o})}),rightAccessory:u,subtitle1:m?l.jsx(Re,{className:"subtitle",children:m}):void 0,title:l.jsx(B,{style:j.label,children:e}),subtitle2:g?l.jsx(Re,{className:"subtitle",children:g}):void 0,onClick:a!=="listbox"?this.handleClick:void 0,...E})}render(){const{disabled:t,focused:e,parentComponent:o,role:r,selected:s}=this.props;return o==="listbox"?l.jsx(Ft,{onMouseDown:i=>{i.preventDefault()},onClick:this.handleClick,style:[j.reset,j.item,e&&j.itemFocused,t&&j.itemDisabled],role:r,"aria-selected":s?"true":"false","aria-disabled":t?"true":"false",id:this.props.id,tabIndex:-1,children:this.renderCell()}):this.renderCell()}constructor(...t){super(...t),this.handleClick=()=>{const{onClick:e,onToggle:o,value:r}=this.props;o(r),e&&e()}}}L.defaultProps={disabled:!1,focused:!1,horizontalRule:"none",onToggle:()=>{},role:"option",selected:!1};L.__IS_OPTION_ITEM__=!0;const Te={borderRadius:I.radius.radius_040,outline:`${c.xxxxSmall_2}px solid ${d.focus.outer}`,outlineOffset:-c.xxxxSmall_2},Q=d.action.primary.progressive,y={optionItem:{color:{default:{background:d.surface.primary,foreground:d.text.primary},hover:{background:Q.hover.background,foreground:Q.hover.foreground},press:{background:Q.press.background,foreground:Q.press.foreground},disabled:{background:d.core.background.disabled.subtle,foreground:d.action.secondary.disabled.foreground}}},checkbox:{color:{hover:{background:d.surface.primary,foreground:d.action.secondary.progressive.hover.foreground},press:{background:d.surface.primary,foreground:d.action.secondary.progressive.press.foreground},selected:{background:d.input.checked.background,foreground:d.input.checked.foreground}}},subtitle:{color:{default:{foreground:d.text.secondary},hover:{foreground:d.text.inverse},press:{foreground:d.text.inverse}}}},j=C.StyleSheet.create({reset:{margin:0,padding:0,border:0,background:"none",outline:"none",fontSize:"100%",verticalAlign:"baseline",textAlign:"left",textDecoration:"none",listStyle:"none",cursor:"pointer"},listboxItem:{backgroundColor:"transparent",color:"inherit"},item:{background:y.optionItem.color.default.background,color:y.optionItem.color.default.foreground,minHeight:"unset",":focus":Te,":focus-visible":{overflow:"visible"},":hover[aria-disabled=false]":{color:y.optionItem.color.hover.foreground,background:y.optionItem.color.hover.background},":active[aria-selected=false]":{},":hover[aria-disabled=true]":{cursor:"not-allowed"},":is([aria-disabled=true])":{color:y.optionItem.color.disabled.foreground,":focus-visible":{outline:"none"}},":active[aria-disabled=false]":{color:y.optionItem.color.press.foreground,background:y.optionItem.color.press.background},":hover[aria-disabled=false] .checkbox":{background:y.checkbox.color.hover.background},":active[aria-disabled=false] .checkbox":{background:y.checkbox.color.press.background},":hover[aria-disabled=false] .check":{color:y.checkbox.color.hover.foreground},":active[aria-disabled=false] .check":{color:y.checkbox.color.press.foreground},":is([aria-selected=true]) .checkbox":{background:y.checkbox.color.selected.background},":is([aria-selected=true]) .check":{color:y.checkbox.color.selected.foreground},":is([aria-disabled=false]) .subtitle":{color:y.subtitle.color.default.foreground},":hover[aria-disabled=false] .subtitle":{color:y.subtitle.color.hover.foreground},":active[aria-disabled=false] .subtitle":{color:y.subtitle.color.press.foreground}},itemFocused:Te,itemDisabled:{outlineColor:d.focus.outer},itemContainer:{minHeight:"unset",paddingBlock:c.xSmall_8+c.xxxxSmall_2,paddingInlineStart:c.xSmall_8,paddingInlineEnd:c.medium_16,whiteSpace:"nowrap"},label:{whiteSpace:"nowrap",userSelect:"none",overflow:"hidden",textOverflow:"ellipsis"},hide:{visibility:"hidden"}});class A extends h.Component{static isClassOf(t){return t&&t.type&&t.type.__IS_SEPARATOR_ITEM__}render(){return l.jsx(T,{style:[Et.separator,this.props.style],"aria-hidden":"true"})}}A.__IS_SEPARATOR_ITEM__=!0;const Tt={separator:{color:{border:d.core.border.neutral.subtle}}},Et=C.StyleSheet.create({separator:{borderTop:`1px solid ${Tt.separator.color.border}`,height:1,minHeight:1,marginTop:c.xxxSmall_4,marginBottom:c.xxxSmall_4}});class xe extends h.Component{renderAnchorChildren(t,e){const{disabled:o,testId:r,text:s,opened:i,"aria-controls":a,"aria-haspopup":u,"aria-required":p,id:m,role:g,onBlur:S}=this.props,b=this.props.children({...t,text:s,opened:i}),x=b.props,O=this.getTestIdFromProps(x),k=x["aria-label"]??this.props["aria-label"];return h.cloneElement(b,{...e,"aria-label":k??void 0,"aria-invalid":this.props.error,disabled:o,"aria-controls":a,role:g,id:m,"aria-expanded":i?"true":"false","aria-haspopup":u,"aria-required":p,onClick:x.onClick?E=>{x.onClick(E),e.onClick(E)}:e.onClick,"data-testid":O||r,onBlur:S})}render(){return l.jsx(ht,{onClick:this.props.onClick,disabled:this.props.disabled,tabIndex:0,children:(t,e)=>this.renderAnchorChildren(t,e)})}constructor(...t){super(...t),this.getTestIdFromProps=e=>e.testId||e["data-testid"]}}xe.defaultProps={disabled:!1};class Dt extends h.Component{render(){const{data:t,index:e,style:o}=this.props,r=t[e];if(A.isClassOf(r.component))return h.cloneElement(r.component,{style:o});{const{component:s,populatedProps:i,onClick:a,role:u,ref:p}=r;return h.cloneElement(s,{style:o,...i,key:e,onClick:a,ref:r.focusable&&p,role:u})}}}function Ee(n,t=0){return n.slice(0,ze).reduce((e,o)=>A.isClassOf(o.component)?e+$e:e+P,t)}class jt extends h.Component{componentDidMount(){const{schedule:t}=this.props;t.animationFrame(()=>{this.setWidth()})}componentDidUpdate(t){const{data:e,listRef:o}=this.props;t.data.length!==e.length&&(this.setHeight(),o&&o.current&&o.current.resetAfterIndex(1))}setWidth(){const t=W.findDOMNode(this),e=t==null?void 0:t.parentElement;if(e){const o=e.getBoundingClientRect().width;this.setState({width:o})}}setHeight(){const t=Ee(this.props.data);this.setState({height:t})}renderInitialItems(){const{data:t}=this.props,e=t.map(r=>r.component);return h.Children.toArray(e).filter(Boolean).sort((r,s)=>s.props.label&&r.props.label?s.props.label.length-r.props.label.length:-1).slice(0,ze).map(r=>h.cloneElement(r,{style:{visibility:"hidden"}}))}renderVirtualizedList(t,e){const{data:o,listRef:r}=this.props;return l.jsx(gt,{height:e,itemCount:o.length,itemSize:this.getItemSize,itemData:o,style:{overflowX:"hidden"},width:t,overscanCount:5,ref:r,children:Dt})}render(){const{width:t,height:e}=this.state;return t==null?this.renderInitialItems():this.renderVirtualizedList(t,e)}constructor(t){super(t),this.getItemSize=e=>{const o=this.props.data[e];return A.isClassOf(o.component)?$e:P},this.state={height:Ee(t.data),width:t.width}}}var Lt=Le(jt);function At({state:n,options:t}){const e=kt(n,t),{y:o}=n.modifiersData.preventOverflow||{y:0},{height:r}=n.rects.popper,[s]=n.placement.split("-"),a=r-e[s==="top"?"top":"bottom"]-o;n.styles.popper={...n.styles.popper,maxHeight:`${a}px`,"--popper-max-height":`${a}px`}}const Pt={name:"maxHeight",enabled:!0,phase:"main",options:{padding:P},requiresIfExists:["offset","preventOverflow","flip"],fn:At},Mt=[{name:"preventOverflow",options:{rootBoundary:"viewport",altAxis:!0,tether:!1}},Pt],zt=function({children:n,alignment:t="left",onPopperElement:e,referenceElement:o}){const r=ft(o)||document.querySelector("body");return r?W.createPortal(l.jsx(It,{innerRef:s=>{s&&e&&e(s)},referenceElement:o,strategy:"fixed",placement:t==="left"?"bottom-start":"bottom-end",modifiers:Mt,children:({placement:s,ref:i,style:a,hasPopperEscaped:u,isReferenceHidden:p})=>{const m=!!(u||p);return l.jsx("div",{ref:i,style:a,"data-testid":"dropdown-popper","data-placement":s,children:n(m)})}}),r):null};function $t(n){return n.length===1||!/^[A-Z]/i.test(n)?n:""}function Ht(n,t){let e;return function(...r){const s=()=>{clearTimeout(e),n(...r)};clearTimeout(e),e=setTimeout(s,t)}}function De(n){return typeof n=="string"}function se(n){return De(n.label)?n.label:De(n.labelAsText)?n.labelAsText:""}function Wt(n,t){return n?se(t):t.label}const Nt=125;class ie extends h.Component{static sameItemsFocusable(t,e){if(t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(t[o].focusable!==e[o].focusable)return!1;return!0}static getDerivedStateFromProps(t,e){if(e.itemRefs.length===0&&t.open||!ie.sameItemsFocusable(e.prevItems,t.items)){const o=[];for(let r=0;r<t.items.length;r++)if(t.items[r].focusable){const s=h.createRef();o.push({ref:s,originalIndex:r})}return{itemRefs:o,prevItems:t.items,sameItemsFocusable:!1}}else return{prevItems:t.items,sameItemsFocusable:!0}}componentDidMount(){this.updateEventListeners(),this.maybeFocusInitialItem()}componentDidUpdate(t){const{open:e,searchText:o}=this.props;if(t.open!==e)this.updateEventListeners(),this.maybeFocusInitialItem();else if(e){const{itemRefs:r,sameItemsFocusable:s}=this.state;if(s||t.searchText!==o)return;{const i=r.findIndex(a=>a.originalIndex===this.focusedOriginalIndex);i===-1?(this.focusedIndex=0,this.itemsClicked=!1,this.scheduleToFocusCurrentItem()):this.focusedIndex=i}this.props.labels!==t.labels&&this.setState({labels:{...this.state.labels,...this.props.labels}})}}componentWillUnmount(){this.removeEventListeners()}resetFocusedIndex(){const{initialFocusedIndex:t}=this.props;if(typeof t<"u")this.focusedIndex=t;else{if(this.hasSearchField()&&!this.isSearchFieldFocused())return this.focusSearchField();this.focusedIndex=0}}maybeFocusInitialItem(){const{autoFocus:t,open:e}=this.props;t&&(e?(this.resetFocusedIndex(),this.scheduleToFocusCurrentItem()):e||(this.itemsClicked=!1))}updateEventListeners(){this.props.open?this.addEventListeners():this.removeEventListeners()}addEventListeners(){document.addEventListener("mouseup",this.handleInteract),document.addEventListener("touchend",this.handleInteract)}removeEventListeners(){document.removeEventListener("mouseup",this.handleInteract),document.removeEventListener("touchend",this.handleInteract)}scheduleToFocusCurrentItem(t){this.shouldVirtualizeList()?this.props.schedule.animationFrame(()=>{this.focusCurrentItem(t)}):this.focusCurrentItem(t)}focusCurrentItem(t){const e=this.state.itemRefs[this.focusedIndex];if(!e)return;const{current:o}=this.virtualizedListRef;o&&o.scrollToItem(e.originalIndex);const r=()=>{if(!this.props.open)return;const s=this.state.itemRefs[this.focusedIndex],i=W.findDOMNode(s.ref.current);if(!i&&this.shouldVirtualizeList()){this.props.schedule.animationFrame(r);return}i&&(i.focus(),this.focusedOriginalIndex=s.originalIndex,t&&t(i))};this.shouldVirtualizeList()?this.props.schedule.animationFrame(r):r()}focusSearchField(){this.searchFieldRef.current&&this.searchFieldRef.current.focus()}hasSearchField(){return!!this.props.isFilterable}isSearchFieldFocused(){return this.hasSearchField()&&document.activeElement===this.searchFieldRef.current}focusPreviousItem(){if(this.focusedIndex===0||this.isSearchFieldFocused()&&!this.props.enableTypeAhead){if(this.hasSearchField()&&!this.isSearchFieldFocused())return this.focusSearchField();this.focusedIndex=this.state.itemRefs.length-1}else this.isSearchFieldFocused()||(this.focusedIndex-=1);this.scheduleToFocusCurrentItem()}focusNextItem(){if(this.focusedIndex===this.state.itemRefs.length-1||this.isSearchFieldFocused()&&!this.props.enableTypeAhead){if(this.hasSearchField()&&!this.isSearchFieldFocused())return this.focusSearchField();this.focusedIndex=0}else this.isSearchFieldFocused()||(this.focusedIndex+=1);this.scheduleToFocusCurrentItem()}restoreTabOrder(){this.props.openerElement&&this.props.openerElement.focus()}getItemRole(){const{role:t}=this.props;switch(t){case"listbox":return"option";case"menu":return"menuitem";default:throw new Error(`Expected "listbox" or "menu" for role, but receieved "${t}" instead.`)}}maybeRenderNoResults(){const{items:t,labels:{noResults:e}}=this.props;return t.length===0?l.jsx(B,{style:$.noResult,testId:"dropdown-core-no-results",children:e}):null}shouldVirtualizeList(){return this.props.items.length>Nt}renderList(){let t=0;const e=this.getItemRole();return this.props.items.map((o,r)=>{if(A.isClassOf(o.component))return o.component;const{component:s,focusable:i,populatedProps:a}=o;i&&(t+=1);const u=t-1,p=this.state.itemRefs[u]?this.state.itemRefs[u].ref:null;return h.cloneElement(s,{...a,key:r,onClick:()=>{this.handleItemClick(u,o)},ref:i?p:null,role:a.role||e})})}parseVirtualizedItems(){let t=0;const e=this.getItemRole();return this.props.items.map((o,r)=>{const{populatedProps:s}=o;!A.isClassOf(o.component)&&o.focusable&&(t+=1);const i=t-1;return{...o,role:s.role||e,ref:o.focusable&&this.state.itemRefs[i]?this.state.itemRefs[i].ref:null,onClick:()=>{this.handleItemClick(i,o)}}})}renderVirtualizedList(){const t=this.parseVirtualizedItems();return l.jsx(Lt,{data:t,listRef:this.virtualizedListRef})}renderSearchField(){const{searchText:t}=this.props,{labels:e}=this.state;return l.jsx(ut,{clearAriaLabel:e.clearSearch,onChange:this.handleSearchTextChanged,placeholder:e.filter,ref:this.searchFieldRef,style:$.searchInputStyle,value:t||""})}renderDropdownMenu(t,e){const{"aria-invalid":o,"aria-required":r,dropdownStyle:s,isFilterable:i,openerElement:a,role:u,id:p}=this.props,m=a&&window.getComputedStyle(a),g=m?m.getPropertyValue("width"):0;return l.jsxs(T,{onMouseUp:this.handleDropdownMouseUp,style:[$.dropdown,e&&$.hidden,s],testId:"dropdown-core-container",children:[i&&this.renderSearchField(),l.jsx(T,{id:p,role:u,style:[$.listboxOrMenu,{minWidth:g}],"aria-invalid":u==="listbox"?o:void 0,"aria-required":u==="listbox"?r:void 0,children:t}),this.maybeRenderNoResults()]})}renderDropdown(){const{alignment:t,openerElement:e}=this.props,o=this.shouldVirtualizeList()?this.renderVirtualizedList():this.renderList();return l.jsx(zt,{alignment:t,onPopperElement:r=>{this.popperElement=r},referenceElement:e,children:r=>this.renderDropdownMenu(o,r)})}render(){const{open:t,opener:e,style:o,className:r,disabled:s}=this.props;return l.jsxs(T,{onKeyDown:s?void 0:this.handleKeyDown,onKeyUp:s?void 0:this.handleKeyUp,style:[$.menuWrapper,o],className:r,children:[e,t&&this.renderDropdown()]})}constructor(t){super(t),this.focusedIndex=-1,this.focusedOriginalIndex=-1,this.itemsClicked=!1,this.searchFieldRef=h.createRef(),this.handleInteract=e=>{const{open:o,onOpenChanged:r}=this.props,s=e.target,i=W.findDOMNode(this);o&&i&&!i.contains(s)&&this.popperElement&&!this.popperElement.contains(s)&&r(!1)},this.handleKeyDown=e=>{const{enableTypeAhead:o,onOpenChanged:r,open:s,searchText:i}=this.props,a=e.key;if(o&&$t(a)&&(e.stopPropagation(),this.textSuggestion+=a,this.handleKeyDownDebounced(this.textSuggestion)),!s){if(a===_.down){e.preventDefault(),r(!0);return}return}switch(a){case _.tab:if(this.isSearchFieldFocused()&&i)return;this.restoreTabOrder(),r(!1);return;case _.space:if(this.isSearchFieldFocused())return;e.preventDefault();return;case _.up:e.preventDefault(),this.focusPreviousItem();return;case _.down:e.preventDefault(),this.focusNextItem();return}},this.handleKeyUp=e=>{const{onOpenChanged:o,open:r}=this.props;switch(e.key){case _.space:if(this.isSearchFieldFocused())return;e.preventDefault();return;case _.escape:r&&(e.stopPropagation(),this.restoreTabOrder(),o(!1));return}},this.handleKeyDownDebounceResult=e=>{const o=this.props.items.filter(r=>r.focusable).findIndex(({component:r})=>{if(A.isClassOf(r))return!1;if(L.isClassOf(r)){const s=r.props;return se(s).toLowerCase().startsWith(e.toLowerCase())}return!1});if(o>=0){const r=!this.props.open;r&&this.props.onOpenChanged(!0),this.focusedIndex=o,this.scheduleToFocusCurrentItem(s=>{this.props.selectionType==="single"&&r&&s&&(s.click(),this.props.onOpenChanged(!1))})}this.textSuggestion=""},this.handleClickFocus=e=>{this.itemsClicked=!0,this.focusedIndex=e,this.focusedOriginalIndex=this.state.itemRefs[this.focusedIndex].originalIndex},this.handleDropdownMouseUp=e=>{e.nativeEvent.stopImmediatePropagation?e.nativeEvent.stopImmediatePropagation():e.stopPropagation()},this.handleItemClick=(e,o)=>{this.handleClickFocus(e),o.component.props.onClick&&o.component.props.onClick(),o.populatedProps.onClick&&o.populatedProps.onClick()},this.handleSearchTextChanged=e=>{const{onSearchTextChanged:o}=this.props;o&&o(e)},this.resetFocusedIndex(),this.state={prevItems:this.props.items,itemRefs:[],sameItemsFocusable:!1,labels:{noResults:F.noResults,someResults:F.someSelected,...t.labels}},this.virtualizedListRef=h.createRef(),this.handleKeyDownDebounced=Ht(this.handleKeyDownDebounceResult,500),this.textSuggestion=""}}ie.defaultProps={alignment:"left",autoFocus:!0,enableTypeAhead:!0,labels:{clearSearch:F.clearSearch,filter:F.filter,noResults:F.noResults,someResults:F.someSelected},selectionType:"single"};const fe={dropdown:{color:{default:{background:d.surface.primary,border:d.core.border.neutral.subtle}}},noResults:{color:{foreground:d.text.secondary}}},$=C.StyleSheet.create({menuWrapper:{width:"fit-content"},dropdown:{backgroundColor:fe.dropdown.color.default.background,borderRadius:I.radius.radius_040,paddingTop:c.xxxSmall_4,paddingBottom:c.xxxSmall_4,border:`solid 1px ${fe.dropdown.color.default.border}`,boxShadow:`0px 8px 8px 0px ${Me.offBlack8}`,maxHeight:"var(--popper-max-height)"},listboxOrMenu:{overflowY:"auto"},hidden:{pointerEvents:"none",visibility:"hidden"},noResult:{color:fe.noResults.color.foreground,alignSelf:"center",marginTop:c.xxSmall_6},searchInputStyle:{margin:c.xSmall_8,marginTop:c.xxxSmall_4,minHeight:"auto",position:"sticky"},srOnly:{border:0,clip:"rect(0,0,0,0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}});var He=Le(ie);const Vt=ne("button");class Bt extends h.Component{render(){const{children:t,disabled:e,focused:o,hovered:r,pressed:s,waiting:i,testId:a,opened:u,"aria-label":p,...m}=this.props,g=e,S=[H.shared,H.default,g&&H.disabled,!g&&s&&H.press],b=l.jsx(mt,{style:H.text,children:t});return l.jsxs(Vt,{"aria-expanded":u?"true":"false","aria-haspopup":"menu","aria-label":p,disabled:g,style:S,type:"button",...m,"data-testid":a,children:[l.jsx(T,{style:!g&&(r||o)&&H.focus,children:b}),l.jsx(ge,{size:c.xxxSmall_4}),l.jsx(K,{size:"small",color:"currentColor",icon:Pe,"aria-hidden":"true"})]})}}const ee={actionMenuOpener:{color:{default:{background:"none",foreground:d.action.secondary.progressive.default.foreground},disabled:{foreground:d.action.secondary.disabled.foreground},press:{foreground:d.action.secondary.progressive.press.foreground}}}},H=C.StyleSheet.create({shared:{position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",height:P,border:"none",borderRadius:I.radius.radius_040,cursor:"pointer",outline:"none",textDecoration:"none",boxSizing:"border-box",touchAction:"manipulation",":focus":{WebkitTapHighlightColor:"rgba(0,0,0,0)"}},default:{background:ee.actionMenuOpener.color.default.background,color:ee.actionMenuOpener.color.default.foreground},disabled:{color:ee.actionMenuOpener.color.disabled.foreground,cursor:"not-allowed"},small:{height:c.xLarge_32},text:{textAlign:"left",display:"inline-block",alignItems:"center",fontWeight:"bold",userSelect:"none",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",pointerEvents:"none"},focus:{":after":{content:"''",position:"absolute",height:2,left:0,right:0,bottom:-1,background:"currentColor"}},press:{color:ee.actionMenuOpener.color.press.foreground}});class Kt extends h.Component{static getDerivedStateFromProps(t,e){return{opened:typeof t.opened=="boolean"?t.opened:e.opened}}getMenuItems(){const{children:t,selectedValues:e}=this.props,o=h.Children.toArray(t).filter(Boolean),r=o.some(s=>L.isClassOf(s));return o.map(s=>{const{value:i,disabled:a}=s.props,u={component:s,focusable:re.isClassOf(s)||L.isClassOf(s)?!a:!1,populatedProps:{}};if(re.isClassOf(s))return{...u,populatedProps:{indent:r,onClick:this.handleItemSelected}};if(L.isClassOf(s)){const p=e?e.includes(i):!1;return{...u,populatedProps:{onToggle:this.handleOptionSelected,selected:p,variant:"check",role:"menuitemcheckbox","aria-checked":p,"aria-selected":void 0}}}else return u})}renderOpener(t,e){const{disabled:o,menuText:r,opener:s,testId:i,id:a}=this.props;return l.jsx(oe,{id:a,children:u=>l.jsx(xe,{id:u,"aria-controls":e,"aria-haspopup":"menu",onClick:this.handleClick,disabled:t===0||o,text:r,ref:this.handleOpenerRef,testId:s?void 0:i,opened:this.state.opened,role:"button",children:s||(p=>{const{text:m,opened:g,...S}=p;return l.jsx(Bt,{...S,disabled:o,opened:!!g,testId:i,children:r})})})})}render(){const{alignment:t,dropdownStyle:e,style:o,className:r,dropdownId:s}=this.props,i=this.getMenuItems();return l.jsx(oe,{id:s,children:a=>l.jsx(He,{id:a,role:"menu",style:o,className:r,opener:this.renderOpener(i.length,a),alignment:t,open:this.state.opened,items:i,openerElement:this.openerElement,onOpenChanged:this.handleOpenChanged,dropdownStyle:[qt.menuTopSpace,e]})})}constructor(...t){super(...t),this.state={opened:!1},this.handleItemSelected=()=>{this.handleOpenChanged(!1),this.openerElement&&this.openerElement.focus()},this.handleOpenChanged=e=>{this.setState({opened:e}),this.props.onToggle&&this.props.onToggle(e)},this.handleOptionSelected=e=>{const{onChange:o,selectedValues:r}=this.props;if(!(!o||!r)){if(r.includes(e)){const s=r.indexOf(e),i=[...r.slice(0,s),...r.slice(s+1)];o(i)}else o([...r,e]);this.handleItemSelected()}},this.handleOpenerRef=e=>{this.openerElement=W.findDOMNode(e)},this.handleClick=e=>{this.handleOpenChanged(!this.state.opened)}}}Kt.defaultProps={alignment:"left",disabled:!1};const qt=C.StyleSheet.create({caret:{marginLeft:4},opener:{whiteSpace:"nowrap",userSelect:"none",overflow:"hidden",textOverflow:"ellipsis"},menuTopSpace:{top:-4}}),Ut=ne("button");class We extends h.Component{render(){const{children:t,disabled:e,error:o,id:r,isPlaceholder:s,open:i,testId:a,"aria-label":u,"aria-required":p,"aria-controls":m,onBlur:g,onOpenChanged:S,...b}=this.props,x=Gt(s,o),O=e?d.icon.disabled:d.icon.primary,k=[me.shared,x.default,e&&x.disabled,!e&&this.state.pressed&&x.press];return l.jsxs(Ut,{...b,"aria-disabled":e,"aria-expanded":i?"true":"false","aria-invalid":o,"aria-label":u??void 0,"aria-required":p,"aria-haspopup":"listbox","aria-controls":m,"data-testid":a,id:r,role:"combobox",type:"button",style:k,onClick:e?void 0:this.handleClick,onKeyDown:e?void 0:this.handleKeyDown,onKeyUp:e?void 0:this.handleKeyUp,onBlur:g,children:[l.jsx(B,{style:me.text,children:t||l.jsx("span",{"aria-hidden":"true",children:" "})}),l.jsx(K,{icon:Pe,color:O,size:"small",style:me.caret,"aria-hidden":"true"})]})}constructor(t){super(t),this.handleClick=e=>{const{open:o}=this.props;this.props.onOpenChanged(!o)},this.handleKeyDown=e=>{const o=e.key;(o===_.enter||o===_.space)&&(this.setState({pressed:!0}),e.preventDefault())},this.handleKeyUp=e=>{const o=e.key;(o===_.enter||o===_.space)&&(this.setState({pressed:!1}),this.handleClick(e))},this.state={pressed:!1}}}We.defaultProps={disabled:!1,error:!1,isPlaceholder:!1};const me=C.StyleSheet.create({shared:{position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"space-between",color:d.text.primary,height:P,paddingLeft:c.medium_16,paddingRight:c.small_12,borderWidth:0,borderRadius:I.radius.radius_040,borderStyle:"solid",outline:"none",textDecoration:"none",boxSizing:"border-box",whiteSpace:"nowrap",touchAction:"manipulation"},text:{marginRight:c.xSmall_8,whiteSpace:"nowrap",userSelect:"none",overflow:"hidden",textOverflow:"ellipsis"},caret:{minWidth:16}}),te={},Gt=(n,t)=>{const e=`${n}-${t}`;if(te[e])return te[e];const o=t?"destructive":"progressive",r=d.action.secondary[o],s={outlineOffset:`calc(${I.width.medium} * -1)`,outlineStyle:"solid",outlineWidth:I.width.medium},i={...s,outlineColor:d.focus.outer},a={...s,outlineColor:r.hover.border},u={background:r.press.background,color:n?t?d.text.secondary:d.action.secondary.progressive.press.foreground:d.text.primary,outlineColor:r.press.border,...s},p=t?d.input.error:d.input.default,m={default:{background:p.background,borderColor:p.border,borderWidth:I.width.thin,color:n?d.text.secondary:p.foreground,":hover:not([aria-disabled=true])":a,"@media not (hover: hover)":{":hover:not([aria-disabled=true])":{borderColor:p.border,borderWidth:I.width.thin,paddingLeft:c.medium_16,paddingRight:c.small_12}},":focus-visible:not([aria-disabled=true])":i,":active:not([aria-disabled=true])":u},disabled:{background:d.input.disabled.background,borderColor:d.input.disabled.border,color:d.input.disabled.foreground,cursor:"not-allowed",":focus-visible":{outlineColor:d.focus.outer,...s}},press:u};return te[e]=C.StyleSheet.create(m),te[e]},Xt="This field is required.";function V(n){return n?n.length>0:!1}function Yt({value:n,disabled:t=!1,validate:e,onValidate:o,required:r,open:s}){const[i,a]=h.useState(()=>e&&V(n)&&!t&&e(n)||null),u=h.useCallback(b=>{if(!t){if(e){const x=b!==void 0&&e(b)||null;if(a(x),o&&o(x),x)return}if(r){const x=typeof r=="string"?r:Xt,O=V(b)?null:x;a(O),o&&o(O)}}},[t,e,a,o,r]);dt(()=>{V(n)&&u(n)});function p(){!s&&r&&!V(n)&&u(n)}return{errorMessage:i,onOpenerBlurValidation:p,onDropdownClosedValidation:()=>{r&&!V(n)&&u(n)},onSelectionValidation:b=>{u(b)},onSelectedValuesChangeValidation:()=>{a(null),o&&o(null)}}}const Zt=n=>{const t=h.useRef(0),{children:e,error:o=!1,id:r,opener:s,placeholder:i,selectedValue:a,testId:u,alignment:p="left",autoFocus:m=!0,dropdownStyle:g,enableTypeAhead:S=!0,isFilterable:b,labels:x={clearSearch:F.clearSearch,filter:F.filter,noResults:F.noResults,someResults:F.someSelected},onChange:O,onToggle:k,opened:E,style:q,className:le,"aria-label":ye,"aria-invalid":Ne,"aria-required":Ve,disabled:U=!1,dropdownId:Be,validate:Ke,onValidate:qe,required:Ue,showOpenerLabelAsText:Ge=!0,...Xe}=n,[D,G]=h.useState(!1),[ae,Se]=h.useState(""),[de,Ye]=h.useState(),{errorMessage:Ze,onOpenerBlurValidation:Ce,onDropdownClosedValidation:Je,onSelectionValidation:Qe}=Yt({value:a,disabled:U,validate:Ke,onValidate:qe,required:Ue,open:D}),Ie=o||!!Ze;h.useEffect(()=>{U?G(!1):typeof E=="boolean"&&G(E)},[U,E]);const ce=f=>{G(f),Se(""),k&&k(f),f||Je()},et=f=>{f!==a&&O(f),D&&de&&de.focus(),G(!1),k&&k(!1),Qe(f)},tt=f=>{let w=0;return t.current=0,f.map(R=>{const{disabled:M,value:z}=R.props,he=a===z;return he&&(t.current=w),M||(w+=1),{component:R,focusable:!M,populatedProps:{onToggle:et,selected:he,variant:"check"}}})},ot=f=>{const w=ae.toLowerCase();return f.filter(({props:R})=>!ae||se(R).toLowerCase().indexOf(w)>-1)},rt=f=>tt(b?ot(f):f),st=f=>{Se(f)},ke=f=>{const w=W.findDOMNode(f);Ye(w)},nt=f=>{ce(!D)},we=f=>{ct({message:f})};h.useEffect(()=>{const w=h.Children.toArray(e).find(R=>R.props.value===a);if(w){const R=se(w.props);R&&we(R)}},[a,e]);const it=(f,w)=>{const M=h.Children.toArray(e).find(X=>X.props.value===a);let z;return M?z=Wt(Ge,M.props):z=i,l.jsx(oe,{id:r,children:X=>s?l.jsx(xe,{id:X,"aria-label":ye,"aria-controls":w,"aria-haspopup":"listbox",onClick:nt,disabled:f,ref:ke,role:"combobox",text:z,opened:D,error:Ie,onBlur:Ce,children:s}):l.jsx(We,{...Xe,"aria-label":ye,"aria-controls":w,disabled:f,id:X,error:Ie,isPlaceholder:!M,onOpenChanged:ce,open:D,ref:ke,testId:u,onBlur:Ce,children:z})})},ve=h.Children.toArray(e).filter(Boolean),lt=ve.filter(f=>!f.props.disabled).length,ue=rt(ve),Oe=lt===0||U,{someResults:_e}=x;return h.useEffect(()=>{D&&we(_e(ue.length))},[ue.length,_e,D]),l.jsx(oe,{id:Be,children:f=>l.jsx(He,{id:f,role:"listbox",selectionType:"single",alignment:p,autoFocus:m,enableTypeAhead:S,dropdownStyle:[b&&Ot,vt,g],initialFocusedIndex:t.current,items:ue,onOpenChanged:ce,open:D,opener:it(Oe,f),openerElement:de,style:q,className:le,isFilterable:b,onSearchTextChanged:b?st:void 0,searchText:b?ae:"",labels:x,"aria-invalid":Ne,"aria-required":Ve,disabled:Oe})})};ne("span");C.StyleSheet.create({srOnly:{border:0,clip:"rect(0,0,0,0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}});h.memo(function({disabled:t,focusedMultiSelectIndex:e,id:o,labels:r,onRemove:s,removeSelectedLabel:i,selected:a,testId:u}){return l.jsx(T,{role:"group",style:be.pillsWrapper,id:o,children:a.map((p,m)=>{const g=r[m],S=m===e,b=o+m;return l.jsx(xt,{id:b,testId:u?`${u}-pill-${m}`:void 0,size:"small",style:[be.pill,S&&be.pillFocused],kind:S?"info":"neutral","aria-label":i(g),tabIndex:-1,onClick:()=>s(p),children:l.jsxs(l.Fragment,{children:[g,!t&&l.jsx(K,{icon:yt,size:"small"})]})},b)})})});const be=C.StyleSheet.create({pillsWrapper:{flexDirection:"row",flexWrap:"wrap"},pill:{fontSize:St.body.size.small,justifyContent:"space-between",alignItems:"center",marginBlockStart:c.xxxSmall_4,marginInlineEnd:c.xxxSmall_4,paddingInlineEnd:c.xxxSmall_4},pillFocused:{outline:`1px solid ${d.focus.outer}`}}),Jt={listbox:{color:{disabled:{foreground:d.action.secondary.disabled.foreground}}}};C.StyleSheet.create({listbox:{outline:"none"},disabled:{color:Jt.listbox.color.disabled.foreground}});const v={combobox:{color:{default:{border:d.input.default.border,background:d.input.default.background},focus:{border:d.focus.outer,background:d.surface.primary},disabled:d.input.disabled,error:d.input.error}},listbox:{color:{default:{background:d.surface.primary,border:d.core.border.neutral.subtle}}}};C.StyleSheet.create({wrapper:{flexDirection:"row",alignItems:"center",width:"100%",maxWidth:"100%",flexWrap:"wrap",background:v.combobox.color.default.background,borderRadius:I.radius.radius_040,border:`solid 1px ${v.combobox.color.default.border}`,paddingInline:c.xSmall_8},focused:{background:v.combobox.color.focus.background,border:`1px solid ${v.combobox.color.focus.border}`},disabled:{background:v.combobox.color.disabled.background,border:`1px solid ${v.combobox.color.disabled.border}`,color:v.combobox.color.disabled.foreground},error:{background:v.combobox.color.error.background,border:`1px solid ${v.combobox.color.error.border}`,color:v.combobox.color.error.foreground},combobox:{appearance:"none",background:"none",border:"none",outline:"none",padding:0,minWidth:c.xxxSmall_4,width:"auto",display:"inline-grid",gridArea:"1 / 2",":focus-visible":{outline:"none",border:"none"}},listbox:{backgroundColor:v.listbox.color.default.background,borderRadius:I.radius.radius_040,border:`solid ${I.width.thin} ${v.listbox.color.default.border}`,boxShadow:`0px ${c.xSmall_8}px ${c.xSmall_8}px 0px ${Me.offBlack8}`,maxHeight:"var(--popper-max-height)",overflowY:"auto"},hidden:{pointerEvents:"none",visibility:"hidden"},button:{position:"absolute",right:c.xxxSmall_4,top:c.xxxSmall_4,margin:0},buttonOpen:{transform:"rotate(180deg)"},clearButton:{right:c.xLarge_32+c.xSmall_8},iconWrapper:{padding:c.xxxSmall_4,minWidth:"auto"}});const Qt=Object.keys(Ct),eo=n=>{const{selectedValue:t,style:e,onChange:o}=n;return l.jsx(T,{style:[je.row,e],children:l.jsxs(B,{tag:"label",style:je.row,children:["color",l.jsx(ge,{size:c.xxSmall_6}),l.jsx(Zt,{selectedValue:t,onChange:o,placeholder:"",children:Qt.map(r=>l.jsx(L,{value:r,label:r,leftAccessory:l.jsx(wt,{color:r,decorative:!0})},r))})]})})},je=C.StyleSheet.create({row:{display:"flex",flexDirection:"row",alignItems:"center",minWidth:"auto"}});eo.__docgenInfo={description:"",methods:[],displayName:"ColorSelect",props:{selectedValue:{required:!0,tsType:{name:"unknown[number]",raw:"(typeof lockedFigureColorNames)[number]"},description:""},style:{required:!1,tsType:{name:"StyleType"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(newColor: LockedFigureColor) => void",signature:{arguments:[{type:{name:"unknown[number]",raw:"(typeof lockedFigureColorNames)[number]"},name:"newColor"}],return:{name:"void"}}},description:""}}};export{Kt as A,eo as C,L as O,Zt as S,re as a};
