import{a as K,j as b}from"./jsx-runtime-BGVbfQ2Z.js";import{l as C}from"./index-awljIyHI.js";import{c as E}from"./index-awCzqCwC.js";import{r as O}from"./index-qhcEwEpg.js";import{R as V}from"./index-E09jvG0x.js";import{_ as X}from"./index-default-4_ZsnO94.js";import{u as Z}from"./i18n-context-9-s9cJ--.js";import{C as x}from"./perseus-api-Ly41NhN4.js";import{h as ee,r as L,n as H,s as D}from"./constants-I_nlPaPx.js";import{m as B}from"./media-queries-MaBBbpNq.js";import{s as te}from"./shared-3pf9YZIg.js";import{U as oe}from"./util-WvQWLN3r.js";import{C as ne}from"./choice-RxyDdJg6.js";import{C as se}from"./choice-none-above-BQRFhFqC.js";typeof HTMLElement<"u"&&!HTMLElement.prototype.scrollTo&&(HTMLElement.prototype.scrollTo=function(e,n){this.scrollLeft=e,this.scrollTop=n});const U=(e,n)=>{typeof e.scrollTo=="function"?e.scrollTo(0,n):"scrollTop"in e&&(e.scrollTop=n)},re=(e,n,r=0,o)=>{const l=e===window?window.pageYOffset:e.scrollTop,c=n,m=c-l,d=17,N=r/d;let h=0;const y=setInterval(function(){if(h<N){const k=h/N,S=(-Math.cos(Math.PI*k)+1)/2,v=l+m*S;U(e,v),h+=1}else U(e,c),clearInterval(y),o&&o()},d)},z=e=>e===document.body||e==null?window:e.scrollHeight>e.clientHeight?e:z(e.parentElement),ie=750,le=(e,n)=>{setTimeout(()=>{const r=z(e),o=e.getBoundingClientRect(),l=r===window?{top:0,bottom:window.innerHeight}:r.getBoundingClientRect();let c=0;const m=r===window?window.scrollY:r.scrollTop;if(o.bottom>l.bottom){let d=o.bottom-l.bottom;o.top+d<l.top&&(d=o.top-l.top),c=m+d}else if(o.top<l.top){const d=o.top-l.top;c=m+d}re(r,c,ie,n)},0)},{captureScratchpadTouchStart:ae}=oe;function de(e,n,r,o){return e?n?o.chooseNumAnswers({numCorrect:String(r)}):o.chooseAllAnswers:o.chooseOneAnswer}const ce=function(e){const{apiOptions:n,reviewModeRubric:r,choices:o,editMode:l,multipleSelect:c,labelWrap:m,countChoices:d,numCorrect:N,isLastUsedWidget:h,registerFocusFunction:y}=e,{strings:k}=Z(),S=O.useRef(),v=O.useRef([]);O.useEffect(()=>{if(n.canScrollPage&&h&&r&&!S.current){const t=o.findIndex(s=>s.checked);if(t>=0){const s=v.current[t],a=V.findDOMNode(s.current);a&&le(a)}}S.current=r},[n,o,h,r]);function A(t,s){const{multipleSelect:g,choices:a,onChange:R}=e;let p;s.checked&&!g?p=a.map(f=>!1):p=a.map(f=>f.checked);const M=a.map(f=>f.crossedOut);p[t]=s.checked,M[t]=s.crossedOut,R({checked:p,crossedOut:M})}y==null||y(t=>{const s=v.current[t||0],a=V.findDOMNode(s.current);if(a)a.focus();else return!1;return!0});const T=!!r,I=n.isMobile,$=o[0].highlighted,j=o[o.length-1].highlighted,W=E("perseus-widget-radio",!l&&"perseus-rendered-radio",C.css(i.radio,i.responsiveRadioContainer,$&&I&&i.radioContainerFirstHighlighted,j&&I&&i.radioContainerLastHighlighted)),Y=E("instructions",C.css(i.instructions,I&&i.instructionsMobile)),P=de(c,d,N,k),Q=C.css(i.responsiveFieldset),G=K("fieldset",{className:`perseus-widget-radio-fieldset ${Q}`,children:[b("legend",{className:"perseus-sr-only",children:P}),b("div",{className:Y,"aria-hidden":"true",children:P}),b("ul",{className:W,style:{listStyle:"none"},children:o.map((t,s)=>{let g=ne;const a=O.createRef();v.current[s]=a;const R={apiOptions:n,multipleSelect:c,checked:t.checked,crossedOut:t.crossedOut,previouslyAnswered:t.previouslyAnswered,reviewMode:T,correct:t.correct,rationale:t.rationale,content:t.content,disabled:n.readOnly||t.disabled,showCorrectness:T||!!t.showCorrectness,showRationale:t.hasRationale&&(T||t.showRationale),pos:s,onChange:u=>{l||A(s,u)}};t.isNoneOfTheAbove&&(g=se,X.extend(R,{showContent:t.revealNoneOfTheAbove}));const p=o[s+1],M=!!p&&p.highlighted,f=u=>C.css(te.aboveScratchpad,i.item,i.responsiveItem,u&&i.selectedItem,u&&t.highlighted&&i.aboveBackdrop,u&&t.highlighted&&n.isMobile&&i.aboveBackdropMobile,M&&n.isMobile&&i.nextHighlighted);f(!0);let F;T&&r&&(F=r.choices[s].correct?x.CORRECT:x.INCORRECT);const J=E(f(t.checked),x.RADIO.OPTION,t.checked&&x.RADIO.SELECTED,F);let _=null,q=null;return l&&(q=u=>{let w=u.target;for(;w&&w!==_;){if(w.getAttribute("data-is-radio-icon")){A(s,{checked:!t.checked,crossedOut:t.crossedOut});return}w=w.parentNode}}),b("li",{ref:u=>_=u,className:J,onClick:q,onTouchStart:m?ae:null,children:b(g,{...R,ref:a})},s)})})]});return b("div",{className:C.css(i.responsiveContainer),children:G})};ce.defaultProps={editMode:!1,multipleSelect:!1};const i=C.StyleSheet.create({instructions:{display:"block",color:ee,fontSize:14,lineHeight:1.25,fontFamily:"inherit",fontStyle:"normal",fontWeight:"bold",marginBottom:16},instructionsMobile:{fontSize:18,[B.smOrSmaller]:{fontSize:16},[B.xl]:{fontSize:20}},radio:{padding:0},responsiveRadioContainer:{borderBottom:`1px solid ${L}`,borderTop:`1px solid ${L}`,width:"auto",[B.smOrSmaller]:{marginLeft:H,marginRight:H}},radioContainerFirstHighlighted:{borderTop:"1px solid rgba(0, 0, 0, 0)"},radioContainerLastHighlighted:{borderBottom:"1px solid rgba(0, 0, 0, 0)"},item:{marginLeft:20},responsiveItem:{marginLeft:0,padding:0,":not(:last-child)":{borderBottom:`1px solid ${L}`}},selectedItem:{background:"white"},aboveBackdrop:{position:"relative",zIndex:1062},aboveBackdropMobile:{boxShadow:"0 0 4px 0 rgba(0, 0, 0, 0.2),0 0 2px 0 rgba(0, 0, 0, 0.1)",":not(:last-child)":{borderBottom:"1px solid rgba(0, 0, 0, 0)"}},nextHighlighted:{":not(:last-child)":{borderBottom:"1px solid rgba(0, 0, 0, 0)"}},responsiveContainer:{overflow:"auto",marginLeft:H,paddingLeft:D},responsiveFieldset:{paddingRight:D,minWidth:"auto"}});try{baseradio.displayName="baseradio",baseradio.__docgenInfo={description:"",displayName:"baseradio",props:{apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!0,type:{name:"Readonly<{ isArticle?: boolean | undefined; onInputError?: ((widgetId: any, value: string, message?: string | null | undefined) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown) | undef..."}},choices:{defaultValue:null,description:"",name:"choices",required:!0,type:{name:"readonly ChoiceType[]"}},deselectEnabled:{defaultValue:null,description:"",name:"deselectEnabled",required:!1,type:{name:"boolean"}},editMode:{defaultValue:{value:"false"},description:"",name:"editMode",required:!1,type:{name:"boolean"}},labelWrap:{defaultValue:null,description:"",name:"labelWrap",required:!0,type:{name:"boolean"}},countChoices:{defaultValue:null,description:"",name:"countChoices",required:!0,type:{name:"boolean | null | undefined"}},numCorrect:{defaultValue:null,description:"",name:"numCorrect",required:!0,type:{name:"number"}},multipleSelect:{defaultValue:{value:"false"},description:"",name:"multipleSelect",required:!1,type:{name:"boolean"}},reviewModeRubric:{defaultValue:null,description:"",name:"reviewModeRubric",required:!1,type:{name:"PerseusRadioWidgetOptions"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newValues: { checked: readonly boolean[]; crossedOut: readonly boolean[]; }) => void"}},registerFocusFunction:{defaultValue:null,description:"",name:"registerFocusFunction",required:!1,type:{name:"((arg1: FocusFunction) => void)"}},isLastUsedWidget:{defaultValue:null,description:"",name:"isLastUsedWidget",required:!1,type:{name:"boolean"}}}}}catch{}export{ce as B};
