var k=Object.defineProperty;var b=(o,t,e)=>t in o?k(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var g=(o,t,e)=>(b(o,typeof t!="symbol"?t+"":t,e),e);import{j as a}from"./jsx-runtime-BT65X5dW.js";import{r as h}from"./index-C6mWTJJr.js";import{b as f}from"./all-widgets-DEn0Y4JJ.js";import"./index-CskvhqFA.js";import"./answer-choices-DU9fOrLj.js";import"./index-CbNKSLRm.js";import"./index-B1Gws05u.js";import"./i18n-context-3AkWzTTj.js";import"./perseus-api-Ty_QvlNi.js";import"./renderer-BtUcJPDb.js";import"./index-D7h-teXI.js";import"./jquery-CkHB0_Mt.js";import"./underscore-U-AHniOr.js";import{g as x}from"./dependencies-BsVPGK1s.js";import{U as v}from"./util-DwbObvuA.js";import"./zoomable-tex-Dy-nElJT.js";import"./svg-image-BdyKxVxV.js";import"./core-widget-registry-uDhx67d3.js";import{n as m}from"./no-important-DlFk8a1I.js";import"./number-input-Bfpkakta.js";import"./simple-keypad-input-RPQkkjpJ.js";import"./text-input-DMMXsyY1.js";import"./phet-simulation-ylWgoYlI.js";import"./sortable-GEeSu96O.js";import"./fixed-to-responsive-CTsII9Xx.js";import"./math-input-BmEVS56k.js";import"./video-transcript-link-C7EJC_3o.js";import"./item-version-B33j_Ozm.js";import"./article-renderer-BQ8SNDZ2.js";import"./server-item-renderer-Ck2ZylAM.js";import"./hints-renderer-pZx2q0Sw.js";import"./base-radio-t3uzag9T.js";import"./button-group-CrIfrEdw.js";import"./hud-CP_ly967.js";import"./icon-BfyZ3piz.js";import"./index-CnlhjbO_.js";import"./inline-icon-AJRwMA4Z.js";import"./multi-button-group-U6RQwTwG.js";import"./range-input-D1azgtUf.js";import"./text-list-editor-HcP7oGoC.js";import"./index-Dd-cahjY.js";import{a as R,b as M}from"./global-colors-DSS4FaUr.js";import{M as w}from"./marker-DBjb7mvj.js";class C extends h.Component{constructor(){super(...arguments);g(this,"_markers",[]);g(this,"handleImageDoubleClick",e=>{e.preventDefault();const r=e.currentTarget.getBoundingClientRect(),s=Math.round((e.clientX-r.left)/r.width*1e3)/10,c=Math.round((e.clientY-r.top)/r.height*1e3)/10,{markers:i,onChange:l}=this.props;l([...i,{answers:[],label:"",x:s,y:c}])})}openDropdownForMarkerIndices(e){e.forEach(r=>{var s;this._markers[r]&&((s=this._markers[r])==null||s.openDropdown())})}render(){const{choices:e,imageUrl:r,imageWidth:s,imageHeight:c,markers:i,onChange:l}=this.props,y=x().staticUrl;return a.jsxs("div",{children:[a.jsx("div",{className:m.css(p.title),children:"Markers"}),a.jsx("div",{className:m.css(p.subtitle),children:r?a.jsxs("span",{children:["Double-click on the image to add a marker.",a.jsx("br",{}),a.jsx("br",{}),"Markers are read by screen readers in the order that you add them here, so add in a logical order for the learner (e.g. sequentially, clockwise). You can test order by using keyboard tabbing."]}):"Upload an image to place markers."}),r&&a.jsxs("div",{className:m.css(p.markersCanvas),style:{maxWidth:s,maxHeight:c},children:[a.jsx("img",{alt:"",className:m.css(p.image),src:y(v.getRealImageUrl(r)),onDoubleClick:this.handleImageDoubleClick}),i.map((d,n)=>h.createElement(w,{...d,choices:e,key:`${d.x}.${d.y}`,onChange:u=>l([...i.slice(0,n),u,...i.slice(n+1)]),onRemove:()=>l([...i.slice(0,n),...i.slice(n+1)]),ref:u=>this._markers[n]=u}))]})]})}}const p=m.StyleSheet.create({title:{...f,marginBottom:6,color:M},subtitle:{fontFamily:"inherit",fontSize:12,lineHeight:"14px",marginBottom:12,color:R},markersCanvas:{position:"relative",border:"solid 1px rgba(33, 36, 44, 0.16)"},image:{display:"block",maxWidth:"100%"}});C.__docgenInfo={description:"",methods:[{name:"openDropdownForMarkerIndices",docblock:null,modifiers:[],params:[{name:"indices",optional:!1,type:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>",alias:"ReadonlyArray"}}],returns:null},{name:"handleImageDoubleClick",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"ReactMouseEvent",raw:"React.MouseEvent",alias:"React.MouseEvent"}}],returns:null}],displayName:"QuestionMarkers",props:{choices:{required:!0,tsType:{name:"ReadonlyArray",elements:[{name:"string"}],raw:"ReadonlyArray<string>"},description:""},imageUrl:{required:!0,tsType:{name:"string"},description:""},imageWidth:{required:!0,tsType:{name:"number"},description:""},imageHeight:{required:!0,tsType:{name:"number"},description:""},markers:{required:!0,tsType:{name:"ReadonlyArray",raw:'PerseusLabelImageWidgetOptions["markers"]'},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:'(markers: PerseusLabelImageWidgetOptions["markers"]) => void',signature:{arguments:[{type:{name:"ReadonlyArray",raw:'PerseusLabelImageWidgetOptions["markers"]'},name:"markers"}],return:{name:"void"}}},description:""}}};export{C as Q};
