import{j as n}from"./jsx-runtime-63Ea5SlK.js";import{r as X}from"./index-6oxdNXpR.js";import"./index-default-4_ZsnO94.js";import{k as x,q as T}from"./core-widget-registry-uiKfW1Am.js";import{B as C}from"./index-_CVl-B2F.js";import{V as u}from"./index-_3CKOwHy.js";import{S as O,O as Y}from"./answer-choices-XcVB2NdQ.js";import{I as y}from"./index-ZdJtI3z8.js";import{S as p,a as G}from"./index-o999uk82.js";import{c as g,s}from"./index-QHkT31Yt.js";import{L as b,a as L}from"./index-4dAUYsag.js";import{p as S,L as H}from"./locked-figure-aria-dmAalGa2.js";import{n as F}from"./no-important-xCWWYXQR.js";import{C as J,L as K,a as Q}from"./locked-label-settings-mc5HIgDm.js";import{P as j}from"./trash-bold-sAWlZ6WA.js";import{C as Z}from"./color-select-QcregsJ5.js";import{L as ee}from"./labeled-switch-ikuOYbzu.js";import{L as ne}from"./line-stroke-select-duVZ3rjC.js";import{g as re,j as oe,a as q,b as te}from"./util-EWhvTDUC.js";const ae=""+new URL("arrow-fat-down-X5ut-FGw.svg",import.meta.url).href,le=""+new URL("arrow-fat-left-LxuHjYfJ.svg",import.meta.url).href,ie=""+new URL("arrow-fat-right-CxkbbISx.svg",import.meta.url).href,se=""+new URL("arrow-fat-up-ah2eaaIR.svg",import.meta.url).href,ue=""+new URL("minus-circle-9EKbQa8X.svg",import.meta.url).href,A=c=>{const{color:l,fillStyle:d,strokeStyle:h}=c;return n.jsx(u,{"aria-label":`${l}, stroke ${h}, fill ${d}`,style:[P.container,{border:`4px ${h} ${x[l]}`}],children:n.jsx(u,{style:[P.innerSquare,{backgroundColor:x[l],opacity:d==="white"?0:T[d]}]})})},P=F.StyleSheet.create({container:{outline:`2px solid ${g.offWhite}`,width:s.large_24,height:s.large_24,backgroundColor:g.white,alignItems:"center",justifyContent:"center"},innerSquare:{width:20,height:20}});A.__docgenInfo={description:"",methods:[],displayName:"PolygonSwatch",props:{color:{required:!0,tsType:{name:"unknown[number]",raw:"(typeof lockedFigureColorNames)[number]"},description:""},fillStyle:{required:!0,tsType:{name:"union",raw:'"none" | "white" | "translucent" | "solid"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"white"'},{name:"literal",value:'"translucent"'},{name:"literal",value:'"solid"'}]},description:""},strokeStyle:{required:!0,tsType:{name:"union",raw:'"solid" | "dashed"',elements:[{name:"literal",value:'"solid"'},{name:"literal",value:'"dashed"'}]},description:""}}};const $=c=>{const{points:l,color:d,showVertices:h,fillStyle:v,strokeStyle:f,labels:r,ariaLabel:R,expanded:z,onToggle:_,onChangeProps:i,onMove:B,onRemove:I}=c;async function M(){let e=`Polygon${await oe(r)} with ${l.length} sides, vertices at `;const a=await Promise.all(l.map(async([k,N])=>{const W=await q(`$${k}$`),E=await q(`$${N}$`);return`${W} comma ${E}`}));e+=a.join(", ");const m=te(d,f,v);return e+=m,e}function U(o){const e={color:o};e.labels=r==null?void 0:r.map(a=>({...a,color:o})),i(e)}function w(o){switch(o){case"up":i({points:l.map(([e,a])=>[e,a+1]),labels:r==null?void 0:r.map(e=>({...e,coord:[e.coord[0],e.coord[1]+1]}))});break;case"down":i({points:l.map(([e,a])=>[e,a-1]),labels:r==null?void 0:r.map(e=>({...e,coord:[e.coord[0],e.coord[1]-1]}))});break;case"left":i({points:l.map(([e,a])=>[e-1,a]),labels:r==null?void 0:r.map(e=>({...e,coord:[e.coord[0]-1,e.coord[1]]}))});break;case"right":i({points:l.map(([e,a])=>[e+1,a]),labels:r==null?void 0:r.map(e=>({...e,coord:[e.coord[0]+1,e.coord[1]]}))});break}}function V(o,e){if(!r)return;const a=[...r];a[e]={...r[e],...o},i({labels:a})}function D(o){if(!r)return;const e=r.filter((a,m)=>m!==o);i({labels:e})}return n.jsxs(j,{expanded:z,onToggle:_,header:n.jsxs(u,{style:t.row,children:[n.jsx(b,{children:`Polygon, ${l.length} sides`}),n.jsx(p,{size:s.xSmall_8}),n.jsx(A,{color:d,fillStyle:v,strokeStyle:f})]}),children:[n.jsxs(u,{style:[t.row,t.spaceUnder],children:[n.jsx(Z,{selectedValue:d,onChange:U}),n.jsx(p,{size:s.medium_16}),n.jsxs(L,{tag:"label",style:[t.row,t.truncatedWidth],children:["fill",n.jsx(p,{size:s.xxSmall_6}),n.jsx(O,{selectedValue:v,onChange:o=>i({fillStyle:o}),placeholder:"",children:Object.keys(T).map(o=>n.jsx(Y,{value:o,label:o},o))})]})]}),n.jsx(ne,{selectedValue:f,onChange:o=>i({strokeStyle:o})}),n.jsx(ee,{label:"show vertices",checked:h,onChange:o=>i({showVertices:o}),style:t.spaceUnder}),n.jsxs(j,{header:n.jsx(b,{children:"Points"}),expanded:!0,containerStyle:t.pointAccordionContainer,panelStyle:t.pointAccordionPanel,children:[l.map((o,e)=>{const a=String.fromCharCode(65+e);return n.jsxs(u,{style:[t.row,t.spaceUnder],children:[n.jsx(b,{children:`${a}:`}),n.jsx(p,{size:s.medium_16}),n.jsx(J,{coord:o,labels:["x","y"],onChange:m=>{const k=[...l];k[e]=m,c.onChangeProps({points:k})}}),l.length>3&&n.jsx(y,{"aria-label":`Delete polygon point ${a}`,icon:ue,color:"destructive",onClick:()=>{const m=[...l];m.splice(e,1),c.onChangeProps({points:m})},style:t.icon})]},`locked-polygon-point-index-${e}`)}),n.jsxs(u,{style:[t.row,t.polygonActionsContainer],children:[n.jsx(C,{kind:"tertiary",startIcon:S,onClick:()=>{c.onChangeProps({points:[...l,[0,0]]})},children:"Add point"}),n.jsx(G,{}),n.jsxs(u,{style:t.movementButtonsContainer,children:[n.jsx(y,{"aria-label":"Move polygon up",style:t.iconButton,size:"small",icon:se,onClick:()=>w("up")}),n.jsxs(u,{style:t.row,children:[n.jsx(y,{"aria-label":"Move polygon left",style:t.iconButton,size:"small",icon:le,onClick:()=>w("left")}),n.jsx(y,{"aria-label":"Move polygon down",style:t.iconButton,size:"small",icon:ae,onClick:()=>w("down")}),n.jsx(y,{"aria-label":"Move polygon right",style:t.iconButton,size:"small",icon:ie,onClick:()=>w("right")})]})]})]})]}),n.jsx(p,{size:s.small_12}),n.jsx(u,{style:t.horizontalRule}),n.jsx(H,{ariaLabel:R,getPrepopulatedAriaLabel:M,onChangeProps:o=>{i(o)}}),n.jsx(p,{size:s.xxxSmall_4}),n.jsx(u,{style:t.horizontalRule}),n.jsx(p,{size:s.small_12}),n.jsx(L,{children:"Visible labels"}),r==null?void 0:r.map((o,e)=>X.createElement(K,{...o,key:e,expanded:!0,onChangeProps:a=>{V(a,e)},onRemove:()=>{D(e)},containerStyle:t.labelContainer})),n.jsx(C,{kind:"tertiary",startIcon:S,onClick:()=>{const o={...re("label"),coord:[l[0][0],l[0][1]-((r==null?void 0:r.length)??0)],color:d};i({labels:[...r??[],o]})},style:t.addButton,children:"Add visible label"}),n.jsx(Q,{figureType:c.type,onMove:B,onRemove:I})]})},t=F.StyleSheet.create({row:{display:"flex",flexDirection:"row",alignItems:"center"},pointAccordionContainer:{backgroundColor:g.white},pointAccordionPanel:{alignItems:"start"},icon:{marginInlineStart:s.xxxSmall_4},polygonActionsContainer:{width:"100%"},iconButton:{margin:0},movementButtonsContainer:{display:"flex",flexDirection:"column",alignItems:"center",minWidth:"fit-content"},spaceUnder:{marginBottom:s.xSmall_8},truncatedWidth:{minWidth:0},addButton:{alignSelf:"start"},labelContainer:{backgroundColor:g.white},horizontalRule:{height:1,backgroundColor:g.offBlack16}}),Te=$;$.__docgenInfo={description:"",methods:[],displayName:"LockedPolygonSettings",props:{onMove:{required:!0,tsType:{name:"signature",type:"function",raw:"(movement: LockedFigureSettingsMovementType) => void",signature:{arguments:[{type:{name:"union",raw:`| "back"
| "backward"
| "forward"
| "front"`,elements:[{name:"literal",value:'"back"'},{name:"literal",value:'"backward"'},{name:"literal",value:'"forward"'},{name:"literal",value:'"front"'}]},name:"movement"}],return:{name:"void"}}},description:"Called when a movement button (top, up, down, bottom) is pressed."},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"Called when the delete button is pressed."},expanded:{required:!1,tsType:{name:"boolean"},description:"Whether this accordion is expanded."},onToggle:{required:!1,tsType:{name:"signature",type:"function",raw:"(expanded: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"expanded"}],return:{name:"void"}}},description:"Called when the accordion is expanded or collapsed."},type:{required:!0,tsType:{name:"literal",value:'"polygon"'},description:""},points:{required:!0,tsType:{name:"ReadonlyArray",elements:[{name:"tuple",raw:"[x: number, y: number]",elements:[{name:"unknown"},{name:"unknown"}]}],raw:"ReadonlyArray<Coord>"},description:""},color:{required:!0,tsType:{name:"unknown[number]",raw:"(typeof lockedFigureColorNames)[number]"},description:""},showVertices:{required:!0,tsType:{name:"boolean"},description:""},fillStyle:{required:!0,tsType:{name:"union",raw:'"none" | "white" | "translucent" | "solid"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"white"'},{name:"literal",value:'"translucent"'},{name:"literal",value:'"solid"'}]},description:""},strokeStyle:{required:!0,tsType:{name:"union",raw:'"solid" | "dashed"',elements:[{name:"literal",value:'"solid"'},{name:"literal",value:'"dashed"'}]},description:""},labels:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    type: "label";
    coord: Coord;
    // TeX-supported string
    text: string;
    color: LockedFigureColor;
    size: "small" | "medium" | "large";
}`,signature:{properties:[{key:"type",value:{name:"literal",value:'"label"',required:!0}},{key:"coord",value:{name:"tuple",raw:"[x: number, y: number]",elements:[{name:"unknown"},{name:"unknown"}],required:!0}},{key:"text",value:{name:"string",required:!0}},{key:"color",value:{name:"unknown[number]",raw:"(typeof lockedFigureColorNames)[number]",required:!0}},{key:"size",value:{name:"union",raw:'"small" | "medium" | "large"',elements:[{name:"literal",value:'"small"'},{name:"literal",value:'"medium"'},{name:"literal",value:'"large"'}],required:!0}}]}}],raw:"LockedLabelType[]"},description:""},ariaLabel:{required:!1,tsType:{name:"string"},description:""},onChangeProps:{required:!0,tsType:{name:"signature",type:"function",raw:"(newProps: Partial<LockedPolygonType>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
    type: "polygon";
    points: ReadonlyArray<Coord>;
    color: LockedFigureColor;
    showVertices: boolean;
    fillStyle: LockedFigureFillType;
    strokeStyle: LockedLineStyle;
    labels?: LockedLabelType[];
    ariaLabel?: string;
}`,signature:{properties:[{key:"type",value:{name:"literal",value:'"polygon"',required:!0}},{key:"points",value:{name:"ReadonlyArray",elements:[{name:"tuple",raw:"[x: number, y: number]",elements:[{name:"unknown"},{name:"unknown"}],required:!0}],raw:"ReadonlyArray<Coord>",required:!0}},{key:"color",value:{name:"unknown[number]",raw:"(typeof lockedFigureColorNames)[number]",required:!0}},{key:"showVertices",value:{name:"boolean",required:!0}},{key:"fillStyle",value:{name:"union",raw:'"none" | "white" | "translucent" | "solid"',elements:[{name:"literal",value:'"none"'},{name:"literal",value:'"white"'},{name:"literal",value:'"translucent"'},{name:"literal",value:'"solid"'}],required:!0}},{key:"strokeStyle",value:{name:"union",raw:'"solid" | "dashed"',elements:[{name:"literal",value:'"solid"'},{name:"literal",value:'"dashed"'}],required:!0}},{key:"labels",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
    type: "label";
    coord: Coord;
    // TeX-supported string
    text: string;
    color: LockedFigureColor;
    size: "small" | "medium" | "large";
}`,signature:{properties:[{key:"type",value:{name:"literal",value:'"label"',required:!0}},{key:"coord",value:{name:"tuple",raw:"[x: number, y: number]",elements:[{name:"unknown"},{name:"unknown"}],required:!0}},{key:"text",value:{name:"string",required:!0}},{key:"color",value:{name:"unknown[number]",raw:"(typeof lockedFigureColorNames)[number]",required:!0}},{key:"size",value:{name:"union",raw:'"small" | "medium" | "large"',elements:[{name:"literal",value:'"small"'},{name:"literal",value:'"medium"'},{name:"literal",value:'"large"'}],required:!0}}]}}],raw:"LockedLabelType[]",required:!1}},{key:"ariaLabel",value:{name:"string",required:!1}}]}}],raw:"Partial<LockedPolygonType>"},name:"newProps"}],return:{name:"void"}}},description:"Called when the props (coords, color, etc.) are updated."}}};export{Te as L};
