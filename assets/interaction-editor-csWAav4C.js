var X=Object.defineProperty;var L=(d,o,s)=>o in d?X(d,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[o]=s;var a=(d,o,s)=>(L(d,typeof o!="symbol"?o+"":o,s),s);import{j as e}from"./jsx-runtime-BT65X5dW.js";import{c as g}from"./all-widgets-DIqvGm5H.js";import{V as Y}from"./index-CW2s7ekB.js";import"./answer-choices-D8dAXOC1.js";import"./index-CFvGmn7i.js";import{r as u}from"./index-C6mWTJJr.js";import"./index-B1Gws05u.js";import"./i18n-context-3AkWzTTj.js";import"./perseus-api-Ty_QvlNi.js";import"./renderer-DnrtOpe3.js";import"./index-D7h-teXI.js";import"./jquery-CkHB0_Mt.js";import{_ as r}from"./underscore-U-AHniOr.js";import{a as f,g as I}from"./dependencies-BsVPGK1s.js";import{U as A}from"./util-Ds56MQN3.js";import"./zoomable-tex-Dy-nElJT.js";import{K as c}from"./svg-image-x8RQbND1.js";import{B as P}from"./core-widget-registry-CDUNr9Qn.js";import{n as U}from"./no-important-DlFk8a1I.js";import"./number-input-Cqv3u3VD.js";import"./simple-keypad-input-C9BMt5wD.js";import"./text-input-B8yQL4w0.js";import"./phet-simulation-DSu5lgF2.js";import"./sortable-Dwj6b4xz.js";import"./fixed-to-responsive-CTsII9Xx.js";import"./math-input-BMFxZSgV.js";import"./video-transcript-link-BsyCgIOs.js";import"./item-version-YWlkNT9d.js";import"./article-renderer-DjbGd11b.js";import"./server-item-renderer-DeGKVZlf.js";import"./hints-renderer-CpjRXhIb.js";import"./base-radio-Bbb79SIx.js";import"./button-group-CrIfrEdw.js";import"./hud-CP_ly967.js";import"./icon-BfyZ3piz.js";import"./index-C4D8Bo9-.js";import"./inline-icon-AJRwMA4Z.js";import"./multi-button-group-U6RQwTwG.js";import"./range-input-Bd3XFMQu.js";import"./text-list-editor-HcP7oGoC.js";import"./index-Dd-cahjY.js";import{E as x}from"./editor-jsonify-Dm1evHlp.js";import{G as z}from"./graph-settings-BbL7n5WR.js";import{c as m}from"./components-znWdtKY-.js";import{c as F,i as G}from"./icon-paths-C3bPmxpL.js";import{f as O,b as W,a as B}from"./icon-paths-Cfjy_uoj.js";import"./prop-types-B25Ofni1.js";import{c as J}from"./key-translator-BP_YzznA.js";import"./mobile-keypad-DXvRjyzF.js";import{u as $}from"./button-assets-C3BgrB82.js";import{c as M}from"./index-Ds5N5m2R.js";const{InlineIcon:j}=m;class h extends u.Component{constructor(s){super(s);a(this,"toggle",s=>{s.preventDefault(),this.setState({show:!this.state.show})});this.state={show:s.initiallyVisible}}render(){return e.jsxs("div",{className:"perseus-interaction-element",children:[e.jsxs("a",{href:"#",className:"perseus-interaction-element-title "+(this.state.show?"open":"closed"),onClick:this.toggle,children:[this.state.show?e.jsx(j,{...F}):e.jsx(j,{...O}),this.props.title]}),e.jsxs("div",{className:"perseus-interaction-element-content "+(this.state.show?"enter":"leave"),children:[this.props.children,(this.props.onUp!=null||this.props.onDown!=null||this.props.onDelete!=null)&&e.jsxs("div",{className:"edit-controls",children:[this.props.onUp!=null&&e.jsx("button",{onClick:this.props.onUp,children:e.jsx(j,{...W})}),this.props.onDown!=null&&e.jsx("button",{onClick:this.props.onDown,children:e.jsx(j,{...B})}),this.props.onDelete!=null&&e.jsx("button",{onClick:this.props.onDelete,children:e.jsx(j,{...G})})]})]})]})}}a(h,"defaultProps",{initiallyVisible:!1,title:"More"});h.__docgenInfo={description:"",methods:[{name:"toggle",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"ReactSyntheticEvent",raw:"React.SyntheticEvent",alias:"React.SyntheticEvent"}}],returns:null}],displayName:"ElementContainer",props:{children:{required:!0,tsType:{name:"union",raw:"React.ReactElement<any> | ReadonlyArray<React.ReactElement<any>>",elements:[{name:"ReactReactElement",raw:"React.ReactElement<any>",elements:[{name:"any"}]},{name:"ReadonlyArray",elements:[{name:"ReactReactElement",raw:"React.ReactElement<any>",elements:[{name:"any"}]}],raw:"ReadonlyArray<React.ReactElement<any>>"}]},description:""},initiallyVisible:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onDelete:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void | null | undefined",signature:{arguments:[],return:{name:"union",raw:"void | null | undefined",elements:[{name:"void"},{name:"null"},{name:"undefined"}]}}},description:""},onDown:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void | null | undefined",signature:{arguments:[],return:{name:"union",raw:"void | null | undefined",elements:[{name:"void"},{name:"null"},{name:"undefined"}]}}},description:""},onUp:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void | null | undefined",signature:{arguments:[],return:{name:"union",raw:"void | null | undefined",elements:[{name:"void"},{name:"null"},{name:"undefined"}]}}},description:""},title:{required:!1,tsType:{name:"union",raw:"string | React.ReactElement<any>",elements:[{name:"string"},{name:"ReactReactElement",raw:"React.ReactElement<any>",elements:[{name:"any"}]}]},description:"",defaultValue:{value:'"More"',computed:!1}}}};const{ButtonGroup:H}=m,K=[c.BLACK,c.BLUE,c.GREEN,c.PINK,c.PURPLE,c.RED,c.GRAY],Q=[c.LIGHT_BLUE,c.LIGHT_ORANGE,c.LIGHT_PINK,c.LIGHT_GREEN,c.LIGHT_PURPLE,c.LIGHT_RED,"#fff"];class v extends u.Component{render(){const o=this.props.lightColors?Q:K;return e.jsx(H,{value:this.props.value,allowEmpty:!1,buttons:r.map(o,s=>({value:s,content:e.jsxs("span",{children:[e.jsx("span",{className:"colorpicker-circle",style:{background:s}})," "]})})),onChange:this.props.onChange})}}a(v,"defaultProps",{value:c.BLACK,lightColors:!1});v.__docgenInfo={description:"",methods:[],displayName:"ColorPicker",props:{lightColors:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},value:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"black"',computed:!1}}}};const{ButtonGroup:Z}=m;class b extends u.Component{render(){return e.jsx(Z,{value:this.props.value,allowEmpty:!1,buttons:[{value:"",content:e.jsx("span",{children:"—"})},{value:"-",content:e.jsx("span",{children:"–––"})},{value:"- ",content:e.jsx("span",{children:"–  –"})},{value:".",content:e.jsx("span",{children:"····"})},{value:". ",content:e.jsx("span",{children:"· · ·"})}],onChange:this.props.onChange})}}a(b,"defaultProps",{value:""});b.__docgenInfo={description:"",methods:[],displayName:"DashPicker",props:{value:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}}}};function i(d){const o=u.useRef(null),s=u.useRef(),{locale:n,strings:t}=$();return u.useEffect(()=>{o.current&&!s.current&&(s.current=J(o.current,n,t,p=>({...p,handlers:{edit:l=>{let y=l.latex();y=y.replace(/<>/g,"\\ne"),d.value!==y&&d.onChange(y)},upOutOf:l=>{l.typedText("^")}}})))}),e.jsx(Y,{style:ee.outerWrapper,children:e.jsx("span",{ref:o,className:"perseus-math-input mq-editable-field mq-math-mode"})})}const ee=U.StyleSheet.create({outerWrapper:{display:"inline-block",borderStyle:"solid",borderWidth:1,borderColor:M.offBlack50,borderRadius:3,background:M.white}});i.__docgenInfo={description:`A simple Mathquill MathField input for the InteractionEditor.
Unlike our other uses of Mathquill, we're not using a keypad here;
it's just the input itself for use writing TeX.`,methods:[],displayName:"MathquillInput",props:{value:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""}}};const{NumberInput:se}=m,{getDependencies:ne}=f;class w extends u.Component{constructor(){super(...arguments);a(this,"change",(...s)=>g.apply(this,s));a(this,"serialize",()=>x.serialize.call(this))}render(){const{TeX:s}=ne();return e.jsxs("div",{className:"graph-settings",children:[e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(s,{children:this.props.funcName+"(x)="})," ",e.jsx(i,{value:this.props.value,onChange:this.change("value")})]}),e.jsxs("div",{className:"perseus-widget-row",children:["Range: ",e.jsx(s,{children:"\\Large("}),e.jsx(i,{value:this.props.rangeMin,onChange:this.change("rangeMin")}),e.jsx(s,{children:","})," ",e.jsx(i,{value:this.props.rangeMax,onChange:this.change("rangeMax")}),e.jsx(s,{children:"\\Large)"})]}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(v,{value:this.props.color,onChange:this.change("color")})}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(b,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})}),e.jsx("div",{className:"perseus-widget-row",children:e.jsxs("div",{className:"perseus-widget-left-col",children:["Width:"," ",e.jsx(se,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")})]})})]})}}a(w,"defaultProps",{value:"x",rangeMin:"-10",rangeMax:"10",color:c.BLUE,strokeDasharray:"",strokeWidth:2});w.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"FunctionEditor",props:{value:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"x"',computed:!1}},rangeMin:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-10"',computed:!1}},rangeMax:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"10"',computed:!1}},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"color.blue",computed:!0}},strokeDasharray:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},strokeWidth:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}}}};const{TextInput:te}=m,{getDependencies:ae}=f;class N extends u.Component{constructor(){super(...arguments);a(this,"change",(...s)=>g.apply(this,s));a(this,"serialize",()=>x.serialize.call(this))}render(){const{TeX:s}=ae();return e.jsxs("div",{className:"graph-settings",children:[e.jsx("div",{className:"perseus-widget-row",children:e.jsx(te,{value:this.props.label,onChange:this.change("label"),style:{width:"100%"}})}),e.jsxs("div",{className:"perseus-widget-row",children:["Location: ",e.jsx(s,{children:"\\Large("}),e.jsx(i,{value:this.props.coordX,onChange:this.change("coordX")}),e.jsx(s,{children:","})," ",e.jsx(i,{value:this.props.coordY,onChange:this.change("coordY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(v,{value:this.props.color,onChange:this.change("color")})})]})}}a(N,"defaultProps",{coordX:"0",coordY:"0",color:c.BLACK,label:"\\phi"});N.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"LabelEditor",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"black"',computed:!1}},coordX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},coordY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},label:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"\\\\phi"',computed:!1}}}};const{ButtonGroup:re}=m;class D extends u.Component{render(){return e.jsx(re,{value:this.props.value,allowEmpty:!1,buttons:[{value:"",content:e.jsx("span",{children:"—"})},{value:"->",content:e.jsx("span",{children:"→"})}],onChange:this.props.onChange})}}a(D,"defaultProps",{value:""});D.__docgenInfo={description:"",methods:[],displayName:"ArrowPicker",props:{value:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}}}};const{NumberInput:ie}=m,{getDependencies:le}=f;class C extends u.Component{constructor(){super(...arguments);a(this,"change",(...s)=>g.apply(this,s));a(this,"serialize",()=>x.serialize.call(this))}render(){const{TeX:s}=le();return e.jsxs("div",{className:"graph-settings",children:[e.jsxs("div",{className:"perseus-widget-row",children:["Start: ",e.jsx(s,{children:"\\Large("}),e.jsx(i,{value:this.props.startX,onChange:this.change("startX")}),e.jsx(s,{children:","})," ",e.jsx(i,{value:this.props.startY,onChange:this.change("startY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsxs("div",{className:"perseus-widget-row",children:["End: ",e.jsx(s,{children:"\\Large("}),e.jsx(i,{value:this.props.endX,onChange:this.change("endX")}),e.jsx(s,{children:","})," ",e.jsx(i,{value:this.props.endY,onChange:this.change("endY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(v,{value:this.props.color,onChange:this.change("color")})}),e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(b,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")}),"   ",e.jsx(D,{value:this.props.arrows,onChange:this.change("arrows")})]}),e.jsx("div",{className:"perseus-widget-row",children:e.jsxs("div",{className:"perseus-widget-left-col",children:["Width:"," ",e.jsx(ie,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")})]})})]})}}a(C,"defaultProps",{startX:"-5",startY:"5",endX:"5",endY:"5",color:c.BLACK,strokeDasharray:"",arrows:"",strokeWidth:2});C.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"LineEditor",props:{startX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-5"',computed:!1}},startY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},endX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},endY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"black"',computed:!1}},strokeDasharray:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},arrows:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},strokeWidth:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}}}};const{ButtonGroup:oe,NumberInput:pe}=m;class V extends u.Component{constructor(){super(...arguments);a(this,"change",s=>g.call(this,s))}render(){const{TeX:s}=I();return e.jsxs("div",{children:[e.jsxs("div",{className:"perseus-widget-row",children:["Constraint:"," ",e.jsx(oe,{value:this.props.constraint,allowEmpty:!1,buttons:[{value:"none",content:"None"},{value:"snap",content:"Snap"},{value:"x",content:"x="},{value:"y",content:"y="}],onChange:this.change("constraint")})]}),this.props.constraint==="snap"&&e.jsxs("div",{className:"perseus-widget-row",children:["Snap:"," ",e.jsx(pe,{value:this.props.snap,placeholder:0,onChange:this.change("snap")})]}),this.props.constraint==="x"&&e.jsx("div",{className:"graph-settings",children:e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(s,{children:"x="})," ",e.jsx(i,{value:this.props.constraintFn,onChange:this.change("constraintFn")})]})}),this.props.constraint==="y"&&e.jsx("div",{className:"graph-settings",children:e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(s,{children:"y="})," ",e.jsx(i,{value:this.props.constraintFn,onChange:this.change("constraintFn")})]})}),"Ensure these are set so nothing can be dragged off the canvas:",e.jsx("div",{className:"perseus-widget-row",children:e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(s,{children:"x \\in \\Large["})," ",e.jsx(i,{value:this.props.constraintXMin,onChange:this.change("constraintXMin")}),e.jsx(s,{children:", "})," ",e.jsx(i,{value:this.props.constraintXMax,onChange:this.change("constraintXMax")})," ",e.jsx(s,{children:"\\Large]"})]})}),e.jsx("div",{className:"perseus-widget-row",children:e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(s,{children:"y \\in \\Large["})," ",e.jsx(i,{value:this.props.constraintYMin,onChange:this.change("constraintYMin")}),e.jsx(s,{children:", "})," ",e.jsx(i,{value:this.props.constraintYMax,onChange:this.change("constraintYMax")})," ",e.jsx(s,{children:"\\Large]"})]})})]})}}a(V,"defaultProps",{constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"});V.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"propName",optional:!1,type:{name:"string"}}],returns:{type:{name:"unknown"}}}],displayName:"ConstraintEditor",props:{constraint:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"none"',computed:!1}},constraintFn:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},constraintXMax:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"10"',computed:!1}},constraintXMin:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-10"',computed:!1}},constraintYMax:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"10"',computed:!1}},constraintYMin:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-10"',computed:!1}},snap:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0.5",computed:!1}}}};const{NumberInput:R}=m,{getDependencies:de}=f;class k extends u.Component{constructor(){super(...arguments);a(this,"change",(...s)=>g.apply(this,s));a(this,"serialize",()=>x.serialize.call(this))}render(){const{TeX:s}=de();return e.jsxs("div",{className:"graph-settings",children:["Initial position:",e.jsxs("div",{className:"perseus-widget-row",children:["Start: ",e.jsx(s,{children:"\\Large("}),e.jsx(i,{value:this.props.startX,onChange:this.change("startX")}),e.jsx(s,{children:","})," ",e.jsx(i,{value:this.props.startY,onChange:this.change("startY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsxs("div",{className:"perseus-widget-row",children:["End: ",e.jsx(s,{children:"\\Large("}),e.jsx(i,{value:this.props.endX,onChange:this.change("endX")}),e.jsx(s,{children:","})," ",e.jsx(i,{value:this.props.endY,onChange:this.change("endY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsxs("div",{className:"perseus-widget-row",children:["Start updates ",e.jsx(s,{children:"(x_n, y_n)"})," for ",e.jsx(s,{children:"n ="}),e.jsx(R,{value:this.props.startSubscript,placeholder:0,onChange:this.change("startSubscript")})]}),e.jsxs("div",{className:"perseus-widget-row",children:["End updates ",e.jsx(s,{children:"(x_m, y_m)"})," for ",e.jsx(s,{children:"m ="}),e.jsx(R,{value:this.props.endSubscript,placeholder:0,onChange:this.change("endSubscript")})]}),e.jsx("div",{className:"perseus-widget-row",children:"All constraints are applied to the start point."}),e.jsx(V,{...this.props})]})}}a(k,"defaultProps",{startX:"-5",startY:"5",endX:"5",endY:"5",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"});k.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MovableLineEditor",props:{startX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-5"',computed:!1}},startY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},endX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},endY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},constraint:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"none"',computed:!1}},snap:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0.5",computed:!1}},constraintFn:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},startSubscript:{required:!0,tsType:{name:"number"},description:""},endSubscript:{required:!0,tsType:{name:"number"},description:""},constraintXMin:{defaultValue:{value:'"-10"',computed:!1},required:!1},constraintXMax:{defaultValue:{value:'"10"',computed:!1},required:!1},constraintYMin:{defaultValue:{value:'"-10"',computed:!1},required:!1},constraintYMax:{defaultValue:{value:'"10"',computed:!1},required:!1}}};const{NumberInput:ce}=m,{getDependencies:ue}=f;class _ extends u.Component{constructor(){super(...arguments);a(this,"change",(...s)=>g.apply(this,s));a(this,"serialize",()=>x.serialize.call(this))}render(){const{TeX:s}=ue();return e.jsxs("div",{className:"graph-settings",children:[e.jsxs("div",{className:"perseus-widget-row",children:["Start: ",e.jsx(s,{children:"\\Large("}),e.jsx(i,{value:this.props.startX,onChange:this.change("startX")}),e.jsx(s,{children:","})," ",e.jsx(i,{value:this.props.startY,onChange:this.change("startY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsxs("div",{className:"perseus-widget-row",children:["Update ",e.jsx(s,{children:"(x_n, y_n)"})," for ",e.jsx(s,{children:"n ="})," ",e.jsx(ce,{value:this.props.varSubscript,placeholder:0,onChange:this.change("varSubscript")})]}),e.jsx(V,{...this.props})]})}}a(_,"defaultProps",{startX:"0",startY:"0",constraint:"none",snap:.5,constraintFn:"0",constraintXMin:"-10",constraintXMax:"10",constraintYMin:"-10",constraintYMax:"10"});_.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MovablePointEditor",props:{startX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},startY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},constraint:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"none"',computed:!1}},snap:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0.5",computed:!1}},constraintFn:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},varSubscript:{required:!0,tsType:{name:"number"},description:""},constraintXMin:{defaultValue:{value:'"-10"',computed:!1},required:!1},constraintXMax:{defaultValue:{value:'"10"',computed:!1},required:!1},constraintYMin:{defaultValue:{value:'"-10"',computed:!1},required:!1},constraintYMax:{defaultValue:{value:'"10"',computed:!1},required:!1}}};const{NumberInput:he}=m,{getDependencies:me}=f;class T extends u.Component{constructor(){super(...arguments);a(this,"change",(...s)=>g.apply(this,s));a(this,"serialize",()=>x.serialize.call(this))}render(){const{TeX:s}=me();return e.jsxs("div",{className:"graph-settings",children:[e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(s,{children:"X(t) ="})," ",e.jsx(i,{value:this.props.x,onChange:this.change("x")})]}),e.jsxs("div",{className:"perseus-widget-row",children:[e.jsx(s,{children:"Y(t) ="})," ",e.jsx(i,{value:this.props.y,onChange:this.change("y")})]}),e.jsxs("div",{className:"perseus-widget-row",children:["Range: ",e.jsx(s,{children:"\\Large("}),e.jsx(i,{value:this.props.rangeMin,onChange:this.change("rangeMin")}),e.jsx(s,{children:","})," ",e.jsx(i,{value:this.props.rangeMax,onChange:this.change("rangeMax")}),e.jsx(s,{children:"\\Large)"})]}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(v,{value:this.props.color,onChange:this.change("color")})}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(b,{value:this.props.strokeDasharray,onChange:this.change("strokeDasharray")})}),e.jsx("div",{className:"perseus-widget-row",children:e.jsxs("div",{className:"perseus-widget-left-col",children:["Width:"," ",e.jsx(he,{value:this.props.strokeWidth,placeholder:2,onChange:this.change("strokeWidth")})]})})]})}}a(T,"defaultProps",{x:"cos(t)",y:"sin(t)",rangeMin:"0",rangeMax:"2\\pi",color:c.BLUE,strokeDasharray:"",strokeWidth:2});T.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ParametricEditor",props:{x:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"cos(t)"',computed:!1}},y:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"sin(t)"',computed:!1}},rangeMin:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},rangeMax:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"2\\\\pi"',computed:!1}},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"color.blue",computed:!0}},strokeDasharray:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},strokeWidth:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}}}};const{getDependencies:ge}=f;class q extends u.Component{constructor(){super(...arguments);a(this,"change",(...s)=>g.apply(this,s));a(this,"serialize",()=>x.serialize.call(this))}render(){const{TeX:s}=ge();return e.jsxs("div",{className:"graph-settings",children:[e.jsxs("div",{className:"perseus-widget-row",children:["Coordinate: ",e.jsx(s,{children:"\\Large("}),e.jsx(i,{value:this.props.coordX,onChange:this.change("coordX")}),e.jsx(s,{children:","})," ",e.jsx(i,{value:this.props.coordY,onChange:this.change("coordY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(v,{value:this.props.color,onChange:this.change("color")})})]})}}a(q,"defaultProps",{coordX:"0",coordY:"0",color:c.BLACK});q.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PointEditor",props:{coordX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},coordY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"0"',computed:!1}},color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"black"',computed:!1}}}};const{getDependencies:fe}=f;class E extends u.Component{constructor(){super(...arguments);a(this,"change",(...s)=>g.apply(this,s));a(this,"serialize",()=>x.serialize.call(this))}render(){const{TeX:s}=fe();return e.jsxs("div",{className:"graph-settings",children:[e.jsxs("div",{className:"perseus-widget-row",children:["Bottom left: ",e.jsx(s,{children:"\\Large("}),e.jsx(i,{value:this.props.coordX,onChange:this.change("coordX")}),e.jsx(s,{children:","})," ",e.jsx(i,{value:this.props.coordY,onChange:this.change("coordY")}),e.jsx(s,{children:"\\Large)"})]}),e.jsxs("div",{className:"perseus-widget-row",children:["Width:"," ",e.jsx(i,{value:this.props.width,onChange:this.change("width")})]}),e.jsxs("div",{className:"perseus-widget-row",children:["Height:"," ",e.jsx(i,{value:this.props.height,onChange:this.change("height")})]}),e.jsx("div",{className:"perseus-widget-row",children:e.jsx(v,{value:this.props.color,lightColors:!0,onChange:this.change("color")})}),e.jsx("div",{className:"perseus-widget-row",children:"You want a border? Sorry, draw your own."})]})}}a(E,"defaultProps",{coordX:"-5",coordY:"5",width:"2",height:"3",color:c.LIGHT_BLUE});E.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"RectangleEditor",props:{color:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"#9AB8ED"',computed:!1}},coordX:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"-5"',computed:!1}},coordY:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"5"',computed:!1}},height:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"3"',computed:!1}},width:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"2"',computed:!1}}}};const{getDependencies:xe}=f,{unescapeMathMode:ve}=A;class S extends u.Component{constructor(){super(...arguments);a(this,"state",{usedVarSubscripts:this._getAllVarSubscripts(this.props.elements),usedFunctionNames:this._getAllFunctionNames(this.props.elements)});a(this,"_updateGraphProps",s=>{this.change({graph:r.extend(r.omit(s,"step"),{tickStep:s.step})})});a(this,"_addNewElement",s=>{const n=s.target.value;if(n==="")return;s.target.value="";const t={type:n,key:n+"-"+(Math.random()*16777215<<0).toString(16),options:n==="point"?r.clone(q.defaultProps):n==="line"?r.clone(C.defaultProps):n==="movable-point"?r.clone(_.defaultProps):n==="movable-line"?r.clone(k.defaultProps):n==="function"?r.clone(w.defaultProps):n==="parametric"?r.clone(T.defaultProps):n==="label"?r.clone(N.defaultProps):n==="rectangle"?r.clone(E.defaultProps):{}};let p;if(n==="movable-point")p=r.max([r.max(this.state.usedVarSubscripts),-1])+1,t.options.varSubscript=p;else if(n==="movable-line")p=r.max([r.max(this.state.usedVarSubscripts),-1])+1,t.options.startSubscript=p,t.options.endSubscript=p+1;else if(n==="function"){const l=String.fromCharCode(r.max([r.max(r.map(this.state.usedFunctionNames,function(y){return y.charCodeAt(0)})),101])+1);t.options.funcName=l}this.change({elements:this.props.elements.concat(t)})});a(this,"_deleteElement",s=>{const n=this.props.elements[s];this.change({elements:r.without(this.props.elements,n)})});a(this,"_moveElementUp",s=>{const n=this.props.elements[s],t=r.without(this.props.elements,n);t.splice(s-1,0,n),this.change({elements:t})});a(this,"_moveElementDown",s=>{const n=this.props.elements[s],t=r.without(this.props.elements,n);t.splice(s+1,0,n),this.change({elements:t})});a(this,"change",(...s)=>g.apply(this,s));a(this,"serialize",()=>x.serialize.call(this))}UNSAFE_componentWillReceiveProps(s){this.setState({usedVarSubscripts:this._getAllVarSubscripts(s.elements),usedFunctionNames:this._getAllFunctionNames(s.elements)})}_getAllVarSubscripts(s){return r.map(r.where(s,{type:"movable-point"}),n=>n.options.varSubscript).concat(r.map(r.where(s,{type:"movable-line"}),n=>n.options.startSubscript)).concat(r.map(r.where(s,{type:"movable-line"}),n=>n.options.endSubscript))}_getAllFunctionNames(s){return r.map(r.where(s,{type:"function"}),n=>n.options.funcName)}render(){const{TeX:s}=xe();return e.jsxs("div",{className:"perseus-widget-interaction-editor",children:[e.jsxs(h,{title:"Grid settings",children:[e.jsx(z,{editableSettings:["canvas","graph"],box:this.props.graph.box,labels:this.props.graph.labels,range:this.props.graph.range,step:this.props.graph.tickStep,gridStep:this.props.graph.gridStep,markings:this.props.graph.markings,onChange:this._updateGraphProps}),e.jsx(e.Fragment,{children:this.props.graph.valid!==!0&&e.jsx("div",{children:this.props.graph.valid})})]}),r.map(this.props.elements,function(n,t){if(n.type==="movable-point")return e.jsx(h,{title:e.jsxs("span",{children:["Movable point"," ",e.jsx(s,{children:"(x_{"+n.options.varSubscript+"}, y_{"+n.options.varSubscript+"})"})]}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),children:e.jsx(_,{...n.options,onChange:p=>{const l=JSON.parse(JSON.stringify(this.props.elements));r.extend(l[t].options,p),this.change({elements:l})}})},n.key);if(n.type==="movable-line")return e.jsx(h,{title:e.jsxs("span",{children:["Movable line"," ",e.jsx(s,{children:"(x_{"+n.options.startSubscript+"}, y_{"+n.options.startSubscript+"})"})," ","to"," ",e.jsx(s,{children:"(x_{"+n.options.endSubscript+"}, y_{"+n.options.endSubscript+"})"})]}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),children:e.jsx(k,{...n.options,onChange:p=>{const l=JSON.parse(JSON.stringify(this.props.elements));r.extend(l[t].options,p),this.change({elements:l})}})},n.key);if(n.type==="point")return e.jsx(h,{title:e.jsxs("span",{children:["Point"," ",e.jsx(s,{children:"("+n.options.coordX+", "+n.options.coordY+")"})]}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),children:e.jsx(q,{...n.options,onChange:p=>{const l=JSON.parse(JSON.stringify(this.props.elements));r.extend(l[t].options,p),this.change({elements:l})}})},n.key);if(n.type==="line")return e.jsx(h,{title:e.jsxs("span",{children:["Line"," ",e.jsx(s,{children:"("+n.options.startX+", "+n.options.startY+")"})," ","to"," ",e.jsx(s,{children:"("+n.options.endX+", "+n.options.endY+")"})]}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement.bind(this,t),children:e.jsx(C,{...n.options,onChange:p=>{const l=JSON.parse(JSON.stringify(this.props.elements));r.extend(l[t].options,p),this.change({elements:l})}})},n.key);if(n.type==="function")return e.jsx(h,{title:e.jsxs("span",{children:["Function"," ",e.jsx(s,{children:n.options.funcName+"(x) = "+n.options.value})]}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,children:e.jsx(w,{...n.options,onChange:p=>{const l=JSON.parse(JSON.stringify(this.props.elements));r.extend(l[t].options,p),this.change({elements:l})}})},n.key);if(n.type==="parametric")return e.jsx(h,{title:e.jsx("span",{children:"Parametric"}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,children:e.jsx(T,{...n.options,onChange:p=>{const l=JSON.parse(JSON.stringify(this.props.elements));r.extend(l[t].options,p),this.change({elements:l})}})},n.key);if(n.type==="label")return e.jsx(h,{title:e.jsxs("span",{children:["Label"," ",e.jsx(s,{children:ve(n.options.label)})," "]}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,children:e.jsx(N,{...n.options,onChange:p=>{const l=JSON.parse(JSON.stringify(this.props.elements));r.extend(l[t].options,p),this.change({elements:l})}})},n.key);if(n.type==="rectangle")return e.jsx(h,{title:e.jsxs("span",{children:["Rectangle"," ",e.jsx(s,{children:"("+n.options.coordX+", "+n.options.coordY+")"})," — ",e.jsx(s,{children:n.options.width+" \\times "+n.options.height})]}),onUp:t===0?null:this._moveElementUp.bind(this,t),onDown:t===this.props.elements.length-1?null:this._moveElementDown.bind(this,t),onDelete:this._deleteElement,children:e.jsx(E,{...n.options,onChange:p=>{const l=JSON.parse(JSON.stringify(this.props.elements));r.extend(l[t].options,p),this.change({elements:l})}})},n.key)},this),e.jsx("div",{className:"perseus-widget-interaction-editor-select-element",children:e.jsxs("select",{onChange:this._addNewElement,children:[e.jsxs("option",{value:"",children:["Add an element","…"]}),e.jsx("option",{disabled:!0,children:"--"}),e.jsx("option",{value:"point",children:"Point"}),e.jsx("option",{value:"line",children:"Line segment"}),e.jsx("option",{value:"function",children:"Function plot"}),e.jsx("option",{value:"parametric",children:"Parametric plot"}),e.jsx("option",{value:"label",children:"Label"}),e.jsx("option",{value:"rectangle",children:"Rectangle"}),e.jsx("option",{value:"movable-point",children:"★ Movable point"}),e.jsx("option",{value:"movable-line",children:"★ Movable line segment"})]})})]})}}a(S,"widgetName","interaction"),a(S,"defaultProps",P.defaultWidgetOptions);S.__docgenInfo={description:"",methods:[{name:"_getAllVarSubscripts",docblock:null,modifiers:[],params:[{name:"elements",optional:!1,type:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>",alias:"ReadonlyArray"}}],returns:{type:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>"}}},{name:"_getAllFunctionNames",docblock:null,modifiers:[],params:[{name:"elements",optional:!1,type:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>",alias:"ReadonlyArray"}}],returns:{type:{name:"ReadonlyArray",elements:[{name:"string"}],raw:"ReadonlyArray<string>"}}},{name:"_updateGraphProps",docblock:null,modifiers:[],params:[{name:"newProps",optional:!1,type:null}],returns:null},{name:"_addNewElement",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"_deleteElement",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"_moveElementUp",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"_moveElementDown",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null}],returns:null},{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"InteractionEditor",props:{elements:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"any"}],raw:"ReadonlyArray<any>"},description:"",defaultValue:{value:"[]",computed:!1}},graph:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    box: ReadonlyArray<number>;
    labels: ReadonlyArray<string>;
    range: Coords;
    tickStep: [number, number];
    gridStep: [number, number];
    markings: MarkingsType;
    valid?: boolean;
}`,signature:{properties:[{key:"box",value:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>",required:!0}},{key:"labels",value:{name:"ReadonlyArray",elements:[{name:"string"}],raw:"ReadonlyArray<string>",required:!0}},{key:"range",value:{name:"tuple",raw:"[Coord, Coord]",elements:[{name:"tuple",raw:"[x: number, y: number]",elements:[{name:"unknown"},{name:"unknown"}]},{name:"tuple",raw:"[x: number, y: number]",elements:[{name:"unknown"},{name:"unknown"}]}],required:!0}},{key:"tickStep",value:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}],required:!0}},{key:"gridStep",value:{name:"tuple",raw:"[number, number]",elements:[{name:"number"},{name:"number"}],required:!0}},{key:"markings",value:{name:"union",raw:'"axes" | "graph" | "grid" | "none"',elements:[{name:"literal",value:'"axes"'},{name:"literal",value:'"graph"'},{name:"literal",value:'"grid"'},{name:"literal",value:'"none"'}],required:!0}},{key:"valid",value:{name:"boolean",required:!1}}]}},description:"",defaultValue:{value:`{
    box: [400, 400],
    labels: ["x", "y"],
    range: [
        [-10, 10],
        [-10, 10],
    ],
    tickStep: [1, 1],
    gridStep: [1, 1],
    markings: "graph",
}`,computed:!1}}}};export{S as I};
