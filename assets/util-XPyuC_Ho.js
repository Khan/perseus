import{_ as F}from"./index-default-4_ZsnO94.js";import{P as U,E as z}from"./perseus-error-OpXxk17X.js";import{p as K,c as fn}from"./compare-59FC1ybr.js";import{$ as N}from"./jquery-5v7aFUvu.js";import{a as Sn}from"./version-akiLXZts.js";import{c as Dn,g as xn}from"./_commonjsHelpers-4gQjN7DL.js";const $n="@khanacademy/kmath",Cn="__lib_version__";Sn($n,Cn);var Q={exports:{}};(function(e,r){(function(){var a=this,c=a._,f={},d=Array.prototype,l=Object.prototype,p=Function.prototype,m=d.push,v=d.slice,y=d.concat,M=l.toString,I=l.hasOwnProperty,T=d.forEach,S=d.map,C=d.reduce,L=d.reduceRight,nn=d.filter,en=d.every,tn=d.some,q=d.indexOf,rn=d.lastIndexOf,_n=Array.isArray,Rn=Object.keys,V=p.bind,i=function(n){if(n instanceof i)return n;if(!(this instanceof i))return new i(n);this._wrapped=n};e.exports&&(r=e.exports=i),r._=i,i.VERSION="1.4.4";var _=i.each=i.forEach=function(n,t,u){if(n!=null){if(T&&n.forEach===T)n.forEach(t,u);else if(n.length===+n.length){for(var s=0,o=n.length;s<o;s++)if(t.call(u,n[s],s,n)===f)return}else for(var g in n)if(i.has(n,g)&&t.call(u,n[g],g,n)===f)return}};i.map=i.collect=function(n,t,u){var s=[];return n==null?s:S&&n.map===S?n.map(t,u):(_(n,function(o,g,h){s[s.length]=t.call(u,o,g,h)}),s)};var un="Reduce of empty array with no initial value";i.reduce=i.foldl=i.inject=function(n,t,u,s){var o=arguments.length>2;if(n==null&&(n=[]),C&&n.reduce===C)return s&&(t=i.bind(t,s)),o?n.reduce(t,u):n.reduce(t);if(_(n,function(g,h,w){o?u=t.call(s,u,g,h,w):(u=g,o=!0)}),!o)throw new TypeError(un);return u},i.reduceRight=i.foldr=function(n,t,u,s){var o=arguments.length>2;if(n==null&&(n=[]),L&&n.reduceRight===L)return s&&(t=i.bind(t,s)),o?n.reduceRight(t,u):n.reduceRight(t);var g=n.length;if(g!==+g){var h=i.keys(n);g=h.length}if(_(n,function(w,E,O){E=h?h[--g]:--g,o?u=t.call(s,u,n[E],E,O):(u=n[E],o=!0)}),!o)throw new TypeError(un);return u},i.find=i.detect=function(n,t,u){var s;return an(n,function(o,g,h){if(t.call(u,o,g,h))return s=o,!0}),s},i.filter=i.select=function(n,t,u){var s=[];return n==null?s:nn&&n.filter===nn?n.filter(t,u):(_(n,function(o,g,h){t.call(u,o,g,h)&&(s[s.length]=o)}),s)},i.reject=function(n,t,u){return i.filter(n,function(s,o,g){return!t.call(u,s,o,g)},u)},i.every=i.all=function(n,t,u){t||(t=i.identity);var s=!0;return n==null?s:en&&n.every===en?n.every(t,u):(_(n,function(o,g,h){if(!(s=s&&t.call(u,o,g,h)))return f}),!!s)};var an=i.some=i.any=function(n,t,u){t||(t=i.identity);var s=!1;return n==null?s:tn&&n.some===tn?n.some(t,u):(_(n,function(o,g,h){if(s||(s=t.call(u,o,g,h)))return f}),!!s)};i.contains=i.include=function(n,t){return n==null?!1:q&&n.indexOf===q?n.indexOf(t)!=-1:an(n,function(u){return u===t})},i.invoke=function(n,t){var u=v.call(arguments,2),s=i.isFunction(t);return i.map(n,function(o){return(s?t:o[t]).apply(o,u)})},i.pluck=function(n,t){return i.map(n,function(u){return u[t]})},i.where=function(n,t,u){return i.isEmpty(t)?u?null:[]:i[u?"find":"filter"](n,function(s){for(var o in t)if(t[o]!==s[o])return!1;return!0})},i.findWhere=function(n,t){return i.where(n,t,!0)},i.max=function(n,t,u){if(!t&&i.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);if(!t&&i.isEmpty(n))return-1/0;var s={computed:-1/0,value:-1/0};return _(n,function(o,g,h){var w=t?t.call(u,o,g,h):o;w>=s.computed&&(s={value:o,computed:w})}),s.value},i.min=function(n,t,u){if(!t&&i.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);if(!t&&i.isEmpty(n))return 1/0;var s={computed:1/0,value:1/0};return _(n,function(o,g,h){var w=t?t.call(u,o,g,h):o;w<s.computed&&(s={value:o,computed:w})}),s.value},i.shuffle=function(n){var t,u=0,s=[];return _(n,function(o){t=i.random(u++),s[u-1]=s[t],s[t]=o}),s};var W=function(n){return i.isFunction(n)?n:function(t){return t[n]}};i.sortBy=function(n,t,u){var s=W(t);return i.pluck(i.map(n,function(o,g,h){return{value:o,index:g,criteria:s.call(u,o,g,h)}}).sort(function(o,g){var h=o.criteria,w=g.criteria;if(h!==w){if(h>w||h===void 0)return 1;if(h<w||w===void 0)return-1}return o.index<g.index?-1:1}),"value")};var sn=function(n,t,u,s){var o={},g=W(t||i.identity);return _(n,function(h,w){var E=g.call(u,h,w,n);s(o,E,h)}),o};i.groupBy=function(n,t,u){return sn(n,t,u,function(s,o,g){(i.has(s,o)?s[o]:s[o]=[]).push(g)})},i.countBy=function(n,t,u){return sn(n,t,u,function(s,o){i.has(s,o)||(s[o]=0),s[o]++})},i.sortedIndex=function(n,t,u,s){u=u==null?i.identity:W(u);for(var o=u.call(s,t),g=0,h=n.length;g<h;){var w=g+h>>>1;u.call(s,n[w])<o?g=w+1:h=w}return g},i.toArray=function(n){return n?i.isArray(n)?v.call(n):n.length===+n.length?i.map(n,i.identity):i.values(n):[]},i.size=function(n){return n==null?0:n.length===+n.length?n.length:i.keys(n).length},i.first=i.head=i.take=function(n,t,u){if(n!=null)return t!=null&&!u?v.call(n,0,t):n[0]},i.initial=function(n,t,u){return v.call(n,0,n.length-(t==null||u?1:t))},i.last=function(n,t,u){if(n!=null)return t!=null&&!u?v.call(n,Math.max(n.length-t,0)):n[n.length-1]},i.rest=i.tail=i.drop=function(n,t,u){return v.call(n,t==null||u?1:t)},i.compact=function(n){return i.filter(n,i.identity)};var cn=function(n,t,u){return _(n,function(s){i.isArray(s)?t?m.apply(u,s):cn(s,t,u):u.push(s)}),u};i.flatten=function(n,t){return cn(n,t,[])},i.without=function(n){return i.difference(n,v.call(arguments,1))},i.uniq=i.unique=function(n,t,u,s){i.isFunction(t)&&(s=u,u=t,t=!1);var o=u?i.map(n,u,s):n,g=[],h=[];return _(o,function(w,E){(t?!E||h[h.length-1]!==w:!i.contains(h,w))&&(h.push(w),g.push(n[E]))}),g},i.union=function(){return i.uniq(y.apply(d,arguments))},i.intersection=function(n){var t=v.call(arguments,1);return i.filter(i.uniq(n),function(u){return i.every(t,function(s){return i.indexOf(s,u)>=0})})},i.difference=function(n){var t=y.apply(d,v.call(arguments,1));return i.filter(n,function(u){return!i.contains(t,u)})},i.zip=function(){for(var n=v.call(arguments),t=i.max(i.pluck(n,"length")),u=new Array(t),s=0;s<t;s++)u[s]=i.pluck(n,""+s);return u},i.object=function(n,t){if(n==null)return{};for(var u={},s=0,o=n.length;s<o;s++)t?u[n[s]]=t[s]:u[n[s][0]]=n[s][1];return u},i.indexOf=function(n,t,u){if(n==null)return-1;var s=0,o=n.length;if(u)if(typeof u=="number")s=u<0?Math.max(0,o+u):u;else return s=i.sortedIndex(n,t),n[s]===t?s:-1;if(q&&n.indexOf===q)return n.indexOf(t,u);for(;s<o;s++)if(n[s]===t)return s;return-1},i.lastIndexOf=function(n,t,u){if(n==null)return-1;var s=u!=null;if(rn&&n.lastIndexOf===rn)return s?n.lastIndexOf(t,u):n.lastIndexOf(t);for(var o=s?u:n.length;o--;)if(n[o]===t)return o;return-1},i.range=function(n,t,u){arguments.length<=1&&(t=n||0,n=0),u=arguments[2]||1;for(var s=Math.max(Math.ceil((t-n)/u),0),o=0,g=new Array(s);o<s;)g[o++]=n,n+=u;return g},i.bind=function(n,t){if(n.bind===V&&V)return V.apply(n,v.call(arguments,1));var u=v.call(arguments,2);return function(){return n.apply(t,u.concat(v.call(arguments)))}},i.partial=function(n){var t=v.call(arguments,1);return function(){return n.apply(this,t.concat(v.call(arguments)))}},i.bindAll=function(n){var t=v.call(arguments,1);return t.length===0&&(t=i.functions(n)),_(t,function(u){n[u]=i.bind(n[u],n)}),n},i.memoize=function(n,t){var u={};return t||(t=i.identity),function(){var s=t.apply(this,arguments);return i.has(u,s)?u[s]:u[s]=n.apply(this,arguments)}},i.delay=function(n,t){var u=v.call(arguments,2);return setTimeout(function(){return n.apply(null,u)},t)},i.defer=function(n){return i.delay.apply(i,[n,1].concat(v.call(arguments,1)))},i.throttle=function(n,t){var u,s,o,g,h=0,w=function(){h=new Date,o=null,g=n.apply(u,s)};return function(){var E=new Date,O=t-(E-h);return u=this,s=arguments,O<=0?(clearTimeout(o),o=null,h=E,g=n.apply(u,s)):o||(o=setTimeout(w,O)),g}},i.debounce=function(n,t,u){var s,o;return function(){var g=this,h=arguments,w=function(){s=null,u||(o=n.apply(g,h))},E=u&&!s;return clearTimeout(s),s=setTimeout(w,t),E&&(o=n.apply(g,h)),o}},i.once=function(n){var t=!1,u;return function(){return t||(t=!0,u=n.apply(this,arguments),n=null),u}},i.wrap=function(n,t){return function(){var u=[n];return m.apply(u,arguments),t.apply(this,u)}},i.compose=function(){var n=arguments;return function(){for(var t=arguments,u=n.length-1;u>=0;u--)t=[n[u].apply(this,t)];return t[0]}},i.after=function(n,t){return n<=0?t():function(){if(--n<1)return t.apply(this,arguments)}},i.keys=Rn||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var u in n)i.has(n,u)&&(t[t.length]=u);return t},i.values=function(n){var t=[];for(var u in n)i.has(n,u)&&t.push(n[u]);return t},i.pairs=function(n){var t=[];for(var u in n)i.has(n,u)&&t.push([u,n[u]]);return t},i.invert=function(n){var t={};for(var u in n)i.has(n,u)&&(t[n[u]]=u);return t},i.functions=i.methods=function(n){var t=[];for(var u in n)i.isFunction(n[u])&&t.push(u);return t.sort()},i.extend=function(n){return _(v.call(arguments,1),function(t){if(t)for(var u in t)n[u]=t[u]}),n},i.pick=function(n){var t={},u=y.apply(d,v.call(arguments,1));return _(u,function(s){s in n&&(t[s]=n[s])}),t},i.omit=function(n){var t={},u=y.apply(d,v.call(arguments,1));for(var s in n)i.contains(u,s)||(t[s]=n[s]);return t},i.defaults=function(n){return _(v.call(arguments,1),function(t){if(t)for(var u in t)n[u]==null&&(n[u]=t[u])}),n},i.clone=function(n){return i.isObject(n)?i.isArray(n)?n.slice():i.extend({},n):n},i.tap=function(n,t){return t(n),n};var X=function(n,t,u,s){if(n===t)return n!==0||1/n==1/t;if(n==null||t==null)return n===t;n instanceof i&&(n=n._wrapped),t instanceof i&&(t=t._wrapped);var o=M.call(n);if(o!=M.call(t))return!1;switch(o){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:n==0?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if(typeof n!="object"||typeof t!="object")return!1;for(var g=u.length;g--;)if(u[g]==n)return s[g]==t;u.push(n),s.push(t);var h=0,w=!0;if(o=="[object Array]"){if(h=n.length,w=h==t.length,w)for(;h--&&(w=X(n[h],t[h],u,s)););}else{var E=n.constructor,O=t.constructor;if(E!==O&&!(i.isFunction(E)&&E instanceof E&&i.isFunction(O)&&O instanceof O))return!1;for(var P in n)if(i.has(n,P)&&(h++,!(w=i.has(t,P)&&X(n[P],t[P],u,s))))break;if(w){for(P in t)if(i.has(t,P)&&!h--)break;w=!h}}return u.pop(),s.pop(),w};i.isEqual=function(n,t){return X(n,t,[],[])},i.isEmpty=function(n){if(n==null)return!0;if(i.isArray(n)||i.isString(n))return n.length===0;for(var t in n)if(i.has(n,t))return!1;return!0},i.isElement=function(n){return!!(n&&n.nodeType===1)},i.isArray=_n||function(n){return M.call(n)=="[object Array]"},i.isObject=function(n){return n===Object(n)},_(["Arguments","Function","String","Number","Date","RegExp"],function(n){i["is"+n]=function(t){return M.call(t)=="[object "+n+"]"}}),i.isArguments(arguments)||(i.isArguments=function(n){return!!(n&&i.has(n,"callee"))}),typeof/./!="function"&&(i.isFunction=function(n){return typeof n=="function"}),i.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},i.isNaN=function(n){return i.isNumber(n)&&n!=+n},i.isBoolean=function(n){return n===!0||n===!1||M.call(n)=="[object Boolean]"},i.isNull=function(n){return n===null},i.isUndefined=function(n){return n===void 0},i.has=function(n,t){return I.call(n,t)},i.noConflict=function(){return a._=c,this},i.identity=function(n){return n},i.times=function(n,t,u){for(var s=Array(n),o=0;o<n;o++)s[o]=t.call(u,o);return s},i.random=function(n,t){return t==null&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var x={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};x.unescape=i.invert(x.escape);var Tn={escape:new RegExp("["+i.keys(x.escape).join("")+"]","g"),unescape:new RegExp("("+i.keys(x.unescape).join("|")+")","g")};i.each(["escape","unescape"],function(n){i[n]=function(t){return t==null?"":(""+t).replace(Tn[n],function(u){return x[n][u]})}}),i.result=function(n,t){if(n==null)return null;var u=n[t];return i.isFunction(u)?u.call(n):u},i.mixin=function(n){_(i.functions(n),function(t){var u=i[t]=n[t];i.prototype[t]=function(){var s=[this._wrapped];return m.apply(s,arguments),J.call(this,u.apply(i,s))}})};var Nn=0;i.uniqueId=function(n){var t=++Nn+"";return n?n+t:t},i.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,On={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},Pn=/\\|'|\r|\n|\t|\u2028|\u2029/g;i.template=function(n,t,u){var s;u=i.defaults({},u,i.templateSettings);var o=new RegExp([(u.escape||H).source,(u.interpolate||H).source,(u.evaluate||H).source].join("|")+"|$","g"),g=0,h="__p+='";n.replace(o,function(E,O,P,ln,on){return h+=n.slice(g,on).replace(Pn,function(An){return"\\"+On[An]}),O&&(h+=`'+
((__t=(`+O+`))==null?'':_.escape(__t))+
'`),P&&(h+=`'+
((__t=(`+P+`))==null?'':__t)+
'`),ln&&(h+=`';
`+ln+`
__p+='`),g=on+E.length,E}),h+=`';
`,u.variable||(h=`with(obj||{}){
`+h+`}
`),h=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+h+`return __p;
`;try{s=new Function(u.variable||"obj","_",h)}catch(E){throw E.source=h,E}if(t)return s(t,i);var w=function(E){return s.call(this,E,i)};return w.source="function("+(u.variable||"obj")+`){
`+h+"}",w},i.chain=function(n){return i(n).chain()};var J=function(n){return this._chain?i(n).chain():n};i.mixin(i),_(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=d[n];i.prototype[n]=function(){var u=this._wrapped;return t.apply(u,arguments),(n=="shift"||n=="splice")&&u.length===0&&delete u[0],J.call(this,u)}}),_(["concat","join","slice"],function(n){var t=d[n];i.prototype[n]=function(){return J.call(this,t.apply(this._wrapped,arguments))}}),i.extend(i.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(Dn)})(Q,Q.exports);var Ln=Q.exports;const pn=xn(Ln),qn=1e-9,Gn=Math.pow(2,-42);function Pe(e){return pn.isNumber(e)&&!pn.isNaN(e)}function $(e,r,a){return e==null||r==null?e===r:e===r?!0:(a==null&&(a=qn),Math.abs(e-r)<a)}function Ae(e,r){return $(e,0,r)?0:Math.abs(e)/e}function Un(e,r){return $(Math.round(e),e,r)}function Se(e,r){const a=Math.pow(10,r);return Math.round(e*a)/a}function De(e,r){return Math.round(e/r)*r}function xe(e,r){return Math.floor(e/r)*r}function $e(e,r){return Math.ceil(e/r)*r}function dn(e,r=Gn,a=1e3){let c=[1,0],f=[0,1],d=Math.floor(e),l=e-d;for(;f[0]<=a;){if($(c[0]/f[0],e,r))return[c[0],f[0]];c=[d*c[0]+c[1],c[0]],f=[d*f[0]+f[1],f[0]],d=Math.floor(1/l),l=1/l-d}return[e,1]}const R={cleanMath:function(e){return typeof e=="string"?e.replace(/\+\s*-/g,"- ").replace(/-\s*-/g,"+ ").replace(/\^1/g,""):e},bound:function(e){return e===0?e:e<0?-R.bound(-e):Math.max(1e-6,Math.min(e,1e20))},factorial:function(e){return e<=1?e:e*R.factorial(e-1)},getGCD:function(e,r){if(arguments.length>2){const c=[].slice.call(arguments,1);return R.getGCD(e,R.getGCD(...c))}let a;for(e=Math.abs(e),r=Math.abs(r);r;)a=e%r,e=r,r=a;return e},getLCM:function(e,r){if(arguments.length>2){const a=[].slice.call(arguments,1);return R.getLCM(e,R.getLCM(...a))}return Math.abs(e*r)/R.getGCD(e,r)},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],isPrime:function(e){if(e<=1)return!1;if(e<101)return!!N.grep(R.primes,function(r,a){return Math.abs(r-e)<=.5}).length;if(e<=1||e>2&&e%2===0)return!1;for(let r=3,a=Math.sqrt(e);r<=a;r+=2)if(e%r===0)return!1;return!0},getPrimeFactorization:function(e){if(e===1)return[];if(R.isPrime(e))return[e];const r=Math.sqrt(e);for(let a=2;a<=r;a++)if(e%a===0)return N.merge(R.getPrimeFactorization(a),R.getPrimeFactorization(e/a))},roundToNearest:function(e,r){return Math.round(r/e)*e},roundTo:function(e,r){const a=Math.pow(10,e).toFixed(5);return Math.round((r*a).toFixed(5))/a},toFixedApprox:function(e,r){const a=e.toFixed(r);return $(+a,e)?a:"\\approx "+a},roundToApprox:function(e,r){const a=R.roundTo(r,e);return $(a,e)?String(a):R.toFixedApprox(e,r)},toFraction:function(e,r){if(r==null&&(r=Math.pow(2,-46)),e<0||e>1){let m=e%1;m+=m<0?1:0;const v=R.toFraction(m,r);return v[0]+=Math.round(e-m)*v[1],v}if(Math.abs(Math.round(Number(e))-e)<=r)return[Math.round(e),1];let a=0,c=1,f=1,d=1,l=1,p=2;for(;;){if(Math.abs(Number(l/p)-e)<=r)return[l,p];l/p<e?(a=l,c=p):(f=l,d=p),l=a+f,p=c+d}},getNumericFormat:function(e){if(e=N.trim(e),e=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1"),e.match(/^[+-]?\d+$/))return"integer";if(e.match(/^[+-]?\d+\s+\d+\s*\/\s*\d+$/))return"mixed";const r=e.match(/^[+-]?(\d+)\s*\/\s*(\d+)$/);return r?parseFloat(r[1])>parseFloat(r[2])?"improper":"proper":e.replace(/[,. ]/g,"").match(/^\d+$/)?"decimal":e.match(/(pi?|\u03c0|t(?:au)?|\u03c4|pau)/)?"pi":null},toNumericString:function(e,r){if(e==null)return"";if(e===0)return"0";if(r==="percent")return e*100+"%";if(r==="pi"){const a=dn(e/Math.PI),c=Math.abs(a[0]),f=a[1];if(Un(c))return(e<0?"-":"")+(c===1?"":c)+"π"+(f===1?"":"/"+f)}if(F(["proper","improper","mixed","fraction"]).contains(r)){const a=dn(e),c=Math.abs(a[0]),f=a[1],d=e<0?"-":"";if(f===1)return d+c;if(r==="mixed"){const l=c%f,p=(c-l)/f;return d+(p?p+" ":"")+l+"/"+f}return d+c+"/"+f}return String(e)}};function Ce(e){return e.reduce(zn,0)}function zn(e,r){return e+r}const Vn=Math.pow(2,-42),D={predicate:{defaultForms:"integer, proper, improper, mixed, decimal",createValidatorFunctional:function(e,r,a){r=F.extend({simplify:"required",ratio:!1,forms:D.predicate.defaultForms},r);let c;F.isArray(r.forms)?c=r.forms:c=r.forms.split(/\s*,\s*/),r.inexact===void 0&&(r.maxError=0),r.maxError=+r.maxError+Vn,F.contains(c,"percent")&&(c=F.without(c,"percent"),c.push("percent"));const f=function(l){l=l.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").replace(/(^\s*)|(\s*$)/gi,"");const p=l.match(/^([+-]?\d+)\s*\/\s*([+-]?\d+)$/),m=l.match(/^([+-]?)\\frac\{([+-]?\d+)\}\{([+-]?\d+)\}$/),v=parseInt(l,10);if(p||m){let y,M,I=!0;return p?(y=parseFloat(p[1]),M=parseFloat(p[2])):(y=parseFloat(m[2]),m[1]==="-"&&(y<0&&(I=!1),y=-y),M=parseFloat(m[3])),I=I&&M>0&&(r.ratio||M!==1)&&R.getGCD(y,M)===1,[{value:y/M,exact:I}]}return!isNaN(v)&&""+v===l?[{value:v,exact:!0}]:[]},d={integer:function(l){const p=d.decimal(l),m=d.decimal(l,1);return p[0].value!=null&&p[0].value===m[0].value||p[1].value!=null&&p[1].value===m[1].value?p:[]},proper:function(l){return N.map(f(l),function(p){return Math.abs(p.value)<1?[p]:[]})},improper:function(l){return N.map(f(l),function(p){return Math.abs(p.value)>=1?[p]:[]})},pi:function(l){let p,m=[];if(l=l.replace(/\u2212/,"-"),p=l.match(/^([+-]?)\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))m=[{value:parseFloat(p[1]+"1"),exact:!0}];else if(p=l.match(/^([+-]?\s*\d+\s*(?:\/\s*[+-]?\s*\d+)?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))m=f(p[1]);else if(p=l.match(/^([+-]?)\s*(\d+)\s*([+-]?\d+)\s*\/\s*([+-]?\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i)){const y=parseFloat(p[1]+"1"),M=parseFloat(p[2]),I=parseFloat(p[3]),T=parseFloat(p[4]),S=I<T&&R.getGCD(I,T)===1;m=[{value:y*(M+I/T),exact:S}]}else if(p=l.match(/^([+-]?\s*\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\s*\d+))?$/i))m=f(p[1]+"/"+p[3]);else if(p=l.match(/^([+-]?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\d+))?$/i))m=f(p[1]+"1/"+p[3]);else if(l==="0")m=[{value:0,exact:!0}];else if(p=l.match(/^(.+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))m=d.decimal(p[1]);else{m=F.reduce(D.predicate.defaultForms.split(/\s*,\s*/),function(I,T){return I.concat(d[T](l))},[]);let y=!1;const M=parseFloat(l);if(!isNaN(M)&&M!==parseInt(l)){const I=Math.PI/12,T=I*Math.round(M/I);Math.abs(M-T)<.01&&(y=!0)}else l.match(/\/\s*7/)&&(y=!0);return y&&F.each(m,function(I){I.piApprox=!0}),m}let v=Math.PI;return l.match(/\\?tau|t|\u03c4/)&&(v=Math.PI*2),l.match(/pau/)&&(v=Math.PI*1.5),N.each(m,function(y,M){M.value*=v}),m},coefficient:function(l){let p=[];return l=l.replace(/\u2212/,"-"),l===""?p=[{value:1,exact:!0}]:l==="-"&&(p=[{value:-1,exact:!0}]),p},log:function(l){let p,m=[];return l=l.replace(/\u2212/,"-"),l=l.replace(/[ \(\)]/g,""),(p=l.match(/^log\s*(\S+)\s*$/i))?m=d.decimal(p[1]):l==="0"&&(m=[{value:0,exact:!0}]),m},percent:function(l){l=N.trim(l);let p=!1;l.indexOf("%")===l.length-1&&(l=N.trim(l.substring(0,l.length-1)),p=!0);const m=d.decimal(l);return N.each(m,function(v,y){y.exact=p,y.value=y.value/100}),m},mixed:function(l){const p=l.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?)(\d+)\s+(\d+)\s*\/\s*(\d+)$/);if(p){const m=parseFloat(p[1]+"1"),v=parseFloat(p[2]),y=parseFloat(p[3]),M=parseFloat(p[4]),I=y<M&&R.getGCD(y,M)===1;return[{value:m*(v+y/M),exact:I}]}return[]},decimal:function(l,p=1e10){const m=function(y){y=N.trim(y);const M=y.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?(?:\d{1,3}(?:[, ]?\d{3})*\.?|\d{0,3}(?:[, ]?\d{3})*\.(?:\d{3}[, ]?)*\d{1,3}))$/),I=y.match(/^0[0,]*,/);if(M&&!I){let T=parseFloat(M[1].replace(/[, ]/g,""));return r.inexact===void 0&&(T=Math.round(T*p)/p),T}},v=function(y){return y=y.replace(/([\.,])/g,function(M,I){return I==="."?",":"."}),m(y)};return[{value:m(l),exact:!0},{value:v(l),exact:!0}]}};return function(l){const p=r.fallback!=null?""+r.fallback:"";l=N.trim(l)||p;const m={empty:l==="",correct:!1,message:null,guess:l};if(N.each(c,function(v,y){const M=d[y](l);for(let I=0,T=M.length;I<T;I++){const S=M[I].value,C=M[I].exact,L=M[I].piApprox;if(e(S,r.maxError))return C||r.simplify==="optional"?(m.correct=!0,m.message=r.message||null,m.empty=!1):y==="percent"?(m.empty=!0,m.message=a.MISSING_PERCENT_ERROR):(r.simplify!=="enforced"&&(m.empty=!0),m.message=a.NEEDS_TO_BE_SIMPLFIED_ERROR),!1;L&&e(S,Math.abs(S*.001))&&(m.empty=!0,m.message=a.APPROXIMATED_PI_ERROR)}}),m.correct===!1){let v=!1;if(F.each(d,function(y){F.any(y(l),function(I){return I.value!=null&&!F.isNaN(I.value)})&&(v=!0)}),!v)return m.empty=!0,m.message=a.EXTRA_SYMBOLS_ERROR,m}return m}}},number:{convertToPredicate:function(e,r){const a=parseFloat(e);return[function(c,f){return Math.abs(c-a)<f},N.extend({},r,{type:"predicate"})]},createValidatorFunctional:function(e,r,a){return D.predicate.createValidatorFunctional(...D.number.convertToPredicate(e,r),a)}},expression:{parseSolution:function(e,r){let a=K(e,r);if(a.parsed){if(r.simplified&&!a.expr.isSimplified())throw new U("The provided solution ("+e+") isn't fully expanded and simplified.",z.InvalidInput);a=a.expr}else throw new U("The provided solution ("+e+") didn't parse.",z.InvalidInput);return a},createValidatorFunctional:function(e,r,a){return function(c){const f={empty:!1,correct:!1,message:null,guess:c,ungraded:!1};if(!c)return f.empty=!0,f;const d=K(c,r);if(!d.parsed)return f.empty=!0,f;typeof e=="string"&&(e=D.expression.parseSolution(e,r));const l=fn(d.expr,e,r);if(l.equal)f.correct=!0;else if(l.wrongVariableNames||l.wrongVariableCase)f.ungraded=!0,f.message=l.wrongVariableCase?a.WRONG_CASE_ERROR:a.WRONG_LETTER_ERROR,f.suppressAlmostThere=!0;else if(l.message)f.message=l.message;else{const p=K(c.replace(/[xX]/g,"*"),r);if(p.parsed){const m=fn(p.expr,e,r);m.equal?(f.ungraded=!0,f.message=a.MULTIPLICATION_SIGN_ERROR):m.message&&(f.message=m.message+" Also, I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign.")}}return f}}}},mn=/^web\+graphie:/,vn=/^file\+graphie:/;function Z(e){return yn(e)?wn(e):e}function yn(e){return mn.test(e)||vn.test(e)}function B(e){return e.replace(mn,"https:").replace(vn,"file:")}function wn(e){return B(e)+".svg"}function Wn(e){return B(e)+"-data.json"}async function Xn(e){const r=new Image;return new Promise((a,c)=>{r.onload=()=>{a([r.naturalWidth,r.naturalHeight])},r.onerror=c,r.src=Z(e)})}let hn=!1;const Mn=function(e,r,a){return Array.isArray(e)?F.map(e,function(c){return Mn(c,r)}):r.call(a,e)};function Hn(e,r){return e==null||r==null?e==null==(r==null):e.length===r.length&&e.every((a,c)=>r[c]===a)}const In=/^\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/,Jn=/^([a-z-]+) ([0-9]+)$/,Kn=new RegExp(In.source+"$"),Qn="☃",Yn={type:"points",earned:0,total:0,message:null},k=function(e){let r=e;return function(){let a=r;return a=a+2127912214+(a<<12)&4294967295,a=(a^3345072700^a>>>19)&4294967295,a=a+374761393+(a<<5)&4294967295,a=(a+3550635116^a<<9)&4294967295,a=a+4251993797+(a<<3)&4294967295,a=(a^3042594569^a>>>16)&4294967295,(r=a&268435455)/268435456}};function Zn(e,r,a=!1){const c=F.clone(e);if(!c.length||F.all(c,function(d){return F.isEqual(d,c[0])}))return c;let f;typeof r=="function"?f=r:f=k(r);do for(let d=c.length;d>0;d--){const l=Math.floor(f()*d),p=c[l];c[l]=c[d-1],c[d-1]=p}while(a&&F.isEqual(e,c));return c}const Bn="x".split(/(.)/g).length?function(e,r){return e.split(r)}:function(e,r){const a=[];let c=r.lastIndex=0,f;for(;f=r.exec(e);){const d=f;a.push(e.slice(c,d.index)),a.push(...d.slice(1)),c=d.index+d[0].length}return a.push(e.slice(c)),a};function kn(e,r){let a;if(e.type==="points"&&r.type==="points")return e.message&&r.message&&e.message!==r.message?a=null:a=e.message||r.message,{type:"points",earned:e.earned+r.earned,total:e.total+r.total,message:a};if(e.type==="points"&&r.type==="invalid")return r;if(e.type==="invalid"&&r.type==="points")return e;if(e.type==="invalid"&&r.type==="invalid")return e.message&&r.message&&e.message!==r.message?a=null:a=e.message||r.message,{type:"invalid",message:a};throw new U("PerseusScore with unknown type encountered",z.InvalidInput,{metadata:{scoreA:JSON.stringify(e),scoreB:JSON.stringify(r)}})}function bn(e){return e.type==="points"&&e.earned>=e.total}function jn(e,r,a){if(e.type==="points")return{empty:!1,correct:bn(e),message:e.message,guess:r,state:a};if(e.type==="invalid")return{empty:!0,correct:!1,message:e.message,suppressAlmostThere:e.suppressAlmostThere,guess:r,state:a};throw new U("Invalid score type: "+e.type,z.InvalidInput,{metadata:{score:JSON.stringify(e),guess:JSON.stringify(r),state:JSON.stringify(a)}})}function ne(e,r){let a;return D.predicate.createValidatorFunctional(function(f){return a=f,!0},{simplify:"optional",inexact:!0,forms:"integer, proper, improper, pi, log, mixed, decimal"},r)(e),a}function ee(e){return F(e).times(function(){return""})}function te(e,r,a,c){const f=b(r,a),l=e*f>30;return{scale:f,tickStep:e/c,unityLabel:l}}function re(e,r,a){return F(2).times(function(c){const f=b(e[c],a);return En(r[c],f)})}function ie(e){return[e[0]/2,e[1]/2]}function En(e,r){const a=e*r,c=e,f=Math.pow(10,Math.floor(Math.log(c)/Math.LN10)),d=Math.floor(c/f);if(a<25)return e;if(a<50)return d===5?e:e/2;if(d===1)return e/2;if(d===2)return e/4;if(d===5)return e/5}function b(e,r){const a=e[1]-e[0];return r/a}function ue(e,r){const a=e[1]-e[0];let c;15<a&&a<=20?c=23:a>100||a<5?c=10:c=16;const f=r/500,d=c*f;return j(a,d)}function j(e,r){let a=Math.pow(10,Math.floor(Math.log(e/r)/Math.LN10));const c=r/e*a;return c<=.15?a*=10:c<=.35?a*=5:c<=.75&&(a*=2),a}const gn=(e,r)=>{const a=r[1]-r[0],c=a/e;return c<=10?e:c<=20?e*2:j(a,10)};function ae(e,r){return[gn(e[0],r[0]),gn(e[1],r[1])]}const se={UNSAFE_componentWillMount:function(){const e={};F.each(this.deprecatedProps,function(r,a){F.has(this.props,a)&&F.extend(e,r(this.props))},this),F.isEmpty(e)||(F.extend(this.props,e),setTimeout(this.props.onChange,0,e))}};function Y(e,r){return typeof e=="number"&&typeof r=="number"?Math.abs(e-r)<1e-9:e===r}function G(e,r){if(Array.isArray(e)&&Array.isArray(r)){if(e.length!==r.length)return!1;for(let a=0;a<e.length;a++)if(!G(e[a],r[a]))return!1;return!0}return Array.isArray(e)||Array.isArray(r)?!1:typeof e=="function"&&typeof r=="function"?Y(e,r):typeof e=="function"||typeof r=="function"?!1:typeof e=="object"&&typeof r=="object"&&e&&r?e===r||F.all(e,function(a,c){return G(r[c],a)})&&F.all(r,function(a,c){return G(e[c],a)}):typeof e=="object"&&e||typeof r=="object"&&r?!1:Y(e,r)}function ce(e){e=e||window.location.search.substring(1);const r={},a=/\+/g,c=/([^&=]+)=?([^&]*)/g,f=function(l){return decodeURIComponent(l.replace(a," "))};let d;for(;d=c.exec(e);){const l=d;r[f(l[1])]=f(l[2])}return r}function le(e,r,a){a=encodeURIComponent(a);const c=new RegExp("([?&])"+r+"=.*?(&|$)","i"),f=e.indexOf("?")!==-1?"&":"?";return e.match(c)?e.replace(c,"$1"+r+"="+a+"$2"):e+f+r+"="+a}function oe(e){return encodeURIComponent(e).replace(/['()!]/g,window.escape).replace(/\*/g,"%2A")}function fe(e){if(!e)return!1;switch(e.type){case"measurer":case"protractor":return!0;default:return!1}}function pe(e){return e.type==="invalid"&&(!e.message||e.message.length===0)}const A={pointerDown:!1,currentTouchIdentifier:null};function de(){Object.assign(A,{pointerDown:!1,currentTouchIdentifier:null})}function he(e){let r;if(A.pointerDown){if(A.currentTouchIdentifier!=null){const c=e.changedTouches?e.changedTouches.length:0;for(let f=0;f<c;f++)e.changedTouches[f].identifier===A.currentTouchIdentifier&&(r=e.changedTouches[f])}else r=e;const a=e.type==="touchend"||e.type==="touchcancel";r&&a&&(A.pointerDown=!1,A.currentTouchIdentifier=null)}else A.pointerDown=!0,e.changedTouches?(r=e.changedTouches[0],A.currentTouchIdentifier=r.identifier):r=e;if(r)return{left:r.pageX,top:r.pageY}}const ge=()=>{try{const e=Object.defineProperty({},"passive",{get:function(){hn=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}return hn};function me(e){e.stopPropagation()}function ve(e,r){const a=new Image;a.onload=function(){var c;a.width===0&&a.height===0?((c=document.body)==null||c.appendChild(a),F.defer(function(){var f;r(a.clientWidth,a.clientHeight),(f=document.body)==null||f.removeChild(a)})):r(a.width,a.height)},a.src=Z(e)}function ye(e){const r=e.value,a=e.selectionStart-1,c=Math.max(r.lastIndexOf(`
`,a),r.lastIndexOf(" ",a))+1;return{string:r.substring(c,a+1),pos:{start:c,end:a}}}function we(e,r){e.selectionStart=r,e.selectionEnd=r}const Me={getWordBeforeCursor:ye,moveCursor:we},Ie=e=>e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):e,Ee=k(new Date().getTime()&4294967295);function Fn(e){return Array.isArray(e)?e.map(Fn):e}const Le={inputPathsEqual:Hn,nestedMap:Mn,rWidgetRule:In,rTypeFromWidgetId:Jn,rWidgetParts:Kn,snowman:Qn,noScore:Yn,seededRNG:k,shuffle:Zn,split:Bn,combineScores:kn,keScoreFromPerseusScore:jn,firstNumericalParse:ne,stringArrayOfSize:ee,gridDimensionConfig:te,getGridStep:re,snapStepFromGridStep:ie,scaleFromExtent:b,tickStepFromExtent:ue,gridStepFromTickStep:En,tickStepFromNumTicks:j,constrainedTickStepsFromTickSteps:ae,DeprecationMixin:se,eq:Y,deepEq:G,parseQueryString:ce,updateQueryString:le,strongEncodeURIComponent:oe,widgetShouldHighlight:fe,scoreIsEmpty:pe,touchHandlers:A,resetTouchHandlers:de,extractPointerLocation:he,supportsPassiveEvents:ge,captureScratchpadTouchStart:me,getImageSize:ve,getImageSizeModern:Xn,getRealImageUrl:Z,isLabeledSVG:yn,getBaseUrl:B,getSvgUrl:wn,getDataUrl:Wn,textarea:Me,unescapeMathMode:Ie,random:Ee,deepClone:Fn};export{qn as D,R as K,Le as U,bn as a,Pe as b,De as c,$e as d,$ as e,xe as f,D as g,Ae as h,Un as i,Se as r,Ce as s,dn as t};
