import{j as p}from"./jsx-runtime-FVsy8kgq.js";import{_ as i,$ as f}from"./jquery-yG1GhClm.js";import{P as c}from"./index-k-0mNqHS.js";import{r as m}from"./index-TT1qJ6UJ.js";import{R as l}from"./index-7vsPyIck.js";const u={};function d(a){if(!u[a]){const t=f("<span>").text(a).appendTo("body");u[a]=t.width()+5,t.remove()}return u[a]}const r=class r extends m.Component{constructor(){super(...arguments),this.state={items:this.props.options.concat("")},this.onChange=(t,o)=>{let s=i.clone(this.state.items);s[t]=o.target.value,t===s.length-1&&(s=s.concat("")),this.setState({items:s}),this.props.onChange(i.compact(s))},this.onKeyDown=(t,o)=>{const s=o.nativeEvent.keyCode;if(s===8&&this.state.items[t]===""){o.preventDefault();const e=i.clone(this.state.items),n=t===0?0:t-1;t===e.length-1&&(t===0||e[n]!=="")?l.findDOMNode(this.refs["input_"+n]).focus():(e.splice(t,1),this.setState({items:e},function(){l.findDOMNode(this.refs["input_"+n]).focus()}))}else if(s===8&&this.state.items[t].length===1&&t===this.state.items.length-2){o.preventDefault();const e=i.clone(this.state.items);e.splice(t,1),this.setState({items:e}),this.props.onChange(i.compact(e))}else if(s===13){o.preventDefault();const e=i.clone(this.state.items),n=t+1;t===e.length-2?l.findDOMNode(this.refs["input_"+n]).focus():(e.splice(n,0,""),this.setState({items:e},function(){l.findDOMNode(this.refs["input_"+n]).focus()}))}}}UNSAFE_componentWillReceiveProps(t){this.setState({items:t.options.concat("")})}render(){const t=["perseus-text-list-editor","perseus-clearfix","layout-"+this.props.layout].join(" "),o=i.map(this.state.items,function(s,e){return p("li",{children:p("input",{ref:"input_"+e,type:"text",value:s,onChange:this.onChange.bind(this,e),onKeyDown:this.onKeyDown.bind(this,e),style:{width:d(s)}})},e)},this);return p("ul",{className:t,children:o})}};r.propTypes={options:c.array,layout:c.oneOf(["horizontal","vertical"]),onChange:c.func.isRequired},r.defaultProps={options:[],layout:"horizontal"};let h=r;h.__docgenInfo={description:"",methods:[{name:"onChange",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null},{name:"event",optional:!1,type:null}],returns:null},{name:"onKeyDown",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:null},{name:"event",optional:!1,type:null}],returns:null}],displayName:"TextListEditor",props:{options:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"array"},required:!1},layout:{defaultValue:{value:'"horizontal"',computed:!1},description:"",type:{name:"enum",value:[{value:'"horizontal"',computed:!1},{value:'"vertical"',computed:!1}]},required:!1},onChange:{description:"",type:{name:"func"},required:!0}}};export{h as T};
