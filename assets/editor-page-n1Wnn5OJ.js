import{W as At,G as Ot,j as Pt,M as Rt,k as Vt,p as zt,T as Lt,w as Mt}from"./article-renderer-engpwc6z.js";import{_ as r}from"./index-default-4_ZsnO94.js";import{U as Q,r as Ut}from"./util-Kf-UsGkl.js";import{c as h,p as d,a as Dt}from"./unit-ti2HXQ4p.js";import{S as Et,P as wt,r as Wt,b as _t,a as Ht,c as $t}from"./renderer-jXtsf37s.js";import{A as Ae,C as Bt}from"./perseus-api-cFDIds9P.js";import{g as Ft}from"./multi-renderer-9KqIYZwh.js";import"./hints-renderer-5MYO6gBp.js";import"./base-radio-y4Xo7lPV.js";import"./button-group-KR3umc1e.js";import"./graph-jmTyxyV8.js";import{L as Ct,b as jt}from"./svg-image-D5zktulZ.js";import"./hud-CJYktPgf.js";import"./icon-TA3bBVIW.js";import"./info-tip-7k4XWhfR.js";import"./inline-icon-QIU9thzn.js";import"./math-input-b0AfbzvY.js";import"./multi-button-group-AxfQn4Cq.js";import"./number-input-XS-IwU_4.js";import{c as Kt}from"./prop-check-box-f7I2HerX.js";import"./range-input-XXGnnDKu.js";import"./text-input-Q1V0RBx1.js";import"./text-list-editor-A-LpoxgU.js";import{g as kt}from"./dependencies-9B_Bv_mA.js";import{$ as Gt}from"./jquery-5v7aFUvu.js";import"./version-akiLXZts.js";import"./i18n-context-3gTlIcWM.js";import{C as Jt}from"./categorizer-editor-0cuqRfpR.js";import{a,j as s}from"./jsx-runtime-5BUNAZ9W.js";import{E as Yt}from"./perseus-error-l3K_anoI.js";import{c as f}from"./components-MWI_x7cO.js";import{P as o}from"./index-tvtfaFq4.js";import{E as g}from"./editor-jsonify-HFWQIB5b.js";import{r as p}from"./index-4g5l5LRQ.js";import{B as v}from"./blur-input-nr2CGk0J.js";import{D as Xt}from"./definition-editor-I73Rdm3-.js";import{D as Zt}from"./dropdown-editor-C-Q3Q5cz.js";import{E as Qt}from"./explanation-editor-DsqzQB2Q.js";import{E as es}from"./expression-editor-BMYQsQMe.js";import{I as Ke}from"./icon-paths-AuJwhOz7.js";import{l as X}from"./index-awljIyHI.js";import{E as b}from"./editor-TVM8XXYq.js";import{G as ts}from"./graph-settings-YvaiyPDj.js";import{I as ss}from"./image-editor-OCHF7kHa.js";import{I as ns}from"./input-number-editor-a1OUJnVh.js";import{I as as}from"./index-OyDMODGG.js";import{I as is}from"./flags-for-api-options-PZ0hwx6G.js";import{L as rs}from"./label-image-editor-DW_PhSge.js";import{M as os}from"./matcher-editor-_l141x8h.js";import{N as ls}from"./number-line-editor-etbuqHv5.js";import{N as ps}from"./numeric-input-editor-PjPoG5D5.js";import{R as Oe}from"./index-jmm5gWkb.js";import{P as us}from"./python-program-editor-Jc1I0REi.js";import{R as hs}from"./editor-MPda7e25.js";import{S as cs}from"./sorter-editor-HJrrnLeT.js";import{u as Me,E as ds,M as ms,c as gs,V as fs}from"./compare-VLxlEkSV.js";import{V as ys}from"./viewport-resizer-dYgVTSY3.js";import{D as Tt}from"./device-framer-yWj_KsNt.js";import{I as vs}from"./item-extras-editor-xsFfOx1N.js";const{InfoTip:tt,PropCheckBox:st}=f,nt=400,at=400;var C;let bs=(C=class extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.serialize=()=>g.serialize.call(this)}render(){return a("fieldset",{className:"pair-editor",children:[a("label",{children:["Name:"," ",s(v,{value:this.props.name,onChange:this.change("name")})]}),a("label",{children:[" ","Value:"," ",s(v,{value:this.props.value,onChange:this.change("value")})]})]})}},C.propTypes={...d,name:o.string,value:o.string},C.defaultProps={name:"",value:""},C);var F;let ws=(F=class extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.handlePairChange=(e,t)=>{const n=this.props.pairs.slice();n[e]=t;const i=n[n.length-1];i.name&&i.value&&n.push({name:"",value:""}),this.change("pairs",n)},this.serialize=()=>g.serialize.call(this)}render(){const e=r.map(this.props.pairs,(t,n)=>s(bs,{name:t.name,value:t.value,onChange:this.handlePairChange.bind(this,n)},n));return s("div",{children:e})}},F.propTypes={...d,pairs:o.arrayOf(o.shape({name:o.string,value:o.string})).isRequired},F);const Cs=/khanacademy\.org\/computer-programming\/[^\/]+\/(\d+)/;function ks(u){const e=Cs.exec(u);return e&&(u=e[1]),u}const N=class N extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this._handleSettingsChange=e=>{this.change({settings:e.pairs})},this._handleProgramIDChange=e=>{e=ks(e);const{isDevServer:t,InitialRequestUrl:n}=kt(),l=`${t?n.origin:"https://www.khanacademy.org"}/api/internal/scratchpads/${e}`;Gt.getJSON(l).done(c=>{const m=c.userAuthoredContentType;this.change({width:c.width,height:c.height,programID:e,programType:m})}).fail((c,m,y)=>{Ct.error("Error retrieving scratchpad info for program ID ",Yt.TransientService,{cause:y,loggedMetadata:{textStatus:m,programID:e}}),this.change({width:nt,height:at,programID:e,programType:null})})},this.serialize=()=>g.serialize.call(this)}render(){return a("div",{children:[a("label",{children:["Url or Program ID:"," ",s(v,{value:this.props.programID,onChange:this._handleProgramIDChange})]}),s("br",{}),s(st,{label:"Show Editor",showEditor:this.props.showEditor,onChange:this.props.onChange}),s(tt,{children:'If you show the editor, you should use the "full-width" alignment to make room for the width of the editor.'}),s("br",{}),s(st,{label:"Show Buttons",showButtons:this.props.showButtons,onChange:this.props.onChange}),s("br",{}),a("label",{children:["Settings:",s(ws,{name:"settings",pairs:this.props.settings,onChange:this._handleSettingsChange}),a(tt,{children:["Settings that you add here are available to the program as an object returned by ",s("code",{children:"Program.settings()"})]})]})]})}};N.propTypes={...d},N.widgetName="cs-program",N.defaultProps={programID:"",programType:null,settings:[{name:"",value:""}],showEditor:!1,showButtons:!1,width:nt,height:at};let ee=N;ee.__docgenInfo={description:"This is the main editor for this widget, to specify all the options.",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"_handleSettingsChange",docblock:null,modifiers:[],params:[{name:"settings",optional:!1,type:null}],returns:null},{name:"_handleProgramIDChange",docblock:null,modifiers:[],params:[{name:"programID",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"CSProgramEditor",props:{programID:{defaultValue:{value:'""',computed:!1},required:!1},programType:{defaultValue:{value:"null",computed:!1},required:!1},settings:{defaultValue:{value:'[{name: "", value: ""}]',computed:!1},required:!1},showEditor:{defaultValue:{value:"false",computed:!1},required:!1},showButtons:{defaultValue:{value:"false",computed:!1},required:!1},width:{defaultValue:{value:"400",computed:!1},required:!1},height:{defaultValue:{value:"400",computed:!1},required:!1}},composes:["@khanacademy/perseus"]};const Je=class Je extends p.Component{serialize(){return g.serialize.call(this)}render(){return a("div",{children:[s("p",{children:"This widget has been deprecated and removed"}),s("p",{children:"Learners will see a message and they will not be graded on this part. Please replace this widget with a supported one."})]})}};Je.widgetName="deprecated-standin";let te=Je;te.__docgenInfo={description:"",methods:[{name:"serialize",docblock:null,modifiers:[],params:[],returns:{type:{name:"any"}}}],displayName:"DeprecatedStandinEditor",props:{onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(options: any) => void",signature:{arguments:[{type:{name:"any"},name:"options"}],return:{name:"void"}}},description:""}}};const{Graphie:xt}=f,Pe=xt.MovablePoint;var k;let Ts=(k=class extends p.Component{constructor(){super(...arguments),this.getUserInput=()=>At.getUserInput.call(this),this.change=(...e)=>h.apply(this,e),this.movePoint=e=>{this.change({coord:e})},this._getGridConfig=e=>r.map(e.step,function(t,n){return Q.gridDimensionConfig(t,e.range[n],e.box[n],e.gridStep[n])}),this.setupGraphie=(e,t)=>{const n=this._getGridConfig(t);e.graphInit({range:t.range,scale:r.pluck(n,"scale"),axisArrows:"<->",labelFormat:function(i){return"\\small{"+i+"}"},gridStep:t.gridStep,tickStep:r.pluck(n,"tickStep"),labelStep:1,unityLabels:r.pluck(n,"unityLabel")}),e.label([0,t.range[1][1]],t.labels[1],"above")},this.simpleValidate=e=>k.validate(this.getUserInput(),e)}static validate(e,t){return e.coord==null?{type:"invalid",message:null}:jt(e.coord,t.correct)?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}}render(){var e;return s(xt,{ref:"graphie",box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this.setupGraphie,setDrawingAreaAvailable:(e=this.props.apiOptions)==null?void 0:e.setDrawingAreaAvailable,children:s(Pe,{pointSize:5,coord:this.props.coord||[0,0],constraints:[Pe.constraints.snap(),Pe.constraints.bound()],onMove:this.movePoint})})}},k.defaultProps={coord:null,graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],valid:!0,backgroundImage:null,markings:"grid",showProtractor:!1}},k);const It={name:"example-graphie-widget",displayName:"Example Graphie Widget",hidden:!0,widget:Ts},xs=It.widget,q=class q extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.handleChange=e=>{e.coord&&this.change({correct:e.coord})},this.serialize=()=>g.serialize.call(this)}render(){return s("div",{children:s(xs,{graph:this.props.graph,coord:this.props.correct,onChange:this.handleChange,apiOptions:this.props.apiOptions})})}};q.propTypes={...d},q.widgetName="example-graphie-widget",q.defaultProps={correct:[4,4],graph:{box:[340,340],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],valid:!0,backgroundImage:null,markings:"grid",showProtractor:!1}};let se=q;se.__docgenInfo={description:`This is the widget's editor. This is what shows up on the left side
of the screen in the demo page. Only the question writer sees this.`,methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"handleChange",docblock:null,modifiers:[],params:[{name:"newProps",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ExampleGraphieWidgetEditor",props:{correct:{defaultValue:{value:"[4, 4]",computed:!1},required:!1},graph:{defaultValue:{value:`{
    box: [340, 340],
    labels: ["x", "y"],
    range: [
        [-10, 10],
        [-10, 10],
    ],
    step: [1, 1],
    gridStep: [1, 1],
    valid: true,
    backgroundImage: null,
    markings: "grid",
    showProtractor: false,
}`,computed:!1},required:!1}},composes:["@khanacademy/perseus"]};const S=class S extends p.Component{constructor(){super(...arguments),this.input=p.createRef(),this.handleAnswerChange=e=>{this.change({correct:e.target.value})},this.change=(...e)=>h.apply(this,e),this.focus=()=>{var e;return(e=this.input.current)==null||e.focus(),!0},this.serialize=()=>g.serialize.call(this)}render(){return s("div",{children:a("label",{children:["Correct answer:",s("input",{value:this.props.correct,onChange:this.handleAnswerChange,ref:this.input})]})})}};S.propTypes={...d},S.widgetName="example-widget",S.defaultProps={correct:""};let ne=S;ne.__docgenInfo={description:`This is the widget's editor. This is what shows up on the left side
of the screen in the demo. Only the question writer sees this.`,methods:[{name:"handleAnswerChange",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"focus",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ExampleWidgetEditor",props:{correct:{defaultValue:{value:'""',computed:!1},required:!1}},composes:["@khanacademy/perseus"]};const{InlineIcon:it,TextInput:Is}=f,{iconPlus:Ns,iconTrash:qs}=Ke,A=class A extends p.Component{constructor(){super(...arguments),this.editor=p.createRef(),this.hintEditor=p.createRef(),this.change=(...e)=>h.apply(this,e),this.handleAddHint=()=>{const e={content:""};this.props.onChange({hint:e},()=>{var t;(t=this.hintEditor.current)==null||t.focus()})},this.handleRemoveHint=e=>{this.props.onChange({hint:null})},this.getSaveWarnings=()=>{var e;return(e=this.editor.current)==null?void 0:e.getSaveWarnings()},this.serialize=()=>{var e,t;return{title:this.props.title,...(e=this.editor.current)==null?void 0:e.serialize(),hint:(t=this.hintEditor.current)==null?void 0:t.serialize()}}}render(){return a("div",{className:"perseus-group-editor",children:[s("div",{className:"perseus-widget-row",children:a("label",{className:X.css(Re.title),children:["Title:"," ",s(Is,{value:this.props.title,className:X.css(Re.input),onChange:this.change("title")})]})}),s(b,{ref:this.editor,content:this.props.content,widgets:this.props.widgets,apiOptions:this.props.apiOptions,images:this.props.images,widgetEnabled:!0,immutableWidgets:!1,onChange:this.props.onChange,warnNoPrompt:!0,warnNoWidgets:!0}),!this.props.hint&&a("button",{type:"button",style:{marginTop:10},className:"add-hint simple-button orange",onClick:this.handleAddHint,children:[s(it,{...Ns})," Add a hint"]}),this.props.hint&&a("div",{className:"perseus-hint-editor",children:[s("div",{className:X.css(Re.hintsTitle),children:"Hint"}),s(b,{ref:this.hintEditor,content:this.props.hint?this.props.hint.content:"",widgets:this.props.hint?this.props.hint.widgets:{},apiOptions:this.props.apiOptions,images:this.props.hint&&this.props.hint.images,widgetEnabled:!0,immutableWidgets:!1,onChange:e=>{this.change("hint",Object.assign({},this.props.hint,e))}}),a("button",{type:"button",className:"remove-hint simple-button orange",onClick:this.handleRemoveHint,children:[s(it,{...qs})," Remove this hint"]})]})]})}};A.propTypes={...d,title:o.string,content:o.string,widgets:o.object,images:o.object,apiOptions:Ae.propTypes},A.widgetName="graded-group",A.defaultProps={title:"",content:"",widgets:{},images:{},hint:null};let w=A;const Re=X.StyleSheet.create({title:{fontSize:18,fontWeight:"bold"},input:{fontSize:18},hintsTitle:{marginTop:10,fontSize:"110%",fontWeight:"bold"}});w.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"handleAddHint",docblock:null,modifiers:[],params:[],returns:null},{name:"handleRemoveHint",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GradedGroupEditor",props:{title:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},content:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},widgets:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},images:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},hint:{defaultValue:{value:"null",computed:!1},required:!1},apiOptions:{description:"",type:{name:"custom",raw:"ApiOptions.propTypes"},required:!1}},composes:["@khanacademy/perseus"]};const O=class O extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.getSaveWarnings=()=>[].concat(...this._editors.map(e=>e?e.getSaveWarnings():[])),this.serialize=()=>({gradedGroups:this.props.gradedGroups}),this.renderGroups=()=>this.props.gradedGroups?this.props.gradedGroups.map((e,t)=>s(w,{ref:n=>this._editors[t]=n,...e,apiOptions:this.props.apiOptions,widgetEnabled:!0,immutableWidgets:!1,onChange:n=>this.change("gradedGroups",Ss(this.props.gradedGroups,t,{...this.props.gradedGroups[t],...n}))},t)):null,this.addGroup=()=>{const e=this.props.gradedGroups||[];this.change("gradedGroups",e.concat([w.defaultProps]))}}UNSAFE_componentWillMount(){this._editors=[]}render(){return a("div",{className:"perseus-group-editor",children:[this.renderGroups(),s("button",{onClick:this.addGroup,children:"Add group"})]})}};O.propTypes={...d,apiOptions:Ae.propTypes,gradedGroups:o.array,onChange:o.func.isRequired},O.widgetName="graded-group-set",O.defaultProps={gradedGroups:[]};let ae=O;const Ss=(u,e,t)=>[...u.slice(0,e),t,...u.slice(e+1)];ae.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null},{name:"renderGroups",docblock:null,modifiers:[],params:[],returns:null},{name:"addGroup",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GradedGroupSetEditor",props:{gradedGroups:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"array"},required:!1},apiOptions:{description:"",type:{name:"custom",raw:"ApiOptions.propTypes"},required:!1},onChange:{description:"",type:{name:"func"},required:!0}},composes:["@khanacademy/perseus"]};const{InfoTip:As,MultiButtonGroup:Os}=f,{containerSizeClass:Ps,getInteractiveBoxFromSizeClass:Rs}=Et,Vs=Ot.widget,{DEFAULT_GRAPHER_PROPS:Ve,allTypes:zs,chooseType:Ls,defaultPlotProps:Ms,getEquationString:Us,typeToButton:Ds}=Pt,P=class P extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.handleAvailableTypesChange=e=>{let t=this.props.correct;if(!r.contains(e,this.props.correct.type)){const n=this.props.graph,i=Ls(e);t=Ms(i,n)}this.props.onChange({availableTypes:e,correct:t})},this.serialize=()=>r.chain(this.props).pick("correct","availableTypes").extend({graph:r.omit(this.props.graph,"box")}).value()}render(){const e=Ps.SMALL;let t,n;if(this.props.graph.valid===!0){const i={graph:this.props.graph,plot:this.props.correct,availableTypes:this.props.availableTypes,onChange:(l,c)=>{var y;let m=this.props.correct;m.type===((y=l.plot)==null?void 0:y.type)?m=r.extend({},m,l.plot):m=l.plot,this.props.onChange({correct:m},c)},trackInteraction:function(){}};n=s(Vs,{...i,apiOptions:this.props.apiOptions,containerSizeClass:e}),t=Us(i)}else n=s("div",{className:"perseus-error",children:this.props.graph.valid});return a("div",{children:[a("div",{children:["Correct answer"," ",s(As,{children:s("p",{children:"Graph the correct answer in the graph below and ensure the equation or point coordinates displayed represent the correct answer."})})," ",": ",t]}),s(ts,{editableSettings:["graph","snap","image"],box:Rs(e),range:this.props.graph.range,labels:this.props.graph.labels,step:this.props.graph.step,gridStep:this.props.graph.gridStep,snapStep:this.props.graph.snapStep,valid:this.props.graph.valid,backgroundImage:this.props.graph.backgroundImage,markings:this.props.graph.markings,rulerLabel:this.props.graph.rulerLabel,rulerTicks:this.props.graph.rulerTicks,showTooltips:this.props.graph.showTooltips,onChange:this.change("graph")}),a("div",{className:"perseus-widget-row",children:[s("label",{children:"Available functions: "}),s(Os,{allowEmpty:!1,values:this.props.availableTypes,buttons:r.map(zs,Ds),onChange:this.handleAvailableTypesChange})]}),n]})}};P.propTypes={...d},P.widgetName="grapher",P.defaultProps={correct:Ve.plot,graph:Ve.graph,availableTypes:Ve.availableTypes};let ie=P;ie.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"handleAvailableTypesChange",docblock:null,modifiers:[],params:[{name:"newAvailableTypes",optional:!1,type:{name:"Array",elements:[{name:"any"}],raw:"Array<any>",alias:"Array"}}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GrapherEditor",props:{correct:{defaultValue:{value:"DEFAULT_GRAPHER_PROPS.plot",computed:!0},required:!1},graph:{defaultValue:{value:"DEFAULT_GRAPHER_PROPS.graph",computed:!0},required:!1},availableTypes:{defaultValue:{value:"DEFAULT_GRAPHER_PROPS.availableTypes",computed:!0},required:!1}},composes:["@khanacademy/perseus"]};const R=class R extends p.Component{constructor(){super(...arguments),this.editor=p.createRef(),this._renderMetadataEditor=()=>{const e=this.props.apiOptions.GroupMetadataEditor;return s(e,{value:this.props.metadata,onChange:this.change("metadata")})},this.change=(...e)=>h.apply(this,e),this.getSaveWarnings=()=>{var e;return(e=this.editor.current)==null?void 0:e.getSaveWarnings()},this.serialize=()=>{var e;return r.extend({},(e=this.editor.current)==null?void 0:e.serialize(),{metadata:this.props.metadata})}}render(){return a("div",{className:"perseus-group-editor",children:[s("div",{children:this._renderMetadataEditor()}),s(b,{ref:this.editor,content:this.props.content,widgets:this.props.widgets,apiOptions:this.props.apiOptions,images:this.props.images,widgetEnabled:!0,immutableWidgets:!1,onChange:this.props.onChange})]})}};R.propTypes={...d,content:o.string,widgets:o.object,images:o.object,metadata:o.any,apiOptions:Ae.propTypes},R.widgetName="group",R.defaultProps={content:"",widgets:{},images:{},metadata:void 0};let re=R;re.__docgenInfo={description:"",methods:[{name:"_renderMetadataEditor",docblock:null,modifiers:[],params:[],returns:null},{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"GroupEditor",props:{content:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},widgets:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},images:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},metadata:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"any"},required:!1},apiOptions:{description:"",type:{name:"custom",raw:"ApiOptions.propTypes"},required:!1}},composes:["@khanacademy/perseus"]};const{PropCheckBox:rt}=f,Te=class Te extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.serialize=()=>g.serialize.call(this)}render(){return a("fieldset",{children:[a("label",{children:["Name:",s(v,{value:this.props.name,onChange:this.change("name")})]}),a("label",{children:["Value:",s(v,{value:this.props.value,onChange:this.change("value")})]})]})}};Te.propTypes={...d,name:o.string,value:o.string},Te.defaultProps={name:"",value:""};let Ue=Te;const Ye=class Ye extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.handlePairChange=(e,t)=>{const n=this.props.pairs.slice();n[e]=t;const i=n[n.length-1];i.name&&i.value&&n.push({name:"",value:""}),this.change("pairs",n)},this.serialize=()=>g.serialize.call(this)}render(){const e=r.map(this.props.pairs,(t,n)=>s(Ue,{name:t.name,value:t.value,onChange:this.handlePairChange.bind(this,n)},n));return s("div",{children:e})}};Ye.propTypes={...d,pairs:o.arrayOf(o.shape({name:o.string,value:o.string})).isRequired};let De=Ye;const V=class V extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.handleSettingsChange=e=>{this.change({settings:e.pairs})},this.serialize=()=>g.serialize.call(this)}render(){return a("div",{children:[a("div",{style:{fontWeight:"bold",textAlign:"center"},children:["This widget is deprecated! ",s("br",{}),"Try using the Video or CS Program widgets instead."]}),a("label",{children:["Url or Program ID:",s(v,{value:this.props.url,onChange:this.change("url")})]}),s("br",{}),a("label",{children:["Settings:",s(De,{name:"settings",pairs:this.props.settings,onChange:this.handleSettingsChange})]}),s("br",{}),a("label",{children:["Width:",s(v,{value:this.props.width,onChange:this.change("width")})]}),a("label",{children:["Height:",s(v,{value:this.props.height,onChange:this.change("height")})]}),s(rt,{label:"Allow full screen",allowFullScreen:this.props.allowFullScreen,onChange:this.props.onChange}),s("br",{}),s(rt,{label:"Allow iframe content to redirect the page",allowTopNavigation:this.props.allowTopNavigation,onChange:this.props.onChange})]})}};V.propTypes={...d},V.widgetName="iframe",V.defaultProps={url:"",settings:[{name:"",value:""}],width:"400",height:"400",allowFullScreen:!1,allowTopNavigation:!1};let oe=V;oe.__docgenInfo={description:"This is the main editor for this widget, to specify all the options.",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"handleSettingsChange",docblock:null,modifiers:[],params:[{name:"settings",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"IframeEditor",props:{url:{defaultValue:{value:'""',computed:!1},required:!1},settings:{defaultValue:{value:'[{name: "", value: ""}]',computed:!1},required:!1},width:{defaultValue:{value:'"400"',computed:!1},required:!1},height:{defaultValue:{value:'"400"',computed:!1},required:!1},allowFullScreen:{defaultValue:{value:"false",computed:!1},required:!1},allowTopNavigation:{defaultValue:{value:"false",computed:!1},required:!1}},composes:["@khanacademy/perseus"]};const{RangeInput:Es}=f,Ws=Rt.widget,ot=6,_s=function(u){const e=[1,1];return r(u).each((t,n)=>{let i=0;r(t).each((l,c)=>{l!=null&&l.toString().length&&(i=c+1)}),e[1]=Math.max(e[1],i),i>0&&(e[0]=Math.max(e[0],n+1))}),e},z=class z extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.onMatrixBoardSizeChange=e=>{const t=_s(this.props.answers);if(e[0]!==null&&e[1]!==null){e=[Math.round(Math.min(Math.max(e[0],1),ot)),Math.round(Math.min(Math.max(e[1],1),ot))];const n=r(Math.min(e[0],t[0])).times(i=>r(Math.min(e[1],t[1])).times(l=>this.props.answers[i][l]));this.props.onChange({matrixBoardSize:e,answers:n})}},this.serialize=()=>g.serialize.call(this)}render(){const e=r.extend({numericInput:!0,onBlur:()=>{},onFocus:()=>{},trackInteraction:()=>{}},this.props);return a("div",{className:"perseus-matrix-editor",children:[a("div",{className:"perseus-widget-row",children:[" ","Max matrix size:"," ",s(Es,{value:this.props.matrixBoardSize,onChange:this.onMatrixBoardSizeChange,format:this.props.labelStyle,useArrowKeys:!0})]}),s("div",{className:"perseus-widget-row",children:s(Ws,{...e})}),a("div",{className:"perseus-widget-row",children:[" ","Matrix prefix:"," ",s(b,{ref:"prefix",apiOptions:this.props.apiOptions,content:this.props.prefix,widgetEnabled:!1,onChange:t=>{this.change({prefix:t.content})}})]}),a("div",{className:"perseus-widget-row",children:[" ","Matrix suffix:"," ",s(b,{ref:"suffix",apiOptions:this.props.apiOptions,content:this.props.suffix,widgetEnabled:!1,onChange:t=>{this.change({suffix:t.content})}})]})]})}};z.propTypes={...d,matrixBoardSize:o.arrayOf(o.number).isRequired,answers:o.arrayOf(o.arrayOf(o.number)),prefix:o.string,suffix:o.string,cursorPosition:o.arrayOf(o.number)},z.widgetName="matrix",z.defaultProps={matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0]};let le=z;le.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"onMatrixBoardSizeChange",docblock:null,modifiers:[],params:[{name:"range",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MatrixEditor",props:{matrixBoardSize:{defaultValue:{value:"[3, 3]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"number"}},required:!1},answers:{defaultValue:{value:"[[]]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"arrayOf",value:{name:"number"}}},required:!1},prefix:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},suffix:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},cursorPosition:{defaultValue:{value:"[0, 0]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"number"}},required:!1}},composes:["@khanacademy/perseus"]};const{InfoTip:Hs,NumberInput:K,PropCheckBox:lt,RangeInput:$s}=f,Bs={url:null,top:0,left:0},L=class L extends p.Component{constructor(){super(...arguments),this.className="perseus-widget-measurer",this.change=(...e)=>h.apply(this,e),this._changeUrl=e=>{this._changeImage("url",e.target.value)},this._changeTop=e=>{this._changeImage("top",e)},this._changeLeft=e=>{this._changeImage("left",e)},this._changeImage=(e,t)=>{const n=r.clone(this.props.image);n[e]=t,this.change("image",n)},this.renderLabelChoices=e=>r.map(e,function(t){const[n,i]=t;return s("option",{value:i,children:n},i)}),this.serialize=()=>g.serialize.call(this)}render(){const e=r.extend({},Bs,this.props.image);return a("div",{className:"perseus-widget-measurer",children:[s("div",{children:"Image displayed under protractor and/or ruler:"}),a("div",{children:["URL:"," ",s("input",{type:"text",className:"perseus-widget-measurer-url",ref:"image-url",defaultValue:e.url,onChange:this._changeUrl}),s(Hs,{children:s("p",{children:'Create an image in graphie, or use the "Add image" function to create a background.'})})]}),e.url&&a("div",{className:"perseus-widget-row",children:[a("label",{className:"perseus-widget-left-col",children:["Pixels from top:"," ",s(K,{placeholder:0,onChange:this._changeTop,value:e.top,useArrowKeys:!0})]}),a("label",{className:"perseus-widget-right-col",children:["Pixels from left:"," ",s(K,{placeholder:0,onChange:this._changeLeft,value:e.left,useArrowKeys:!0})]})]}),a("div",{children:["Containing area [width, height]:"," ",s($s,{onChange:this.change("box"),value:this.props.box,useArrowKeys:!0})]}),a("div",{className:"perseus-widget-row",children:[s("div",{className:"perseus-widget-left-col",children:s(lt,{label:"Show ruler",showRuler:this.props.showRuler,onChange:this.props.onChange})}),s("div",{className:"perseus-widget-right-col",children:s(lt,{label:"Show protractor",showProtractor:this.props.showProtractor,onChange:this.props.onChange})})]}),this.props.showRuler&&a("div",{children:[s("div",{children:a("label",{children:[" ","Ruler label:"," ",a("select",{onChange:t=>this.change("rulerLabel",t.target.value),value:this.props.rulerLabel,children:[s("option",{value:"",children:"None"}),s("optgroup",{label:"Metric",children:this.renderLabelChoices([["milimeters","mm"],["centimeters","cm"],["meters","m"],["kilometers","km"]])}),s("optgroup",{label:"Imperial",children:this.renderLabelChoices([["inches","in"],["feet","ft"],["yards","yd"],["miles","mi"]])})]})]})}),s("div",{children:a("label",{children:[" ","Ruler ticks:"," ",s("select",{onChange:t=>this.change("rulerTicks",+t.target.value),value:this.props.rulerTicks,children:r.map([1,2,4,8,10,16],function(t){return s("option",{value:t,children:t},t)})})]})}),s("div",{children:a("label",{children:["Ruler pixels per unit:"," ",s(K,{placeholder:40,onChange:this.change("rulerPixels"),value:this.props.rulerPixels,useArrowKeys:!0})]})}),s("div",{children:a("label",{children:["Ruler length in units:"," ",s(K,{placeholder:10,onChange:this.change("rulerLength"),value:this.props.rulerLength,useArrowKeys:!0})]})})]})]})}};L.widgetName="measurer",L.propTypes={...d,box:o.arrayOf(o.number),image:o.shape({url:o.string,top:o.number,left:o.number}),showProtractor:o.bool,showRuler:o.bool,rulerLabel:o.string,rulerTicks:o.number,rulerPixels:o.number,rulerLength:o.number},L.defaultProps={box:[480,480],image:{},showProtractor:!0,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10};let pe=L;pe.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"_changeUrl",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"_changeTop",docblock:null,modifiers:[],params:[{name:"newTop",optional:!1,type:null}],returns:null},{name:"_changeLeft",docblock:null,modifiers:[],params:[{name:"newLeft",optional:!1,type:null}],returns:null},{name:"_changeImage",docblock:null,modifiers:[],params:[{name:"subProp",optional:!1,type:null},{name:"newValue",optional:!1,type:null}],returns:null},{name:"renderLabelChoices",docblock:null,modifiers:[],params:[{name:"choices",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MeasurerEditor",props:{box:{defaultValue:{value:"[480, 480]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"number"}},required:!1},image:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"shape",value:{url:{name:"string",required:!1},top:{name:"number",required:!1},left:{name:"number",required:!1}}},required:!1},showProtractor:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},showRuler:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},rulerLabel:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},rulerTicks:{defaultValue:{value:"10",computed:!1},description:"",type:{name:"number"},required:!1},rulerPixels:{defaultValue:{value:"40",computed:!1},description:"",type:{name:"number"},required:!1},rulerLength:{defaultValue:{value:"10",computed:!1},description:"",type:{name:"number"},required:!1}},composes:["@khanacademy/perseus"]};const{NumberInput:Fs,TextInput:js}=f,xe=class xe extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.updateMolecule=e=>{this.change({smiles:e})},this.updateRotation=e=>{this.change({rotationAngle:e})},this.serialize=()=>g.serialize.call(this)}render(){return a("div",{children:[s("div",{children:a("label",{children:["SMILES: ",s(js,{onChange:this.updateMolecule,value:this.props.smiles})]})}),s("div",{children:a("label",{children:["Rotation (deg): ",s(Fs,{onChange:this.updateRotation,value:this.props.rotationAngle})]})})]})}};xe.propTypes={...d,rotationAngle:o.number,smiles:o.string},xe.widgetName="molecule-renderer";let ue=xe;ue.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"updateMolecule",docblock:null,modifiers:[],params:[{name:"newValue",optional:!1,type:null}],returns:null},{name:"updateRotation",docblock:null,modifiers:[],params:[{name:"newValue",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"MoleculeWidgetEditor",props:{rotationAngle:{description:"",type:{name:"number"},required:!1},smiles:{description:"",type:{name:"string"},required:!1}},composes:["@khanacademy/perseus"]};const{InfoTip:G,TextListEditor:pt}=f,ze="normal",ut="auto",Le="horizontal",ht="vertical",M=class M extends p.Component{constructor(){super(...arguments),this.onOptionsChange=(e,t,n)=>{const i={};i[e]=r.map(t,function(l){return{content:l}}),this.props.onChange(i,n)},this.onLayoutChange=e=>{this.props.onChange({layout:e.target.value})},this.onHeightChange=e=>{this.props.onChange({height:e.target.value})},this.serialize=()=>({options:r.chain(r.pluck(this.props.correctOptions,"content")).union(r.pluck(this.props.otherOptions,"content")).uniq().reject(function(t){return t===""}).sort().sortBy(function(t){return/\d/.test(t)?0:/^\$?[a-zA-Z]+\$?$/.test(t)?2:1}).map(function(t){return{content:t}}).value(),correctOptions:this.props.correctOptions,otherOptions:this.props.otherOptions,height:this.props.height,layout:this.props.layout})}render(){return a("div",{className:"perseus-widget-orderer",children:[a("div",{children:[" ","Correct answer:"," ",s(G,{children:s("p",{children:"Place the cards in the correct order. The same card can be used more than once in the answer but will only be displayed once at the top of a stack of identical cards."})})]}),s(pt,{options:r.pluck(this.props.correctOptions,"content"),onChange:this.onOptionsChange.bind(this,"correctOptions"),layout:this.props.layout}),a("div",{children:[" ","Other cards:"," ",s(G,{children:s("p",{children:"Create cards that are not part of the answer."})})]}),s(pt,{options:r.pluck(this.props.otherOptions,"content"),onChange:this.onOptionsChange.bind(this,"otherOptions"),layout:this.props.layout}),a("div",{children:[a("label",{children:[" ","Layout:"," ",a("select",{value:this.props.layout,onChange:this.onLayoutChange,children:[s("option",{value:Le,children:"Horizontal"}),s("option",{value:ht,children:"Vertical"})]})]}),s(G,{children:s("p",{children:"Use the horizontal layout for short text and small images. The vertical layout is best for longer text (e.g. proofs)."})})]}),a("div",{children:[a("label",{children:[" ","Height:"," ",a("select",{value:this.props.height,onChange:this.onHeightChange,children:[s("option",{value:ze,children:"Normal"}),s("option",{value:ut,children:"Automatic"})]})]}),s(G,{children:s("p",{children:'Use "Normal" for text, "Automatic" for images.'})})]})]})}};M.propTypes={correctOptions:o.array,otherOptions:o.array,height:o.oneOf([ze,ut]),layout:o.oneOf([Le,ht]),onChange:o.func.isRequired},M.widgetName="orderer",M.defaultProps={correctOptions:[{content:"$x$"}],otherOptions:[{content:"$y$"}],height:ze,layout:Le};let he=M;he.__docgenInfo={description:"",methods:[{name:"onOptionsChange",docblock:null,modifiers:[],params:[{name:"whichOptions",optional:!1,type:null},{name:"options",optional:!1,type:null},{name:"cb",optional:!1,type:null}],returns:null},{name:"onLayoutChange",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"onHeightChange",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"OrdererEditor",props:{correctOptions:{defaultValue:{value:'[{content: "$x$"}]',computed:!1},description:"",type:{name:"array"},required:!1},otherOptions:{defaultValue:{value:'[{content: "$y$"}]',computed:!1},description:"",type:{name:"array"},required:!1},height:{defaultValue:{value:'"normal"',computed:!1},description:"",type:{name:"enum",value:[{value:'"normal"',computed:!1},{value:'"auto"',computed:!1}]},required:!1},layout:{defaultValue:{value:'"horizontal"',computed:!1},description:"",type:{name:"enum",value:[{value:'"horizontal"',computed:!1},{value:'"vertical"',computed:!1}]},required:!1},onChange:{description:"",type:{name:"func"},required:!0}}};const{InfoTip:ct,PropCheckBox:Ks}=f,U=class U extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.serialize=()=>g.serialize.call(this)}render(){const e=s(b,{ref:"passage-editor",apiOptions:this.props.apiOptions,content:this.props.passageText,widgetEnabled:!1,placeholder:"Type passage here...",onChange:n=>{this.change({passageText:n.content})},showWordCount:!0}),t=s(b,{ref:"passage-footnotes-editor",apiOptions:this.props.apiOptions,content:this.props.footnotes,widgetEnabled:!1,placeholder:"Type footnotes here...",onChange:n=>{this.change({footnotes:n.content})}});return a("div",{className:"perseus-widget-passage-editor",children:[s("div",{className:"perseus-widget-row",children:s(Ks,{label:"Show line numbers",labelAlignment:"right",showLineNumbers:this.props.showLineNumbers,onChange:this.props.onChange})}),a("div",{children:["Passage title:",s(ct,{children:s("p",{children:"An optional title that will appear directly above the passage in the same font style. (E.g. Passage 1)"})}),s("div",{children:s("input",{type:"text",defaultValue:this.props.passageTitle,onChange:n=>{this.change({passageTitle:n.target.value})}})})]}),a("div",{children:["Passage Text:",e]}),a("div",{children:["Footnotes:",s(ct,{children:s("p",{children:"To add footnotes, add ^ characters where they belong in the passage. Then, add ^ in the footnotes area to reference the footnotes in the passage."})}),t]})]})}};U.propTypes={...d,passageTitle:o.string,passageText:o.string,footnotes:o.string,showLineNumbers:o.bool},U.widgetName="passage",U.defaultProps={passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0};let ce=U;ce.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PassageEditor",props:{passageTitle:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},passageText:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},footnotes:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},showLineNumbers:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1}},composes:["@khanacademy/perseus"]};const{InfoTip:Gs,NumberInput:dt,TextInput:Js}=f,D=class D extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.serialize=()=>g.serialize.call(this)}render(){return a("div",{children:[s("div",{children:a("label",{children:["Passage Number: ",s(dt,{value:this.props.passageNumber,onChange:this.change("passageNumber")})]})}),s("div",{children:a("label",{children:["Reference Number: ",s(dt,{value:this.props.referenceNumber,onChange:this.change("referenceNumber")})]})}),s("div",{children:a("label",{children:["Summary Text: ",s(Js,{value:this.props.summaryText,onChange:this.change("summaryText")}),a(Gs,{children:[s("p",{children:"Short summary of the referenced section. This will be included in parentheses and quotes automatically."}),s("p",{children:"Ex: The start ... the end"})]})]})})]})}};D.propTypes={...d,passageNumber:o.number,referenceNumber:o.number,summaryText:o.string},D.widgetName="passage-ref",D.defaultProps={passageNumber:1,referenceNumber:1,summaryText:""};let de=D;de.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PassageRefEditor",props:{passageNumber:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"number"},required:!1},referenceNumber:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"number"},required:!1},summaryText:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1}},composes:["@khanacademy/perseus"]};const E=class E extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.handleContentChange=e=>{this.change({content:e.target.value})},this.serialize=()=>g.serialize.call(this)}render(){return a("div",{children:["Content:",s("input",{type:"text",value:this.props.content,onChange:this.handleContentChange})]})}};E.propTypes={...d,content:o.string},E.widgetName="passage-ref-target",E.defaultProps={content:""};let me=E;me.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"handleContentChange",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PassageRefTargetEditor",props:{content:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1}},composes:["@khanacademy/perseus"]};const{InfoTip:x,NumberInput:mt,RangeInput:Ys,TextListEditor:Xs}=f,Zs=Vt.widget,Ee="starting",We="correct",Qs=[Ee,We];function gt(u,e,t){const n=r.clone(u);n.length=e;for(let i=u.length;i<e;i++)n[i]=t;return n}const J={scaleY:1,maxY:10,snapsPerLine:2},ft=u=>"$"+Ut(u,2)+"$",Ie=class Ie extends p.Component{constructor(){super(...arguments),this.state={editing:this.props.static?Ee:We,pic:null,loadedUrl:null,minX:null,maxX:null,tickStep:null},this.fetchPic=e=>{if(this.state.loadedUrl!==e){const t=new Image;t.src=e,t.onload=()=>{this.setState({pic:t,loadedUrl:e})}}},this.handleChangeTickStep=e=>{this.setState({tickStep:e})},this.handleChangeRange=e=>{this.setState({minX:e[0],maxX:e[1]})},this.changeLabelInterval=e=>{this.props.onChange({labelInterval:e})},this.handlePlotterChange=e=>{const t={};t[this.state.editing]=e.values,this.props.onChange(t)},this.changeType=e=>{let t;if(e==="histogram"?(t=[ft(0)].concat(this.props.categories),this.props.onChange({type:e,categories:t})):this.props.type==="histogram"?(t=this.props.categories.slice(1),this.props.onChange({type:e,categories:t})):this.props.onChange({type:e}),t){const n=Oe.findDOMNode(this.refs.categories);n.value=t.join(", ")}},this.changeLabel=(e,t)=>{const n=r.clone(this.props.labels);n[e]=t.target.value,this.props.onChange({labels:n})},this.changePicUrl=e=>{const t=Q.getRealImageUrl(e);this.props.onChange({picUrl:t})},this.changeCategories=e=>{let t=e.length;this.props.type==="histogram"&&t--;const n=this.props.scaleY;this.props.onChange({categories:e,correct:gt(this.props.correct,t,n),starting:gt(this.props.starting,t,n)})},this.changeScale=e=>{const t=this.props.scaleY,n=+e.target.value||J.scaleY,i=function(c){return c*n/t},l=i(this.props.maxY);this.props.onChange({scaleY:n,maxY:l,correct:r.map(this.props.correct,i),starting:r.map(this.props.starting,i)}),Oe.findDOMNode(this.refs.maxY).value=l},this.changeMax=e=>{this.props.onChange({maxY:+e.target.value||J.maxY})},this.changeSnaps=e=>{this.props.onChange({snapsPerLine:+e.target.value||J.snapsPerLine})},this.changeEditing=e=>{this.setState({editing:e})},this.setCategoriesFromScale=()=>{const e=this.state.tickStep||1,t=this.state.minX||0,n=this.state.maxX||0,i=Math.floor((n-t)/e)*e;let l;this.props.type==="histogram"||this.props.type==="dotplot"?l=r.range(0,i+e,e):l=r.range(e,i+e,e),l=r.map(l,m=>m+t),l=r.map(l,ft),this.changeCategories(l);const c=Oe.findDOMNode(this.refs.categories);c.value=l.join(", ")},this.serialize=()=>{const e=r.pick(this.props,"correct","starting","type","labels","categories","scaleY","maxY","snapsPerLine","labelInterval");return this.props.type==="pic"&&(e.picUrl=this.props.picUrl),e}}UNSAFE_componentWillMount(){this.fetchPic(this.props.picUrl)}UNSAFE_componentWillReceiveProps(e){this.fetchPic(e.picUrl),e.static&&this.setState({editing:"starting"})}render(){const e=r.contains(["line","histogram","dotplot"],this.props.type),t=!r.contains(["pic","dotplot"],this.props.type),n={trackInteraction:()=>{},...this.props};return a("div",{className:"perseus-widget-plotter-editor",children:[a("div",{children:["Chart type:"," ",zt.map(i=>a("label",{children:[s("input",{type:"radio",name:"chart-type",checked:this.props.type===i,onChange:r.partial(this.changeType,i)}),i]},i),this)]}),a("div",{children:["Labels:"," ",["x","y"].map((i,l)=>a("label",{children:[i+":",s("input",{type:"text",onChange:r.partial(this.changeLabel,l),defaultValue:this.props.labels[l]})]},i),this)]}),e&&a("div",{className:"set-from-scale-box",children:[s("span",{className:"categories-title",children:"Set Categories From Scale"}),a("div",{children:[a("label",{children:["Tick Step:"," ",s(mt,{placeholder:1,useArrowKeys:!0,value:this.state.tickStep,onChange:this.handleChangeTickStep})]}),s(x,{children:s("p",{children:"The difference between adjacent ticks."})})]}),s("div",{children:a("label",{children:["Range:"," ",s(Ys,{placeholder:[0,10],useArrowKeys:!0,value:[this.state.minX,this.state.maxX],onChange:this.handleChangeRange})]})}),s("div",{children:a("button",{onClick:this.setCategoriesFromScale,children:["Set Categories"," "]})})]}),a("div",{children:[a("label",{children:["Label Interval:"," ",s(mt,{useArrowKeys:!0,value:this.props.labelInterval,onChange:this.changeLabelInterval})]}),s(x,{children:s("p",{children:'Which ticks to display the labels for. For instance, setting this to "4" will only show every 4th label (plus the last one)'})})]}),this.props.type==="pic"&&a("div",{children:[a("label",{children:["Picture:"," ",s(v,{className:"pic-url",value:this.props.picUrl,onChange:this.changePicUrl}),s(x,{children:s("p",{children:'Use the default picture of Earth, or insert the URL for a different picture using the "Add image" function.'})})]}),this.state.pic&&this.state.pic.width!==this.state.pic.height&&a("p",{className:"warning",children:[s("b",{children:"Warning"}),": You are using a picture which is not square. This means the image will get distorted. You should probably crop it to be square."]})]}),s("div",{children:a("label",{children:["Categories:"," ",s(Xs,{ref:"categories",layout:"horizontal",options:this.props.categories,onChange:this.changeCategories})]})}),s("div",{children:a("label",{children:["Scale (y):"," ",s("input",{type:"text",onChange:this.changeScale,defaultValue:this.props.scaleY})]})}),s("div",{children:a("label",{children:["Max y:"," ",s("input",{type:"text",ref:"maxY",onChange:this.changeMax,defaultValue:this.props.maxY})]})}),t&&a("div",{children:[a("label",{children:["Snaps per line:"," ",s("input",{type:"text",onChange:this.changeSnaps,defaultValue:this.props.snapsPerLine})]}),s(x,{children:s("p",{children:"Creates the specified number of divisions between the horizontal lines. Fewer snaps between lines makes the graph easier for the student to create correctly."})})]}),a("div",{children:["Editing values:"," ",Qs.map(i=>a("label",{children:[s("input",{type:"radio",disabled:i===We&&this.props.static,checked:this.props.static?i===Ee:this.state.editing===i,onChange:l=>this.changeEditing(i)}),i]},i)),a(x,{children:[s("p",{children:"Use this toggle to switch between editing the correct answer (what the student will be graded on) and the starting values (what the student will see plotted when they start the problem). Note: These cannot be the same."}),s("p",{children:"In static mode, the starting values are rendered out to the displayed widget."})]})]}),s(Zs,{...n,starting:this.props[this.state.editing],onChange:this.handlePlotterChange})]})}};Ie.widgetName="plotter",Ie.defaultProps={...J,correct:[1],starting:[1],type:"bar",labels:["",""],categories:[""],picSize:30,picBoxHeight:36,plotDimensions:[275,200],labelInterval:1,get picUrl(){const e=kt().staticUrl;return e?e("/images/badges/earth-small.png"):null}};let ge=Ie;ge.__docgenInfo={description:"",methods:[{name:"fetchPic",docblock:null,modifiers:[],params:[{name:"url",optional:!1,type:null}],returns:null},{name:"handleChangeTickStep",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null}],returns:null},{name:"handleChangeRange",docblock:null,modifiers:[],params:[{name:"newValue",optional:!1,type:null}],returns:null},{name:"changeLabelInterval",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null}],returns:null},{name:"handlePlotterChange",docblock:null,modifiers:[],params:[{name:"newProps",optional:!1,type:null}],returns:null},{name:"changeType",docblock:null,modifiers:[],params:[{name:"type",optional:!1,type:null}],returns:null},{name:"changeLabel",docblock:null,modifiers:[],params:[{name:"i",optional:!1,type:null},{name:"e",optional:!1,type:null}],returns:null},{name:"changePicUrl",docblock:null,modifiers:[],params:[{name:"value",optional:!1,type:null}],returns:null},{name:"changeCategories",docblock:null,modifiers:[],params:[{name:"categories",optional:!1,type:null}],returns:null},{name:"changeScale",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"changeMax",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"changeSnaps",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"changeEditing",docblock:null,modifiers:[],params:[{name:"editing",optional:!1,type:null}],returns:null},{name:"setCategoriesFromScale",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"PlotterEditor",props:{type:{required:!1,tsType:{name:'PerseusPlotterWidgetOptions["type"]',raw:'PerseusPlotterWidgetOptions["type"]'},description:"",defaultValue:{value:'"bar"',computed:!1}},labels:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"Array<string>"},description:"",defaultValue:{value:'["", ""]',computed:!1}},categories:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"union",raw:"string | number",elements:[{name:"string"},{name:"number"}]}],raw:"ReadonlyArray<string | number>"},description:"",defaultValue:{value:'[""]',computed:!1}},scaleY:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},maxY:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"10",computed:!1}},snapsPerLine:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}},picSize:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"30",computed:!1}},picBoxHeight:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"36",computed:!1}},picUrl:{required:!0,tsType:{name:"string"},description:""},plotDimensions:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>"},description:"",defaultValue:{value:"[275, 200]",computed:!1}},labelInterval:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"1",computed:!1}},starting:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>"},description:"",defaultValue:{value:"[1]",computed:!1}},correct:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"number"}],raw:"ReadonlyArray<number>"},description:"",defaultValue:{value:"[1]",computed:!1}},static:{required:!0,tsType:{name:"boolean"},description:""},onChange:{required:!0,tsType:{name:"any"},description:""}}};class en extends p.Component{constructor(){super(...arguments),this.focus=()=>(this.refs.input.focus(),!0),this.changeValue=e=>{this.props.onChange(e.target.value)}}render(){return s("textarea",{ref:"input",value:this.props.value||"",onChange:this.changeValue})}}const W=class W extends p.Component{constructor(){super(...arguments),this.input=p.createRef(),this.change=(...e)=>h.apply(this,e),this.focus=()=>{var e;return(e=this.input.current)==null||e.focus(),!0},this.serialize=()=>g.serialize.call(this)}render(){return s("div",{children:a("label",{children:[s("div",{children:"Simple markdown contents:"}),s("div",{children:s(en,{value:this.props.value,onChange:this.change("value"),ref:this.input})})]})})}};W.propTypes={...d},W.widgetName="simple-markdown-tester",W.defaultProps={value:""};let fe=W;fe.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"focus",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"SimpleMarkdownTesterEditor",props:{value:{defaultValue:{value:'""',computed:!1},required:!1}},composes:["@khanacademy/perseus"]};const{InfoTip:tn,NumberInput:yt}=f,sn=Lt.widget,_=class _ extends p.Component{constructor(){super(...arguments),this.numberOfColumns=p.createRef(),this.focus=()=>{var e;(e=this.numberOfColumns.current)==null||e.focus()},this.onSizeInput=(e,t)=>{let n=+e||0,i=+t||0;n=Math.min(Math.max(1,n),30),i=Math.min(Math.max(1,i),6);const l=this.props.columns,c=this.props.rows,m=this.props.answers;n<=c?m.length=n:r(n-c).times(function(){m.push(Q.stringArrayOfSize(l))});function y(T){i<=l?T.length=i:r(i-l).times(function(){T.push("")})}const j=this.props.headers;y(j),r.each(m,y),this.props.onChange({rows:n,columns:i,answers:m,headers:j})},this.serialize=()=>{const e=r.pick(this.props,"headers","rows","columns");return r.extend({},e,{answers:r.map(this.props.answers,r.clone)})}}render(){const e=r.pick(this.props,"headers","answers","onChange","apiOptions");return r.extend(e,{editableHeaders:!0,Editor:b,onFocus:()=>{},onBlur:()=>{},trackInteraction:()=>{}}),a("div",{children:[s("div",{className:"perseus-widget-row",children:a("label",{children:["Number of columns:"," ",s(yt,{ref:this.numberOfColumns,value:this.props.columns,onChange:t=>{t&&this.onSizeInput(this.props.rows,t)},useArrowKeys:!0})]})}),s("div",{className:"perseus-widget-row",children:a("label",{children:["Number of rows:"," ",s(yt,{ref:"numberOfRows",value:this.props.rows,onChange:t=>{t&&this.onSizeInput(t,this.props.columns)},useArrowKeys:!0})]})}),a("div",{children:[" ","Table of answers:"," ",s(tn,{children:s("p",{children:"The student has to fill out all cells in the table. For partially filled tables create a table using the template, and insert text input boxes as desired."})})]}),s("div",{children:s(sn,{...e})})]})}};_.propTypes={rows:o.number,columns:o.number,headers:o.arrayOf(o.string),answers:o.arrayOf(o.arrayOf(o.string))},_.widgetName="table",_.defaultProps=function(){const n=r(4).times(function(){return Q.stringArrayOfSize(1)});return{headers:[""],rows:4,columns:1,answers:n}}();let ye=_;ye.__docgenInfo={description:"",methods:[{name:"focus",docblock:null,modifiers:[],params:[],returns:null},{name:"onSizeInput",docblock:null,modifiers:[],params:[{name:"numRawRows",optional:!1,type:null},{name:"numRawColumns",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"TableEditor",props:{rows:{description:"",type:{name:"number"},required:!1},columns:{description:"",type:{name:"number"},required:!1},headers:{description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},answers:{description:"",type:{name:"arrayOf",value:{name:"arrayOf",value:{name:"string"}}},required:!1}}};const{InlineIcon:ve,NumberInput:nn}=f,{iconOk:Nt,iconRemove:qt}=Ke,Y="all",I="some",St=10,an=function(u,e){return Dt(u,e,-St,!1)},vt=function(u){return u.simplify().asMul().partition()[1].flatten().simplify()};class rn extends p.Component{constructor(){super(...arguments),this._checkValidity=({name:e,original:t,sigfigs:n})=>{const i=Me(e);let l="",c=!0;if(i.parsed&&t){const m=new fs("x"),{unit:y}=i,j=new ds(t,"=",new ms(m,y));try{const T=j.solveLinearEquationForVariable(m);l=an(T.eval(),n),c=gs(vt(t),vt(y)).equal}catch{c=!1}}else c=!1;this.setState({valid:c,solvedExample:l})}}UNSAFE_componentWillMount(){this._checkValidity(this.props)}UNSAFE_componentWillReceiveProps(e){this._checkValidity(e)}render(){let e;return this.state.valid?e=a("span",{children:[s("span",{className:"unit-example-okay",children:s(ve,{...Nt})}),this.state.solvedExample]}):e=s("span",{className:"unit-example-not-okay",children:s(ve,{...qt})}),a("div",{children:[e," ",this.props.name]})}}const H=class H extends p.Component{constructor(e){super(e),this.change=(...t)=>h.apply(this,t),this.handleAcceptingUnitsChange=t=>{const n=t.target.value.split(",").map(i=>i.trim()).filter(i=>i!=="");this.change({acceptingUnits:n})},this.handleSigfigChange=t=>{this.change({sigfigs:t})},this._checkSigfigValidity=t=>t>0&&t<=St,this._setAccepting=t=>{this.change({accepting:t})},this._doOriginal=t=>{const n=Me(t.value);this.parsed=!1,n.parsed&&n.type==="unitMagnitude"&&(this.original=n.expr,this.parsed=!0)},this.onChange=t=>{this.props.onChange({value:t.target.value})},this.getSaveWarnings=()=>{const{value:t,accepting:n,acceptingUnits:i}=this.props,l=[];return Me(t).parsed||l.push("Answer did not parse"),n===I&&i.length===0&&l.push("There are no accepted units"),l},this.serialize=()=>g.serialize.call(this),this.groupId=r.uniqueId("accepting"),this._doOriginal(e)}UNSAFE_componentWillReceiveProps(e){this._doOriginal(e)}render(){const{acceptingUnits:e=[],accepting:t}=this.props;let n=null;if(t===I){const i=e.map((l,c)=>s(rn,{name:l,original:this.original||null,sigfigs:this.props.sigfigs},c));n=a("div",{children:[s("input",{type:"text",defaultValue:e.join(", "),onChange:this.handleAcceptingUnitsChange})," ","(comma-separated)",i]})}return a("div",{className:"unit-editor",children:[a("div",{children:[s("input",{value:this.props.value,className:"unit-editor-canonical",onChange:this.onChange})," ",this.parsed?s("span",{className:"unit-example-okay",children:s(ve,{...Nt})}):s("span",{className:"unit-example-not-okay",children:s(ve,{...qt})})]}),a("div",{children:["Significant Figures:"," ",s(nn,{value:this.props.sigfigs,onChange:this.handleSigfigChange,checkValidity:this._checkSigfigValidity,useArrowKeys:!0})]}),a("div",{children:[a("label",{children:[s("input",{type:"radio",name:this.groupId,onChange:()=>this._setAccepting(Y),checked:this.props.accepting===Y})," Any equivalent unit "]}),a("label",{children:[s("input",{type:"radio",name:this.groupId,onChange:()=>this._setAccepting(I),checked:this.props.accepting===I})," Only these units "]})]}),n]})}};H.propTypes={...d,value:o.string,acceptingUnits:o.arrayOf(o.string),accepting:o.oneOf([Y,I]),sigfigs:o.number},H.widgetName="unit-input",H.defaultProps={value:"5x10^5 kg m / s^2",accepting:Y,sigfigs:3};let be=H;be.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"handleAcceptingUnitsChange",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"handleSigfigChange",docblock:null,modifiers:[],params:[{name:"sigfigs",optional:!1,type:null}],returns:null},{name:"_checkSigfigValidity",docblock:null,modifiers:[],params:[{name:"sigfigs",optional:!1,type:null}],returns:null},{name:"_setAccepting",docblock:null,modifiers:[],params:[{name:"val",optional:!1,type:null}],returns:null},{name:"_doOriginal",docblock:null,modifiers:[],params:[{name:"props",optional:!1,type:null}],returns:null},{name:"onChange",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"UnitInputEditor",props:{value:{defaultValue:{value:'"5x10^5 kg m / s^2"',computed:!1},description:"",type:{name:"string"},required:!1},accepting:{defaultValue:{value:'"all"',computed:!1},description:"",type:{name:"enum",value:[{value:'"all"',computed:!1},{value:'"some"',computed:!1}]},required:!1},sigfigs:{defaultValue:{value:"3",computed:!1},description:"",type:{name:"number"},required:!1},acceptingUnits:{description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1}},composes:["@khanacademy/perseus"]};const{InfoTip:on}=f,ln=/khanacademy\.org\/.*\/v\/(.*)$/;function pn(u){const e=ln.exec(u);return e?e[1]:u}const $=class $ extends p.Component{constructor(){super(...arguments),this._handleUrlChange=e=>{this.props.onChange({location:pn(e)})},this.change=(...e)=>h.apply(this,e),this.serialize=()=>g.serialize.call(this)}render(){return s("div",{children:a("label",{children:["KA Video Slug:"," ",s(v,{value:this.props.location,style:{width:290},onChange:this._handleUrlChange}),s(on,{children:"KA video URLs will be converted to just the slug."})]})})}};$.propTypes={...d,location:o.string,onChange:o.func},$.widgetName="video",$.defaultProps={location:""};let we=$;we.__docgenInfo={description:"This is the main editor for this widget, to specify all the options.",methods:[{name:"_handleUrlChange",docblock:null,modifiers:[],params:[{name:"url",optional:!1,type:null}],returns:null},{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"VideoEditor",props:{location:{defaultValue:{value:'""',computed:!1},description:"",type:{name:"string"},required:!1},onChange:{description:"",type:{name:"func"},required:!1}},composes:["@khanacademy/perseus"]};const un=[Jt,ee,Xt,Zt,se,ne,Qt,es,w,ae,ie,re,oe,ss,ns,as,is,rs,os,le,pe,ue,ls,ps,he,ce,de,me,ge,us,fe,cs,ye,be,we,hs,te];class hn extends p.Component{constructor(){super(...arguments),this.input=p.createRef(),this.focus=()=>{var e;return(e=this.input.current)==null||e.focus(),!0},this.changeValue=e=>{this.props.onChange(e.target.value)}}render(){return s("input",{ref:this.input,value:this.props.value||"",onChange:this.changeValue})}}const Ne=class Ne extends p.Component{constructor(){super(...arguments),this.input=p.createRef(),this.change=(...e)=>h.apply(this,e),this.getUserInput=()=>this.props.value,this.focus=()=>{var e;return(e=this.input.current)==null||e.focus(),!0},this.simpleValidate=e=>Ne.validate(this.getUserInput(),e)}static validate(e,t){return e===""?{type:"invalid",message:"It looks like you haven't answered all of the question yet."}:e===t.correct?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}}render(){return s(hn,{ref:this.input,value:this.props.value,onChange:this.change("value")})}};Ne.defaultProps={value:""};let _e=Ne;const cn={name:"example-widget",displayName:"Example Widget",defaultAlignment:"inline-block",hidden:!0,widget:_e},dn=wt.parse,mn=wt.basicOutput,qe=class qe extends p.Component{constructor(){super(...arguments),this.change=(...e)=>h.apply(this,e),this.toJSON=()=>({}),this.focus=()=>(this.refs.input.focus(),!0),this.simpleValidate=e=>qe.validate(this.toJSON(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){const e=dn(this.props.value),t=mn(e);return s("div",{children:t})}};qe.defaultProps={value:""};let He=qe;const gn={name:"simple-markdown-tester",displayName:"Simple Markdown Tester",hidden:!0,widget:He,transform:r.identity},fn=[It,cn,gn],yn=[...Mt,...fn],Pa=()=>{Wt(yn),_t(un),Ht(),$t()},vn=Kt({displayName:"JsonEditor",getInitialState:function(){return{currentValue:JSON.stringify(this.props.value,null,4),valid:!0}},UNSAFE_componentWillReceiveProps:function(u){(!this.state.valid||!r.isEqual(u.value,JSON.parse(this.state.currentValue)))&&this.setState(this.getInitialState())},render:function(){const u="perseus-json-editor "+(this.state.valid?"valid":"invalid");return s("textarea",{className:u,value:this.state.currentValue,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur})},handleKeyDown:function(u){if(u.key==="Tab"){const e=u.target.selectionStart,t=u.target.value,n=t.substring(0,e),i=t.substring(e,t.length);u.target.value=n+"    "+i,u.target.selectionStart=n.length+4,u.target.selectionEnd=n.length+4,u.preventDefault(),this.handleChange(u)}},handleChange:function(u){const e=u.target.value;try{let t=JSON.parse(e);r.isString(t)&&(t=JSON.parse(t)),this.setState({currentValue:e,valid:!0},function(){this.props.onChange(t)})}catch{this.setState({currentValue:e,valid:!1})}},handleBlur:function(u){const e=u.target.value;try{let t=JSON.parse(e);r.isString(t)&&(t=JSON.parse(t)),this.setState({currentValue:JSON.stringify(t,null,4),valid:!0},function(){this.props.onChange(t)})}catch{this.setState({currentValue:JSON.stringify(this.props.value,null,4),valid:!0})}}});let bt=0;const $e={},Be={};window.iframeDataStore={};window.addEventListener("message",u=>{if(typeof u.data=="string"){const e=$e[u.data];e&&e()}else u.data.id&&(u.data.height!==void 0?Be[u.data.id](u.data.height):u.data.lintWarnings&&Ct.log("LINTER REPORT",{lintWarnings:JSON.stringify(u.data.lintWarnings)}))});class Ge extends p.Component{constructor(){super(...arguments),this.container=p.createRef()}componentDidMount(){this._isMounted=!0,this.iframeID=bt,bt++,this._prepareFrame(),$e[this.iframeID]=()=>{this.sendNewData(this._lastData)},Be[this.iframeID]=e=>{this._lastHeight=e,this._isMounted&&this.props.seamless&&this.container.current&&(this.container.current.style.height=e+"px")}}shouldComponentUpdate(e){return e.datasetValue!==this.props.datasetValue||e.seamless!==this.props.seamless}componentDidUpdate(e){this.container.current&&(this.props.seamless?this.container.current.style.height=this._lastHeight+"px":this.container.current.style.height="100%"),e.datasetValue!==this.props.datasetValue&&this._prepareFrame()}componentWillUnmount(){$e[this.iframeID]=null,Be[this.iframeID]=null,this._isMounted=!1}_prepareFrame(){var t,n;this._frame&&((t=this.container.current)==null||t.removeChild(this._frame));const e=document.createElement("iframe");e.style.width="100%",e.style.height="100%",e.src=this.props.url,this.props.datasetKey&&(e.dataset[this.props.datasetKey]=this.props.datasetValue),e.dataset.id=String(this.iframeID),this.props.seamless&&(e.dataset.lintGutter="true"),(n=this.container.current)==null||n.appendChild(e),this._frame=e}sendNewData(e){const t=this._frame;this._isMounted&&e&&(t!=null&&t.contentWindow)&&(this._lastData=e,window.iframeDataStore[this.iframeID]=e,t.contentWindow.postMessage(this.iframeID,"*"))}render(){return s("div",{ref:this.container,style:{width:"100%",height:"100%"}})}}Ge.__docgenInfo={description:"",methods:[{name:"_prepareFrame",docblock:null,modifiers:[],params:[],returns:null},{name:"sendNewData",docblock:null,modifiers:[],params:[{name:"data",optional:!1,type:{name:"any"}}],returns:null}],displayName:"IframeContentRenderer",props:{url:{required:!0,tsType:{name:"string"},description:""},datasetKey:{required:!0,tsType:{name:"string"},description:""},datasetValue:{required:!0,tsType:{name:"any"},description:""},seamless:{required:!0,tsType:{name:"boolean"},description:""}}};const{InfoTip:bn,InlineIcon:Z}=f,{iconCircleArrowDown:wn,iconCircleArrowUp:Cn,iconPlus:kn,iconTrash:Tn}=Ke,Xe=class Xe extends p.Component{constructor(){super(...arguments),this.editor=p.createRef(),this.handleChange=e=>{this.props.onChange({replace:e.target.checked})},this.focus=()=>{var e;(e=this.editor.current)==null||e.focus()},this.getSaveWarnings=()=>{var e;return(e=this.editor.current)==null?void 0:e.getSaveWarnings()},this.serialize=e=>{var t;return(t=this.editor.current)==null?void 0:t.serialize(e)}}render(){return a("div",{className:"perseus-hint-editor "+this.props.className,children:[this.props.showTitle&&s("div",{className:"pod-title",children:"Hint"}),s(b,{ref:this.editor,apiOptions:this.props.apiOptions,widgets:this.props.widgets||void 0,content:this.props.content||void 0,images:this.props.images,replace:this.props.replace,placeholder:"Type your hint here...",imageUploader:this.props.imageUploader,onChange:this.props.onChange},this.props.itemId),a("div",{className:"hint-controls-container clearfix",children:[this.props.showMoveButtons&&a("span",{className:"reorder-hints",children:[s("button",{type:"button",className:this.props.isLast?"hidden":"",onClick:r.partial(this.props.onMove,1),children:s(Z,{...wn})})," ",s("button",{type:"button",className:this.props.isFirst?"hidden":"",onClick:r.partial(this.props.onMove,-1),children:s(Z,{...Cn})})," ",this.props.isLast&&s(bn,{children:s("p",{children:"The last hint is automatically bolded."})})]}),s("input",{type:"checkbox",checked:this.props.replace,onChange:this.handleChange}),"Replace previous hint",this.props.showRemoveButton&&a("button",{type:"button",className:"remove-hint simple-button orange",onClick:this.props.onRemove,children:[s(Z,{...Tn}),"Remove this hint"," "]})]})]})}};Xe.defaultProps={className:"",content:"",replace:!1,showMoveButtons:!0,showTitle:!0,showRemoveButton:!0};let B=Xe;const Ze=class Ze extends p.Component{constructor(){super(...arguments),this.editor=p.createRef(),this.frame=p.createRef(),this.updatePreview=()=>{var t;const e=this.props.isLast&&!/\*\*/.test(this.props.hint.content);(t=this.frame.current)==null||t.sendNewData({type:"hint",data:{hint:this.props.hint,bold:e,pos:this.props.pos,apiOptions:this.props.apiOptions,linterContext:{contentType:"hint",highlightLint:this.props.highlightLint,paths:this.props.contentPaths}}})},this.getSaveWarnings=()=>{var e;return(e=this.editor.current)==null?void 0:e.getSaveWarnings()},this.serialize=e=>{var t;return(t=this.editor.current)==null?void 0:t.serialize(e)},this.focus=()=>{var e;(e=this.editor.current)==null||e.focus()}}componentDidMount(){this.updatePreview()}componentDidUpdate(){this.updatePreview()}render(){const e=this.props.deviceType==="phone"||this.props.deviceType==="tablet";return a("div",{className:"perseus-combined-hint-editor perseus-editor-row",children:[s("div",{className:"perseus-editor-left-cell",children:s(B,{ref:this.editor,itemId:this.props.itemId,isFirst:this.props.isFirst,isLast:this.props.isLast,widgets:this.props.hint.widgets,content:this.props.hint.content,images:this.props.hint.images,replace:this.props.hint.replace,imageUploader:this.props.imageUploader,onChange:this.props.onChange,onRemove:this.props.onRemove,onMove:this.props.onMove,apiOptions:this.props.apiOptions})}),s("div",{className:"perseus-editor-right-cell",children:s(Tt,{deviceType:this.props.deviceType,nochrome:!0,children:s(Ge,{ref:this.frame,datasetKey:"mobile",datasetValue:e,seamless:!0,url:this.props.previewURL})})})]})}};Ze.defaultProps={highlightLint:!1};let Fe=Ze;const Se=class Se extends p.Component{constructor(){super(...arguments),this.handleHintChange=(e,t,n,i)=>{const l=r(this.props.hints).clone();l[e]=r.extend({},this.serializeHint(e,{keepDeletedWidgets:!0}),t),this.props.onChange({hints:l},n,i)},this.handleHintRemove=e=>{if(!confirm("Are you sure you want to delete this hint?"))return;const t=r(this.props.hints).clone();t.splice(e,1),this.props.onChange({hints:t})},this.handleHintMove=(e,t)=>{const n=r(this.props.hints).clone(),i=n.splice(e,1)[0];n.splice(e+t,0,i),this.props.onChange({hints:n},()=>{this.refs["hintEditor"+(e+t)].focus()})},this.addHint=()=>{const e=r(this.props.hints).clone().concat([{content:""}]);this.props.onChange({hints:e},()=>{const t=e.length-1;this.refs["hintEditor"+t].focus()})},this.getSaveWarnings=()=>r.chain(this.props.hints).map((e,t)=>r.map(this.refs["hintEditor"+t].getSaveWarnings(),n=>"Hint "+(t+1)+": "+n)).flatten(!0).value(),this.serialize=e=>this.props.hints.map((t,n)=>this.serializeHint(n,e)),this.serializeHint=(e,t)=>this.refs["hintEditor"+e].serialize(t)}render(){const{itemId:e,hints:t}=this.props,n=r.map(t,function(i,l){return s(Fe,{ref:"hintEditor"+l,isFirst:l===0,isLast:l+1===t.length,itemId:e,hint:i,pos:l,imageUploader:this.props.imageUploader,onChange:this.handleHintChange.bind(this,l),onRemove:this.handleHintRemove.bind(this,l),onMove:this.handleHintMove.bind(this,l),deviceType:this.props.deviceType,apiOptions:this.props.apiOptions,highlightLint:this.props.highlightLint,previewURL:this.props.previewURL,contentPaths:[]},"hintEditor"+l)},this);return a("div",{className:"perseus-hints-editor perseus-editor-table",children:[n,s("div",{className:"perseus-editor-row",children:s("div",{className:"add-hint-container perseus-editor-left-cell",children:a("button",{type:"button",className:"add-hint simple-button orange",onClick:this.addHint,children:[s(Z,{...kn})," Add a hint"]})})})]})}};Se.HintEditor=B,Se.defaultProps={onChange:()=>{},hints:[],highlightLint:!1};let Ce=Se;B.__docgenInfo={description:"",methods:[{name:"handleChange",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}],alias:"React.ChangeEvent"}}],returns:null},{name:"focus",docblock:null,modifiers:[],params:[],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[{name:"options",optional:!1,type:{name:"any"}}],returns:null}],displayName:"HintEditor",props:{itemId:{required:!1,tsType:{name:"string"},description:""},apiOptions:{required:!1,tsType:{name:"APIOptions"},description:""},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},imageUploader:{required:!1,tsType:{name:"signature",type:"function",raw:`(
    file: string,
    callback: (url: string) => unknown,
) => unknown`,signature:{arguments:[{type:{name:"string"},name:"file"},{type:{name:"signature",type:"function",raw:"(url: string) => unknown",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"unknown"}}},name:"callback"}],return:{name:"unknown"}}},description:""},showMoveButtons:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showRemoveButton:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},showTitle:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},content:{required:!1,tsType:{name:"union",raw:"string | null | undefined",elements:[{name:"string"},{name:"null"},{name:"undefined"}]},description:"",defaultValue:{value:'""',computed:!1}},replace:{required:!1,tsType:{name:"union",raw:"boolean | null | undefined",elements:[{name:"boolean"},{name:"null"},{name:"undefined"}]},description:"",defaultValue:{value:"false",computed:!1}},widgets:{required:!1,tsType:{name:"union",raw:"WidgetDict | null | undefined",elements:[{name:"WidgetDict"},{name:"null"},{name:"undefined"}]},description:""},images:{required:!1,tsType:{name:"union",raw:"ImageDict | null | undefined",elements:[{name:"ImageDict"},{name:"null"},{name:"undefined"}]},description:""},isLast:{required:!0,tsType:{name:"boolean"},description:""},isFirst:{required:!0,tsType:{name:"boolean"},description:""},onMove:{required:!0,tsType:{name:"signature",type:"function",raw:"(direction: number) => unknown",signature:{arguments:[{type:{name:"number"},name:"direction"}],return:{name:"unknown"}}},description:""},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"() => unknown",signature:{arguments:[],return:{name:"unknown"}}},description:""},onChange:{required:!0,tsType:{name:"ChangeHandler"},description:""},__type:{required:!1,tsType:{name:"literal",value:'"hint"'},description:""}}};Ce.__docgenInfo={description:"",methods:[{name:"handleHintChange",docblock:null,modifiers:[],params:[{name:"i",optional:!1,type:{name:"number"}},{name:"newProps",optional:!1,type:{name:"signature",type:"object",raw:`{
    apiOptions?: APIOptions;
    deviceType: DeviceType;
    imageUploader?: ImageUploader;
    highlightLint?: boolean;
    hints: ReadonlyArray<Hint>;
    // URL of the route to show on initial load of the preview frames.
    previewURL: string;
    onChange: ChangeHandler;
    // The content ID of the AssessmentItem being edited. It may not be set
    // for non-content library exercise questions.
    itemId?: string;
}`,signature:{properties:[{key:"apiOptions",value:{name:"APIOptions",required:!1}},{key:"deviceType",value:{name:"DeviceType",required:!0}},{key:"imageUploader",value:{name:"signature",type:"function",raw:`(
    file: string,
    callback: (url: string) => unknown,
) => unknown`,signature:{arguments:[{type:{name:"string"},name:"file"},{type:{name:"signature",type:"function",raw:"(url: string) => unknown",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"unknown"}}},name:"callback"}],return:{name:"unknown"}},required:!1}},{key:"highlightLint",value:{name:"boolean",required:!1}},{key:"hints",value:{name:"ReadonlyArray",elements:[{name:"Hint"}],raw:"ReadonlyArray<Hint>",required:!0}},{key:"previewURL",value:{name:"string",required:!0}},{key:"onChange",value:{name:"ChangeHandler",required:!0}},{key:"itemId",value:{name:"string",required:!1}}]},alias:"CombinedHintsEditorProps"}},{name:"cb",optional:!1,type:{name:"signature",type:"function",raw:"() => unknown",signature:{arguments:[],return:{name:"unknown"}}}},{name:"silent",optional:!1,type:{name:"boolean"}}],returns:null},{name:"handleHintRemove",docblock:null,modifiers:[],params:[{name:"i",optional:!1,type:{name:"number"}}],returns:null},{name:"handleHintMove",docblock:null,modifiers:[],params:[{name:"i",optional:!1,type:{name:"number"}},{name:"dir",optional:!1,type:{name:"number"}}],returns:null},{name:"addHint",docblock:null,modifiers:[],params:[],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[{name:"options",optional:!1,type:{name:"any"}}],returns:null},{name:"serializeHint",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:{name:"number"}},{name:"options",optional:!1,type:{name:"any"}}],returns:{type:{name:"string"}}}],displayName:"CombinedHintsEditor",props:{apiOptions:{required:!1,tsType:{name:"APIOptions"},description:""},deviceType:{required:!0,tsType:{name:"DeviceType"},description:""},imageUploader:{required:!1,tsType:{name:"signature",type:"function",raw:`(
    file: string,
    callback: (url: string) => unknown,
) => unknown`,signature:{arguments:[{type:{name:"string"},name:"file"},{type:{name:"signature",type:"function",raw:"(url: string) => unknown",signature:{arguments:[{type:{name:"string"},name:"url"}],return:{name:"unknown"}}},name:"callback"}],return:{name:"unknown"}}},description:""},highlightLint:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},hints:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"Hint"}],raw:"ReadonlyArray<Hint>"},description:"",defaultValue:{value:"[]",computed:!1}},previewURL:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"ChangeHandler"},description:"",defaultValue:{value:"() => {}",computed:!1}},itemId:{required:!1,tsType:{name:"string"},description:""}}};const xn=Ft,Qe=class Qe extends p.Component{constructor(){super(...arguments),this.frame=p.createRef(),this.questionEditor=p.createRef(),this.itemExtrasEditor=p.createRef(),this.updateProps=(e,t,n)=>{const i=r(this.props).pick("question","answerArea");this.props.onChange(r(i).extend(e),t,n)},this.triggerPreviewUpdate=e=>{var t;(t=this.frame.current)==null||t.sendNewData(e)},this.handleEditorChange=(e,t,n)=>{const i=r.extend({},this.props.question,e);this.updateProps({question:i},t,n)},this.handleItemExtrasChange=(e,t,n)=>{const i=r.extend({},this.props.answerArea,e);this.updateProps({answerArea:i},t,n)},this.getSaveWarnings=()=>{var e;return(e=this.questionEditor.current)==null?void 0:e.getSaveWarnings()},this.serialize=e=>{var t,n;return{question:(t=this.questionEditor.current)==null?void 0:t.serialize(e),answerArea:(n=this.itemExtrasEditor.current)==null?void 0:n.serialize(),itemDataVersion:xn}}}render(){const e=this.props.deviceType==="phone"||this.props.deviceType==="tablet";return a("div",{className:"perseus-editor-table",children:[a("div",{className:"perseus-editor-row perseus-question-container",children:[a("div",{className:"perseus-editor-left-cell",children:[s("div",{className:"pod-title",children:"Question"}),s(b,{ref:this.questionEditor,placeholder:"Type your question here...",className:"perseus-question-editor",imageUploader:this.props.imageUploader,onChange:this.handleEditorChange,apiOptions:this.props.apiOptions,showWordCount:!0,...this.props.question},this.props.itemId)]}),s("div",{className:"perseus-editor-right-cell",children:a("div",{id:"problemarea",children:[s(Tt,{deviceType:this.props.deviceType,nochrome:!0,children:s(Ge,{ref:this.frame,datasetKey:"mobile",datasetValue:e,seamless:!0,url:this.props.previewURL},this.props.deviceType)}),s("div",{id:"hintsarea",className:"hintsarea",style:{display:"none"}})]})})]}),a("div",{className:"perseus-editor-row perseus-answer-container",children:[a("div",{className:"perseus-editor-left-cell",children:[s("div",{className:"pod-title",children:"Question extras"}),s(vs,{ref:this.itemExtrasEditor,onChange:this.handleItemExtrasChange,...this.props.answerArea})]}),s("div",{className:"perseus-editor-right-cell",children:s("div",{id:"answer_area"})})]})]})}};Qe.defaultProps={onChange:()=>{},question:{},answerArea:{}};let ke=Qe;ke.__docgenInfo={description:"",methods:[{name:"updateProps",docblock:null,modifiers:[],params:[{name:"newProps",optional:!1,type:null},{name:"cb",optional:!1,type:null},{name:"silent",optional:!1,type:null}],returns:null},{name:"triggerPreviewUpdate",docblock:null,modifiers:[],params:[{name:"newData",optional:!1,type:{name:"any"}}],returns:null},{name:"handleEditorChange",docblock:null,modifiers:[],params:[{name:"newProps",optional:!1,type:null},{name:"cb",optional:!1,type:null},{name:"silent",optional:!1,type:null}],returns:null},{name:"handleItemExtrasChange",docblock:null,modifiers:[],params:[{name:"newProps",optional:!1,type:null},{name:"cb",optional:!1,type:null},{name:"silent",optional:!1,type:null}],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[{name:"options",optional:!1,type:{name:"any"}}],returns:null}],displayName:"ItemEditor",props:{apiOptions:{required:!1,tsType:{name:"APIOptions"},description:""},deviceType:{required:!1,tsType:{name:"DeviceType"},description:""},gradeMessage:{required:!1,tsType:{name:"string"},description:""},imageUploader:{required:!1,tsType:{name:"ImageUploader"},description:""},wasAnswered:{required:!1,tsType:{name:"boolean"},description:""},question:{required:!1,tsType:{name:"any"},description:"",defaultValue:{value:"{}",computed:!1}},answerArea:{required:!1,tsType:{name:"any"},description:"",defaultValue:{value:"{}",computed:!1}},previewURL:{required:!0,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"ChangeHandler"},description:"",defaultValue:{value:"() => {}",computed:!1}},itemId:{required:!1,tsType:{name:"string"},description:""}}};const{HUD:In}=f,et=class et extends p.Component{constructor(e){super(e),this.itemEditor=p.createRef(),this.hintsEditor=p.createRef(),this.toggleJsonMode=()=>{this.setState({json:this.serialize({keepDeletedWidgets:!0})},()=>{this.props.onChange({jsonMode:!this.props.jsonMode})})},this.handleChange=(t,n,i)=>{const l=r(this.props).pick("question","hints","answerArea");r(l).extend(t),this.props.onChange(l,n,i)},this.changeJSON=t=>{this.setState({json:t}),this.props.onChange(t)},this.state={json:r.pick(this.props,"question","answerArea","hints","itemDataVersion"),gradeMessage:"",wasAnswered:!1,highlightLint:!0},this._isMounted=!1}componentDidMount(){this._isMounted=!0,this.updateRenderer()}componentDidUpdate(){setTimeout(()=>{this.updateRenderer()})}componentWillUnmount(){this._isMounted=!1}updateRenderer(){var i,l;const e=!this.props.developerMode||!this.props.jsonMode;if(!this._isMounted||!e)return;const t=this.props.previewDevice==="phone"||this.props.previewDevice==="tablet",n={...this.getApiOptions(),customKeypad:t,isMobile:t};(l=this.itemEditor.current)==null||l.triggerPreviewUpdate({type:"question",data:r({item:this.serialize(),apiOptions:n,initialHintsVisible:0,device:this.props.previewDevice,linterContext:{contentType:"exercise",highlightLint:this.state.highlightLint,paths:this.props.contentPaths||[]},reviewMode:!0,legacyPerseusLint:(i=this.itemEditor.current)==null?void 0:i.getSaveWarnings()}).extend(r(this.props).pick("workAreaSelector","solutionAreaSelector","hintsAreaSelector","problemNum"))})}getApiOptions(){return{...Ae.defaults,...this.props.apiOptions}}getSaveWarnings(){var n,i;const e=(n=this.itemEditor.current)==null?void 0:n.getSaveWarnings(),t=(i=this.hintsEditor.current)==null?void 0:i.getSaveWarnings();return e.concat(t)}serialize(e){var t,n;return this.props.jsonMode?this.state.json:r.extend((t=this.itemEditor.current)==null?void 0:t.serialize(e),{hints:(n=this.hintsEditor.current)==null?void 0:n.serialize(e)})}scorePreview(){return this.renderer?this.renderer.scoreInput():null}render(){let e="framework-perseus";const t=this.props.previewDevice==="phone"||this.props.previewDevice==="tablet",n={...this.getApiOptions(),customKeypad:t,isMobile:t};return n.isMobile&&(e+=" "+Bt.MOBILE),a("div",{id:"perseus",className:e,children:[a("div",{style:{marginBottom:10},children:[this.props.developerMode&&a("span",{children:[a("label",{children:[" ","Developer JSON Mode:"," ",s("input",{type:"checkbox",checked:this.props.jsonMode,onChange:this.toggleJsonMode})]})," "]}),!this.props.jsonMode&&s(ys,{deviceType:this.props.previewDevice,onViewportSizeChanged:this.props.onPreviewDeviceChange}),!this.props.jsonMode&&s(In,{message:"Style warnings",enabled:this.state.highlightLint,onClick:()=>{this.setState({highlightLint:!this.state.highlightLint})}})]}),this.props.developerMode&&this.props.jsonMode&&s("div",{children:s(vn,{multiLine:!0,value:this.state.json,onChange:this.changeJSON})}),(!this.props.developerMode||!this.props.jsonMode)&&s(ke,{ref:this.itemEditor,itemId:this.props.itemId,question:this.props.question,answerArea:this.props.answerArea,imageUploader:this.props.imageUploader,onChange:this.handleChange,wasAnswered:this.state.wasAnswered,gradeMessage:this.state.gradeMessage,deviceType:this.props.previewDevice,apiOptions:n,previewURL:this.props.previewURL}),(!this.props.developerMode||!this.props.jsonMode)&&s(Ce,{ref:this.hintsEditor,itemId:this.props.itemId,hints:this.props.hints,imageUploader:this.props.imageUploader,onChange:this.handleChange,deviceType:this.props.previewDevice,apiOptions:n,previewURL:this.props.previewURL,highlightLint:this.state.highlightLint})]})}};et.defaultProps={developerMode:!1,jsonMode:!1,onChange:()=>{}};let je=et;je.__docgenInfo={description:"",methods:[{name:"toggleJsonMode",docblock:null,modifiers:[],params:[],returns:null},{name:"updateRenderer",docblock:null,modifiers:[],params:[],returns:null},{name:"getApiOptions",docblock:null,modifiers:[],params:[],returns:{type:{name:"APIOptionsWithDefaults"}}},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:{type:{name:"any"}}},{name:"serialize",docblock:null,modifiers:[],params:[{name:"options",optional:!0,type:{name:"signature",type:"object",raw:"{keepDeletedWidgets?: boolean}",signature:{properties:[{key:"keepDeletedWidgets",value:{name:"boolean",required:!1}}]}}}],returns:{type:{name:"union",raw:"any | PerseusItem",elements:[{name:"any"},{name:"PerseusItem"}]}}},{name:"handleChange",docblock:null,modifiers:[],params:[{name:"toChange",optional:!1,type:null},{name:"cb",optional:!1,type:null},{name:"silent",optional:!1,type:null}],returns:null},{name:"changeJSON",docblock:null,modifiers:[],params:[{name:"newJson",optional:!1,type:{name:"PerseusItem",alias:"PerseusItem"}}],returns:null},{name:"scorePreview",docblock:null,modifiers:[],params:[],returns:{type:{name:"union",raw:"KEScore | null | undefined",elements:[{name:"KEScore"},{name:"null"},{name:"undefined"}]}}}],displayName:"EditorPage",props:{apiOptions:{required:!1,tsType:{name:"APIOptions"},description:""},answerArea:{required:!1,tsType:{name:"any"},description:""},contentPaths:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"string"}],raw:"ReadonlyArray<string>"},description:""},developerMode:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},frameSource:{required:!0,tsType:{name:"string"},description:""},hints:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"Hint"}],raw:"ReadonlyArray<Hint>"},description:""},imageUploader:{required:!1,tsType:{name:"ImageUploader"},description:""},itemDataVersion:{required:!1,tsType:{name:"Version"},description:""},itemId:{required:!0,tsType:{name:"string"},description:""},jsonMode:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onChange:{required:!1,tsType:{name:"ChangeHandler"},description:"",defaultValue:{value:"() => {}",computed:!1}},onPreviewDeviceChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(arg1: DeviceType) => unknown",signature:{arguments:[{type:{name:"DeviceType"},name:"arg1"}],return:{name:"unknown"}}},description:""},previewDevice:{required:!0,tsType:{name:"DeviceType"},description:""},question:{required:!1,tsType:{name:"any"},description:""},previewURL:{required:!0,tsType:{name:"string"},description:""}}};export{yn as A,je as E,B as H,Ge as I,vn as J,un as a,Pa as r};
