import{j as d,a as w,F as Fr}from"./jsx-runtime-BGVbfQ2Z.js";import{p as st}from"./compare-VLxlEkSV.js";import{_ as c}from"./index-default-4_ZsnO94.js";import{M as Or,k as Lr}from"./prop-types-ax1AYuB3.js";import"./key-translator--aXlYrr4.js";import"./index-WaOzG1Ar.js";import"./button-assets-K2ZoY3Yc.js";import{K as Vr}from"./enums-x5qaTru7.js";import{l as q,P as Bs,R as O,D as Dr,m as Bi,n as ut,o as F,J as qr,p as Hr}from"./renderer-Y-r37Tvv.js";import{V as D,a as zi,u as $i}from"./index-eZ2N530f.js";import{_ as v,g as zs,$ as he,d as rn,n as Ur}from"./index-V35CFGao.js";import{T as Gi,P as Wr,a as Br}from"./index-BH4Zx_EU.js";import{c as ce}from"./index-awCzqCwC.js";import{r as b,a as zr}from"./index-qhcEwEpg.js";import{M as $r}from"./math-input-HGKhnj9M.js";import{u as Yi,g as be,D as Gr}from"./dependencies-fnqF3NiV.js";import{L as ws,E as ke,P as it}from"./perseus-error-OpXxk17X.js";import{c as W,r as Yr,d as $s,p as dt,U as Kr}from"./unit-tpB2tohZ.js";import{A as G,C as ve}from"./perseus-api-Ly41NhN4.js";import{l as S}from"./index-awljIyHI.js";import{d as ht,K as ge,U as E,e as Ss,D as Xr,g as Gs,t as jr,r as Qr,b as Zr}from"./util-G-g1AweO.js";import{S as $}from"./index-SM3muJE2.js";import{I as Ki}from"./input-with-examples-Q1IyqHpU.js";import{S as gt}from"./simple-keypad-input-WECRmbnm.js";import{T as Xi}from"./math-output-o5-UebzW.js";import{B as Jr}from"./base-radio-ceh1uvp2.js";import{I as Pe}from"./inline-icon-MJBS_-2U.js";import{g as eo,h as to,j as no,k as so,l as ji,m as io}from"./icon-paths-fAaGW1jp.js";import{m as fe}from"./media-queries-4x-ifIrJ.js";import{s as Ys}from"./shared-cRfnFlyj.js";import{$ as R}from"./jquery-5v7aFUvu.js";import{P as m}from"./index-tvtfaFq4.js";import{u as ro,v as oo,k as Ks,n as le,s as ie,g as Pt,x as Qi,e as ao,i as lo}from"./constants-5iWyYZaE.js";import{C as on}from"./index-FNX3GwpG.js";import{C as B}from"./index-mdqImiHB.js";import{I as co,x as po}from"./index-ObSi-eBV.js";import{B as rt}from"./choice-wvBsaMTt.js";import{P as uo}from"./index-K7FSCCGN.js";import{L as ho,V as go}from"./video-transcript-link-7IHhb-72.js";import{L as fo,c as mo}from"./index-ouXaYoW-.js";import{O as Xs,S as yo,A as bo}from"./answer-choices-nCF4MMce.js";import{R as L,r as We}from"./index-E09jvG0x.js";import{a as V,r as vo,K as C,s as js,b as En,I as P,S as an,W as ot,c as xo,e as pe,d as bn,v as vn,g as Qs,f as Co,G as we,h as z,i as xn,j as Zs,k as wo,l as So,n as Js,p as ei,q as ti,t as Io,u as ni,w as ln}from"./svg-image-O4Zh6lWM.js";import{B as ko}from"./button-group-eBTrRsKy.js";import{c as Zi}from"./asset-context-pmjKTqqL.js";import{c as ft,g as Po}from"./_commonjsHelpers-4gQjN7DL.js";import{G as Mo}from"./graph-HZ4jbR1b.js";import{t as N,m as To,c as _o,u as Eo,a as Ro,T as Ao}from"./Popper-FSPFYGkT.js";import{M as No}from"./marker-N3KCo3Mu.js";import{C as Fo}from"./index-iPN1eFIx.js";import{S as Rn,L as si}from"./sortable-JGhtlYWP.js";import{N as Mt}from"./number-input-fy1LqA4g.js";import{T as Oo}from"./text-input-dyr-RWux.js";import{c as Lo}from"./index-vV577VS-.js";import{I as Cn}from"./info-tip-8U9pfYW-.js";import{F as Vo}from"./fixed-to-responsive-X0KGwmEJ.js";const Do=["PLUS","MINUS","NEGATIVE","TIMES","DIVIDE","DECIMAL","PERIOD","PERCENT","CDOT","EQUAL","NEQ","GT","LT","GEQ","LEQ","FRAC_INCLUSIVE","FRAC_EXCLUSIVE","FRAC","EXP","EXP_2","EXP_3","SQRT","CUBE_ROOT","RADICAL","LEFT_PAREN","RIGHT_PAREN","LN","LOG","LOG_N","SIN","COS","TAN","PI","THETA","UP","RIGHT","DOWN","LEFT","BACKSPACE","DISMISS","JUMP_OUT_PARENTHESES","JUMP_OUT_EXPONENT","JUMP_OUT_BASE","JUMP_INTO_NUMERATOR","JUMP_OUT_NUMERATOR","JUMP_OUT_DENOMINATOR","NOOP","MANY","NUM_0","NUM_1","NUM_2","NUM_3","NUM_4","NUM_5","NUM_6","NUM_7","NUM_8","NUM_9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","PHI","NTHROOT3","POW","LOG_B"],cn=S.StyleSheet.create({srOnly:{border:0,clip:"rect(0,0,0,0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",width:1}}),ii=v("Oops!"),wn=v("Sorry, I don't understand that!"),qo={arctg:"arctan",cosec:"csc",cossec:"csc",cotg:"cot",ctg:"cot",sen:"sin",tg:"tan"},Ho=i=>i.replace(/\\operatorname{([a-z]+)}/g,(e,t)=>`\\${qo[t]??t} `),ri=i=>Ho(i),Uo=i=>i.nativeKeypadProxy!=null?"REACT_NATIVE_KEYPAD":"MATH_INPUT_KEYPAD_V2",Ge=class Ge extends b.Component{constructor(){super(...arguments),this._isMounted=!1,this.displayName="Expression",this.state={invalid:!1,showErrorTooltip:!1,showErrorStyle:!1},this.componentDidMount=()=>{document.addEventListener("mousedown",this._handleMouseDown),this._isMounted=!0},this.componentDidUpdate=e=>{(!c.isEqual(this.props.value,e.value)||!c.isEqual(this.props.functions,e.functions))&&(this.setState({invalid:!1,showErrorTooltip:!1,showErrorStyle:!1}),this.parse(this.props.value,this.props).parsed||this.props.apiOptions.onInputError(null,this.props.value,wn)!==!1&&this.setState({invalid:!0}))},this.componentWillUnmount=()=>{this._isMounted=!1},this._handleMouseDown=()=>{this._isMounted&&this.state.showErrorTooltip&&this.setState({showErrorTooltip:!1})},this.simpleValidate=({scoring:e,...t},n)=>{var r;const s=Ge.validate(this.getUserInput(),t,n||function(){});return e&&s.type!=="invalid"&&((r=this.props.analytics)==null||r.onAnalyticsEvent({type:"perseus:expression-evaluated",payload:{result:s.earned===s.total?"correct":"incorrect",virtualKeypadVersion:Uo(this.props.apiOptions)}})),s},this.getUserInput=()=>Ge.getUserInputFromProps(this.props),this.change=(...e)=>W.apply(this,e),this.parse=(e,t)=>{const n=c.pick(t||this.props,"functions");return c.extend(n,{decimal_separator:zs()}),st(ri(e),n)},this.changeAndTrack=(e,t)=>{this.change("value",e,t),this.props.trackInteraction()},this._handleFocus=()=>{var e;(e=this.props.analytics)==null||e.onAnalyticsEvent({type:"perseus:expression-focused",payload:null}),this.props.onFocus([])},this._handleBlur=()=>{this.props.onBlur([])},this.focus=()=>(this.props.apiOptions.customKeypad&&this.refs.input.focus(),!0),this.focusInputPath=e=>{this.refs.input.focus()},this.blurInputPath=e=>{this.refs.input.blur()},this.getInputPaths=()=>[[]],this.getGrammarTypeForPath=e=>"expression",this.setInputValue=(e,t,n)=>{this.props.onChange({value:t},n)}}static validate(e,t,n=function(){}){const s=c.clone(t);c.extend(s,{decimal_separator:zs()});const r=p=>{const h=st(p.value,t);return h.parsed?ht.expression.createValidatorFunctional(h.expr,c({}).extend(s,{simplify:p.simplify,form:p.form})):(ws.error("Unable to parse solution answer for expression",ke.InvalidInput,{loggedMetadata:{rubric:JSON.stringify(t)}}),null)};let o,a,u=!0,l;for(const p of t.answerForms||[]){const h=r(p);if(!h)continue;const g=h(e);if(g.correct){o=p,a=g.message||"";break}u=u&&g.empty,p.considered==="correct"&&g.ungraded&&!l&&(l=g)}return o?o.considered==="ungraded"?{type:"invalid",message:n(null,e,a)===!1?null:a}:{type:"points",earned:o.considered==="correct"?1:0,total:1,message:a}:l?{type:"invalid",message:l.message,suppressAlmostThere:l.suppressAlmostThere}:u?{type:"invalid",message:null}:{type:"points",earned:0,total:1}}static getUserInputFromProps(e){return ri(e.value)}static getOneCorrectAnswerFromRubric(e){const t=(e.answerForms||[]).filter(n=>n.considered==="correct");if(t.length!==0)return t[0].value}insert(e){this.refs.input.insert(e)}render(){var t;if(this.props.apiOptions.customKeypad)return d(Or,{ref:"input",value:this.props.value,keypadElement:this.props.keypadElement,onChange:this.changeAndTrack,onFocus:()=>{var n;(n=this.props.keypadElement)==null||n.configure(this.props.keypadConfiguration,()=>{this._isMounted&&this._handleFocus()})},onBlur:this._handleBlur});const e=ce({"perseus-widget-expression":!0,"show-error-tooltip":this.state.showErrorTooltip});return w("div",{className:e,onBlur:()=>this.state.invalid&&this.setState({showErrorTooltip:!0,showErrorStyle:!0}),onFocus:()=>this.setState({showErrorTooltip:!1}),children:[d(D,{style:cn.srOnly,role:"alert",children:this.state.showErrorTooltip&&ii+" "+wn}),d(Gi,{forceAnchorFocusivity:!1,opened:this.state.showErrorTooltip,title:ii,content:wn,children:d($r,{ref:"input",className:ve.INTERACTIVE,value:this.props.value,onChange:this.changeAndTrack,convertDotToTimes:this.props.times,buttonSets:this.props.buttonSets,onFocus:this._handleFocus,onBlur:this._handleBlur,hasError:this.state.showErrorStyle,extraKeys:(t=this.props.keypadConfiguration)==null?void 0:t.extraKeys,analytics:this.props.analytics??{onAnalyticsEvent:async()=>{}}})})]})}};Ge.defaultProps={value:"",times:!1,functions:[],buttonSets:["basic","trig","prealgebra","logarithms"],onFocus:()=>{},onBlur:()=>{},apiOptions:G.defaults,linterContext:q};let me=Ge;const Wo=i=>{const e=Vr.EXPRESSION,t={},n={};for(const a of i.answerForms){const u=st(a.value,i);if(u.parsed){const l=u.expr,p=f=>f==="pi"||f==="theta",h=f=>p(f)?f.toUpperCase():f,g=f=>Do.includes(f);for(const f of l.getVars()){const y=h(f);g(y)&&(t[y]=!0)}for(const f of l.getConsts()){const y=h(f);g(y)&&(n[y]=!0)}}}const s=Object.keys(t).sort(),r=Object.keys(n).sort();let o=[...s,...r];return o.length||(o=["PI"]),{keypadType:e,extraKeys:o,times:i.times}},Bo={1:i=>({times:i.times,buttonSets:i.buttonSets,functions:i.functions,buttonsVisible:i.buttonsVisible,answerForms:[{considered:"correct",form:i.form,simplify:i.simplify,value:i.value}]})},pn=b.forwardRef((i,e)=>{const t=Yi();return d(me,{ref:e,analytics:t.analytics,...i})});pn.validate=me.validate;pn.getUserInputFromProps=me.getUserInputFromProps;pn.getOneCorrectAnswerFromRubric=me.getOneCorrectAnswerFromRubric;const zo={name:"expression",displayName:"Expression / Equation",accessible:!0,defaultAlignment:"inline-block",widget:pn,transform:i=>{const{times:e,functions:t,buttonSets:n,buttonsVisible:s}=i;return{keypadConfiguration:Wo(i),times:e,functions:t,buttonSets:n,buttonsVisible:s}},version:{major:1,minor:0},propUpgrades:Bo,isLintable:!0};try{me.displayName="Expression",me.__docgenInfo={description:"",displayName:"Expression",props:{buttonSets:{defaultValue:{value:'["basic", "trig", "prealgebra", "logarithms"]'},description:"",name:"buttonSets",required:!1,type:{name:"LegacyButtonSets"}},buttonsVisible:{defaultValue:null,description:"",name:"buttonsVisible",required:!1,type:{name:"enum",value:[{value:'"always"'},{value:'"never"'},{value:'"focused"'}]}},functions:{defaultValue:{value:"[]"},description:"",name:"functions",required:!1,type:{name:"readonly string[]"}},times:{defaultValue:{value:"false"},description:"",name:"times",required:!1,type:{name:"boolean"}},keypadConfiguration:{defaultValue:null,description:"",name:"keypadConfiguration",required:!0,type:{name:"KeypadConfiguration"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},alignment:{defaultValue:null,description:"",name:"alignment",required:!0,type:{name:"string | null | undefined"}},static:{defaultValue:null,description:"",name:"static",required:!0,type:{name:"boolean | null | undefined"}},problemNum:{defaultValue:null,description:"",name:"problemNum",required:!0,type:{name:"number | null | undefined"}},apiOptions:{defaultValue:{value:`{
        isArticle: false,
        isMobile: false,
        onInputError: function () {},
        onFocusChange: function () {},
        GroupMetadataEditor: StubTagEditor,
        showAlignmentOptions: false,
        readOnly: false,
        groupAnnotator: function (): null {
            return null;
        },
        baseElements: {
            Link: (
                props: any,
            ): React.ReactElement<React.ComponentProps<"a">> => {
                return <a {...props} />;
            },
        },
        setDrawingAreaAvailable: function () {},
        useDraftEditor: false,
        canScrollPage: false,
        inModal: false,
        crossOutEnabled: false,
        editorChangeDelay: 0,
    } as APIOptionsWithDefaults`},description:"",name:"apiOptions",required:!1,type:{name:"Readonly<Readonly<{ isArticle?: boolean; onInputError?: ((widgetId: any, value: string, message?: string | null) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown..."}},keypadElement:{defaultValue:null,description:"",name:"keypadElement",required:!1,type:{name:"any"}},questionCompleted:{defaultValue:null,description:"",name:"questionCompleted",required:!1,type:{name:"boolean"}},onFocus:{defaultValue:{value:"() => {}"},description:"",name:"onFocus",required:!1,type:{name:"(blurPath: FocusPath) => void"}},onBlur:{defaultValue:{value:"() => {}"},description:"",name:"onBlur",required:!1,type:{name:"(blurPath: FocusPath) => void"}},findWidgets:{defaultValue:null,description:"",name:"findWidgets",required:!0,type:{name:"(arg1: FilterCriterion) => readonly any[]"}},reviewModeRubric:{defaultValue:null,description:"",name:"reviewModeRubric",required:!0,type:{name:"PerseusExpressionWidgetOptions"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"ChangeHandler"}},trackInteraction:{defaultValue:null,description:"",name:"trackInteraction",required:!0,type:{name:"(extraData?: Empty | undefined) => void"}},isLastUsedWidget:{defaultValue:null,description:"",name:"isLastUsedWidget",required:!0,type:{name:"boolean"}},linterContext:{defaultValue:{value:`{
    contentType: "",
    highlightLint: false,
    paths: [] as ReadonlyArray<any>,
    stack: [] as ReadonlyArray<any>,
}`},description:"",name:"linterContext",required:!1,type:{name:"LinterContextProps"}},containerSizeClass:{defaultValue:null,description:"",name:"containerSizeClass",required:!0,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'},{value:'"large"'},{value:'"xlarge"'}]}},analytics:{defaultValue:null,description:"",name:"analytics",required:!1,type:{name:"{ onAnalyticsEvent: AnalyticsEventHandlerFn; }"}},value:{defaultValue:{value:""},description:"",name:"value",required:!1,type:{name:"string"}}}}}catch{}const $o=Xi.parseTex,oi={number:{name:"Numbers",forms:"integer, decimal, proper, improper, mixed"},decimal:{name:"Decimals",forms:"decimal"},integer:{name:"Integers",forms:"integer"},rational:{name:"Fractions and mixed numbers",forms:"integer, proper, improper, mixed"},improper:{name:"Improper numbers (no mixed)",forms:"integer, proper, improper"},mixed:{name:"Mixed numbers (no improper)",forms:"integer, proper, mixed"},percent:{name:"Numbers or percents",forms:"integer, decimal, proper, improper, mixed, percent"},pi:{name:"Numbers with pi",forms:"pi"}},Go={integer:function(i){return v("an integer, like $6$")},proper:function(i){return i.simplify==="optional"?v("a *proper* fraction, like $1/2$ or $6/10$"):v("a *simplified proper* fraction, like $3/5$")},improper:function(i){return i.simplify==="optional"?v("an *improper* fraction, like $10/7$ or $14/8$"):v("a *simplified improper* fraction, like $7/4$")},mixed:function(i){return v("a mixed number, like $1\\ 3/4$")},decimal:function(i){return v("an *exact* decimal, like $0.75$")},percent:function(i){return v("a percent, like $12.34\\%$")},pi:function(i){return v("a multiple of pi, like $12\\ \\text{pi}$ or $2/3\\ \\text{pi}$")}},Ye=class Ye extends b.Component{constructor(){super(...arguments),this.shouldShowExamples=()=>this.props.answerType!=="number",this.handleChange=(e,t)=>{this.props.onChange({currentValue:e},t)},this._handleFocus=()=>{this.props.onFocus([])},this._handleBlur=()=>{this.props.onBlur([])},this.focus=()=>(this.refs.input.focus(),!0),this.focusInputPath=e=>{this.refs.input.focus()},this.blurInputPath=e=>{this.refs.input.blur()},this.getInputPaths=()=>[[]],this.getGrammarTypeForPath=e=>"number",this.setInputValue=(e,t,n)=>{this.props.onChange({currentValue:t},n)},this.getUserInput=()=>Ye.getUserInputFromProps(this.props),this.simpleValidate=(e,t)=>(t=t||function(){},Ye.validate(this.getUserInput(),e,t)),this.examples=()=>{const e=this.props.answerType,t=oi[e].forms.split(/\s*,\s*/),n=c.map(t,function(s){return Go[s](this.props)},this);return[v("**Your answer should be** ")].concat(n)}}render(){if(this.props.apiOptions.customKeypad){const n=d(gt,{ref:"input",value:this.props.currentValue,keypadElement:this.props.keypadElement,onChange:this.handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur});return this.props.rightAlign?d("div",{className:"perseus-input-right-align",children:n}):n}const e=this.props.reviewModeRubric,t=[De.default,this.props.size==="small"?De.small:null,this.props.rightAlign?De.rightAlign:De.leftAlign];return e&&!this.props.currentValue&&t.push(De.answerStateUnanswered),d(Ki,{ref:"input",value:this.props.currentValue,onChange:this.handleChange,style:t,type:"text",examples:this.examples(),shouldShowExamples:this.shouldShowExamples(),onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,disabled:this.props.apiOptions.readOnly,linterContext:this.props.linterContext})}static validate(e,t,n=()=>{}){t.answerType==null&&(t.answerType="number");const s=`${t.value}`,r=ht.number.createValidatorFunctional(s,{simplify:t.simplify,inexact:t.inexact||void 0,maxError:t.maxError,forms:oi[t.answerType].forms}),o=$o(e.currentValue),a=r(o);return a.empty?{type:"invalid",message:(n==null?void 0:n(null,e.currentValue,a.message))===!1?null:a.message}:{type:"points",earned:a.correct?1:0,total:1,message:a.message}}static getUserInputFromProps(e){return{currentValue:e.currentValue}}static getOneCorrectAnswerFromRubric(e){if(e.value==null)return;let t=String(e.value);return e.inexact&&e.maxError&&(t+=" ± "+e.maxError),t}};Ye.defaultProps={currentValue:"",size:"normal",answerType:"number",rightAlign:!1,apiOptions:G.defaults,linterContext:q};let An=Ye;const De=S.StyleSheet.create({default:{width:80,height:"auto"},small:{width:40},leftAlign:{paddingLeft:$.xxxSmall_4,paddingRight:0},rightAlign:{textAlign:"right",paddingLeft:0,paddingRight:$.xxxSmall_4},answerStateUnanswered:{backgroundColor:"#eee",border:"solid 1px #999"}}),Yo=i=>{const{simplify:e,size:t,answerType:n,rightAlign:s}=i;return{simplify:e,size:t,answerType:n,rightAlign:s}},Ko={name:"input-number",displayName:"Input number (deprecated - use numeric input instead)",defaultAlignment:"inline-block",hidden:!0,widget:An,transform:Yo,isLintable:!0},Xo=Xi.parseTex,jo=[{title:"Integers",value:"integer",content:"6"},{title:"Decimals",value:"decimal",content:"0.75"},{title:"Proper fractions",value:"proper",content:"⅗"},{title:"Improper fractions",value:"improper",content:"⁷⁄₄"},{title:"Mixed numbers",value:"mixed",content:"1¾"},{title:"Numbers with π",value:"pi",content:"π"}],It={integer:()=>v("an integer, like $6$"),proper:i=>i.simplify==="optional"?v("a *proper* fraction, like $1/2$ or $6/10$"):v("a *simplified proper* fraction, like $3/5$"),improper:i=>i.simplify==="optional"?v("an *improper* fraction, like $10/7$ or $14/8$"):v("a *simplified improper* fraction, like $7/4$"),mixed:()=>v("a mixed number, like $1\\ 3/4$"),decimal:()=>v("an *exact* decimal, like $0.75$"),pi:()=>v("a multiple of pi, like $12\\ \\text{pi}$ or $2/3\\ \\text{pi}$")},Ke=class Ke extends b.Component{constructor(){super(...arguments),this.state={previousValues:[""]},this.examples=()=>{var n;const e=((n=this.props.answerForms)==null?void 0:n.length)!==0?this.props.answerForms:Object.keys(It).map(s=>({name:s,simplify:"required"}));let t=c.map(e,s=>It[s.name](s));return t=c.uniq(t),[v("**Your answer should be** ")].concat(t)},this.shouldShowExamples=()=>{var s,r;const e=((s=this.props.answerForms)==null?void 0:s.length)===0,n=c.uniq((r=this.props.answerForms)==null?void 0:r.map(o=>o.name)).length>=Object.keys(It).length;return!e&&!n},this.simpleValidate=e=>Ke.validate(this.getUserInput(),e),this.focus=()=>{var e;return(e=this.inputRef)==null||e.focus(),!0},this.focusInputPath=()=>{var e;(e=this.inputRef)==null||e.focus()},this.blurInputPath=()=>{var e;(e=this.inputRef)==null||e.blur()},this.getInputPaths=()=>[[]],this.getGrammarTypeForPath=e=>"number",this.setInputValue=(e,t,n)=>{this.props.onChange({currentValue:t},n)},this.getUserInput=()=>Ke.getUserInputFromProps(this.props),this.handleChange=(e,t)=>{this.props.onChange({currentValue:e},t),this.props.trackInteraction()},this._handleFocus=()=>{this.props.onFocus([])},this._handleBlur=()=>{this.props.onBlur([])}}static getUserInputFromProps(e){return{currentValue:e.currentValue}}static getOneCorrectAnswerFromRubric(e){const n=e.answers.filter(s=>s.status==="correct").map(s=>{let r="decimal";s.answerForms&&s.answerForms[0]&&(r=s.answerForms[0]);let o=ge.toNumericString(s.value,r);return s.maxError&&(o+=" ± "+ge.toNumericString(s.maxError,r)),o});if(n.length!==0)return n[0]}static validate(e,t){const n=jo.map(l=>l.value).filter(l=>l!=="pi"),s=l=>{const p=`${l.value}`,h=[...l.answerForms??[]];return(!l.strict||h.length===0)&&h.push(...n),ht.number.createValidatorFunctional(p,{message:l.message,simplify:l.status==="correct"?l.simplify:"optional",inexact:!0,maxError:l.maxError,forms:h})},r=Xo(e.currentValue),o=t.answers.filter(l=>l.status==="correct"),a=o.every(l=>Math.abs(l.value)<=1);let u=o.map(l=>{let p=r;return t.coefficient&&(p?p==="-"&&(p=-1):p=1),s(l)(ai(p,a))}).find(l=>l.correct||l.empty);if(!u){const p=[].concat(t.answers.filter(h=>h.status==="ungraded"),t.answers.filter(h=>h.status==="wrong")).find(h=>s(h)(ai(r,a)).correct);u={empty:p?p.status==="ungraded":!1,correct:p?p.status==="correct":!1,message:p?p.message:null,guess:r}}return u.empty?{type:"invalid",message:u.message}:{type:"points",earned:u.correct?1:0,total:1,message:u.message}}render(){let e=this.props.labelText;(e==null||e==="")&&(e=v("Your answer:"));const t=s=>this.props.rightAlign?d("div",{className:"perseus-input-right-align",children:s}):s;if(this.props.apiOptions.customKeypad)return t(d(gt,{ref:s=>this.inputRef=s,value:this.props.currentValue,keypadElement:this.props.keypadElement,onChange:this.handleChange,onFocus:this._handleFocus,onBlur:this._handleBlur}));const n=S.StyleSheet.create({input:{textAlign:this.props.rightAlign?"right":"left",width:this.props.size==="small"?40:80,padding:0,height:"auto"}});return d("div",{children:d(Ki,{ref:s=>this.inputRef=s,value:this.props.currentValue,onChange:this.handleChange,labelText:e,type:"text",examples:this.examples(),shouldShowExamples:this.shouldShowExamples(),onFocus:this._handleFocus,onBlur:this._handleBlur,id:this.props.widgetId,disabled:this.props.apiOptions.readOnly,style:n.input})})}};Ke.defaultProps={currentValue:"",size:"normal",rightAlign:!1,apiOptions:G.defaults,coefficient:!1,answerForms:[],labelText:"",linterContext:q};let at=Ke;const Nn=function(i){const e=function(r,o){return r.reduce((a,u)=>c.find(a,o.bind(null,u))?a:a.concat([u]),[])},t=i.flat(),n=e(t,c.isEqual),s=Object.keys(It);return c.sortBy(n,r=>s.indexOf(r.name))};function ai(i,e){if(!(typeof i=="string"&&i.endsWith("%")))return i;const t=parseFloat(i.slice(0,-1));return isNaN(t)?i:e?t/100:t}const Qo=function(i){return c.extend(c.omit(i,"answers"),{answerForms:Nn(i.answers.map(t=>c.map(t.answerForms,n=>({simplify:t.simplify,name:n}))))})},Zo={name:"numeric-input",displayName:"Numeric input",defaultAlignment:"inline-block",accessible:!0,widget:at,transform:Qo,isLintable:!0};try{at.displayName="NumericInput",at.__docgenInfo={description:"",displayName:"NumericInput",props:{answers:{defaultValue:null,description:"",name:"answers",required:!0,type:{name:"readonly PerseusNumericInputAnswer[]"}},labelText:{defaultValue:{value:""},description:"",name:"labelText",required:!1,type:{name:"string"}},size:{defaultValue:{value:"normal"},description:"",name:"size",required:!1,type:{name:"string"}},coefficient:{defaultValue:{value:"false"},description:"",name:"coefficient",required:!1,type:{name:"boolean"}},rightAlign:{defaultValue:{value:"false"},description:"",name:"rightAlign",required:!1,type:{name:"boolean"}},static:{defaultValue:null,description:"",name:"static",required:!0,type:{name:"boolean"}},answerForms:{defaultValue:{value:"[]"},description:"",name:"answerForms",required:!1,type:{name:"readonly PerseusNumericInputAnswerForm[]"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},alignment:{defaultValue:null,description:"",name:"alignment",required:!0,type:{name:"string | null | undefined"}},problemNum:{defaultValue:null,description:"",name:"problemNum",required:!0,type:{name:"number | null | undefined"}},apiOptions:{defaultValue:{value:`{
        isArticle: false,
        isMobile: false,
        onInputError: function () {},
        onFocusChange: function () {},
        GroupMetadataEditor: StubTagEditor,
        showAlignmentOptions: false,
        readOnly: false,
        groupAnnotator: function (): null {
            return null;
        },
        baseElements: {
            Link: (
                props: any,
            ): React.ReactElement<React.ComponentProps<"a">> => {
                return <a {...props} />;
            },
        },
        setDrawingAreaAvailable: function () {},
        useDraftEditor: false,
        canScrollPage: false,
        inModal: false,
        crossOutEnabled: false,
        editorChangeDelay: 0,
    } as APIOptionsWithDefaults`},description:"",name:"apiOptions",required:!1,type:{name:"Readonly<Readonly<{ isArticle?: boolean; onInputError?: ((widgetId: any, value: string, message?: string | null) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown..."}},keypadElement:{defaultValue:null,description:"",name:"keypadElement",required:!1,type:{name:"any"}},questionCompleted:{defaultValue:null,description:"",name:"questionCompleted",required:!1,type:{name:"boolean"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!0,type:{name:"(blurPath: FocusPath) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!0,type:{name:"(blurPath: FocusPath) => void"}},findWidgets:{defaultValue:null,description:"",name:"findWidgets",required:!0,type:{name:"(arg1: FilterCriterion) => readonly any[]"}},reviewModeRubric:{defaultValue:null,description:"",name:"reviewModeRubric",required:!0,type:{name:"PerseusNumericInputWidgetOptions"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"ChangeHandler"}},trackInteraction:{defaultValue:null,description:"",name:"trackInteraction",required:!0,type:{name:"(extraData?: Empty | undefined) => void"}},isLastUsedWidget:{defaultValue:null,description:"",name:"isLastUsedWidget",required:!0,type:{name:"boolean"}},linterContext:{defaultValue:{value:`{
    contentType: "",
    highlightLint: false,
    paths: [] as ReadonlyArray<any>,
    stack: [] as ReadonlyArray<any>,
}`},description:"",name:"linterContext",required:!1,type:{name:"LinterContextProps"}},containerSizeClass:{defaultValue:null,description:"",name:"containerSizeClass",required:!0,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'},{value:'"large"'},{value:'"xlarge"'}]}},currentValue:{defaultValue:{value:""},description:"",name:"currentValue",required:!1,type:{name:"string"}}}}}catch{}try{Nn.displayName="unionAnswerForms",Nn.__docgenInfo={description:"",displayName:"unionAnswerForms",props:{}}}catch{}const li="–",Ut=class Ut extends b.Component{constructor(){super(...arguments),this.displayName="PassageRef",this.state={lineRange:null,content:null},this.getUserInput=()=>Yr(this.props),this.change=(...e)=>W.apply(this,e),this._deferredUpdateRange=()=>{c.defer(this._updateRange)},this._updateRange=()=>{const e=this.props.findWidgets("passage "+this.props.passageNumber)[0];let t=null;e&&(t=e.getReference(this.props.referenceNumber)),this._isMounted&&(t?this.setState({lineRange:[t.startLine,t.endLine],content:t.content}):this.setState({lineRange:null,content:null}))},this.simpleValidate=e=>Ut.validate(this.getUserInput(),e)}shouldComponentUpdate(e,t){return!c.isEqual(this.props,e)||!c.isEqual(this.state,t)}render(){const e=this.state.lineRange;let t;e?e[0]===e[1]?t=he("line %(lineNumber)s",{lineNumber:e[0]}):t=he("lines %(lineRange)s",{lineRange:e[0]+li+e[1]}):t=he("lines %(lineRange)s",{lineRange:`?${li}?`});let n;if(this.props.summaryText){const s=Bs.parseInline(this.props.summaryText);n=w("span",{"aria-hidden":!0,children:[" ","(“",Bs.basicOutput(s),"”)"]})}else n=null;return w("span",{children:[t,n,e&&d("div",{className:"perseus-sr-only",children:this.state.content})]})}componentDidMount(){this._isMounted=!0,this._deferredUpdateRange(),this._throttledUpdateRange=c.throttle(this._deferredUpdateRange,500),window.addEventListener("resize",this._throttledUpdateRange)}componentDidUpdate(){this._deferredUpdateRange()}componentWillUnmount(){window.removeEventListener("resize",this._throttledUpdateRange),this._isMounted=!1}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}};Ut.defaultProps={passageNumber:1,referenceNumber:1,summaryText:""};let Fn=Ut;const Ji={name:"passage-ref",displayName:"PassageRef (SAT only)",defaultAlignment:"inline",widget:Fn,transform:i=>({passageNumber:i.passageNumber,referenceNumber:i.referenceNumber,summaryText:i.summaryText}),version:{major:0,minor:1}};var Ie;let On=(Ie=class extends b.Component{constructor(){super(...arguments),this._renderRenderer=(e="")=>{let t=1;const n={},s=e.replace(/\{\{passage-ref (\d+) (\d+)(?: "([^"]*)")?\}\}/g,(r,o,a,u)=>{const l="passage-ref "+t;return t++,n[l]={type:"passage-ref",graded:!1,options:{passageNumber:parseInt(o),referenceNumber:parseInt(a),summaryText:u},version:Ji.version},"[["+E.snowman+" "+l+"]]"});return d(O,{content:s,widgets:n,findExternalWidgets:this.props.findWidgets,alwaysUpdate:!0,linterContext:{...this.props.linterContext,blockHighlight:!0}},"choiceContentRenderer")},this.updateChoices=e=>{const{choiceStates:t,choices:n}=this.props,s=t?t.map(r=>({...r})):n.map(()=>({selected:!1,crossedOut:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1,readOnly:!1}));s.forEach((r,o)=>{r.selected=e.checked[o],r.crossedOut=e.crossedOut[o]}),this.props.onChange({choiceStates:s}),this.props.trackInteraction()},this.getUserInput=()=>Ie.getUserInputFromProps(this.props),this.simpleValidate=e=>Ie.validate(this.getUserInput(),e),this.showRationalesForCurrentlySelectedChoices=e=>{const{choiceStates:t}=this.props;if(t){const n=this.simpleValidate(e),s=n.type==="points"&&n.total===n.earned,r=t.map(o=>({...o,highlighted:o.selected,rationaleShown:o.selected||o.rationaleShown||s,readOnly:o.selected||o.readOnly||s,correctnessShown:o.selected||o.correctnessShown,previouslyAnswered:o.previouslyAnswered||o.selected}));this.props.onChange({choiceStates:r},null,!0)}},this.deselectIncorrectSelectedChoices=()=>{if(this.props.choiceStates){const e=this.props.choiceStates.map((t,n)=>({...t,selected:t.selected&&!!this.props.choices[n].correct,highlighted:!1}));this.props.onChange({choiceStates:e},null,!1)}}}static validate(e,t){const n=e.choicesSelected.reduce((r,o)=>r+(o?1:0),0);return n===0?{type:"invalid",message:null}:e.numCorrect&&e.numCorrect>1&&n!==e.numCorrect?{type:"invalid",message:v("Please choose the correct number of answers.")}:e.noneOfTheAboveSelected&&n>1?{type:"invalid",message:v("'None of the above' may not be selected when other answers are selected.")}:{type:"points",earned:e.choicesSelected.every((r,o)=>{let a;return e.noneOfTheAboveIndex===o?a=t.choices.every((u,l)=>o===l||!u.correct):a=!!t.choices[o].correct,a===r})?1:0,total:1,message:null}}static getUserInputFromProps(e){if(e.choiceStates){let n=null,s=!1;const r=e.choiceStates,o=r.map(()=>!1),a=e.countChoices,u=e.numCorrect;for(let l=0;l<o.length;l++){const p=e.choices[l].originalIndex;o[p]=r[l].selected,e.choices[l].isNoneOfTheAbove&&(n=p,o[l]&&(s=!0))}return{countChoices:a,choicesSelected:o,numCorrect:u,noneOfTheAboveIndex:n,noneOfTheAboveSelected:s}}const{values:t}=e;if(t){let n=null,s=!1;const r=[...t],o=e.countChoices,a=e.numCorrect,u=t.length;for(let l=0;l<u;l++){const p=e.choices[l].originalIndex;r[p]=t[l],e.choices[l].isNoneOfTheAbove&&(n=p,r[l]&&(s=!0))}return{choicesSelected:r,noneOfTheAboveIndex:n,noneOfTheAboveSelected:s,countChoices:o,numCorrect:a}}return{choicesSelected:e.choices.map(()=>!1)}}focus(e){return this.focusFunction?this.focusFunction(e):!1}registerFocusFunction(e){this.focusFunction=e}render(){const{choices:e}=this.props;let t;this.props.static?t=e.map(s=>({selected:!!s.correct,crossedOut:!1,readOnly:!0,highlighted:!1,rationaleShown:!0,correctnessShown:!0,previouslyAnswered:!1})):this.props.choiceStates?t=this.props.choiceStates:this.props.values?t=this.props.values.map(s=>({selected:s,crossedOut:!1,readOnly:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1})):t=e.map(()=>({selected:!1,crossedOut:!1,readOnly:!1,highlighted:!1,rationaleShown:!1,correctnessShown:!1,previouslyAnswered:!1}));const n=e.map((s,r)=>{const o=s.isNoneOfTheAbove&&!s.content?v("None of the above"):s.content,{selected:a,crossedOut:u,rationaleShown:l,correctnessShown:p,readOnly:h,highlighted:g,previouslyAnswered:f}=t[r],y=this.props.reviewModeRubric&&this.props.reviewModeRubric.choices[r];return{content:this._renderRenderer(o),checked:a,correct:s.correct===void 0?!!y&&!!y.correct:s.correct,disabled:h,hasRationale:!!s.clue,rationale:this._renderRenderer(s.clue),showRationale:l,showCorrectness:p,isNoneOfTheAbove:!!s.isNoneOfTheAbove,revealNoneOfTheAbove:!!(this.props.questionCompleted&&a),crossedOut:u,highlighted:g,previouslyAnswered:f}});return d(Jr,{labelWrap:!0,multipleSelect:this.props.multipleSelect,countChoices:this.props.countChoices,numCorrect:this.props.numCorrect,choices:n,onChange:this.updateChoices,reviewModeRubric:this.props.reviewModeRubric,deselectEnabled:this.props.deselectEnabled,apiOptions:this.props.apiOptions,isLastUsedWidget:this.props.isLastUsedWidget,registerFocusFunction:s=>this.registerFocusFunction(s)})}},Ie.defaultProps={choices:[],multipleSelect:!1,countChoices:!1,deselectEnabled:!1,linterContext:q},Ie);try{On.displayName="Radio",On.__docgenInfo={description:"",displayName:"Radio",props:{numCorrect:{defaultValue:null,description:"",name:"numCorrect",required:!0,type:{name:"number"}},hasNoneOfTheAbove:{defaultValue:null,description:"",name:"hasNoneOfTheAbove",required:!1,type:{name:"boolean"}},multipleSelect:{defaultValue:{value:"false"},description:"",name:"multipleSelect",required:!1,type:{name:"boolean"}},countChoices:{defaultValue:{value:"false"},description:"",name:"countChoices",required:!1,type:{name:"boolean"}},deselectEnabled:{defaultValue:{value:"false"},description:"",name:"deselectEnabled",required:!1,type:{name:"boolean"}},choices:{defaultValue:{value:"[]"},description:"",name:"choices",required:!1,type:{name:"readonly RadioChoiceWithMetadata[]"}},selectedChoices:{defaultValue:null,description:"",name:"selectedChoices",required:!0,type:{name:"readonly (boolean | undefined)[]"}},choiceStates:{defaultValue:null,description:"",name:"choiceStates",required:!1,type:{name:"readonly ChoiceState[]"}},values:{defaultValue:null,description:"",name:"values",required:!1,type:{name:"readonly boolean[]"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},alignment:{defaultValue:null,description:"",name:"alignment",required:!0,type:{name:"string | null | undefined"}},static:{defaultValue:null,description:"",name:"static",required:!0,type:{name:"boolean | null | undefined"}},problemNum:{defaultValue:null,description:"",name:"problemNum",required:!0,type:{name:"number | null | undefined"}},apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!0,type:{name:"Readonly<Readonly<{ isArticle?: boolean | undefined; onInputError?: ((widgetId: any, value: string, message?: string | null | undefined) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown..."}},keypadElement:{defaultValue:null,description:"",name:"keypadElement",required:!1,type:{name:"any"}},questionCompleted:{defaultValue:null,description:"",name:"questionCompleted",required:!1,type:{name:"boolean"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!0,type:{name:"(blurPath: FocusPath) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!0,type:{name:"(blurPath: FocusPath) => void"}},findWidgets:{defaultValue:null,description:"",name:"findWidgets",required:!0,type:{name:"(arg1: FilterCriterion) => readonly any[]"}},reviewModeRubric:{defaultValue:null,description:"",name:"reviewModeRubric",required:!0,type:{name:"PerseusRadioWidgetOptions"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"ChangeHandler"}},trackInteraction:{defaultValue:null,description:"",name:"trackInteraction",required:!0,type:{name:"(extraData?: Empty | undefined) => void"}},isLastUsedWidget:{defaultValue:null,description:"",name:"isLastUsedWidget",required:!0,type:{name:"boolean"}},linterContext:{defaultValue:{value:`{
    contentType: "",
    highlightLint: false,
    paths: [] as ReadonlyArray<any>,
    stack: [] as ReadonlyArray<any>,
}`},description:"",name:"linterContext",required:!1,type:{name:"LinterContextProps"}},containerSizeClass:{defaultValue:null,description:"",name:"containerSizeClass",required:!0,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'},{value:'"large"'},{value:'"xlarge"'}]}}}}}catch{}const{shuffle:Jo,random:ea}=E,ta=[[v("False"),v("True")],[v("No"),v("Yes")]],na=(i,e)=>{const t=function(o){const a=e===void 0?ea:e;return i.randomize?Jo(o,a??0):o},n=function(o){let a=null;const u=o.filter((l,p)=>l.isNoneOfTheAbove?(a=l,!1):!0);return a&&u.push(a),u},s=o=>{const a=o.map(u=>u.content);return ta.some(u=>c.isEqual(a,u))?[o[1],o[0]]:o},r=i.choices.map((o,a)=>({...o,originalIndex:a,correct:!!o.correct}));return n(s(t(r)))},ci=(i,e)=>{const t=na(i,e),n=c.reduce(i.choices,function(u,l){return l.correct?u+1:u},0),{hasNoneOfTheAbove:s,multipleSelect:r,countChoices:o,deselectEnabled:a}=i;return{numCorrect:n,hasNoneOfTheAbove:s,multipleSelect:r,countChoices:o,deselectEnabled:a,choices:t,selectedChoices:c.pluck(t,"correct")}},sa={1:i=>{let e,t;if(!i.noneOfTheAbove)e=i.choices,t=!1;else throw new Error("radio widget v0 no longer supports auto noneOfTheAbove");return c.extend(c.omit(i,"noneOfTheAbove"),{choices:e,hasNoneOfTheAbove:t})}},ia={name:"radio",displayName:"Radio / Multiple choice",accessible:!0,widget:On,transform:ci,staticTransform:ci,version:{major:1,minor:0},propUpgrades:sa,isLintable:!0},ra=[ia,Ko,Zo,zo],un={getUserInput:function(){return c.omit(this.props,$s)},getUserInputFromProps:function(i){return c.omit(i,$s)}},Xe=class Xe extends b.Component{constructor(){super(...arguments),this.state={uniqueId:c.uniqueId("perseus_radio_")},this.change=(...e)=>W.apply(this,e),this.getUserInput=()=>Xe.getUserInputFromProps(this.props),this.onChange=(e,t)=>{const n=[...this.props.values];n[e]=t,this.change("values",n),this.props.trackInteraction()},this.simpleValidate=e=>Xe.validate(this.getUserInput(),e)}render(){const e=this,t=this.props.apiOptions.isMobile;let n=this.props.items.map((a,u)=>[a,u]);this.props.randomizeItems&&(n=E.shuffle(n,this.props.problemNum));const s=w("table",{className:"categorizer-table "+S.css(ue.mobileTable),children:[d("thead",{children:w("tr",{children:[d("td",{className:S.css(ue.emptyHeaderCell)}),this.props.categories.map((a,u)=>d("th",{className:S.css(ue.header),children:d(O,{content:a,linterContext:this.props.linterContext})},u))]})}),d("tbody",{children:n.map(a=>{const u=a[0],l=a[1],p=e.state.uniqueId+"_"+l;return w("tr",{children:[d("td",{children:d(O,{content:u,linterContext:this.props.linterContext})}),e.props.categories.map((h,g)=>{const f=e.props.values[l]===g;return d("td",{className:"category "+S.css(ue.cell),children:w("div",{className:ve.INTERACTIVE,role:"button","aria-label":h,onClick:this.onChange.bind(this,l,g),children:[t&&d("input",{type:"radio",name:p,className:S.css(Ys.responsiveInput,Ys.responsiveRadioInput),checked:f,onChange:this.onChange.bind(this,l,g),onClick:y=>y.stopPropagation()}),!t&&d("span",{className:S.css(ue.radioSpan,f&&ue.checkedRadioSpan,this.props.static&&f&&ue.staticCheckedRadioSpan),children:f?d(Pe,{...eo}):d(Pe,{...to})})]})},g)})]},l)})})]}),r=ce({"categorizer-container":!0,"static-mode":this.props.static}),o=this.props.apiOptions.isMobile?[ue.fullBleedContainer]:[];return d("div",{className:r+" "+S.css(...o),children:s})}static validate(e,t){let n=!0,s=!0;return c.each(t.values,function(r,o){e.values[o]==null&&(n=!1),e.values[o]!==r&&(s=!1)}),n?{type:"points",earned:s?1:0,total:1,message:null}:{type:"invalid",message:v("Make sure you select something for every row.")}}static getUserInputFromProps(e){return un.getUserInputFromProps(e)}};Xe.defaultProps={items:[],categories:[],values:[],linterContext:q};let lt=Xe;const pi=16,ue=S.StyleSheet.create({mobileTable:{[fe.smOrSmaller]:{minWidth:"auto"}},fullBleedContainer:{[fe.mdOrSmaller]:{marginLeft:-pi,marginRight:-pi,overflowX:"auto"}},header:{textAlign:"center",verticalAlign:"bottom"},cell:{textAlign:"center",padding:0,color:"#ccc",verticalAlign:"middle"},emptyHeaderCell:{backgroundColor:"inherit",borderBottom:"2px solid #ccc"},radioSpan:{fontSize:30,paddingRight:3,":hover":{color:"#999"}},checkedRadioSpan:{color:"#333"},staticCheckedRadioSpan:{color:"#888"}}),oa={name:"categorizer",displayName:"Categorizer",widget:lt,transform:i=>c.pick(i,"items","categories","randomizeItems"),staticTransform:i=>c.pick(i,"items","categories","values","randomizeItems"),isLintable:!0};try{lt.displayName="Categorizer",lt.__docgenInfo={description:"",displayName:"Categorizer",props:{items:{defaultValue:{value:"[]"},description:"",name:"items",required:!1,type:{name:"readonly string[]"}},categories:{defaultValue:{value:"[]"},description:"",name:"categories",required:!1,type:{name:"readonly string[]"}},randomizeItems:{defaultValue:null,description:"",name:"randomizeItems",required:!0,type:{name:"boolean"}},values:{defaultValue:{value:"[]"},description:"",name:"values",required:!1,type:{name:"readonly number[] & readonly string[]"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},alignment:{defaultValue:null,description:"",name:"alignment",required:!0,type:{name:"string | null | undefined"}},static:{defaultValue:null,description:"",name:"static",required:!0,type:{name:"boolean | null | undefined"}},problemNum:{defaultValue:null,description:"",name:"problemNum",required:!0,type:{name:"number | null | undefined"}},apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!0,type:{name:"Readonly<Readonly<{ isArticle?: boolean | undefined; onInputError?: ((widgetId: any, value: string, message?: string | null | undefined) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown..."}},keypadElement:{defaultValue:null,description:"",name:"keypadElement",required:!1,type:{name:"any"}},questionCompleted:{defaultValue:null,description:"",name:"questionCompleted",required:!1,type:{name:"boolean"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!0,type:{name:"(blurPath: FocusPath) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!0,type:{name:"(blurPath: FocusPath) => void"}},findWidgets:{defaultValue:null,description:"",name:"findWidgets",required:!0,type:{name:"(arg1: FilterCriterion) => readonly any[]"}},reviewModeRubric:{defaultValue:null,description:"",name:"reviewModeRubric",required:!0,type:{name:"PerseusCategorizerWidgetOptions"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"ChangeHandler"}},trackInteraction:{defaultValue:null,description:"",name:"trackInteraction",required:!0,type:{name:"(extraData?: Empty | undefined) => void"}},isLastUsedWidget:{defaultValue:null,description:"",name:"isLastUsedWidget",required:!0,type:{name:"boolean"}},linterContext:{defaultValue:{value:`{
    contentType: "",
    highlightLint: false,
    paths: [] as ReadonlyArray<any>,
    stack: [] as ReadonlyArray<any>,
}`},description:"",name:"linterContext",required:!1,type:{name:"LinterContextProps"}},containerSizeClass:{defaultValue:null,description:"",name:"containerSizeClass",required:!0,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'},{value:'"large"'},{value:'"xlarge"'}]}}}}}catch{}const aa=i=>!!(i&&i.toLowerCase()==="file:");let Sn;const la=()=>(Sn||(Sn=window.location),Sn),ca=i=>new URL(i,la().origin),er=i=>ca(i).href,{updateQueryString:pa}=E;function ua(i){const{InitialRequestUrl:e}=be(),t=`/computer-programming/program/${i}/embedded?embed=yes&author=no`;return aa(e.protocol)?`https://khanacademy.org${t}`:er(t)}const je=class je extends b.Component{constructor(){super(...arguments),this.handleMessageEvent=e=>{let t={};try{t=JSON.parse(e.originalEvent.data)}catch{return}if(c.isUndefined(t.testsPassed))return;const n=t.testsPassed?"correct":"incorrect";this.change({status:n,message:t.message})},this.change=(...e)=>W.apply(this,e),this.simpleValidate=e=>je.validate({status:this.props.status,message:this.props.message},e)}static validate(e,t){return e.status==="correct"?{type:"points",earned:1,total:1,message:e.message||null}:e.status==="incorrect"?{type:"points",earned:0,total:1,message:e.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}componentDidMount(){R(window).on("message",this.handleMessageEvent)}componentWillUnmount(){R(window).off("message",this.handleMessageEvent)}render(){if(!this.props.programID)return d("div",{});let e=!1,t=ua(this.props.programID),n;const s={height:this.props.height,width:"100%"};if(this.props.showEditor?(t+="&editor=yes",n="perseus-scratchpad-editor"):(t+=`&editor=no&width=${ro}`,n="perseus-scratchpad",this.props.programType!=="webpage"&&(e=!0)),this.props.showButtons?(t+="&buttons=yes",s.height+=67):t+="&buttons=no",this.props.settings){const o={};c.each(this.props.settings,function(a){a.name&&a.value&&(o[a.name]=a.value)}),t=pa(t,"settings",JSON.stringify(o))}const r=["allow-popups","allow-same-origin","allow-scripts","allow-top-navigation"].join(" ");return d("div",{className:S.css(ui.widthOverride,e&&ui.container),children:d("iframe",{sandbox:r,src:t,style:s,className:n,allowFullScreen:!0})})}};je.propTypes={...dt,programID:m.string,programType:m.oneOf(["pjs","sql","webpage"]),width:m.number,height:m.number,settings:m.array,showEditor:m.bool,showButtons:m.bool,status:m.oneOf(["incomplete","incorrect","correct"]),message:m.string},je.defaultProps={showEditor:!1,showButtons:!1,status:"incomplete",message:null};let Ln=je;const ui=S.StyleSheet.create({widthOverride:{width:820},container:{margin:"auto"}}),da={name:"cs-program",displayName:"CS Program",supportedAlignments:["block","full-width"],widget:Ln,hidden:!0},Wt=class Wt extends b.Component{constructor(){super(...arguments),this.getUserInput=()=>({}),this.simpleValidate=e=>Wt.validate(this.getUserInput(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){return d(Dr,{children:({activeDefinitionId:e,setActiveDefinitionId:t})=>d(Wr,{content:d(Br,{color:"white",style:ha.tooltipBody,closeButtonVisible:!0,children:d(O,{apiOptions:this.props.apiOptions,content:this.props.definition,widgets:this.props.widgets})}),opened:e===this.props.widgetId,onClose:()=>t(null),placement:"top",children:d(on,{onClick:()=>{this.props.trackInteraction(),t(this.props.widgetId)},children:({hovered:n,focused:s,pressed:r})=>d("span",{style:{color:B.blue,borderBottom:n||s||r?`2px solid ${B.blue}`:"none"},children:this.props.togglePrompt})})})})}};Wt.defaultProps={togglePrompt:"define me",definition:"definition goes here"};let Vn=Wt;const ha={tooltipBody:{color:B.offBlack,fontSize:20,fontWeight:500,lineHeight:"30px"}},ga={name:"definition",displayName:"Definition",accessible:!0,defaultAlignment:"inline",widget:Vn,transform:i=>i},fa="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20256%20256'%20fill='currentColor'%3e%3cpath%20d='M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm16-40a8,8,0,0,1-8,8,16,16,0,0,1-16-16V128a8,8,0,0,1,0-16,16,16,0,0,1,16,16v40A8,8,0,0,1,144,176ZM112,84a12,12,0,1,1,12,12A12,12,0,0,1,112,84Z'/%3e%3c/svg%3e",ma="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20256%20256'%20fill='currentColor'%3e%3cpath%20d='M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216ZM80,108a12,12,0,1,1,12,12A12,12,0,0,1,80,108Zm96,0a12,12,0,1,1-12-12A12,12,0,0,1,176,108Zm-1.07,48c-10.29,17.79-27.4,28-46.93,28s-36.63-10.2-46.92-28a8,8,0,1,1,13.84-8c7.47,12.91,19.21,20,33.08,20s25.61-7.1,33.07-20a8,8,0,0,1,13.86,8Z'/%3e%3c/svg%3e",ya="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20256%20256'%20fill='currentColor'%3e%3cpath%20d='M236.8,188.09,149.35,36.22h0a24.76,24.76,0,0,0-42.7,0L19.2,188.09a23.51,23.51,0,0,0,0,23.72A24.35,24.35,0,0,0,40.55,224h174.9a24.35,24.35,0,0,0,21.33-12.19A23.51,23.51,0,0,0,236.8,188.09ZM222.93,203.8a8.5,8.5,0,0,1-7.48,4.2H40.55a8.5,8.5,0,0,1-7.48-4.2,7.59,7.59,0,0,1,0-7.72L120.52,44.21a8.75,8.75,0,0,1,15,0l87.45,151.87A7.59,7.59,0,0,1,222.93,203.8ZM120,144V104a8,8,0,0,1,16,0v40a8,8,0,0,1-16,0Zm20,36a12,12,0,1,1-12-12A12,12,0,0,1,140,180Z'/%3e%3c/svg%3e",ba="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20256%20256'%20fill='currentColor'%3e%3cpath%20d='M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm0,192a88,88,0,1,1,88-88A88.1,88.1,0,0,1,128,216Zm-8-80V80a8,8,0,0,1,16,0v56a8,8,0,0,1-16,0Zm20,36a12,12,0,1,1-12-12A12,12,0,0,1,140,172Z'/%3e%3c/svg%3e",va=i=>{switch(i){case"success":return{color:B.green,icon:ma,role:"status"};case"warning":return{color:B.gold,icon:ya,role:"alert",ariaLive:"polite"};case"critical":return{color:B.red,icon:ba,role:"alert"};default:return{color:B.blue,icon:fa,role:"status"}}},xa=i=>{const{actions:e,"aria-label":t,dismissAriaLabel:n="Dismiss banner.",onDismiss:s,kind:r="info",layout:o,text:a,testId:u}=i,l=()=>e==null?void 0:e.filter(Boolean).map((h,g)=>{if(h.type==="custom")return b.createElement(D,{style:K.action,key:`custom-action-${g}`},h.node);const f=h.onClick;if(h.type==="link"){var y;return b.createElement(D,{style:K.action,key:h.title},b.createElement(ho,{kind:"primary",href:h.href,onClick:f,"aria-label":(y=h.ariaLabel)!=null?y:h.title,style:K.link},h.title))}else{var x;return b.createElement(D,{style:K.action,key:h.title},b.createElement(rt,{kind:"tertiary",size:"small","aria-label":(x=h.ariaLabel)!=null?x:h.title,onClick:f},h.title))}}),p=va(r);return b.createElement(D,{style:[K.containerOuter,o==="floating"&&K.floatingBorder,{borderInlineStartColor:p.color}],role:p.role,"aria-label":t,"aria-live":p.ariaLive,testId:u},b.createElement(D,{style:[K.backgroundColor,{backgroundColor:p.color}]}),b.createElement(D,{style:K.containerInner},b.createElement(uo,{icon:p.icon,size:"medium",style:K.icon,"aria-label":r,testId:"banner-kind-icon",role:"img"}),b.createElement(D,{style:K.labelAndButtonsContainer},b.createElement(D,{style:K.labelContainer},b.createElement(fo,null,a)),e&&b.createElement(D,{style:K.actionsContainer},l())),s?b.createElement(D,{style:K.dismissContainer},b.createElement(co,{icon:po,kind:"tertiary",onClick:s,style:K.dismiss,"aria-label":n})):null))},K=S.StyleSheet.create({backgroundColor:{position:"absolute",top:0,bottom:0,left:0,right:0,opacity:.08},containerOuter:{borderInlineStartWidth:$.xxSmall_6,width:"100%",backgroundColor:B.white},containerInner:{flexDirection:"row",padding:$.xSmall_8},icon:{marginTop:$.xSmall_8,marginBottom:$.xSmall_8,marginInlineStart:$.xxxxSmall_2,marginInlineEnd:$.xSmall_8,alignSelf:"flex-start",color:B.offBlack64},labelAndButtonsContainer:{flex:1,flexDirection:"row",alignItems:"center",alignContent:"center",flexWrap:"wrap",justifyContent:"space-between"},labelContainer:{flexShrink:1,margin:$.xSmall_8,textAlign:"start",overflowWrap:"break-word"},actionsContainer:{flexDirection:"row",justifyContent:"flex-start",marginTop:$.xSmall_8,marginBottom:$.xSmall_8},action:{marginLeft:$.xSmall_8,marginRight:$.xSmall_8,justifyContent:"center",height:18},link:{fontSize:14},dismiss:{flexShrink:1},dismissContainer:{height:40,width:40,justifyContent:"center",alignItems:"center",marginLeft:$.xSmall_8,marginRight:$.xSmall_8},floatingBorder:{borderRadius:4,overflow:"hidden"}});class Is extends zr.Component{constructor(){super(...arguments),this.getUserInput=()=>({}),this.simpleValidate=e=>Is.validate(this.getUserInput(),e)}static validate(e,t){return{type:"points",earned:1,total:1,message:null}}render(){return d("div",{style:{paddingTop:8,paddingBottom:8},children:d(xa,{text:v("Sorry, this part of the question is no longer available. 😅 Don't worry, you won't be graded on this part. Keep going!"),kind:"info",layout:"full-width"})})}}const Ca={name:"deprecated-standin",displayName:"Deprecated Standin",widget:Is,hidden:!0},Bt=class Bt extends b.Component{constructor(){super(...arguments),this.focus=()=>(L.findDOMNode(this).focus(),!0),this._handleChangeEvent=e=>{this._handleChange(parseInt(e.target.value))},this._handleChange=e=>{this.props.trackInteraction(),this.props.onChange({selected:e})},this.getUserInput=()=>({value:this.props.selected}),this.simpleValidate=e=>Bt.validate(this.getUserInput(),e)}static validate(e,t){const n=e.value;return n===0?{type:"invalid",message:null}:{type:"points",earned:t.choices[n-1].correct?1:0,total:1,message:null}}render(){const e=[d(Xs,{value:"0",disabled:!0,label:this.props.placeholder},"placeholder"),...this.props.choices.map((t,n)=>d(Xs,{value:String(n+1),label:t},String(n+1)))];return d("div",{onClick:t=>{t.stopPropagation()},onTouchStart:t=>{t.stopPropagation()},children:d(yo,{placeholder:"",onChange:t=>this._handleChange(parseInt(t)),selectedValue:String(this.props.selected),disabled:this.props.apiOptions.readOnly,children:e})})}};Bt.defaultProps={choices:[],selected:0,placeholder:"",apiOptions:G.defaults};let Dn=Bt;const wa=i=>({placeholder:i.placeholder,choices:i.choices.map(e=>e.content)}),Sa={name:"dropdown",displayName:"Drop down",defaultAlignment:"inline-block",accessible:!0,widget:Dn,transform:wa},zt=class zt extends b.Component{constructor(){super(...arguments),this.state={expanded:!1},this.change=(...e)=>W.apply(this,e),this._onClick=()=>{this.setState({expanded:!this.state.expanded}),this.props.trackInteraction()},this.getUserInput=()=>({}),this.simpleValidate=e=>zt.validate(this.getUserInput(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){const{isArticle:e,isMobile:t}=this.props.apiOptions,n=this.state.expanded?this.props.hidePrompt:this.props.showPrompt;let s;const r="javascript:void(0)",o=this._onClick;if(t)s=w("div",{className:S.css(Z.linkContainer),children:[d("a",{className:S.css(Z.mobileExplanationLink),href:r,onClick:o,role:"button","aria-expanded":this.state.expanded,children:n}),this.state.expanded&&d("svg",{className:S.css(Z.disclosureArrow),children:d("polygon",{style:{fill:tr},points:`0,${Se} ${Tt},${Se} ${Tt/2},0`})})]});else{const u=e?[Z.explanationLink,Z.articleLink]:[Z.explanationLink,Z.exerciseLink];s=d(on,{onClick:o,"aria-expanded":this.state.expanded,children:()=>d(D,{style:u,children:`[${n}]`})})}const a=t?Z.contentExpandedMobile:Z.contentExpanded;return w("div",{className:S.css(Z.container),children:[s,this.state.expanded&&d("div",{className:S.css(Z.content,t&&Z.contentMobile,this.state.expanded&&a),ref:"content",children:d(O,{apiOptions:this.props.apiOptions,content:this.props.explanation,widgets:this.props.widgets,linterContext:this.props.linterContext})})]})}};zt.defaultProps={showPrompt:"Explain",hidePrompt:"Hide explanation",explanation:`explanation goes here

more explanation`,widgets:{},linterContext:q};let qn=zt;const di=23,Ia=10,Tt=30,Se=14,tr=oo,Z=S.StyleSheet.create({container:{display:"inline",position:"relative"},linkContainer:{display:"inline-block"},explanationLink:{fontStyle:"italic",color:"#007d96"},articleLink:{fontSize:20,lineHeight:"30px"},exerciseLink:{fontSize:14,lineHeight:"19.6px"},mobileExplanationLink:{color:Ks,borderBottom:`dashed 1px ${Ks}`,textDecoration:"none",[fe.xl]:{fontSize:22,lineHeight:1.4},[fe.lgOrSmaller]:{fontSize:20,lineHeight:1.5},[fe.smOrSmaller]:{fontSize:18,lineHeight:1.2}},content:{position:"relative",transition:"margin-top 0.1s"},contentExpanded:{borderLeft:"5px solid #ccc",marginLeft:-di,paddingLeft:di,paddingBottom:Ia,marginBottom:Se,marginTop:Se},contentExpandedMobile:{boxSizing:"content-box",paddingTop:32,paddingBottom:32,marginTop:Se},contentMobile:{background:tr,marginLeft:le,marginRight:le,paddingLeft:ie,paddingRight:ie},disclosureArrow:{bottom:-(Se+5),height:Se,left:"50%",marginLeft:-(Tt/2),position:"absolute",width:Tt}}),ka={name:"explanation",displayName:"Explanation",accessible:!0,defaultAlignment:"inline",widget:qn,transform:c.identity,isLintable:!0};class Hn extends b.Component{render(){const{apiOptions:e,answerBarState:t,onCheckAnswer:n,onNextQuestion:s}=this.props,r={...mt.answerBar,backgroundColor:t==="CORRECT"?B.offWhite:"white",justifyContent:t==="CORRECT"&&!s?"center":"space-between"},o=t==="INCORRECT"?w("span",{style:mt.text,children:[d("span",{style:mt.tryAgainIcon,children:d(Pe,{...no})}),d("span",{style:{marginLeft:8},children:v("Keep trying")})]}):d("span",{});if(t!=="CORRECT"){const a=t==="INCORRECT"?v("Try again"):v("Check");return w("div",{style:r,children:[o,d(rt,{disabled:e.readOnly||t!=="ACTIVE",onClick:n,children:a})]})}return w("div",{style:r,children:[w("span",{style:mt.text,children:[d("span",{style:{fontSize:28,color:B.green},children:d(Pe,{...so,style:{marginBottom:5}})}),d("span",{role:"alert","aria-label":v("Correct!"),style:{marginLeft:8},children:v("Correct!")})]}),s&&d(rt,{onClick:s,children:v("Next question")})]})}}const Pa=17,mt={answerBar:{display:"flex",alignItems:"center",height:68,marginLeft:le,marginRight:le,marginBottom:le,marginTop:ie,paddingLeft:ie,paddingRight:10,borderTop:`1px solid ${B.offBlack50}`},tryAgainIcon:{fontSize:28,color:"#63D9EA",transform:"scale(-1,1) rotate(-268deg)"},text:{display:"flex",flexDirection:"row",alignItems:"center",fontWeight:"bold",fontSize:Pa}};try{Hn.displayName="GradedGroupAnswerBar",Hn.__docgenInfo={description:"",displayName:"GradedGroupAnswerBar",props:{answerBarState:{defaultValue:null,description:"",name:"answerBarState",required:!0,type:{name:"enum",value:[{value:'"HIDDEN"'},{value:'"ACTIVE"'},{value:'"INACTIVE"'},{value:'"INCORRECT"'},{value:'"CORRECT"'}]}},apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!0,type:{name:"Readonly<{ isArticle?: boolean | undefined; onInputError?: ((widgetId: any, value: string, message?: string | null | undefined) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown) | undef..."}},onCheckAnswer:{defaultValue:null,description:"",name:"onCheckAnswer",required:!0,type:{name:"() => unknown"}},onNextQuestion:{defaultValue:null,description:"",name:"onNextQuestion",required:!1,type:{name:"(() => unknown)"}}}}}catch{}const oe={ungraded:"ungraded",correct:"correct",incorrect:"incorrect",invalid:"invalid"},Ma=(i,e)=>{switch(i){case"HIDDEN":return e?"ACTIVE":i;case"ACTIVE":return e?i:"INACTIVE";case"INACTIVE":return e?"ACTIVE":i;case"INCORRECT":return e?"ACTIVE":"INACTIVE";default:return i}},hi=v("We couldn't grade your answer."),Ta=v("It looks like you left something blank or ")+v("entered in an invalid answer."),Rs=class Rs extends b.Component{constructor(){super(...arguments),this.state={status:oe.ungraded,showHint:!1,message:"",answerBarState:"HIDDEN"},this.change=(...e)=>W.apply(this,e),this._onInteractWithWidget=e=>{if(this.setState({status:oe.ungraded,message:""}),this.refs.renderer){this.change("widgets",this.props.widgets);const n=this.refs.renderer.emptyWidgets().length===0,s=this.state.answerBarState;this.setState({answerBarState:Ma(s,n)})}},this._checkAnswer=()=>{this.refs.renderer.showRationalesForCurrentlySelectedChoices();const e=this.refs.renderer.score(),t=e.type==="points"?e.total===e.earned?oe.correct:oe.incorrect:oe.invalid,n=e.type==="points"?e.message||"":e.message?`${hi} ${e.message}`:`${hi} ${Ta}`;this.setState({status:t,message:n,answerBarState:t==="correct"?"CORRECT":"INCORRECT"}),this.props.trackInteraction({status:t})},this.getInputPaths=()=>this.refs.renderer.getInputPaths(),this.setInputValue=(e,t,n)=>this.refs.renderer.setInputValue(e,t,n),this.focus=()=>this.refs.renderer.focus(),this.focusInputPath=e=>{this.refs.renderer.focusPath(e)},this.blurInputPath=e=>{this.refs.renderer.blurPath(e)}}shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}render(){const e=c.extend({},G.defaults,this.props.apiOptions,{onFocusChange:(l,p)=>{p&&this.props.onBlur(p),l&&this.props.onFocus(l)}});let t=null,n=null;this.state.status===oe.correct?(n=d(Pe,{...ji,style:{color:"#526f03"}}),t=v("Correct")):this.state.status===oe.incorrect&&(n=d(Pe,{...io,style:{color:"#ff5454"}}),t=v("Incorrect"));const s=this.props.inGradedGroupSet?S.css(qe.gradedGroupInSet):S.css(qe.gradedGroup),r=ce({[s]:e.isMobile,"perseus-graded-group":!0,"answer-correct":e.isMobile?!1:this.state.status===oe.correct,"answer-incorrect":e.isMobile?!1:this.state.status===oe.incorrect}),{answerBarState:o}=this.state,a=o==="CORRECT",u=e.readOnly||e.isMobile&&a;return w("div",{className:r,children:[!!this.props.title&&d("div",{className:S.css(qe.title),children:this.props.title}),d(O,{...this.props,ref:"renderer",apiOptions:{...e,readOnly:u},onInteractWithWidget:this._onInteractWithWidget,linterContext:this.props.linterContext}),!e.isMobile&&n&&d("div",{className:"group-icon",children:n}),!e.isMobile&&t&&d("div",{className:S.css(cn.srOnly),role:"alert","aria-label":t,children:t}),!e.isMobile&&d("p",{role:"status","aria-live":"polite",children:this.state.message}),!e.isMobile&&d(rt,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this._checkAnswer,children:v("Check")}),!e.isMobile&&a&&this.props.onNextQuestion&&d(rt,{kind:"secondary",disabled:this.props.apiOptions.readOnly,onClick:this.props.onNextQuestion,style:{marginLeft:5},children:v("Next question")}),this.props.hint&&this.props.hint.content&&(this.state.showHint?w("div",{children:[d("button",{tabIndex:"0",className:S.css(qe.explanationTitle),onClick:()=>this.setState({showHint:!1}),onKeyPress:l=>{l.preventDefault(),this.setState({showHint:!1})},children:v("Hide explanation")}),d(O,{...this.props.hint,ref:"hints-renderer",apiOptions:e,linterContext:this.props.linterContext})]}):d("button",{tabIndex:"0",onClick:()=>this.setState({showHint:!0}),onKeyPress:l=>{l.preventDefault(),this.setState({showHint:!0})},className:S.css(qe.showHintLink),children:v("Explain")})),e.isMobile&&o!=="HIDDEN"&&d(Hn,{apiOptions:e,answerBarState:o,onCheckAnswer:this._checkAnswer,onNextQuestion:this.props.onNextQuestion})]})}};Rs.defaultProps={title:"",content:"",widgets:{},images:{},hint:null,hasHint:!1,linterContext:q};let Me=Rs;const _a=function(i,e){return c.extend({},i,e(i))},qe=S.StyleSheet.create({gradedGroupInSet:{marginLeft:0,paddingLeft:0},gradedGroup:{borderTop:`1px solid ${Pt}`,borderBottom:`1px solid ${Pt}`,backgroundColor:Qi,marginLeft:le,marginRight:le,paddingBottom:ie,paddingLeft:ie,paddingRight:ie,paddingTop:10,width:"auto"},showHintLink:{backgroundColor:"unset",fontSize:14,padding:0,border:"none",marginTop:20,color:B.blue,cursor:"pointer",display:"block",clear:"both"},explanationTitle:{backgroundColor:"unset",marginTop:20,color:B.blue,marginBottom:10,cursor:"pointer",fontSize:14,padding:0,border:"none",display:"block",clear:"both"},title:{fontSize:12,color:ao,textTransform:"uppercase",marginBottom:11,letterSpacing:.8}}),Ea={name:"graded-group",displayName:"Graded group (articles only)",widget:Me,traverseChildWidgets:_a,hidden:!1,tracking:"all",isLintable:!0};try{Me.displayName="GradedGroup",Me.__docgenInfo={description:"",displayName:"GradedGroup",props:{title:{defaultValue:{value:""},description:"",name:"title",required:!1,type:{name:"string"}},hasHint:{defaultValue:{value:"false"},description:"",name:"hasHint",required:!1,type:{name:"boolean | null"}},hint:{defaultValue:{value:"null"},description:"",name:"hint",required:!1,type:{name:"PerseusRenderer | null"}},content:{defaultValue:{value:""},description:"",name:"content",required:!1,type:{name:"string"}},widgets:{defaultValue:{value:"{}"},description:"",name:"widgets",required:!1,type:{name:"{ [key: string]: PerseusWidget; }"}},widgetEnabled:{defaultValue:null,description:"",name:"widgetEnabled",required:!1,type:{name:"boolean | null"}},immutableWidgets:{defaultValue:null,description:"",name:"immutableWidgets",required:!1,type:{name:"boolean | null"}},images:{defaultValue:{value:"{}"},description:"",name:"images",required:!1,type:{name:"{ [key: string]: PerseusImageDetail; }"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},alignment:{defaultValue:null,description:"",name:"alignment",required:!0,type:{name:"string | null | undefined"}},static:{defaultValue:null,description:"",name:"static",required:!0,type:{name:"boolean | null | undefined"}},problemNum:{defaultValue:null,description:"",name:"problemNum",required:!0,type:{name:"number | null | undefined"}},apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!0,type:{name:"Readonly<Readonly<{ isArticle?: boolean | undefined; onInputError?: ((widgetId: any, value: string, message?: string | null | undefined) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown..."}},keypadElement:{defaultValue:null,description:"",name:"keypadElement",required:!1,type:{name:"any"}},questionCompleted:{defaultValue:null,description:"",name:"questionCompleted",required:!1,type:{name:"boolean"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!0,type:{name:"(blurPath: FocusPath) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!0,type:{name:"(blurPath: FocusPath) => void"}},findWidgets:{defaultValue:null,description:"",name:"findWidgets",required:!0,type:{name:"(arg1: FilterCriterion) => readonly any[]"}},reviewModeRubric:{defaultValue:null,description:"",name:"reviewModeRubric",required:!0,type:{name:"PerseusGradedGroupWidgetOptions"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"ChangeHandler"}},trackInteraction:{defaultValue:null,description:"",name:"trackInteraction",required:!0,type:{name:"(extraData?: TrackingGradedGroupExtraArguments | undefined) => void"}},isLastUsedWidget:{defaultValue:null,description:"",name:"isLastUsedWidget",required:!0,type:{name:"boolean"}},linterContext:{defaultValue:{value:`{
    contentType: "",
    highlightLint: false,
    paths: [] as ReadonlyArray<any>,
    stack: [] as ReadonlyArray<any>,
}`},description:"",name:"linterContext",required:!1,type:{name:"LinterContextProps"}},containerSizeClass:{defaultValue:null,description:"",name:"containerSizeClass",required:!0,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'},{value:'"large"'},{value:'"xlarge"'}]}},inGradedGroupSet:{defaultValue:null,description:"",name:"inGradedGroupSet",required:!1,type:{name:"boolean"}},onNextQuestion:{defaultValue:null,description:"",name:"onNextQuestion",required:!1,type:{name:"(() => unknown)"}}}}}catch{}class Ra extends b.Component{constructor(){super(...arguments),this.handleKeyDown=(e,t)=>{(e.key==="Enter"||e.key===" ")&&this.props.onChangeCurrentGroup(t)}}render(){return d("ul",{className:ce(S.css(ee.indicatorContainer),"indicatorContainer"),children:this.props.gradedGroups.map(({title:e},t)=>d("li",{className:S.css(ee.indicator),children:d(on,{role:"button","aria-label":v("Skip to %(title)s",{title:e}),style:ee.indicatorButton,onClick:()=>this.props.onChangeCurrentGroup(t),onKeyDown:n=>this.handleKeyDown(n,t),children:({hovered:n,focused:s,pressed:r})=>d(D,{style:[ee.indicatorDot,(n||s||r)&&ee.indicatorDotFocused],children:t===this.props.currentGroup&&d(D,{style:ee.indicatorDotActive,children:d("span",{className:S.css(cn.srOnly),children:v("Current")})})})})},e))})}}const As=class As extends b.Component{constructor(){super(...arguments),this.state={currentGroup:0},this.change=(...e)=>W.apply(this,e),this.getInputPaths=()=>this._childGroup.getInputPaths(),this.setInputValue=(e,t,n)=>this._childGroup.setInputValue(e,t,n),this.focus=()=>this._childGroup.focus(),this.focusInputPath=e=>{this._childGroup.focusInputPath(e)},this.blurInputPath=e=>{this._childGroup.blurInputPath(e)},this.handleNextQuestion=()=>{const{currentGroup:e}=this.state,t=this.props.gradedGroups.length;e<t-1&&this.setState({currentGroup:e+1})}}shouldComponentUpdate(e,t){return e.gradedGroups,e!==this.props||t!==this.state}render(){const{JIPT:e}=be();if(e.useJIPT&&this.props.gradedGroups.length>1)return d("div",{className:S.css(ee.container),children:this.props.gradedGroups.map((r,o)=>d(Me,{...this.props,...r,inGradedGroupSet:!1,linterContext:this.props.linterContext},o))});const t=this.props.gradedGroups[this.state.currentGroup];if(!t)return d("span",{children:rn("No current group...")});const n=this.props.gradedGroups.length,s=this.state.currentGroup<n-1?this.handleNextQuestion:null;return w("div",{className:S.css(ee.container),children:[w("div",{className:S.css(ee.top),children:[d("div",{className:S.css(ee.title),children:t.title}),d("div",{className:S.css(ee.spacer)}),d(Ra,{currentGroup:this.state.currentGroup,gradedGroups:this.props.gradedGroups,onChangeCurrentGroup:r=>this.setState({currentGroup:r})})]}),d(Me,{ref:r=>this._childGroup=r,...this.props,...t,inGradedGroupSet:!0,title:null,onNextQuestion:s,linterContext:this.props.linterContext},this.state.currentGroup)]})}};As.defaultProps={gradedGroups:[],linterContext:q};let Un=As;const Aa=function(i,e){return{groups:i.gradedGroups.map(e)}},Na={name:"graded-group-set",displayName:"Graded group set (articles only)",widget:Un,traverseChildWidgets:Aa,hidden:!1,tracking:"all",isLintable:!0},ee=S.StyleSheet.create({top:{display:"flex",flexDirection:"row"},spacer:{flex:1},title:{fontSize:12,color:B.offBlack64,textTransform:"uppercase",marginBottom:11,letterSpacing:.8},indicatorContainer:{display:"flex",flexDirection:"row",listStyle:"none",margin:"unset",paddingInlineStart:"unset",flexWrap:"wrap"},indicator:{width:24,height:24},indicatorButton:{width:"100%",height:"100%",display:"flex",flexWrap:"wrap",placeContent:"center",cursor:"pointer",":focus":{outline:"none"}},indicatorDot:{boxSizing:"content-box",width:10,height:10,borderRadius:"100%",borderWidth:2,borderColor:B.blue,borderStyle:"solid"},indicatorDotFocused:{borderWidth:5,borderStyle:"double"},indicatorDotActive:{backgroundColor:B.blue,width:"100%",height:"100%"},container:{borderTop:`1px solid ${Pt}`,borderBottom:`1px solid ${Pt}`,backgroundColor:Qi,marginLeft:le,marginRight:le,paddingBottom:ie,paddingLeft:ie,paddingRight:ie,paddingTop:10,width:"auto"}}),Fa=V.Plot,nr={url:null};function gi(i){let e=i[0],t=i[1],n=i[2];const s=i[3];e<0&&(e*=-1,t*=-1,n*=-1);const r=2*Math.PI;for(t<0&&(t*=-1,n*=-1,n+=r/2);n>0;)n-=r;for(;n<0;)n+=r;return[e,t,n,s]}function fi(i){let e=i[0],t=i[1],n=i[2];const s=i[3];e<0&&(e*=-1,t*=-1,n*=-1);const r=Math.PI;for(t<0&&(t*=-1,n*=-1,n+=r/2);n>0;)n-=r;for(;n<0;)n+=r;return[e,t,n,s]}const Te={areEqual:function(i,e){return E.deepEq(i,e)},Movable:Fa,getPropsForCoeffs:function(i){return{fn:c.partial(this.getFunctionForCoeffs,i)}}},Oa=c.extend({},Te,{url:"https://ka-perseus-graphie.s3.amazonaws.com/67aaf581e6d9ef9038c10558a1f70ac21c11c9f8.png",defaultCoords:[[.25,.75],[.75,.75]],getCoefficients:function(i){const e=i[0],t=i[1],n=t[0]-e[0],s=t[1]-e[1];if(n===0)return;const r=s/n,o=t[1]-r*t[0];return[r,o]},getFunctionForCoeffs:function(i,e){const t=i[0],n=i[1];return t*e+n},getEquationString:function(i){const e=this.getCoefficients(i),t=e[0],n=e[1];return"y = "+t.toFixed(3)+"x + "+n.toFixed(3)}}),La=c.extend({},Te,{url:"https://ka-perseus-graphie.s3.amazonaws.com/e23d36e6fc29ee37174e92c9daba2a66677128ab.png",defaultCoords:[[.5,.5],[.75,.75]],Movable:V.Parabola,getCoefficients:function(i){const e=i[0],t=i[1],n=e[0],s=e[1],r=(t[1]-s)/((t[0]-n)*(t[0]-n)),o=-2*n*r,a=r*n*n+s;return[r,o,a]},getFunctionForCoeffs:function(i,e){const t=i[0],n=i[1],s=i[2];return(t*e+n)*e+s},getPropsForCoeffs:function(i){return{a:i[0],b:i[1],c:i[2]}},getEquationString:function(i){const e=this.getCoefficients(i),t=e[0],n=e[1],s=e[2];return"y = "+t.toFixed(3)+"x^2 + "+n.toFixed(3)+"x + "+s.toFixed(3)}}),Va=c.extend({},Te,{url:"https://ka-perseus-graphie.s3.amazonaws.com/3d68e7718498475f53b206c2ab285626baf8857e.png",defaultCoords:[[.5,.5],[.6,.6]],Movable:V.Sinusoid,getCoefficients:function(i){const e=i[0],t=i[1],n=t[1]-e[1],s=Math.PI/(2*(t[0]-e[0])),r=e[0]*s,o=e[1];return[n,s,r,o]},getFunctionForCoeffs:function(i,e){const t=i[0],n=i[1],s=i[2],r=i[3];return t*Math.sin(n*e-s)+r},getPropsForCoeffs:function(i){return{a:i[0],b:i[1],c:i[2],d:i[3]}},getEquationString:function(i){const e=this.getCoefficients(i),t=e[0],n=e[1],s=e[2],r=e[3];return"y = "+t.toFixed(3)+" sin("+n.toFixed(3)+"x - "+s.toFixed(3)+") + "+r.toFixed(3)},areEqual:function(i,e){return E.deepEq(gi(i),gi(e))}}),Da=c.extend({},Te,{url:"https://ka-perseus-graphie.s3.amazonaws.com/7db80d23c35214f98659fe1cf0765811c1bbfbba.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(i){const e=i[0],t=i[1],n=t[1]-e[1],s=Math.PI/(4*(t[0]-e[0])),r=e[0]*s,o=e[1];return[n,s,r,o]},getFunctionForCoeffs:function(i,e){const t=i[0],n=i[1],s=i[2],r=i[3];return t*Math.tan(n*e-s)+r},getEquationString:function(i){const e=this.getCoefficients(i),t=e[0],n=e[1],s=e[2],r=e[3];return"y = "+t.toFixed(3)+" sin("+n.toFixed(3)+"x - "+s.toFixed(3)+") + "+r.toFixed(3)},areEqual:function(i,e){return E.deepEq(fi(i),fi(e))}}),sr=c.extend({},Te,{url:"https://ka-perseus-graphie.s3.amazonaws.com/9cbfad55525e3ce755a31a631b074670a5dad611.png",defaultCoords:[[.5,.55],[.75,.75]],defaultAsymptote:[[0,.5],[1,.5]],extraCoordConstraint:function(i,e,t,n,s){const r=c.head(n)[1];return c.all(t,o=>o[1]!==r)},extraAsymptoteConstraint:function(i,e,t,n,s){const r=i[1];if(c.all(t,p=>p[1]>r)||c.all(t,p=>p[1]<r))return[e[0],r];const a=e[1];if(c.all(t,p=>p[1]>a)){const p=c.min(c.map(t,h=>h[1]));return[e[0],p-s.snapStep[1]]}const l=c.max(c.map(t,p=>p[1]));return[e[0],l+s.snapStep[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(i,e){const t=i[0],n=i[1],s=c.head(e)[1],r=Math.log((t[1]-s)/(n[1]-s))/(t[0]-n[0]);return[(t[1]-s)/Math.exp(r*t[0]),r,s]},getFunctionForCoeffs:function(i,e){const t=i[0],n=i[1],s=i[2];return t*Math.exp(n*e)+s},getEquationString:function(i,e){if(!e)return null;const t=this.getCoefficients(i,e),n=t[0],s=t[1],r=t[2];return"y = "+n.toFixed(3)+"e^("+s.toFixed(3)+"x) + "+r.toFixed(3)}}),qa=c.extend({},Te,{url:"https://ka-perseus-graphie.s3.amazonaws.com/f6491e99d34af34d924bfe0231728ad912068dc3.png",defaultCoords:[[.55,.5],[.75,.75]],defaultAsymptote:[[.5,0],[.5,1]],extraCoordConstraint:function(i,e,t,n,s){const r=c.head(n)[0];return c.all(t,o=>o[0]!==r)&&t[0][1]!==t[1][1]},extraAsymptoteConstraint:function(i,e,t,n,s){const r=i[0];if(c.all(t,p=>p[0]>r)||c.all(t,p=>p[0]<r))return[r,e[1]];const a=e[0];return c.all(t,p=>p[0]>a)?[c.min(c.map(t,h=>h[0]))-s.snapStep[0],e[1]]:[c.max(c.map(t,p=>p[0]))+s.snapStep[0],e[1]]},allowReflectOverAsymptote:!0,getCoefficients:function(i,e){const t=a=>[a[1],a[0]],n=sr.getCoefficients(c.map(i,t),c.map(e,t)),s=-n[2]/n[0],r=1/n[0];return[1/n[1],r,s]},getFunctionForCoeffs:function(i,e,t){const n=i[0],s=i[1],r=i[2];return n*Math.log(s*e+r)},getEquationString:function(i,e){if(!e)return null;const t=this.getCoefficients(i,e),n=t[0],s=t[1],r=t[2];return"y = ln("+n.toFixed(3)+"x + "+s.toFixed(3)+") + "+r.toFixed(3)}}),Ha=c.extend({},Te,{url:"https://ka-perseus-graphie.s3.amazonaws.com/8256a630175a0cb1d11de223d6de0266daf98721.png",defaultCoords:[[.5,.5],[.75,.75]],getCoefficients:function(i){const e=i[0],t=i[1],n=t[0]-e[0],s=t[1]-e[1];if(n===0)return;let r=Math.abs(s/n);t[1]<e[1]&&(r*=-1);const o=e[0],a=e[1];return[r,o,a]},getFunctionForCoeffs:function(i,e){const t=i[0],n=i[1],s=i[2];return t*Math.abs(e-n)+s},getEquationString:function(i){const e=this.getCoefficients(i),t=e[0],n=e[1],s=e[2];return"y = "+t.toFixed(3)+"| x - "+n.toFixed(3)+"| + "+s.toFixed(3)}}),ir={linear:Oa,quadratic:La,sinusoid:Va,tangent:Da,exponential:sr,logarithm:qa,absolute_value:Ha},Ua=c.keys(ir);function ye(i){return ir[i]}const Wn=(i,e)=>{if(i.type!==e.correct.type)return{type:"points",earned:0,total:1,message:null};if(i.coords==null)return{type:"invalid",message:null};const t=ye(i.type),n=t.getCoefficients(i.coords,i.asymptote),s=t.getCoefficients(e.correct.coords,e.correct.asymptote);return n==null||s==null?{type:"invalid",message:null}:t.areEqual(n,s)?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}},Bn=i=>{const e=i.plot;return e.type&&e.coords&&ye(e.type).getEquationString(e.coords,e.asymptote)||""},rr=(i,e,t,n)=>{const s=function(r,o){return Math.floor((r[1]-r[0])/o)};return i.map(r=>{const o=r.map((a,u)=>{const l=e[u],p=t[u],h=s(l,p),g=Math.round(a*h);return l[0]+p*g});return vo(o,n)})},ks=(i,e,t,n)=>i&&rr(i,e,t,n),dn=(i,e)=>{const t=ye(i),n=[1,1],s=E.snapStepFromGridStep(n);return{type:i,asymptote:ks(t.defaultAsymptote,e.range,e.step,s),coords:null}},_t=c.first,zn=(i,e)=>{const t=i.gridStep||E.getGridStep(i.range,i.step,e),n=i.snapStep||E.snapStepFromGridStep(t);return{gridStep:t,snapStep:n}},or={labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:nr,markings:"graph",rulerLabel:"",rulerTicks:10,valid:!0,showTooltips:!1},mi=dn("linear",or),ar={graph:or,plot:mi,availableTypes:[mi.type]},Et=i=>{const e=i.charAt(0).toUpperCase()+i.substring(1),t=be().staticUrl;return{value:i,title:e,content:d("img",{src:t(ye(i).url),alt:e})}};try{ye.displayName="functionForType",ye.__docgenInfo={description:"",displayName:"functionForType",props:{}}}catch{}try{Bn.displayName="getEquationString",Bn.__docgenInfo={description:"",displayName:"getEquationString",props:{}}}catch{}try{_t.displayName="chooseType",_t.__docgenInfo={description:"",displayName:"chooseType",props:{}}}catch{}try{Et.displayName="typeToButton",Et.__docgenInfo={description:"",displayName:"typeToButton",props:{}}}catch{}const ad=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_BACKGROUND_IMAGE:nr,DEFAULT_GRAPHER_PROPS:ar,allTypes:Ua,chooseType:_t,defaultPlotProps:dn,functionForType:ye,getEquationString:Bn,getGridAndSnapSteps:zn,maybePointsFromNormalized:ks,pointsFromNormalized:rr,typeToButton:Et,validate:Wn},Symbol.toStringTag,{value:"Module"})),yi=V.MovablePoint,Wa=V.MovableLine;function Ba(i,e,t){const n=(s,r,o)=>(r[0]-s[0])*(o[1]-s[1])-(o[0]-s[0])*(r[1]-s[1]);return n(t[0],t[1],e)>0!=n(t[0],t[1],i)>0}const za={padding:"5px 5px"},Ns=class Ns extends b.Component{constructor(){super(...arguments),this._coords=()=>{const e=this.props,t=e.graph,n=e.model&&ks(e.model.defaultCoords,t.range,t.step,t.snapStep);return e.coords||n||null},this._asymptote=()=>this.props.asymptote,this.change=(...e)=>W.apply(this,e),this.renderPlot=()=>{const e=this.props.model,t=this.props.graph.range[0],n={stroke:this.props.isMobile?C.BLUE_C:C.DYNAMIC,...this.props.isMobile?{"stroke-width":3}:{}},s=e.getCoefficients(this._coords(),this._asymptote());if(!s)return;const r=e.getPropsForCoeffs(s,t);return b.createElement(e.Movable,{...r,key:this.props.model.url,range:t,style:n})},this.renderAsymptote=()=>{const e=this.props.model,t=this.props.graph,n=this._asymptote(),s={strokeDasharray:"- "};return n&&d(Wa,{onMove:(r,o)=>{const a=js(r,o),u=c.map(this._asymptote(),l=>En(l,a));this.props.onChange({asymptote:u})},constraints:[P.MovableLine.constraints.bound(),P.MovableLine.constraints.snap(),(r,o)=>{const a=js(r,o),u=c.map(this._asymptote(),l=>En(l,a));return e.extraAsymptoteConstraint?e.extraAsymptoteConstraint(r,o,this._coords(),u,t):!0}],normalStyle:s,highlightStyle:s,children:c.map(n,(r,o)=>d(yi,{coord:r,static:!0,draw:null,extendLine:!0,showHairlines:this.props.showHairlines,hideHairlines:this.props.hideHairlines,showTooltips:this.props.showTooltips,isMobile:this.props.isMobile},`asymptoteCoord-${o}`))})}}render(){const e=(o,a)=>d(yi,{coord:o,static:this.props.static,constraints:[P.MovablePoint.constraints.bound(),P.MovablePoint.constraints.snap(),u=>{const l=c.all(this._coords(),(p,h)=>a===h||!p||!Ss(u[0],p[0]));if(!l)return!1;if(this.props.model&&this.props.model.extraCoordConstraint){const p=this.props.model.extraCoordConstraint,h=c.clone(this._coords()),g=c.clone(h[a]);return h[a]=u,p(u,g,h,this._asymptote(),this.props.graph)}return l}],onMove:(u,l)=>{let p;const h=this._asymptote();h&&this.props.model.allowReflectOverAsymptote&&Ba(u,l,h)?p=c.map(this._coords(),g=>xo(g,h)):p=c.clone(this._coords()),p[a]=u,this.props.onChange({coords:p})},showHairlines:this.props.showHairlines,hideHairlines:this.props.hideHairlines,showTooltips:this.props.showTooltips,isMobile:this.props.isMobile},a),t=c.map(this._coords(),e),n=this.props.graph.box,s=this.props.graph.backgroundImage;let r=null;if(s.url){const o=n[0]/lo.defaultBoxSize;r=d(an,{src:s.url,width:s.width,height:s.height,scale:o})}return d("div",{className:"perseus-widget perseus-widget-grapher",style:{width:n[0],height:n[1],boxSizing:"initial"},children:w("div",{className:"graphie-container above-scratchpad",style:{width:n[0],height:n[1]},children:[r,w(V,{...this.props.graph,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable,children:[this.props.model&&this.renderPlot(),this.props.model&&this.renderAsymptote(),this.props.model&&t]})]})})}};Ns.defaultProps={graph:{range:[[-10,10],[-10,10]],step:[1,1]},coords:null,asymptote:null,isMobile:!1};let $n=Ns;const $t=class $t extends b.Component{constructor(){super(...arguments),this.handlePlotChanges=e=>{const t=c.extend({},this.props.plot,e);this.props.onChange({plot:t}),this.props.trackInteraction()},this.handleActiveTypeChange=e=>{const t=this.props.graph,n=c.extend({},this.props.plot,dn(e,t));this.props.onChange({plot:n})},this._setupGraphie=(e,t)=>{const n=this.props.apiOptions.isMobile;if(t.markings==="graph"?(e.graphInit({range:t.range,scale:c.pluck(t.gridConfig,"scale"),axisArrows:"<->",labelFormat:function(s){return"\\small{"+s+"}"},gridStep:t.gridStep,snapStep:t.snapStep,tickStep:n?this._calculateMobileTickStep(t.gridStep,t.step,t.range):c.pluck(t.gridConfig,"tickStep"),labelStep:1,unityLabels:c.pluck(t.gridConfig,"unityLabel"),isMobile:n}),e.label([0,t.range[1][1]],t.labels[1],n?"below right":"above"),e.label([t.range[0][1],0],t.labels[0],n?"above left":"right")):t.markings==="grid"?e.graphInit({range:t.range,scale:c.pluck(t.gridConfig,"scale"),gridStep:t.gridStep,axes:!1,ticks:!1,labels:!1,isMobile:n}):t.markings==="none"&&e.init({range:t.range,scale:c.pluck(t.gridConfig,"scale")}),this.props.apiOptions.isMobile){const s={normalStyle:{strokeWidth:1}};this.horizHairline=new ot(e,[0,0],[0,0],s),this.horizHairline.attr({stroke:C.INTERACTIVE}),this.horizHairline.hide(),this.vertHairline=new ot(e,[0,0],[0,0],s),this.vertHairline.attr({stroke:C.INTERACTIVE}),this.vertHairline.hide()}},this.showHairlines=e=>{this.props.apiOptions.isMobile&&this.props.markings!=="none"&&(this.horizHairline.moveTo([this.props.graph.range[0][0],e[1]],[this.props.graph.range[0][1],e[1]]),this.horizHairline.show(),this.vertHairline.moveTo([e[0],this.props.graph.range[1][0]],[e[0],this.props.graph.range[1][1]]),this.vertHairline.show())},this.hideHairlines=()=>{this.props.apiOptions.isMobile&&(this.horizHairline.hide(),this.vertHairline.hide())}}render(){const e=this.props.plot.type,t=this.props.plot.coords,n=this.props.plot.asymptote,s=d("div",{style:za,className:"above-scratchpad",children:d(ko,{value:e,allowEmpty:!0,buttons:c.map(this.props.availableTypes,Et),onChange:this.handleActiveTypeChange})}),r=Bi(this.props.containerSizeClass),o={...this.props.graph,...zn(this.props.graph,r[0]),gridConfig:this._getGridConfig({...this.props.graph,box:r,...zn(this.props.graph,r[0])})},a={graph:{box:r,range:o.range,step:o.step,snapStep:o.snapStep,backgroundImage:o.backgroundImage,options:o,setup:this._setupGraphie},onChange:this.handlePlotChanges,model:e&&ye(e),coords:t,asymptote:n,static:this.props.static,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile,showTooltips:this.props.graph.showTooltips,showHairlines:this.showHairlines,hideHairlines:this.hideHairlines};return w("div",{children:[d($n,{...a}),this.props.availableTypes.length>1&&s]})}_getGridConfig(e){return e.step.map((t,n)=>E.gridDimensionConfig(t,e.range[n],e.box[n],e.gridStep[n]))}_calculateMobileTickStep(e,t,n){const s=E.constrainedTickStepsFromTickSteps(t,n);return s[0]=s[0]/e[0],s[1]=s[1]/e[1],s}simpleValidate(e){return Wn(this.getUserInput(),e)}getUserInput(){return $t.getUserInputFromProps(this.props)}focus(){}static validate(e,t){return Wn(e,t)}static getUserInputFromProps(e){return e.plot}};$t.defaultProps=ar;let Gn=$t;const lr=i=>{const e={availableTypes:i.availableTypes,graph:i.graph};if(e.availableTypes.length===1){const t=e.graph,n=_t(e.availableTypes);e.plot=dn(n,t)}return e},$a=i=>({...lr(i),availableTypes:[i.correct.type],plot:i.correct}),Ga={name:"grapher",displayName:"Grapher",widget:Gn,transform:lr,staticTransform:$a},Fs=class Fs extends b.Component{constructor(){super(...arguments),this.change=(...e)=>W.apply(this,e),this.getUserInput=()=>{var e;return(e=this.rendererRef)==null?void 0:e.getUserInput()},this.getSerializedState=()=>{var e;return(e=this.rendererRef)==null?void 0:e.getSerializedState()},this.restoreSerializedState=(e,t)=>{var n;return(n=this.rendererRef)==null||n.restoreSerializedState(e,t),null},this.simpleValidate=e=>{var t;return(t=this.rendererRef)==null?void 0:t.score()},this.getInputPaths=()=>{var e;return(e=this.rendererRef)==null?void 0:e.getInputPaths()},this.setInputValue=(e,t,n)=>{var s;return(s=this.rendererRef)==null?void 0:s.setInputValue(e,t,n)},this.focus=()=>{var e;return(e=this.rendererRef)==null?void 0:e.focus()},this.focusInputPath=e=>{var t;(t=this.rendererRef)==null||t.focusPath(e)},this.blurInputPath=e=>{var t;(t=this.rendererRef)==null||t.blurPath(e)},this.showRationalesForCurrentlySelectedChoices=()=>{var e;(e=this.rendererRef)==null||e.showRationalesForCurrentlySelectedChoices()}}componentDidMount(){this.forceUpdate()}render(){var l;const e={...G.defaults,...this.props.apiOptions,onFocusChange:(p,h)=>{h&&this.props.onBlur(h),p&&this.props.onFocus(p)}},n=this.props.findWidgets("group").indexOf(this),s=this.props.apiOptions.groupAnnotator(n,this.props.widgetId),r=p=>{this.rendererRef&&this.change("widgets",this.rendererRef.props.widgets)},o=(l=this.rendererRef)==null?void 0:l.score(),a=o&&o.type!=="invalid",u=o&&o.type==="invalid";return w("div",{className:ce({"perseus-group":!0,"perseus-group-valid-answer":a,"perseus-group-invalid-answer":u}),children:[s,d(O,{content:this.props.content,widgets:this.props.widgets,images:this.props.images,ref:p=>this.rendererRef=p,apiOptions:e,findExternalWidgets:this.props.findWidgets,reviewMode:!!this.props.reviewModeRubric,onInteractWithWidget:r,linterContext:this.props.linterContext}),this.props.icon&&d("div",{className:"group-icon",children:this.props.icon})]})}};Fs.defaultProps={content:"",widgets:{},images:{},linterContext:q};let Yn=Fs;const Ya=function(i,e){return{...i,...e(i)}},Ka={name:"group",displayName:"Group (SAT only)",widget:Yn,traverseChildWidgets:Ya,hidden:!1,isLintable:!0},{updateQueryString:yt}=E,Qe=class Qe extends b.Component{constructor(){super(...arguments),this.getUserInput=()=>un.getUserInput.call(this),this.handleMessageEvent=e=>{let t={};try{t=JSON.parse(e.originalEvent.data)}catch{return}if(c.isUndefined(t.testsPassed))return;const n=t.testsPassed?"correct":"incorrect";this.change({status:n,message:t.message})},this.change=(...e)=>W.apply(this,e),this.simpleValidate=e=>Qe.validate(this.getUserInput(),e)}componentDidMount(){R(window).on("message",this.handleMessageEvent)}componentWillUnmount(){R(window).off("message",this.handleMessageEvent)}render(){const e={width:String(this.props.width),height:String(this.props.height)},{InitialRequestUrl:t}=be();Object.entries(e).forEach(([r,o])=>{!o.endsWith("%")&&!o.endsWith("px")&&(e[r]=o+"px")});let n=this.props.url;if(n&&n.length&&n.indexOf("http")!==0&&(n="https://www.khanacademy.org/computer-programming/program/"+n+"/embedded?buttons=no&embed=yes&editor=no&author=no",n=yt(n,"width",this.props.width),n=yt(n,"height",this.props.height),n=yt(n,"origin",t.origin)),this.props.settings){const r={};c.each(this.props.settings,function(o){o.name&&o.value&&(r[o.name]=o.value)}),n=yt(n,"settings",JSON.stringify(r))}let s="allow-same-origin allow-scripts";return s+=" allow-top-navigation",d("iframe",{sandbox:s,style:e,src:n,allowFullScreen:this.props.allowFullScreen})}};Qe.propTypes={...dt,width:m.oneOfType([m.string,m.number]),height:m.oneOfType([m.string,m.number]),url:m.string,settings:m.array,status:m.oneOf(["incomplete","incorrect","correct"]),message:m.string,allowFullScreen:m.bool,allowTopNavigation:m.bool},Qe.defaultProps={status:"incomplete",message:null,allowFullScreen:!1,allowTopNavigation:!1};let Rt=Qe;c.extend(Rt,{validate:function(i,e){return i.status==="correct"?{type:"points",earned:1,total:1,message:i.message||null}:i.status==="incorrect"?{type:"points",earned:0,total:1,message:i.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}});const Xa={name:"iframe",displayName:"Iframe (deprecated)",widget:Rt,hidden:!0},bi=400,vi=[0,10],ja={url:null,width:0,height:0},Qa=["block","full-width"],cr="block",Gt=class Gt extends b.Component{constructor(){super(...arguments),this.change=(...e)=>W.apply(this,e),this.getUserInput=()=>null,this.simpleValidate=e=>Gt.validate(this.getUserInput(),e),this.focus=()=>{}}render(){let e,t;const{apiOptions:n}=this.props,s=this.props.backgroundImage;if(s.url){const a=s.url;e=d(Zi.Consumer,{children:({setAssetStatus:u})=>d(an,{src:a,alt:this.props.alt,overrideAriaHidden:!0,width:s.width,height:s.height,preloader:n.imagePreloader,extraGraphie:{box:this.props.box,range:this.props.range,labels:this.props.labels},trackInteraction:this.props.trackInteraction,zoomToFullSizeOnMobile:n.isMobile,constrainHeight:n.isMobile,allowFullBleed:n.isMobile,setAssetStatus:u})})}if(this.props.alt&&(t=d("span",{className:"perseus-sr-only",children:d(O,{content:this.props.alt,apiOptions:n,linterContext:this.props.linterContext})})),n.isMobile){let a;if(this.props.title||this.props.caption){let u=this.props.title;u&&(this.props.caption&&!/[.?!"']\s*$/.test(u)&&(u+="."),u=`**${u}** `);const l=ce({"perseus-image-caption":!0,"has-title":!!u}),p=this.props.alignment,g=p==="block"||p==="full-width"?null:"0 !important";a=d("figcaption",{className:l,style:{maxWidth:s.width},children:d("div",{style:{minWidth:g},children:d(O,{content:u+this.props.caption,apiOptions:n,linterContext:this.props.linterContext})})})}return w("figure",{className:"perseus-image-widget",style:{maxWidth:s.width},children:[e,t,a]})}let r,o;return this.props.title&&(r=d("div",{className:"perseus-image-title",children:d(O,{content:this.props.title,apiOptions:n,linterContext:this.props.linterContext})})),this.props.caption&&(o=d("figcaption",{className:"perseus-image-caption",style:{maxWidth:s.width},children:d(O,{content:this.props.caption,apiOptions:n,linterContext:this.props.linterContext})})),w("figure",{className:"perseus-image-widget",style:{maxWidth:s.width},children:[r,e,t,o]})}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}};Gt.defaultProps={alignment:cr,title:"",range:[vi,vi],box:[bi,bi],backgroundImage:ja,labels:[],alt:"",caption:"",linterContext:q};let Kn=Gt;const Za={name:"image",accessible:i=>{const e=i.backgroundImage;return!(e&&e.url&&!i.alt)},defaultAlignment:cr,supportedAlignments:Qa,displayName:"Image",widget:Kn,isLintable:!0},In=V.Label,Ja=V.Line,He=V.MovablePoint,el=V.MovableLine,tl=V.Plot,nl=V.PlotParametric,sl=V.Point,il=V.Rect,{unescapeMathMode:rl}=E,pr=(i,e)=>{e=e||{};let t=i+"||"+e.decimal_separator+"||";const n=e.functions,s=n?n.length:0;for(let r=0;r<s;r++)t+=n[r]+"|";return t},xi=Object.create(null),ae=(i,e)=>{const t=pr(i,e);let n=xi[t];return n||(n=st(i,e),xi[t]=n,n)},Ci=Object.create(null),wi=(i,e)=>{const t=pr(i,e);let n=Ci[t];if(n)return n;const s=st(i,e).expr;return n=s?s.compile():function(){return 0},Ci[t]=n,n},Yt=class Yt extends b.Component{constructor(){super(...arguments),this.state={variables:Si(this.props.elements),functions:Ii(this.props.elements)},this._setupGraphie=(e,t)=>{e.graphInit(c.extend({},t,{grid:c.contains(["graph","grid"],this.props.graph.markings),axes:c.contains(["graph"],this.props.graph.markings),ticks:c.contains(["graph"],this.props.graph.markings),labels:c.contains(["graph"],this.props.graph.markings),labelFormat:function(n){return"\\small{"+n+"}"},axisArrows:"<->",unityLabels:!1}))},this._updatePointLocation=(e,t)=>{const n=c.clone(this.state.variables);n["x_"+e]=t[0],n["y_"+e]=t[1],this.setState({variables:n}),this.props.trackInteraction()},this._updateLineLocation=(e,t)=>{const n=this._eval("("+e.endX+")-("+e.startX+")"),s=this._eval("("+e.endY+")-("+e.startY+")"),r=En(t,[n,s]),o=c.clone(this.state.variables);o["x_"+e.startSubscript]=t[0],o["y_"+e.startSubscript]=t[1],o["x_"+e.endSubscript]=r[0],o["y_"+e.endSubscript]=r[1],this.setState({variables:o}),this.props.trackInteraction()},this._eval=(e,t)=>{const n=wi(e,{functions:this.state.functions}),s=c.extend({},this.state.variables,t);return c.each(c.keys(s),r=>{if(c.isString(s[r])){const o=wi(s[r],{functions:this.state.functions});s[r]=function(a){return o(c.extend({},s,{x:a}))}}}),n(s)||0},this._extractVars=e=>{if(e==null)return[];let t=[];return c.each(e.args(),function(n){n&&n.constructor.name==="Expr"&&(t=t.concat(this._extractVars(n)))},this),e.name()==="Var"&&t.push(e.prettyPrint()),t},this.change=(...e)=>W.apply(this,e),this.getUserInput=()=>({}),this.simpleValidate=e=>Yt.validate(this.getUserInput(),e)}UNSAFE_componentWillReceiveProps(e){c.isEqual(this.props.elements,e.elements)||this.setState({variables:Si(e.elements),functions:Ii(e.elements)})}render(){const e=this.props.graph.range;let t=this.props.graph.labels;return this.props.graph.markings==="graph"&&(t=this.props.graph.labels.map(n=>n.startsWith("$")&&n.endsWith("$")?n.slice(1,-1):n)),w(V,{box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,children:[this.props.graph.markings==="graph"&&d(In,{coord:[0,e[1][1]],text:t[1],direction:"above"}),this.props.graph.markings==="graph"&&d(In,{coord:[e[0][1],0],text:t[0],direction:"right"}),c.map(this.props.elements,function(n,s){if(n.type==="point")return d(sl,{coord:[this._eval(n.options.coordX),this._eval(n.options.coordY)],color:n.options.color},n.key);if(n.type==="line"){const r=[this._eval(n.options.startX),this._eval(n.options.startY)],o=[this._eval(n.options.endX),this._eval(n.options.endY)];return d(Ja,{start:r,end:o,style:{stroke:n.options.color,strokeWidth:n.options.strokeWidth,strokeDasharray:n.options.strokeDasharray,arrows:n.options.arrows}},n.key)}if(n.type==="movable-point"){const r=[o=>{const a=Math.max(this._eval(n.options.constraintXMin),Math.min(this._eval(n.options.constraintXMax),o[0])),u=Math.max(this._eval(n.options.constraintYMin),Math.min(this._eval(n.options.constraintYMax),o[1]));return[a,u]}];return n.options.constraint==="snap"?r.push(He.constraints.snap(n.options.snap)):n.options.constraint==="x"?r.push(o=>[this._eval(n.options.constraintFn,{y:o[1]}),o[1]]):n.options.constraint==="y"&&r.push(o=>[o[0],this._eval(n.options.constraintFn,{x:o[0]})]),d(He,{coord:[this.state.variables["x_"+n.options.varSubscript],this.state.variables["y_"+n.options.varSubscript]],constraints:r,foo_x:n.options.constraint,foo_y:n.options.constraintFn,foo_z:n.options.snap,onMove:c.partial(this._updatePointLocation,n.options.varSubscript)},n.key)}if(n.type==="movable-line"){const r=[u=>{const l=Math.max(this._eval(n.options.constraintXMin),Math.min(this._eval(n.options.constraintXMax),u[0])),p=Math.max(this._eval(n.options.constraintYMin),Math.min(this._eval(n.options.constraintYMax),u[1]));return[l,p]}];n.options.constraint==="snap"?r.push(He.constraints.snap(n.options.snap)):n.options.constraint==="x"?r.push(u=>[this._eval(n.options.constraintFn,{y:u[1]}),u[1]]):n.options.constraint==="y"&&r.push(u=>[u[0],this._eval(n.options.constraintFn,{x:u[0]})]);const o=[this.state.variables["x_"+n.options.startSubscript],this.state.variables["y_"+n.options.startSubscript]],a=[this.state.variables["x_"+n.options.endSubscript],this.state.variables["y_"+n.options.endSubscript]];return w(el,{constraints:r,onMove:c.bind(this._updateLineLocation,this,n.options),foo_x:n.options.constraint,foo_y:n.options.constraintFn,foo_z:n.options.snap,children:[d(He,{coord:o,static:!0,normalStyle:{stroke:"none",fill:"none"}}),d(He,{coord:a,static:!0,normalStyle:{stroke:"none",fill:"none"}})]},n.key)}if(n.type==="function"){const r=l=>this._eval(n.options.value,{x:l}),o=c.without(this._extractVars(ae(n.options.value).expr),"x"),a=c.object(o,c.map(o,l=>this.state.variables[l])),u=[this._eval(n.options.rangeMin,this.state.variables),this._eval(n.options.rangeMax,this.state.variables)];return d(tl,{fn:r,foo_fn:n.options.value,foo_varvalues:a,range:u,style:{stroke:n.options.color,strokeWidth:n.options.strokeWidth,strokeDasharray:n.options.strokeDasharray,plotPoints:100}},n.key)}if(n.type==="parametric"){const r=l=>[this._eval(n.options.x,{t:l}),this._eval(n.options.y,{t:l})],o=c.without(this._extractVars(ae(n.options.x).expr).concat(this._extractVars(ae(n.options.y).expr)),"t"),a=c.object(o,c.map(o,l=>this.state.variables[l])),u=[this._eval(n.options.rangeMin,this.state.variables),this._eval(n.options.rangeMax,this.state.variables)];return d(nl,{fn:r,foo_fnx:n.options.x,foo_fny:n.options.y,foo_varvalues:a,range:u,style:{stroke:n.options.color,strokeWidth:n.options.strokeWidth,strokeDasharray:n.options.strokeDasharray,plotPoints:100}},n.key)}if(n.type==="label"){const r=[this._eval(n.options.coordX),this._eval(n.options.coordY)];return d(In,{coord:r,text:rl(n.options.label),style:{color:n.options.color}},s+1)}if(n.type==="rectangle")return d(il,{x:this._eval(n.options.coordX),y:this._eval(n.options.coordY),width:c.max([this._eval(n.options.width),0]),height:c.max([this._eval(n.options.height),0]),style:{stroke:"none",fill:n.options.color}},s+1)},this)]})}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}};Yt.defaultProps={graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]};let Xn=Yt;const Si=i=>{const e={};return c.each(c.where(i,{type:"movable-point"}),t=>{const n=t.options.varSubscript,s=ae(t.options.startX||"0").expr,r=ae(t.options.startY||"0").expr;let o=0,a=0;s&&(o=s.eval({})||0),r&&(a=r.eval({})||0),e["x_"+n]=o,e["y_"+n]=a}),c.each(c.where(i,{type:"movable-line"}),t=>{const n=t.options.startSubscript,s=t.options.endSubscript,r=ae(t.options.startX||"0").expr,o=ae(t.options.startY||"0").expr,a=ae(t.options.endX||"0").expr,u=ae(t.options.endY||"0").expr;let l=0,p=0,h=0,g=0;r&&(l=r.eval({})||0),o&&(p=o.eval({})||0),a&&(h=a.eval({})||0),u&&(g=u.eval({})||0),e["x_"+n]=l,e["y_"+n]=p,e["x_"+s]=h,e["y_"+s]=g}),c.each(c.where(i,{type:"function"}),t=>{e[t.options.funcName]=t.options.value}),e},Ii=i=>c.map(c.where(i,{type:"function"}),e=>e.options.funcName),ol={name:"interaction",displayName:"Interaction",widget:Xn,transform:c.identity,hidden:!0};var al="Expected a function",ki=NaN,ll="[object Symbol]",cl=/^\s+|\s+$/g,pl=/^[-+]0x[0-9a-f]+$/i,ul=/^0b[01]+$/i,dl=/^0o[0-7]+$/i,hl=parseInt,gl=typeof ft=="object"&&ft&&ft.Object===Object&&ft,fl=typeof self=="object"&&self&&self.Object===Object&&self,ml=gl||fl||Function("return this")(),yl=Object.prototype,bl=yl.toString,vl=Math.max,xl=Math.min,kn=function(){return ml.Date.now()};function Cl(i,e,t){var n,s,r,o,a,u,l=0,p=!1,h=!1,g=!0;if(typeof i!="function")throw new TypeError(al);e=Pi(e)||0,jn(t)&&(p=!!t.leading,h="maxWait"in t,r=h?vl(Pi(t.maxWait)||0,e):r,g="trailing"in t?!!t.trailing:g);function f(A){var Y=n,te=s;return n=s=void 0,l=A,o=i.apply(te,Y),o}function y(A){return l=A,a=setTimeout(k,e),p?f(A):o}function x(A){var Y=A-u,te=A-l,yn=e-Y;return h?xl(yn,r-te):yn}function T(A){var Y=A-u,te=A-l;return u===void 0||Y>=e||Y<0||h&&te>=r}function k(){var A=kn();if(T(A))return M(A);a=setTimeout(k,x(A))}function M(A){return a=void 0,g&&n?f(A):(n=s=void 0,o)}function I(){a!==void 0&&clearTimeout(a),l=0,n=u=s=a=void 0}function H(){return a===void 0?o:M(kn())}function U(){var A=kn(),Y=T(A);if(n=arguments,s=this,u=A,Y){if(a===void 0)return y(u);if(h)return a=setTimeout(k,e),f(u)}return a===void 0&&(a=setTimeout(k,e)),o}return U.cancel=I,U.flush=H,U}function jn(i){var e=typeof i;return!!i&&(e=="object"||e=="function")}function wl(i){return!!i&&typeof i=="object"}function Sl(i){return typeof i=="symbol"||wl(i)&&bl.call(i)==ll}function Pi(i){if(typeof i=="number")return i;if(Sl(i))return ki;if(jn(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=jn(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=i.replace(cl,"");var t=ul.test(i);return t||dl.test(i)?hl(i.slice(2),t?2:8):pl.test(i)?ki:+i}var Il=Cl;const kl=Po(Il),{DeprecationMixin:Pl}=E,Ml="https://ka-perseus-graphie.s3.amazonaws.com/b1452c0d79fd0f7ff4c3af9488474a0a0decb361.png",Tl={url:null},Be=E.eq,de=E.deepEq,At="unlimited";function _l(i,e){return i??e}function bt(i,e){return i<e||Be(i,e)}function vt(i){return i.replace(/(?:^|-)(.)/g,function(e,t){return t.toUpperCase()})}function El(i,e){return Math.floor((i[1]-i[0])/e)}const Rl={showGraph:function(i){return{markings:i.showGraph?"graph":"none"}}},Mi=i=>ur(i)&&(i.graph.coords==null||i.graph.coords.length===0),ur=i=>i.graph.type==="point"&&i.graph.numPoints===At||i.graph.type==="polygon"&&i.graph.numSides===At,X=(i,e)=>new it(`${i} called but current graph type is not a '${e}'`,ke.NotAllowed,{metadata:{graphType:e}}),_=class _ extends b.Component{constructor(){super(...arguments),this.state={shouldShowInstructions:Mi(this.props)},this._getShouldShowInstructions=e=>(e=e||this.props,this.isClickToAddPoints(e)&&(e.graph.coords==null||e.graph.coords.length===0)),this.deprecatedProps=Rl,this.setGraphie=e=>{this.graphie=e,this.setupGraphie()},this.handleAddPointsMouseDown=e=>{var t;if(!this.isClickToAddPoints())throw new it("handleAddPointsClick should not be registeredwhen isClickToAddPoints() is false",ke.NotAllowed);if(!this.isCoordInTrash(e)){let n;if(this.props.graph.type==="point"){if(n=this.createPointForPointsType(e,this.points.length),!n.constrain()){n.remove();return}this.points.push(n);const s=this.points.length-1;this.points[s].grab(e),this.updateCoordsFromPoints()}else if(this.props.graph.type==="polygon"){if((t=this.polygon)!=null&&t.closed())return;n=this.createPointForPolygonType(e,this.points.length),this.points.push(n);const s=this.points.length-1;this.points[s].grab(e),this.updatePolygon()}this.setState({shouldShowInstructions:!1})}},this.resetGraphie=()=>{this.shouldResetGraphie=!1,this.parabola=null,this.sinusoid=null,this.refs.graph.reset()},this.setupGraphie=()=>{var t,n;this.setTrashCanVisibility(0),this.isClickToAddPoints()&&this.setTrashCanVisibility(.5),this.props.apiOptions.isMobile&&(this.horizHairline=new ot(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:C.INTERACTIVE}),(t=this.horizHairline)==null||t.hide(),this.vertHairline=new ot(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.vertHairline.attr({stroke:C.INTERACTIVE}),(n=this.vertHairline)==null||n.hide());const e=this.props.graph.type;this["add"+vt(e)+"Controls"]()},this.showHairlines=e=>{var t,n,s,r;this.props.apiOptions.isMobile&&this.props.markings!=="none"&&((t=this.horizHairline)==null||t.moveTo([this.props.range[0][0],e[1]],[this.props.range[0][1],e[1]]),(n=this.horizHairline)==null||n.show(),(s=this.vertHairline)==null||s.moveTo([e[0],this.props.range[1][0]],[e[0],this.props.range[1][1]]),(r=this.vertHairline)==null||r.show())},this.hideHairlines=()=>{var e,t;this.props.apiOptions.isMobile&&((e=this.horizHairline)==null||e.hide(),(t=this.vertHairline)==null||t.hide())},this.setTrashCanVisibility=e=>{var n,s;const t=this.graphie;Ss(e,0)?this.trashCan&&(this.trashCan.remove(),this.trashCan=null):this.props.apiOptions.isMobile||(this.trashCan||(this.trashCan=(n=t==null?void 0:t.raphael)==null?void 0:n.image(Ml,t.xpixels-40,t.ypixels-40,40,40)),(s=this.trashCan)==null||s.attr({opacity:e}))},this.isClickToAddPoints=e=>(e=e||this.props,ur(e)),this._lineStroke=()=>this.props.isMobile?{"stroke-width":3}:{},this.addLine=e=>{const t=this,n=t.graphie,s=_.getLineCoords(t.props.graph,t.props),r=t.points=c.map(s,a=>P.addMaybeMobileMovablePoint(this,{coord:a,constraints:[P.MovablePoint.constraints.bound(),P.MovablePoint.constraints.snap()],onMove:()=>{const u=c.extend({},t.props.graph,{coords:c.invoke(r,"coord")});t.onChange({graph:u})}})),o={points:r,static:!0,normalStyle:{stroke:this.props.apiOptions.isMobile?C.BLUE_C:C.INTERACTIVE,...this._lineStroke()}};e==="line"?o.extendLine=!0:e==="ray"&&(o.extendRay=!0),t.line=P.addMovableLine(n,o),r[0].listen("constraints","isLine",a=>!pe(a,r[1].coord())),r[1].listen("constraints","isLine",a=>!pe(a,r[0].coord()))},this.removeLine=()=>{var e;c.invoke(this.points,"remove"),(e=this.line)==null||e.remove()},this.addLinearControls=()=>{this.addLine("line")},this.removeLinearControls=()=>{this.removeLine()},this.addQuadraticControls=()=>{if(this.props.graph.type!=="quadratic")throw X("addQuadraticControls","quadratic");let e=this.props.graph.coords;e||(e=_.defaultQuadraticCoords(this.props));const t=()=>{const o=c.extend({},this.props.graph,{coords:[n.coord(),s.coord(),r.coord()]});this.onChange({graph:o}),this.updateQuadratic()};let n=null;n=this.pointA=P.addMaybeMobileMovablePoint(this,{coord:e[0],constraints:[P.MovablePoint.constraints.bound(),P.MovablePoint.constraints.snap(),o=>!n||o[0]!==s.coord()[0]&&o[0]!==r.coord()[0]],onMove:t});let s=null;s=this.pointB=P.addMaybeMobileMovablePoint(this,{coord:e[1],constraints:[P.MovablePoint.constraints.bound(),P.MovablePoint.constraints.snap(),o=>!s||o[0]!==n.coord()[0]&&o[0]!==r.coord()[0]],onMove:t});let r=null;r=this.pointC=P.addMaybeMobileMovablePoint(this,{coord:e[2],constraints:[P.MovablePoint.constraints.bound(),P.MovablePoint.constraints.snap(),o=>!r||o[0]!==n.coord()[0]&&o[0]!==s.coord()[0]],onMove:t}),this.updateQuadratic()},this.updateQuadratic=()=>{var r,o,a,u,l;const e=_.getCurrentQuadraticCoefficients(this.props);if(!e)return;const t=e[0],n=e[1],s=e[2];if(this.parabola){const p=(r=this.graphie)==null?void 0:r.svgParabolaPath(t,n,s);(o=this.parabola)==null||o.attr({path:p})}else this.parabola=(a=this.graphie)==null?void 0:a.parabola(t,n,s),(u=this.parabola)==null||u.attr({stroke:this.props.apiOptions.isMobile?C.BLUE_C:C.DYNAMIC,...this._lineStroke()}),(l=this.parabola)==null||l.toBack()},this.removeQuadraticControls=()=>{var e,t,n;(e=this.pointA)==null||e.remove(),(t=this.pointB)==null||t.remove(),(n=this.pointC)==null||n.remove(),this.parabola&&(this.parabola.remove(),this.parabola=null)},this.addSinusoidControls=()=>{if(this.props.graph.type!=="sinusoid")throw X("addSinusoidControls","sinusoid");let e=this.props.graph.coords;e||(e=_.defaultSinusoidCoords(this.props));const t=()=>{const r=c.extend({},this.props.graph,{coords:[n.coord(),s.coord()]});this.onChange({graph:r}),this.updateSinusoid()};let n=null;n=this.pointA=P.addMaybeMobileMovablePoint(this,{coord:e[0],constraints:[P.MovablePoint.constraints.bound(),P.MovablePoint.constraints.snap(),r=>!n||r[0]!==s.coord()[0]],onMove:t});const s=this.pointB=P.addMaybeMobileMovablePoint(this,{coord:e[1],constraints:[P.MovablePoint.constraints.bound(),P.MovablePoint.constraints.snap(),r=>!n||r[0]!==n.coord()[0]],onMove:t});this.updateSinusoid()},this.updateSinusoid=()=>{var o,a,u,l,p;const e=_.getCurrentSinusoidCoefficients(this.props);if(!e)return;const t=e[0],n=e[1],s=e[2],r=e[3];if(this.sinusoid){const h=(o=this.graphie)==null?void 0:o.svgSinusoidPath(t,n,s,r);(a=this.sinusoid)==null||a.attr({path:h})}else this.sinusoid=(u=this.graphie)==null?void 0:u.sinusoid(t,n,s,r),(l=this.sinusoid)==null||l.attr({stroke:this.props.apiOptions.isMobile?C.BLUE_C:C.DYNAMIC,...this._lineStroke()}),(p=this.sinusoid)==null||p.toBack()},this.removeSinusoidControls=()=>{var e,t;(e=this.pointA)==null||e.remove(),(t=this.pointB)==null||t.remove(),this.sinusoid&&(this.sinusoid.remove(),this.sinusoid=null)},this.addCircleControls=()=>{const e=this.graphie,t=c.min(e.snap),n=this.circle=e==null?void 0:e.addCircleGraph({center:this.props.graph.center||[0,0],radius:this.props.graph.radius||c.min(this.props.step),snapX:e.snap[0],snapY:e.snap[1],minRadius:t,snapRadius:t});R(n).on("move",()=>{const s=c.extend({},this.props.graph,{center:n.center,radius:n.radius});this.onChange({graph:s})})},this.removeCircleControls=()=>{var e;(e=this.circle)==null||e.remove()},this.addLinearSystemControls=()=>{const e=this.graphie,t=_.getLinearSystemCoords(this.props.graph,this.props),n=[C.INTERACTIVE,C.GREEN],s=this.points=c.map(t,(r,o)=>{const a=[];for(let u=0;u<r.length;u+=1){const l=r[u];a.push(P.addMaybeMobileMovablePoint(this,{coord:l,constraints:[P.MovablePoint.constraints.bound(),P.MovablePoint.constraints.snap(),p=>{const h=a[1-u];if(h)return!pe(p,h.coord())}],onMove:()=>{const p=c.extend({},this.props.graph,{coords:c.map(this.points,h=>c.invoke(h,"coord"))});this.onChange({graph:p})},normalStyle:{fill:n[o]},highlightStyle:{fill:n[o]}}))}return a});this.lines=c.map(s,(r,o)=>P.addMovableLine(e,{points:r,static:!0,extendLine:!0,normalStyle:{stroke:n[o]}}))},this.removeLinearSystemControls=()=>{c.invoke(this.lines,"remove"),c.map(this.points,e=>c.invoke(e,"remove"))},this.isCoordInTrash=e=>{if(this.props.apiOptions.isMobile)return!1;const t=this.graphie,n=t==null?void 0:t.scalePoint(e);return n[0]>=t.xpixels-40&&n[1]>=t.ypixels-40},this.createPointForPointsType=(e,t)=>{const n=this,s=()=>{n.points=c.filter(n.points,function(o){return o!==r}),n.updateCoordsFromPoints(),setTimeout(r.remove.bind(r),0)};let r=null;return r=P.addMaybeMobileMovablePoint(this,{coord:e,constraints:[P.MovablePoint.constraints.bound(),P.MovablePoint.constraints.snap(),function(o){return c.all(n.points,function(a){return r===a||!pe(o,a.coord())})}],onMoveStart:function(){n.isClickToAddPoints()&&n.setTrashCanVisibility(1)},onMove:n.updateCoordsFromPoints,onMoveEnd:function(o){n.isClickToAddPoints()&&(n.isCoordInTrash(o)&&s(),n.setTrashCanVisibility(.5))},...this.props.apiOptions.isMobile&&n.isClickToAddPoints()?{onRemove:s}:{}}),r},this.removePoint=e=>{let t=null;return this.points=c.filter(this.points,function(n,s){return n===e?(t=s,!1):!0}),t},this.createPointForPolygonType=(e,t)=>{if(this.props.graph.type!=="polygon")throw X("createPointForPolygonType","polygon");const n=!c.contains(["angles","sides"],this.props.graph.snapTo),s=p=>(t+p+this.points.length)%this.points.length,r=()=>{var h,g;const p=this.removePoint(l);(h=this.polygon)!=null&&h.closed()&&(this.points=Zs(this.points,p),(g=this.polygon)==null||g.update({closed:!1})),this.updatePolygon(),this.clearCoords(),setTimeout(l.remove.bind(l),0)},o=kl((p,h)=>{p.state.isInitialMove=h},1e3),a=p=>{var g,f,y,x,T,k;const h=this.points.length>1&&(l===this.points[0]&&pe(p,c.last(this.points).coord())||l===c.last(this.points)&&pe(p,this.points[0].coord()));if(this.isClickToAddPoints()){if(this.isCoordInTrash(p))r();else if(h){const M=this.points.pop();this.points.length>2?((g=this.polygon)==null||g.update({closed:!0}),this.updateCoordsFromPoints()):((f=this.polygon)==null||f.update({closed:!1}),this.clearCoords()),this.updatePolygon(),setTimeout(M.remove.bind(M),0)}else if(c.any(this.points,function(I){return I!==l&&pe(I.coord(),p)}))this.removePoint(l),this.points.length<3?((y=this.polygon)==null||y.update({closed:!1}),this.clearCoords()):(x=this.polygon)!=null&&x.closed()&&this.updateCoordsFromPoints(),this.updatePolygon(),setTimeout(l.remove.bind(l),0);else{const I=l===c.head(this.points)||l===c.last(this.points),H=!l.hasMoved(),U=!l.state.isInitialMove,A=!((T=this.polygon)!=null&&T.closed()),Y=this.points.length>2;I&&H&&U&&A&&Y&&((k=this.polygon)==null||k.update({closed:!0}),this.updatePolygon(),this.updateCoordsFromPoints())}this.setTrashCanVisibility(.5)}o(l,!1)},u=p=>{var g,f;if(this.points==null||this.points.length===0)return!0;const h=c.invoke(this.points,"coord");if(h[t]=p,!this.isClickToAddPoints()){if(z(h[s(-2)],h[s(-1)],h[t])||z(h[s(-1)],h[t],h[s(1)])||z(h[t],h[s(1)],h[s(2)]))return!1;const y=c.zip(h,Zs(h));if(this.points.length>3)for(let x=-1;x<=0;x++){const T=y[s(x)],k=c.without(y,T,y[s(x-1)],y[s(x+1)]);for(let M=0;M<k.length;M++){const I=k[M];if(wo(T,I))return!1}}}if(this.props.graph.snapTo==="angles"&&this.points.length>2){const y=c.map(So(h),function(A){return A*180/Math.PI});c.each([-1,1],function(A){y[s(A)]=Math.round(y[s(A)])});const x=function(A,Y,te){return(we.findAngle(h[s(A)],h[s(te)],h[s(Y)])+360)%360},T=[y[s(-1)]-x(-2,-1,1),y[s(1)]-x(-1,1,2)];if(T[2]=180-(T[0]+T[1]),c.any(T,function(A){return bt(A,1)}))return!1;const k=bn(vn(h[s(-1)],h[s(1)])),M=Js(ei(h[s(-1)],h[s(1)],h[t]))===1,I=Math.sin(T[1]*Math.PI/180)/Math.sin(T[2]*Math.PI/180)*k,H=we.findAngle(h[s(1)],h[s(-1)]),U=ti(I,H+(M?1:-1)*T[0]);return(g=this.graphie)==null?void 0:g.addPoints(h[s(-1)],U)}if(this.props.graph.snapTo==="sides"&&this.points.length>1){const y=c.map([[h[s(-1)],h[t]],[h[t],h[s(1)]],[h[s(-1)],h[s(1)]]],function(I){return bn(vn(...I))});if(c.each([0,1],function(I){y[I]=Math.round(y[I])}),bt(y[1]+y[2],y[0])||bt(y[0]+y[2],y[1])||bt(y[0]+y[1],y[2]))return!1;const x=Io(y[0],y[2],y[1]),T=we.findAngle(h[s(1)],h[s(-1)]),k=Js(ei(h[s(-1)],h[s(1)],h[t]))===1,M=ti(y[0],T+(k?1:-1)*x);return(f=this.graphie)==null?void 0:f.addPoints(h[s(-1)],M)}return!0},l=P.addMaybeMobileMovablePoint(this,{coord:e,constraints:[P.MovablePoint.constraints.bound(),n?P.MovablePoint.constraints.snap():null,u],onMoveStart:()=>{this.isClickToAddPoints()&&this.setTrashCanVisibility(1)},onMove:()=>{var p;(p=this.polygon)!=null&&p.closed()&&this.updateCoordsFromPoints()},onMoveEnd:a,...this.props.apiOptions.isMobile&&this.isClickToAddPoints()?{onRemove:r}:{}});return l.state.isInitialMove=!0,l},this.updateCoordsFromPoints=()=>{const e=c.extend({},this.props.graph,{coords:c.map(this.points,function(t){return c.result(t,"coord")})});this.onChange({graph:e})},this.clearCoords=()=>{const e=c.extend({},this.props.graph,{coords:null});this.onChange({graph:e})},this.onChange=e=>{this.props.onChange(e),this.props.trackInteraction()},this.addPointControls=()=>{if(this.props.graph.type!=="point")throw X("addPointControls","point");const e=_.getPointCoords(this.props.graph,this.props);this.points=[],this.points=c.map(e,this.createPointForPointsType,this)},this.removePointControls=()=>{c.invoke(this.points,"remove")},this.addSegmentControls=()=>{if(this.props.graph.type!=="segment")throw X("addSegmentControls","segment");const e=this,t=this.graphie,n=_.getSegmentCoords(this.props.graph,this.props),s=r=>P.addMaybeMobileMovablePoint(this,r);this.points=[],this.lines=c.map(n,function(r,o){const a=function(){const p=c.extend({},e.props.graph,{coords:c.invoke(e.lines,"coords")});e.onChange({graph:p})},u=[];for(let p=0;p<r.length;p+=1){const h=r[p];u.push(s({coord:h,constraints:[P.MovablePoint.constraints.bound(),P.MovablePoint.constraints.snap(),g=>{const f=u[1-p];return f?!pe(g,f.coord()):!1}],onMove:a}))}e.points=e.points.concat(u);const l=P.addMovableLine(t,{points:u,static:!1,constraints:[P.MovableLine.constraints.bound(),P.MovableLine.constraints.snap()],onMove:[P.MovableLine.onMove.updatePoints,a],normalStyle:{stroke:this.props.apiOptions.isMobile?C.BLUE_C:C.INTERACTIVE,...this._lineStroke()},highlightStyle:{stroke:this.props.apiOptions.isMobile?C.BLUE_C:C.INTERACTING,...this._lineStroke()}});return c.invoke(u,"toFront"),l},this)},this.removeSegmentControls=()=>{c.invoke(this.points,"remove"),c.invoke(this.lines,"remove")},this.addRayControls=()=>{this.addLine("ray")},this.removeRayControls=()=>{this.removeLine()},this.addPolygonControls=()=>{this.polygon=null;const e=_.getPolygonCoords(this.props.graph,this.props);this.points=[],this.points=c.map(e,this.createPointForPolygonType,this),this.updatePolygon()},this.updatePolygon=()=>{if(this.props.graph.type!=="polygon")throw X("updatePolygon","polygon");let e;this.polygon?e=this.polygon.closed():this.points.length>=3?e=!0:e=!1;const t=this.graphie,n=this.points.length,s=!c.contains(["angles","sides"],this.props.graph.snapTo),r=c.times(n,function(l){return!this.props.graph.showAngles||!e&&(l===0||l===n-1)?"":this.props.graph.snapTo==="angles"?"$deg0":"$deg1"},this),o=c.times(n,function(l){return e||l!==0&&l!==n-1},this),a=c.times(n,function(l){return this.props.graph.showAngles&&(e||l!==0&&l!==n-1)?1:0},this),u=c.times(n,function(l){return!this.props.graph.showSides||!e&&l===n-1?"":this.props.graph.snapTo==="sides"?"$len0":"$len1"},this);if(this.polygon==null){const l=this;l.polygon=P.addMovablePolygon(t,{constraints:[P.MovablePolygon.constraints.bound(),s?P.MovablePolygon.constraints.snap():null],closed:e,points:l.points,angleLabels:r,showRightAngleMarkers:o,numArcs:a,sideLabels:u,onMove:[P.MovablePolygon.onMove.updatePoints,function(){this.closed()&&l.updateCoordsFromPoints()}],normalStyle:{stroke:this.props.apiOptions.isMobile?C.BLUE_C:C.INTERACTIVE,...this._lineStroke()}})}else this.polygon.update({closed:e,points:this.points,angleLabels:r,showRightAngleMarkers:o,numArcs:a,sideLabels:u})},this.removePolygonControls=()=>{var e;c.invoke(this.points,"remove"),(e=this.polygon)==null||e.remove()},this.addAngleControls=()=>{if(this.props.graph.type!=="angle")throw X("addAngleControls","angle");const e=this.props.graph,t=this.graphie,n=_.getAngleCoords(this.props.graph,this.props);this.points=n.map(function(s,r){return t==null?void 0:t.addMovablePoint(c.extend({coord:s,normalStyle:{stroke:C.INTERACTIVE,fill:C.INTERACTIVE}},r===1?{snapX:t.snap[0],snapY:t.snap[1]}:{}))}),this.angle=t==null?void 0:t.addMovableAngle({points:this.points,snapDegrees:e.snapDegrees||1,snapOffsetDeg:e.angleOffsetDeg||0,angleLabel:e.showAngles?"$deg0":"",pushOut:2,allowReflex:_l(e.allowReflexAngles,!0)}),R(this.angle).on("move",()=>{var s;this.onChange({graph:{...e,coords:(s=this.angle)==null?void 0:s.getClockwiseCoords()}})})},this.removeAngleControls=()=>{var e;c.invoke(this.points,"remove"),(e=this.angle)==null||e.remove()},this.toggleShowSides=()=>{if(this.props.graph.type!=="polygon")throw X("toggleShowSides","polygon");const e=c.extend({},this.props.graph,{showSides:!this.props.graph.showSides});this.onChange({graph:e})},this.getUserInput=()=>_.getUserInputFromProps(this.props),this.simpleValidate=e=>_.validate(this.getUserInput(),e,this),this.focus=R.noop}UNSAFE_componentWillMount(){Pl.UNSAFE_componentWillMount.call(this)}componentDidMount(){this.setGraphie(this.refs.graph.graphie())}UNSAFE_componentWillReceiveProps(e){var t,n;this.isClickToAddPoints()!==this.isClickToAddPoints(e)&&(this.shouldResetGraphie=!0,this.setState({shouldShowInstructions:Mi(e)})),(((t=this.props.backgroundImage)==null?void 0:t.url)!==((n=e.backgroundImage)==null?void 0:n.url)||this.props.backgroundImage!==e.backgroundImage||this.props.containerSizeClass!==e.containerSizeClass)&&(this.shouldResetGraphie=!0)}componentDidUpdate(e,t){const n=e.graph.type,s=this.props.graph.type;(n!==s||e.graph.type==="angle"&&this.props.graph.type==="angle"&&this.areAngleGraphsEqual(e.graph,this.props.graph)||e.graph.type==="point"&&this.props.graph.type==="point"&&this.arePointGraphsEqual(e.graph,this.props.graph)||e.graph.type==="polygon"&&this.props.graph.type==="polygon"&&this.arePolygonGraphsEqual(e.graph,this.props.graph)||e.graph.type==="segment"&&this.props.graph.type==="segment"&&this.areSegmentGraphsEqual(e.graph,this.props.graph))&&(this["remove"+vt(n)+"Controls"](),this["add"+vt(s)+"Controls"]()),this.shouldResetGraphie&&this.resetGraphie()}areAngleGraphsEqual(e,t){return e.allowReflexAngles!==t.allowReflexAngles||e.angleOffsetDeg!==t.angleOffsetDeg||e.snapDegrees!==t.snapDegrees}arePointGraphsEqual(e,t){return e.numPoints!==t.numPoints}arePolygonGraphsEqual(e,t){return e.numSides!==t.numSides||e.showAngles!==t.showAngles||e.showSides!==t.showSides||e.snapTo!==t.snapTo}areSegmentGraphsEqual(e,t){return e.numSegments!==t.numSegments}render(){const e=Bi(this.props.containerSizeClass);let t;this.isClickToAddPoints()&&this.state.shouldShowInstructions?this.props.graph.type==="point"?t=v("Click to add points"):this.props.graph.type==="polygon"&&(t=v("Click to add vertices")):t=void 0;let n;this.isClickToAddPoints()&&(n=this.handleAddPointsMouseDown);const s=this.props.gridStep||E.getGridStep(this.props.range,this.props.step,e[0]),r=this.props.snapStep||E.snapStepFromGridStep(s),o=this.props.apiOptions.isMobile;return d("div",{className:"perseus-widget perseus-widget-interactive-graph",style:{width:e[0],height:e[1]},children:d(Mo,{instructions:t,ref:"graph",box:e,labels:this.props.labels,range:this.props.range,step:o?E.constrainedTickStepsFromTickSteps(this.props.step,this.props.range):this.props.step,gridStep:s,snapStep:r,markings:this.props.markings,backgroundImage:this.props.backgroundImage,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,onMouseDown:n,onGraphieUpdated:this.setGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:o,lockedFigures:this.props.lockedFigures})})}static getQuadraticCoefficients(e){const t=e[0],n=e[1],s=e[2],r=(t[0]-n[0])*(t[0]-s[0])*(n[0]-s[0]);if(r===0)return;const o=(s[0]*(n[1]-t[1])+n[0]*(t[1]-s[1])+t[0]*(s[1]-n[1]))/r,a=(s[0]*s[0]*(t[1]-n[1])+n[0]*n[0]*(s[1]-t[1])+t[0]*t[0]*(n[1]-s[1]))/r,u=(n[0]*s[0]*(n[0]-s[0])*t[1]+s[0]*t[0]*(s[0]-t[0])*n[1]+t[0]*n[0]*(t[0]-n[0])*s[1])/r;return[o,a,u]}static getSinusoidCoefficients(e){const t=e[0],n=e[1],s=n[1]-t[1],r=Math.PI/(2*(n[0]-t[0])),o=t[0]*r,a=t[1];return[s,r,o,a]}static getLineCoords(e,t){return e.coords||_.pointsFromNormalized(t,[[.25,.75],[.75,.75]])}static getPointCoords(e,t){const n=e.numPoints||1;let s=e.coords;if(s)return s;switch(n){case 1:s=[e.coord||[0,0]];break;case 2:s=[[-5,0],[5,0]];break;case 3:s=[[-5,0],[0,0],[5,0]];break;case 4:s=[[-6,0],[-2,0],[2,0],[6,0]];break;case 5:s=[[-6,0],[-3,0],[0,0],[3,0],[6,0]];break;case 6:s=[[-5,0],[-3,0],[-1,0],[1,0],[3,0],[5,0]];break;case At:s=[];break}const r=[[-10,10],[-10,10]],o=_.normalizeCoords(s,r);return _.pointsFromNormalized(t,o)}static getLinearSystemCoords(e,t){return e.coords||c.map([[[.25,.75],[.75,.75]],[[.25,.25],[.75,.25]]],n=>_.pointsFromNormalized(t,n))}static getPolygonCoords(e,t){if(e.type!=="polygon")throw X("toggleShowSides","polygon");let n=e.coords;if(n)return n;const s=e.numSides||3;if(s===At)n=[];else{const a=2*Math.PI/s,u=(1/s-1/2)*Math.PI,l=e.snapTo==="sides"?Math.sqrt(3)/3*7:4;n=c.times(s,function(p){return[l*Math.cos(p*a+u),l*Math.sin(p*a+u)]})}const r=[[-10,10],[-10,10]];n=_.normalizeCoords(n,r);const o=!c.contains(["angles","sides"],e.snapTo);return n=_.pointsFromNormalized(t,n,!o),n}static getSegmentCoords(e,t){const n=e.coords;if(n)return n;const s=e.numSegments||1,r={1:[5],2:[5,-5],3:[5,0,-5],4:[6,2,-2,-6],5:[6,3,0,-3,-6],6:[5,3,1,-1,-3,-5]}[s],o=[[-10,10],[-10,10]];return r.map(function(a){let u=[[-5,a],[5,a]];return u=_.normalizeCoords(u,o),u=_.pointsFromNormalized(t,u),u})}static getAngleCoords(e,t){let n=e.coords;if(n)return n;const s=e.snapDegrees||1;let r=s;for(;r<20;)r+=s;r=r*Math.PI/180;const o=(e.angleOffsetDeg||0)*Math.PI/180;n=_.pointsFromNormalized(t,[[.85,.5],[.5,.5]]);const a=bn(vn(...n));return n[0]=[n[1][0]+a*Math.cos(o),n[1][1]+a*Math.sin(o)],n[2]=[n[1][0]+a*Math.cos(r+o),n[1][1]+a*Math.sin(r+o)],n}static normalizeCoords(e,t){return c.map(e,function(n){return c.map(n,function(s,r){const o=t[r][1]-t[r][0];return(s+t[r][1])/o})})}static getEquationString(e){const t=e.graph.type,n="get"+vt(t)+"EquationString";return _[n](e)}static pointsFromNormalized(e,t,n){return c.map(t,function(s){return c.map(s,function(r,o){const a=e.range[o];if(n)return a[0]+(a[1]-a[0])*r;const u=e.step[o],l=El(a,u),p=Math.round(r*l);return a[0]+u*p})})}static getLinearEquationString(e){const t=_.getLineCoords(e.graph,e);if(Be(t[0][0],t[1][0]))return"x = "+t[0][0].toFixed(3);const n=(t[1][1]-t[0][1])/(t[1][0]-t[0][0]),s=t[0][1]-n*t[0][0];return Be(n,0)?"y = "+s.toFixed(3):"y = "+n.toFixed(3)+"x + "+s.toFixed(3)}static getCurrentQuadraticCoefficients(e){const t=e.graph.coords||_.defaultQuadraticCoords(e);return _.getQuadraticCoefficients(t)}static defaultQuadraticCoords(e){const t=[[.25,.75],[.5,.25],[.75,.75]];return _.pointsFromNormalized(e,t)}static getQuadraticEquationString(e){const t=_.getCurrentQuadraticCoefficients(e);return"y = "+t[0].toFixed(3)+"x^2 + "+t[1].toFixed(3)+"x + "+t[2].toFixed(3)}static getCurrentSinusoidCoefficients(e){const t=e.graph.coords||_.defaultSinusoidCoords(e);return _.getSinusoidCoefficients(t)}static defaultSinusoidCoords(e){const t=[[.5,.5],[.65,.6]];return _.pointsFromNormalized(e,t)}static getSinusoidEquationString(e){const t=_.getCurrentSinusoidCoefficients(e);return"y = "+t[0].toFixed(3)+"sin("+t[1].toFixed(3)+"x - "+t[2].toFixed(3)+") + "+t[3].toFixed(3)}static getCircleEquationString(e){const t=e.graph,n=t.center||[0,0],s=t.radius||2;return"center ("+n[0]+", "+n[1]+"), radius "+s}static getLinearSystemEquationString(e){const t=_.getLinearSystemCoords(e.graph,e);return`
`+Qs(t[0][0],t[0][1])+`
`+Qs(t[1][0],t[1][1])+`
`+Co(t[0],t[1])}static getPointEquationString(e){if(e.graph.type!=="point")throw X("getPointEquationString","point");return _.getPointCoords(e.graph,e).map(function(n){return"("+n[0]+", "+n[1]+")"}).join(", ")}static getSegmentEquationString(e){if(e.graph.type!=="segment")throw X("getSegmentEquationString","segment");const t=_.getSegmentCoords(e.graph,e);return c.map(t,function(n){return"["+c.map(n,function(s){return"("+s.join(", ")+")"}).join(" ")+"]"}).join(" ")}static getRayEquationString(e){if(e.graph.type!=="ray")throw X("createPointForPolygonType","ray");const t=_.getLineCoords(e.graph,e),n=t[0],s=t[1];let r=_.getLinearEquationString(e);return n[0]>s[0]?r+=" (for x <= "+n[0].toFixed(3)+")":n[0]<s[0]?r+=" (for x >= "+n[0].toFixed(3)+")":n[1]>s[1]?r+=" (for y <= "+n[1].toFixed(3)+")":r+=" (for y >= "+n[1].toFixed(3)+")",r}static getPolygonEquationString(e){if(e.graph.type!=="polygon")throw X("getPolygonEquationString","polygon");const t=_.getPolygonCoords(e.graph,e);return c.map(t,function(n){return"("+n.join(", ")+")"}).join(" ")}static getAngleEquationString(e){if(e.graph.type!=="angle")throw X("getAngleEquationString","angle");const t=_.getAngleCoords(e.graph,e);return we.findAngle(t[2],t[0],t[1]).toFixed(0)+"° angle at ("+t[1].join(", ")+")"}static validate(e,t,n){var r,o,a,u;const s=!!(e.coords||e.center&&e.radius);if(e.type===t.correct.type&&s){if(e.type==="linear"&&t.correct.type==="linear"&&e.coords!=null){const l=e.coords,p=t.correct.coords;if(z(p[0],p[1],l[0])&&z(p[0],p[1],l[1]))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="linear-system"&&t.correct.type==="linear-system"&&e.coords!=null){const l=e.coords,p=t.correct.coords;if(z(p[0][0],p[0][1],l[0][0])&&z(p[0][0],p[0][1],l[0][1])&&z(p[1][0],p[1][1],l[1][0])&&z(p[1][0],p[1][1],l[1][1])||z(p[0][0],p[0][1],l[1][0])&&z(p[0][0],p[0][1],l[1][1])&&z(p[1][0],p[1][1],l[0][0])&&z(p[1][0],p[1][1],l[0][1]))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="quadratic"&&t.correct.type==="quadratic"&&e.coords!=null){const l=this.getQuadraticCoefficients(e.coords),p=this.getQuadraticCoefficients(t.correct.coords);if(de(l,p))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="sinusoid"&&t.correct.type==="sinusoid"&&e.coords!=null){const l=this.getSinusoidCoefficients(e.coords),p=this.getSinusoidCoefficients(t.correct.coords),h=ni(l),g=ni(p);if(de(h,g))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="circle"&&t.correct.type==="circle"){if(de(e.center,t.correct.center)&&Be(e.radius,t.correct.radius))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="point"&&t.correct.type==="point"&&e.coords!=null){let l=_.getPointCoords(t.correct,n);const p=(r=e.coords)==null?void 0:r.slice();if(l=l.slice(),p==null||p.sort(),l.sort(),de(p,l))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="polygon"&&t.correct.type==="polygon"&&e.coords!=null){const l=(o=e.coords)==null?void 0:o.slice(),p=(a=t.correct.coords)==null?void 0:a.slice();let h;if(t.correct.match==="similar"?h=xn(l,p,Number.POSITIVE_INFINITY):t.correct.match==="congruent"?h=xn(l,p,Xr):t.correct.match==="approx"?h=xn(l,p,.1):(l.sort(),p.sort(),h=de(l,p)),h)return{type:"points",earned:1,total:1,message:null}}else if(e.type==="segment"&&t.correct.type==="segment"&&e.coords!=null){let l=e.coords.slice(),p=(u=t.correct.coords)==null?void 0:u.slice();if(l=c.invoke(l,"sort").sort(),p=c.invoke(p,"sort").sort(),de(l,p))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="ray"&&t.correct.type==="ray"&&e.coords!=null){const l=e.coords,p=t.correct.coords;if(de(l[0],p[0])&&z(p[0],p[1],l[1]))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="angle"&&t.correct.type==="angle"){const l=e.coords,p=t.correct.coords;let h;if(t.correct.match==="congruent"){const g=c.map([l,p],function(f){return(we.findAngle(f[2],f[0],f[1])+360)%360});h=Be(...g)}else h=de(l[1],p[1])&&z(p[1],p[0],l[0])&&z(p[1],p[2],l[2]);if(h)return{type:"points",earned:1,total:1,message:null}}}return!s||c.isEqual(e,t.graph)?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}}static getUserInputFromProps(e){return e.graph}};_.defaultProps={labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:Tl,markings:"graph",showTooltips:!1,showProtractor:!1,showRuler:!1,rulerLabel:"",rulerTicks:10,graph:{type:"linear"}};let Qn=_;const Al={name:"interactive-graph",displayName:"Interactive graph",widget:Qn},ld=1e3,Nl="#71B307",Fl="#BED47A",Ol="#314453",Ll="#4D6779",Vl="#C42420",Dl="#4898FC",ql="#46A8BF",Hl="#00294A",Ee={white:"#FFFFFF",gray98:"#FAFAFA",gray97:"#F6F7F7",gray95:"#F0F1F2",gray90:"#E3E5E6",gray85:"#D6D8DA",gray76:"#BABEC2",gray72:"#999A9D",gray68:"#888D93",gray55:"#707378",gray41:"#626569",gray25:"#3B3E40",gray17:"#21242C",gray10:"#1499af",black:"#000000",alertRed:Vl,homepageBlue:ql,kaBlue:Ol,kaBlueLight:Ll,kaGreen:Nl,kaGreenLight:Fl,learnstormBlue:Dl,backgroundBlue:Hl,adminGreen:"#78C008",kaBlueExtraLight:"#39c2db",kaBlueHover:"#0c7f99",kaGreenHover:"#518005",skyDark:"#001f4d",recommendationGold:"#ffbe26",starAced:"#ff9c39",google:"#C1432f",modernGoogle:"#be2612",modernGoogleHover:"#8c1c0d",facebook:"#4267B2",modernFacebook:"#4267B2",modernFacebookHover:"#00294a",wonderBlocksGold:"#FFB100",wonderBlocksLightBlue:"#37C5FD",breadcrumbs:"rgba(255, 255, 255, 0.7)"},Ul=4,Ti={color:Ee.breadcrumbs,fontFamily:"inherit",fontSize:15,fontWeight:"bold",letterSpacing:.8,lineHeight:"19px",textTransform:"uppercase",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased"},Ce={regular:"inherit"},dr={subjectHeadingDesktop:{fontFamily:"inherit",fontSize:50,fontWeight:"bold",lineHeight:"61px"},subjectHeadingMobile:{fontFamily:"inherit",fontSize:35,fontWeight:"bold",lineHeight:"37px"},conceptHeadingDesktop:{fontFamily:"inherit",fontSize:35,fontWeight:"bold",lineHeight:"37px"},conceptHeadingMobile:{fontFamily:"inherit",fontSize:23,fontWeight:"bold",lineHeight:"27px"},subheadingDesktop:{fontFamily:"inherit",fontSize:23,fontWeight:"bold",lineHeight:"27px"},subheadingMobile:{fontFamily:"inherit",fontSize:20,fontWeight:"bold",lineHeight:"24px"},smallSubheadingDesktop:{fontFamily:"inherit",fontSize:20,lineHeight:1.25},smallSubheadingMobile:{fontFamily:"inherit",fontSize:15,lineHeight:1.25},smallHeading:{color:Ee.gray25,fontFamily:"inherit",fontSize:17,fontWeight:"bold",lineHeight:"23px"},smallHeadingMobile:{color:Ee.gray25,fontFamily:"inherit",fontSize:15,fontWeight:"bold",lineHeight:"18px"},accentHeading:{color:Ee.gray68,fontFamily:"inherit",fontSize:15,fontWeight:"bold",letterSpacing:.8,lineHeight:"19px",textTransform:"uppercase"},bodyLarge:{fontFamily:Ce.regular,fontSize:20,lineHeight:"30px"},bodySmall:{fontFamily:Ce.regular,fontSize:17,fontWeight:"normal",lineHeight:"23px"},bodySmallBold:{fontFamily:Ce.regular,fontSize:17,fontWeight:"bold",lineHeight:"23px"},bodyXsmall:{fontFamily:Ce.regular,fontSize:15,lineHeight:"22px"},bodyXsmallBold:{fontFamily:"inherit",fontSize:15,fontWeight:"bold",lineHeight:"22px"},breadcrumb:Ti,breadcrumbSmall:{...Ti,fontSize:12,lineHeight:"13px"},labelLarge:{fontFamily:"inherit",fontSize:23,fontWeight:"bold",lineHeight:"27px"},labelMedium:{fontFamily:"inherit",fontSize:15,fontWeight:"bold",lineHeight:"18px"},labelSmall:{fontFamily:Ce.regular,fontSize:12,lineHeight:"14px"},caption:{fontFamily:Ce.regular,fontSize:14,fontStyle:"italic",lineHeight:"17px"},desktopScalingOnMobile:{MozTextSizeAdjust:"100%",MsTextSizeAdjust:"100%",WebkitTextSizeAdjust:"100%"},modalSubtitle:{fontSize:12,lineHeight:1.65,WebkitFontSmoothing:"antialiased",fontWeight:"bold"},wonderBlocksHeader:{paddingLeft:16,paddingRight:16,paddingBottom:24,paddingTop:34,[fe.mdOrLarger]:{paddingBottom:32}},wonderBlocksTitle:{color:Ee.white,fontWeight:900,fontSize:28,lineHeight:"32px",margin:0,[fe.mdOrLarger]:{fontSize:36,lineHeight:"40px"}},wonderBlocksLabelLarge:{fontSize:16,lineHeight:"20px",fontWeight:700}},cd=Object.freeze(Object.defineProperty({__proto__:null,borderRadius:Ul,colors:Ee,fonts:Ce,typography:dr},Symbol.toStringTag,{value:"Module"}));function ct(){return ct=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},ct.apply(this,arguments)}const hn={color:{bg:{switch:{off:N.color.offBlack50,disabledOff:N.color.offBlack32,activeOff:N.color.offBlack64,on:N.color.blue,disabledOn:N.color.fadedBlue,activeOn:N.color.activeBlue},slider:{on:N.color.white,off:N.color.white},icon:{on:N.color.blue,disabledOn:N.color.fadedBlue,off:N.color.offBlack50,disabledOff:N.color.offBlack32}},outline:{default:N.color.blue}},border:{radius:{small:N.spacing.small_12,full:N.border.radius.full}},size:{height:{none:0,medium:20,large:N.spacing.large_24},width:{none:0,small:N.spacing.xxxxSmall_2,medium:20,large:40},offset:{default:1}},spacing:{slider:{position:N.spacing.xxxxSmall_2},icon:{position:N.spacing.xxxSmall_4},transform:{default:`translateX(${N.spacing.medium_16}px)`,transition:"transform 0.15s ease-in-out"}}},Wl=To(hn,{color:{bg:{switch:{off:N.color.white50,disabledOff:N.color.white32,activeOff:N.color.white50,disabledOn:N.color.activeBlue},slider:{off:N.color.eggplant},icon:{off:N.color.white,disabledOff:N.color.white50,disabledOn:N.color.activeBlue}}}}),Bl={default:hn,khanmigo:Wl},hr=_o(hn);function zl(i){const e=b.useContext(Ao),t=Bl[e]||hn;return b.createElement(hr.Provider,{value:t},i.children)}const $l=zi("span"),Gl=zi("input"),Yl=b.forwardRef(function(e,t){const{"aria-label":n,"aria-labelledby":s,"aria-describedby":r,checked:o,disabled:a=!1,icon:u,id:l,onChange:p,testId:h}=e,g=$i("labeled-field"),f=l??g.get("labeled-field-id"),{theme:y,themeName:x}=Eo(hr),T=Ro(Kl,y),k=()=>{!a&&p&&p(!o)},M=()=>{},I=Xl(o,p!==void 0,a,y,x);let H;return u&&(H=b.cloneElement(u,{size:"small",style:[T.icon,I.icon],"aria-hidden":!0})),b.createElement(D,{onClick:k,style:[T.switch,I.switch,a&&T.disabled],testId:h},b.createElement(Gl,{"aria-describedby":r,"aria-label":n,"aria-labelledby":s,checked:o,"aria-disabled":a,id:f,onChange:M,ref:t,role:"switch",style:T.hidden,type:"checkbox"}),u&&H,b.createElement($l,{style:[T.slider,I.slider]}))}),Kl=i=>({hidden:{opacity:0,height:i.size.height.none,width:i.size.width.none},switch:{display:"inline-flex",height:i.size.height.large,width:i.size.width.large,borderRadius:i.border.radius.small,flexShrink:0,":hover":{outlineOffset:i.size.offset.default},":focus-within":{outline:`solid ${i.size.width.small}px ${i.color.outline.default}`,outlineOffset:i.size.offset.default}},disabled:{cursor:"not-allowed",":hover":{outline:"none"}},slider:{position:"absolute",top:i.spacing.slider.position,left:i.spacing.slider.position,height:i.size.height.medium,width:i.size.width.medium,borderRadius:i.border.radius.full,backgroundColor:i.color.bg.slider.on,transition:i.spacing.transform.transition},icon:{position:"absolute",top:i.spacing.icon.position,left:i.spacing.icon.position,zIndex:1,transition:i.spacing.transform.transition}}),xt={},Xl=(i,e,t,n,s)=>{const r=`${i}-${e}-${t}-${s}`;if(xt[r])return xt[r];let o={};const a={cursor:e?"pointer":"auto",":hover":{outline:e?`solid ${n.size.width.small}px ${n.color.outline.default}`:"none"}};return i?o={switch:ct({backgroundColor:t?n.color.bg.switch.disabledOn:n.color.bg.switch.on,":active":{backgroundColor:!t&&e?n.color.bg.switch.activeOn:void 0}},a),slider:{transform:n.spacing.transform.default},icon:{color:t?n.color.bg.icon.disabledOn:n.color.bg.icon.on,transform:n.spacing.transform.default}}:o={switch:ct({backgroundColor:t?n.color.bg.switch.disabledOff:n.color.bg.switch.off,":active":{backgroundColor:!t&&e?n.color.bg.switch.activeOff:void 0}},a),slider:{backgroundColor:n.color.bg.slider.off},icon:{color:t?n.color.bg.icon.disabledOff:n.color.bg.icon.off}},xt[r]=S.StyleSheet.create(o),xt[r]},gr=b.forwardRef(function(e,t){return b.createElement(zl,null,b.createElement(Yl,ct({},e,{ref:t})))});gr.displayName="Switch";const jl={hideAnswersToggleLabel:v("Hide answer choices")},Zn=i=>{const e=$i(),t=e.get("hide-answers-toggle"),n=e.get("hide-answers-label");return w(D,{style:Ql.switchWrapper,children:[d(gr,{id:t,checked:i.areAnswersHidden,onChange:i.onChange,"aria-labelledby":n}),d(mo,{id:n,htmlFor:t,tag:"label",children:jl.hideAnswersToggleLabel})]})},Ql=S.StyleSheet.create({switchWrapper:{display:"flex",flexDirection:"row",flexWrap:"wrap-reverse",alignItems:"center",gap:"0.5em",marginTop:"1em"}});try{Zn.displayName="HideAnswersToggle",Zn.__docgenInfo={description:"",displayName:"HideAnswersToggle",props:{areAnswersHidden:{defaultValue:null,description:"",name:"areAnswersHidden",required:!0,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"((newCheckedState: boolean) => unknown) | undefined"}}}}}catch{}class Q extends b.Component{static gradeMarker(e){const t={hasAnswers:!1,isCorrect:!1};return e.selected&&e.selected.length>0&&(t.hasAnswers=!0),e.answers.length>0?e.selected&&e.selected.length===e.answers.length&&(t.isCorrect=e.selected.every(n=>e.answers.includes(n))):(!e.selected||e.selected.length===0)&&(t.isCorrect=!0),t}static validate(e,t){let n=0,s=0;for(const r of e.markers){const o=Q.gradeMarker(r);o.hasAnswers&&n++,o.isCorrect&&s++}return n!==e.markers.length?{type:"invalid",message:null}:{type:"points",earned:s===e.markers.length?1:0,total:1,message:null}}static pointInTriangle(e,t,n,s){const r=(l,p,h)=>(l.x-h.x)*(p.y-h.y)-(p.x-h.x)*(l.y-h.y),o=r(e,t,n)<0,a=r(e,n,s)<0,u=r(e,s,t)<0;return o===a&&a===u}static imageSideForMarkerPosition(e,t,n){if(n&&n!=="NONE"){if(n==="LEFT"&&e>20)return"right";if(n==="RIGHT"&&e<80)return"left";if(n==="UP"&&t>20)return"bottom";if(n==="DOWN"&&t<80)return"top"}if(e<20)return"left";if(e>80)return"right";const s={x:20,y:0},r={x:80,y:0},o={x:80,y:100},a={x:20,y:100},u={x:50,y:50},l={top:[s,r,u],right:[u,r,o],bottom:[a,u,o],left:[s,u,a]},p={x:e,y:t};for(const h of Object.keys(l)){const g=l[h];if(Q.pointInTriangle(p,...g))return h}return"center"}static navigateToMarkerIndex(e,t,n){const s=t[n],r=t.map((o,a)=>{const u=o.x-s.x,l=o.y-s.y,p=Math.sqrt(u**2+l**2);return{index:a,dist:p,dir:{x:p!==0?u/p:0,y:p!==0?l/p:0}}}).filter(o=>o.index===n?!1:t[o.index].showCorrectness!=="correct").sort((o,a)=>{const u=Math.round(o.dist*(e.x*o.dir.x+e.y*o.dir.y)),l=Math.round(a.dist*(e.x*a.dir.x+e.y*a.dir.y));let p,h;return e.x>0?(p=o.dir.x>0&&u!==0,h=a.dir.x>0&&l!==0):e.x<0?(p=o.dir.x<0&&u!==0,h=a.dir.x<0&&l!==0):e.y>0?(p=o.dir.y>0&&u!==0,h=a.dir.y>0&&l!==0):e.y<0&&(p=o.dir.y<0&&u!==0,h=a.dir.y<0&&l!==0),p!==h?p?-1:1:u-l});return r.length>0?r[0].index:n}constructor(e){super(e),this._markers=[],this.state={activeMarkerIndex:-1,markersInteracted:!1,hideAnswers:!1}}simpleValidate(e){return Q.validate(this.getUserInput(),e)}getUserInput(){const{markers:e}=this.props;return{markers:e}}showRationalesForCurrentlySelectedChoices(e){const{markers:t}=this.props,{onChange:n}=this.props,s=t.map(r=>{const o=Q.gradeMarker(r);return{...r,showCorrectness:o.hasAnswers?o.isCorrect?"correct":"incorrect":void 0}});n({markers:s},null,!0)}handleMarkerChange(e,t){const{markers:n,onChange:s}=this.props,r=[...n.slice(0,e),{...t,showCorrectness:void 0},...n.slice(e+1)];s({markers:r})}activateMarker(e,t){var s;(s=this.props.analytics)==null||s.onAnalyticsEvent({type:"perseus:label-image:marker-interacted-with",payload:null});const{activeMarkerIndex:n}=this.state;n!==e&&t?this.setState({activeMarkerIndex:e,markersInteracted:!0}):this.setState({activeMarkerIndex:-1})}handleMarkerKeyDown(e,t){const{markers:n}=this.props;if(n.length<2)return;const s={ArrowUp:{x:0,y:-1},ArrowRight:{x:1,y:0},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0}}[t.key];if(!s)return;t.preventDefault();const r=this._markers[Q.navigateToMarkerIndex(s,n,e)];r&&We.findDOMNode(r).focus()}handleAnswerChoicesChangeForMarker(e,t){const{choices:n,markers:s}=this.props,r=n.filter((o,a)=>t[a]);this.handleMarkerChange(e,{...s[e],selected:r.length?r:void 0})}renderMarkers(){const{markers:e,questionCompleted:t,preferredPopoverDirection:n}=this.props,{activeMarkerIndex:s,markersInteracted:r}=this.state;return e.map((o,a)=>{const u=window.matchMedia(fe.xsOrSmaller.replace("@media ","")).matches,l=this.props.imageWidth/2>this.props.imageHeight;let p,h;u||l?(p=o.y>50?"top":"bottom",h=o.y>50?"bottom":"top"):(h=Q.imageSideForMarkerPosition(o.x,o.y,n),h==="center"&&(h="bottom"),p={left:"right",top:"bottom",right:"left",bottom:"top"}[h]);const g=Q.gradeMarker(o),f=t&&g.hasAnswers&&g.isCorrect?"correct":o.showCorrectness,y=f==="correct",x={[`margin${h.charAt(0).toUpperCase()+h.slice(1)}`]:10},T=a===s,k=o.selected&&!T&&!this.state.hideAnswers;return d(D,{style:{position:"absolute",left:`${o.x}%`,top:`${o.y}%`,zIndex:"unset"},children:d(bo,{choices:this.props.choices.map(M=>({content:M,checked:o.selected?o.selected.includes(M):!1})),multipleSelect:this.props.multipleAnswers,onChange:M=>{var I;(I=this.props.analytics)==null||I.onAnalyticsEvent({type:"perseus:label-image:choiced-interacted-with",payload:null}),this.handleAnswerChoicesChangeForMarker(a,M)},onToggle:M=>this.activateMarker(a,M),disabled:y,opener:({opened:M})=>d(on,{role:"button","aria-expanded":M,children:({hovered:I,focused:H,pressed:U})=>d(No,{...o,showCorrectness:f,showSelected:M,showPulsate:!r,ref:A=>this._markers[a]=A,showAnswer:k,answerSide:p,answerStyles:x,analytics:this.props.analytics,focused:H||U,hovered:I})},`marker-${o.x}.${o.y}`)},`answers-${o.x}.${o.y}`)})})}renderInstructions(){const{apiOptions:{isMobile:e},choices:t,multipleAnswers:n,hideChoicesFromInstructions:s}=this.props,r=e?n?v("Tap each dot on the image to select all answers that apply."):v("Tap each dot on the image to select an answer."):n?v("Click each dot on the image to select all answers that apply."):v("Click each dot on the image to select an answer."),o=v("Choices:");return w("div",{className:ce("perseus-label-image-widget-instructions",S.css(xe.instructions)),children:[w("div",{className:S.css(xe.instructionsCaption),children:[r," ",!s&&o]}),!s&&d("div",{className:S.css(xe.instructionsChoices),children:t.map((a,u)=>d("div",{className:S.css(xe.instructionsChoice),children:d(O,{content:a})},u))})]})}render(){const{imageAlt:e,imageUrl:t,imageWidth:n,imageHeight:s}=this.props,{activeMarkerIndex:r}=this.state;return w("div",{children:[this.renderInstructions(),w("div",{className:S.css(xe.markersCanvas),style:{maxWidth:n,maxHeight:s},children:[d("div",{className:S.css(xe.imageContainer,r!==-1&&xe.imageInteractionDisabled),children:d(Zi.Consumer,{children:({setAssetStatus:o})=>d(an,{alt:e,src:t,width:n,height:s,setAssetStatus:o})})}),this.renderMarkers()]}),d(Zn,{areAnswersHidden:this.state.hideAnswers,onChange:o=>{var a;(a=this.props.analytics)==null||a.onAnalyticsEvent({type:"perseus:label-image:toggle-answers-hidden",payload:null}),this.setState({hideAnswers:o})}})]})}}const xe=S.StyleSheet.create({instructions:{paddingBottom:16},instructionsCaption:{...dr.bodyXsmallBold,paddingBottom:16},instructionsChoices:{display:"flex",flexWrap:"wrap",margin:"-8px 0"},instructionsChoice:{display:"flex",alignItems:"center",margin:"8px 0",":not(:last-child)":{"::after":{content:"''",display:"inline-block",position:"relative",width:2,height:2,marginLeft:5,marginRight:5,background:"rgba(33, 36, 44, 0.32)",borderRadius:2}}},markersCanvas:{position:"relative"},imageContainer:{display:"flex"},imageInteractionDisabled:{pointerEvents:"none"}}),Ps=b.forwardRef((i,e)=>{const t=Yi();return d(Q,{ref:e,analytics:t.analytics,...i})});Ps.validate=Q.validate;Ps.gradeMarker=Q.gradeMarker;const Zl={name:"label-image",displayName:"Label Image",widget:Ps,accessible:!0,isLintable:!0};try{Q.displayName="LabelImage",Q.__docgenInfo={description:"",displayName:"LabelImage",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown"}},analytics:{defaultValue:null,description:"",name:"analytics",required:!1,type:{name:"{ onAnalyticsEvent: AnalyticsEventHandlerFn; }"}},apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!0,type:{name:"Readonly<{ isArticle?: boolean | undefined; onInputError?: ((widgetId: any, value: string, message?: string | null | undefined) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown) | undef..."}},choices:{defaultValue:null,description:"",name:"choices",required:!0,type:{name:"readonly string[]"}},imageAlt:{defaultValue:null,description:"",name:"imageAlt",required:!0,type:{name:"string"}},imageUrl:{defaultValue:null,description:"",name:"imageUrl",required:!0,type:{name:"string"}},imageWidth:{defaultValue:null,description:"",name:"imageWidth",required:!0,type:{name:"number"}},imageHeight:{defaultValue:null,description:"",name:"imageHeight",required:!0,type:{name:"number"}},markers:{defaultValue:null,description:"",name:"markers",required:!0,type:{name:"readonly InteractiveMarkerType[]"}},multipleAnswers:{defaultValue:null,description:"",name:"multipleAnswers",required:!0,type:{name:"boolean"}},hideChoicesFromInstructions:{defaultValue:null,description:"",name:"hideChoicesFromInstructions",required:!0,type:{name:"boolean"}},questionCompleted:{defaultValue:null,description:"",name:"questionCompleted",required:!0,type:{name:"boolean"}},preferredPopoverDirection:{defaultValue:null,description:"",name:"preferredPopoverDirection",required:!1,type:{name:"enum",value:[{value:'"UP"'},{value:'"RIGHT"'},{value:'"DOWN"'},{value:'"LEFT"'},{value:'"NONE"'}]}}}}}catch{}const gn=5,Jl={display:"table",tableLayout:"fixed"},ec={display:"table-row"},tc={display:"table-cell",padding:gn},nc={borderRadius:10,cursor:"pointer"},sc={padding:gn,display:"inline-block"},ic={float:"right",paddingRight:gn},rc=50,$e={plus:()=>[[!1,!0,!1],[!0,!0,!0],[!1,!0,!1]],x:()=>[[!0,!1,!0],[!1,!0,!1],[!0,!1,!0]],"plus/x":i=>i%2?$e.x():$e.plus()},Os=class Os extends b.Component{constructor(){super(...arguments),this._flip=()=>{this.props.onChange(!this.props.value)}}render(){const e=this.props.value?"#55dd55":"#115511",t=c.extend({},nc,{width:this.props.size,height:this.props.size,backgroundColor:e});return d("div",{style:t,onClick:this._flip})}};Os.propTypes={value:m.bool.isRequired,size:m.number.isRequired};let Jn=Os;const Ls=class Ls extends b.Component{render(){return d("div",{style:Jl,className:"no-select",children:c.map(this.props.cells,(e,t)=>d("div",{style:ec,children:c.map(e,(n,s)=>d("div",{style:tc,children:d(Jn,{value:n,size:this.props.size,onChange:c.partial(this.props.onChange,t,s)})},s))},t))})}};Ls.propTypes={cells:m.arrayOf(m.arrayOf(m.bool)).isRequired,size:m.number.isRequired};let es=Ls;const oc=(i,e)=>c.map(i,(t,n)=>c.map(t,(s,r)=>e(n,r)?!s:s)),ac=(i,e,t,n)=>oc(i,(s,r)=>{const o=s-e,a=r-t;return Math.abs(o)<=1&&Math.abs(a)<=1?n[o+1][a+1]:!1}),Kt=class Kt extends b.Component{constructor(){super(...arguments),this.getUserInput=()=>un.getUserInput.call(this),this.change=(...e)=>W.apply(this,e),this._width=()=>this.props.cells.length!==0?this.props.cells[0].length:0,this._initNextPatterns=()=>{this._currPattern=$e[this.props.flipPattern](0),this._nextPattern=$e[this.props.flipPattern](1),this._patternIndex=2},this._shiftPatterns=()=>{this._currPattern=this._nextPattern,this._nextPattern=$e[this.props.flipPattern](this._patternIndex),this._patternIndex++},this._flipTile=(e,t)=>{const n=ac(this.props.cells,e,t,this._currPattern);this._shiftPatterns(),this.change({cells:n,moveCount:this.props.moveCount+1})},this._reset=()=>{this.change({cells:this.props.startCells,moveCount:0})},this.simpleValidate=e=>lc(e,this.getUserInput())}render(){const e=this._width(),t=rc,n=e*(t+2*gn);return w("div",{children:[d(es,{cells:this.props.cells,size:t,onChange:this._flipTile}),w("div",{style:{width:n},children:[d("div",{style:sc,children:Ur("Moves: %(num)s","Moves: %(num)s",this.props.moveCount)}),d("div",{style:ic,children:d("input",{type:"button",value:"Reset",onClick:this._reset,className:"simple-button"})})]}),d("div",{className:"clearfix"})]})}componentDidMount(){this._initNextPatterns()}componentDidUpdate(e){e.flipPattern!==this.props.flipPattern&&this._initNextPatterns()}};Kt.propTypes={...dt,cells:m.arrayOf(m.arrayOf(m.bool)),startCells:m.arrayOf(m.arrayOf(m.bool)),flipPattern:m.string.isRequired,moveCount:m.number.isRequired},Kt.defaultProps={cells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],startCells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],flipPattern:"plus",moveCount:0};let ts=Kt;const lc=function(i,e){return c.all(e.cells,(s,r)=>c.all(s,(o,a)=>o===i.startCells[r][a]))?{type:"invalid",message:v("Click on the tiles to change the lights.")}:c.all(e.cells,s=>c.all(s,r=>r))?{type:"points",earned:1,total:1,message:null}:i.gradeIncompleteAsWrong?{type:"points",earned:0,total:1,message:null}:{type:"invalid",message:v("You must turn on all of the lights to continue.")}},cc=function(i){return{cells:i.startCells,startCells:i.startCells,flipPattern:i.flipPattern}},pc={name:"lights-puzzle",displayName:"Lights puzzle (deprecated)",hidden:!0,widget:ts,transform:cc},{shuffle:_i,seededRNG:uc}=E,dc="perseus-widget-matcher",Ze=class Ze extends b.Component{constructor(){super(...arguments),this.state={leftHeight:0,rightHeight:0,texRendererLoaded:!1},this.changeAndTrack=e=>{this.props.onChange(e),this.props.trackInteraction()},this.onMeasureLeft=e=>{const t=c.max(e.heights);this.setState({leftHeight:t})},this.onMeasureRight=e=>{const t=c.max(e.heights);this.setState({rightHeight:t})},this.getUserInput=()=>this.state.texRendererLoaded?{left:this.refs.left.getOptions(),right:this.refs.right.getOptions()}:{left:[],right:[]},this.moveLeftOptionToIndex=(e,t)=>{this.refs.left.moveOptionToIndex(e,t)},this.moveRightOptionToIndex=(e,t)=>{this.refs.right.moveOptionToIndex(e,t)},this.simpleValidate=e=>Ze.validate(this.getUserInput(),e)}render(){if(!this.state.texRendererLoaded){const{TeX:a}=be();return w(Fr,{children:[d(Fo,{}),d("div",{style:{display:"none"},children:d(a,{onRender:()=>{this.setState({texRendererLoaded:!0})},children:"1"})})]})}const e=uc(this.props.problemNum);let t;this.props.orderMatters?t=_i(this.props.left,e,!0):t=this.props.left;const n=_i(this.props.right,e,!0),s=c.any(this.props.labels),r={height:c.max([this.state.leftHeight,this.state.rightHeight])},o=this.props.apiOptions.isMobile?8:5;return d("table",{className:S.css(J.widget)+" "+dc,children:w("tbody",{children:[s&&w("tr",{className:S.css(J.row),children:[d("th",{className:S.css(J.column,J.columnLabel),children:d(O,{content:this.props.labels[0]||"...",linterContext:this.props.linterContext})}),d("th",{className:S.css(J.column,J.columnRight,J.columnLabel),children:d(O,{content:this.props.labels[1]||"...",linterContext:this.props.linterContext})})]}),w("tr",{className:S.css(J.row),children:[d("td",{className:S.css(J.column),children:d(Rn,{options:t,layout:si.VERTICAL,padding:this.props.padding,disabled:!this.props.orderMatters,constraints:r,onMeasure:this.onMeasureLeft,onChange:this.changeAndTrack,margin:o,linterContext:this.props.linterContext,ref:"left"})}),d("td",{className:S.css(J.column,J.columnRight),children:d(Rn,{options:n,layout:si.VERTICAL,padding:this.props.padding,constraints:r,onMeasure:this.onMeasureRight,onChange:this.changeAndTrack,margin:o,linterContext:this.props.linterContext,ref:"right"})})]})]})})}};Ze.propTypes={apiOptions:G.propTypes,labels:m.array,left:m.array,onChange:m.func,orderMatters:m.bool,padding:m.bool,problemNum:m.number,right:m.array,trackInteraction:m.func.isRequired,linterContext:ut},Ze.defaultProps={left:[],right:[],labels:["",""],orderMatters:!1,padding:!0,problemNum:0,onChange:function(){},linterContext:q};let Ae=Ze;c.extend(Ae,{validate:function(i,e){return{type:"points",earned:c.isEqual(i.left,e.left)&&c.isEqual(i.right,e.right)?1:0,total:1,message:null}}});const Ct=5,Ei="1px solid #444",J=S.StyleSheet.create({widget:{paddingTop:Ct,maxWidth:"100%",minWidth:"auto"},row:{border:0},column:{padding:0,border:0},columnRight:{borderLeft:Ei},columnLabel:{fontWeight:"inherit",borderBottom:Ei,padding:`0 ${Ct}px ${Ct}px ${Ct}px`,textAlign:"center"}}),hc={name:"matcher",displayName:"Matcher (two column)",widget:Ae,isLintable:!0};try{Ae.displayName="Matcher",Ae.__docgenInfo={description:"",displayName:"Matcher",props:{}}}catch{}const{assert:fr}=ln,{stringArrayOfSize:gc}=E,fc={INPUT_MARGIN:3,INPUT_HEIGHT:30,INPUT_WIDTH:40},mc={INPUT_MARGIN:4,INPUT_HEIGHT:36,INPUT_WIDTH:64};function se(i,e){return[""+i,""+e]}const Ri=function(){return se(0,0)},mr=function(i){return fr(c.isArray(i)&&i.length===2),+i[0]},yr=function(i){return fr(c.isArray(i)&&i.length===2),+i[1]},_e=function(i){const e=mr(i),t=yr(i);return"answer"+e+","+t},ns=function(i){const e=[1,1];return c(i).each((t,n)=>{let s=0;c(t).each((r,o)=>{r!=null&&r.toString().length&&(s=o+1)}),e[1]=Math.max(e[1],s),s>0&&(e[0]=Math.max(e[0],n+1))}),e},Xt=class Xt extends b.Component{constructor(){super(...arguments),this.state={enterTheMatrix:0},this.getInputPaths=()=>{const e=[],t=this.props.matrixBoardSize[0],n=this.props.matrixBoardSize[1];return c(t).times(s=>{c(n).times(r=>{const o=se(s,r);e.push(o)})}),e},this.getGrammarTypeForPath=e=>"number",this._handleFocus=(e,t)=>{this.props.onFocus(se(e,t))},this._handleBlur=(e,t)=>{this.props.onBlur(se(e,t))},this.focus=()=>(this.focusInputPath(Ri()),!0),this.focusInputPath=e=>{const t=_e(e);this.refs[t].focus()},this.blurInputPath=e=>{e.length===0&&(e=Ri());const t=_e(e);this.refs[t].blur()},this.getDOMNodeForPath=e=>{const t=_e(e);return L.findDOMNode(this.refs[t])},this.setInputValue=(e,t,n)=>{const s=mr(e),r=yr(e);this.onValueChange(s,r,t,n)},this.handleKeyDown=(e,t,n)=>{const s=this.props.matrixBoardSize[0],r=this.props.matrixBoardSize[1];let o=null;const a=this.refs[_e(se(e,t))],u=a.getStringValue(),l=a.getSelectionStart(),p=a.getSelectionEnd();let h=null;if(n.key==="ArrowUp"&&e>0?h=se(e-1,t):n.key==="ArrowDown"&&e+1<s?h=se(e+1,t):n.key==="ArrowLeft"&&t>0?l===0&&p===0&&(h=se(e,t-1)):n.key==="ArrowRight"&&t+1<r?l===u.length&&(h=se(e,t+1)):n.key==="Enter"?o=this.state.enterTheMatrix+1:n.key==="Escape"&&(o=0),h){n.preventDefault();const g=this.refs[_e(h)],y=g.getStringValue().length*2;g.focus(),n.key==="ArrowRight"?g.setSelectionRange(0,0):g.setSelectionRange(y,y)}o!=null&&this.setState({enterTheMatrix:o})},this.onValueChange=(e,t,n,s)=>{const r=this.props.answers.map(o=>[...o]);r[e]||(r[e]=[]),r[e][t]=n,this.props.onChange({answers:r},s),this.props.trackInteraction()},this.getUserInput=()=>({answers:this.props.answers}),this.simpleValidate=e=>Xt.validate(this.getUserInput(),e)}componentDidMount(){this.cursorPosition=[0,0]}render(){let e;this.props.apiOptions.customKeypad?e=mc:e=fc;const{INPUT_MARGIN:t,INPUT_HEIGHT:n,INPUT_WIDTH:s}=e,r=ns(this.props.answers),o=this.props.matrixBoardSize[0],a=this.props.matrixBoardSize[1],u=this.props.cursorPosition[0],l=this.props.cursorPosition[1],p=Math.max(u,r[0]-1),h=Math.max(l,r[1]-1),g=(p+1)*(n+2*t),f=(h+1)*(s+2*t),y=ce({"perseus-matrix":!0,"static-mode":this.props.static,"the-matrix":this.state.enterTheMatrix>=5});return w("div",{className:y,children:[this.props.prefix&&d("div",{className:"matrix-prefix",children:d(O,{content:this.props.prefix,linterContext:this.props.linterContext})}),w("div",{className:"matrix-input",children:[d("div",{className:"matrix-bracket bracket-left",style:{height:g}}),d("div",{className:"matrix-bracket bracket-right",style:{height:g,left:f}}),c(o).times(x=>{const T=this.props.answers[x];return d("div",{className:"matrix-row",children:c(a).times(k=>{const M=x>p||k>h,I={className:M?"outside":"inside",ref:_e(se(x,k)),value:T?T[k]:null,style:{height:n,width:s,margin:t},disabled:this.props.apiOptions.readOnly,onFocus:()=>{this.cursorPosition=[x,k],this.props.onChange({cursorPosition:[x,k]},()=>!1),this._handleFocus(x,k)},onBlur:()=>{x===this.cursorPosition[0]&&k===this.cursorPosition[1]&&this.props.onChange({cursorPosition:[0,0]},()=>!1),this._handleBlur(x,k)},onKeyDown:U=>{this.handleKeyDown(x,k,U)},onChange:(U,A)=>{this.onValueChange(x,k,U,A)}};let H;if(this.props.apiOptions.customKeypad)H=d(gt,{...I,style:{margin:t,minWidth:s,minHeight:n,boxSizing:"border-box",backgroundColor:M?"#f3f3f3":"#fff"},scrollable:!0,keypadElement:this.props.keypadElement});else if(this.props.numericInput)H=d(Mt,{...I});else{const U={...I,style:S.StyleSheet.create({input:{...I.style,display:"inline-block",padding:0,backgroundColor:M?"#f3f3f3":"#fff"}}).input};H=d(Oo,{...U})}return d("span",{className:"matrix-input-field",children:H},k)})},x)})]}),this.props.suffix&&d("div",{className:"matrix-suffix",children:d(O,{content:this.props.suffix,linterContext:this.props.linterContext})})]})}};Xt.defaultProps={matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0],apiOptions:G.defaults,linterContext:q};let Nt=Xt;c.extend(Nt,{validate:function(i,e){const t=e.answers,n=i.answers,s=ns(t),r=ns(n),o=s[0]!==r[0]||s[1]!==r[1],a=ht.number.createValidatorFunctional;let u=null,l=!1,p=!1;return c(r[0]).times(h=>{c(r[1]).times(g=>{if((n[h][g]==null||n[h][g].toString().length===0)&&(l=!0),!o){const y=a(t[h][g],{simplify:!0})(n[h][g]);y.message&&(u=y.message),y.correct||(p=!0)}})}),l?{type:"invalid",message:v("Make sure you fill in all cells in the matrix.")}:o?{type:"points",earned:0,total:1,message:null}:{type:"points",earned:p?0:1,total:1,message:u}}});const yc=i=>{const e=c(i.matrixBoardSize[0]).times(function(){return gc(i.matrixBoardSize[1])});return i=c.pick(i,"matrixBoardSize","prefix","suffix"),c.extend(i,{answers:e})},bc=i=>{const e=c.pick(i,"matrixBoardSize","prefix","suffix");return e.answers=c.map(i.answers,t=>c.map(t,n=>n!=null?String(n):"")),e},vc={name:"matrix",displayName:"Matrix",widget:Nt,transform:yc,staticTransform:bc,isLintable:!0},xc={url:null,top:0,left:0},Ms=Lo({displayName:"Measurer",propTypes:{apiOptions:G.propTypes,box:m.arrayOf(m.number),image:m.shape({url:m.string,top:m.number,left:m.number}),showProtractor:m.bool,protractorX:m.number,protractorY:m.number,showRuler:m.bool,rulerLabel:m.string,rulerTicks:m.number,rulerPixels:m.number,rulerLength:m.number},getDefaultProps:function(){return{box:[480,480],image:{},showProtractor:!0,protractorX:7.5,protractorY:.5,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10}},getInitialState:function(){return{}},render:function(){const i=c.extend({},xc,this.props.image);return w("div",{className:"perseus-widget perseus-widget-measurer graphie-container above-scratchpad",style:{width:this.props.box[0],height:this.props.box[1]},children:[i.url&&d("div",{style:{position:"relative",top:i.top,left:i.left},children:d(an,{src:i.url})}),d("div",{className:"graphie",ref:"graphieDiv"})]})},componentDidMount:function(){this.setupGraphie()},componentDidUpdate:function(i){c.any(["box","showProtractor","showRuler","rulerLabel","rulerTicks","rulerPixels","rulerLength"],function(t){return i[t]!==this.props[t]},this)&&this.setupGraphie()},setupGraphie:function(){const i=L.findDOMNode(this.refs.graphieDiv);R(i).empty();const e=this.graphie=we.createGraphie(i),t=[40,40],n=[[0,this.props.box[0]/t[0]],[0,this.props.box[1]/t[1]]];e.init({range:n,scale:t}),e.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),this.protractor&&this.protractor.remove(),this.props.showProtractor&&(this.protractor=e.protractor([this.props.protractorX,this.props.protractorY])),this.ruler&&this.ruler.remove(),this.props.showRuler&&(this.ruler=e.ruler({center:[(n[0][0]+n[0][1])/2,(n[1][0]+n[1][1])/2],label:this.props.rulerLabel,pixelsPerUnit:this.props.rulerPixels,ticksPerUnit:this.props.rulerTicks,units:this.props.rulerLength}))},getUserInput:function(){return{}},simpleValidate:function(i){return Ms.validate(this.getUserInput(),i)},focus:R.noop});c.extend(Ms,{validate:function(i,e){return{type:"points",earned:1,total:1,message:null}}});const Cc={1:i=>c(i).chain().omit("imageUrl","imageTop","imageLeft").extend({image:{url:i.imageUrl,top:i.imageTop,left:i.imageLeft}}).value()},wc={name:"measurer",displayName:"Measurer",widget:Ms,version:{major:1,minor:0},propUpgrades:Cc};function Sc(i,e){e.value!==null&&(i.fillStyle=j.fgColor,i.font=j.font,i.fillText(e.value,e.pos[0]-j.fontSizePx/2+1,e.pos[1]+j.fontSizePx/2))}function Ic(i,e){let t=new Path2D;i.lineWidth=5*j.lineWidth,i.strokeStyle=j.fgColor,t.moveTo(e.startPos[0],e.startPos[1]),t.lineTo(e.endPos[0],e.endPos[1]),i.stroke(t),t=new Path2D,i.lineWidth=3*j.lineWidth,i.strokeStyle=j.bgColor,t.moveTo(e.startPos[0],e.startPos[1]),t.lineTo(e.endPos[0],e.endPos[1]),i.stroke(t)}function kc(i,e){let t=new Path2D;i.lineWidth=7*j.lineWidth,i.strokeStyle=j.fgColor,t.moveTo(e.startPos[0],e.startPos[1]),t.lineTo(e.endPos[0],e.endPos[1]),i.stroke(t),t=new Path2D,i.lineWidth=5*j.lineWidth,i.strokeStyle=j.bgColor,t.moveTo(e.startPos[0],e.startPos[1]),t.lineTo(e.endPos[0],e.endPos[1]),i.stroke(t),br(i,e)}function br(i,e){const t=new Path2D;i.lineWidth=j.lineWidth,i.strokeStyle=j.fgColor,t.moveTo(e.startPos[0],e.startPos[1]),t.lineTo(e.endPos[0],e.endPos[1]),i.stroke(t)}const Pc={text:Sc,"line:single":br,"line:double":Ic,"line:triple":kc};function Mc(i){return function(e){Pc[e.type](i,e)}}const Ai={"line:single":0,"line:double":0,"line:triple":0,text:1};function Tc(i,e){return Ai[i.type]-Ai[e.type]}function _c(i,e){e.sort(Tc).forEach(Mc(i))}const j={bgColor:"rgb(255, 255, 255)",fgColor:"rgb(0, 0, 0)",fontSizePx:12,lineWidth:1,font:"12px sans"},vr=30;function Ec(i,e,t){const n=i[0],s=i[1];return[n+Math.cos(e*2*Math.PI/360)*t,s+-1*Math.sin(e*2*Math.PI/360)*t]}function xr(i,e,t,n){let s=i.symbol;if(s==="C"&&Object.keys(e).length!==1&&(s=null),i.idx==="1,0"){const f=[0,0];return i.pos=f,i.baseAngle=-30+n,{type:"text",value:s,pos:f,idx:i.idx}}const r=e[i.connections.find(function(f){return e[f].pos})],o=r.connections.indexOf(i.idx);let a=60,u=120;r.connections.length===4?(u=90,a=90):(t.find(f=>f.bondType==="triple"&&f.to===i.idx)||t.find(f=>f.bondType==="triple"&&f.to===r.idx))&&(u=0,a=0);let l=0;const p=r.idx.split(":"),h=p[p.length-1].split(",")[0];parseInt(h)%2!==0?l=r.baseAngle-(a-u*o):l=r.baseAngle+(a-u*o);const g=Ec(r.pos,l,vr);return i.pos=g,i.baseAngle=l,{type:"text",value:s,pos:g,idx:i.idx}}function Rc(i,e){let n=[i.pos[0],i.pos[1]],s=[e.pos[0],e.pos[1]];return i.symbol!=="C"&&(n=[e.pos[0]-(1-.25)*(e.pos[0]-i.pos[0]),e.pos[1]-(1-.25)*(e.pos[1]-i.pos[1])]),e.symbol!=="C"&&(s=[i.pos[0]-(1-.25)*(i.pos[0]-e.pos[0]),i.pos[1]-(1-.25)*(i.pos[1]-e.pos[1])]),[n,s]}function Cr(i,e){const t=e[i.from],n=e[i.to],s=Rc(t,n);return{type:"line:"+i.bondType,startPos:s[0],endPos:s[1]}}function Ni(i){return i.join(":")}function Ts(i,e,t){if(t===null)return[i,e];if(t.type==="atom"){const n=Ni(t.idx);i[n]={idx:n,symbol:t.symbol,connections:[]},t.bonds&&t.bonds.forEach(function(s){const r=Ni(s.to.idx);i[n].connections.push(r),e.push({from:n,to:r,bondType:s.bondType}),Ts(i,e,s.to),i[r].connections.push(n)})}return[i,e]}function wr(i,e,t,n,s){if(e.length===0)return i;const r=e.shift(),o=t[r];return o.connections.forEach(function(a){t[a].pos||e.push(a)}),wr(i.concat(xr(o,t,n,s)),e,t,n,s)}function Sr(i,e,t){return t.length===0?i:Sr(i.concat(Cr(t[0],e)),e,t.slice(1))}function Ac(i,e){const t=Ts({},[],i),n=t[0],s=t[1],r=wr([],["1,0"],n,s,e);return Sr(r,n,s)}const Nc={layout:Ac,_atomLayout:xr,_bondLayout:Cr,_bondLength:vr,_convertTree:Ts},Fc=new RegExp("^[A-Za-z\\[\\]()=#+-]*$"),Ir=new RegExp("^(Cl|Br|[CONPSFBI]|\\[)");function Ne(i){this.message=i}function Fe(i,e,t){const n=e[0],s=e.slice(1);let r;Array.isArray(i)?r=[...i]:r={...i||{}};let o=t;return s.length>0&&(o=Fe(r[n],s,t)),r[n]=o,r}function Oc(i,e){const t=e.reduce(function(n,s){return n[s]},i);return Fe(i,e,t+1)}function Lc(i){return Fc.test(i)}function Vc(i,e){const t=i[0],n=i.slice(1);if(t==="=")return Oe(n,Fe(e,["bond","bondType"],"double"));if(t==="#")return Oe(n,Fe(e,["bond","bondType"],"triple"));throw new Ne("Invalid character: "+t)}function kt(i,e){if(e.length===0)return i;if(i==="")throw new Ne("Mismatched parentheses");const t=i[0],n=i.slice(1);return t==="("?kt(n,e.concat(t)):t===")"?kt(n,e.slice(1)):kt(n,e)}function Dc(i,e){const t=i[0],n=i.slice(1);if(t==="("){let s={...e,parens:e.parens+"("};s=Oc(e,["idx",e.idx.length-1,1]);let r=-1;e.idx[e.idx.length-1][0]%2===0&&(r=0);const o={...s,idx:s.idx.concat([[r,0]]),parens:s.parens.concat("(")},a=Oe(n,o),u=Oe(kt(n,["("]),s);return[a].concat(u)}if(t===")"){if(e.parens[e.parens.length-1]!=="(")throw new Ne("Mismatched parentheses");return null}throw new Ne("Invalid bare character: "+t)}function qc(i,e){let t=null,n=null;if(i[0]==="["){const s=i.indexOf("]");if(s===-1)return["",i];t=i.slice(1,s),n=i.slice(s+1)}else t=Ir.exec(i)[1],n=i.slice(t.length);return[t,n]}function Hc(i,e){const t=qc(i),n=t[0];if(n==="")return["error","Unable to parse bracketed atom."];const s=t[1],r=Fe(e,["idx",e.idx.length-1],[1+e.idx[e.idx.length-1][0],0]);let o=Oe(s,Fe(r,["bond","bondType"],"single"));!Array.isArray(o)&&o&&(o=[o]);const a={type:"atom",symbol:n,bonds:o,idx:r.idx};return e.bond?{type:"bond",bondType:e.bond.bondType,to:a}:a}function Uc(i){return Ir.test(i)}function Wc(i){return i==="="||i==="#"}function Oe(i,e){if(!Lc(i))throw new Ne("Invalid input.");return!i||i.length===0?null:Uc(i)?Hc(i,e||{idx:[[0,0]],parens:[],stack:[],bondModifiers:[]}):Wc(i[0])?Vc(i,e):Dc(i,e)}const kr={parse:Oe,ParseError:Ne},{layout:Bc}=Nc,zc=kr.parse,$c=kr.ParseError,wt=30,Vs=class Vs extends b.Component{constructor(){super(...arguments),this.state={parsedSmiles:null,error:null},this.stateFromSmiles=e=>{try{this.setState({parsedSmiles:zc(e),error:null})}catch(t){if(t instanceof $c)this.setState({error:t.message});else throw t}},this.setCanvasBounds=(e,t)=>{const n=Math.max(...t.map(l=>l.pos?l.pos[0]:-1/0)),s=Math.max(...t.map(l=>l.pos?l.pos[1]:-1/0)),r=Math.min(...t.map(l=>l.pos?l.pos[0]:1/0)),o=Math.min(...t.map(l=>l.pos?l.pos[1]:1/0)),a=n-r+2*wt,u=s-o+2*wt;return e.width=a,e.height=u,[wt-r,wt-o]},this.canvasRender=()=>{if(this.state.error||!this.state.parsedSmiles)return;const e=Bc(this.state.parsedSmiles,this.props.rotationAngle),t=this.refs.canvas,n=this.setCanvasBounds(t,e),s=t.getContext("2d");s.clearRect(0,0,t.width,t.height),s.save(),s.translate(n[0],n[1]),_c(s,e),s.restore()}}UNSAFE_componentWillMount(){this.stateFromSmiles(this.props.smiles)}componentDidMount(){this.canvasRender()}UNSAFE_componentWillReceiveProps(e){this.stateFromSmiles(e.smiles)}componentDidUpdate(){this.canvasRender()}render(){let e=d("canvas",{className:"molecule-canvas",id:this.props.id+"-molecule",ref:"canvas",children:he("A molecular structure drawing. SMILES notation: %(content)s",{content:this.props.smiles})});return this.state.error&&(e=d("div",{className:"error",children:this.state.error})),d("div",{className:"molecule-canvas",children:e})}};Vs.propTypes={id:m.string.isRequired,rotationAngle:m.number,smiles:m.string};let Le=Vs;const jt=class jt extends b.Component{constructor(){super(...arguments),this.simpleValidate=()=>({type:"points",earned:0,total:0,message:null}),this.getUserInput=()=>[],this.validate=(e,t)=>({type:"points",earned:0,total:0,message:null})}render(){return d(Le,{id:this.props.widgetId,smiles:this.props.smiles,rotationAngle:this.props.rotationAngle})}};jt.propTypes={rotationAngle:m.number,smiles:m.string,widgetId:m.string},jt.defaultProps={rotationAngle:0};let ss=jt;const Gc={name:"molecule-renderer",displayName:"Molecule renderer",hidden:!0,widget:ss};try{Le.displayName="Molecule",Le.__docgenInfo={description:"",displayName:"Molecule",props:{}}}catch{}const Yc=V.MovablePoint,Kc=V.Line,{assert:Xc}=ln,jc=(i,e,t)=>Math.min(Math.max(i,e),t),Qc="–",Pn=30,Zc={ge:"le",gt:"lt",le:"ge",lt:"gt"},Jc={ge:"gt",gt:"ge",le:"lt",lt:"le"};function Ft(i,e){return e===1?""+i:`\\dfrac{${i}}{${e}}`}function Pr(i,e){if(i<0)return"-"+Pr(-i,e);const t=Math.floor(i/e);return t===0?Ft(i,e):i-t*e===0?""+t:t+Ft(i-t*e,e)}function ep(i,e,t){const n=Math.floor(t/e);return Ft(i*n,t)}const Mn=(i,e,t,n,s)=>{if(n=n||t,e==="decimal"||e==="decimal ticks")return i.label([t,-.53],Math.round(n*100)/100,"center");if(e==="improper"){const r=ge.toFraction(n);return i.label([t,-.17],Ft(r[0],r[1]),"below")}if(e==="mixed"){const r=ge.toFraction(n);return i.label([t,-.17],Pr(r[0],r[1]),"below")}if(e==="non-reduced"){const r=ge.toFraction(n);return i.label([t,-.17],ep(r[0],r[1],s),"below")}},tp=V.createSimpleClass((i,e)=>{if(!c.isFinite(e.tickStep)||e.tickStep<=0)return[];const t=[],n=e.range,s=e.labelRange,r=s[0]==null?n[0]:s[0],o=s[1]==null?n[1]:s[1];let a;if(e.labelStyle==="non-reduced"){const u=[r,o];for(let h=0;h<=e.numDivisions;h++){const g=n[0]+h*e.tickStep;u.push(g)}const l=h=>jr(h)[1],p=c.map(u,l);a=c.reduce(p,(h,g)=>ge.getLCM(h,g))}else a=void 0;for(let u=0;u<=e.numDivisions;u++){const l=n[0]+u*e.tickStep;t.push(i.line([l,-.2],[l,.2])),(e.labelTicks||e.labelStyle==="decimal ticks")&&t.push(Mn(i,e.labelStyle,l,l,a))}return t.push(i.style(e.isMobile?{color:C.BLUE_D}:{},()=>Mn(i,e.labelStyle,r,r,a))),t.push(i.style(e.isMobile?{color:C.BLUE_D}:{},()=>Mn(i,e.labelStyle,o,o,a))),i.style({stroke:e.isMobile?C.BLUE_D:C.DYNAMIC,strokeWidth:3.5},()=>{t.push(i.line([r,-.2],[r,.2])),t.push(i.line([o,-.2],[o,.2]))}),t}),Qt=class Qt extends b.Component{constructor(){super(...arguments),this.state={numDivisionsEmpty:!1},this.change=(...e)=>W.apply(this,e),this.isValid=()=>{const e=this.props.range;let t=this.props.numLinePosition;const n=this.props.divisionRange;return t=t??e[0],e[0]<e[1]&&Gs(t-e[0])>=0&&Gs(t-e[1])<=0&&n[0]<n[1]&&0<this.props.numDivisions&&0<this.props.snapDivisions},this.onNumDivisionsChange=(e,t)=>{const n=this.props.divisionRange.slice(),s=this.props.range[1]-this.props.range[0];if(e=Math.round(e),e=e<0?e*-1:e,e){const r=c.extend({},this.props,{tickStep:s/e}),o=this.snapNumLinePosition(r,this.props.numLinePosition);this.setState({numDivisionsEmpty:!1},()=>{this.props.onChange({divisionRange:n,numDivisions:e,numLinePosition:o},t)})}else this.setState({numDivisionsEmpty:!0},t)},this._handleTickCtrlFocus=()=>{this.props.onFocus(["tick-ctrl"])},this._handleTickCtrlBlur=()=>{this.props.onBlur(["tick-ctrl"])},this.focus=()=>{if(this.props.isTickCtrl)return this.refs["tick-ctrl"].focus(),!0},this.focusInputPath=e=>{e.length===1&&this.refs[e[0]].focus()},this.blurInputPath=e=>{e.length===1&&this.refs[e[0]].blur()},this.getInputPaths=()=>this.props.isTickCtrl?[["tick-ctrl"]]:[],this.getDOMNodeForPath=e=>{if(e.length===1)return L.findDOMNode(this.refs[e[0]])},this.getGrammarTypeForPath=e=>{if(e.length===1&&e[0]==="tick-ctrl")return"number"},this.setInputValue=(e,t,n)=>{e.length===1&&e[0]==="tick-ctrl"&&this.onNumDivisionsChange(t,n)},this._renderGraphie=()=>{const e=this.props.range,t=e[1]-e[0],n=c.pick(this.props,["range","isTickCtrl"]),s=c.extend({},this.props,{tickStep:t/this.props.numDivisions});return w(V,{ref:"graphie",box:[this.props.apiOptions.isMobile?288:460,80],options:n,onMouseDown:r=>{this.refs.graphie.movables.numberLinePoint.grab(r)},setup:this._setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable,isMobile:this.props.apiOptions.isMobile,children:[d(tp,{...c.pick(s,["range","numDivisions","labelTicks","labelStyle","labelRange","tickStep"]),isMobile:this.props.apiOptions.isMobile}),this._renderInequality(s),this._renderNumberLinePoint(s)]},this.props.labelStyle)},this.snapNumLinePosition=(e,t)=>{const n=e.range[0],s=e.range[1],r=e.tickStep/e.snapDivisions;let o=jc(t,n,s);return o=n+Qr(o-n,r),Xc(c.isFinite(o)),o},this.movePosition=e=>{this.change({numLinePosition:e}),this.props.trackInteraction()},this._renderNumberLinePoint=e=>{const t=c(["lt","gt"]).contains(e.rel);let n;t?n=C._BACKGROUND:e.static?n=C.DYNAMIC:n=C.INTERACTIVE;const s={fill:n,stroke:e.static?C.DYNAMIC:C.INTERACTIVE,"stroke-width":t?3:1},r={fill:t?C._BACKGROUND:C.INTERACTING,"stroke-width":t?3:1},o=e.isInequality?{stroke:C.INTERACTIVE,"fill-opacity":t?0:1}:{};return d(Yc,{ref:"numberLinePoint",pointSize:6,coord:[e.numLinePosition,0],constraints:[(a,u)=>[a[0],u[1]],(a,u)=>[this.snapNumLinePosition(e,a[0]),a[1]]],normalStyle:s,highlightStyle:r,onMove:a=>{this.movePosition(a[0])},isMobile:this.props.apiOptions.isMobile,mobileStyleOverride:o,showTooltips:this.props.showTooltips,xOnlyTooltip:!0})},this.handleReverse=()=>{const e=Zc[this.props.rel];this.props.onChange({rel:e})},this.handleToggleStrict=()=>{const e=Jc[this.props.rel];this.props.onChange({rel:e})},this._getInequalityEndpoint=e=>{const t=c(["ge","gt"]).contains(e.rel),n=400,s=e.range,r=(s[1]-s[0])/n,o=Pn*r,a=s[0]-o,u=s[1]+o;return t?[u,0]:[a,0]},this._renderInequality=e=>{if(e.isInequality){const t=this._getInequalityEndpoint(e),n={arrows:"->",stroke:this.props.apiOptions.isMobile?C.INTERACTIVE:C.DYNAMIC,strokeWidth:3.5},s=["ge","gt"].includes(e.rel);return d(Kc,{start:[(s?.4:-.4)+e.numLinePosition,0],end:t,style:n})}return null},this._setupGraphie=(e,t)=>{if(!this.isValid())return;const n=this.props.apiOptions.isMobile?288-Pn*2:400,s=t.range,r=(s[1]-s[0])/n,o=Pn*r,a=s[0]-o,u=s[1]+o,p=this.props.labelStyle==="improper"||this.props.labelStyle==="mixed"||this.props.labelStyle==="non-reduced"?-1.5:-1;e.init({range:[[a,u],[p,1]],scale:[1/r,40],isMobile:this.props.apiOptions.isMobile});const g=(s[0]+s[1])/2;e.line([g,0],[u,0],{arrows:"->"}),e.line([g,0],[a,0],{arrows:"->"})},this.getUserInput=()=>({numLinePosition:this.props.numLinePosition,rel:this.props.isInequality?this.props.rel:"eq",numDivisions:this.props.numDivisions,divisionRange:this.props.divisionRange}),this.simpleValidate=e=>Qt.validate(this.getUserInput(),e)}render(){const e=this.props.divisionRange,t=e[0]+Qc+e[1],n=this.props.numDivisions<e[0]||this.props.numDivisions>e[1],s=w("div",{children:[d("input",{type:"button",className:"simple-button",value:v("Switch direction"),onClick:this.handleReverse}),d("input",{type:"button",className:"simple-button",value:c(["le","ge"]).contains(this.props.rel)?v("Make circle open"):v("Make circle filled"),onClick:this.handleToggleStrict})]});let r;if(this.props.isTickCtrl){let o;this.props.apiOptions.customKeypad?o=gt:o=Mt,r=w("label",{children:[v("Number of divisions:")," ",d(o,{ref:"tick-ctrl",value:this.state.numDivisionsEmpty?null:this.props.numDivisions||e[0],checkValidity:a=>a>=e[0]&&a<=e[1],onChange:this.onNumDivisionsChange,onFocus:this._handleTickCtrlFocus,onBlur:this._handleTickCtrlBlur,useArrowKeys:!0,keypadElement:this.props.keypadElement})]})}return w("div",{className:"perseus-widget perseus-widget-interactive-number-line",children:[r,this.isValid()?this.props.isTickCtrl&&n?d("div",{className:"perseus-error",children:he("Please make sure the number of divisions is in the range %(divRangeString)s.",{divRangeString:t})}):this._renderGraphie():d("div",{className:"perseus-error",children:rn("Invalid number line configuration.")}),!this.props.static&&this.props.isInequality&&s]})}};Qt.defaultProps={range:[0,10],labelStyle:"decimal",labelRange:[null,null],divisionRange:[1,12],labelTicks:!0,isTickCtrl:!1,isInequality:!1,numLinePosition:0,snapDivisions:2,showTooltips:!1,rel:"ge",apiOptions:G.defaults};let Ot=Qt;c.extend(Ot,{validate:function(i,e){const t=e.range,n=i.divisionRange,s=e.initialX!=null?e.initialX:t[0],r=e.isInequality?"ge":"eq",o=e.correctRel||"eq",a=Ss(i.numLinePosition,e.correctX||0),u=i.numDivisions>n[1]||i.numDivisions<n[0];return i.isTickCrtl&&u?{type:"invalid",message:"Number of divisions is outside the allowed range."}:a&&o===i.rel?{type:"points",earned:1,total:1,message:null}:i.numLinePosition===s&&i.rel===r?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}}});const np=i=>{const e=c.pick(i,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isTickCtrl","isInequality","showTooltips"]),t=i.initialX!=null?i.initialX:i.range[0],n=i.range[1]-i.range[0];let s;return i.numDivisions!=null?s=i.numDivisions:i.tickStep!=null?s=n/i.tickStep:s=void 0,c.extend(e,{numLinePosition:t,numDivisions:s,snapDivisions:e.snapDivisions||void 0}),e},sp=i=>{const e=c.pick(i,["range","labelRange","labelStyle","labelTicks","divisionRange","snapDivisions","isInequality"]),t=i.correctX!=null?i.correctX:i.range[0],n=i.range[1]-i.range[0];let s;return i.numDivisions!=null?s=i.numDivisions:i.tickStep!=null?s=n/i.tickStep:s=void 0,c.extend(e,{numLinePosition:t,numDivisions:s,rel:i.isInequality?i.correctRel:null,snapDivisions:e.snapDivisions||void 0}),e},ip={name:"number-line",displayName:"Number line",widget:Ot,transform:np,staticTransform:sp},Ds=class Ds extends b.Component{render(){return d("div",{className:"card-wrap "+ve.INTERACTIVE,style:{width:this.props.width},children:d("div",{className:"card placeholder",style:{height:this.props.height}})})}};Ds.propTypes={width:m.number.isRequired,height:m.number.isRequired};let is=Ds;class rp extends b.Component{render(){return d("div",{className:"card-wrap "+ve.INTERACTIVE,children:d("div",{className:"card drag-hint"})})}}const Tn=m.shape({left:m.number,top:m.number}),Zt=class Zt extends b.Component{constructor(){super(...arguments),this.state={dragging:!1},this.bindMouseMoveUp=()=>{this.mouseMoveUpBound=!0,R(document).on("mousemove",this.onMouseMove),R(document).on("mouseup",this.onMouseUp)},this.unbindMouseMoveUp=()=>{this.mouseMoveUpBound=!1,R(document).off("mousemove",this.onMouseMove),R(document).off("mouseup",this.onMouseUp)},this.onMouseDown=e=>{e.preventDefault();const t=E.extractPointerLocation(e);t&&(this.setState({dragging:!0}),this.bindMouseMoveUp(),this.props.onMouseDown&&this.props.onMouseDown(t,this))},this.onMouseMove=e=>{if(!this.state.dragging)return;e.preventDefault();const t=E.extractPointerLocation(e);t&&this.props.onMouseMove&&this.props.onMouseMove(t)},this.onMouseUp=e=>{e.preventDefault();const t=E.extractPointerLocation(e);t&&(this.setState({dragging:!1}),this.unbindMouseMoveUp(),this.props.onMouseUp&&this.props.onMouseUp(t))}}render(){let e={};this.props.floating&&(e={position:"absolute",left:this.props.startOffset.left,top:this.props.startOffset.top}),this.props.width&&(e.width=this.props.width);const t=["card"];this.props.stack&&t.push("stack"),this.props.floating&&!this.props.animating&&(t.push("dragging"),e.left+=this.props.mouse.left-this.props.startMouse.left,e.top+=this.props.mouse.top-this.props.startMouse.top);const n=c.pick(this.props,"content"),s=this.props.animating?R.noop:this.onMouseDown;return d("div",{className:"card-wrap "+ve.INTERACTIVE,style:e,onMouseDown:s,onTouchStart:s,onTouchEnd:this.onMouseUp,onTouchCancel:this.onMouseUp,children:d("div",{className:t.join(" "),children:d(O,{...n,linterContext:this.props.linterContext})})})}shouldComponentUpdate(e,t){return this.props.floating||e.floating||this.props.content!==e.content||this.props.fakeRef!==e.fakeRef}componentDidMount(){this.mouseMoveUpBound=!1,document.addEventListener("touchmove",this.onMouseMove,E.supportsPassiveEvents()?{passive:!1}:!1)}componentDidUpdate(e,t){if(this.props.animating&&!e.animating){const n=15*Math.sqrt(Math.sqrt(Math.pow(this.props.animateTo.left-this.props.startOffset.left,2)+Math.pow(this.props.animateTo.top-this.props.startOffset.top,2)));R(L.findDOMNode(this)).animate(this.props.animateTo,Math.max(n,1),this.props.onAnimationEnd)}}componentWillUnmount(){this.mouseMoveUpBound&&(ws.error("Removing an element with bound event handlers.",ke.Internal),this.unbindMouseMoveUp(),E.resetTouchHandlers()),document.removeEventListener("touchmove",this.onMouseMove)}};Zt.propTypes={floating:m.bool.isRequired,animating:m.bool,width:m.number,stack:m.bool,onMouseDown:m.func,onMouseMove:m.func,onMouseUp:m.func,startMouse:Tn,startOffset:Tn,animateTo:Tn,onAnimationEnd:m.func,linterContext:ut},Zt.defaultProps={stack:!1,animating:!1,linterContext:q};let Re=Zt;const op="normal",_n="horizontal",Jt=class Jt extends b.Component{constructor(){super(...arguments),this.state={current:[],dragging:!1,placeholderIndex:null,dragKey:null,animating:!1,dragContent:null,dragWidth:null,dragHeight:null,offsetPos:null,animateTo:null,grabPos:null},this.onClick=(e,t,n,s)=>{const r=R(L.findDOMNode(s)),o=this.state.current.slice();let a,u=null;e==="current"?(o.splice(t,1),a=this.state.current[t],u=t):e==="bank"&&(a=this.props.options[t]),this.setState({current:o,dragging:!0,placeholderIndex:u,dragKey:a.key,dragContent:a.content,dragWidth:r.width(),dragHeight:r.height(),grabPos:n,mousePos:n,offsetPos:r.position()})},this.onRelease=e=>{const t=this.refs.dragging;if(t==null)return;const n=this.isCardInBank(t),s=this.state.placeholderIndex||0,r=()=>{const u=this.state.current.slice();if(!n){const l={content:this.state.dragContent,key:c.uniqueId("perseus_draggable_card_"),width:this.state.dragWidth};u.splice(s,0,l)}this.props.onChange({current:u}),this.setState({current:u,dragging:!1,placeholderIndex:null,animating:!1}),this.props.trackInteraction()},o=R(L.findDOMNode(t)).position();let a=null;n?c.each(this.props.options,function(u,l){if(u.content===this.state.dragContent){const p=L.findDOMNode(this.refs["bank"+l]);a=R(p).position()}},this):this.refs.placeholder!=null&&(a=R(L.findDOMNode(this.refs.placeholder)).position()),a==null?r():this.setState({offsetPos:o,animateTo:a,onAnimationEnd:r,animating:!0,dragging:!1})},this.onMouseMove=e=>{const t=this.refs.dragging;if(t==null)return;let n;this.isCardInBank(t)?n=null:n=this.findCorrectIndex(t,this.state.current),this.setState({mousePos:e,placeholderIndex:n})},this.findCorrectIndex=(e,t)=>{const n=this.props.layout===_n,s=R(L.findDOMNode(this.refs.dragList)),r=s.offset().left,o=s.offset().top,a=R(L.findDOMNode(e)).offset().left-r,u=R(L.findDOMNode(e)).offset().top-o;let l=0,p=0,h=0;return n?c.each(t,function(g,f){const y=L.findDOMNode(this.refs["sortable"+f]),x=R(y).outerWidth(!0);a>p+x/2&&(l+=1),p+=x},this):c.each(t,function(g,f){const y=L.findDOMNode(this.refs["sortable"+f]),x=R(y).outerHeight(!0);u>h+x/2&&(l+=1),h+=x},this),l},this.isCardInBank=e=>{if(e==null)return!1;const t=this.props.layout===_n,n=R(L.findDOMNode(e)),s=R(L.findDOMNode(this.refs.bank)),r=n.offset(),o=s.offset(),a=n.outerHeight(!0),u=s.outerHeight(!0),l=s.outerWidth(!0),p=L.findDOMNode(this.refs.dragList);R(p).width();const h=n.outerWidth(!0);return t?r.top+a/2<o.top+u:r.left+h/2<o.left+l},this.setListValues=e=>{const t=e.map(n=>({content:n}));this.props.onChange({current:t}),this.setState({current:t})},this.getUserInput=()=>({current:c.map(this.props.current,function(e){return e.content})}),this.simpleValidate=e=>Jt.validate(this.getUserInput(),e)}UNSAFE_componentWillReceiveProps(e){c.isEqual(this.props.current,e.current)||this.setState({current:e.current})}render(){const e=this.state.dragging&&d(Re,{ref:"dragging",floating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,startMouse:this.state.grabPos,mouse:this.state.mousePos,width:this.state.dragWidth,onMouseUp:this.onRelease,onMouseMove:this.onMouseMove,linterContext:this.props.linterContext},this.state.dragKey||"draggingCard"),t=this.state.animating&&d(Re,{floating:!0,animating:!0,content:this.state.dragContent,startOffset:this.state.offsetPos,width:this.state.dragWidth,animateTo:this.state.animateTo,onAnimationEnd:this.state.onAnimationEnd,linterContext:this.props.linterContext},this.state.dragKey||"draggingCard"),n=c.map(this.state.current,function(a,u){return d(Re,{ref:"sortable"+u,fakeRef:"sortable"+u,floating:!1,content:a.content,width:a.width,linterContext:this.props.linterContext,onMouseDown:this.state.animating?R.noop:this.onClick.bind(null,"current",u)},`sortableCard${u}`)},this);if(this.state.placeholderIndex!=null){const a=d(is,{ref:"placeholder",width:this.state.dragWidth,height:this.state.dragHeight},"placeholder");n.splice(this.state.placeholderIndex,0,a)}const s=n.length>0;n.push(e,t);const r=w("div",{className:"perseus-clearfix draggable-box",children:[!s&&d(rp,{}),d("div",{ref:"dragList",children:n})]}),o=d("div",{ref:"bank",className:"bank perseus-clearfix",children:c.map(this.props.options,(a,u)=>d(Re,{ref:"bank"+u,floating:!1,content:a.content,stack:!0,linterContext:this.props.linterContext,onMouseDown:this.state.animating?R.noop:this.onClick.bind(null,"bank",u),onMouseMove:this.onMouseMove,onMouseUp:this.onRelease},u),this)});return w("div",{className:"draggy-boxy-thing orderer height-"+this.props.height+" layout-"+this.props.layout+" above-scratchpad blank-background perseus-clearfix "+ve.INTERACTIVE,ref:"orderer",children:[o,r]})}};Jt.defaultProps={current:[],options:[],correctOptions:[],height:op,layout:_n,linterContext:q};let Lt=Jt;c.extend(Lt,{validate:function(i,e){return i.current.length===0?{type:"invalid",message:null}:{type:"points",earned:c.isEqual(i.current,c.pluck(e.correctOptions,"content"))?1:0,total:1,message:null}}});const ap={name:"orderer",displayName:"Orderer",widget:Lt,isLintable:!0};function re(i,e,t,n){let s;return e==="start"&&n==="start"?s=Range.START_TO_START:e==="start"&&n==="end"?s=Range.END_TO_START:e==="end"&&n==="start"?s=Range.START_TO_END:s=Range.END_TO_END,i.compareBoundaryPoints(s,t)}function fn(i,e){const t=i.cloneRange();return t.setEnd(e.endContainer,e.endOffset),t}function mn(i,e){return!(re(i,"end",e,"start")<0||re(e,"end",i,"start")<0)}function lp(i,e){return re(i,"start",e,"start")<=0&&re(i,"end",e,"end")>=0}function cp(i,e){if(!mn(i,e))return null;const t=re(i,"start",e,"start")>0?i:e,n=re(i,"end",e,"end")<0?i:e;return fn(t,n)}function pp(i,e){if(!mn(i,e))return null;const t=re(i,"start",e,"start")<0?i:e,n=re(i,"end",e,"end")>0?i:e;return fn(t,n)}function Fi(i,e,t,n,s){let r=-1,o=n,a=s,u=0;for(;o<=a;){if(u++,u>e.length*2)throw new Error(`Assertion error: Binary search isn't terminating? lower=${o}, upper=${a}`);const l=Math.floor((o+a)/2);t==="first"?re(e[l],"end",i,"start")<=0?o=l+1:(r=l,a=l-1):re(e[l],"start",i,"end")>=0?a=l-1:(r=l,o=l+1)}return r}function up(i,e){const t=Fi(i,e,"first",0,e.length-1);if(t<0)return null;const n=Fi(i,e,"last",t,e.length-1);return n<0?null:[t,n]}function dp(i,e){const t={};let n=e.domRange,s=e.firstWordIndex,r=e.lastWordIndex;for(const l of Object.keys(i)){const p=i[l],h=pp(p.domRange,n);h?(n=h,s=Math.min(p.firstWordIndex,s),r=Math.max(p.lastWordIndex,r)):t[l]=p}const o={firstWordIndex:s,lastWordIndex:r,domRange:n},a=Object.keys(t),u=gp(a);return t[u]=o,t}function hp(i,e,t){for(const u of Object.keys(i)){const l=i[u].domRange;if(lp(l,t))return null}const n=up(t,e);if(!n)return null;const[s,r]=n,o=e[s],a=e[r];return{firstWordIndex:s,lastWordIndex:r,domRange:fn(o,a)}}function gp(i){const e=`${new Date().getTime()}`;if(!i.includes(e))return e;let t=0,n;do n=`${e}-${t}`,t++;while(i.includes(n));return n}function fp(i,e){const{firstWordIndex:t,lastWordIndex:n}=i.range,s=e[t];if(!s)throw new it(`first word index ${s} is out of bounds: must be 0–${e.length-1} inclusive`,ke.InvalidInput,{metadata:{firstWord:s,wordRanges:JSON.stringify(e)}});const r=e[n];if(!r)throw new it(`last word index ${r} is out of bounds: must be 0–${e.length-1} inclusive`,ke.InvalidInput,{metadata:{lastWord:r,wordRanges:JSON.stringify(e)}});return{firstWordIndex:t,lastWordIndex:n,domRange:fn(s,r)}}function mp(i){const{firstWordIndex:e,lastWordIndex:t}=i;return{range:{type:"word-indexes",firstWordIndex:e,lastWordIndex:t}}}function rs(i,e){return{left:i.left-e.left,top:i.top-e.top}}function Mr({left:i,top:e,width:t,height:n},s){return{...rs({left:i,top:e},s),width:t,height:n}}function yp(i){const e=[];return Tr(i.commonAncestorContainer,i,e),e}function Tr(i,e,t){const n=new Range;if(n.selectNodeContents(i),i.nodeType===Node.TEXT_NODE){const s=cp(e,n);s&&bp(i,s,t)}else if(i.nodeType===Node.ELEMENT_NODE){if(!mn(e,n))return;for(const s of Array.from(i.childNodes))Tr(s,e,t)}}function bp(i,e,t){const n=i.parentElement,s=window.getComputedStyle(n);let r=null;if(typeof s.lineHeight=="string"&&s.lineHeight.endsWith("px")){const a=parseFloat(s.lineHeight);isNaN(a)||(r=a)}const o=Array.from(e.getClientRects());for(const a of o){const u={left:a.left,top:a.top,height:a.height,width:a.width};if(r!==null){const l=r-u.height;u.top-=l,u.height=r}t.push(u)}}class os extends b.PureComponent{constructor(){super(...arguments),this.state={cachedHighlightRects:this._computeRects(this.props),tooltipIsHovered:!1}}UNSAFE_componentWillReceiveProps(e){(this.props.highlight!==e.highlight||this.props.offsetParent!==e.offsetParent)&&this.setState({cachedHighlightRects:this._computeRects(e)})}_computeRects(e){const{highlight:t,offsetParent:n}=e,s=yp(t.domRange),{left:r,top:o}=n.getBoundingClientRect();return s.map(u=>Mr(u,{left:r,top:o}))}_rectIsHovered(e,t){const n=rs(t,{left:e.left,top:e.top});return 0<=n.left&&n.left<e.width&&0<=n.top&&n.top<e.height}isHovered(e){if(!e)return!1;const{offsetParent:t}=this.props,{cachedHighlightRects:n}=this.state,{left:s,top:r}=t.getBoundingClientRect(),o=rs(e,{left:s,top:r});return n.some(a=>this._rectIsHovered(a,o))}render(){const e=this.state.cachedHighlightRects;return d("div",{children:e.map((t,n)=>d("div",{className:S.css(vp.highlightRect),style:{position:"absolute",width:t.width,height:t.height,top:t.top,left:t.left,zIndex:this.props.zIndexes.belowContent}},n))})}}const vp=S.StyleSheet.create({highlightRect:{background:"#fffabe"}});try{os.displayName="HighlightRenderer",os.__docgenInfo={description:"",displayName:"HighlightRenderer",props:{highlight:{defaultValue:null,description:"",name:"highlight",required:!0,type:{name:"DOMHighlight"}},highlightKey:{defaultValue:null,description:"",name:"highlightKey",required:!0,type:{name:"string"}},offsetParent:{defaultValue:null,description:"",name:"offsetParent",required:!0,type:{name:"Element"}},zIndexes:{defaultValue:null,description:"",name:"zIndexes",required:!0,type:{name:"ZIndexes"}}}}}catch{}class Vt extends b.PureComponent{_getFocusRect(){const{focusNode:e,focusOffset:t,offsetParent:n}=this.props,s=document.createRange();s.setStart(e,t),s.setEnd(e,t);const r=s.getClientRects()[0];if(!r)return ws.log('[Highlighting] Known bug: Could not determine the focus position, so did not show an "Add Highlight" tooltip. https://app.asana.com/0/329800276300868/413878480039713 (see also /r/asana-links)'),null;const{left:o,top:a}=n.getBoundingClientRect();return Mr({left:r.left,top:r.top,width:r.width,height:r.height},{left:o,top:a})}render(){const e=this._getFocusRect();if(!e)return null;const t=d("div",{className:S.css(xp.tooltipLabel),onClick:this.props.onClick,children:this.props.label}),n={position:"absolute",left:e.left,top:`calc(${Math.round(e.top)}px + 0.95em)`,height:0};return d("div",{style:n,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,children:d(Gi,{content:t,opened:!0,children:d("div",{})})})}}const xp=S.StyleSheet.create({tooltipLabel:{userSelect:"none",fontFamily:'"Lato", sans-serif',padding:`10px ${$.medium_16}px`,cursor:"pointer"}});try{Vt.displayName="HighlightTooltip",Vt.__docgenInfo={description:"",displayName:"HighlightTooltip",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!0,type:{name:"() => unknown"}},onMouseEnter:{defaultValue:null,description:"",name:"onMouseEnter",required:!1,type:{name:"(() => unknown)"}},onMouseLeave:{defaultValue:null,description:"",name:"onMouseLeave",required:!1,type:{name:"(() => unknown)"}},focusNode:{defaultValue:null,description:"",name:"focusNode",required:!0,type:{name:"Node"}},focusOffset:{defaultValue:null,description:"",name:"focusOffset",required:!0,type:{name:"number"}},offsetParent:{defaultValue:null,description:"",name:"offsetParent",required:!0,type:{name:"Element"}}}}}catch{}class as extends b.PureComponent{constructor(){super(...arguments),this.state={hoveredHighlightKey:null,hoveringTooltipFor:null},this._highlightRenderers={},this._handleMouseMove=e=>{const t={left:e.clientX,top:e.clientY},n=this._getHoveredHighlightKey(t);this.setState({hoveredHighlightKey:n})}}componentDidMount(){this._updateEditListeners(!1,this.props.editable)}UNSAFE_componentWillReceiveProps(e){this._updateEditListeners(this.props.editable,e.editable),this.state.hoveredHighlightKey!=null&&!(this.state.hoveredHighlightKey in e.highlights)&&this.setState({hoveredHighlightKey:null}),this.state.hoveringTooltipFor!=null&&!(this.state.hoveringTooltipFor in e.highlights)&&this.setState({hoveringTooltipFor:null})}componentWillUnmount(){this._updateEditListeners(this.props.editable,!1)}_updateEditListeners(e,t){!e&&t?window.addEventListener("mousemove",this._handleMouseMove):e&&!t&&(window.removeEventListener("mousemove",this._handleMouseMove),this.setState({hoveredHighlightKey:null,hoveringTooltipFor:null}))}_getHoveredHighlightKey(e){const{hoveringTooltipFor:t}=this.state;return typeof t=="string"?t:Object.keys(this.props.highlights).find(s=>{const r=this._highlightRenderers[s];return r&&r.isHovered(e)})}_renderTooltip(){const{hoveredHighlightKey:e}=this.state;if(e==null)return null;const t=this.props.highlights[e];return d(Vt,{label:v("Remove highlight"),focusNode:t.domRange.endContainer,focusOffset:t.domRange.endOffset,offsetParent:this.props.offsetParent,onClick:()=>this.props.onRemoveHighlight(e),onMouseEnter:()=>this.setState({hoveringTooltipFor:e}),onMouseLeave:()=>this.setState({hoveringTooltipFor:null})})}render(){return w("div",{children:[Object.keys(this.props.highlights).map(e=>d(os,{ref:t=>{t?this._highlightRenderers[e]=t:delete this._highlightRenderers[e]},highlight:this.props.highlights[e],highlightKey:e,offsetParent:this.props.offsetParent,zIndexes:this.props.zIndexes},e)),this.props.editable&&this._renderTooltip()]})}}try{as.displayName="HighlightSetRenderer",as.__docgenInfo={description:"",displayName:"HighlightSetRenderer",props:{editable:{defaultValue:null,description:"",name:"editable",required:!0,type:{name:"boolean"}},highlights:{defaultValue:null,description:"",name:"highlights",required:!0,type:{name:"DOMHighlightSet"}},offsetParent:{defaultValue:null,description:"",name:"offsetParent",required:!0,type:{name:"Element"}},onRemoveHighlight:{defaultValue:null,description:"",name:"onRemoveHighlight",required:!0,type:{name:"(highlightKey: string) => unknown"}},zIndexes:{defaultValue:null,description:"",name:"zIndexes",required:!0,type:{name:"ZIndexes"}}}}}catch{}class ls extends b.PureComponent{constructor(){super(...arguments),this.state={mouseState:"up",trackedSelection:null},this._handleSelectionChange=()=>{this._updateTrackedSelection(),this.state.mouseState==="down"&&this.setState({mouseState:"down-and-selecting"})},this._handleMouseDown=()=>{this.setState({mouseState:"down"})},this._handleMouseUp=()=>{this.setState({mouseState:"up"})}}componentDidMount(){this._updateListeners(!1,this.props.enabled)}componentDidUpdate(e){this.props.buildHighlight!==e.buildHighlight&&this._updateTrackedSelection(),this._updateListeners(e.enabled,this.props.enabled)}componentWillUnmount(){this._updateListeners(this.props.enabled,!1)}_updateListeners(e,t){!e&&t?(window.addEventListener("mousedown",this._handleMouseDown),window.addEventListener("mouseup",this._handleMouseUp),document.addEventListener("selectionchange",this._handleSelectionChange)):e&&!t&&(window.removeEventListener("mousedown",this._handleMouseDown),window.removeEventListener("mouseup",this._handleMouseUp),document.removeEventListener("selectionchange",this._handleSelectionChange),this.setState({mouseState:"up",trackedSelection:null}))}_computeFocusAndRange(){const e=document.getSelection();if(!e||e.rangeCount===0)return null;const t=e.getRangeAt(0);if(t.collapsed)return null;const n=e.focusNode,s=e.focusOffset;return{focusNode:n,focusOffset:s,range:t}}_updateTrackedSelection(){const e=this._computeFocusAndRange();if(!e){this.setState({trackedSelection:null});return}const{focusNode:t,focusOffset:n,range:s}=e,r=this.props.buildHighlight(s);if(!r){this.setState({trackedSelection:null});return}const o={focusNode:t,focusOffset:n,proposedHighlight:r};this.setState({trackedSelection:o})}render(){const{mouseState:e,trackedSelection:t}=this.state,n=e==="down-and-selecting";return this.props.children?d("div",{children:this.props.children(t,n)}):null}}try{ls.displayName="SelectionTracker",ls.__docgenInfo={description:"",displayName:"SelectionTracker",props:{buildHighlight:{defaultValue:null,description:"",name:"buildHighlight",required:!0,type:{name:"(domRange: Range) => DOMHighlight | null | undefined"}},enabled:{defaultValue:null,description:"",name:"enabled",required:!0,type:{name:"boolean"}}}}}catch{}class cs extends b.PureComponent{_handleAddHighlight(e){this.props.onAddHighlight(e);const t=document.getSelection();t&&t.collapseToEnd()}_selectionIsValid(e){if(!e)return!1;const{contentNode:t}=this.props,n=new Range;n.selectNodeContents(t);const s=new Range;return s.setStart(e.focusNode,e.focusOffset),s.collapse(!0),mn(n,s)}render(){return d(ls,{buildHighlight:this.props.buildHighlight,enabled:this.props.editable,children:(e,t)=>w("div",{children:[d(as,{editable:this.props.editable&&!this._selectionIsValid(e),highlights:this.props.highlights,offsetParent:this.props.offsetParent,onRemoveHighlight:this.props.onRemoveHighlight,zIndexes:this.props.zIndexes}),this._selectionIsValid(e)&&!t&&d(Vt,{label:v("Add highlight"),onClick:()=>this._handleAddHighlight(e.proposedHighlight),focusNode:e.focusNode,focusOffset:e.focusOffset,offsetParent:this.props.offsetParent})]})})}}try{cs.displayName="HighlightingUI",cs.__docgenInfo={description:"",displayName:"HighlightingUI",props:{buildHighlight:{defaultValue:null,description:"",name:"buildHighlight",required:!0,type:{name:"(range: Range) => DOMHighlight | null | undefined"}},contentNode:{defaultValue:null,description:"",name:"contentNode",required:!0,type:{name:"Node"}},editable:{defaultValue:null,description:"",name:"editable",required:!0,type:{name:"boolean"}},highlights:{defaultValue:null,description:"",name:"highlights",required:!0,type:{name:"DOMHighlightSet"}},offsetParent:{defaultValue:null,description:"",name:"offsetParent",required:!0,type:{name:"Element"}},onAddHighlight:{defaultValue:null,description:"",name:"onAddHighlight",required:!0,type:{name:"(range: DOMHighlight) => unknown"}},onRemoveHighlight:{defaultValue:null,description:"",name:"onRemoveHighlight",required:!0,type:{name:"(highlightKey: string) => unknown"}},zIndexes:{defaultValue:null,description:"",name:"zIndexes",required:!0,type:{name:"ZIndexes"}}}}}catch{}class ps extends b.PureComponent{componentDidMount(){this._sendWordsUpdate()}componentDidUpdate(){this._sendWordsUpdate()}_sendWordsUpdate(){this.props.onWordsUpdate(this._getWordRanges())}_getWordRanges(){const e=this._container;if(!e)throw new it("invariant violation: `this._container` is not defined, but this method is only called after mount/update",ke.NotAllowed);const t=e.ownerDocument.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,()=>NodeFilter.FILTER_ACCEPT,!1),n=[];let s=null;for(;t.nextNode();){const r=t.currentNode;if(r.nodeType===Node.ELEMENT_NODE)getComputedStyle(r).display!=="inline"&&(s=null);else if(r.nodeType===Node.TEXT_NODE){const o=r.nodeValue,a=/\S+/g;let u,l=null;for(;(u=a.exec(o))!==null;){const p=u.index,h=u.index+u[0].length;let g;p===0&&s?(g=s,g.setEnd(r,h)):(g=r.ownerDocument.createRange(),g.setStart(r,p),g.setEnd(r,h),n.push(g)),h===o.length&&(l=g)}s=l}}return n}render(){return d("div",{ref:e=>this._container=e,children:this.props.children})}}try{ps.displayName="WordIndexer",ps.__docgenInfo={description:"",displayName:"WordIndexer",props:{onWordsUpdate:{defaultValue:null,description:"",name:"onWordsUpdate",required:!0,type:{name:"(wordRanges: readonly Range[]) => unknown"}}}}}catch{}class us extends b.PureComponent{constructor(){super(...arguments),this.state={wordRanges:[]},this._handleAddHighlight=e=>{const t=dp(this._getDOMHighlights(),e),n={};for(const s of Object.keys(t))n[s]=mp(t[s]);this.props.onSerializedHighlightsUpdate(n)},this._handleRemoveHighlight=e=>{const{serializedHighlights:t}=this.props,n={...t};delete n[e],this.props.onSerializedHighlightsUpdate(n)},this._handleWordsUpdate=e=>{this.setState({wordRanges:e})}}_buildHighlight(e){return hp(this._getDOMHighlights(),this.state.wordRanges,e)}_getDOMHighlights(){const{serializedHighlights:e}=this.props,{wordRanges:t}=this.state,n={};for(const s of Object.keys(e))n[s]=fp(e[s],t);return n}render(){const e=this._getDOMHighlights(),t=n=>this._buildHighlight(n);return w("div",{className:S.css(Oi.container),ref:n=>this._container=n,children:[d("div",{children:this.props.enabled&&this._container&&this._content&&d(cs,{buildHighlight:t,contentNode:this._content,editable:this.props.editable,highlights:e,offsetParent:this._container,zIndexes:{belowContent:0},onAddHighlight:this._handleAddHighlight,onRemoveHighlight:this._handleRemoveHighlight})}),d("div",{className:S.css(Oi.content),ref:n=>this._content=n,children:d(ps,{onWordsUpdate:this._handleWordsUpdate,children:this.props.children})})]})}}const Oi=S.StyleSheet.create({container:{position:"relative",zIndex:0},content:{position:"relative",zIndex:1}});try{us.displayName="HighlightableContent",us.__docgenInfo={description:"",displayName:"HighlightableContent",props:{editable:{defaultValue:null,description:"",name:"editable",required:!0,type:{name:"boolean"}},enabled:{defaultValue:null,description:"",name:"enabled",required:!0,type:{name:"boolean"}},onSerializedHighlightsUpdate:{defaultValue:null,description:"",name:"onSerializedHighlightsUpdate",required:!0,type:{name:"(serializedHighlights: SerializedHighlightSet) => unknown"}},serializedHighlights:{defaultValue:null,description:"",name:"serializedHighlights",required:!0,type:{name:"SerializedHighlightSet"}}}}}catch{}function _s(){return{currentRef:[],useRefs:!0,lastRef:0,firstSentenceRef:null,firstQuestionRef:null,lastFootnote:{id:0,text:""}}}class Cp extends b.Component{constructor(){super(...arguments),this.getRefContent=()=>this.props.refContent}render(){return d("span",{style:Er,children:rn("_")})}}class wp extends b.Component{render(){return d("span",{style:Er,children:rn("_")})}}const _r={newline:F.defaultRules.newline,paragraph:F.defaultRules.paragraph,escape:F.defaultRules.escape,passageFootnote:{order:F.defaultRules.escape.order+.1,match:F.inlineRegex(/^\^/),parse:(i,e,t)=>{const n=t.lastFootnote.id+1,s={id:n,text:n===1?"*":""+n};return t.lastFootnote.text==="*"&&(t.lastFootnote.text=""+t.lastFootnote.id),t.lastFootnote=s,s},react:(i,e,t)=>d("sup",{children:i.text},t.key)},refStart:{order:F.defaultRules.escape.order+.2,match:function(i){const e=/^\{\{/.exec(i);if(e){let t=2,n=0;for(;t<i.length;){const s=i.slice(t,t+2);if(s==="{{")n++,t++;else if(s==="}}")if(n>0)n--,t++;else break;t++}return e[1]=i.slice(2,t),e}return null},parse:(i,e,t)=>{if(!t.useRefs)return{ref:null,refContent:null};const n=t.lastRef+1;t.lastRef=n,t.currentRef.push(n);const s=e("(“"+i[1]+`”)

`,c.defaults({useRefs:!1},_s()));return{ref:n,refContent:s}},react:(i,e,t)=>{const n=i.ref;if(n==null)return null;const s=e(i.refContent,{});return d(Cp,{ref:ds+n,refContent:s},ds+n)}},refEnd:{order:F.defaultRules.escape.order+.3,match:F.inlineRegex(/^\}\}/),parse:(i,e,t)=>t.useRefs?{ref:t.currentRef.pop()||null}:{ref:null},react:(i,e,t)=>i.ref!=null?d(wp,{ref:hs+i.ref},hs+i.ref):null},squareLabel:{order:F.defaultRules.escape.order+.4,match:F.inlineRegex(/^\[\[(\w+)\]\]( *)/),parse:(i,e,t)=>(t.firstQuestionRef||(t.firstQuestionRef=i[1]),{content:i[1],space:i[2].length>0}),react:(i,e,t)=>[d("span",{className:"perseus-passage-square-label",style:Li,"aria-hidden":"true",children:d("span",{style:Sp,children:i.content})},"visual-square"),d("span",{className:"perseus-sr-only",children:he("[Marker for question %(number)s]",{number:i.content})},"alt-text"),i.space?" ":null]},circleLabel:{order:F.defaultRules.escape.order+.5,match:F.inlineRegex(/^\(\((\w+)\)\)( *)/),parse:(i,e,t)=>({content:i[1],space:i[2].length>0}),react:(i,e,t)=>[d("span",{className:"perseus-passage-circle-label",style:Li,"aria-hidden":!0,children:d("span",{style:Ip,children:i.content})},"visual-circle"),d("span",{className:"perseus-sr-only",children:he("[Circle marker %(number)s]",{number:i.content})},"alt-text"),i.space?" ":null]},squareBracketRef:{order:F.defaultRules.escape.order+.6,match:F.inlineRegex(/^\[(\d+)\]( *)/),parse:(i,e,t)=>(t.firstSentenceRef||(t.firstSentenceRef=i[1]),{content:i[1],space:i[2].length>0}),react:(i,e,t)=>[w("span",{className:"perseus-passage-bracket-label","aria-hidden":"true",children:["[",i.content,"]"]},"visual-brackets"),d("span",{className:"perseus-sr-only",children:he("[Sentence %(number)s]",{number:i.content})},"alt-text"),i.space?" ":null]},highlight:{order:F.defaultRules.escape.order+.7,match:F.inlineRegex(/^{highlighting.start}(.+?){highlighting.end}/),parse:(i,e,t)=>({content:i[1]}),react:(i,e,t)=>[d("span",{className:"perseus-highlight",children:i.content},0)]},reviewHighlight:{order:F.defaultRules.escape.order+.7,match:F.inlineRegex(/^{review-highlighting.start}(.+?){review-highlighting.end}/),parse:(i,e,t)=>({content:i[1]}),react:(i,e,t)=>[d("span",{className:"perseus-review-highlight",children:i.content},0)]},strong:F.defaultRules.strong,u:F.defaultRules.u,em:F.defaultRules.em,del:F.defaultRules.del,text:{...F.defaultRules.text,react(i,e,t){return d("span",{children:i.content},t.key)}}},ds="start-ref-",hs="end-ref-",Er={display:"inline-block",width:0,visibility:"hidden"},Li={display:"inline",whiteSpace:"nowrap"},Sp={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",paddingLeft:10,paddingRight:10,userSelect:"none",WebkitUserSelect:"none"},Ip={display:"inline-block",color:"rgb(255, 255, 255)",backgroundColor:"rgb(90, 90, 90)",userSelect:"none",WebkitUserSelect:"none",width:22,height:22,borderRadius:"50%",textAlign:"center"},kp=F.parserFor(_r),Pp=(i,e)=>{e=e||{};const t=i+`

`;return kp(t,c.extend(e,_s()))},Mp=F.reactFor(F.ruleOutput(_r,"react")),ne={parse:Pp,output:Mp,START_REF_PREFIX:ds,END_REF_PREFIX:hs,getInitialParseState:_s};class gs extends b.Component{measureLineHeight(){return this._line?this._line.clientHeight:0}render(){return d("div",{className:S.css(Tp.measurer),"aria-hidden":"true",children:d("div",{ref:e=>this._line=e,className:"paragraph",children:"Line Height Measurement"})})}}const Tp=S.StyleSheet.create({measurer:{position:"absolute",top:0,left:0,visibility:"hidden",zIndex:-1}}),en=class en extends b.Component{constructor(){super(...arguments),this.state={nLines:null,startLineNumbersAfter:0,stylesAreApplied:!1},this._handleSerializedHighlightsUpdate=e=>{this.props.onChange({highlights:e})}}componentDidMount(){this._updateState(),this._onResize=c.throttle(()=>{var e;this.shouldRenderJipt()||((e=this._lineHeightMeasurerRef)==null||e.measureLineHeight(),this._updateState())},500),window.addEventListener("resize",this._onResize),this._stylesAppiedTimer=window.setTimeout(()=>{this.setState({stylesAreApplied:!0})},0)}shouldComponentUpdate(e,t){return!c.isEqual(this.props,e)||!c.isEqual(this.state,t)}componentDidUpdate(){this._updateState()}componentWillUnmount(){window.removeEventListener("resize",this._onResize),clearTimeout(this._stylesAppiedTimer)}_updateState(){this.shouldRenderJipt()||this.setState({nLines:this._measureLines(),startLineNumbersAfter:this._getInitialLineNumber()})}_measureLines(){const e=We.findDOMNode(this._contentRef),t=R(e).height(),n=this._getLineHeight();return Math.round(t/n)}_getInitialLineNumber(){let e=!0;return this.props.findWidgets((n,s)=>s.type!=="passage"?!1:(n===this.props.widgetId&&(e=!1),e)).map(n=>n.getLineCount()).reduce((n,s)=>n+s,0)}_getLineHeight(){var e;return((e=this._lineHeightMeasurerRef)==null?void 0:e.measureLineHeight())||0}getLineCount(){return this.state.nLines!=null?this.state.nLines:this._measureLines()}_getStartRefLineNumber(e){const t=ne.START_REF_PREFIX+e,n=this.refs[t];if(!n)return null;const s=R(We.findDOMNode(n));let r=s.next();r.length===0&&(r=s);const o=r.offset().top;return this.state.startLineNumbersAfter+1+this._convertPosToLineNumber(o)}_getEndRefLineNumber(e){const t=ne.END_REF_PREFIX+e,n=this.refs[t];if(!n)return null;const s=R(We.findDOMNode(n));let r=s.prev();r.length===0&&(r=s);const o=r.height(),a=r.offset().top;let u=this._convertPosToLineNumber(a+o);return o===0&&(u+=1),this.state.startLineNumbersAfter+u}_convertPosToLineNumber(e){const t=We.findDOMNode(this._contentRef),n=e-R(t).offset().top,s=this._getLineHeight();return Math.round(n/s)}_getRefContent(e){const t=ne.START_REF_PREFIX+e,n=this.refs[t];return n?n.getRefContent():null}getReference(e){const t=this._getStartRefLineNumber(e),n=this._getEndRefLineNumber(e);if(t==null||n==null)return null;const s=this._getRefContent(e);return{startLine:t,endLine:n,content:s}}getUserInput(){return null}simpleValidate(e){return en.validate(this.getUserInput(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}_renderInstructions(e){const t=e.firstQuestionRef,n=e.firstSentenceRef;let s="";t&&(s+=v("The symbol %(questionSymbol)s indicates that question %(questionNumber)s references this portion of the passage.",{questionSymbol:"[["+t+"]]",questionNumber:t})),n&&(s+=v(" The symbol %(sentenceSymbol)s indicates that the following sentence is referenced in a question.",{sentenceSymbol:"["+n+"]"}));const r=ne.parse(s);return d("div",{className:"perseus-widget-passage-instructions",children:ne.output(r)})}shouldRenderJipt(){const{JIPT:e}=be();return e.useJIPT&&this.props.passageText.indexOf("crwdns")!==-1}_renderContent(e){const t=this.state.stylesAreApplied,n=!this.props.reviewModeRubric;return d(us,{editable:n,enabled:t,onSerializedHighlightsUpdate:this._handleSerializedHighlightsUpdate,serializedHighlights:this.props.highlights,children:w("div",{ref:s=>this._contentRef=s,children:[d(gs,{ref:s=>this._lineHeightMeasurerRef=s}),ne.output(e)]})})}_hasFootnotes(){const e=this.props.footnotes;return!/^\s*$/.test(e)}_renderFootnotes(){const e=this.props.footnotes,t=ne.parse(e);return ne.output(t)}render(){let e;const t=this.state.nLines;this.props.showLineNumbers&&t&&(e=c.range(1,t+1).map(u=>{const l=u+this.state.startLineNumbersAfter;if(l===4){const p=v("Line ");return d("span",{className:"line-marker",children:p},"line-marker")}return d("span",{children:l},u)}));const n=ne.getInitialParseState(),s=/("{1})([^"]*)("{1})/g,r=this.props.passageText.replace(s,"“$2”"),o=ne.parse(r,n),a=/\S/.test(this.props.passageTitle);return d("div",{children:w("div",{className:"perseus-widget-passage-container",children:[this._renderInstructions(n),w("div",{className:"perseus-widget-passage",children:[a&&d("h3",{className:"passage-title",children:d(O,{content:this.props.passageTitle,linterContext:this.props.linterContext})}),e&&d("div",{className:"line-numbers","aria-hidden":!0,children:e}),!a&&d("h3",{className:"perseus-sr-only",children:v("Beginning of reading passage.")}),d("div",{className:"passage-text",children:this.shouldRenderJipt()?d(O,{content:this.props.passageText}):this._renderContent(o)}),this._hasFootnotes()&&[d("h4",{className:"perseus-sr-only",children:v("Beginning of reading passage footnotes.")},"footnote-start"),d("div",{className:"footnotes",children:this._renderFootnotes()},"footnotes")],d("div",{className:"perseus-sr-only",children:v("End of reading passage.")})]})]})})}};en.defaultProps={passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0,highlights:{},linterContext:q};let pt=en;const _p={name:"passage",displayName:"Passage (SAT only)",widget:pt,transform:i=>c.pick(i,"passageTitle","passageText","footnotes","showLineNumbers"),isLintable:!0};try{gs.displayName="LineHeightMeasurer",gs.__docgenInfo={description:"",displayName:"LineHeightMeasurer",props:{}}}catch{}try{pt.displayName="Passage",pt.__docgenInfo={description:"",displayName:"Passage",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"((values: { [key: string]: any; }, callback?: (() => unknown) | null | undefined, silent?: boolean | undefined) => unknown) & ChangeHandler"}},passageTitle:{defaultValue:{value:""},description:"",name:"passageTitle",required:!1,type:{name:"string"}},passageText:{defaultValue:{value:""},description:"",name:"passageText",required:!1,type:{name:"string"}},footnotes:{defaultValue:{value:""},description:"",name:"footnotes",required:!1,type:{name:"string"}},showLineNumbers:{defaultValue:{value:"true"},description:"",name:"showLineNumbers",required:!1,type:{name:"boolean"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},alignment:{defaultValue:null,description:"",name:"alignment",required:!0,type:{name:"string | null | undefined"}},static:{defaultValue:null,description:"",name:"static",required:!0,type:{name:"boolean | null | undefined"}},problemNum:{defaultValue:null,description:"",name:"problemNum",required:!0,type:{name:"number | null | undefined"}},apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!0,type:{name:"Readonly<Readonly<{ isArticle?: boolean | undefined; onInputError?: ((widgetId: any, value: string, message?: string | null | undefined) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown..."}},keypadElement:{defaultValue:null,description:"",name:"keypadElement",required:!1,type:{name:"any"}},questionCompleted:{defaultValue:null,description:"",name:"questionCompleted",required:!1,type:{name:"boolean"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!0,type:{name:"(blurPath: FocusPath) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!0,type:{name:"(blurPath: FocusPath) => void"}},findWidgets:{defaultValue:null,description:"",name:"findWidgets",required:!0,type:{name:"((arg1: FilterCriterion) => readonly any[]) & ((arg1: FindWidgetsCallback) => readonly Passage[])"}},reviewModeRubric:{defaultValue:null,description:"",name:"reviewModeRubric",required:!0,type:{name:"PerseusPassageWidgetOptions"}},trackInteraction:{defaultValue:null,description:"",name:"trackInteraction",required:!0,type:{name:"(extraData?: Empty | undefined) => void"}},isLastUsedWidget:{defaultValue:null,description:"",name:"isLastUsedWidget",required:!0,type:{name:"boolean"}},linterContext:{defaultValue:{value:`{
    contentType: "",
    highlightLint: false,
    paths: [] as ReadonlyArray<any>,
    stack: [] as ReadonlyArray<any>,
}`},description:"",name:"linterContext",required:!1,type:{name:"LinterContextProps"}},containerSizeClass:{defaultValue:null,description:"",name:"containerSizeClass",required:!0,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'},{value:'"large"'},{value:'"xlarge"'}]}},highlights:{defaultValue:{value:"{}"},description:"",name:"highlights",required:!1,type:{name:"SerializedHighlightSet"}}}}}catch{}const Je=class Je extends b.Component{constructor(){super(...arguments),this.getUserInput=()=>un.getUserInput.call(this),this.change=(...e)=>W.apply(this,e),this.simpleValidate=e=>Je.validate(this.getUserInput(),e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){return d(O,{content:this.props.content,apiOptions:this.props.apiOptions,linterContext:this.props.linterContext})}};Je.propTypes={...dt,content:m.string,linterContext:ut},Je.defaultProps={content:"",linterContext:q};let fs=Je;const Ep={name:"passage-ref-target",displayName:"PassageRefTarget",defaultAlignment:"inline",widget:fs,hidden:!0,transform:i=>c.pick(i,"content"),version:{major:0,minor:0},isLintable:!0},{deepEq:Vi}=E,tn=class tn extends b.Component{constructor(){super(...arguments),this._isMounted=!1,this.state={values:this.props.starting||[1],categoryHeights:{}},this.DOT_PLOT_POINT_SIZE=()=>this.props.apiOptions.isMobile?6:4,this.DOT_PLOT_POINT_PADDING=()=>8,this.DOT_TICK_POINT_SIZE=()=>2,this.setupGraphie=e=>{const t=this;t.shouldSetupGraphie=!1;const n=L.findDOMNode(t.refs.graphieDiv);R(n).empty();const s=we.createGraphie(n);t.graphie=s,t.graphie.pics=[],t.graphie.dotTicks=[];const r=t.props.type==="bar",o=t.props.type==="line",a=t.props.type==="pic",u=t.props.type==="histogram",l=t.props.type==="dotplot",p=a||l,h={},g=h,f=this.props.apiOptions.isMobile;g.graph={lines:[],bars:[],points:[],dividers:[]},g.scaleY=t.props.scaleY,g.dimX=t.props.categories.length;const y=f?[288,336]:t.props.plotDimensions;if(o)g.dimX+=f?-.2:1;else if(u)g.barPad=0,g.barWidth=1;else if(r)g.barPad=f?.08:.15,g.barWidth=1-2*g.barPad,g.dimX+=(f?-2:2)*g.barPad;else if(p){g.picBoxHeight=t.props.picBoxHeight,g.picBoxWidthPx=y[0]/t.props.categories.length;const M=y[0]-g.dimX*g.picBoxWidthPx;g.picPad=M/(2*g.dimX+2);const I=g.picBoxWidthPx+2*g.picPad;g.picPad=g.picPad/I,g.picBoxWidth=g.picBoxWidthPx/I,g.dimX+=2*g.picPad}l&&(g.picBoxHeight=this.DOT_PLOT_POINT_SIZE()*2+this.DOT_PLOT_POINT_PADDING()),g.dimY=Math.ceil(t.props.maxY/g.scaleY)*g.scaleY;let x=25;(r||o)&&f&&(x=t.props.labels[1].length!==0?17:11),l&&(x/=2),f&&p&&t.props.labels[1].length===0&&(x=0);let T=25,k=25*3;if(f&&(r||p)){const M=Math.max(0,...Object.values(t.state.categoryHeights));if(M){let I=25;p&&(I+=10),k=I+M}}if(f?g.scale=[(y[0]-x*4)/g.dimX,(y[1]-(T+k))/g.dimY]:g.scale=c.map([g.dimX,g.dimY],function(M,I){return y[I]/M}),p&&(g.scale[1]=g.picBoxHeight/g.scaleY),x/=g.scale[0],T/=g.scale[1],k/=g.scale[1],s.init({range:[[-3*x,g.dimX+x],[-k,g.dimY+T]],scale:g.scale,isMobile:this.props.apiOptions.isMobile}),s.addMouseLayer({allowScratchpad:!0,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),!p){const M=f?g.scaleY:0;for(let I=M;I<=g.dimY;I+=g.scaleY)s.label([0,I],ge.roundToApprox(I,2),"left",!0),s.style({stroke:f?"#e9ebec":"#000",strokeWidth:1,opacity:f?1:.3},function(){s.line([0,I],[g.dimX,I])})}(r||o)&&f&&!this.props.static&&(t.graphie.dragPrompt=s.label([g.dimX/2,g.dimY/2],v("Drag handles to make graph"),"center",!1).css("font-weight","bold").css("color",C.KA_GREEN).css("display","none")),t.setupCategories(h),p&&f&&(t.graphie.dotPrompt=s.label([g.dimX/2,g.dimY/2],v("Tap to add points"),"center",!1).css("font-weight","bold").css("color",C.KA_GREEN).css("display","none")),p&&t.drawPicHeights(t.state.values,e.values),s.style({stroke:"#000",strokeWidth:2,opacity:1},function(){p?l?s.style({stroke:f?C.GRAY_G:"#000",strokeWidth:f?1:2},()=>s.line([f?0:.5,0],[g.dimX-(f?0:.5),0])):(s.line([0,0],[g.dimX,0]),(t.props.labels[1].length!==0||!f)&&s.style({stroke:f?C.GRAY_G:"#000",strokeWidth:f?1:2},()=>s.line([0,0],[0,g.dimY]))):(s.style({stroke:f?C.GRAY_G:"#000",strokeWidth:f?1:2},()=>s.line([f?-x*3:0,0],[g.dimX+(f?x:0),0])),(r||o)&&f||s.style({stroke:f?C.GRAY_G:"#000",strokeWidth:f?1:2},()=>s.line([0,0],[0,g.dimY])))}),s.label([g.dimX/2,f?-k:-35/g.scale[1]],t.props.labels[0],f?"above":"below",!1).css("font-weight","bold").css("color",f&&C.GRAY_F),s.label([(f?-35:-60)/g.scale[0],g.dimY/2],t.props.labels[1],"center",!1).css("font-weight","bold").css("color",f&&C.GRAY_F).addClass("rotate"),this.props.apiOptions.isMobile&&(this.horizHairline=new ot(this.graphie,[0,0],[0,0],{normalStyle:{strokeWidth:1}}),this.horizHairline.attr({stroke:C.INTERACTIVE}),this.horizHairline.hide(),this.hairlineRange=[[0,g.dimX],[0,g.dimY]])},this.showHairlines=e=>{this.props.apiOptions.isMobile&&(this.horizHairline.moveTo([this.hairlineRange[0][0],e[1]],[this.hairlineRange[0][1],e[1]]),this.horizHairline.show())},this.hideHairlines=()=>{this.props.apiOptions.isMobile&&this.horizHairline.hide()},this.labelCategory=(e,t)=>{const n=this.props.apiOptions.isMobile,s=this.graphie;t=t+"";let r=!1;const o=t.match(/^\$(.*)\$$/);o&&(t=o[1],r=!0);const a=5,u=45,l=u*(Math.PI/180),p=`translateX(-50%) translateX(${a}px) translateY(-50%) rotate(-${u}deg)`,h=n&&!o;return new Promise(g=>{s.style({color:n?C.GRAY_G:"inherit",transform:h?p:"none",transformOrigin:"100%"},()=>{const f=s.label([e,n?-.5:0],t,"below",r),y=14+(h?Math.round(f.height()*Math.cos(l)+(f.width()+a)*Math.sin(l)):f.height());g({category:t,height:y})})})},this.setupCategories=e=>{const t=this,n=e,s=t.graphie,r=this.props.apiOptions.isMobile,o=[];t.props.type==="histogram"?(c.times(t.props.categories.length-1,function(a){t.setupBar({index:a,startHeight:t.state.values[a],config:e,isHistogram:!0})}),c.each(t.props.categories,function(a,u){const l=.5+u*n.barWidth;o.push(t.labelCategory(l,a));const p=6/n.scale[1];s.style({stroke:"#000",strokeWidth:r?1:2,opacity:1},function(){s.line([l,-p],[l,0])})})):c.each(t.props.categories,function(a,u){const l=t.state.values[u];let p;t.props.type==="bar"?p=t.setupBar({index:u,startHeight:l,config:e,isHistogram:!1}):t.props.type==="line"?p=t.setupLine(u,l,e):t.props.type==="pic"?p=t.setupPic(u,e):t.props.type==="dotplot"&&(p=t.setupDotplot(u,e));let h=0,g=-6/n.scale[1];t.props.type==="dotplot"&&!r&&(h=-g),t.props.type==="dotplot"?(u%t.props.labelInterval===0||u===t.props.categories.length-1)&&(o.push(t.labelCategory(p,a)),h*=1.5,g*=1.5):o.push(t.labelCategory(p,a)),s.style({stroke:r?C.GRAY_G:"#000",strokeWidth:r?1:2,opacity:1},function(){s.line([p,h],[p,g])})}),Promise.all(o).then(a=>{if(t._isMounted){const u={};a.forEach(({category:l,height:p})=>u[l]=p),t.setState({categoryHeights:u})}})},this._clampValue=(e,t,n)=>Math.max(Math.min(e,n),t),this._maybeShowDragPrompt=()=>{this.graphie.dragPrompt!=null&&(this.graphie.dragPrompt[0].style.display="inline")},this._maybeHideDragPrompt=()=>{this.graphie.dragPrompt!=null&&(this.graphie.dragPrompt[0].style.display="none")},this.setupBar=e=>{const t=this.props.apiOptions.isMobile,n=e.index,s=e.startHeight,r=e.config,o=e.isHistogram,a=this,u=a.graphie,l=r.barWidth/2;let p;o?p=.5+n*r.barWidth+l:p=(t?l:.5+r.barPad)+n;const h=function(g,f){const y=u.scalePoint(0);if(r.graph.bars[g].scale(1,Math.max(t?.2:.01,f/r.scaleY),y[0],y[1]),o){const x=r.graph.dividers[g-1],T=r.graph.dividers[g];if(x){const k=Math.min(a.state.values[g-1],f);x.scale(1,Math.max(.01,k/r.scaleY),y[0],y[1])}if(T){const k=Math.min(a.state.values[g+1],f);T.scale(1,Math.max(.01,k/r.scaleY),y[0],y[1])}}};if(u.style({stroke:"none",fill:t?C.BLUE_C:C.LIGHT_BLUE,opacity:1},function(){r.graph.bars[n]=u.path([[p-l,0],[p-l,r.scaleY],[p+l,r.scaleY],[p+l,0],[p-l,0]])}),o&&n>0&&u.style({stroke:"#000",strokeWidth:1,opacity:.3},function(){r.graph.dividers.push(u.path([[p-l,0],[p-l,r.scaleY]]))}),t){const g=r.scaleY/a.props.snapsPerLine;r.graph.lines[n]=P.addMaybeMobileMovablePoint(this,{coord:[p,s],constraints:[(f,y,x)=>[p,this._clampValue(Math.round(f[1]/g)*g,0,r.dimY)]],onMoveStart:function(){r.graph.bars[n].attr({fill:C.INTERACTIVE})},onMove:function(){const f=r.graph.lines[n].coord()[1],y=[...a.state.values];y[n]=f,a.setState({values:y}),a.changeAndTrack({values:y}),a._maybeHideDragPrompt(),h(n,f)},onMoveEnd:function(){r.graph.bars[n].attr({fill:C.BLUE_C})}}),r.graph.lines[n].state.visibleShape.wrapper.style.zIndex="1",a._maybeShowDragPrompt()}else r.graph.lines[n]=u.addMovableLineSegment({coordA:[p-l,s],coordZ:[p+l,s],snapY:r.scaleY/a.props.snapsPerLine,constraints:{constrainX:!0},normalStyle:{stroke:C.INTERACTIVE,"stroke-width":this.props.static?0:4}}),r.graph.lines[n].onMove=function(g,f){let y=this.coordA[1];(y<0||y>r.dimY)&&(y=Math.min(Math.max(y,0),r.dimY),this.coordA[1]=this.coordZ[1]=y,this.transform());const x=[...a.state.values];x[n]=y,a.setState({values:x}),a.changeAndTrack({values:x}),h(n,y)};return h(n,s),p},this.setupLine=(e,t,n)=>{const s=this.props.apiOptions.isMobile,r=this,o=n,a=r.graphie,u=e+(s?.4:1);if(s){const l=n.scaleY/r.props.snapsPerLine;o.graph.points[e]=P.addMaybeMobileMovablePoint(this,{coord:[u,t],constraints:[(p,h,g)=>[u,this._clampValue(Math.round(p[1]/l)*l,0,n.dimY)]],onMove:function(){const p=o.graph.points[e].coord()[1],h=[...r.state.values];h[e]=p,r.setState({values:h}),r.changeAndTrack({values:h}),r._maybeHideDragPrompt()}}),r._maybeShowDragPrompt(),e>0&&(o.graph.lines[e]=P.addMovableLine(a,{points:[o.graph.points[e-1],o.graph.points[e]],constraints:P.MovablePoint.constraints.fixed(),normalStyle:{stroke:C.BLUE_C,"stroke-width":2},highlightStyle:{stroke:C.BLUE_C,"stroke-width":2}}))}else o.graph.points[e]=a.addMovablePoint({coord:[u,t],constraints:{constrainX:!0},normalStyle:{fill:C.INTERACTIVE,stroke:C.INTERACTIVE},snapY:o.scaleY/r.props.snapsPerLine}),o.graph.points[e].onMove=function(l,p){p=Math.min(Math.max(p,0),o.dimY);const h=[...r.state.values];return h[e]=p,r.setState({values:h}),r.changeAndTrack({values:h}),[l,p]},e>0&&(o.graph.lines[e]=a.addMovableLineSegment({pointA:o.graph.points[e-1],pointZ:o.graph.points[e],constraints:{fixed:!0},normalStyle:{stroke:"#9ab8ed","stroke-width":2}}));return u},this.setupDotplot=(e,t)=>{const n=this.graphie,s=this.props.apiOptions.isMobile;return this.setupTiledPlot(e,s?.5:1,t,(r,o)=>n.ellipse([r,o],[this.DOT_PLOT_POINT_SIZE()/n.scale[0],this.DOT_PLOT_POINT_SIZE()/n.scale[1]],{fill:C.INTERACTIVE,stroke:C.INTERACTIVE}))},this.setupPic=(e,t)=>{const n=this.graphie;return this.setupTiledPlot(e,0,t,(s,r)=>{const o=n.scalePoint([s,r]),a=this.props.picSize;return n.raphael.image(this.props.picUrl,o[0]-a/2,o[1]-a/2,a,a)})},this.setupTiledPlot=(e,t,n,s)=>{const r=this,o=n,a=r.graphie,u=a.pics,l=a.dotTicks,p=e+.5+o.picPad;a.mouselayer.canvas.style.touchAction="none",u[e]=[],l[e]=[];const h=Math.round(o.dimY/o.scaleY)+1;return c(h).times(function(g){g-=1;const f=(g+.5)*o.scaleY,y=p-o.picBoxWidth/2,x=f+.5*o.scaleY,T=a.scalePoint([y,x+t]),k=a.mouselayer.rect(T[0],T[1],o.picBoxWidthPx,o.picBoxHeight);R(k[0]).css({fill:"#000",opacity:0,cursor:"pointer"}).on("vmousedown",function(M){M.preventDefault(),r.whichPicClicked=e,r.setPicHeight(e,x),R(document).on("vmouseup.plotTile",function(I){R(document).unbind(".plotTile")}),R(document).on("vmousemove.plotTile",function(I){I.preventDefault();const H=a.getMouseCoord(I)[1],U=Math.floor(H-t),Y=(Math.max(-1,Math.floor(U/o.scaleY))+.5)*o.scaleY,te=Math.min(Y+.5*o.scaleY,o.dimY);r.setPicHeight(r.whichPicClicked,te)})}),!(g<0)&&(u[e][g]=s(p,f+t),l[e][g]=a.ellipse([p,f+t],[r.DOT_TICK_POINT_SIZE()/a.scale[0],r.DOT_TICK_POINT_SIZE()/a.scale[1]],{fill:"#dee1e3",stroke:"#dee1e3"}))}),p},this.setPicHeight=(e,t)=>{const n=[...this.state.values];n[e]=t,this.drawPicHeights(n,this.state.values),this.setState({values:n}),this.changeAndTrack({values:n})},this.changeAndTrack=e=>{this.props.onChange(e),this.props.trackInteraction()},this.drawPicHeights=(e,t)=>{const n=this,s=n.graphie,r=s.pics,o=this.props.apiOptions.isMobile;if(o){const a=e.every(u=>u===0);s.dotPrompt[0].style.display=a?"inline":"none"}c.each(r,function(a,u){c.each(a,function(l,p){const h=(p+1)*n.props.scaleY,g=h<=e[u];if(n.props.type==="dotplot"){const f=h<=t[u];g&&!f&&l.animate({"stroke-width":8},75,()=>l.animate({"stroke-width":2},75))}R(l[0]).css({display:g?"inline":"none"}),s.dotTicks[u][p][0].style.display=g||!o?"none":"inline"})})},this.getUserInput=()=>this.state.values,this.simpleValidate=e=>tn.validate(this.getUserInput(),e)}componentDidMount(){this._isMounted=!0,this.setupGraphie(this.state)}UNSAFE_componentWillReceiveProps(e){const t=["type","labels","categories","scaleY","maxY","snapsPerLine","picUrl","labelInterval","static"];this.shouldSetupGraphie=c.any(t,n=>!c.isEqual(this.props[n],e[n]),this),!c.isEqual(this.props.starting,e.starting)&&!c.isEqual(this.state.values,e.starting)&&(this.shouldSetupGraphie=!0,this.setState({values:e.starting}))}componentDidUpdate(e,t){this.shouldSetupGraphie=this.shouldSetupGraphie||!c.isEqual(this.state.categoryHeights,t.categoryHeights),this.shouldSetupGraphie&&this.setupGraphie(t)}componentWillUnmount(){this._isMounted=!1}render(){const t={marginBottom:this.props.labels[0]?75:0};return d("div",{className:"perseus-widget-plotter graphie "+ve.INTERACTIVE,ref:"graphieDiv",style:t})}};tn.defaultProps={type:"bar",labels:["",""],categories:[""],scaleY:1,maxY:10,snapsPerLine:2,picSize:40,picBoxHeight:48,picUrl:"",plotDimensions:[380,300],labelInterval:1};let Ve=tn;c.extend(Ve,{validate:function(i,e){return Vi(i,e.starting)?{type:"invalid",message:null}:{type:"points",earned:Vi(i,e.correct)?1:0,total:1,message:null}}});const Rp=c.identity,Ap={name:"plotter",displayName:"Plotter",widget:Ve,staticTransform:Rp};try{Ve.displayName="Plotter",Ve.__docgenInfo={description:"",displayName:"Plotter",props:{labels:{defaultValue:{value:'["", ""]'},description:"",name:"labels",required:!1,type:{name:"readonly string[]"}},categories:{defaultValue:{value:'[""]'},description:"",name:"categories",required:!1,type:{name:"readonly string[]"}},type:{defaultValue:{value:"bar"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"line"'},{value:'"bar"'},{value:'"pic"'},{value:'"histogram"'},{value:'"dotplot"'}]}},maxY:{defaultValue:{value:"10"},description:"",name:"maxY",required:!1,type:{name:"number"}},scaleY:{defaultValue:{value:"1"},description:"",name:"scaleY",required:!1,type:{name:"number"}},labelInterval:{defaultValue:{value:"1"},description:"",name:"labelInterval",required:!1,type:{name:"number"}},snapsPerLine:{defaultValue:{value:"2"},description:"",name:"snapsPerLine",required:!1,type:{name:"number"}},starting:{defaultValue:null,description:"",name:"starting",required:!0,type:{name:"readonly number[]"}},correct:{defaultValue:null,description:"",name:"correct",required:!0,type:{name:"readonly number[]"}},picUrl:{defaultValue:{value:""},description:"",name:"picUrl",required:!1,type:{name:"string | null"}},picSize:{defaultValue:{value:"40"},description:"",name:"picSize",required:!1,type:{name:"number"}},picBoxHeight:{defaultValue:{value:"48"},description:"",name:"picBoxHeight",required:!1,type:{name:"number | null"}},plotDimensions:{defaultValue:{value:"[380, 300]"},description:"",name:"plotDimensions",required:!1,type:{name:"readonly number[]"}},widgetId:{defaultValue:null,description:"",name:"widgetId",required:!0,type:{name:"string"}},alignment:{defaultValue:null,description:"",name:"alignment",required:!0,type:{name:"string | null | undefined"}},static:{defaultValue:null,description:"",name:"static",required:!0,type:{name:"boolean | null | undefined"}},problemNum:{defaultValue:null,description:"",name:"problemNum",required:!0,type:{name:"number | null | undefined"}},apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!0,type:{name:"Readonly<Readonly<{ isArticle?: boolean | undefined; onInputError?: ((widgetId: any, value: string, message?: string | null | undefined) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown..."}},keypadElement:{defaultValue:null,description:"",name:"keypadElement",required:!1,type:{name:"any"}},questionCompleted:{defaultValue:null,description:"",name:"questionCompleted",required:!1,type:{name:"boolean"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!0,type:{name:"(blurPath: FocusPath) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!0,type:{name:"(blurPath: FocusPath) => void"}},findWidgets:{defaultValue:null,description:"",name:"findWidgets",required:!0,type:{name:"(arg1: FilterCriterion) => readonly any[]"}},reviewModeRubric:{defaultValue:null,description:"",name:"reviewModeRubric",required:!0,type:{name:"PerseusPlotterWidgetOptions"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"ChangeHandler"}},trackInteraction:{defaultValue:null,description:"",name:"trackInteraction",required:!0,type:{name:"(extraData?: Empty | undefined) => void"}},isLastUsedWidget:{defaultValue:null,description:"",name:"isLastUsedWidget",required:!0,type:{name:"boolean"}},linterContext:{defaultValue:null,description:"",name:"linterContext",required:!0,type:{name:"LinterContextProps"}},containerSizeClass:{defaultValue:null,description:"",name:"containerSizeClass",required:!0,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'},{value:'"large"'},{value:'"xlarge"'}]}}}}}catch{}function Np(i){const e=`/python-program/${i}/embedded`;return er(e)}const qs=class qs extends b.Component{render(){const e=Np(this.props.programID),t={height:this.props.height,width:"100%"},n=["allow-popups","allow-same-origin","allow-scripts","allow-top-navigation"].join(" ");return d(D,{style:Fp.container,children:d("iframe",{sandbox:n,src:e,style:t,allowFullScreen:!0})})}};qs.defaultProps={height:400};let ms=qs;const Fp=S.StyleSheet.create({container:{margin:"auto",width:"100%"}}),Op={name:"python-program",displayName:"Python Program",widget:ms},Hs=class Hs extends b.Component{constructor(){super(...arguments),this.arrowLength=100,this.drawArrow=()=>{const e=this.refs["arrowCanvas"+this.props.index],t=e.getContext("2d");t.clearRect(0,0,e.width,e.height);const n=new Path2D;t.strokeStyle="rgb(0,0,0)",t.lineWidth=1.2,t.lineCap="round";const s=5;n.moveTo(s,e.height/2),n.lineTo(e.width-s,e.height/2),n.moveTo(e.width-2*s,e.height/2-s),n.lineTo(e.width-s,e.height/2),n.moveTo(e.width-2*s,e.height/2+s),n.lineTo(e.width-s,e.height/2),t.stroke(n)}}componentDidMount(){this.drawArrow()}componentDidUpdate(){this.drawArrow()}render(){return w("div",{className:"arrow-container",children:[d("div",{className:"above-text",children:this.props.data.topText}),d("canvas",{height:"30",id:"arrowCanvas"+this.props.index,ref:"arrowCanvas"+this.props.index,width:this.arrowLength,children:v("Reaction arrow pointing to the right.")}),d("div",{className:"below-text",children:this.props.data.bottomText})]})}};Hs.propTypes={data:m.any,index:m.number};let ys=Hs;const nn=class nn extends b.Component{constructor(){super(...arguments),this.simpleValidate=()=>({type:"points",earned:0,total:0,message:null}),this.getUserInput=()=>[],this.validate=(e,t)=>({type:"points",earned:0,total:0,message:null}),this.focus=()=>!0}render(){return d("div",{className:"reaction",ref:"reaction",children:this.props.smiles.map((e,t)=>{const n=this.props.widgetId+"-"+t;return w("div",{className:"molecule-container",children:[d(Le,{id:n,rotationAngle:this.props.rotationAngle[t],smiles:e}),t===this.props.smiles.length-1?null:d(ys,{data:this.props.separators[t],index:t})]},n)})})}};nn.propTypes={rotationAngle:m.arrayOf(m.number),separators:m.arrayOf(m.object),smiles:m.arrayOf(m.string),widgetId:m.string},nn.defaultProps={smiles:[],rotationAngle:[],separators:[]};let bs=nn;const Lp={name:"reaction-diagram",displayName:"Chemical reaction diagram (deprecated)",hidden:!0,widget:bs},Us=class Us extends b.Component{constructor(){super(...arguments),this.state={visible:1},this.change=(...e)=>W.apply(this,e),this._handleInteraction=e=>{const t=parseInt(e.split(" ")[1]);if(t===this.state.visible-1){const n=this.refs.renderer.getWidgetInstance("group "+t);n.showRationalesForCurrentlySelectedChoices();const s=n.simpleValidate();s.type==="points"&&s.total===s.earned&&(this.setState({visible:this.state.visible+1}),this.props.trackInteraction({visible:this.state.visible+1}))}}}shouldComponentUpdate(e,t){return e!==this.props||t!==this.state}render(){const e=d(Pe,{...ji,style:{color:"green"}}),t=c.chain(this.props.json).first(this.state.visible).map((s,r)=>`[[${E.snowman} group ${r}]]`).join(`

`).value(),n={};return c.each(this.props.json,(s,r)=>{const o=`group ${r}`;n[o]={type:"group",graded:!0,version:{major:0,minor:0},options:c.extend({},s,{icon:r<this.state.visible-1?e:null})}}),d("div",{className:"perseus-sequence",children:d(O,{ref:"renderer",content:t,widgets:n,onInteractWithWidget:this._handleInteraction,apiOptions:this.props.apiOptions,linterContext:this.props.linterContext})})}};Us.defaultProps={json:[{content:"",widgets:{},images:{}}],linterContext:q};let vs=Us;const Vp=function(i,e){let t=i.json;c.isArray(t)||(t=[t]);const n=c.map(t,s=>e(s));return c.extend({},i,{json:n})},Dp={name:"sequence",displayName:"Graded sequence (deprecated)",widget:vs,traverseChildWidgets:Vp,tracking:"all",hidden:!0,isLintable:!0},{assert:Ue}=ln,{Path:qp,Arc:Di,Circle:pd,Label:Hp,Line:Up,MovablePoint:Wp,MovableLine:Bp}=V,qi=400,zp=1e3,sn=class sn extends b.Component{constructor(){super(...arguments),this._renderThresholdLine=()=>{const e=[0,this._range()[1][1]],t=c.map(e,s=>[this.state.threshold,s]),n=(s,r)=>d(Wp,{static:!0,coord:s,normalStyle:{stroke:"none",fill:"none"}},r);return d(Bp,{onMove:this.handleMouseInteraction,children:c.map(t,n)})},this._renderCircle=()=>{const e=this.props.data,t=c.reduce(e,(f,y)=>f+y,0),n=c.reduce(e,(f,y,x)=>this.state.threshold!=null&&x<=this.state.threshold?f+y:f,0),s=n/t,r=1e-5,o=20,a=[this.props.box[0]-1.5*o,1.5*o],u=()=>{const f={key:"below",center:a,radius:o,startAngle:0,endAngle:s<1?360*s:360-r,sector:s!==1,unscaled:!0,style:{fill:C.LIGHT_RED,stroke:C.RED}};return d(Di,{...f})},l=()=>{const f={key:"above",center:a,radius:o,startAngle:s>0?360*s:r,endAngle:360,sector:s!==0,unscaled:!0,style:{fill:C.LIGHT_BLUE,stroke:C.BLUE}};return d(Di,{...f})},p=this._range()[0],h=Math.min(Math.max(this.state.threshold,p[0]),p[1]).toFixed(2),g=()=>{const f={key:"label",coord:[a[0],a[1]+1.5*o],text:n+" of "+t+" results below "+h+"%",direction:"center",tex:!1,unscaled:!0,style:{fontSize:"12px"}};return d(Hp,{...f})};return[s>0&&u(),s<1&&l(),g()]},this._renderData=()=>{const e=this.props.data;this._range();const t=1,n=(s,r)=>{if(!s)return;const o=this.state.threshold!=null&&r<=this.state.threshold,a={fill:o?C.LIGHT_RED:C.LIGHT_BLUE,stroke:o?C.RED:C.BLUE},u=[[r,0],[r,s],[r+t,s],[r+t,0]];return d(qp,{coords:u,style:a},r)};return c.map(e,n)},this._setupGraphie=(e,t)=>{const n=t.data,s=t.range,r=t.scale,o=s[0][1]-s[0][0],a=s[1][1]-0,l=Math.ceil(a/20);if(c.each(c.range(0,s[1][1],l),k=>{n&&e.label([s[0][0],k],ge.roundToApprox(k,2),"left",!0),e.line([s[0][0],k],[s[0][1],k],{stroke:"#000",strokeWidth:1,opacity:.3})}),n){const M=Math.ceil(o/15);c.each(c.range(s[0][0],s[0][1],M),I=>{e.label([I,0],Zr(I,2),"below",!0),e.line([I,0],[I,-8/r[1]],{stroke:"#000",strokeWidth:1})})}const p={stroke:"#000",strokeWidth:2,opacity:1},h=[s[0][0],0],g=[s[0][0],s[1][1]];e.line(h,g,p);const f=s[0][0]+o/2,y=n?25:0;e.label([f,-y/r[1]],t.xAxisLabel,"below",!1).css("font-weight","bold");const x=0+a/2,T=n?55:28;e.label([s[0][0]-T/r[0],x],t.yAxisLabel,"center",!1).css("font-weight","bold").css("-webkit-transform","rotate(-90deg)")},this.handleMouseInteraction=e=>{this.setState({threshold:e[0]})},this._range=e=>{const t=[[0,100],[-1,10]];return e=e||this.props,e.data?this._getRangeForData(e.data):t},this._getRangeForData=e=>{const n=c.indexOf(e,c.find(e,l=>l>0)),s=Math.max(0,n-10),r=c.lastIndexOf(e,c.last(c.filter(e,l=>l>0))),o=Math.min(101,r+1+10),a=-1,u=c.max(e);return[[s,o],[a,u]]},this._getInitialThreshold=e=>{const t=e[0];return t[0]+(t[1]-t[0])/3},this.state={threshold:this._getInitialThreshold(this._range())}}UNSAFE_componentWillReceiveProps(e){const t=this._range(),n=this._range(e);E.deepEq(t,n)||this.setState({threshold:this._getInitialThreshold(n)})}render(){const e=this.props.data,t=this._range(),n={xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,box:this.props.box,range:t,data:e,scale:[E.scaleFromExtent(t[0],this.props.box[0]),E.scaleFromExtent(t[1],this.props.box[1])]},s={stroke:"#000",strokeWidth:1,opacity:1},r=[t[0][0],0],o=[t[0][1],0];return w(V,{box:n.box,range:n.range,options:n,setup:this._setupGraphie,onMouseMove:this.handleMouseInteraction,onMouseDown:this.handleMouseInteraction,setDrawingAreaAvailable:this.props.setDrawingAreaAvailable,children:[d(Up,{start:r,end:o,style:s}),e&&this._renderData(),e&&this._renderCircle(),e&&this._renderThresholdLine()]})}};sn.propTypes={data:m.arrayOf(m.number),xAxisLabel:m.string,yAxisLabel:m.string,box:m.arrayOf(m.number)},sn.defaultProps={data:null,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",box:[qi,qi]};let xs=sn;const et=class et extends b.Component{constructor(){super(...arguments),this.state={invalidInput:!1},this.calculateDisplayProportion=()=>{const e=this.props.userProportion;return this.props.proportionOrPercentage==="percentage"?Math.round(100*e):e},this.change=(...e)=>W.apply(this,e),this.checkProportionValidity=e=>e>=0&&this.props.proportionOrPercentage==="proportion"&&e<=1||this.props.proportionOrPercentage==="percentage"&&e<=100,this.handleUserProportionChange=(e,t)=>{let n;this.props.proportionOrPercentage==="percentage"?n=e/100:n=e,n!=null&&(n=Math.min(1,Math.max(0,n))),this.props.onChange({userProportion:n},t)},this.handleSampleSizeChange=(e,t)=>{e!=null&&(e=Math.min(zp,Math.max(0,Math.floor(e)))),this.props.onChange({sampleSize:e},t)},this.handleRunSimulation=()=>{if(this.props.numTrials==null||this.props.userProportion==null||this.props.sampleSize==null){this.setState({invalidInput:!0});return}this.setState({invalidInput:!1}),this.props.onChange({data:this.generateData()}),this.props.trackInteraction()},this.generateData=e=>(e=e||this.props,((n,s,r)=>{const o=()=>this.generateNumber()<r,a=c.times(101,()=>0);return c.times(s,()=>{const u=c.times(n,o),l=c.filter(u,c.identity).length,p=Math.floor(100*l/n);a[p]++}),a})(e.sampleSize,e.numTrials,e.userProportion)),this.getInputPaths=()=>[["userProportion"],["sampleSize"]],this.focus=()=>{const e=c.head(this.getInputPaths());return this.focusInputPath(e),!0},this.focusInputPath=e=>{Ue(e.length>0);const t=c.head(e);this.refs[t].focus()},this.blurInputPath=e=>{Ue(e.length>0);const t=c.head(e);this.refs[t].blur()},this.getDOMNodeForPath=e=>{Ue(e.length>0);const t=c.head(e);return L.findDOMNode(this.refs[t])},this.getGrammarTypeForPath=e=>(Ue(e.length>0),"number"),this.setInputValue=(e,t,n)=>{Ue(e.length>0);const s=c.head(e),o="handle"+(s.charAt(0).toUpperCase()+s.slice(1))+"Change";this[o](t,n)},this.getUserInput=()=>null,this.simpleValidate=e=>et.validate(this.getUserInput(),e)}UNSAFE_componentWillMount(){this.props.randomSeed!=null&&(this.generateNumber=E.seededRNG(this.props.randomSeed))}UNSAFE_componentWillReceiveProps(e){e.randomSeed!==this.props.randomSeed&&(this.generateNumber=E.seededRNG(e.randomSeed))}render(){const e={marginLeft:"5px"},n=c.extend({},e,{boxShadow:"0px 0px 0px 2px rgba(255, 165, 0, 1)",transition:"all 0.15s"}),s=c.extend({},e,{transition:"all 0.15s"}),r=this.state.invalidInput?n:s,o=w("div",{children:[d(Mt,{ref:"userProportion",style:r,value:this.calculateDisplayProportion(),checkValidity:this.checkProportionValidity,disabled:this.props.apiOptions.readOnly,onChange:this.handleUserProportionChange,onFocus:()=>this.props.onFocus(["userProportion"]),onBlur:()=>this.props.onBlur(["userProportion"])}),d(Cn,{children:d("p",{children:v("This controls the proportion or percentage that will be used in your simulation.")})})]}),a=w("div",{children:[d(Mt,{ref:"sampleSize",style:r,value:this.props.sampleSize,checkValidity:x=>x>=0,disabled:this.props.apiOptions.readOnly,onChange:this.handleSampleSizeChange,onFocus:()=>this.props.onFocus(["sampleSize"]),onBlur:()=>this.props.onBlur(["sampleSize"])}),d(Cn,{children:d("p",{children:v("This controls the sample size that will be used in your simulation. For example, if you set this to 100, then for each trial, responses from 100 participants will be simulated.")})})]}),u=w("div",{style:{textAlign:"right"},children:[d("b",{children:this.props.numTrials}),d(Cn,{children:d("p",{children:v("This is the number of trials used in the simulation. For example, if set to 50, then the survey will be conducted 50 times.")})})]}),l=x=>{const T=d("thead",{children:w("tr",{children:[d("th",{children:v("Parameter")}),d("th",{children:v("Value")})]})}),k=d("tbody",{children:c.map(x,(M,I)=>w("tr",{children:[d("td",{children:M.title}),d("td",{children:M.value})]},I))});return w("table",{children:[T,k]})},p=[{title:this.props.proportionLabel+":",value:o},{title:v("Sample size:"),value:a},{title:v("Number of trials:"),value:u}],g=d("button",{className:"simple-button",style:{margin:"20px 0"},disabled:this.props.apiOptions.readOnly,onClick:this.handleRunSimulation,children:v("Run simulation")}),f={paddingBottom:this.props.data?40:0},y=d("div",{style:f,children:d(xs,{data:this.props.data,xAxisLabel:this.props.xAxisLabel,yAxisLabel:this.props.yAxisLabel,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable})});return w("div",{children:[l(p),g,y]})}};et.propTypes={...dt,apiOptions:G.propTypes,data:m.arrayOf(m.number),numTrials:m.number,proportionLabel:m.string,proportionOrPercentage:m.string,randomSeed:m.number,sampleSize:m.number,trackInteraction:m.func.isRequired,userProportion:m.number,xAxisLabel:m.string,yAxisLabel:m.string},et.defaultProps={data:null,userProportion:null,sampleSize:null,numTrials:null,randomSeed:0,xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",proportionLabel:"Underlying proportion",proportionOrPercentage:"proportion",apiOptions:G.defaults};let Dt=et;c.extend(Dt,{validate:function(i,e){return{type:"points",earned:0,total:0,message:null}}});const $p=i=>{const e=c.clone(i);return e.randomSeed=i.problemNum,e},Gp={name:"simulator",displayName:"Simulator (deprecated)",widget:Dt,transform:$p,hidden:!0},{shuffle:Yp}=E,Hi="horizontal",Kp="vertical",tt=class tt extends b.Component{constructor(){super(...arguments),this.state={changed:!1},this.handleChange=e=>{this._isMounted&&this.setState({changed:!0},()=>{setTimeout(()=>{this.props.onChange(e),this.props.trackInteraction()},0)})},this.getUserInput=()=>({options:this.refs.sortable.getOptions()}),this.moveOptionToIndex=(e,t)=>{this.refs.sortable.moveOptionToIndex(e,t)},this.simpleValidate=e=>this.state.changed?tt.validate(this.getUserInput(),e):{type:"invalid",message:null}}static validate(e,t){return{type:"points",earned:c.isEqual(e.options,t.correct)?1:0,total:1,message:null}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const e=Yp(this.props.correct,this.props.problemNum,!0),{apiOptions:t}=this.props,n=t.isMobile?8:5;return d("div",{className:"perseus-widget-sorter perseus-clearfix",children:d(Rn,{options:e,layout:this.props.layout,margin:n,padding:this.props.padding,onChange:this.handleChange,linterContext:this.props.linterContext,ref:"sortable"})})}};tt.propTypes={apiOptions:G.propTypes,correct:m.array,layout:m.oneOf([Hi,Kp]),onChange:m.func,padding:m.bool,problemNum:m.number,trackInteraction:m.func.isRequired,linterContext:ut},tt.defaultProps={correct:[],layout:Hi,padding:!0,problemNum:0,onChange:function(){},linterContext:q};let Cs=tt;const Xp={name:"sorter",displayName:"Sorter",widget:Cs,isLintable:!0},{assert:Rr}=ln,ze=function(i,e){return[""+i,""+e]},jp=function(){return ze(0,0)},Ar=function(i){return Rr(c.isArray(i)&&i.length===2),+i[0]},Nr=function(i){return Rr(c.isArray(i)&&i.length===2),+i[1]},St=function(i){const e=Ar(i),t=Nr(i);return"answer"+e+","+t},nt=class nt extends b.Component{constructor(){super(...arguments),this._getRows=()=>this.props.answers.length,this._getColumns=()=>this.props.answers[0].length,this.getUserInput=()=>c.map(this.props.answers,c.clone),this.onValueChange=(e,t,n)=>{const s=c.map(this.props.answers,c.clone);s[e][t]=n.target?n.target.value:n,this.props.onChange({answers:s}),this.props.trackInteraction()},this.onHeaderChange=(e,t)=>{const n=this.props.headers.slice();n[e]=t.content,this.props.onChange({headers:n})},this.simpleValidate=e=>nt.validate(this.getUserInput(),e),this._handleFocus=e=>{this.props.onFocus(e)},this._handleBlur=e=>{this.props.onBlur(e)},this.focus=()=>(this.focusInputPath(jp()),!0),this.focusInputPath=e=>{const t=St(e),n=this.refs[t];this.props.apiOptions.customKeypad?n.focus():L.findDOMNode(n).focus()},this.blurInputPath=e=>{const t=St(e),n=this.refs[t];this.props.apiOptions.customKeypad?n.blur():L.findDOMNode(n).blur()},this.getDOMNodeForPath=e=>{const t=St(e);return L.findDOMNode(this.refs[t])},this.getInputPaths=()=>{const e=this._getRows(),t=this._getColumns(),n=[];return c(e).times(s=>{c(t).times(r=>{const o=ze(s,r);n.push(o)})}),n},this.getGrammarTypeForPath=e=>"number",this.setInputValue=(e,t,n)=>{const s=Ar(e),r=Nr(e),o=c.map(this.props.answers,c.clone);o[s][r]=t,this.props.onChange({answers:o},n)}}render(){const e=this._getRows(),t=this._getColumns(),n=this.props.headers;let s,r;const o={};return this.props.apiOptions.customKeypad?(s=gt,r={width:80},o.keypadElement=this.props.keypadElement):(s="input",r={}),w("table",{className:"perseus-widget-table-of-values non-markdown",children:[d("thead",{children:d("tr",{children:c.map(n,(a,u)=>this.props.editableHeaders?d("th",{children:d(this.props.Editor,{ref:"columnHeader"+u,apiOptions:this.props.apiOptions,content:a,widgetEnabled:!1,onChange:c.partial(this.onHeaderChange,u)})},u):d("th",{children:d(O,{content:a,linterContext:this.props.linterContext})},u))})}),d("tbody",{children:c(e).times(a=>d("tr",{children:c(t).times(u=>d("td",{children:d(s,{ref:St(ze(a,u)),type:"text",value:this.props.answers[a][u],disabled:this.props.apiOptions.readOnly,onFocus:c.partial(this._handleFocus,ze(a,u)),onBlur:c.partial(this._handleBlur,ze(a,u)),onChange:c.partial(this.onValueChange,a,u),style:r,...o})},u))},a))})]})}};nt.propTypes={answers:m.arrayOf(m.arrayOf(m.string)),editableHeaders:m.bool,Editor:m.func,headers:m.arrayOf(m.string),keypadElement:Lr,trackInteraction:m.func.isRequired,linterContext:ut},nt.defaultProps=function(){const n=c(4).times(function(){return E.stringArrayOfSize(1)});return{apiOptions:G.defaults,headers:[""],editableHeaders:!1,rows:4,columns:1,answers:n,linterContext:q}}();let qt=nt;c.extend(qt,{validate:function(i,e){const t=function(l){return c.filter(l,function(p){return c.some(p,c.identity)})},n=t(e.answers),s=t(i);if(c.some(s,function(l){return c.some(l,function(p){return p===""})})||!s.length)return{type:"invalid",message:null};if(s.length!==n.length)return{type:"points",earned:0,total:1,message:null};const o=ht.number.createValidatorFunctional;let a=null;return{type:"points",earned:c.every(n,function(l){let p;for(p=0;p<s.length;p++){const h=s[p];if(c.every(h,function(f,y){const x=l[y],k=o(x,{simplify:!0})(f);return k.message&&(a=k.message),k.correct}))return s.splice(p,1),!0}return!1})?1:0,total:1,message:a}}});const Qp=i=>{const e=i.answers.length,t=i.answers[0].length,n=c(e).times(function(){return E.stringArrayOfSize(t)});return c.extend({},i,{answers:n})},Zp={name:"table",displayName:"Table (deprecated - use markdown table instead)",accessible:!0,widget:qt,transform:Qp,hidden:!0,isLintable:!0},Ui=1280,Wi=720,Jp="{host}/embed_video?slug={slug}&internal_video_only=1",eu=/^https?:\/\//,tu=/(khanacademy\.org|localhost)/,nu=/(vimeo\.com)/;class Es extends b.Component{constructor(){super(...arguments),this.getUserInput=()=>null,this.simpleValidate=e=>Es.validate(null,e),this.change=(...e)=>W.apply(this,e)}static validate(e,t){return{type:"points",earned:0,total:0,message:null}}render(){const{InitialRequestUrl:e}=be(),t=this.props.location;if(!t)return d("div",{});let n;if(eu.test(t))n=t,nu.test(n)&&(n.indexOf("?")===-1?n+="?dnt=1":n+="&dnt=1");else{n=Jp.replace("{slug}",t);let s="https://www.khanacademy.org";tu.test(e.host)&&(s=e.origin),n=n.replace("{host}",s)}return w(D,{children:[w(Vo,{width:Ui,height:Wi,children:[d(D,{style:cn.srOnly,children:v("Khan Academy video wrapper")}),d("iframe",{className:"perseus-video-widget",sandbox:"allow-same-origin allow-scripts",width:Ui,height:Wi,src:n,allowFullScreen:!0})]},t+this.props.alignment),d(go,{location:t})]})}}const su={name:"video",displayName:"Video",defaultAlignment:"block",supportedAlignments:["block","float-left","float-right","full-width"],widget:Es},iu=[oa,da,Sa,ka,ga,Ga,Ea,Na,Ka,Xa,Za,ol,Al,Zl,pc,vc,hc,wc,Gc,ip,ap,_p,Ji,Ep,Ap,Op,Lp,Dp,Gp,Xp,Zp,Kr,su,Ca],ud=[...ra,...iu],Ws=class Ws extends b.Component{constructor(e){super(e),this.sectionRenderers=[],this._handleFocusChange=(t,n)=>{t?this._setCurrentFocus(t):this._onRendererBlur(n)},this._setCurrentFocus=t=>{const{keypadElement:n,apiOptions:s}=this.props,{isMobile:r}=s,o=this._currentFocus;this._currentFocus=t;let a=!1,u;if(this._currentFocus){const[p,...h]=this._currentFocus;a=this.sectionRenderers[p].getInputPaths().some(f=>E.inputPathsEqual(f,h)),u=this.sectionRenderers[p].getDOMNodeForPath(h)}const{onFocusChange:l}=this.props.apiOptions;l&&setTimeout(()=>{const p=n==null?void 0:n.getDOMNode(),h=p&&a?p.getBoundingClientRect().height:0;l(this._currentFocus,o,h,a?u:null)},0),n&&r&&(a?n.activate():n.dismiss())},this._onRendererBlur=t=>{const n=this._currentFocus;E.inputPathsEqual(t,n)&&setTimeout(()=>{E.inputPathsEqual(this._currentFocus,n)&&this._setCurrentFocus(null)})},this.blur=()=>{if(this._currentFocus){const[t,...n]=this._currentFocus;this.sectionRenderers[t].blurPath(n)}},this._sections=()=>{const t=Array.isArray(this.props.json)?this.props.json:[this.props.json];if(be().JIPT.useJIPT){const n=[];for(const s of t)qr.parseToArray(s.content).forEach(r=>{n.push({...s,content:r})});return n}return t}}componentDidMount(){this._currentFocus=null}shouldComponentUpdate(e){return e!==this.props}render(){const e={...G.defaults,...this.props.apiOptions,isArticle:!0},t=ce({"framework-perseus":!0,"perseus-article":!0,[ve.MOBILE]:e.isMobile}),n=this._sections().map((s,r)=>d("div",{className:"clearfix",children:b.createElement(O,{...s,ref:o=>{o&&(this.sectionRenderers[r]=o)},key:r,key_:r,keypadElement:this.props.keypadElement,apiOptions:{...e,onFocusChange:(o,a)=>{this._handleFocusChange(o&&[r].concat(o),a&&[r].concat(a))}},linterContext:Hr(this.props.linterContext,"article"),legacyPerseusLint:this.props.legacyPerseusLint,...this.props.dependencies})},r));return d("div",{className:t,children:d(Gr.Provider,{value:this.props.dependencies,children:n})})}};Ws.defaultProps={apiOptions:G.defaults,useNewStyles:!1,linterContext:q};let Ht=Ws;try{Ht.displayName="ArticleRenderer",Ht.__docgenInfo={description:"",displayName:"ArticleRenderer",props:{analytics:{defaultValue:null,description:"",name:"analytics",required:!1,type:{name:"{ onAnalyticsEvent: AnalyticsEventHandlerFn; }"}},apiOptions:{defaultValue:{value:`{
        isArticle: false,
        isMobile: false,
        onInputError: function () {},
        onFocusChange: function () {},
        GroupMetadataEditor: StubTagEditor,
        showAlignmentOptions: false,
        readOnly: false,
        groupAnnotator: function (): null {
            return null;
        },
        baseElements: {
            Link: (
                props: any,
            ): React.ReactElement<React.ComponentProps<"a">> => {
                return <a {...props} />;
            },
        },
        setDrawingAreaAvailable: function () {},
        useDraftEditor: false,
        canScrollPage: false,
        inModal: false,
        crossOutEnabled: false,
        editorChangeDelay: 0,
    } as APIOptionsWithDefaults`},description:"",name:"apiOptions",required:!1,type:{name:"Readonly<{ isArticle?: boolean; onInputError?: ((widgetId: any, value: string, message?: string | null) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown) | undef..."}},json:{defaultValue:null,description:"",name:"json",required:!0,type:{name:"PerseusRenderer | readonly PerseusRenderer[]"}},useNewStyles:{defaultValue:{value:"false"},description:"@deprecated Does nothing",name:"useNewStyles",required:!1,type:{name:"boolean"}},linterContext:{defaultValue:{value:"PerseusLinter.linterContextDefault"},description:"",name:"linterContext",required:!1,type:{name:"LinterContextProps"}},legacyPerseusLint:{defaultValue:null,description:"",name:"legacyPerseusLint",required:!1,type:{name:"readonly string[]"}},keypadElement:{defaultValue:null,description:"",name:"keypadElement",required:!1,type:{name:"KeypadAPI | null"}},dependencies:{defaultValue:null,description:"",name:"dependencies",required:!0,type:{name:"PerseusDependenciesV2"}}}}}catch{}export{Ht as A,oa as C,me as E,Ga as G,Al as I,vc as M,at as N,Ap as P,Zp as T,un as W,ad as a,Ul as b,Ee as c,zo as e,cd as g,dr as t,ud as w,ld as z};
