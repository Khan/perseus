import{a as Ue}from"./version-akiLXZts.js";import"./index-default-4_ZsnO94.js";import{c as He,g as We}from"./_commonjsHelpers-4gQjN7DL.js";const Ke="@khanacademy/kas",Je="__lib_version__";Ue(Ke,Je);var qe={exports:{}};(function(A,t){(function(){var s=this,c=s._,l={},o=Array.prototype,y=Object.prototype,I=Function.prototype,w=o.push,g=o.slice,p=o.concat,d=y.toString,m=y.hasOwnProperty,E=o.forEach,x=o.map,b=o.reduce,_=o.reduceRight,F=o.filter,H=o.every,J=o.some,re=o.indexOf,he=o.lastIndexOf,Z=Array.isArray,j=Object.keys,ie=I.bind,r=function(e){if(e instanceof r)return e;if(!(this instanceof r))return new r(e);this._wrapped=e};A.exports&&(t=A.exports=r),t._=r,r.VERSION="1.4.4";var L=r.each=r.forEach=function(e,n,i){if(e!=null){if(E&&e.forEach===E)e.forEach(n,i);else if(e.length===+e.length){for(var a=0,u=e.length;a<u;a++)if(n.call(i,e[a],a,e)===l)return}else for(var v in e)if(r.has(e,v)&&n.call(i,e[v],v,e)===l)return}};r.map=r.collect=function(e,n,i){var a=[];return e==null?a:x&&e.map===x?e.map(n,i):(L(e,function(u,v,f){a[a.length]=n.call(i,u,v,f)}),a)};var pe="Reduce of empty array with no initial value";r.reduce=r.foldl=r.inject=function(e,n,i,a){var u=arguments.length>2;if(e==null&&(e=[]),b&&e.reduce===b)return a&&(n=r.bind(n,a)),u?e.reduce(n,i):e.reduce(n);if(L(e,function(v,f,M){u?i=n.call(a,i,v,f,M):(i=v,u=!0)}),!u)throw new TypeError(pe);return i},r.reduceRight=r.foldr=function(e,n,i,a){var u=arguments.length>2;if(e==null&&(e=[]),_&&e.reduceRight===_)return a&&(n=r.bind(n,a)),u?e.reduceRight(n,i):e.reduceRight(n);var v=e.length;if(v!==+v){var f=r.keys(e);v=f.length}if(L(e,function(M,T,W){T=f?f[--v]:--v,u?i=n.call(a,i,e[T],T,W):(i=e[T],u=!0)}),!u)throw new TypeError(pe);return i},r.find=r.detect=function(e,n,i){var a;return Q(e,function(u,v,f){if(n.call(i,u,v,f))return a=u,!0}),a},r.filter=r.select=function(e,n,i){var a=[];return e==null?a:F&&e.filter===F?e.filter(n,i):(L(e,function(u,v,f){n.call(i,u,v,f)&&(a[a.length]=u)}),a)},r.reject=function(e,n,i){return r.filter(e,function(a,u,v){return!n.call(i,a,u,v)},i)},r.every=r.all=function(e,n,i){n||(n=r.identity);var a=!0;return e==null?a:H&&e.every===H?e.every(n,i):(L(e,function(u,v,f){if(!(a=a&&n.call(i,u,v,f)))return l}),!!a)};var Q=r.some=r.any=function(e,n,i){n||(n=r.identity);var a=!1;return e==null?a:J&&e.some===J?e.some(n,i):(L(e,function(u,v,f){if(a||(a=n.call(i,u,v,f)))return l}),!!a)};r.contains=r.include=function(e,n){return e==null?!1:re&&e.indexOf===re?e.indexOf(n)!=-1:Q(e,function(i){return i===n})},r.invoke=function(e,n){var i=g.call(arguments,2),a=r.isFunction(n);return r.map(e,function(u){return(a?n:u[n]).apply(u,i)})},r.pluck=function(e,n){return r.map(e,function(i){return i[n]})},r.where=function(e,n,i){return r.isEmpty(n)?i?null:[]:r[i?"find":"filter"](e,function(a){for(var u in n)if(n[u]!==a[u])return!1;return!0})},r.findWhere=function(e,n){return r.where(e,n,!0)},r.max=function(e,n,i){if(!n&&r.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!n&&r.isEmpty(e))return-1/0;var a={computed:-1/0,value:-1/0};return L(e,function(u,v,f){var M=n?n.call(i,u,v,f):u;M>=a.computed&&(a={value:u,computed:M})}),a.value},r.min=function(e,n,i){if(!n&&r.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!n&&r.isEmpty(e))return 1/0;var a={computed:1/0,value:1/0};return L(e,function(u,v,f){var M=n?n.call(i,u,v,f):u;M<a.computed&&(a={value:u,computed:M})}),a.value},r.shuffle=function(e){var n,i=0,a=[];return L(e,function(u){n=r.random(i++),a[i-1]=a[n],a[n]=u}),a};var $=function(e){return r.isFunction(e)?e:function(n){return n[e]}};r.sortBy=function(e,n,i){var a=$(n);return r.pluck(r.map(e,function(u,v,f){return{value:u,index:v,criteria:a.call(i,u,v,f)}}).sort(function(u,v){var f=u.criteria,M=v.criteria;if(f!==M){if(f>M||f===void 0)return 1;if(f<M||M===void 0)return-1}return u.index<v.index?-1:1}),"value")};var N=function(e,n,i,a){var u={},v=$(n||r.identity);return L(e,function(f,M){var T=v.call(i,f,M,e);a(u,T,f)}),u};r.groupBy=function(e,n,i){return N(e,n,i,function(a,u,v){(r.has(a,u)?a[u]:a[u]=[]).push(v)})},r.countBy=function(e,n,i){return N(e,n,i,function(a,u){r.has(a,u)||(a[u]=0),a[u]++})},r.sortedIndex=function(e,n,i,a){i=i==null?r.identity:$(i);for(var u=i.call(a,n),v=0,f=e.length;v<f;){var M=v+f>>>1;i.call(a,e[M])<u?v=M+1:f=M}return v},r.toArray=function(e){return e?r.isArray(e)?g.call(e):e.length===+e.length?r.map(e,r.identity):r.values(e):[]},r.size=function(e){return e==null?0:e.length===+e.length?e.length:r.keys(e).length},r.first=r.head=r.take=function(e,n,i){if(e!=null)return n!=null&&!i?g.call(e,0,n):e[0]},r.initial=function(e,n,i){return g.call(e,0,e.length-(n==null||i?1:n))},r.last=function(e,n,i){if(e!=null)return n!=null&&!i?g.call(e,Math.max(e.length-n,0)):e[e.length-1]},r.rest=r.tail=r.drop=function(e,n,i){return g.call(e,n==null||i?1:n)},r.compact=function(e){return r.filter(e,r.identity)};var V=function(e,n,i){return L(e,function(a){r.isArray(a)?n?w.apply(i,a):V(a,n,i):i.push(a)}),i};r.flatten=function(e,n){return V(e,n,[])},r.without=function(e){return r.difference(e,g.call(arguments,1))},r.uniq=r.unique=function(e,n,i,a){r.isFunction(n)&&(a=i,i=n,n=!1);var u=i?r.map(e,i,a):e,v=[],f=[];return L(u,function(M,T){(n?!T||f[f.length-1]!==M:!r.contains(f,M))&&(f.push(M),v.push(e[T]))}),v},r.union=function(){return r.uniq(p.apply(o,arguments))},r.intersection=function(e){var n=g.call(arguments,1);return r.filter(r.uniq(e),function(i){return r.every(n,function(a){return r.indexOf(a,i)>=0})})},r.difference=function(e){var n=p.apply(o,g.call(arguments,1));return r.filter(e,function(i){return!r.contains(n,i)})},r.zip=function(){for(var e=g.call(arguments),n=r.max(r.pluck(e,"length")),i=new Array(n),a=0;a<n;a++)i[a]=r.pluck(e,""+a);return i},r.object=function(e,n){if(e==null)return{};for(var i={},a=0,u=e.length;a<u;a++)n?i[e[a]]=n[a]:i[e[a][0]]=e[a][1];return i},r.indexOf=function(e,n,i){if(e==null)return-1;var a=0,u=e.length;if(i)if(typeof i=="number")a=i<0?Math.max(0,u+i):i;else return a=r.sortedIndex(e,n),e[a]===n?a:-1;if(re&&e.indexOf===re)return e.indexOf(n,i);for(;a<u;a++)if(e[a]===n)return a;return-1},r.lastIndexOf=function(e,n,i){if(e==null)return-1;var a=i!=null;if(he&&e.lastIndexOf===he)return a?e.lastIndexOf(n,i):e.lastIndexOf(n);for(var u=a?i:e.length;u--;)if(e[u]===n)return u;return-1},r.range=function(e,n,i){arguments.length<=1&&(n=e||0,e=0),i=arguments[2]||1;for(var a=Math.max(Math.ceil((n-e)/i),0),u=0,v=new Array(a);u<a;)v[u++]=e,e+=i;return v},r.bind=function(e,n){if(e.bind===ie&&ie)return ie.apply(e,g.call(arguments,1));var i=g.call(arguments,2);return function(){return e.apply(n,i.concat(g.call(arguments)))}},r.partial=function(e){var n=g.call(arguments,1);return function(){return e.apply(this,n.concat(g.call(arguments)))}},r.bindAll=function(e){var n=g.call(arguments,1);return n.length===0&&(n=r.functions(e)),L(n,function(i){e[i]=r.bind(e[i],e)}),e},r.memoize=function(e,n){var i={};return n||(n=r.identity),function(){var a=n.apply(this,arguments);return r.has(i,a)?i[a]:i[a]=e.apply(this,arguments)}},r.delay=function(e,n){var i=g.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},n)},r.defer=function(e){return r.delay.apply(r,[e,1].concat(g.call(arguments,1)))},r.throttle=function(e,n){var i,a,u,v,f=0,M=function(){f=new Date,u=null,v=e.apply(i,a)};return function(){var T=new Date,W=n-(T-f);return i=this,a=arguments,W<=0?(clearTimeout(u),u=null,f=T,v=e.apply(i,a)):u||(u=setTimeout(M,W)),v}},r.debounce=function(e,n,i){var a,u;return function(){var v=this,f=arguments,M=function(){a=null,i||(u=e.apply(v,f))},T=i&&!a;return clearTimeout(a),a=setTimeout(M,n),T&&(u=e.apply(v,f)),u}},r.once=function(e){var n=!1,i;return function(){return n||(n=!0,i=e.apply(this,arguments),e=null),i}},r.wrap=function(e,n){return function(){var i=[e];return w.apply(i,arguments),n.apply(this,i)}},r.compose=function(){var e=arguments;return function(){for(var n=arguments,i=e.length-1;i>=0;i--)n=[e[i].apply(this,n)];return n[0]}},r.after=function(e,n){return e<=0?n():function(){if(--e<1)return n.apply(this,arguments)}},r.keys=j||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var n=[];for(var i in e)r.has(e,i)&&(n[n.length]=i);return n},r.values=function(e){var n=[];for(var i in e)r.has(e,i)&&n.push(e[i]);return n},r.pairs=function(e){var n=[];for(var i in e)r.has(e,i)&&n.push([i,e[i]]);return n},r.invert=function(e){var n={};for(var i in e)r.has(e,i)&&(n[e[i]]=i);return n},r.functions=r.methods=function(e){var n=[];for(var i in e)r.isFunction(e[i])&&n.push(i);return n.sort()},r.extend=function(e){return L(g.call(arguments,1),function(n){if(n)for(var i in n)e[i]=n[i]}),e},r.pick=function(e){var n={},i=p.apply(o,g.call(arguments,1));return L(i,function(a){a in e&&(n[a]=e[a])}),n},r.omit=function(e){var n={},i=p.apply(o,g.call(arguments,1));for(var a in e)r.contains(i,a)||(n[a]=e[a]);return n},r.defaults=function(e){return L(g.call(arguments,1),function(n){if(n)for(var i in n)e[i]==null&&(e[i]=n[i])}),e},r.clone=function(e){return r.isObject(e)?r.isArray(e)?e.slice():r.extend({},e):e},r.tap=function(e,n){return n(e),e};var O=function(e,n,i,a){if(e===n)return e!==0||1/e==1/n;if(e==null||n==null)return e===n;e instanceof r&&(e=e._wrapped),n instanceof r&&(n=n._wrapped);var u=d.call(e);if(u!=d.call(n))return!1;switch(u){case"[object String]":return e==String(n);case"[object Number]":return e!=+e?n!=+n:e==0?1/e==1/n:e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object RegExp]":return e.source==n.source&&e.global==n.global&&e.multiline==n.multiline&&e.ignoreCase==n.ignoreCase}if(typeof e!="object"||typeof n!="object")return!1;for(var v=i.length;v--;)if(i[v]==e)return a[v]==n;i.push(e),a.push(n);var f=0,M=!0;if(u=="[object Array]"){if(f=e.length,M=f==n.length,M)for(;f--&&(M=O(e[f],n[f],i,a)););}else{var T=e.constructor,W=n.constructor;if(T!==W&&!(r.isFunction(T)&&T instanceof T&&r.isFunction(W)&&W instanceof W))return!1;for(var K in e)if(r.has(e,K)&&(f++,!(M=r.has(n,K)&&O(e[K],n[K],i,a))))break;if(M){for(K in n)if(r.has(n,K)&&!f--)break;M=!f}}return i.pop(),a.pop(),M};r.isEqual=function(e,n){return O(e,n,[],[])},r.isEmpty=function(e){if(e==null)return!0;if(r.isArray(e)||r.isString(e))return e.length===0;for(var n in e)if(r.has(e,n))return!1;return!0},r.isElement=function(e){return!!(e&&e.nodeType===1)},r.isArray=Z||function(e){return d.call(e)=="[object Array]"},r.isObject=function(e){return e===Object(e)},L(["Arguments","Function","String","Number","Date","RegExp"],function(e){r["is"+e]=function(n){return d.call(n)=="[object "+e+"]"}}),r.isArguments(arguments)||(r.isArguments=function(e){return!!(e&&r.has(e,"callee"))}),typeof/./!="function"&&(r.isFunction=function(e){return typeof e=="function"}),r.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},r.isNaN=function(e){return r.isNumber(e)&&e!=+e},r.isBoolean=function(e){return e===!0||e===!1||d.call(e)=="[object Boolean]"},r.isNull=function(e){return e===null},r.isUndefined=function(e){return e===void 0},r.has=function(e,n){return m.call(e,n)},r.noConflict=function(){return s._=c,this},r.identity=function(e){return e},r.times=function(e,n,i){for(var a=Array(e),u=0;u<e;u++)a[u]=n.call(i,u);return a},r.random=function(e,n){return n==null&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};P.unescape=r.invert(P.escape);var C={escape:new RegExp("["+r.keys(P.escape).join("")+"]","g"),unescape:new RegExp("("+r.keys(P.unescape).join("|")+")","g")};r.each(["escape","unescape"],function(e){r[e]=function(n){return n==null?"":(""+n).replace(C[e],function(i){return P[e][i]})}}),r.result=function(e,n){if(e==null)return null;var i=e[n];return r.isFunction(i)?i.call(e):i},r.mixin=function(e){L(r.functions(e),function(n){var i=r[n]=e[n];r.prototype[n]=function(){var a=[this._wrapped];return w.apply(a,arguments),ve.call(this,i.apply(r,a))}})};var q=0;r.uniqueId=function(e){var n=++q+"";return e?e+n:n},r.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ce=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},le=/\\|'|\r|\n|\t|\u2028|\u2029/g;r.template=function(e,n,i){var a;i=r.defaults({},i,r.templateSettings);var u=new RegExp([(i.escape||ce).source,(i.interpolate||ce).source,(i.evaluate||ce).source].join("|")+"|$","g"),v=0,f="__p+='";e.replace(u,function(T,W,K,de,oe){return f+=e.slice(v,oe).replace(le,function(ye){return"\\"+G[ye]}),W&&(f+=`'+
((__t=(`+W+`))==null?'':_.escape(__t))+
'`),K&&(f+=`'+
((__t=(`+K+`))==null?'':__t)+
'`),de&&(f+=`';
`+de+`
__p+='`),v=oe+T.length,T}),f+=`';
`,i.variable||(f=`with(obj||{}){
`+f+`}
`),f=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+f+`return __p;
`;try{a=new Function(i.variable||"obj","_",f)}catch(T){throw T.source=f,T}if(n)return a(n,r);var M=function(T){return a.call(this,T,r)};return M.source="function("+(i.variable||"obj")+`){
`+f+"}",M},r.chain=function(e){return r(e).chain()};var ve=function(e){return this._chain?r(e).chain():e};r.mixin(r),L(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=o[e];r.prototype[e]=function(){var i=this._wrapped;return n.apply(i,arguments),(e=="shift"||e=="splice")&&i.length===0&&delete i[0],ve.call(this,i)}}),L(["concat","join","slice"],function(e){var n=o[e];r.prototype[e]=function(){return ve.call(this,n.apply(this._wrapped,arguments))}}),r.extend(r.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(He)})(qe,qe.exports);var Xe=qe.exports;const h=We(Xe);(function(){var A=function(g,p,d,m){for(d=d||{},m=g.length;m--;d[g[m]]=p);return d},t=[1,11],s=[1,9],c=[8,17],l=[6,11],o=[6,11,13,17],y={trace:function(){},yy:{},symbols_:{error:2,unitvalue:3,magnitude:4,unit:5,EOF:6,float:7,POW:8,int:9,multatoms:10,DIV:11,expatom:12,MUL:13,atom:14,"^":15,nat:16,ATOM:17,FLOAT:18,NAT:19,NEG:20,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",8:"POW",11:"DIV",13:"MUL",15:"^",17:"ATOM",18:"FLOAT",19:"NAT",20:"NEG"},productions_:[0,[3,3],[3,2],[4,3],[4,1],[5,3],[5,1],[10,3],[10,2],[10,1],[12,3],[12,1],[14,1],[7,1],[7,1],[16,1],[9,2],[9,1]],performAction:function(p,d,m,E,x,b,_){var F=b.length-1;switch(x){case 1:return{type:"unitMagnitude",magnitude:b[F-2],unit:b[F-1]};case 2:return{type:"unitStandalone",unit:b[F-1]};case 3:this.$=b[F-2]+"e"+b[F];break;case 4:case 13:case 14:case 15:case 17:this.$=b[F];break;case 5:this.$={num:b[F-2],denom:b[F]};break;case 6:this.$={num:b[F],denom:null};break;case 7:this.$=[b[F-2]].concat(b[F]);break;case 8:this.$=[b[F-1]].concat(b[F]);break;case 9:this.$=[b[F]];break;case 10:this.$={name:b[F-2],pow:b[F]};break;case 11:this.$={name:b[F],pow:1};break;case 12:this.$=p;break;case 16:this.$="-"+b[F];break}},table:[{3:1,4:2,5:3,7:4,10:5,12:8,14:10,16:7,17:t,18:[1,6],19:s},{1:[3]},{5:12,10:5,12:8,14:10,17:t},{6:[1,13]},{8:[1,14],17:[2,4]},{6:[2,6],11:[1,15]},A(c,[2,13]),A(c,[2,14]),A(l,[2,9],{12:8,14:10,10:17,13:[1,16],17:t}),A([6,8,11,13,17],[2,15]),A(o,[2,11],{15:[1,18]}),A([6,11,13,15,17],[2,12]),{6:[1,19]},{1:[2,2]},{9:20,19:[1,22],20:[1,21]},{10:23,12:8,14:10,17:t},{10:24,12:8,14:10,17:t},A(l,[2,8]),{16:25,19:s},{1:[2,1]},{17:[2,3]},{19:[1,26]},{17:[2,17]},{6:[2,5]},A(l,[2,7]),A(o,[2,10]),{17:[2,16]}],defaultActions:{13:[2,2],19:[2,1],20:[2,3],22:[2,17],23:[2,5],26:[2,16]},parseError:function(p,d){if(d.recoverable)this.trace(p);else throw new Error(p)},parse:function(p){var d=this,m=[0],E=[null],x=[],b=this.table,_="",F=0,H=0,J=2,re=1,he=x.slice.call(arguments,1),Z=Object.create(this.lexer),j={yy:{}};for(var ie in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ie)&&(j.yy[ie]=this.yy[ie]);Z.setInput(p,j.yy),j.yy.lexer=Z,j.yy.parser=this,typeof Z.yylloc>"u"&&(Z.yylloc={});var r=Z.yylloc;x.push(r);var L=Z.options&&Z.options.ranges;typeof j.yy.parseError=="function"?this.parseError=j.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function pe(){var le;return le=Z.lex()||re,typeof le!="number"&&(le=d.symbols_[le]||le),le}for(var Q,$,N,V,O={},P,C,q,ce;;){if($=m[m.length-1],this.defaultActions[$]?N=this.defaultActions[$]:((Q===null||typeof Q>"u")&&(Q=pe()),N=b[$]&&b[$][Q]),typeof N>"u"||!N.length||!N[0]){var G="";ce=[];for(P in b[$])this.terminals_[P]&&P>J&&ce.push("'"+this.terminals_[P]+"'");Z.showPosition?G="Parse error on line "+(F+1)+`:
`+Z.showPosition()+`
Expecting `+ce.join(", ")+", got '"+(this.terminals_[Q]||Q)+"'":G="Parse error on line "+(F+1)+": Unexpected "+(Q==re?"end of input":"'"+(this.terminals_[Q]||Q)+"'"),this.parseError(G,{text:Z.match,token:this.terminals_[Q]||Q,line:Z.yylineno,loc:r,expected:ce})}if(N[0]instanceof Array&&N.length>1)throw new Error("Parse Error: multiple actions possible at state: "+$+", token: "+Q);switch(N[0]){case 1:m.push(Q),E.push(Z.yytext),x.push(Z.yylloc),m.push(N[1]),Q=null,H=Z.yyleng,_=Z.yytext,F=Z.yylineno,r=Z.yylloc;break;case 2:if(C=this.productions_[N[1]][1],O.$=E[E.length-C],O._$={first_line:x[x.length-(C||1)].first_line,last_line:x[x.length-1].last_line,first_column:x[x.length-(C||1)].first_column,last_column:x[x.length-1].last_column},L&&(O._$.range=[x[x.length-(C||1)].range[0],x[x.length-1].range[1]]),V=this.performAction.apply(O,[_,H,F,j.yy,N[1],E,x].concat(he)),typeof V<"u")return V;C&&(m=m.slice(0,-1*C*2),E=E.slice(0,-1*C),x=x.slice(0,-1*C)),m.push(this.productions_[N[1]][0]),E.push(O.$),x.push(O._$),q=b[m[m.length-2]][m[m.length-1]],m.push(q);break;case 3:return!0}}return!0}},I=function(){var g={EOF:1,parseError:function(d,m){if(this.yy.parser)this.yy.parser.parseError(d,m);else throw new Error(d)},setInput:function(p,d){return this.yy=d||this.yy||{},this._input=p,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var p=this._input[0];this.yytext+=p,this.yyleng++,this.offset++,this.match+=p,this.matched+=p;var d=p.match(/(?:\r\n?|\n).*/g);return d?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),p},unput:function(p){var d=p.length,m=p.split(/(?:\r\n?|\n)/g);this._input=p+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-d),this.offset-=d;var E=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),m.length-1&&(this.yylineno-=m.length-1);var x=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:m?(m.length===E.length?this.yylloc.first_column:0)+E[E.length-m.length].length-m[0].length:this.yylloc.first_column-d},this.options.ranges&&(this.yylloc.range=[x[0],x[0]+this.yyleng-d]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(p){this.unput(this.match.slice(p))},pastInput:function(){var p=this.matched.substr(0,this.matched.length-this.match.length);return(p.length>20?"...":"")+p.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var p=this.match;return p.length<20&&(p+=this._input.substr(0,20-p.length)),(p.substr(0,20)+(p.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var p=this.pastInput(),d=new Array(p.length+1).join("-");return p+this.upcomingInput()+`
`+d+"^"},test_match:function(p,d){var m,E,x;if(this.options.backtrack_lexer&&(x={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(x.yylloc.range=this.yylloc.range.slice(0))),E=p[0].match(/(?:\r\n?|\n).*/g),E&&(this.yylineno+=E.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:E?E[E.length-1].length-E[E.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+p[0].length},this.yytext+=p[0],this.match+=p[0],this.matches=p,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(p[0].length),this.matched+=p[0],m=this.performAction.call(this,this.yy,this,d,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),m)return m;if(this._backtrack){for(var b in x)this[b]=x[b];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var p,d,m,E;this._more||(this.yytext="",this.match="");for(var x=this._currentRules(),b=0;b<x.length;b++)if(m=this._input.match(this.rules[x[b]]),m&&(!d||m[0].length>d[0].length)){if(d=m,E=b,this.options.backtrack_lexer){if(p=this.test_match(m,x[b]),p!==!1)return p;if(this._backtrack){d=!1;continue}else return!1}else if(!this.options.flex)break}return d?(p=this.test_match(d,x[E]),p!==!1?p:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var d=this.next();return d||this.lex()},begin:function(d){this.conditionStack.push(d)},popState:function(){var d=this.conditionStack.length-1;return d>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(d){return d=this.conditionStack.length-1-Math.abs(d||0),d>=0?this.conditionStack[d]:"INITIAL"},pushState:function(d){this.begin(d)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(d,m,E,x){switch(E){case 0:return 11;case 1:return"(";case 2:return")";case 3:return 8;case 4:return 15;case 5:return 13;case 6:return 18;case 7:return 19;case 8:return 20;case 9:return 17;case 10:return 17;case 11:return 17;case 12:break;case 13:return 6}},rules:[/^(?:\/)/,/^(?:\()/,/^(?:\))/,/^(?:(\*|x|\u00d7|\u2219|\u22c5|\u00b7)\s*10\s*\^)/,/^(?:\^)/,/^(?:\*)/,/^(?:[0-9]+\.[0-9]+)/,/^(?:[0-9]+)/,/^(?:-)/,/^(?:\u00b0( ?)[cCfF])/,/^(?:fl\.? oz\.?)/,/^(?:[\u00b5]?([A-Za-z-]+|[\u2103\u2109\u212b]))/,/^(?:\s+)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};return g}();y.lexer=I;function w(){this.yy={}}return w.prototype=y,y.Parser=w,new w})();var Oe=function(){var A=function($,N,V,O){for(V=V||{},O=$.length;O--;V[$[O]]=N);return V},t=[1,7],s=[1,17],c=[1,13],l=[1,14],o=[1,15],y=[1,32],I=[1,22],w=[1,23],g=[1,24],p=[1,25],d=[1,26],m=[1,33],E=[1,27],x=[1,28],b=[1,29],_=[1,30],F=[1,20],H=[1,36],J=[1,37],re=[5,6,8,10,33,35,41,43,45],he=[1,39],Z=[1,40],j=[5,6,8,10,12,14,16,19,21,22,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],ie=[10,16,19,21,22,28,29,30,31,32,34,37,39,42,43,44,46],r=[5,6,8,10,12,14,16,18,19,21,22,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],L={trace:function(){},yy:{},symbols_:{error:2,equation:3,expression:4,SIGN:5,EOF:6,additive:7,"+":8,multiplicative:9,"-":10,triglog:11,"*":12,negative:13,"/":14,trig:15,TRIG:16,trigfunc:17,"^":18,TRIGINV:19,logbase:20,ln:21,log:22,_:23,subscriptable:24,power:25,primitive:26,variable:27,VAR:28,CONST:29,INT:30,FLOAT:31,"{":32,"}":33,"(":34,")":35,function:36,FUNC:37,invocation:38,sqrt:39,"[":40,"]":41,abs:42,"|":43,"LEFT|":44,"RIGHT|":45,FRAC:46,$accept:0,$end:1},terminals_:{2:"error",5:"SIGN",6:"EOF",8:"+",10:"-",12:"*",14:"/",16:"TRIG",18:"^",19:"TRIGINV",21:"ln",22:"log",23:"_",28:"VAR",29:"CONST",30:"INT",31:"FLOAT",32:"{",33:"}",34:"(",35:")",37:"FUNC",39:"sqrt",40:"[",41:"]",42:"abs",43:"|",44:"LEFT|",45:"RIGHT|",46:"FRAC"},productions_:[0,[3,4],[3,2],[3,1],[4,1],[7,3],[7,3],[7,1],[9,2],[9,3],[9,3],[9,1],[13,2],[13,1],[15,1],[17,1],[17,3],[17,1],[20,1],[20,1],[20,3],[11,2],[11,2],[11,1],[25,3],[25,1],[27,1],[24,3],[24,1],[24,1],[24,1],[24,1],[24,3],[24,3],[36,1],[38,4],[38,4],[38,7],[38,4],[38,3],[38,3],[38,4],[26,1],[26,1],[26,7]],performAction:function(N,V,O,P,C,q,ce){var G=q.length-1;switch(C){case 1:return new P.Eq(q[G-3],q[G-2],q[G-1]);case 2:return q[G-1];case 3:return new P.Add([]);case 4:case 7:case 11:case 13:case 15:case 20:case 23:case 25:case 42:case 43:this.$=q[G];break;case 5:this.$=P.Add.createOrAppend(q[G-2],q[G]);break;case 6:this.$=P.Add.createOrAppend(q[G-2],P.Mul.handleNegative(q[G],"subtract"));break;case 8:this.$=P.Mul.fold(P.Mul.createOrAppend(q[G-1],q[G]));break;case 9:this.$=P.Mul.fold(P.Mul.createOrAppend(q[G-2],q[G]));break;case 10:this.$=P.Mul.fold(P.Mul.handleDivide(q[G-2],q[G]));break;case 12:this.$=P.Mul.handleNegative(q[G]);break;case 14:case 17:this.$=[N];break;case 16:this.$=q[G-2].concat(q[G]);break;case 18:this.$=P.Log.natural();break;case 19:this.$=P.Log.common();break;case 21:this.$=P.Trig.create(q[G-1],q[G]);break;case 22:this.$=P.Log.create(q[G-1],q[G]);break;case 24:this.$=new P.Pow(q[G-2],q[G]);break;case 26:case 34:this.$=N;break;case 27:this.$=new P.Var(q[G-2],q[G]);break;case 28:this.$=new P.Var(q[G]);break;case 29:this.$=new P.Const(N.toLowerCase());break;case 30:this.$=P.Int.create(Number(N));break;case 31:this.$=P.Float.create(Number(N));break;case 32:this.$=q[G-1].completeParse();break;case 33:this.$=q[G-1].completeParse().addHint("parens");break;case 35:case 36:this.$=P.Pow.sqrt(q[G-1]);break;case 37:this.$=new P.Pow.nthroot(q[G-1],q[G-4]);break;case 38:case 39:case 40:this.$=new P.Abs(q[G-1]);break;case 41:this.$=new P.Func(q[G-3],q[G-1]);break;case 44:this.$=P.Mul.handleDivide(q[G-4],q[G-1]);break}},table:[{3:1,4:2,6:[1,3],7:4,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{1:[3]},{5:[1,34],6:[1,35]},{1:[2,3]},A([5,6],[2,4],{8:H,10:J}),A(re,[2,7],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:he,14:Z,16:s,19:c,21:l,22:o,28:y,29:I,30:w,31:g,32:p,34:d,37:m,39:E,42:x,44:_,46:F}),A(j,[2,11]),{10:t,11:8,13:41,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},A(j,[2,13]),{10:t,11:8,13:42,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{10:t,11:8,13:43,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},A(j,[2,23]),A(ie,[2,15],{18:[1,44]}),A(ie,[2,17]),A(ie,[2,18]),A(ie,[2,19],{23:[1,45]}),A(j,[2,25],{18:[1,46]}),A([10,16,18,19,21,22,28,29,30,31,32,34,37,39,42,43,44,46],[2,14]),A(r,[2,42]),A(r,[2,43]),{32:[1,47]},A(r,[2,28],{23:[1,48]}),A(r,[2,29]),A(r,[2,30]),A(r,[2,31]),{7:49,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{7:50,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{32:[1,52],34:[1,51],40:[1,53]},{34:[1,54]},{7:55,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{7:56,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{34:[1,57]},A([5,6,8,10,12,14,16,18,19,21,22,23,28,29,30,31,32,33,34,35,37,39,41,42,43,44,45,46],[2,26]),{34:[2,34]},{4:58,7:4,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{1:[2,2]},{9:59,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{9:60,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},A(j,[2,8]),{10:t,11:8,13:61,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{10:t,11:8,13:62,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},A(j,[2,12]),A(j,[2,21]),A(j,[2,22]),{10:t,11:8,13:63,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{24:64,27:21,28:y,29:I,30:w,31:g,32:p,34:d},{10:t,11:8,13:65,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{7:66,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{24:67,27:21,28:y,29:I,30:w,31:g,32:p,34:d},{8:H,10:J,33:[1,68]},{8:H,10:J,35:[1,69]},{7:70,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{7:71,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{7:72,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{7:73,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{8:H,10:J,43:[1,74]},{8:H,10:J,45:[1,75]},{7:76,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{6:[1,77]},A(re,[2,5],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:he,14:Z,16:s,19:c,21:l,22:o,28:y,29:I,30:w,31:g,32:p,34:d,37:m,39:E,42:x,44:_,46:F}),A(re,[2,6],{17:9,20:10,25:11,15:12,26:16,24:18,38:19,27:21,36:31,11:38,12:he,14:Z,16:s,19:c,21:l,22:o,28:y,29:I,30:w,31:g,32:p,34:d,37:m,39:E,42:x,44:_,46:F}),A(j,[2,9]),A(j,[2,10]),A(ie,[2,16]),A(ie,[2,20]),A(j,[2,24]),{8:H,10:J,33:[1,78]},A(r,[2,27]),A(r,[2,32]),A(r,[2,33]),{8:H,10:J,35:[1,79]},{8:H,10:J,33:[1,80]},{8:H,10:J,41:[1,81]},{8:H,10:J,35:[1,82]},A(r,[2,39]),A(r,[2,40]),{8:H,10:J,35:[1,83]},{1:[2,1]},{32:[1,84]},A(r,[2,35]),A(r,[2,36]),{32:[1,85]},A(r,[2,38]),A(r,[2,41]),{7:86,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{7:87,9:5,10:t,11:8,13:6,15:12,16:s,17:9,19:c,20:10,21:l,22:o,24:18,25:11,26:16,27:21,28:y,29:I,30:w,31:g,32:p,34:d,36:31,37:m,38:19,39:E,42:x,43:b,44:_,46:F},{8:H,10:J,33:[1,88]},{8:H,10:J,33:[1,89]},A(r,[2,44]),A(r,[2,37])],defaultActions:{3:[2,3],33:[2,34],35:[2,2],77:[2,1]},parseError:function(N,V){if(V.recoverable)this.trace(N);else throw new Error(N)},parse:function(N){var V=this,O=[0],P=[null],C=[],q=this.table,ce="",G=0,le=0,ve=2,e=1,n=C.slice.call(arguments,1),i=Object.create(this.lexer),a={yy:{}};for(var u in this.yy)Object.prototype.hasOwnProperty.call(this.yy,u)&&(a.yy[u]=this.yy[u]);i.setInput(N,a.yy),a.yy.lexer=i,a.yy.parser=this,typeof i.yylloc>"u"&&(i.yylloc={});var v=i.yylloc;C.push(v);var f=i.options&&i.options.ranges;typeof a.yy.parseError=="function"?this.parseError=a.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function M(){var Re;return Re=i.lex()||e,typeof Re!="number"&&(Re=V.symbols_[Re]||Re),Re}for(var T,W,K,de,oe={},ye,ge,Ge,Me;;){if(W=O[O.length-1],this.defaultActions[W]?K=this.defaultActions[W]:((T===null||typeof T>"u")&&(T=M()),K=q[W]&&q[W][T]),typeof K>"u"||!K.length||!K[0]){var De="";Me=[];for(ye in q[W])this.terminals_[ye]&&ye>ve&&Me.push("'"+this.terminals_[ye]+"'");i.showPosition?De="Parse error on line "+(G+1)+`:
`+i.showPosition()+`
Expecting `+Me.join(", ")+", got '"+(this.terminals_[T]||T)+"'":De="Parse error on line "+(G+1)+": Unexpected "+(T==e?"end of input":"'"+(this.terminals_[T]||T)+"'"),this.parseError(De,{text:i.match,token:this.terminals_[T]||T,line:i.yylineno,loc:v,expected:Me})}if(K[0]instanceof Array&&K.length>1)throw new Error("Parse Error: multiple actions possible at state: "+W+", token: "+T);switch(K[0]){case 1:O.push(T),P.push(i.yytext),C.push(i.yylloc),O.push(K[1]),T=null,le=i.yyleng,ce=i.yytext,G=i.yylineno,v=i.yylloc;break;case 2:if(ge=this.productions_[K[1]][1],oe.$=P[P.length-ge],oe._$={first_line:C[C.length-(ge||1)].first_line,last_line:C[C.length-1].last_line,first_column:C[C.length-(ge||1)].first_column,last_column:C[C.length-1].last_column},f&&(oe._$.range=[C[C.length-(ge||1)].range[0],C[C.length-1].range[1]]),de=this.performAction.apply(oe,[ce,le,G,a.yy,K[1],P,C].concat(n)),typeof de<"u")return de;ge&&(O=O.slice(0,-1*ge*2),P=P.slice(0,-1*ge),C=C.slice(0,-1*ge)),O.push(this.productions_[K[1]][0]),P.push(oe.$),C.push(oe._$),Ge=q[O[O.length-2]][O[O.length-1]],O.push(Ge);break;case 3:return!0}}return!0}},pe=function(){var $={EOF:1,parseError:function(V,O){if(this.yy.parser)this.yy.parser.parseError(V,O);else throw new Error(V)},setInput:function(N,V){return this.yy=V||this.yy||{},this._input=N,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var N=this._input[0];this.yytext+=N,this.yyleng++,this.offset++,this.match+=N,this.matched+=N;var V=N.match(/(?:\r\n?|\n).*/g);return V?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),N},unput:function(N){var V=N.length,O=N.split(/(?:\r\n?|\n)/g);this._input=N+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-V),this.offset-=V;var P=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),O.length-1&&(this.yylineno-=O.length-1);var C=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:O?(O.length===P.length?this.yylloc.first_column:0)+P[P.length-O.length].length-O[0].length:this.yylloc.first_column-V},this.options.ranges&&(this.yylloc.range=[C[0],C[0]+this.yyleng-V]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(N){this.unput(this.match.slice(N))},pastInput:function(){var N=this.matched.substr(0,this.matched.length-this.match.length);return(N.length>20?"...":"")+N.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var N=this.match;return N.length<20&&(N+=this._input.substr(0,20-N.length)),(N.substr(0,20)+(N.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var N=this.pastInput(),V=new Array(N.length+1).join("-");return N+this.upcomingInput()+`
`+V+"^"},test_match:function(N,V){var O,P,C;if(this.options.backtrack_lexer&&(C={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(C.yylloc.range=this.yylloc.range.slice(0))),P=N[0].match(/(?:\r\n?|\n).*/g),P&&(this.yylineno+=P.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:P?P[P.length-1].length-P[P.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+N[0].length},this.yytext+=N[0],this.match+=N[0],this.matches=N,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(N[0].length),this.matched+=N[0],O=this.performAction.call(this,this.yy,this,V,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),O)return O;if(this._backtrack){for(var q in C)this[q]=C[q];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var N,V,O,P;this._more||(this.yytext="",this.match="");for(var C=this._currentRules(),q=0;q<C.length;q++)if(O=this._input.match(this.rules[C[q]]),O&&(!V||O[0].length>V[0].length)){if(V=O,P=q,this.options.backtrack_lexer){if(N=this.test_match(O,C[q]),N!==!1)return N;if(this._backtrack){V=!1;continue}else return!1}else if(!this.options.flex)break}return V?(N=this.test_match(V,C[P]),N!==!1?N:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var V=this.next();return V||this.lex()},begin:function(V){this.conditionStack.push(V)},popState:function(){var V=this.conditionStack.length-1;return V>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(V){return V=this.conditionStack.length-1-Math.abs(V||0),V>=0?this.conditionStack[V]:"INITIAL"},pushState:function(V){this.begin(V)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0},performAction:function(V,O,P,C){switch(P){case 0:break;case 1:break;case 2:break;case 3:return"INT";case 4:return"FLOAT";case 5:return"^";case 6:return"*";case 7:return"*";case 8:return"*";case 9:return"*";case 10:return"/";case 11:return"/";case 12:return"-";case 13:return"-";case 14:return"+";case 15:return"^";case 16:return"(";case 17:return")";case 18:return"(";case 19:return")";case 20:return"[";case 21:return"]";case 22:return"{";case 23:return"}";case 24:return"{";case 25:return"}";case 26:return"_";case 27:return"|";case 28:return"LEFT|";case 29:return"RIGHT|";case 30:return"!";case 31:return"SIGN";case 32:return O.yytext="<=","SIGN";case 33:return O.yytext=">=","SIGN";case 34:return O.yytext="<=","SIGN";case 35:return O.yytext=">=","SIGN";case 36:return O.yytext="<>","SIGN";case 37:return O.yytext="<>","SIGN";case 38:return O.yytext="<>","SIGN";case 39:return O.yytext="<>","SIGN";case 40:return O.yytext="<=","SIGN";case 41:return O.yytext=">=","SIGN";case 42:return"FRAC";case 43:return"FRAC";case 44:return"sqrt";case 45:return"abs";case 46:return"ln";case 47:return"log";case 48:return"TRIG";case 49:return"TRIG";case 50:return"TRIG";case 51:return"TRIG";case 52:return O.yytext="sin","TRIG";case 53:return O.yytext="cos","TRIG";case 54:return O.yytext="tan","TRIG";case 55:return O.yytext="csc","TRIG";case 56:return O.yytext="sec","TRIG";case 57:return O.yytext="cot","TRIG";case 58:return O.yytext="arcsin","TRIG";case 59:return O.yytext="arccos","TRIG";case 60:return O.yytext="arctan","TRIG";case 61:return O.yytext="arccsc","TRIG";case 62:return O.yytext="arcsec","TRIG";case 63:return O.yytext="arccot","TRIG";case 64:return"TRIGINV";case 65:return"TRIGINV";case 66:return O.yytext="sinh","TRIG";case 67:return O.yytext="cosh","TRIG";case 68:return O.yytext="tanh","TRIG";case 69:return O.yytext="csch","TRIG";case 70:return O.yytext="sech","TRIG";case 71:return O.yytext="tanh","TRIG";case 72:return"CONST";case 73:return O.yytext="pi","CONST";case 74:return O.yytext="pi","CONST";case 75:return"VAR";case 76:return O.yytext="theta","VAR";case 77:return O.yytext="theta","VAR";case 78:return"VAR";case 79:return O.yytext="phi","VAR";case 80:return O.yytext="phi","VAR";case 81:return V.symbolLexer(O.yytext);case 82:return"EOF";case 83:return"INVALID";case 84:console.log(O.yytext);break}},rules:[/^(?:\s+)/,/^(?:\\space)/,/^(?:\\ )/,/^(?:[0-9]+\.?)/,/^(?:([0-9]+)?\.[0-9]+)/,/^(?:\*\*)/,/^(?:\*)/,/^(?:\\cdot|·)/,/^(?:\\times|×)/,/^(?:\\ast)/,/^(?:\/)/,/^(?:\\div|÷)/,/^(?:-)/,/^(?:−)/,/^(?:\+)/,/^(?:\^)/,/^(?:\()/,/^(?:\))/,/^(?:\\left\()/,/^(?:\\right\))/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?:\\left\{)/,/^(?:\\right\})/,/^(?:_)/,/^(?:\|)/,/^(?:\\left\|)/,/^(?:\\right\|)/,/^(?:\!)/,/^(?:<=|>=|<>|<|>|=)/,/^(?:\\le)/,/^(?:\\ge)/,/^(?:\\leq)/,/^(?:\\geq)/,/^(?:=\/=)/,/^(?:\\ne)/,/^(?:\\neq)/,/^(?:≠)/,/^(?:≤)/,/^(?:≥)/,/^(?:\\frac)/,/^(?:\\dfrac)/,/^(?:sqrt|\\sqrt)/,/^(?:abs|\\abs)/,/^(?:ln|\\ln)/,/^(?:log|\\log)/,/^(?:sin|cos|tan)/,/^(?:csc|sec|cot)/,/^(?:sinh|cosh|tanh)/,/^(?:csch|sech|coth)/,/^(?:\\sin)/,/^(?:\\cos)/,/^(?:\\tan)/,/^(?:\\csc)/,/^(?:\\sec)/,/^(?:\\cot)/,/^(?:\\arcsin)/,/^(?:\\arccos)/,/^(?:\\arctan)/,/^(?:\\arccsc)/,/^(?:\\arcsec)/,/^(?:\\arccot)/,/^(?:arcsin|arccos|arctan)/,/^(?:arccsc|arcsec|arccot)/,/^(?:\\sinh)/,/^(?:\\cosh)/,/^(?:\\tanh)/,/^(?:\\csch)/,/^(?:\\sech)/,/^(?:\\coth)/,/^(?:pi)/,/^(?:π)/,/^(?:\\pi)/,/^(?:theta)/,/^(?:θ)/,/^(?:\\theta)/,/^(?:phi)/,/^(?:φ)/,/^(?:\\phi)/,/^(?:[a-zA-Z])/,/^(?:$)/,/^(?:.)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84],inclusive:!0}}};return $}();L.lexer=pe;function Q(){this.yy={}}return Q.prototype=L,L.Parser=Q,new Q}();const Ce=function(A){return A!==A},Ze=function(A,t){var s=t-A;return Math.random()*s+A};var Le=12,ze=9;function Ae(A,t){const s=[],c=[];return h.forEach(A,(l,o,y)=>{t(l,o,y)?s.push(l):c.push(l)}),[s,c]}function Qe(A){return A instanceof fe}const Se=function(A){return A instanceof ne};function $e(A){return A instanceof U}function Fe(A){return A instanceof R?A.terms:[A]}class fe{constructor(){this.hints={parens:!1}}construct(t){const s=this.func,c=new s(...t);if(typeof c>"u")throw new Error("constructor function returning undefined");return c}recurse(t,...s){var c=this.args().map(function(l){return h.isString(l)||h.isNumber(l)?l:l==null?void 0:l[t].apply(l,s)});return this.construct(c)}eval(t={},s){throw new Error("Abstract method - must override for expr: "+this.print())}codegen(){throw new Error("Abstract method - must override for expr: "+this.print())}compile(){var t=this.codegen();try{return new Function("vars","return "+t+";")}catch{throw new Error("Function did not compile: "+t)}}asTex(t){t=t||{},h.defaults(t,{display:!0,dynamic:!0,times:!1});let s=this.tex();return t.display&&(s="\\displaystyle "+s),t.dynamic&&(s=s.replace(/\(/g,"\\left("),s=s.replace(/\)/g,"\\right)")),t.times&&(s=s.replace(/\\cdot/g,"\\times")),s}name(){return this.func.name}repr(){return this.name()+"("+this.args().map(function(t){return h.isString(t)||h.isNumber(t)?t:t==null?void 0:t.repr()}).join(",")+")"}strip(){return this.recurse("strip")}normalize(){return this.recurse("normalize")}expand(){return this.recurse("expand")}factor(t){return this.recurse("factor",t)}collect(t){return this.recurse("collect",t)}equals(t){return this.normalize().print()===t.normalize().print()}simplify(t){t={once:!1,...t};var s=this.factor(t),c=s.collect(t);s.equals(c)&&(c=this.collect(t));var l=c.expand(),o=l.collect(t);l.equals(o)&&(o=c.collect(t));var y=o;return t.once||this.equals(y)?y:y.simplify(t)}isSimplified(){return this.equals(this.simplify())}exprArgs(){return this.args().filter(Qe)}getVars(t){return h.uniq(h.flatten(h.invoke(this.exprArgs(),"getVars",t))).sort()}getConsts(){return h.uniq(h.flatten(h.invoke(this.exprArgs(),"getConsts"))).sort()}getUnits(){return h.flatten(h.invoke(this.exprArgs(),"getUnits"))}is(t){return this instanceof t}has(t){return this instanceof t?!0:h.any(this.exprArgs(),function(s){return s.has(t)})}raiseToThe(t,s){return new B(this,t)}isSubtract(){return!1}isDivide(){return!1}isRoot(){return!1}needsExplicitMul(){return this.exprArgs()[0].needsExplicitMul()}sameVars(t){var s=this.getVars(),c=t.getVars(),l=function(w,g){return!h.difference(w,g).length},o=function(w){return h.uniq(h.invoke(w,"toLowerCase")).sort()},y=l(s,c),I=l(o(s),o(c));return{equal:y,equalIgnoringCase:I}}compare(t){if(t instanceof Ne)return!1;var s=h.union(this.getVars(!0),t.getVars(!0)),c=function(E,x){return Math.abs(E)<1||Math.abs(x)<1?Math.abs(E-x):Math.abs(1-E/x)},l=function(E,x){var b=c(E,x);return E===x||Ce(E)&&Ce(x)||b<Math.pow(10,-ze)};if(!s.length&&!this.has(ue)&&!t.has(ue))return l(this.eval(),t.eval());var o=this.collect(),y=t.collect(),I=this.getUnits(),w=t.getUnits();if(!h.isEqual(I,w))return!1;for(var g=0;g<Le;g++){var p={},d=Math.pow(10,1+Math.floor(3*g/Le)),m=g%2===0;h.each(s,function(x){p[x]=m?Ze(-d,d):h.random(-d,d)});let E;if(o.has(xe)||y.has(xe)||o.has(ue)||y.has(ue)){const x=o.partialEval(p),b=y.partialEval(p);E=x.simplify().equals(b.simplify())}else{const x=o.eval(p),b=y.eval(p);E=l(x,b)}if(!E)return!1}return!0}partialEval(t){return this instanceof ue?this:this.has(xe)?this instanceof xe?new xe(this.symbol,this.arg.partialEval(t)):this.recurse("partialEval",t):new se(+this.eval(t).toFixed(ze)).collect()}sameForm(t){return this.strip().equals(t.strip())}findGCD(t){return this.equals(t)?t:te}getDenominator(){return te}asMul(){return new R(te,this)}isPositive(){throw new Error("Abstract method - must override for expr: "+this.print())}isNegative(){return!1}asPositiveFactor(){return this.isPositive()?this:te}addHint(t){if(!t)return this;var s=this.construct(this.args());return s.hints=h.clone(this.hints),s.hints[t]=!0,s}completeParse(){return this.recurse("completeParse")}abs(){throw new Error("Abstract method - must override for expr: "+this.print())}negate(){return new R(me,this)}}class Pe extends fe{constructor(...t){super(),t.length===1?this.terms=t[0]:this.terms=t}args(){return this.terms}normalize(){var t=h.sortBy(h.invoke(this.terms,"normalize"),s=>s.print());return new this.func(t)}expand(){return this.recurse("expand").flatten()}partition(){var[t,s]=Ae(this.terms,c=>c instanceof z);return[new this.func(t),new this.func(s)]}flatten(){var t=this,s=h.reject(this.terms,y=>y.equals(t.identity));if(s.length===0)return t.identity;if(s.length===1)return s[0];const[c,l]=Ae(s,y=>y instanceof t.func);var o=l.concat(h.flatten(h.pluck(c,"terms"),!0));return new t.func(o)}isPositive(){var t=h.invoke(this.terms,"collect");return h.all(h.invoke(t,"isPositive"))}replace(t,s){const c=t instanceof fe?h.indexOf(this.terms,t):t;var l=[];Array.isArray(s)?l=s:s&&(l=[s]);var o=this.terms.slice(0,c).concat(l).concat(this.terms.slice(c+1));return new this.func(o)}remove(t){return this.replace(t)}getDenominator(){return new R(h.invoke(this.terms,"getDenominator")).flatten()}}class ne extends Pe{constructor(){super(...arguments),this.identity=_e,this.func=ne}eval(t={},s){return h.reduce(this.terms,(c,l)=>c+l.eval(t,s),0)}codegen(){return h.map(this.terms,t=>"("+t.codegen()+")").join(" + ")||"0"}print(){return h.invoke(this.terms,"print").join("+")}tex(){let t="";return h.each(this.terms,s=>{!t||s.isSubtract()?t+=s.tex():t+="+"+s.tex()}),t}collect(t){var s=h.invoke(this.terms,"collect",t),c=[];h.each(s,y=>{if(y instanceof R){var I=y.partition();c.push([I[1].flatten(),I[0].reduce(t)])}else y instanceof z?c.push([te,y]):c.push([y,te])});var l=h.groupBy(c,y=>y[0].normalize().print()),o=h.compact(h.map(l,y=>{var I=y[0][0],w=new ne(h.zip.apply(h,y)[1]),g=w.reduce(t);return new R(g,I).collect(t)}));return new ne(o).flatten()}factor(t={keepNegative:!1}){const s=this.terms.map(I=>I.collect());let c;s[0]instanceof R?c=s[0].terms:c=[s[0]],h.each(h.rest(this.terms),I=>{c=h.map(c,w=>I.findGCD(w))}),!t.keepNegative&&this.isNegative()&&c.push(me);const l=new R(c).flatten().collect(),o=s.map(I=>R.handleDivide(I,l).simplify()),y=new ne(o).flatten();return R.createOrAppend(l,y).flatten()}reduce(t){return h.reduce(this.terms,(s,c)=>s.add(c,t),this.identity)}needsExplicitMul(){return!1}isNegative(){var t=h.invoke(this.terms,"collect");return h.all(h.invoke(t,"isNegative"))}negate(){return new ne(h.invoke(this.terms,"negate"))}static createOrAppend(t,s){return t instanceof ne?new ne(t.terms.concat(s)):new ne(t,s)}}class R extends Pe{constructor(){super(...arguments),this.identity=te,this.func=R}eval(t={},s){return h.reduce(this.terms,(c,l)=>c*l.eval(t,s),1)}codegen(){return h.map(this.terms,t=>"("+t.codegen()+")").join(" * ")||"0"}print(){return h.map(this.terms,t=>t instanceof ne?"("+t.print()+")":t.print()).join("*")}getUnits(){var t=h(this.terms).chain().map(s=>s.getUnits()).flatten().value();return t.sort((s,c)=>s.unit.localeCompare(c.unit)),t}tex(){for(var t=" \\cdot ",s=h.groupBy(this.terms,x=>x.isDivide()?"inverse":x instanceof z?"number":"other"),c=s.inverse||[],l=s.number||[],o=s.other||[],y="",I,w=0;w<l.length;w++){var g=l[w]instanceof U&&!(l[w]instanceof D);if(g&&o.length>0&&c.length>0){var p=l.slice();p.splice(w,1);var d=p.concat(c).concat(o);return l[w].tex()+new R(d).tex()}}if(l=h.compact(h.map(l,x=>{var b=!x.hints.fraction||c.length>0;if(x instanceof U&&!(x instanceof D)&&b){c.push(new B(new D(x.d),we));var _=new D(x.n);return _.hints=x.hints,h.any(x.hints)?_:null}else return x})),l.length===0&&o.length===1)I=o[0].tex();else{var m="";h.each(l,x=>{x.hints.subtract&&x.hints.entered?(y+="-",m+=(m?t:"")+x.abs().tex()):x instanceof D&&x.n===-1&&(x.hints.negate||x.hints.subtract)?y+="-":m+=(m?t:"")+x.tex()}),h.each(o,x=>{x.needsExplicitMul()?m+=(m?t:"")+x.tex():x instanceof ne?m+="("+x.tex()+")":m+=x.tex()}),I=m||"1"}if(c.length){var E=new R(h.invoke(c,"asDivide")).flatten().tex();return y+"\\frac{"+I+"}{"+E+"}"}else return y+I}strip(){var t=h.map(this.terms,s=>s instanceof z?s.abs():s.strip());return new R(t).flatten()}expand(){const t=function(g){return g instanceof B&&g.exp.isNegative()},s=function(g){return t(g)&&Se(g.base)},c=this.recurse("expand").flatten(),l=Fe(c),o=h.any(l,Se),y=h.any(l,s);if(!(o||y))return c;let[I,w]=Ae(l,t);if(o){const[g,p]=Ae(w,Se),d=h.reduce(g,function(E,x){return h.reduce(E,function(b,_){return b.concat(h.map(x.terms,F=>_.concat(F)))},[])},[[]]),m=h.map(d,function(E){return new R(p.concat(E)).flatten()});w=[new ne(m)]}if(y){const g=new R(h.invoke(I,"getDenominator")).flatten();I=[new B(g.expand(),we)]}return new R(w.concat(I)).flatten()}factor(t){var s=this.recurse("factor",t).flatten();if(!(s instanceof R))return s;var[c,l]=Ae(s.terms,I=>I instanceof U);const o=h.reduce(c,(I,w)=>({n:I.n*w.n,d:I.d*w.d}),{n:1,d:1}),y=o.d===1?new D(o.n):new U(o.n,o.d);return new R(l.concat(y)).flatten()}collect(t){var s=this.recurse("collect",t).partition(),c=s[0].reduce(t);if(c.eval()===0)return _e;const l=s[1].flatten();if(!(l instanceof R))return new R(c,l).flatten();const o=l.terms;var y=[];h.each(o,_=>{_ instanceof B?y.push([_.base,_.exp]):y.push([_,te])});var I=h.groupBy(y,_=>_[0].normalize().print()),w=h.compact(h.map(I,_=>{var F=_[0][0],H=new ne(h.zip.apply(h,_)[1]),J=H.collect(t);return J instanceof z&&J.eval()===0?null:[F,J]}));const g=h.groupBy(w,_=>_[0]instanceof Y&&_[0].isBasic()?"trig":_[0]instanceof ae?"log":"expr");let p=g.trig||[],d=g.log||[];const m=g.expr||[];if(p.length>1){var E=h.groupBy(p,_=>_[0].arg.normalize().print());p=[],h.each(E,_=>{const F=_[0][0].arg;let H={sin:_e,cos:_e};h.each(_,J=>{H[J[0].type]=J[1]}),R.handleNegative(H.sin).collect(t).equals(H.cos)&&(H.cos.isNegative()?H={tan:H.sin}:H={cot:H.cos}),h.each(H,(J,re)=>{p.push([new Y(re,F),J])})})}if(d.length>1){var x=h.groupBy(d,_=>_[0].base.normalize().print());d=[],h.each(x,_=>{_.length===2&&R.handleNegative(_[0][1]).collect(t).equals(_[1][1])?_[0][1].isNegative()?d.push([new ae(_[0][0].power,_[1][0].power),_[1][1]]):d.push([new ae(_[1][0].power,_[0][0].power),_[0][1]]):d=d.concat(_)})}var b=h.map([...p,...d,...m],_=>new B(_[0],_[1]).collect(t));return new R([c].concat(b)).flatten()}isSubtract(){return h.any(this.terms,t=>t instanceof z&&!!t.hints.subtract)}factorIn(t){var s=this.partition(),c=s[0].terms,l=c.length&&h.all(c,y=>y.n>0);if(l){var o=c[0].negate();return o.hints=c[0].hints,this.replace(c[0],o.addHint(t))}else return new R([z.negativeOne(t)].concat(this.terms))}factorOut(){var t=!1,s=h.compact(h.map(this.terms,c=>!t&&c instanceof z&&c.hints.divide?(t=!0,c.n!==-1?c.negate():null):c));return s.length===1?s[0]:new R(s)}reduce(t){return h.reduce(this.terms,(s,c)=>s.mul(c,t),this.identity)}findGCD(t){return new R(h.invoke(this.terms,"findGCD",t)).flatten()}asMul(){return this}asPositiveFactor(){if(this.isPositive())return this;{const t=Fe(this.collect()).map(s=>s.asPositiveFactor());return new R(t).flatten()}}isNegative(){const t=Fe(this.collect()).map(s=>s.isNegative());return h.any(t)}fold(){return R.fold(this)}negate(){var t=c=>c instanceof z;const s=h.find(this.terms,t);return s?this.replace(s,s.negate()):new R([me].concat(this.terms))}static handleNegative(t,s){if(t instanceof z&&t.n>0){var c=t.negate();return c.hints=t.hints,c.addHint(s)}else return t instanceof R?t.factorIn(s):new R(z.negativeOne(s),t)}static handleDivide(t,s){if(s instanceof R){var c=R.handleDivide(t,s.terms[0]),l=new R(h.rest(s.terms)).flatten();return R.handleDivide(c,l)}var o=m=>m instanceof D,y=m=>m instanceof U;if(o(s)&&t instanceof R&&h.any(t.terms,o)){var I=t.terms.slice().reverse(),w=I.find(y);if(!o(w))return new R(t.terms.concat([new U(1,s.n).addHint("fraction")]));var g=new U(w.n,s.n);return g.hints=w.hints,w===I[0]&&(g=g.addHint("fraction")),w.n<0&&s.n<0?(g.d=-g.d,t.replace(w,[me,g])):t.replace(w,g)}var p=(m,E)=>{if(E instanceof D){if(m instanceof D)return m.n<0&&E.n<0?[me,new U(m.n,-E.n).addHint("fraction")]:[new U(m.n,E.n).addHint("fraction")];var x=new U(1,E.eval());return E.eval()<0?[m,x.addHint("negate")]:[m,x]}else{var b;if(E instanceof Y&&E.exp){var _=E.exp;E.exp=void 0,E=new B(E,_)}return E instanceof B?b=new B(E.base,R.handleNegative(E.exp,"divide")):b=new B(E,we),m instanceof D&&m.n===1?[b]:[m,b]}};if(t instanceof R){var d=p(h.last(t.terms),s);return new R(h.initial(t.terms).concat(d))}else{var d=p(t,s);return new R(d).flatten()}}static fold(t){if(t instanceof R){var s=h.find(h.initial(t.terms),m=>(m instanceof Y||m instanceof ae)&&!!m.hints.open);if(s){const m=h.last(t.terms);if(s.hints.parens||m.hints.parens||m.has(Y)||m.has(ae))s.hints.open=!1;else{const E=s instanceof Y?Y.create([s.type,s.exp],R.createOrAppend(s.arg,m).fold()):ae.create(s.base,R.createOrAppend(s.power,m).fold()),x=h.indexOf(t.terms,s);return x===0?E:new R(t.terms.slice(0,x).concat(E)).fold()}}var c=t.partition(),l=c[0].terms,o=m=>m.n>0,y=m=>m.n===-1&&!!m.hints.negate,I=function(m){return o(m)||y(m)};const p=l.find(o),d=l.find(y);if(l.length>1&&d&&p&&h.every(l,I)){var w=h.indexOf(t.terms,d),g=h.indexOf(t.terms,p);if(w<g)return t.replace(g,t.terms[g].negate()).remove(w)}}return t}static createOrAppend(t,s){return t instanceof R?new R(t.terms.concat(s)):new R(t,s)}}const X=class X extends fe{constructor(t,s){super(),this.func=X,this.base=t,this.exp=s}args(){return[this.base,this.exp]}eval(t={},s){var c=this.base.eval(t,s),l=this.exp.eval(t,s);if(c<0){var o=this.exp.simplify();if(o instanceof se){var y=o.n,I=(y-+y.toFixed()).toString().length-2,w=Math.pow(10,I),g=new U(y*w,w);o=g.simplify()}if(o instanceof U){var p=Math.abs(o.d)%2===1;if(p){var d=Math.abs(o.n)%2===1,m=d?-1:1;return m*Math.pow(-1*c,l)}}}return Math.pow(c,l)}getUnits(){return this.base.getUnits().map(t=>({unit:t.unit,pow:t.pow*this.exp.n}))}codegen(){return"Math.pow("+this.base.codegen()+", "+this.exp.codegen()+")"}print(){var t=this.base.print();return(this.base instanceof Pe||this.base instanceof X)&&(t="("+t+")"),t+"^("+this.exp.print()+")"}tex(){if(this.isDivide())return"\\frac{1}{"+this.asDivide().tex()+"}";if(this.isRoot()&&$e(this.exp)){if(this.exp.n!==1)throw new Error("Node marked with hint 'root' does not have exponent of form 1/x.");return this.exp.d===2?"\\sqrt{"+this.base.tex()+"}":"\\sqrt["+this.exp.d+"]{"+this.base.tex()+"}"}else if(this.base instanceof Y&&!this.base.isInverse()&&this.exp instanceof z&&this.exp.isSimple()&&this.exp.eval()>=0){var t=this.base.texSplit();return t[0]+"^{"+this.exp.tex()+"}"+t[1]}else{var s=this.base.tex();return this.base instanceof Pe||this.base instanceof X||this.base instanceof z&&!this.base.isSimple()?s="("+s+")":(this.base instanceof Y||this.base instanceof ae)&&(s="["+s+"]"),s+"^{"+this.exp.tex()+"}"}}needsExplicitMul(){return this.isRoot()?!1:this.base.needsExplicitMul()}expand(){var t=this.recurse("expand");if(t.base instanceof R){var s=h.map(t.base.terms,I=>new X(I,t.exp));return new R(s).expand()}else if(t.base instanceof ne&&t.exp instanceof D&&t.exp.abs().eval()>1){var c=t.exp.eval()>0,l=t.exp.abs().eval(),o=function(d){return c?d:new X(d,we)};const I={1:t.base};for(var y=2;y<=l;y*=2){const d=new R(I[y/2],I[y/2]);I[y]=d.expand().collect()}if(l in I)return o(I[l]);let w=h.map(l.toString(2).split(""),function(d,m,E){return Number(d)*Math.pow(2,E.length-m-1)});w=h.without(w,0);const g=[];for(const d of w)d in I&&g.push(I[d]);const p=new R(g).expand().collect();return o(p)}else if(t.exp instanceof ne){const I=h.map(t.exp.terms,w=>new X(t.base,w).expand());return new R(I).expand()}else return t}factor(){var t=this.recurse("factor");if(t.base instanceof R){var s=h.map(t.base.terms,c=>c instanceof D&&t.exp.equals(we)?new U(1,c.n):new X(c,t.exp));return new R(s)}else return t}collect(t){if(this.base instanceof X){const l=this.base.base,o=R.createOrAppend(this.base.exp,this.exp);return new X(l,o).collect(t)}const s=this.recurse("collect",t),c=function(l){return l instanceof ae&&l.base.equals(s.base)};if(s.exp instanceof z&&s.exp.eval()===0)return te;if(s.exp instanceof z&&s.exp.eval()===1)return s.base;if(c(s.exp))return s.exp.power;if(s.exp instanceof R&&h.any(s.exp.terms,c)){const l=s.exp.terms.find(c),o=l.power,y=s.exp.remove(l).flatten();return new X(o,y).collect(t)}else if(s.base instanceof z&&s.exp instanceof z){if(t&&t.preciseFloats){const l=s.exp.asRational(),o=s.base.getDecimalPlaces();if(new X(s.base,new U(1,l.d)).collect().getDecimalPlaces()>o){const w=new X(s.base,new D(l.n)).collect();return new X(w,new U(1,l.d))}}return s.base.raiseToThe(s.exp,t)}else return s}isDivide(){var t=function(s){return s instanceof z&&!!s.hints.divide};return t(this.exp)||this.exp instanceof R&&h.any(this.exp.terms,t)}asDivide(){if(this.exp instanceof z){if(this.exp.eval()===-1)return this.base;var t=this.exp.negate();return t.hints=h.clone(this.exp.hints),t.hints.divide=!1,new X(this.base,t)}else{if(this.exp instanceof R)return new X(this.base,this.exp.factorOut());throw new Error("called asDivide() on an Expr that wasn't a Num or Mul")}}isRoot(){return this.exp instanceof U&&!!this.exp.hints.root}isSquaredTrig(){return this.base instanceof Y&&!this.base.isInverse()&&this.exp instanceof z&&this.exp.eval()===2}getDenominator(){if(this.exp instanceof z&&this.exp.eval()===-1)return R.createOrAppend(this.base,this.base.getDenominator()).flatten();if(this.exp.isNegative()){var t=new X(this.base,R.handleNegative(this.exp).collect());return R.createOrAppend(t,t.collect().getDenominator()).flatten()}else return this.base instanceof z?new X(this.base.getDenominator(),this.exp).collect():te}findGCD(t){const[s,c]=t instanceof X?[t.base,t.exp]:[t,te];if(this.base.equals(s)){if(this.exp.equals(c))return this;if(this.exp instanceof z&&c instanceof z)return new X(this.base,z.min(this.exp,c)).collect();if(this.exp instanceof z||c instanceof z)return te;var l=this.exp.asMul().partition(),o=c.asMul().partition();if(l[1].equals(o[1])){var y=z.min(l[0].reduce(),o[0].reduce()),I=new R(y,l[1].flatten()).flatten();return new X(s,I).collect()}}return te}isPositive(){if(this.base.isPositive())return!0;var t=this.exp.simplify();return t instanceof D&&t.eval()%2===0}asPositiveFactor(){if(this.isPositive())return this;var t=this.exp.simplify();if(t instanceof D){var s=t.eval();if(s>2)return new X(this.base,new D(s-1));if(s<-2)return new X(this.base,new D(s+1))}return te}static sqrt(t){return new X(t,et)}};X.nthroot=function(t,s){var c=R.fold(R.handleDivide(new D(1),s));return new X(t,c.addHint("root"))};let B=X;class ae extends fe{constructor(t,s){super(),this.func=ae,this.base=t,this.power=s,this.hints={...this.hints,open:!1}}args(){return[this.base,this.power]}eval(t={},s){return Math.log(this.power.eval(t,s))/Math.log(this.base.eval(t,s))}codegen(){return"(Math.log("+this.power.codegen()+") / Math.log("+this.base.codegen()+"))"}print(){var t="("+this.power.print()+")";return this.isNatural()?"ln"+t:"log_("+this.base.print()+") "+t}tex(){var t="("+this.power.tex()+")";return this.isNatural()?"\\ln"+t:"\\log_{"+this.base.tex()+"}"+t}collect(t){var s=this.recurse("collect",t);return s.power instanceof z&&s.power.eval()===1?_e:s.base.equals(s.power)?te:s.power instanceof B&&s.power.base.equals(s.base)?s.power.exp:s}expand(){var t=this.recurse("expand");if(t.power instanceof R){var s=h.map(t.power.terms,c=>new ae(t.base,c).expand());return new ne(s)}else return t.power instanceof B?new R(t.power.exp,new ae(t.base,t.power.base).expand()).flatten():t.isNatural()?t:R.handleDivide(new ae(Ie.e,t.power),new ae(Ie.e,t.base))}isPositive(){var t=this.collect();return t instanceof ae&&t.base instanceof z&&t.power instanceof z?this.eval()>0:!1}needsExplicitMul(){return!1}isNatural(){return this.base.equals(Ie.e)}static natural(){return Ie.e}static common(){return tt}static create(t,s){var c=new ae(t,s);return s.hints.parens||(c=c.addHint("open")),c}}class Y extends fe{constructor(t,s){super(),this.func=Y,this.functions={sin:{eval:Math.sin,codegen:"Math.sin((",tex:"\\sin",expand:()=>this},cos:{eval:Math.cos,codegen:"Math.cos((",tex:"\\cos",expand:()=>this},tan:{eval:Math.tan,codegen:"Math.tan((",tex:"\\tan",expand:()=>R.handleDivide(Y.sin(this.arg),Y.cos(this.arg))},csc:{eval:c=>1/Math.sin(c),codegen:"(1/Math.sin(",tex:"\\csc",expand:()=>R.handleDivide(te,Y.sin(this.arg))},sec:{eval:c=>1/Math.cos(c),codegen:"(1/Math.cos(",tex:"\\sec",expand:()=>R.handleDivide(te,Y.cos(this.arg))},cot:{eval:c=>1/Math.tan(c),codegen:"(1/Math.tan(",tex:"\\cot",expand:()=>R.handleDivide(Y.cos(this.arg),Y.sin(this.arg))},arcsin:{eval:Math.asin,codegen:"Math.asin((",tex:"\\arcsin"},arccos:{eval:Math.acos,codegen:"Math.acos((",tex:"\\arccos"},arctan:{eval:Math.atan,codegen:"Math.atan((",tex:"\\arctan"},arccsc:{eval:c=>Math.asin(1/c),codegen:"Math.asin(1/(",tex:"\\operatorname{arccsc}"},arcsec:{eval:c=>Math.acos(1/c),codegen:"Math.acos(1/(",tex:"\\operatorname{arcsec}"},arccot:{eval:c=>Math.atan(1/c),codegen:"Math.atan(1/(",tex:"\\operatorname{arccot}"},sinh:{eval:c=>(Math.exp(c)-Math.exp(-c))/2,codegen:c=>"((Math.exp("+c+") - Math.exp(-("+c+"))) / 2)",tex:"\\sinh",expand:()=>this},cosh:{eval:c=>(Math.exp(c)+Math.exp(-c))/2,codegen:c=>"((Math.exp("+c+") + Math.exp(-("+c+"))) / 2)",tex:"\\cosh",expand:()=>this},tanh:{eval:c=>(Math.exp(c)-Math.exp(-c))/(Math.exp(c)+Math.exp(-c)),codegen:c=>"((Math.exp("+c+") - Math.exp(-("+c+"))) / (Math.exp("+c+") + Math.exp(-("+c+"))))",tex:"\\tanh",expand:()=>R.handleDivide(Y.sinh(this.arg),Y.cosh(this.arg))},csch:{eval:c=>2/(Math.exp(c)-Math.exp(-c)),codegen:c=>"(2 / (Math.exp("+c+") - Math.exp(-("+c+"))))",tex:"\\csch",expand:()=>R.handleDivide(te,Y.sinh(this.arg))},sech:{eval:c=>2/(Math.exp(c)+Math.exp(-c)),codegen:c=>"(2 / (Math.exp("+c+") + Math.exp(-("+c+"))))",tex:"\\sech",expand:()=>R.handleDivide(te,Y.cosh(this.arg))},coth:{eval:c=>(Math.exp(c)+Math.exp(-c))/(Math.exp(c)-Math.exp(-c)),codegen:c=>"((Math.exp("+c+") + Math.exp(-("+c+"))) / (Math.exp("+c+") - Math.exp(-("+c+"))))",tex:"\\coth",expand:()=>R.handleDivide(Y.cosh(this.arg),Y.sinh(this.arg))}},this.type=t,this.arg=s,this.hints={...this.hints,open:!1}}args(){return[this.type,this.arg]}isEven(){return h.contains(["cos","sec"],this.type)}isInverse(){return this.type.indexOf("arc")===0}isBasic(){return h.contains(["sin","cos"],this.type)}eval(t={},s){var c=this.functions[this.type].eval,l=this.arg.eval(t,s);return c(l)}codegen(){var t=this.functions[this.type].codegen;if(typeof t=="function")return t(this.arg.codegen());if(typeof t=="string")return t+this.arg.codegen()+"))";throw new Error("codegen not implemented for "+this.type)}print(){return this.type+"("+this.arg.print()+")"}tex(){var t=this.functions[this.type].tex,s="("+this.arg.tex()+")";return t+s}texSplit(){var t=this.functions[this.type].tex,s="("+this.arg.tex()+")";return[t,s]}isPositive(){var t=this.collect();return t instanceof Y&&t.arg instanceof z?this.eval()>0:!1}completeParse(){if(this.exp){var t=new B(this,this.exp);return this.exp=void 0,t}else return this}needsExplicitMul(){return!1}expand(){var t=this.recurse("expand");if(t.isInverse())return t;var s=t.functions[t.type].expand;return h.bind(s,t)()}collect(t){var s=this.recurse("collect",t);if(!s.isInverse()&&s.arg.isNegative()){const c=s.arg instanceof z?s.arg.abs():R.handleDivide(s.arg,me).collect(t);return s.isEven()?new Y(s.type,c):new R(me,new Y(s.type,c))}else return s}static create(t,s){var c=t[0],l=t[1];l&&l.equals(me)&&(c="arc"+c,l=void 0);var o=new Y(c,s);return s.hints.parens||(o=o.addHint("open")),l&&(o.exp=l),o}static sin(t){return new Y("sin",t)}static cos(t){return new Y("cos",t)}static sinh(t){return new Y("sinh",t)}static cosh(t){return new Y("cosh",t)}}class be extends fe{constructor(t){super(),this.func=be,this.arg=t}args(){return[this.arg]}eval(t={},s){return Math.abs(this.arg.eval(t,s))}codegen(){return"Math.abs("+this.arg.codegen()+")"}print(){return"abs("+this.arg.print()+")"}tex(){return"\\left|"+this.arg.tex()+"\\right|"}collect(t){var s=this.recurse("collect",t);if(s.arg.isPositive())return s.arg;if(s.arg instanceof z)return s.arg.abs();if(s.arg instanceof R){var c=h.groupBy(s.arg.terms,o=>o.isPositive()?"positive":o instanceof z?"number":"other"),l=c.positive.concat(h.invoke(c.number,"abs"));return c.other.length&&l.push(new be(new R(c.other).flatten())),new R(l).flatten()}else return s}expand(){var t=this.recurse("expand");if(t.arg instanceof R){var s=h.map(t.arg.terms,c=>new be(c));return new R(s)}else return t}isPositive(){return!0}}class Ne extends fe{constructor(t,s,c){super(),this.func=Ne,this.signs={"=":" = ","<":" < ",">":" > ","<>":" \\ne ","<=":" \\le ",">=":" \\ge "},this.left=t,this.type=s,this.right=c}args(){return[this.left,this.type,this.right]}needsExplicitMul(){return!1}print(){return this.left.print()+this.type+this.right.print()}tex(){return this.left.tex()+this.signs[this.type]+this.right.tex()}normalize(){var t=this.recurse("normalize");return h.contains([">",">="],t.type)?new Ne(t.right,t.type.replace(">","<"),t.left):t}asExpr(t=!1){var s=w=>w instanceof z&&w.isSimple()&&w.eval()===0;let c=[];this.left instanceof ne?c=h.clone(this.left.terms):s(this.left)||(c=[this.left]),this.right instanceof ne?c=c.concat(this.right.negate().terms):s(this.right)||c.push(this.right.negate());var l=!this.isEquality();c=h.invoke(c,"collect",{preciseFloats:!0});for(var o=0;o<c.length;o++){var y=c[o].getDenominator();l&&!y.isPositive()&&(y=y.asPositiveFactor()),y.equals(te)||(c=h.map(c,w=>R.createOrAppend(w,y).simplify({once:!0,preciseFloats:!0})))}var I=new ne(c).flatten();return t?I:this.divideThrough(I)}divideThrough(t){const s=!this.isEquality(),c=t.simplify({once:!0}),l=c.factor({keepNegative:s});if(!(l instanceof R))return t;const o=l.terms,y=m=>!!m.getVars().length,I=m=>m.equals(te),[w,g]=Ae(o,Se);if(w.length&&this.isEquality())return new R(w).flatten();let p=g;w.length||(p=h.reject(p,y)),s&&(p=h.invoke(p,"asPositiveFactor")),p=h.reject(p,I),p=h.map(p,m=>new B(m,we));const d=new R(o.concat(p)).collect();return d.equals(l)?c:d}isEquality(){return h.contains(["=","<>"],this.type)}compare(t){if(!(t instanceof Ne))return!1;var s=this.normalize(),c=t.normalize();if(s.type!==c.type)return!1;var l=s.divideThrough(s.asExpr(!0).collect()),o=c.divideThrough(c.asExpr(!0).collect());return s.isEquality()?l.compare(o)||l.compare(R.handleNegative(o)):l.compare(o)}sameForm(t){var s=this.normalize(),c=t.normalize(),l=s.left.sameForm(c.left)&&s.right.sameForm(c.right);return s.isEquality()?l||s.left.sameForm(c.right)&&s.right.sameForm(c.left):l}isSimplified(){var t=this.asExpr(!0),s=this.divideThrough(t).simplify();return t.equals(s)&&this.left.isSimplified()&&this.right.isSimplified()}solveLinearEquationForVariable(t){var s=this.asExpr();if(!(s instanceof ne)||s.terms.length!==2)throw new Error("Can only handle linear equations of the form a + bx (= 0)");var c=I=>I.has(Te)&&h.contains(I.getVars(),t.symbol);const l=c(s.terms[0]),o=l?R.handleNegative(s.terms[1]):R.handleNegative(s.terms[0]),y=l?R.handleDivide(s.terms[0],t):R.handleDivide(s.terms[1],t);return R.handleDivide(o,y).simplify()}}class ke extends fe{needsExplicitMul(){return!1}findGCD(t){return t instanceof ke||t instanceof z?this.equals(t)?this:te:t.findGCD(this)}}class xe extends ke{constructor(t,s){super(),this.func=xe,this.symbol=t,this.arg=s}args(){return[this.symbol,this.arg]}print(){return this.symbol+"("+this.arg.print()+")"}tex(){return this.symbol+"("+this.arg.tex()+")"}eval(t={},s){var c=this.arg,l=t[this.symbol],o=h.extend(h.clone(t),{x:c.eval(t,s)}),y=Ye(l,s);return y.parsed?y.expr.eval(o,s):y}codegen(){return'vars["'+this.symbol+'"]('+this.arg.codegen()+")"}getUnits(){return this.arg.getUnits()}getVars(t){return t?this.arg.getVars():h.union(this.arg.getVars(),[this.symbol]).sort()}getConsts(){return this.arg.getConsts()}}class Te extends ke{constructor(t,s){super(),this.func=Te,this.symbol=t,this.subscript=s}args(){return[this.symbol,this.subscript]}exprArgs(){return[]}recurse(){return this}print(){var t="";return this.subscript&&(t="_("+this.subscript.print()+")"),this.symbol+t}prettyPrint(){var t=this.subscript;return t&&(t instanceof z||t instanceof ke)?this.symbol+"_"+t.print():this.print()}tex(){var t="";this.subscript&&(t="_{"+this.subscript.tex()+"}");var s=this.symbol.length>1?"\\":"";return s+this.symbol+t}repr(){return"Var("+this.print()+")"}eval(t={},s){return t[this.prettyPrint()]}codegen(){return'vars["'+this.prettyPrint()+'"]'}getVars(){return[this.prettyPrint()]}isPositive(){return!1}}const Ee=class Ee extends ke{constructor(t){super(),this.func=Ee,this.symbol=t}args(){return[this.symbol]}recurse(){return this}eval(t={},s){return this.symbol==="pi"?Math.PI:this.symbol==="e"?Math.E:void 0}codegen(){return this.symbol==="pi"?"Math.PI":this.symbol==="e"?"Math.E":void 0}print(){return this.symbol}tex(){return this.symbol==="pi"?"\\pi ":this.symbol==="e"?"e":void 0}isPositive(){return this.eval()>0}abs(){return this.eval()>0?this:R.handleNegative(this)}getConsts(){return[this.print()]}};Ee.e=new Ee("e"),Ee.pi=new Ee("pi");let Ie=Ee;class z extends fe{constructor(){super(),this.n=0,this.hints={...this.hints,negate:!1,subtract:!1,divide:!1,root:!1,fraction:!1,entered:!1}}repr(){return this.print()}strip(){return this.abs()}recurse(){return this}codegen(){return this.print()}isSubtract(){return!!this.hints.subtract}needsExplicitMul(){return!0}isPositive(){return this.eval()>0}isNegative(){return this.eval()<0}asPositiveFactor(){return this.isPositive()?this:this.abs()}getDecimalPlaces(){var t=(""+this.n).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}static negativeOne(t){return t==="subtract"?je:t==="divide"?we:me}static findGCD(t,s){var c;if(t=Math.abs(t),s=Math.abs(s),t!==Math.floor(t)||s!==Math.floor(s))return 1;for(;s;)c=t%s,t=s,s=c;return t}static min(...t){return h.min(t,s=>s.eval())}static max(...t){return h.max(t,s=>s.eval())}}class U extends z{constructor(t,s){super(),this.func=U;var c=t,l=s;l<0&&(c=-c,l=-l),this.n=c,this.d=l}args(){return[this.n,this.d]}eval(){return this.n/this.d}print(){return this.n.toString()+"/"+this.d.toString()}tex(){var t="\\frac{"+Math.abs(this.n).toString()+"}{"+this.d.toString()+"}";return this.n<0?"-"+t:t}add(t,s){return t instanceof U?new U(this.n*t.d+this.d*t.n,this.d*t.d).collect():t.add(this,s)}mul(t,s){return t instanceof U?new U(this.n*t.n,this.d*t.d).collect():t.mul(this,s)}collect(){var t=z.findGCD(this.n,this.d),s=this.n/t,c=this.d/t;return c===1?new D(s):new U(s,c)}negate(){return new U(-this.n,this.d)}abs(){return new U(Math.abs(this.n),this.d)}findGCD(t){if(t instanceof U){var s=z.findGCD(this.n*t.d,t.n*this.d),c=this.d*t.d;return new U(s,c).collect()}else return t instanceof D?new U(z.findGCD(this.n,t.n),this.d):t.findGCD(this)}raiseToThe(t){if(t instanceof D){var s=t.eval()>0,c=t.abs().eval(),l=Math.pow(this.n,c),o=Math.pow(this.d,c);return s?new U(l,o).collect():new U(o,l).collect()}else return new se(this.eval()).raiseToThe(t)}getDenominator(){return new D(this.d)}isSimple(){return!1}asRational(){return this}}class D extends U{constructor(t){super(t,1),this.func=D}args(){return[this.n]}print(){return this.n.toString()}tex(){return this.n.toString()}negate(){return new D(-this.n)}abs(){return new D(Math.abs(this.n))}isSimple(){return!0}findGCD(t){return t instanceof D?new D(z.findGCD(this.n,t.n)):t.findGCD(this)}static create(t){return new D(t).addHint("entered")}}class se extends z{constructor(t){super(),this.func=se,this.n=t}args(){return[this.n]}eval(){return this.n}print(){return this.n.toString()}tex(){return this.n.toString()}add(t,s){return s&&s.preciseFloats?se.toDecimalPlaces(this.n+t.eval(),Math.max(this.getDecimalPlaces(),t.getDecimalPlaces())):new se(this.n+t.eval()).collect()}mul(t,s){return s&&s.preciseFloats?se.toDecimalPlaces(this.n*t.eval(),this.getDecimalPlaces()+t.getDecimalPlaces()):new se(this.n*t.eval()).collect()}collect(t){return this}negate(){return new se(-this.n)}abs(){return new se(Math.abs(this.n))}findGCD(t){return t instanceof z?new se(z.findGCD(this.eval(),t.eval())).collect():t.findGCD(this)}raiseToThe(t,s){return s&&s.preciseFloats&&t instanceof D&&t.n>1?se.toDecimalPlaces(new B(this,t).eval(),this.getDecimalPlaces()*t.n):new se(new B(this,t).eval()).collect()}asRational(){var t=this.n.toString().split(".");if(t.length===1)return new U(this.n,1);var s=Number(t.join("")),c=Math.pow(10,t[1].length);return new U(s,c).collect()}getDenominator(){return this.asRational().getDenominator()}isSimple(){return!0}static create(t){return new se(t).addHint("entered")}static toDecimalPlaces(t,s){return new se(+t.toFixed(Math.min(s,20))).collect()}}const me=new D(-1).addHint("negate"),je=new D(-1).addHint("subtract"),we=new D(-1).addHint("divide"),et=new U(1,2).addHint("root"),_e=new D(0),te=new D(1),tt=new D(10);var nt=function(A,t){throw new Error(t.loc.first_column)};Oe.yy={Add:ne,Mul:R,Pow:B,Log:ae,Trig:Y,Eq:Ne,Abs:be,Func:xe,Const:Ie,Var:Te,Int:D,Float:se,parseError:nt,constants:["e"],symbolLexer:function(A){return h.contains(Oe.yy.constants,A)?"CONST":h.contains(Oe.yy.functions,A)?"FUNC":"VAR"}};const Ye=function(A,t){try{t&&t.functions?Oe.yy.functions=h.without(t.functions,"i"):Oe.yy.functions=[],t&&t.decimal_separator&&(A=A.split(t.decimal_separator).join("."));var s=Oe.parse(A).completeParse();return{parsed:!0,expr:s}}catch(c){return{parsed:!1,error:c.message}}};class ue extends ke{constructor(t){super(),this.func=ue,this.symbol=t}args(){return[this.symbol]}recurse(){return this}eval(t={},s){return 1}getUnits(){return[{unit:this.symbol,pow:1}]}codegen(){return"1"}print(){return this.symbol}tex(){return this.symbol}collect(t){if(h(rt).has(this.symbol))return this;if(h(Be).has(this.symbol))return Be[this.symbol].conversion;throw new Error("could not understand unit: "+this.symbol)}}var rt={m:new ue("m"),g:new ue("g"),s:new ue("s"),A:new ue("A"),K:new ue("K"),mol:new ue("mol"),cd:new ue("cd")};new B(new D(10),new D(-18)),new B(new D(10),new D(-15)),new B(new D(10),new D(-12)),new B(new D(10),new D(-9)),new B(new D(10),new D(-6)),new B(new D(10),new D(-3)),new B(new D(10),new D(-2)),new B(new D(10),new D(-1)),new D(10),new B(new D(10),new D(2)),new B(new D(10),new D(3)),new B(new D(10),new D(6)),new B(new D(10),new D(9)),new B(new D(10),new D(12)),new B(new D(10),new D(15)),new B(new D(10),new D(18)),new B(new D(10),new D(27));const ee="hasPrefixes",S="hasntPrefixes",k=function(A,t){var s=A.split("|"),c=s[0].trim(),l=s[1].trim(),o=te;c!==""&&(o=Ye(c).expr);var y=l.split("/"),I=[o];return y[0]&&y[0].split(" ").filter(w=>w!=="").forEach(w=>I.push(new ue(w))),y[1]&&y[1].split(" ").filter(w=>w!=="").forEach(w=>I.push(new B(new ue(w),we))),{conversion:new R(I),prefixes:t}};var Be={Da:k("1.6605388628 x 10^-24 | g",ee),u:k("| Da",S),meter:k("| m",S),meters:k("| m",S),in:k("254 / 10000 | m",S),ft:k("3048  / 10000 | m",S),yd:k("9144  / 10000 | m",S),mi:k("1609344 / 1000 | m",S),ly:k("9.4607 x 10^15 | m",S),nmi:k("1852 | m",S),Å:k("10^-10 | m",S),pc:k("3.0857 x 10^16 | m",S),min:k("60 | s",S),hr:k("3600 | s",S),sec:k("| s",S),day:k("86400 | s",S),wk:k("604800 | s",S),fortnight:k("14 | day",S),shake:k("10^-8 | s",S),olympiad:k("126200000 | s",S),"°C":k("1 | K",S),"°F":k("5/9 | K",S),"°R":k("5/9 | K",S),e:k("1.6021765314 x 10^-19 | C",S),c:k("299792458 | m / s",S),kn:k("514/1000 | m / s",S),kt:k("| kn",S),knot:k("| kn",S),J:k("| N m",ee),BTU:k("1060 | J",S),cal:k("4184 / 1000 | J",ee),eV:k("1.602176514 x 10^-19 | J",ee),erg:k("10^−7 | J",ee),W:k("| J / s",ee),"H-e":k("80 | W",S),N:k("1000 | g m / s s",ee),lb:k("4448221615 / 1000000000 | N",S),dyn:k("10^-5 | N",S),Pa:k("1 | N / m m m",ee),bar:k("10^5 | Pa",ee),"㏔":k("1/1000 | bar",S),"㍴":k("| bar",S),atm:k("101325 | Pa",S),Torr:k("1/760 | atm",S),mmHg:k("| Torr",S),ha:k("10^4 | m m",S),b:k("10^−28 | m m",ee),barn:k("| b",ee),acre:k("4046.87 | m m",S),skilodge:k("10^-31 | m m",S),outhouse:k("10^-34 | m m",S),shed:k("10^-52 | m m",S),L:k("1/1000 | m m m",ee),gal:k("3785/1000 | L",ee),cup:k("1/16 | gal",S),qt:k("1/4 | gal",S),quart:k("| qt",S),p:k("1/8 | gal",S),pt:k("| p",S),pint:k("| p",S),"fl oz":k("1/8 | cup",S),"fl. oz.":k("1/8 | cup",S),tbsp:k("1/16 | cup",S),tsp:k("1/3 | tbsp",S),rev:k("2 pi | rad",S),deg:k("180 pi | rad",S),"°":k("| deg",S),arcminute:k("1/60 | deg",S),arcsec:k("1/3600 | deg",S),Hu:k("1000 | dB",ee),dozen:k("12 |",S),mol:k("6.0221412927 x 10^23 |",ee),"%":k("1/100 |",S),percent:k("| %",S),ppm:k("1/1000000 |",S),V:k("1000 | g m m / s s C",ee),C:k("| A s",ee),ampere:k("| A",S),Ω:k("| V / A",ee),ohm:k("| Ω",S),F:k("| C / V",ee),H:k("| ohm s",ee),T:k("1000 | g / C s",ee),Wb:k("1000 | g m m / C s",ee),lm:k("pi x 10^4 | cd / m m",S),lx:k("| lm / m m",S),nit:k("| cd / m m",S),sb:k("10^4 | cd / m m",S),stilb:k("1 | sb",S),apostilb:k("1 / pi x 10^(-4) | sb",S),blondel:k("| apostilb",S),asb:k("| apostilb",S),la:k("| lm",S),Lb:k("| lm",S),sk:k("10^-7 | lm",S),skot:k("| sk",S),bril:k("10^-11 | lm",S),Hz:k("| / s",ee)};const it="@khanacademy/kmath",st="__lib_version__";Ue(it,st);var Ve={exports:{}};(function(A,t){(function(){var s=this,c=s._,l={},o=Array.prototype,y=Object.prototype,I=Function.prototype,w=o.push,g=o.slice,p=o.concat,d=y.toString,m=y.hasOwnProperty,E=o.forEach,x=o.map,b=o.reduce,_=o.reduceRight,F=o.filter,H=o.every,J=o.some,re=o.indexOf,he=o.lastIndexOf,Z=Array.isArray,j=Object.keys,ie=I.bind,r=function(e){if(e instanceof r)return e;if(!(this instanceof r))return new r(e);this._wrapped=e};A.exports&&(t=A.exports=r),t._=r,r.VERSION="1.4.4";var L=r.each=r.forEach=function(e,n,i){if(e!=null){if(E&&e.forEach===E)e.forEach(n,i);else if(e.length===+e.length){for(var a=0,u=e.length;a<u;a++)if(n.call(i,e[a],a,e)===l)return}else for(var v in e)if(r.has(e,v)&&n.call(i,e[v],v,e)===l)return}};r.map=r.collect=function(e,n,i){var a=[];return e==null?a:x&&e.map===x?e.map(n,i):(L(e,function(u,v,f){a[a.length]=n.call(i,u,v,f)}),a)};var pe="Reduce of empty array with no initial value";r.reduce=r.foldl=r.inject=function(e,n,i,a){var u=arguments.length>2;if(e==null&&(e=[]),b&&e.reduce===b)return a&&(n=r.bind(n,a)),u?e.reduce(n,i):e.reduce(n);if(L(e,function(v,f,M){u?i=n.call(a,i,v,f,M):(i=v,u=!0)}),!u)throw new TypeError(pe);return i},r.reduceRight=r.foldr=function(e,n,i,a){var u=arguments.length>2;if(e==null&&(e=[]),_&&e.reduceRight===_)return a&&(n=r.bind(n,a)),u?e.reduceRight(n,i):e.reduceRight(n);var v=e.length;if(v!==+v){var f=r.keys(e);v=f.length}if(L(e,function(M,T,W){T=f?f[--v]:--v,u?i=n.call(a,i,e[T],T,W):(i=e[T],u=!0)}),!u)throw new TypeError(pe);return i},r.find=r.detect=function(e,n,i){var a;return Q(e,function(u,v,f){if(n.call(i,u,v,f))return a=u,!0}),a},r.filter=r.select=function(e,n,i){var a=[];return e==null?a:F&&e.filter===F?e.filter(n,i):(L(e,function(u,v,f){n.call(i,u,v,f)&&(a[a.length]=u)}),a)},r.reject=function(e,n,i){return r.filter(e,function(a,u,v){return!n.call(i,a,u,v)},i)},r.every=r.all=function(e,n,i){n||(n=r.identity);var a=!0;return e==null?a:H&&e.every===H?e.every(n,i):(L(e,function(u,v,f){if(!(a=a&&n.call(i,u,v,f)))return l}),!!a)};var Q=r.some=r.any=function(e,n,i){n||(n=r.identity);var a=!1;return e==null?a:J&&e.some===J?e.some(n,i):(L(e,function(u,v,f){if(a||(a=n.call(i,u,v,f)))return l}),!!a)};r.contains=r.include=function(e,n){return e==null?!1:re&&e.indexOf===re?e.indexOf(n)!=-1:Q(e,function(i){return i===n})},r.invoke=function(e,n){var i=g.call(arguments,2),a=r.isFunction(n);return r.map(e,function(u){return(a?n:u[n]).apply(u,i)})},r.pluck=function(e,n){return r.map(e,function(i){return i[n]})},r.where=function(e,n,i){return r.isEmpty(n)?i?null:[]:r[i?"find":"filter"](e,function(a){for(var u in n)if(n[u]!==a[u])return!1;return!0})},r.findWhere=function(e,n){return r.where(e,n,!0)},r.max=function(e,n,i){if(!n&&r.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!n&&r.isEmpty(e))return-1/0;var a={computed:-1/0,value:-1/0};return L(e,function(u,v,f){var M=n?n.call(i,u,v,f):u;M>=a.computed&&(a={value:u,computed:M})}),a.value},r.min=function(e,n,i){if(!n&&r.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!n&&r.isEmpty(e))return 1/0;var a={computed:1/0,value:1/0};return L(e,function(u,v,f){var M=n?n.call(i,u,v,f):u;M<a.computed&&(a={value:u,computed:M})}),a.value},r.shuffle=function(e){var n,i=0,a=[];return L(e,function(u){n=r.random(i++),a[i-1]=a[n],a[n]=u}),a};var $=function(e){return r.isFunction(e)?e:function(n){return n[e]}};r.sortBy=function(e,n,i){var a=$(n);return r.pluck(r.map(e,function(u,v,f){return{value:u,index:v,criteria:a.call(i,u,v,f)}}).sort(function(u,v){var f=u.criteria,M=v.criteria;if(f!==M){if(f>M||f===void 0)return 1;if(f<M||M===void 0)return-1}return u.index<v.index?-1:1}),"value")};var N=function(e,n,i,a){var u={},v=$(n||r.identity);return L(e,function(f,M){var T=v.call(i,f,M,e);a(u,T,f)}),u};r.groupBy=function(e,n,i){return N(e,n,i,function(a,u,v){(r.has(a,u)?a[u]:a[u]=[]).push(v)})},r.countBy=function(e,n,i){return N(e,n,i,function(a,u){r.has(a,u)||(a[u]=0),a[u]++})},r.sortedIndex=function(e,n,i,a){i=i==null?r.identity:$(i);for(var u=i.call(a,n),v=0,f=e.length;v<f;){var M=v+f>>>1;i.call(a,e[M])<u?v=M+1:f=M}return v},r.toArray=function(e){return e?r.isArray(e)?g.call(e):e.length===+e.length?r.map(e,r.identity):r.values(e):[]},r.size=function(e){return e==null?0:e.length===+e.length?e.length:r.keys(e).length},r.first=r.head=r.take=function(e,n,i){if(e!=null)return n!=null&&!i?g.call(e,0,n):e[0]},r.initial=function(e,n,i){return g.call(e,0,e.length-(n==null||i?1:n))},r.last=function(e,n,i){if(e!=null)return n!=null&&!i?g.call(e,Math.max(e.length-n,0)):e[e.length-1]},r.rest=r.tail=r.drop=function(e,n,i){return g.call(e,n==null||i?1:n)},r.compact=function(e){return r.filter(e,r.identity)};var V=function(e,n,i){return L(e,function(a){r.isArray(a)?n?w.apply(i,a):V(a,n,i):i.push(a)}),i};r.flatten=function(e,n){return V(e,n,[])},r.without=function(e){return r.difference(e,g.call(arguments,1))},r.uniq=r.unique=function(e,n,i,a){r.isFunction(n)&&(a=i,i=n,n=!1);var u=i?r.map(e,i,a):e,v=[],f=[];return L(u,function(M,T){(n?!T||f[f.length-1]!==M:!r.contains(f,M))&&(f.push(M),v.push(e[T]))}),v},r.union=function(){return r.uniq(p.apply(o,arguments))},r.intersection=function(e){var n=g.call(arguments,1);return r.filter(r.uniq(e),function(i){return r.every(n,function(a){return r.indexOf(a,i)>=0})})},r.difference=function(e){var n=p.apply(o,g.call(arguments,1));return r.filter(e,function(i){return!r.contains(n,i)})},r.zip=function(){for(var e=g.call(arguments),n=r.max(r.pluck(e,"length")),i=new Array(n),a=0;a<n;a++)i[a]=r.pluck(e,""+a);return i},r.object=function(e,n){if(e==null)return{};for(var i={},a=0,u=e.length;a<u;a++)n?i[e[a]]=n[a]:i[e[a][0]]=e[a][1];return i},r.indexOf=function(e,n,i){if(e==null)return-1;var a=0,u=e.length;if(i)if(typeof i=="number")a=i<0?Math.max(0,u+i):i;else return a=r.sortedIndex(e,n),e[a]===n?a:-1;if(re&&e.indexOf===re)return e.indexOf(n,i);for(;a<u;a++)if(e[a]===n)return a;return-1},r.lastIndexOf=function(e,n,i){if(e==null)return-1;var a=i!=null;if(he&&e.lastIndexOf===he)return a?e.lastIndexOf(n,i):e.lastIndexOf(n);for(var u=a?i:e.length;u--;)if(e[u]===n)return u;return-1},r.range=function(e,n,i){arguments.length<=1&&(n=e||0,e=0),i=arguments[2]||1;for(var a=Math.max(Math.ceil((n-e)/i),0),u=0,v=new Array(a);u<a;)v[u++]=e,e+=i;return v},r.bind=function(e,n){if(e.bind===ie&&ie)return ie.apply(e,g.call(arguments,1));var i=g.call(arguments,2);return function(){return e.apply(n,i.concat(g.call(arguments)))}},r.partial=function(e){var n=g.call(arguments,1);return function(){return e.apply(this,n.concat(g.call(arguments)))}},r.bindAll=function(e){var n=g.call(arguments,1);return n.length===0&&(n=r.functions(e)),L(n,function(i){e[i]=r.bind(e[i],e)}),e},r.memoize=function(e,n){var i={};return n||(n=r.identity),function(){var a=n.apply(this,arguments);return r.has(i,a)?i[a]:i[a]=e.apply(this,arguments)}},r.delay=function(e,n){var i=g.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},n)},r.defer=function(e){return r.delay.apply(r,[e,1].concat(g.call(arguments,1)))},r.throttle=function(e,n){var i,a,u,v,f=0,M=function(){f=new Date,u=null,v=e.apply(i,a)};return function(){var T=new Date,W=n-(T-f);return i=this,a=arguments,W<=0?(clearTimeout(u),u=null,f=T,v=e.apply(i,a)):u||(u=setTimeout(M,W)),v}},r.debounce=function(e,n,i){var a,u;return function(){var v=this,f=arguments,M=function(){a=null,i||(u=e.apply(v,f))},T=i&&!a;return clearTimeout(a),a=setTimeout(M,n),T&&(u=e.apply(v,f)),u}},r.once=function(e){var n=!1,i;return function(){return n||(n=!0,i=e.apply(this,arguments),e=null),i}},r.wrap=function(e,n){return function(){var i=[e];return w.apply(i,arguments),n.apply(this,i)}},r.compose=function(){var e=arguments;return function(){for(var n=arguments,i=e.length-1;i>=0;i--)n=[e[i].apply(this,n)];return n[0]}},r.after=function(e,n){return e<=0?n():function(){if(--e<1)return n.apply(this,arguments)}},r.keys=j||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var n=[];for(var i in e)r.has(e,i)&&(n[n.length]=i);return n},r.values=function(e){var n=[];for(var i in e)r.has(e,i)&&n.push(e[i]);return n},r.pairs=function(e){var n=[];for(var i in e)r.has(e,i)&&n.push([i,e[i]]);return n},r.invert=function(e){var n={};for(var i in e)r.has(e,i)&&(n[e[i]]=i);return n},r.functions=r.methods=function(e){var n=[];for(var i in e)r.isFunction(e[i])&&n.push(i);return n.sort()},r.extend=function(e){return L(g.call(arguments,1),function(n){if(n)for(var i in n)e[i]=n[i]}),e},r.pick=function(e){var n={},i=p.apply(o,g.call(arguments,1));return L(i,function(a){a in e&&(n[a]=e[a])}),n},r.omit=function(e){var n={},i=p.apply(o,g.call(arguments,1));for(var a in e)r.contains(i,a)||(n[a]=e[a]);return n},r.defaults=function(e){return L(g.call(arguments,1),function(n){if(n)for(var i in n)e[i]==null&&(e[i]=n[i])}),e},r.clone=function(e){return r.isObject(e)?r.isArray(e)?e.slice():r.extend({},e):e},r.tap=function(e,n){return n(e),e};var O=function(e,n,i,a){if(e===n)return e!==0||1/e==1/n;if(e==null||n==null)return e===n;e instanceof r&&(e=e._wrapped),n instanceof r&&(n=n._wrapped);var u=d.call(e);if(u!=d.call(n))return!1;switch(u){case"[object String]":return e==String(n);case"[object Number]":return e!=+e?n!=+n:e==0?1/e==1/n:e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object RegExp]":return e.source==n.source&&e.global==n.global&&e.multiline==n.multiline&&e.ignoreCase==n.ignoreCase}if(typeof e!="object"||typeof n!="object")return!1;for(var v=i.length;v--;)if(i[v]==e)return a[v]==n;i.push(e),a.push(n);var f=0,M=!0;if(u=="[object Array]"){if(f=e.length,M=f==n.length,M)for(;f--&&(M=O(e[f],n[f],i,a)););}else{var T=e.constructor,W=n.constructor;if(T!==W&&!(r.isFunction(T)&&T instanceof T&&r.isFunction(W)&&W instanceof W))return!1;for(var K in e)if(r.has(e,K)&&(f++,!(M=r.has(n,K)&&O(e[K],n[K],i,a))))break;if(M){for(K in n)if(r.has(n,K)&&!f--)break;M=!f}}return i.pop(),a.pop(),M};r.isEqual=function(e,n){return O(e,n,[],[])},r.isEmpty=function(e){if(e==null)return!0;if(r.isArray(e)||r.isString(e))return e.length===0;for(var n in e)if(r.has(e,n))return!1;return!0},r.isElement=function(e){return!!(e&&e.nodeType===1)},r.isArray=Z||function(e){return d.call(e)=="[object Array]"},r.isObject=function(e){return e===Object(e)},L(["Arguments","Function","String","Number","Date","RegExp"],function(e){r["is"+e]=function(n){return d.call(n)=="[object "+e+"]"}}),r.isArguments(arguments)||(r.isArguments=function(e){return!!(e&&r.has(e,"callee"))}),typeof/./!="function"&&(r.isFunction=function(e){return typeof e=="function"}),r.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},r.isNaN=function(e){return r.isNumber(e)&&e!=+e},r.isBoolean=function(e){return e===!0||e===!1||d.call(e)=="[object Boolean]"},r.isNull=function(e){return e===null},r.isUndefined=function(e){return e===void 0},r.has=function(e,n){return m.call(e,n)},r.noConflict=function(){return s._=c,this},r.identity=function(e){return e},r.times=function(e,n,i){for(var a=Array(e),u=0;u<e;u++)a[u]=n.call(i,u);return a},r.random=function(e,n){return n==null&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};P.unescape=r.invert(P.escape);var C={escape:new RegExp("["+r.keys(P.escape).join("")+"]","g"),unescape:new RegExp("("+r.keys(P.unescape).join("|")+")","g")};r.each(["escape","unescape"],function(e){r[e]=function(n){return n==null?"":(""+n).replace(C[e],function(i){return P[e][i]})}}),r.result=function(e,n){if(e==null)return null;var i=e[n];return r.isFunction(i)?i.call(e):i},r.mixin=function(e){L(r.functions(e),function(n){var i=r[n]=e[n];r.prototype[n]=function(){var a=[this._wrapped];return w.apply(a,arguments),ve.call(this,i.apply(r,a))}})};var q=0;r.uniqueId=function(e){var n=++q+"";return e?e+n:n},r.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ce=/(.)^/,G={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},le=/\\|'|\r|\n|\t|\u2028|\u2029/g;r.template=function(e,n,i){var a;i=r.defaults({},i,r.templateSettings);var u=new RegExp([(i.escape||ce).source,(i.interpolate||ce).source,(i.evaluate||ce).source].join("|")+"|$","g"),v=0,f="__p+='";e.replace(u,function(T,W,K,de,oe){return f+=e.slice(v,oe).replace(le,function(ye){return"\\"+G[ye]}),W&&(f+=`'+
((__t=(`+W+`))==null?'':_.escape(__t))+
'`),K&&(f+=`'+
((__t=(`+K+`))==null?'':__t)+
'`),de&&(f+=`';
`+de+`
__p+='`),v=oe+T.length,T}),f+=`';
`,i.variable||(f=`with(obj||{}){
`+f+`}
`),f=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+f+`return __p;
`;try{a=new Function(i.variable||"obj","_",f)}catch(T){throw T.source=f,T}if(n)return a(n,r);var M=function(T){return a.call(this,T,r)};return M.source="function("+(i.variable||"obj")+`){
`+f+"}",M},r.chain=function(e){return r(e).chain()};var ve=function(e){return this._chain?r(e).chain():e};r.mixin(r),L(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=o[e];r.prototype[e]=function(){var i=this._wrapped;return n.apply(i,arguments),(e=="shift"||e=="splice")&&i.length===0&&delete i[0],ve.call(this,i)}}),L(["concat","join","slice"],function(e){var n=o[e];r.prototype[e]=function(){return ve.call(this,n.apply(this._wrapped,arguments))}}),r.extend(r.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(He)})(Ve,Ve.exports);var at=Ve.exports;const mt=We(at),ct="MISSING_PERCENT_ERROR",ut="NEEDS_TO_BE_SIMPLIFIED_ERROR",lt="APPROXIMATED_PI_ERROR",ot="EXTRA_SYMBOLS_ERROR",ht="WRONG_CASE_ERROR",ft="WRONG_LETTER_ERROR",pt="MULTIPLICATION_SIGN_ERROR",yt={MISSING_PERCENT_ERROR:ct,NEEDS_TO_BE_SIMPLIFIED_ERROR:ut,APPROXIMATED_PI_ERROR:lt,EXTRA_SYMBOLS_ERROR:ot,WRONG_CASE_ERROR:ht,WRONG_LETTER_ERROR:ft,MULTIPLICATION_SIGN_ERROR:pt};export{yt as E,mt as _,Ye as p};
