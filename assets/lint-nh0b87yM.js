import{j as i}from"./jsx-runtime-63Ea5SlK.js";import{n as t}from"./no-important-xCWWYXQR.js";import{r as m}from"./index-6oxdNXpR.js";import{F as u}from"./index-9gkyvru-.js";import{c as h,a as s,w as d,h as p,j as b,b as v,p as f}from"./constants-NhstHO4m.js";import{I as y}from"./inline-icon-6fh0Wu1y.js";const k={path:"M6 11a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm0-9a1 1 0 0 1 1 1v4a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1z",height:12,width:12};class x extends m.Component{constructor(){super(...arguments),this.state={tooltipAbove:!0},this.getPosition=()=>{const o=u.findDOMNode(this).getBoundingClientRect();this.setState({tooltipAbove:o.top>100})},this.renderLink=o=>{const a=this.state.tooltipAbove;let n,r,l;return this.props.severity===1?(n=e.indicatorError,r="Error",l=e.publishBlockingError):this.props.severity===2?(n=e.indicatorWarning,r="Warning",l=e.warning):(n=e.indicatorGuideline,r="Recommendation",l=e.warning),i.jsxs("a",{href:`https://khanacademy.org/r/linter-rules#${this.props.ruleName}`,target:"lint-help-window",className:t.css(o),children:[i.jsx("span",{className:t.css(e.indicator,n),children:this.props.severity===1&&i.jsx(y,{...k})}),i.jsxs("div",{className:t.css(e.tooltip,a&&e.tooltipAbove),children:[this.props.message.split(`

`).map((c,g)=>i.jsxs("p",{className:t.css(e.tooltipParagraph),children:[i.jsxs("span",{className:t.css(l),children:[r,":"," "]}),c]},g)),i.jsx("div",{className:t.css(e.tail,a&&e.tailAbove)})]})]})}}componentDidMount(){this._positionTimeout=window.setTimeout(this.getPosition)}componentWillUnmount(){window.clearTimeout(this._positionTimeout)}render(){const{children:o,inline:a,blockHighlight:n,insideTable:r}=this.props;return r?a?i.jsx("span",{"data-lint-inside-table":"true",children:o}):i.jsx("div",{"data-lint-inside-table":"true",children:o}):n?i.jsxs("span",{className:t.css(e.lintContainer,e.lintContainerBlock),children:[this.renderLink(e.radioWidgetHoverTarget),i.jsx("span",{children:o})]}):a?i.jsxs("span",{className:t.css(e.lintContainer),children:[this.renderLink(e.inlineHoverTarget),i.jsx("span",{children:o})]}):i.jsxs("div",{className:t.css(e.lintContainer),children:[this.renderLink(e.hoverTarget),i.jsx("div",{children:o})]})}}const e=t.StyleSheet.create({lintContainer:{position:"relative"},lintContainerBlock:{display:"block"},hoverTarget:{position:"absolute",top:0,right:-40,display:"block",width:24,height:24,":hover > span":{backgroundColor:h},":hover div":{display:"block"},":hover ~ div":{outline:"1px solid "+s},":hover ~ div div[data-lint-inside-table]":{outline:"1px solid "+s},":hover ~ div span[data-lint-inside-table]":{backgroundColor:s,color:d}},inlineHoverTarget:{float:"right",position:"relative",marginRight:-40,display:"block",width:24,height:24,":hover > span":{backgroundColor:h},":hover div":{display:"block"},":hover ~ span":{backgroundColor:s,color:d}},radioWidgetHoverTarget:{position:"absolute",left:-40,display:"block",width:24,height:24,minWidth:264,":hover > span":{backgroundColor:h},":hover > div":{display:"block",padding:8,width:280},":hover > div > div":{left:8},":hover ~ span":{backgroundColor:s,color:d}},indicator:{alignItems:"center",borderRadius:4,color:"white",display:"flex",fontSize:12,height:8,justifyContent:"center",margin:8,width:8},indicatorError:{backgroundColor:"#be2612",borderRadius:8,height:16,width:16},indicatorWarning:{backgroundColor:"#f86700"},indicatorGuideline:{backgroundColor:"#ffbe26"},tooltip:{position:"absolute",right:-12,display:"none",zIndex:1e3,color:d,backgroundColor:p,opacity:.9,fontFamily:b,fontSize:"12px",lineHeight:"15px",width:"320px",borderRadius:"4px"},tooltipAbove:{bottom:32},tail:{position:"absolute",top:-12,right:16,width:0,height:0,borderLeft:"8px solid transparent",borderRight:"8px solid transparent",borderBottom:"12px solid "+p},tailAbove:{bottom:-12,borderBottom:"none",borderTop:"12px solid "+p,top:"auto"},tooltipParagraph:{margin:12},warning:{color:s,fontFamily:v},publishBlockingError:{color:f}});x.__docgenInfo={description:`This component renders "lint" nodes in a markdown parse tree. Lint nodes
are inserted into the tree by the Perseus linter (see
perseus-linter/src/index).

This component serves multiple purposes

1) It renders a small circle in the right margin to indicate that there
is lint on (or near) that line.

2) The area around the circle is hoverable: when the mouse moves over it
the linty content is highlighted and a tooltip is displayed that explains
what the problem is.

3) The hoverable area is also an HTML <a> tag. Clicking on it opens
a new tab and links to additional details about the specific lint rule.

The CSS required to position the circles in the right margin is tricky
and it does not always work perfectly. When lint occurs on a block element
that has a right margin (like anything blockquoted) the circle will appear
to the left of where it belongs.  And if there is more`,methods:[{name:"getPosition",docblock:null,modifiers:[],params:[],returns:null},{name:"renderLink",docblock:null,modifiers:[],params:[{name:"style",optional:!1,type:null}],returns:null}],displayName:"Lint",props:{children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The children are the linty content we're highlighting"},inline:{required:!1,tsType:{name:"boolean"},description:"Inline lint is highlighted differently than block lint."},message:{required:!0,tsType:{name:"string"},description:"This is the text that appears in the tooltip"},ruleName:{required:!0,tsType:{name:"string"},description:"This is used as the fragment id (hash) in the URL of the link"},insideTable:{required:!0,tsType:{name:"boolean"},description:"Lint warnings inside tables are handled specially"},blockHighlight:{required:!1,tsType:{name:"boolean"},description:`Should lint highlighting be rendered as a block to the left of
the lint instead of on the right gutter?`},severity:{required:!1,tsType:{name:"Severity"},description:`How important this lint message is for the editor. Severity goes
from 1 (indicating an error) to 4 (offline reporting only)`}}};export{x as L};
