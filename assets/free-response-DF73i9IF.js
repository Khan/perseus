var O=Object.defineProperty;var U=(s,t,e)=>t in s?O(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var m=(s,t,e)=>(U(s,typeof t!="symbol"?t+"":t,e),e);import{j as r}from"./jsx-runtime-BT65X5dW.js";import{V as S,T as A}from"./index-DyG-XbLr.js";import{a as M}from"./index-6t7BHVg9.js";import{P}from"./index-BMWTWptC.js";import{r as i}from"./index-C6mWTJJr.js";import{n as b}from"./no-important-DlFk8a1I.js";import{V as $,a as F}from"./index-C0xJ1VDw.js";import{a as h,e as p,s as j,f as R,c as G}from"./index-BfjDPqC2.js";import{a as H,c as q}from"./index-gdjMQqRz.js";import{w as J}from"./warning-circle-BLJ1dLdU.js";import{a as K}from"./i18n-context-bNNtSo4z.js";import{R as Q}from"./renderer-CG132AxH.js";const X=""+new URL("warning-circle-bold-Ch9vbkOR.svg",import.meta.url).href,Y=s=>({small:16,medium:24,large:48,xlarge:96})[s],Z=F("span"),V=i.forwardRef(function(t,e){const{color:u="currentColor",icon:y,size:g="small",style:a,testId:l,className:o,role:C,...f}=t,c=Y(g),I=`${o??""}`,x=ee(u,c);return r.jsx(Z,{...f,className:I,style:[k.svg,x.icon,{maskImage:`url(${y})`},a],"data-testid":l,ref:e,role:C??f["aria-label"]?"img":void 0})}),W={},ee=(s,t)=>{const e=`${s}-${t}`;if(k[e])return k[e];const u={icon:{backgroundColor:s,width:t,height:t}};return W[e]=b.StyleSheet.create(u),W[e]},k=b.StyleSheet.create({svg:{display:"inline-block",verticalAlign:"text-bottom",flexShrink:0,flexGrow:0,maskSize:"100%",maskRepeat:"no-repeat",maskPosition:"center"}});V.displayName="PhosphorIcon";const re={errorIconAriaLabel:"Error:"},te=F("span");function ne(s){const{field:t,styles:e,label:u,id:y,required:g,testId:a,description:l,errorMessage:o,labels:C=re}=s,f=i.useId(),c=y??`${f}-labeled-field`,I=`${c}-label`,x=`${c}-description`,L=`${c}-field`,v=`${c}-error`,N=!!g||!!t.props.required,z=!!o||!!t.props.error;function _(){const D=r.jsxs(te,{style:[n.textWordBreak,n.required],"aria-hidden":!0,children:[" ","*"]});return r.jsx(i.Fragment,{children:r.jsxs(H,{style:[n.textWordBreak,n.label,l?n.labelWithDescription:n.labelWithNoDescription,e==null?void 0:e.label],tag:"label",htmlFor:L,testId:a&&`${a}-label`,id:I,children:[u,N&&D]})})}function B(){return l?r.jsx(i.Fragment,{children:r.jsx(q,{style:[n.textWordBreak,n.description,e==null?void 0:e.description],testId:a&&`${a}-description`,id:x,children:l})}):null}function E(){return r.jsx(i.Fragment,{children:r.jsx($,{style:[n.errorSection,o?n.errorSectionWithContent:void 0,e==null?void 0:e.error],id:v,testId:a&&`${a}-error`,"aria-live":"assertive","aria-atomic":"true",children:o&&r.jsxs(r.Fragment,{children:[r.jsx(V,{icon:X,style:[n.errorIcon,n.error],role:"img","aria-label":C.errorIconAriaLabel}),r.jsx(q,{style:[n.textWordBreak,n.errorMessage,n.error],children:o})]})})})}function T(){return i.cloneElement(t,{id:L,"aria-describedby":[o&&v,l&&x].filter(Boolean).join(" "),required:g||t.props.required,error:z,testId:a?`${a}-field`:void 0})}return r.jsxs($,{style:e==null?void 0:e.root,children:[_(),B(),T(),E()]})}const n=b.StyleSheet.create({label:{color:h.text.primary},labelWithDescription:{paddingBlockEnd:p.size_040},labelWithNoDescription:{paddingBlockEnd:p.size_120},description:{color:h.text.secondary,paddingBlockEnd:p.size_120},errorSection:{flexDirection:"row",gap:p.size_080},errorSectionWithContent:{paddingBlockStart:p.size_120},error:{color:h.status.critical.foreground},errorIcon:{marginTop:"1px"},errorMessage:{minWidth:"0"},required:{color:h.status.critical.foreground},textWordBreak:{overflowWrap:"break-word"}});class w extends i.Component{constructor(){super(...arguments);m(this,"state",{currentValue:""});m(this,"characterCount",()=>this.state.currentValue.replace(/\n/g,"").length);m(this,"handleChange",e=>{this.setState({currentValue:e})})}getUserInput(){return{currentValue:this.state.currentValue}}isOverLimit(){return!this.props.allowUnlimitedCharacters&&this.characterCount()>this.props.characterLimit}renderCharacterCount(){if(this.props.allowUnlimitedCharacters)return null;const e=this.context.strings.characterCount({used:this.characterCount(),num:this.props.characterLimit});return r.jsx(S,{children:r.jsxs(A,{role:"status",style:[d.characterCountText,this.isOverLimit()?d.overCharacterLimit:void 0],children:[this.isOverLimit()&&r.jsx(P,{icon:J,size:"small",style:d.warningCircleIcon}),e]})})}render(){return r.jsxs(S,{style:d.container,className:"free-response",children:[r.jsx(ne,{label:r.jsx(S,{className:"free-response-question",children:r.jsx(Q,{content:this.props.question,strings:this.context.strings})}),field:r.jsx(M,{error:this.isOverLimit(),onChange:this.handleChange,placeholder:this.props.placeholder,style:d.textarea,value:this.state.currentValue}),styles:{label:d.questionLabel}}),this.renderCharacterCount()]})}}m(w,"contextType",K);const xe={name:"free-response",accessible:!0,displayName:"Free Response",widget:w,hidden:!1},d=b.StyleSheet.create({container:{gap:j.xSmall_8},characterCountText:{color:h.text.secondary,fontSize:R.size.small},overCharacterLimit:{color:G.red},questionLabel:{fontWeight:R.weight.bold},textarea:{padding:j.medium_16},warningCircleIcon:{marginInlineEnd:j.xSmall_8}});w.__docgenInfo={description:"",methods:[{name:"characterCount",docblock:null,modifiers:[],params:[],returns:null},{name:"getUserInput",docblock:null,modifiers:[],params:[],returns:{type:{name:"signature",type:"object",raw:`{
    currentValue: string;
}`,signature:{properties:[{key:"currentValue",value:{name:"string",required:!0}}]}}}},{name:"handleChange",docblock:null,modifiers:[],params:[{name:"newValue",optional:!1,type:{name:"string"}}],returns:null},{name:"isOverLimit",docblock:null,modifiers:[],params:[],returns:null},{name:"renderCharacterCount",docblock:null,modifiers:[],params:[],returns:{type:{name:"ReactReactNode",raw:"React.ReactNode"}}}],displayName:"FreeResponse"};export{w as F,ne as L,xe as a};
