var f=Object.defineProperty;var C=(t,i,e)=>i in t?f(t,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[i]=e;var n=(t,i,e)=>(C(t,typeof i!="symbol"?i+"":i,e),e);import{j as r}from"./jsx-runtime-BT65X5dW.js";import"./index-default-BcKQpA1a.js";import"./index-DUN-iEmu.js";import"./all-widgets-BoETMdvb.js";import{V as l}from"./index-DyG-XbLr.js";import"./answer-choices-DpvF_9Vj.js";import{H as p}from"./index-gdjMQqRz.js";import{r as x}from"./index-C6mWTJJr.js";import"./index-B1Gws05u.js";import"./i18n-context-BlpvwUdd.js";import"./perseus-api-fTM3z0tF.js";import"./renderer-BB4EQnCf.js";import{L as d}from"./free-response-DMGBgdZk.js";import"./index-D7h-teXI.js";import"./jquery-CkHB0_Mt.js";import"./dependencies-BsVPGK1s.js";import{U as y}from"./util-CKVKlVyf.js";import"./zoomable-tex-Dy-nElJT.js";import"./svg-image-gox5qzdo.js";import{n as b}from"./no-important-DlFk8a1I.js";import"./number-input-CEa3MK3a.js";import"./simple-keypad-input-CDUGLTAA.js";import"./text-input-CDDWJkQJ.js";import{B as u}from"./phet-simulation-BaMZDrAC.js";import"./sortable-BLce0cK5.js";import"./fixed-to-responsive-CTsII9Xx.js";import"./math-input-Cd7-V_Wb.js";import"./video-transcript-link-RsYwKknS.js";import"./item-version-hJ_o7_Ne.js";import"./article-renderer-qZtaJLyi.js";import"./server-item-renderer-C5q_V1Ru.js";import"./hints-renderer-oqMA7Zfl.js";import"./base-radio-Dfrd0WvF.js";import"./button-group-B24xCvY2.js";import"./hud-CP_ly967.js";import"./icon-BfyZ3piz.js";import"./index-DsINhqRJ.js";import"./inline-icon-AJRwMA4Z.js";import"./multi-button-group-U6RQwTwG.js";import"./range-input-BiJ-VE74.js";import"./text-list-editor-C2gddtxS.js";import"./index-Dd-cahjY.js";import{C as w}from"./index-6t7BHVg9.js";import{s as m,a as j}from"./index-BfjDPqC2.js";import{p as v}from"./plus-circle-DsgEZe2H.js";const q={allowUnlimitedCharacters:!1,characterLimit:500,placeholder:"Please provide response here",question:"",scoringCriteria:[{text:""}]},k={defaultWidgetOptions:q},L=""+new URL("trash-Cncdq4KR.svg",import.meta.url).href;class c extends x.Component{constructor(){super(...arguments);n(this,"serialize",()=>({allowUnlimitedCharacters:this.props.allowUnlimitedCharacters,characterLimit:this.props.characterLimit,placeholder:this.props.placeholder,question:this.props.question,scoringCriteria:this.props.scoringCriteria}));n(this,"getSaveWarnings",()=>{const e=[];return this.props.question||e.push("The question is empty"),this.props.question.match(y.rWidgetRule)!=null&&e.push("The question contains a widget"),e});n(this,"handleUpdateCharacterLimit",e=>{const a=parseInt(e.target.value);isNaN(a)||this.props.onChange({characterLimit:Math.max(1,a)})});n(this,"handleUpdateCriterion",(e,a)=>{const s=this.props.scoringCriteria.map((h,g)=>g===e?a:h);this.props.onChange({scoringCriteria:s})});n(this,"handleDeleteCriterion",e=>{this.props.onChange({scoringCriteria:this.props.scoringCriteria.filter((a,s)=>s!==e)})});n(this,"handleAddCriterion",()=>{this.props.onChange({scoringCriteria:[...this.props.scoringCriteria,{text:""}]})});n(this,"renderCriteriaList",()=>{const e=this.props.scoringCriteria.length>1;return this.props.scoringCriteria.map((a,s)=>r.jsx(U,{criterion:a,index:s,isDeletable:e,onChange:this.handleUpdateCriterion,onDelete:this.handleDeleteCriterion},s))})}render(){return r.jsxs(l,{children:[r.jsx(d,{label:r.jsx(p,{children:"Question"}),field:r.jsx("textarea",{value:this.props.question,onChange:e=>this.props.onChange({question:e.target.value})}),styles:{root:o.labeledInputField}}),r.jsx(d,{label:r.jsx(p,{children:"Placeholder"}),field:r.jsx("textarea",{value:this.props.placeholder,onChange:e=>this.props.onChange({placeholder:e.target.value})}),styles:{root:o.labeledInputField}}),r.jsx(d,{label:r.jsx(p,{children:"Allow unlimited characters"}),field:r.jsx(w,{checked:this.props.allowUnlimitedCharacters,onChange:e=>this.props.onChange({allowUnlimitedCharacters:e})}),styles:{root:o.labeledInputField}}),!this.props.allowUnlimitedCharacters&&r.jsx(d,{label:r.jsx(p,{children:"Character limit"}),field:r.jsx("input",{type:"number",min:1,value:this.props.characterLimit,onChange:this.handleUpdateCharacterLimit}),styles:{root:o.labeledInputField}}),r.jsxs(l,{children:[r.jsx(p,{children:"Scoring criteria"}),r.jsx(l,{style:o.criteriaList,children:this.renderCriteriaList()}),r.jsx(l,{children:r.jsx(u,{onClick:this.handleAddCriterion,startIcon:v,children:"Add an item"})})]})]})}}n(c,"defaultProps",k.defaultWidgetOptions),n(c,"widgetName","free-response");const U=function(t){return r.jsxs(l,{style:o.criterionContainer,children:[r.jsx("textarea",{"aria-label":`Criterion ${t.index+1}`,onChange:i=>t.onChange(t.index,{text:i.target.value}),value:t.criterion.text}),t.isDeletable&&r.jsx(l,{style:o.deleteButtonContainer,children:r.jsx(u,{"aria-label":`Delete criterion ${t.index+1}`,actionType:"destructive",disabled:!t.isDeletable,kind:"tertiary",onClick:()=>t.onDelete(t.index),size:"small",startIcon:L,children:"Delete"})})]})},o=b.StyleSheet.create({criteriaList:{gap:m.small_12},criterionContainer:{paddingTop:m.xSmall_8,paddingBottom:m.xSmall_8,borderBottom:`1px solid ${j.border.primary}`,":last-child":{borderBottom:"none"}},deleteButtonContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-end"},labeledInputField:{paddingBottom:m.large_24}});c.__docgenInfo={description:"",methods:[{name:"serialize",docblock:null,modifiers:[],params:[],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"handleUpdateCharacterLimit",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:null}],returns:null},{name:"handleUpdateCriterion",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:{name:"number"}},{name:"criterion",optional:!1,type:{name:"signature",type:"object",raw:`{
    // An English-language description of how to score the response for this criterion.
    text: string;
}`,signature:{properties:[{key:"text",value:{name:"string",required:!0}}]},alias:"PerseusFreeResponseWidgetScoringCriterion"}}],returns:null},{name:"handleDeleteCriterion",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:{name:"number"}}],returns:null},{name:"handleAddCriterion",docblock:null,modifiers:[],params:[],returns:null},{name:"renderCriteriaList",docblock:null,modifiers:[],params:[],returns:null}],displayName:"FreeResponseEditor",props:{allowUnlimitedCharacters:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},characterLimit:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"500",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"Please provide response here"',computed:!1}},question:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},scoringCriteria:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"signature",type:"object",raw:`{
    // An English-language description of how to score the response for this criterion.
    text: string;
}`,signature:{properties:[{key:"text",value:{name:"string",required:!0}}]}}],raw:"ReadonlyArray<PerseusFreeResponseWidgetScoringCriterion>"},description:"",defaultValue:{value:`[
    {
        text: "",
    },
]`,computed:!1}},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(options: Partial<PerseusFreeResponseWidgetOptions>) => void",signature:{arguments:[{type:{name:"Partial",elements:[{name:"signature",type:"object",raw:`{
    // Whether to allow the user to enter an unlimited number of characters.
    allowUnlimitedCharacters: boolean;
    // The maximum number of characters that the user can enter.
    characterLimit: number;
    // The placeholder text that will be displayed to the user in the text input field.
    placeholder: string;
    // The question text that will be displayed to the user.
    question: string;
    // A list of scoring criteria for the free response question. This is a list
    // of things the answer should contain to be considered correct.
    scoringCriteria: ReadonlyArray<PerseusFreeResponseWidgetScoringCriterion>;
}`,signature:{properties:[{key:"allowUnlimitedCharacters",value:{name:"boolean",required:!0}},{key:"characterLimit",value:{name:"number",required:!0}},{key:"placeholder",value:{name:"string",required:!0}},{key:"question",value:{name:"string",required:!0}},{key:"scoringCriteria",value:{name:"ReadonlyArray",elements:[{name:"signature",type:"object",raw:`{
    // An English-language description of how to score the response for this criterion.
    text: string;
}`,signature:{properties:[{key:"text",value:{name:"string",required:!0}}]}}],raw:"ReadonlyArray<PerseusFreeResponseWidgetScoringCriterion>",required:!0}}]}}],raw:"Partial<PerseusFreeResponseWidgetOptions>"},name:"options"}],return:{name:"void"}}},description:""}}};export{c as F};
