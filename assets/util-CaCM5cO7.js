var Ve=Object.defineProperty;var ze=(e,t,n)=>t in e?Ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _=(e,t,n)=>(ze(e,typeof t!="symbol"?t+"":t,n),n);import{d as Ue,s as Oe,k as be,m as Ge,w as qe,n as je,t as Xe,c as z,e as He,o as x,j as O,p as C,q as U}from"./index-BUODOpkA.js";import{_ as d}from"./index-default-BcKQpA1a.js";import{P as E,E as P}from"./perseus-error-CSETqePQ.js";import{$ as D}from"./jquery-CkHB0_Mt.js";import{g as Ye}from"./get-decimal-separator-B2cicA45.js";function G(e){const t=[1,1];return e.forEach((n,r)=>{let s=0;n.forEach((i,o)=>{i!=null&&i.toString().length&&(s=o+1)}),t[1]=Math.max(t[1],s),s>0&&(t[0]=Math.max(t[0],r+1))}),t}function Ke(){return/\[\[☃ ([A-Za-z0-9- ]+)\]\]/g}function Be(e){const t=[],n=Ke();let r=n.exec(e);for(;r!==null;)t.push(r[1]),r=n.exec(e);return t}const se=function(e,t,n={}){const s={...{form:!1,simplify:!1},...n},i=e.sameVars(t);if(!i.equal){let o;return i.equalIgnoringCase?o="Check your variables; one or more are using the wrong case (upper or lower).":o="Check your variables; you may have used the wrong letter for one or more of them.",{equal:!1,wrongVariableCase:i.equalIgnoringCase,wrongVariableNames:!i.equalIgnoringCase,message:o}}return e.compare(t)?s.form&&!e.sameForm(t)?{equal:!1,message:"Your answer is not in the correct form."}:s.simplify&&!e.isSimplified()?{equal:!1,message:"Your answer is not fully expanded and simplified."}:{equal:!0,message:null}:{equal:!1,message:null}},hi=function(e,t){return d.object(d.map(e,function(n,r){return[r,n[t]]}))},Qe=function(e,t){const n={};return Object.keys(e).forEach(r=>{n[r]=t(e[r],r)}),n};function Je(e){return{items:e.items,categories:e.categories,randomizeItems:e.randomizeItems,static:e.static}}const Ze={items:[],categories:[],values:[],randomizeItems:!1},et={name:"categorizer",defaultWidgetOptions:Ze,getPublicWidgetOptions:Je};function tt(e){return e}const nt=400,rt={programID:"",programType:null,settings:[{name:"",value:""}],showEditor:!1,showButtons:!1,height:nt},st={name:"cs-program",defaultWidgetOptions:rt,supportedAlignments:["block","full-width"],getPublicWidgetOptions:tt},it={togglePrompt:"",definition:""},ot={name:"definition",defaultWidgetOptions:it,defaultAlignment:"inline"};function at(e){return{choices:e.choices.map(t=>({content:t.content})),placeholder:e.placeholder,static:e.static,visibleLabel:e.visibleLabel,ariaLabel:e.ariaLabel}}const ct={placeholder:"",choices:[{content:"",correct:!1}]},lt={name:"dropdown",defaultWidgetOptions:ct,defaultAlignment:"inline-block",getPublicWidgetOptions:at},ut={showPrompt:"Explain",hidePrompt:"Hide explanation",explanation:`explanation goes here

more explanation`,widgets:{}},ft={name:"explanation",defaultWidgetOptions:ut,defaultAlignment:"inline"},dt={major:2,minor:0},gt={2:e=>({times:e.times,buttonSets:e.buttonSets,functions:e.functions,buttonsVisible:e.buttonsVisible,visibleLabel:e.visibleLabel,ariaLabel:e.ariaLabel,answerForms:e.answerForms,extraKeys:e.extraKeys||Ue(e)}),1:e=>({times:e.times,buttonSets:e.buttonSets,functions:e.functions,buttonsVisible:e.buttonsVisible,visibleLabel:e.visibleLabel,ariaLabel:e.ariaLabel,extraKeys:e.extraKeys,answerForms:[{considered:"correct",form:e.form,simplify:e.simplify,value:e.value}]})},pt={answerForms:[],times:!1,buttonSets:["basic"],functions:["f","g","h"]};function mt(e){return{buttonSets:e.buttonSets,functions:e.functions,times:e.times,visibleLabel:e.visibleLabel,ariaLabel:e.ariaLabel,buttonsVisible:e.buttonsVisible,extraKeys:e.extraKeys}}const ht={name:"expression",version:dt,widgetOptionsUpgrades:gt,defaultWidgetOptions:pt,defaultAlignment:"inline-block",getPublicWidgetOptions:mt},yt={title:"",content:"",widgets:{},images:{},hint:null},Ot={name:"graded-group",defaultWidgetOptions:yt},bt={gradedGroups:[]},wt={name:"graded-group-set",defaultWidgetOptions:bt};function Rt(e){const{correct:t,...n}=e;return n}const vt={graph:{labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:{url:null},markings:"graph",rulerLabel:"",rulerTicks:10,valid:!0,showTooltips:!1},correct:{type:"linear",coords:null},availableTypes:["linear"]},Wt={name:"grapher",defaultWidgetOptions:vt,getPublicWidgetOptions:Rt};class we{constructor(t="Registry"){_(this,"name");_(this,"contents",{});_(this,"anythingRegistered",!1);this.name=t}throwIfUnregistered(){if(!this.anythingRegistered)throw new Error(`${this.name} accessed before initialization!`)}has(t){return this.throwIfUnregistered(),Object.prototype.hasOwnProperty.call(this.contents,t)}get(t){return this.throwIfUnregistered(),this.contents[t]}keys(){return this.throwIfUnregistered(),Object.keys(this.contents)}entries(){return this.throwIfUnregistered(),Object.entries(this.contents)}set(t,n){this.anythingRegistered=!0,this.contents[t]=n}}function Et(e){return e}const Pt={url:"",settings:[{name:"",value:""}],width:"400",height:"400",allowFullScreen:!1,allowTopNavigation:!1},Mt={name:"iframe",defaultWidgetOptions:Pt,getPublicWidgetOptions:Et},St={title:"",range:[[0,10],[0,10]],box:[400,400],backgroundImage:{url:null,width:0,height:0},labels:[],alt:"",caption:""},Tt={name:"image",defaultWidgetOptions:St,supportedAlignments:["block","full-width"],defaultAlignment:"block"};function xt(e){const{value:t,...n}=e;return n}const Lt={value:0,simplify:"required",size:"normal",inexact:!1,maxError:.1,answerType:"number",rightAlign:!1},_t={name:"input-number",defaultWidgetOptions:Lt,defaultAlignment:"inline-block",getPublicWidgetOptions:xt},Ct={graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],tickStep:[1,1],gridStep:[1,1],markings:"graph"},elements:[]},Nt={name:"interaction",defaultWidgetOptions:Ct};function Ft(e){const{correct:t,...n}=e;return n}const $t={labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],backgroundImage:{url:null},markings:"graph",showTooltips:!1,showProtractor:!1,graph:{type:"linear"},correct:{type:"linear",coords:null}},It={name:"interactive-graph",defaultWidgetOptions:$t,getPublicWidgetOptions:Ft};function At(e){return{...e,markers:e.markers.map(kt)}}function kt(e){const{answers:t,...n}=e;return n}const Dt={choices:[],imageAlt:"",imageUrl:"",imageWidth:0,imageHeight:0,markers:[],multipleAnswers:!1,hideChoicesFromInstructions:!1},Vt={name:"label-image",defaultWidgetOptions:Dt,getPublicWidgetOptions:At},yi=e=>{const t=Oe(e.problemNum);return{left:e.orderMatters?oe(e.left,t):e.left,right:oe(e.right,t)}};function zt(e){return{...e,left:e.orderMatters?ie(e.left):e.left,right:ie(e.right)}}function ie([e,...t]){return[e,...t.sort()]}function oe(e,t){function n(r){return r[0]!==e[0]}return be(e,t,n)}const Ut={left:["$x$","$y$","$z$"],right:["$1$","$2$","$3$"],labels:["test","label"],orderMatters:!1,padding:!0},Gt={name:"matcher",defaultWidgetOptions:Ut,getPublicWidgetOptions:zt};function qt(e){const{answers:t,...n}=e;return n}const jt={matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0]},Xt={name:"matrix",defaultWidgetOptions:jt,getPublicWidgetOptions:qt},Ht={major:1,minor:0},Yt={1:e=>{const{imageUrl:t,imageTop:n,imageLeft:r,...s}=e;return{...s,image:{url:t,top:n,left:r}}}},Kt={box:[480,480],image:{},showProtractor:!0,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10},Bt={name:"measurer",version:Ht,widgetOptionsUpgrades:Yt,defaultWidgetOptions:Kt};function Qt(e){const{correctX:t,correctRel:n,...r}=e;return r}const Jt={range:[0,10],labelRange:[null,null],labelStyle:"decimal",labelTicks:!0,divisionRange:[1,12],numDivisions:5,snapDivisions:2,tickStep:null,correctRel:"eq",correctX:null,initialX:null,showTooltips:!1},Zt={name:"number-line",defaultWidgetOptions:Jt,getPublicWidgetOptions:Qt};function en(e){const{answerForms:t,simplify:n,status:r}=e;return{answerForms:t,simplify:n,status:r}}function tn(e){const{answers:t,...n}=e;return{...n,answers:t.map(en)}}const nn={answers:[{value:null,status:"correct",message:"",simplify:"required",answerForms:[],strict:!1,maxError:null}],size:"normal",coefficient:!1,labelText:"",rightAlign:!1},rn={name:"numeric-input",defaultWidgetOptions:nn,defaultAlignment:"inline-block",getPublicWidgetOptions:tn};function sn(e){const{options:t,height:n,layout:r}=e;return{options:t,height:n,layout:r}}const on={correctOptions:[{content:"$x$"}],otherOptions:[{content:"$y$"}],height:"normal",layout:"horizontal"},an={name:"orderer",defaultWidgetOptions:on,getPublicWidgetOptions:sn},cn={passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0},ln={name:"passage",defaultWidgetOptions:cn},un={major:0,minor:1},fn={passageNumber:1,referenceNumber:1,summaryText:""},dn={name:"passage-ref",version:un,defaultWidgetOptions:fn,defaultAlignment:"inline"},gn={content:""},pn={name:"passage-ref-target",defaultWidgetOptions:gn,defaultAlignment:"inline"},mn={url:"",description:""},hn={name:"phet-simulation",defaultWidgetOptions:mn};function yn(e){const{correct:t,...n}=e;return n}const On={scaleY:1,maxY:10,snapsPerLine:2,correct:[1],starting:[1],type:"bar",labels:["",""],categories:[""],picSize:30,picBoxHeight:36,plotDimensions:[275,200],labelInterval:1,picUrl:null},bn={name:"plotter",defaultWidgetOptions:On,getPublicWidgetOptions:yn},wn={programID:"",height:400},Rn={name:"python-program",defaultWidgetOptions:wn};function vn(e){const{content:t,isNoneOfTheAbove:n,widgets:r}=e;return{content:t,isNoneOfTheAbove:n,widgets:r}}function Wn(e,t,n){return e&&t&&n}function En(e){const{numCorrect:t,choices:n,multipleSelect:r,countChoices:s}=e;return{...e,numCorrect:Wn(r,s,t)?t:void 0,choices:n.map(vn)}}const Pn={name:"radio",version:je,widgetOptionsUpgrades:qe,defaultWidgetOptions:Ge,getPublicWidgetOptions:En};function Mn(e){return{...e,correct:Sn(e.correct)}}function Oi(e){const{correct:t,problemNum:n}=e,r=Oe(n??0);return Tn(t,r)}function Sn([e,...t]){return[e,...t.sort()]}function Tn(e,t){function n(r){return r[0]!==e[0]}return be(e,t,n)}const xn={correct:["$x$","$y$","$z$"],layout:"horizontal",padding:!0},Ln={name:"sorter",defaultWidgetOptions:xn,getPublicWidgetOptions:Mn},_n={location:""},Cn={name:"video",defaultWidgetOptions:_n,supportedAlignments:["block","float-left","float-right","full-width"],defaultAlignment:"block"},S=new we("Core widget registry");function Nn(e,t){S.set(e,t)}function Fn(e){return!!S.get(e)}function $n(e){const t=S.get(e);return(t==null?void 0:t.version)||{major:0,minor:0}}const In=e=>{var t;return((t=S.get(e))==null?void 0:t.getPublicWidgetOptions)??(n=>n)};function An(e){const t=S.get(e);return(t==null?void 0:t.widgetOptionsUpgrades)||{}}function kn(e){const t=S.get(e);return(t==null?void 0:t.defaultWidgetOptions)||{}}const Dn=e=>{var n;const t=S.get(e);return(n=t==null?void 0:t.supportedAlignments)!=null&&n[0]?t==null?void 0:t.supportedAlignments:["default"]},bi=e=>{const t=S.get(e);return t!=null&&t.defaultAlignment?t.defaultAlignment:"block"};function wi(){[et,st,ot,lt,ft,ht,Ot,wt,Wt,jn,Mt,Tt,_t,Nt,It,Vt,Gt,Xt,Bt,Zt,rn,an,ln,dn,pn,hn,bn,Rn,Pn,Ln,Xe,Cn].forEach(t=>{Nn(t.name,t)})}const Vn=!1,zn=e=>{var c;const t=e.type;if(!d.isString(t))throw new E("widget type must be a string, but was: "+t,P.Internal);if(!Fn(t))return e;const n=e.version||{major:0,minor:0},r=$n(t);if(n.major>r.major||n.major===r.major&&n.minor>r.minor)return e;let s=d.clone(e.options)||{};const i=An(t);if(d.keys(s).length!==0)for(let u=n.major+1;u<=r.major;u++)if(i[String(u)]!=null)s=i[String(u)](s);else throw new E("No upgrade found for widget. Cannot render.",P.Internal,{metadata:{type:t,fromMajorVersion:u-1,toMajorVersion:u,oldWidgetInfo:JSON.stringify(e)}});s={...kn(t),...s};let a=e.alignment;if((a==null||a==="default")&&(a=(c=Dn(t))==null?void 0:c[0],!a))throw new E("No default alignment found when upgrading widget",P.Internal,{metadata:{widgetType:t}});let l=e.static;return l==null&&(l=Vn),{...e,version:r,graded:e.graded!=null?e.graded:!0,alignment:a,static:l,options:s}};function Re(e){return Qe(e,(t,n)=>{if(!t.type||!t.alignment){const r={};t.type||(r.type=n.split(" ")[0]),t.alignment||(r.alignment="default"),t={...t,...r}}return zn(t)})}function Un(e){const n=z(e).widgets??{},r=Re(n),s={};for(const[i,o]of Object.entries(r)){const a=In(o.type);s[i]={...o,options:a(o.options)}}return{...e,widgets:s}}function Gn(e){return Un(e)}const qn={content:"",widgets:{},images:{}},jn={name:"group",defaultWidgetOptions:qn,getPublicWidgetOptions:Gn},Xn="@khanacademy/kmath",Hn="__lib_version__";He(Xn,Hn);const ve=1e-9,Yn=Math.pow(2,-42);function Kn(e){return d.isNumber(e)&&!d.isNaN(e)}function M(e,t,n){return e==null||t==null?e===t:e===t?!0:(n==null&&(n=ve),Math.abs(e-t)<n)}function Ri(e,t){return M(e,0,t)?0:Math.abs(e)/e}function Bn(e,t){return M(Math.round(e),e,t)}function vi(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}function Qn(e,t){return Math.round(e/t)*t}function Jn(e,t){return Math.floor(e/t)*t}function Zn(e,t){return Math.ceil(e/t)*t}function ae(e,t=Yn,n=1e3){let r=[1,0],s=[0,1],i=Math.floor(e),o=e-i;for(;s[0]<=n;){if(M(r[0]/s[0],e,t))return[r[0],s[0]];r=[i*r[0]+r[1],r[0]],s=[i*s[0]+s[1],s[0]],i=Math.floor(1/o),o=1/o-i}return[e,1]}function We(e){return e.reduce((t,n)=>t+n,0)}function er(e){return e.reduce((t,n)=>t*n,1)}function I(...e){const t=Math.min(...e.map(r=>r.length)),n=[];for(let r=0;r<t;r++)n.push(e.map(s=>s[r]));return n}function tr(e,t){return!Array.isArray(e)||t!==void 0&&e.length!==t?!1:e.every(Kn)}function Wi(e){return Q(e,1/K(e))}function K(e){return Math.sqrt(q(e,e))}function q(e,t){const r=I(e,t).map(er);return We(r)}function B(...e){return I(...e).map(We)}function N(e,t){return I(e,t).map(n=>n[0]-n[1])}function Ei(e){return e.map(t=>-t)}function Q(e,t){return e.map(n=>n*t)}function nr(e,t,n){return e.length===t.length&&I(e,t).every(r=>M(r[0],r[1],n))}function rr(e){const t=K(e);let n=Math.atan2(e[1],e[0]);return n<0&&(n+=2*Math.PI),[t,n]}function sr(e){const t=rr(e);return[t[0],t[1]*180/Math.PI]}function ir(e,t=0){return[e*Math.cos(t),e*Math.sin(t)]}function or(e,t=0){return ir(e,t*Math.PI/180)}function Pi(e,t){const n=sr(e),r=n[1]+t;return or(n[0],r)}function ar(e,t){const n=q(e,t)/q(t,t);return Q(t,n)}function cr(e,t){return e.map((n,r)=>Qn(n,t[r]||t))}function lr(e,t){return e.map((n,r)=>Jn(n,t[r]||t))}function ur(e,t){return e.map((n,r)=>Zn(n,t[r]||t))}function Mi(e,t){return K(N(e,t))}function Si(e,t){const n=N(t[1],t[0]),r=N(e,t[0]),s=ar(r,n),i=N(Q(s,2),r);return B(t[0],i)}const Ti=tr,xi=B,Li=B,fr=nr,_i=cr,Ci=lr,Ni=ur,m={cleanMath:function(e){return typeof e=="string"?e.replace(/\+\s*-/g,"- ").replace(/-\s*-/g,"+ ").replace(/\^1/g,""):e},bound:function(e){return e===0?e:e<0?-m.bound(-e):Math.max(1e-6,Math.min(e,1e20))},factorial:function(e){return e<=1?e:e*m.factorial(e-1)},getGCD:function(e,t){if(arguments.length>2){const r=[].slice.call(arguments,1);return m.getGCD(e,m.getGCD(...r))}let n;for(e=Math.abs(e),t=Math.abs(t);t;)n=e%t,e=t,t=n;return e},getLCM:function(e,t){if(arguments.length>2){const n=[].slice.call(arguments,1);return m.getLCM(e,m.getLCM(...n))}return Math.abs(e*t)/m.getGCD(e,t)},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],isPrime:function(e){if(e<=1)return!1;if(e<101)return!!D.grep(m.primes,function(t,n){return Math.abs(t-e)<=.5}).length;if(e<=1||e>2&&e%2===0)return!1;for(let t=3,n=Math.sqrt(e);t<=n;t+=2)if(e%t===0)return!1;return!0},getPrimeFactorization:function(e){if(e===1)return[];if(m.isPrime(e))return[e];const t=Math.sqrt(e);for(let n=2;n<=t;n++)if(e%n===0)return D.merge(m.getPrimeFactorization(n),m.getPrimeFactorization(e/n))},roundToNearest:function(e,t){return Math.round(t/e)*e},roundTo:function(e,t){const n=Math.pow(10,e).toFixed(5);return Math.round((t*n).toFixed(5))/n},toFixedApprox:function(e,t){const n=e.toFixed(t);return M(+n,e)?n:"\\approx "+n},roundToApprox:function(e,t){const n=m.roundTo(t,e);return M(n,e)?String(n):m.toFixedApprox(e,t)},toFraction:function(e,t){if(t==null&&(t=Math.pow(2,-46)),e<0||e>1){let l=e%1;l+=l<0?1:0;const c=m.toFraction(l,t);return c[0]+=Math.round(e-l)*c[1],c}if(Math.abs(Math.round(Number(e))-e)<=t)return[Math.round(e),1];let n=0,r=1,s=1,i=1,o=1,a=2;for(;;){if(Math.abs(Number(o/a)-e)<=t)return[o,a];o/a<e?(n=o,r=a):(s=o,i=a),o=n+s,a=r+i}},getNumericFormat:function(e){if(e=D.trim(e),e=e.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1"),e.match(/^[+-]?\d+$/))return"integer";if(e.match(/^[+-]?\d+\s+\d+\s*\/\s*\d+$/))return"mixed";const t=e.match(/^[+-]?(\d+)\s*\/\s*(\d+)$/);return t?parseFloat(t[1])>parseFloat(t[2])?"improper":"proper":e.replace(/[,. ]/g,"").match(/^\d+$/)?"decimal":e.match(/(pi?|\u03c0|t(?:au)?|\u03c4|pau)/)?"pi":null},toNumericString:function(e,t){if(e==null)return"";if(e===0)return"0";if(t==="percent")return e*100+"%";if(t==="pi"){const n=ae(e/Math.PI),r=Math.abs(n[0]),s=n[1];if(Bn(r))return(e<0?"-":"")+(r===1?"":r)+"π"+(s===1?"":"/"+s)}if(d(["proper","improper","mixed","fraction"]).contains(t)){const n=ae(e),r=Math.abs(n[0]),s=n[1],i=e<0?"-":"";if(s===1)return i+r;if(t==="mixed"){const o=r%s,a=(r-o)/s;return i+(a?a+" ":"")+o+"/"+s}return i+r+"/"+s}return String(e)}};function dr(e){return e.reduce(gr,0)}function gr(e,t){return e+t}function J(e){return x(e,0)?0:e>0?1:-1}function A(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(n[0]-e[0])*(t[1]-e[1])}function pr(e,t,n){return x(A(e,t,n),0)}function mr(e,t,n){return n[0]<=Math.max(e[0],t[0])&&n[0]>=Math.min(e[0],t[0])&&n[1]<=Math.max(e[1],t[1])&&n[1]>=Math.min(e[1],t[1])}function Ee(e,t){const n=[[e[0],e[1],t[0]],[e[0],e[1],t[1]],[t[0],t[1],e[0]],[t[0],t[1],e[1]]],r=d.map(n,function(s){return J(A(...s))});if(r[0]!==r[1]&&r[2]!==r[3])return!0;for(let s=0;s<4;s++)if(r[s]===0&&mr(...n[s]))return!0;return!1}function hr(e){for(let t=0;t<e.length;t++)for(let n=t+1;n<e.length;n++){if(fr(e[t],e[n]))return!0;const r=(t+1)%e.length,s=(n+1)%e.length;if(r===n||s===t)continue;const i=[e[t],e[r]],o=[e[n],e[s]];if(Ee(i,o))return!0}return!1}function F(e,t){return d.map(d.zip(e,t),function(n){return n[0]-n[1]})}function yr(e){return[-e[0],-e[1]]}function Pe(e){const t=d.zip(e,e.slice(1).concat(e.slice(0,1))),n=d.map(t,function(r){const s=r[0],i=r[1];return(i[0]-s[0])*(i[1]+s[1])});return dr(n)>0}function $(e){return Math.sqrt(d.reduce(e,function(t,n){return t+Math.pow(n,2)},0))}function Or(e,t){return d.reduce(d.zip(e,t),function(n,r){return n+r[0]*r[1]},0)}function ce(e){return d.zip(e,T(e)).map(function(n){return $(F(...n))})}function j(e){const t=d.zip(T(e,-1),e,T(e,1)),n=d.map(t,function(s){const i=F(s[1],s[0]),o=F(s[2],s[1]),a=Math.acos(Or(i,o)/($(i)*$(o)));return J(A(...s))>0?a:-a}),r=d.reduce(n,function(s,i){return s+i},0);return d.map(n,function(s){return r>0?Math.PI-s:Math.PI+s})}function br(e,t,n){if(e.length!==t.length)return!1;const r=e.length,s=j(e),i=j(t),o=ce(e),a=ce(t);for(let l=0;l<2*r;l++){let c=i.slice(),u=a.slice();if(l>=r&&(c.reverse(),u.reverse(),u=T(u,1)),c=T(c,l),u=T(u,l),O(s,c)){const f=d.zip(o,u),p=d.map(f,function(v){return v[0]/v[1]}),h=d.all(p,function(v){return x(p[0],v)}),L=d.all(f,function(v){return M(v[0],v[1],n)});if(h&&L)return!0}}return!1}function wr(e,t,n){return Math.acos((e*e+t*t-n*n)/(2*e*t))*180/Math.PI}function Rr([e,t,n,r]){e<0&&(e*=-1,t*=-1,n*=-1);const s=2*Math.PI;for(t<0&&(t*=-1,n*=-1,n+=s/2);n>0;)n-=s;for(;n<0;)n+=s;return[e,t,n,r]}function T(e,t){return t=typeof t>"u"?1:t%e.length,e.slice(t).concat(e.slice(0,t))}function vr(e,t){if(x(e[0],t[0]))return"x = "+e[0].toFixed(3);const n=(t[1]-e[1])/(t[0]-e[0]),r=e[1]-n*e[0];return"y = "+n.toFixed(3)+"x + "+r.toFixed(3)}function Me(e,t){const n=e[0][0],r=e[0][1],s=e[1][0],i=e[1][1],o=t[0][0],a=t[0][1],l=t[1][0],c=t[1][1],u=(n-s)*(a-c)-(r-i)*(o-l);if(Math.abs(u)<1e-9)return null;const f=((n*i-r*s)*(o-l)-(n-s)*(o*c-a*l))/u,p=((n*i-r*s)*(a-c)-(r-i)*(o*c-a*l))/u;return[f,p]}function Wr(e,t){const n=Me(e,t);if(n===null)return"Lines are parallel";const[r,s]=n;return"Intersection: ("+r.toFixed(3)+", "+s.toFixed(3)+")"}const Er=Object.freeze(Object.defineProperty({__proto__:null,angleMeasures:j,canonicalSineCoefficients:Rr,ccw:A,clockwise:Pe,collinear:pr,getLineEquation:vr,getLineIntersection:Me,getLineIntersectionString:Wr,intersects:Ee,lawOfCosines:wr,magnitude:$,polygonSidesIntersect:hr,reverseVector:yr,rotate:T,sign:J,similar:br,vector:F},Symbol.toStringTag,{value:"Module"}));function Pr(e){return e/180*Math.PI}function Mr(e){const t=e/Math.PI*180;return Number(t.toPrecision(15))}function Sr([e,t]){return Math.atan2(t,e)*180/Math.PI}function Tr(e,t){return typeof e=="number"&&(e=[e,e]),t=t*Math.PI/180,[e[0]*Math.cos(t),e[1]*Math.sin(t)]}const X=(e,t)=>{const n=e[0]-t[0],r=e[1]-t[1];return!n&&!r?0:(180+Math.atan2(-r,-n)*180/Math.PI+360)%360},xr=(e,t=!1)=>{const n=[...e],i=!Pe([n[0],n[2],n[1]])||t?n.reverse():n,o=X(i[0],i[1]),a=X(i[2],i[1]);return(o+360-a)%360},Lr=Object.freeze(Object.defineProperty({__proto__:null,calculateAngleInDegrees:Sr,convertDegreesToRadians:Pr,convertRadiansToDegrees:Mr,getAngleFromVertex:X,getClockwiseAngle:xr,polar:Tr},Symbol.toStringTag,{value:"Module"}));function _r(e){const t=e[0],n=e[1],r=n[1]-t[1],s=Math.PI/(2*(n[0]-t[0])),i=t[0]*s,o=t[1];return[r,s,i,o]}function Cr(e){const t=e[0],n=e[1],r=e[2],s=(t[0]-n[0])*(t[0]-r[0])*(n[0]-r[0]);if(s===0)return;const i=(r[0]*(n[1]-t[1])+n[0]*(t[1]-r[1])+t[0]*(r[1]-n[1]))/s,o=(r[0]*r[0]*(t[1]-n[1])+n[0]*n[0]*(r[1]-t[1])+t[0]*t[0]*(n[1]-r[1]))/s,a=(n[0]*r[0]*(n[0]-r[0])*t[1]+r[0]*t[0]*(r[0]-t[0])*n[1]+t[0]*n[0]*(t[0]-n[0])*r[1])/s;return[i,o,a]}const Nr=Object.freeze(Object.defineProperty({__proto__:null,getQuadraticCoefficients:Cr,getSinusoidCoefficients:_r},Symbol.toStringTag,{value:"Module"})),Fr="APPROXIMATED_PI_ERROR",$r="CHOOSE_CORRECT_NUM_ERROR",Ir="EXTRA_SYMBOLS_ERROR",Ar="FILL_ALL_CELLS_ERROR",kr="INVALID_SELECTION_ERROR",Dr="MISSING_PERCENT_ERROR",Vr="MULTIPLICATION_SIGN_ERROR",zr="NEEDS_TO_BE_SIMPLIFIED_ERROR",Ur="NOT_NONE_ABOVE_ERROR",Gr="USER_INPUT_EMPTY",qr="WRONG_CASE_ERROR",jr="WRONG_LETTER_ERROR",b={APPROXIMATED_PI_ERROR:Fr,CHOOSE_CORRECT_NUM_ERROR:$r,EXTRA_SYMBOLS_ERROR:Ir,FILL_ALL_CELLS_ERROR:Ar,INVALID_SELECTION_ERROR:kr,MISSING_PERCENT_ERROR:Dr,MULTIPLICATION_SIGN_ERROR:Vr,NEEDS_TO_BE_SIMPLIFIED_ERROR:zr,NOT_NONE_ABOVE_ERROR:Ur,USER_INPUT_EMPTY:Gr,WRONG_CASE_ERROR:qr,WRONG_LETTER_ERROR:jr},Xr=Math.pow(2,-42),R={predicate:{defaultForms:"integer, proper, improper, mixed, decimal",createValidatorFunctional:function(e,t){t=d.extend({simplify:"required",ratio:!1,forms:R.predicate.defaultForms},t);let n;d.isArray(t.forms)?n=t.forms:n=t.forms.split(/\s*,\s*/),t.inexact===void 0&&(t.maxError=0),t.maxError=+t.maxError+Xr,d.contains(n,"percent")&&(n=d.without(n,"percent"),n.push("percent"));const r=function(i){i=i.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").replace(/(^\s*)|(\s*$)/gi,"");const o=i.match(/^([+-]?\d+)\s*\/\s*([+-]?\d+)$/),a=i.match(/^([+-]?)\\frac\{([+-]?\d+)\}\{([+-]?\d+)\}$/),l=parseInt(i,10);if(o||a){let c,u,f=!0;return o?(c=parseFloat(o[1]),u=parseFloat(o[2])):(c=parseFloat(a[2]),a[1]==="-"&&(c<0&&(f=!1),c=-c),u=parseFloat(a[3])),f=f&&u>0&&(t.ratio||u!==1)&&m.getGCD(c,u)===1,[{value:c/u,exact:f}]}return!isNaN(l)&&""+l===i?[{value:l,exact:!0}]:[]},s={integer:function(i){const o=s.decimal(i),a=s.decimal(i,1);return o[0].value!=null&&o[0].value===a[0].value||o[1].value!=null&&o[1].value===a[1].value?o:[]},proper:function(i){return r(i).flatMap(a=>Math.abs(a.value)<1?[a]:[])},improper:function(i){return i.includes("/")||i.match(/\\(d?frac)/)?r(i).flatMap(l=>Math.abs(l.value)>=1?[l]:[]):[]},pi:function(i){let o,a=[];if(i=i.replace(/\u2212/,"-"),o=i.match(/^([+-]?)\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))a=[{value:parseFloat(o[1]+"1"),exact:!0}];else if(o=i.match(/^([+-]?\s*\d+\s*(?:\/\s*[+-]?\s*\d+)?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))a=r(o[1]);else if(o=i.match(/^([+-]?)\s*(\d+)\s*([+-]?\d+)\s*\/\s*([+-]?\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i)){const c=parseFloat(o[1]+"1"),u=parseFloat(o[2]),f=parseFloat(o[3]),p=parseFloat(o[4]),h=f<p&&m.getGCD(f,p)===1;a=[{value:c*(u+f/p),exact:h}]}else if(o=i.match(/^([+-]?\s*\d+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\s*\d+))?$/i))a=r(o[1]+"/"+o[3]);else if(o=i.match(/^([+-]?)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)\s*(?:\/\s*([+-]?\d+))?$/i))a=r(o[1]+"1/"+o[3]);else if(i==="0")a=[{value:0,exact:!0}];else if(o=i.match(/^(.+)\s*\*?\s*(\\?pi|p|\u03c0|\\?tau|t|\u03c4|pau)$/i))a=s.decimal(o[1]);else{a=d.reduce(R.predicate.defaultForms.split(/\s*,\s*/),function(f,p){return f.concat(s[p](i))},[]);let c=!1;const u=parseFloat(i);if(!isNaN(u)&&u!==parseInt(i)){const f=Math.PI/12,p=f*Math.round(u/f);Math.abs(u-p)<.01&&(c=!0)}else i.match(/\/\s*7/)&&(c=!0);return c&&d.each(a,function(f){f.piApprox=!0}),a}let l=Math.PI;return i.match(/\\?tau|t|\u03c4/)&&(l=Math.PI*2),i.match(/pau/)&&(l=Math.PI*1.5),a.forEach(c=>{c.value*=l}),a},coefficient:function(i){let o=[];return i=i.replace(/\u2212/,"-"),i===""?o=[{value:1,exact:!0}]:i==="-"&&(o=[{value:-1,exact:!0}]),o},log:function(i){let o,a=[];return i=i.replace(/\u2212/,"-"),i=i.replace(/[ \(\)]/g,""),(o=i.match(/^log\s*(\S+)\s*$/i))?a=s.decimal(o[1]):i==="0"&&(a=[{value:0,exact:!0}]),a},percent:function(i){i=String(i).trim();let o=!1;i.indexOf("%")===i.length-1&&(i=i.substring(0,i.length-1).trim(),o=!0);const a=s.decimal(i);return a.forEach(l=>{l.exact=o,l.value=l.value/100}),a},mixed:function(i){const o=i.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?)(\d+)\s+(\d+)\s*\/\s*(\d+)$/);if(o){const a=parseFloat(o[1]+"1"),l=parseFloat(o[2]),c=parseFloat(o[3]),u=parseFloat(o[4]),f=c<u&&m.getGCD(c,u)===1;return[{value:a*(l+c/u),exact:f}]}return[]},decimal:function(i,o=1e10){const a=function(c){c=String(c).trim();const u=c.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").match(/^([+-]?(?:\d{1,3}(?:[, ]?\d{3})*\.?|\d{0,3}(?:[, ]?\d{3})*\.(?:\d{3}[, ]?)*\d{1,3}))$/),f=c.match(/^0[0,]*,/);if(u&&!f){let p=parseFloat(u[1].replace(/[, ]/g,""));return t.inexact===void 0&&(p=Math.round(p*o)/o),p}},l=function(c){return c=c.replace(/([\.,])/g,function(u,f){return f==="."?",":"."}),a(c)};return[{value:a(i),exact:!0},{value:l(i),exact:!0}]}};return function(i){const o=t.fallback!=null?""+t.fallback:"";i=String(i).trim()||o;const a={empty:i==="",correct:!1,message:null,guess:i};if((()=>{for(const c of n){const u=s[c](i);for(let f=0,p=u.length;f<p;f++){const h=u[f].value,L=u[f].exact,v=u[f].piApprox;if(e(h,t.maxError))return L||t.simplify==="optional"?(a.correct=!0,a.message=t.message||null,a.empty=!1):c==="percent"?(a.empty=!0,a.message=b.MISSING_PERCENT_ERROR):(t.simplify!=="enforced"&&(a.empty=!0),a.message=b.NEEDS_TO_BE_SIMPLIFIED_ERROR),!1;v&&e(h,Math.abs(h*.001))&&(a.empty=!0,a.message=b.APPROXIMATED_PI_ERROR)}}})(),a.correct===!1){let c=!1;if(d.each(s,function(u){d.any(u(i),function(p){return p.value!=null&&!d.isNaN(p.value)})&&(c=!0)}),!c)return a.empty=!0,a.message=b.EXTRA_SYMBOLS_ERROR,a}return a}}},number:{convertToPredicate:function(e,t){const n=parseFloat(e);return[function(r,s){return Math.abs(r-n)<s},{...t,type:"predicate"}]},createValidatorFunctional:function(e,t){return R.predicate.createValidatorFunctional(...R.number.convertToPredicate(e,t))}},expression:{parseSolution:function(e,t){let n=C(e,t);if(n.parsed){if(t.simplified&&!n.expr.isSimplified())throw new E("The provided solution ("+e+") isn't fully expanded and simplified.",P.InvalidInput);n=n.expr}else throw new E("The provided solution ("+e+") didn't parse.",P.InvalidInput);return n},createValidatorFunctional:function(e,t){return function(n){const r={empty:!1,correct:!1,message:null,guess:n,ungraded:!1};if(!n)return r.empty=!0,r;const s=C(n,t);if(!s.parsed)return r.empty=!0,r;typeof e=="string"&&(e=R.expression.parseSolution(e,t));const i=se(s.expr,e,t);if(i.equal)r.correct=!0;else if(i.wrongVariableNames||i.wrongVariableCase)r.ungraded=!0,r.message=i.wrongVariableCase?b.WRONG_CASE_ERROR:b.WRONG_LETTER_ERROR,r.suppressAlmostThere=!0;else if(i.message)r.message=i.message;else{const o=C(n.replace(/[xX]/g,"*"),t);if(o.parsed){const a=se(o.expr,e,t);a.equal?(r.ungraded=!0,r.message=b.MULTIPLICATION_SIGN_ERROR):a.message&&(r.message=a.message+" Also, I'm a computer. I only understand multiplication if you use an asterisk (*) as the multiplication sign.")}}return r}}}};function Hr(e,t){let n=!0;return t.values.forEach((r,s)=>{e.values[s]!==r&&(n=!1)}),{type:"points",earned:n?1:0,total:1,message:null}}function Yr(e,t){return t.items.some((r,s)=>e.values[s]==null)?{type:"invalid",message:b.INVALID_SELECTION_ERROR}:null}function Kr(e){return e.status==="correct"?{type:"points",earned:1,total:1,message:e.message||null}:e.status==="incorrect"?{type:"points",earned:0,total:1,message:e.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}function Br(e,t){return{type:"points",earned:t.choices[e.value-1].correct?1:0,total:1,message:null}}function Qr(e){return e.value===0?{type:"invalid",message:null}:null}function Jr(e,t,n){const r=d.clone(t);d.extend(r,{decimal_separator:Ye(n)});const s=c=>{const u=C(c.value,t);if(!u.parsed)throw new E("Unable to parse solution answer for expression",P.InvalidInput,{metadata:{rubric:JSON.stringify(t)}});return R.expression.createValidatorFunctional(u.expr,d({}).extend(r,{simplify:c.simplify,form:c.form}))};let i,o,a=!0,l;for(const c of t.answerForms||[]){const u=s(c);if(!u)continue;const f=u(e);if(f.correct){i=c,o=f.message||"";break}a=a&&f.empty,c.considered==="correct"&&f.ungraded&&!l&&(l=f)}return i?i.considered==="ungraded"?{type:"invalid",message:o}:{type:"points",earned:i.considered==="correct"?1:0,total:1,message:o}:l?{type:"invalid",message:l.message,suppressAlmostThere:l.suppressAlmostThere}:a?{type:"invalid",message:null}:{type:"points",earned:0,total:1}}function Zr(e){return e===""?{type:"invalid",message:null}:null}function le(e){if(e.coords!=null){if(e.type==="exponential"||e.type==="logarithm")return U(e.type).getCoefficients(e.coords,e.asymptote);if(e.type==="linear"||e.type==="quadratic"||e.type==="absolute_value"||e.type==="sinusoid"||e.type==="tangent")return U(e.type).getCoefficients(e.coords);throw new E("Invalid grapher type",P.InvalidInput)}}function es(e,t){if(e.type!==t.correct.type)return{type:"points",earned:0,total:1,message:null};if(e.coords==null)return{type:"invalid",message:null};const n=U(e.type),r=le(e),s=le(t.correct);return r==null||s==null?{type:"invalid",message:null}:n.areEqual(r,s)?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}}function ts(e){return e.status==="correct"?{type:"points",earned:1,total:1,message:e.message||null}:e.status==="incorrect"?{type:"points",earned:0,total:1,message:e.message||null}:{type:"invalid",message:"Keep going, you're not there yet!"}}const{collinear:y,canonicalSineCoefficients:ue,similar:V,clockwise:ns}=Er,{getClockwiseAngle:rs}=Lr,{getSinusoidCoefficients:fe,getQuadraticCoefficients:de}=Nr;function ss(e,t){if(e.type==="none"&&t.correct.type==="none")return{type:"points",earned:0,total:0,message:null};const n=!!(e.coords||e.center&&e.radius);if(e.type===t.correct.type&&n){if(e.type==="linear"&&t.correct.type==="linear"&&e.coords!=null){const r=e.coords,s=t.correct.coords;if(y(s[0],s[1],r[0])&&y(s[0],s[1],r[1]))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="linear-system"&&t.correct.type==="linear-system"&&e.coords!=null){const r=e.coords,s=t.correct.coords;if(y(s[0][0],s[0][1],r[0][0])&&y(s[0][0],s[0][1],r[0][1])&&y(s[1][0],s[1][1],r[1][0])&&y(s[1][0],s[1][1],r[1][1])||y(s[0][0],s[0][1],r[1][0])&&y(s[0][0],s[0][1],r[1][1])&&y(s[1][0],s[1][1],r[0][0])&&y(s[1][0],s[1][1],r[0][1]))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="quadratic"&&t.correct.type==="quadratic"&&e.coords!=null){const r=de(e.coords),s=de(t.correct.coords);if(O(r,s))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="sinusoid"&&t.correct.type==="sinusoid"&&e.coords!=null){const r=fe(e.coords),s=fe(t.correct.coords),i=ue(r),o=ue(s);if(O(i,o))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="circle"&&t.correct.type==="circle"){if(O(e.center,t.correct.center)&&x(e.radius,t.correct.radius))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="point"&&t.correct.type==="point"&&e.coords!=null){let r=t.correct.coords;if(r==null)throw new Error("Point graph rubric has null coords");const s=e.coords.slice();if(r=r.slice(),s==null||s.sort(),r.sort(),O(s,r))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="polygon"&&t.correct.type==="polygon"&&e.coords!=null){const r=e.coords.slice(),s=t.correct.coords.slice();let i;if(t.correct.match==="similar"?i=V(r,s,Number.POSITIVE_INFINITY):t.correct.match==="congruent"?i=V(r,s,ve):t.correct.match==="approx"?i=V(r,s,.1):(r.sort(),s.sort(),i=O(r,s)),i)return{type:"points",earned:1,total:1,message:null}}else if(e.type==="segment"&&t.correct.type==="segment"&&e.coords!=null){let r=z(e.coords),s=z(t.correct.coords);if(r=d.invoke(r,"sort").sort(),s=d.invoke(s,"sort").sort(),O(r,s))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="ray"&&t.correct.type==="ray"&&e.coords!=null){const r=e.coords,s=t.correct.coords;if(O(r[0],s[0])&&y(s[0],s[1],r[1]))return{type:"points",earned:1,total:1,message:null}}else if(e.type==="angle"&&t.correct.type==="angle"){const r=e.coords,s=t.correct.coords,i=t.correct.allowReflexAngles;if(!r)return{type:"invalid",message:null};const l=ns([r[0],r[2],r[1]])&&!i?r.slice().reverse():r;let c;if(t.correct.match==="congruent"){const u=d.map([l,s],function(f){return f?rs(f,i):!1});c=x(...u)}else c=O(l[1],s[1])&&y(s[1],s[0],l[0])&&y(s[1],s[2],l[2]);if(c)return{type:"points",earned:1,total:1,message:null}}}return!n||d.isEqual(e,t.graph)?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}}function is(e,t){const n={hasAnswers:!1,isCorrect:!1};return e&&e.length>0&&(n.hasAnswers=!0),t.length>0?e&&e.length===t.length&&(n.isCorrect=e.every(r=>t.includes(r))):(!e||e.length===0)&&(n.isCorrect=!0),n}function os(e,t){let n=0;for(let r=0;r<e.markers.length;r++)is(e.markers[r].selected,t.markers[r].answers).isCorrect&&n++;return{type:"points",earned:n===e.markers.length?1:0,total:1,message:null}}function as(e,t){return{type:"points",earned:d.isEqual(e.left,t.left)&&d.isEqual(e.right,t.right)?1:0,total:1,message:null}}function cs(e,t){const n=t.answers,r=e.answers,s=G(n),i=G(r),o=s[0]!==i[0]||s[1]!==i[1],a=R.number.createValidatorFunctional;let l=null,c=!1;return d(i[0]).times(u=>{d(i[1]).times(f=>{if(!o){const h=a(n[u][f],{simplify:!0})(r[u][f]);h.message&&(l=h.message),h.correct||(c=!0)}})}),o?{type:"points",earned:0,total:1,message:null}:{type:"points",earned:c?0:1,total:1,message:l}}function ls(e){const t=e.answers,n=G(t);for(let r=0;r<n[0];r++)for(let s=0;s<n[1];s++)if(t[r][s]==null||t[r][s].toString().length===0)return{type:"invalid",message:b.FILL_ALL_CELLS_ERROR};return null}function us(e,t){const n=t.range,r=t.initialX!=null?t.initialX:n[0],s=t.isInequality?"ge":"eq",i=t.correctRel||"eq";return M(e.numLinePosition,t.correctX||0)&&i===e.rel?{type:"points",earned:1,total:1,message:null}:e.numLinePosition===r&&e.rel===s?{type:"invalid",message:null}:{type:"points",earned:0,total:1,message:null}}function fs(e){const t=e.divisionRange,n=e.numDivisions>t[1]||e.numDivisions<t[0];return e.isTickCrtl&&n?{type:"invalid",message:"Number of divisions is outside the allowed range."}:null}function ds(e,t){let n=0;for(let r=t,s=e.length;r<s;r++){const i=e[r];if(i==="{"?n++:i==="}"&&n--,n<0)return r}return e.length}function ge(e,t,n){const r=e.indexOf("{",t);if(r===-1)return{endpoint:e.length,expression:""};const s=r+1,i=ds(e,s),o=e.substring(s,i),a=Se(o,n);return{endpoint:i,expression:a}}function pe(e,t){const n="\\dfrac",s=e.indexOf("\\frac",t),i=e.indexOf(n,t);return s>-1&&i>-1?Math.min(s,i):s>-1?s:i>-1?i:-1}function Se(e,t){if(!e)return"";let n="",r=0,s=pe(e,r);for(;s>-1;){n+=e.substring(r,s),r=s;const i=ge(e,r,t);r=i.endpoint+1;const o=ge(e,r,t);r=o.endpoint+1,n.length&&(n+=" "),n+=t(i.expression,o.expression),s=pe(e,r)}return n+=e.slice(r),n}function Te(e){return Se(e,function(r,s){return r+"/"+s}).replace("\\%","%")}const gs=[{title:"Integers",value:"integer",content:"6"},{title:"Decimals",value:"decimal",content:"0.75"},{title:"Proper fractions",value:"proper",content:"⅗"},{title:"Improper fractions",value:"improper",content:"⁷⁄₄"},{title:"Mixed numbers",value:"mixed",content:"1¾"},{title:"Numbers with π",value:"pi",content:"π"}];function ps(e,t){if(!(typeof e=="string"&&e.endsWith("%")))return e;const n=parseFloat(e.slice(0,-1));return isNaN(n)?e:t?n/100:n}function ms(e,t){const n=gs.map(c=>c.value).filter(c=>c!=="pi"),r=c=>{const u=`${c.value}`,f=[...c.answerForms??[]];return(!c.strict||f.length===0)&&f.push(...n),R.number.createValidatorFunctional(u,{message:c.message,simplify:c.status==="correct"?c.simplify:"optional",inexact:!0,maxError:c.maxError,forms:f})},s=Te(e.currentValue),i=t.answers.filter(c=>c.status==="correct").every(c=>c.value!=null&&Math.abs(c.value)<=1);let o=s;t.coefficient&&(o?o==="-"&&(o=-1):o=1);const a=t.answers.map(c=>{const f=r(c)(ps(o,i));return{...c,score:f}}).find(c=>c.score.correct||c.status==="correct"&&c.score.empty),l=(a==null?void 0:a.status)==="correct"?a.score:{empty:(a==null?void 0:a.status)==="ungraded",correct:(a==null?void 0:a.status)==="correct",message:(a==null?void 0:a.message)??null};return l.empty?{type:"invalid",message:l.message}:{type:"points",earned:l.correct?1:0,total:1,message:l.message}}function hs(e,t){return{type:"points",earned:d.isEqual(e.current,t.correctOptions.map(r=>r.content))?1:0,total:1,message:null}}function ys(e){return e.current.length===0?{type:"invalid",message:null}:null}function Os(e,t){return{type:"points",earned:O(e,t.correct)?1:0,total:1,message:null}}function bs(e,t){return O(e,t.starting)?{type:"invalid",message:null}:null}function ws(e,t){const n=e.choicesSelected.reduce((o,a)=>o+(a?1:0),0),r=t.choices.reduce((o,a)=>a.correct?o+1:o,0);return r>1&&n!==r?{type:"invalid",message:b.CHOOSE_CORRECT_NUM_ERROR}:t.choices.some((o,a)=>o.isNoneOfTheAbove&&e.choicesSelected[a])&&n>1?{type:"invalid",message:b.NOT_NONE_ABOVE_ERROR}:{type:"points",earned:e.choicesSelected.every((o,a)=>{let l;return t.choices[a].isNoneOfTheAbove?l=t.choices.every((c,u)=>a===u||!c.correct):l=!!t.choices[a].correct,l===o})?1:0,total:1,message:null}}function Rs(e){return e.choicesSelected.includes(!0)?null:{type:"invalid",message:null}}function vs(e,t){return{type:"points",earned:O(e.options,t.correct)?1:0,total:1,message:null}}function Ws(e){return e.changed?null:{type:"invalid",message:null}}const H=function(e){return e.filter(function(t){return t.some(n=>n)})};function xe(e){const t=H(e);return t.some(function(r){return r.some(function(s){return s===""})})||!t.length?{type:"invalid",message:null}:null}function Es(e,t){const n=xe(e);if(n!=null)return n;const r=H(e),s=H(t.answers);if(r.length!==s.length)return{type:"points",earned:0,total:1,message:null};const i=R.number.createValidatorFunctional;let o=null;return{type:"points",earned:s.every(function(l){for(let c=0;c<r.length;c++)if(r[c].every(function(p,h){const L=l[h],k=i(L,{simplify:!0})(p);return k.message&&(o=k.message),k.correct}))return r.splice(c,1),!0;return!1})?1:0,total:1,message:o}}const Ps={number:{name:"Numbers",forms:"integer, decimal, proper, improper, mixed"},decimal:{name:"Decimals",forms:"decimal"},integer:{name:"Integers",forms:"integer"},rational:{name:"Fractions and mixed numbers",forms:"integer, proper, improper, mixed"},improper:{name:"Improper numbers (no mixed)",forms:"integer, proper, improper"},mixed:{name:"Mixed numbers (no improper)",forms:"integer, proper, mixed"},percent:{name:"Numbers or percents",forms:"integer, decimal, proper, improper, mixed, percent"},pi:{name:"Numbers with pi",forms:"pi"}};function Ms(e,t){t.answerType==null&&(t.answerType="number");const n=`${t.value}`,r=R.number.createValidatorFunctional(n,{simplify:t.simplify,inexact:t.inexact||void 0,maxError:t.maxError,forms:Ps[t.answerType].forms}),s=Te(e.currentValue),i=r(s);return i.empty?{type:"invalid",message:i.message}:{type:"points",earned:i.correct?1:0,total:1,message:i.message}}function w(e=0){return{type:"points",earned:e,total:e,message:null}}function Ss(e,t,n){return w()}function Ts(e){return e.currentValue.trim()===""?{type:"invalid",message:b.USER_INPUT_EMPTY}:null}function xs(e,t,n){const r=Ce(t.widgets,Object.keys(t.widgets),e,n);return _e(r)}function Ls(e,t,n,r){return t.filter(s=>{const i=e[s];if(!i||i.static===!0)return!1;const o=Le(i.type),a=n[s],l=i.options,c=o==null?void 0:o(a,l,r);if(c)return Is(c)})}function _s(e,t,n){return Ls(t.widgets,Object.keys(t.widgets),e,n).length===0?null:{type:"invalid",message:null}}function Cs(e){let t=0;for(let n=0;n<e.markers.length;n++){const r=e.markers[n].selected;r&&r.length>0&&t++}return t!==e.markers.length?{type:"invalid",message:null}:null}function Ns(e){return e.currentValue==null||e.currentValue===""?{type:"invalid",message:""}:null}function me(e,t){const n=Ns(e);return n??{type:"points",earned:e.currentValue===t.value?1:0,total:1,message:""}}const Z=new we("Score widget registry");function g(e,t,n){const r={scorer:t,validator:n};Z.set(e,r)}const Le=e=>{var t;return((t=Z.get(e))==null?void 0:t.validator)??null},Fs=e=>{var t;return((t=Z.get(e))==null?void 0:t.scorer)??null};g("categorizer",Hr,Yr);g("cs-program",Kr);g("dropdown",Br,Qr);g("expression",Jr,Zr);g("free-response",Ss,Ts);g("grapher",es);g("group",xs,_s);g("iframe",ts);g("input-number",Ms);g("interactive-graph",ss);g("label-image",os,Cs);g("matcher",as);g("matrix",cs,ls);g("mock-widget",me,me);g("number-line",us,fs);g("numeric-input",ms);g("orderer",hs,ys);g("plotter",Os,bs);g("radio",ws,Rs);g("sorter",vs,Ws);g("table",Es,xe);g("deprecated-standin",()=>w(1));g("measurer",()=>w(1));g("definition",w);g("explanation",w);g("image",w);g("interaction",w);g("molecule",w);g("passage",w);g("passage-ref",w);g("passage-ref-target",w);g("video",w);const $s={type:"points",earned:0,total:0,message:null};function Is(e){return e.type==="invalid"&&(!e.message||e.message.length===0)}function As(e,t){let n;if(e.type==="points"&&t.type==="points")return e.message&&t.message&&e.message!==t.message?n=null:n=e.message||t.message,{type:"points",earned:e.earned+t.earned,total:e.total+t.total,message:n};if(e.type==="points"&&t.type==="invalid")return t;if(e.type==="invalid"&&t.type==="points")return e;if(e.type==="invalid"&&t.type==="invalid")return e.message&&t.message&&e.message!==t.message?n=null:n=e.message||t.message,{type:"invalid",message:n};throw new E("PerseusScore with unknown type encountered",P.InvalidInput,{metadata:{scoreA:JSON.stringify(e),scoreB:JSON.stringify(t)}})}function _e(e){return Object.values(e).reduce(As,$s)}function Fi(e,t,n){const r=Be(e.content),s=Ce(e.widgets,r,t,n);return _e(s)}function Ce(e,t,n,r){const s=Re(e),i=t.filter(a=>{const l=s[a],c=(l==null?void 0:l.graded)==null||l.graded,u=!!(l!=null&&l.static);return c&&!u}),o={};return i.forEach(a=>{const l=s[a];if(!l)return;const c=n[a],u=Le(l.type),f=Fs(l.type),p=(u==null?void 0:u(c,l.options,r))??(f==null?void 0:f(c,l.options,r));p!=null&&(o[a]=p)}),o}const Ne=/^web\+graphie:/,Fe=/^file\+graphie:/;function ee(e){return $e(e)?Ie(e):e}function $e(e){return Ne.test(e)||Fe.test(e)}function te(e){return e.replace(Ne,"https:").replace(Fe,"file:")}function Ie(e){return te(e)+".svg"}function ks(e){return te(e)+"-data.json"}async function Ds(e){const t=new Image;return new Promise((n,r)=>{t.onload=()=>{n([t.naturalWidth,t.naturalHeight])},t.onerror=r,t.src=ee(e)})}let he=!1;const Ae=function(e,t,n){return Array.isArray(e)?d.map(e,function(r){return Ae(r,t)}):t.call(n,e)};function Vs(e,t){return e==null||t==null?e==null==(t==null):e.length===t.length&&e.every((n,r)=>t[r]===n)}const ke=/^\[\[\u2603 (([a-z-]+) ([0-9]+))\]\]/,zs=/^([a-z-]+) ([0-9]+)$/,Us=new RegExp(ke.source+"$"),Gs="☃",qs="x".split(/(.)/g).length?function(e,t){return e.split(t)}:function(e,t){const n=[];let r=t.lastIndex=0,s;for(;s=t.exec(e);){const i=s;n.push(e.slice(r,i.index)),n.push(...i.slice(1)),r=i.index+i[0].length}return n.push(e.slice(r)),n};function js(e){let t;return R.predicate.createValidatorFunctional(function(r){return t=r,!0},{simplify:"optional",inexact:!0,forms:"integer, proper, improper, pi, log, mixed, decimal"})(e),t}function Y(e){return Array(e).fill("")}function Xs(e){const{rows:t,columns:n}=e;return Y(t).map(()=>Y(n))}function Hs(e,t,n,r){const s=ne(t,n),o=e*s>30;return{scale:s,tickStep:e/r,unityLabel:o}}function Ys(e,t,n){return d(2).times(function(r){const s=ne(e[r],n);return De(t[r],s)})}function Ks(e){return[e[0]/2,e[1]/2]}function De(e,t){const n=e*t,r=e,s=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=Math.floor(r/s);if(n<25)return e;if(n<50)return i===5?e:e/2;if(i===1)return e/2;if(i===2)return e/4;if(i===5)return e/5}function ne(e,t){const n=e[1]-e[0];return t/n}function Bs(e,t){const n=e[1]-e[0];let r;15<n&&n<=20?r=23:n>100||n<5?r=10:r=16;const s=t/500,i=r*s;return re(n,i)}function re(e,t){let n=Math.pow(10,Math.floor(Math.log(e/t)/Math.LN10));const r=t/e*n;return r<=.15?n*=10:r<=.35?n*=5:r<=.75&&(n*=2),n}const ye=(e,t)=>{const n=t[1]-t[0],r=n/e;return r<=10?e:r<=20?e*2:re(n,10)};function Qs(e,t){return[ye(e[0],t[0]),ye(e[1],t[1])]}function Js(e){e=e||window.location.search.substring(1);const t={},n=/\+/g,r=/([^&=]+)=?([^&]*)/g,s=function(o){return decodeURIComponent(o.replace(n," "))};let i;for(;i=r.exec(e);){const o=i;t[s(o[1])]=s(o[2])}return t}function Zs(e,t,n){n=encodeURIComponent(n);const r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),s=e.indexOf("?")!==-1?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+s+t+"="+n}function ei(e){return encodeURIComponent(e).replace(/['()!]/g,window.escape).replace(/\*/g,"%2A")}const W={pointerDown:!1,currentTouchIdentifier:null};function ti(){Object.assign(W,{pointerDown:!1,currentTouchIdentifier:null})}function ni(e){let t;if(W.pointerDown){if(W.currentTouchIdentifier!=null){const r=e.changedTouches?e.changedTouches.length:0;for(let s=0;s<r;s++)e.changedTouches[s].identifier===W.currentTouchIdentifier&&(t=e.changedTouches[s])}else t=e;const n=e.type==="touchend"||e.type==="touchcancel";t&&n&&(W.pointerDown=!1,W.currentTouchIdentifier=null)}else W.pointerDown=!0,e.changedTouches?(t=e.changedTouches[0],W.currentTouchIdentifier=t.identifier):t=e;if(t)return{left:t.pageX,top:t.pageY}}const ri=()=>{try{const e=Object.defineProperty({},"passive",{get:function(){he=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}return he};function si(e){e.stopPropagation()}function ii(e,t){const n=new Image;n.onload=function(){var r;n.width===0&&n.height===0?((r=document.body)==null||r.appendChild(n),d.defer(function(){var s;t(n.clientWidth,n.clientHeight),(s=document.body)==null||s.removeChild(n)})):t(n.width,n.height)},n.src=ee(e)}function oi(e){const t=e.value,n=e.selectionStart-1,r=Math.max(t.lastIndexOf(`
`,n),t.lastIndexOf(" ",n))+1;return{string:t.substring(r,n+1),pos:{start:r,end:n}}}function ai(e,t){e.selectionStart=t,e.selectionEnd=t}const ci={getWordBeforeCursor:oi,moveCursor:ai},li=e=>e.startsWith("$")&&e.endsWith("$")?e.slice(1,-1):e,$i={inputPathsEqual:Vs,nestedMap:Ae,rWidgetRule:ke,rTypeFromWidgetId:zs,rWidgetParts:Us,snowman:Gs,split:qs,firstNumericalParse:js,stringArrayOfSize:Y,stringArrayOfSize2D:Xs,gridDimensionConfig:Hs,getGridStep:Ys,snapStepFromGridStep:Ks,scaleFromExtent:ne,tickStepFromExtent:Bs,gridStepFromTickStep:De,tickStepFromNumTicks:re,constrainedTickStepsFromTickSteps:Qs,parseQueryString:Js,updateQueryString:Zs,strongEncodeURIComponent:ei,touchHandlers:W,resetTouchHandlers:ti,extractPointerLocation:ni,supportsPassiveEvents:ri,captureScratchpadTouchStart:si,getImageSize:ii,getImageSizeModern:Ds,getRealImageUrl:ee,isLabeledSVG:$e,getBaseUrl:te,getSvgUrl:Ie,getDataUrl:ks,textarea:ci,unescapeMathMode:li};export{Mi as $,zn as A,bi as B,Fi as C,Nt as D,K as E,N as F,It as G,st as H,Ot as I,wt as J,m as K,Wt as L,jn as M,Mt as N,Xt as O,G as P,Bt as Q,an as R,ln as S,dn as T,$i as U,pn as V,Cn as W,Ti as X,B as Y,Q as Z,I as _,lt as a,or as a0,Wi as a1,sr as a2,xi as a3,Er as a4,fr as a5,Pi as a6,Ei as a7,Li as a8,Ni as a9,Ci as aa,_i as ab,hi as ac,we as ad,Re as ae,Qe as af,Ls as ag,Ce as ah,_e as ai,ws as aj,Si as ak,Me as al,Nr as am,is as an,yi as ao,Xs as ap,ae as aq,Ri as ar,Qn as as,Oi as at,ht as b,et as c,ot as d,ft as e,_t as f,Ps as g,Bn as h,Tt as i,rn as j,bn as k,Vt as l,Gt as m,Zt as n,Rn as o,hn as p,Pn as q,vi as r,Ln as s,nr as t,Un as u,M as v,Wn as w,Lr as x,wi as y,Dn as z};
