import{j as t,a}from"./jsx-runtime-FVsy8kgq.js";import{c as v,p as N}from"./article-renderer-kI5bvIE0.js";import{_ as l}from"./jquery-yG1GhClm.js";import"./util-EodL-OyW.js";import"./phet-simulation-9JfdvNpj.js";import"./version-akiLXZts.js";import"./dependencies-8XILypbq.js";import{A as g}from"./perseus-api-mOiZT07d.js";import"./multi-renderer-hspSFWbr.js";import"./hints-renderer-QPN_52ZZ.js";import"./renderer-L23s5OFx.js";import{B as O}from"./base-radio-gjO323Ds.js";import{c as k}from"./components-PCV-cUaU.js";import{I as T}from"./icon-paths-AuJwhOz7.js";import"./index-0C4KXdeC.js";import"./i18n-context-P7VpLqM1.js";import"./svg-image-WHPtcgo-.js";import"./index-IIMKO4_x.js";import{C as p}from"./index-QCAhLhLD.js";import{P as n}from"./index-k-0mNqHS.js";import{r as y}from"./index-TT1qJ6UJ.js";import{E as C}from"./editor-xR7VOm5r.js";const{InlineIcon:h}=k,{iconPlus:b,iconTrash:A}=T,m=class m extends y.Component{render(){const e=this.props.choice.correct?"correct":"incorrect";let s="Type a choice here...";this.props.choice.isNoneOfTheAbove&&(s=this.props.choice.correct?"Type the answer to reveal to the user...":"None of the above");const o=t(C,{ref:"content-editor",apiOptions:this.props.apiOptions,content:this.props.choice.content||"",widgetEnabled:!1,placeholder:s,disabled:this.props.choice.isNoneOfTheAbove&&!this.props.choice.correct,onChange:this.props.onContentChange}),i=t(C,{ref:"clue-editor",apiOptions:this.props.apiOptions,content:this.props.choice.clue||"",widgetEnabled:!1,placeholder:`Why is this choice ${e}?`,onChange:this.props.onClueChange}),r=t("a",{className:"simple-button orange delete-choice",href:"#",onClick:f=>{f.stopPropagation(),f.preventDefault(),this.props.onDelete()},title:"Remove this choice",children:t(h,{...A})});return a("div",{className:"choice-clue-editors",children:[t("div",{className:`choice-editor ${e}`,children:o}),t("div",{className:"clue-editor",children:i}),this.props.showDelete&&r]})}};m.propTypes={apiOptions:g.propTypes,choice:n.object,showDelete:n.bool,onClueChange:n.func,onContentChange:n.func,onDelete:n.func};let u=m;const c=class c extends y.Component{constructor(){super(...arguments),this.change=(...e)=>v.apply(this,e),this.onMultipleSelectChange=e=>{e=e.multipleSelect;const s=l.reduce(this.props.choices,function(o,i){return i.correct?o+1:o},0);if(!e&&s>1){const o=l.map(this.props.choices,function(i){return l.defaults({correct:!1},i)});this.props.onChange({multipleSelect:e,choices:o})}else this.props.onChange({multipleSelect:e})},this.onCountChoicesChange=e=>{e=e.countChoices,this.props.onChange({countChoices:e})},this.onChange=({checked:e})=>{const s=l.map(this.props.choices,(o,i)=>l.extend({},o,{correct:e[i],content:o.isNoneOfTheAbove&&!e[i]?"":o.content}));this.props.onChange({choices:s})},this.onContentChange=(e,s)=>{const o=this.props.choices.slice();o[e]=l.extend({},o[e],{content:s}),this.props.onChange({choices:o})},this.onClueChange=(e,s)=>{const o=this.props.choices.slice();o[e]=l.extend({},o[e],{clue:s}),s===""&&delete o[e].clue,this.props.onChange({choices:o})},this.onDelete=e=>{const s=this.props.choices.slice(),o=s[e];s.splice(e,1),this.props.onChange({choices:s,hasNoneOfTheAbove:this.props.hasNoneOfTheAbove&&!o.isNoneOfTheAbove})},this.addChoice=(e,s)=>{s.preventDefault();const o=this.props.choices.slice(),i={isNoneOfTheAbove:e},r=o.length-(this.props.hasNoneOfTheAbove?1:0);o.splice(r,0,i),this.props.onChange({choices:o,hasNoneOfTheAbove:e||this.props.hasNoneOfTheAbove},()=>{this.refs[`choice-editor${r}`].refs["content-editor"].focus()})},this.setDisplayCount=e=>{this.props.onChange({displayCount:e})},this.focus=()=>(this.refs["choice-editor0"].refs["content-editor"].focus(),!0),this.getSaveWarnings=()=>l.some(l.pluck(this.props.choices,"correct"))?[]:["No choice is marked as correct."],this.serialize=()=>l.pick(this.props,"choices","randomize","multipleSelect","countChoices","displayCount","hasNoneOfTheAbove","deselectEnabled")}render(){const e=l.reduce(this.props.choices,function(s,o){return o.correct?s+1:s},0);return a("div",{children:[a("div",{className:"perseus-widget-row",children:[t("a",{href:"https://docs.google.com/document/d/1frZf7yrWVWb1n4tVjqlzqVUiv1pn4cZXbxgP62-JDBY/edit#heading=h.8ng1isya19nu",target:"_blank",children:"Multiple choice style guide"}),t("br",{}),t("div",{className:"perseus-widget-left-col",children:t(p,{label:"Multiple selections",checked:this.props.multipleSelect,onChange:s=>{this.onMultipleSelectChange({multipleSelect:s})}})}),t("div",{className:"perseus-widget-right-col",children:t(p,{label:"Randomize order",checked:this.props.randomize,onChange:s=>{this.props.onChange({randomize:s})}})}),this.props.multipleSelect&&t("div",{className:"perseus-widget-left-col",children:t(p,{label:"Specify number correct",checked:this.props.countChoices,onChange:s=>{this.onCountChoicesChange({countChoices:s})}})})]}),t(O,{multipleSelect:this.props.multipleSelect,countChoices:this.props.countChoices,numCorrect:e,editMode:!0,labelWrap:!1,apiOptions:this.props.apiOptions,choices:this.props.choices.map((s,o)=>({content:t(u,{ref:`choice-editor${o}`,apiOptions:this.props.apiOptions,choice:s,onContentChange:i=>{"content"in i&&this.onContentChange(o,i.content)},onClueChange:i=>{"content"in i&&this.onClueChange(o,i.content)},onDelete:()=>this.onDelete(o),showDelete:this.props.choices.length>=2}),isNoneOfTheAbove:s.isNoneOfTheAbove,checked:s.correct}),this),onChange:this.onChange}),a("div",{className:"add-choice-container",children:[a("a",{className:"simple-button orange",href:"#",onClick:this.addChoice.bind(this,!1),children:[t(h,{...b})," Add a choice"," "]}),!this.props.hasNoneOfTheAbove&&a("a",{className:"simple-button",href:"#",onClick:this.addChoice.bind(this,!0),children:[t(h,{...b})," None of the above"," "]})]})]})}};c.propTypes={...N,apiOptions:g.propTypes,choices:n.arrayOf(n.shape({content:n.string,clue:n.string,correct:n.bool})),displayCount:n.number,randomize:n.bool,hasNoneOfTheAbove:n.bool,multipleSelect:n.bool,countChoices:n.bool,deselectEnabled:n.bool,static:n.bool},c.widgetName="radio",c.defaultProps={choices:[{},{},{},{}],displayCount:null,randomize:!1,hasNoneOfTheAbove:!1,multipleSelect:!1,countChoices:!1,deselectEnabled:!1};let d=c;d.__docgenInfo={description:"",methods:[{name:"change",docblock:null,modifiers:[],params:[{name:"...args",optional:!1,type:null}],returns:null},{name:"onMultipleSelectChange",docblock:null,modifiers:[],params:[{name:"allowMultiple",optional:!1,type:null}],returns:null},{name:"onCountChoicesChange",docblock:null,modifiers:[],params:[{name:"count",optional:!1,type:null}],returns:null},{name:"onChange",docblock:null,modifiers:[],params:[{name:"{checked}",optional:!1,type:null}],returns:null},{name:"onContentChange",docblock:null,modifiers:[],params:[{name:"choiceIndex",optional:!1,type:null},{name:"newContent",optional:!1,type:null}],returns:null},{name:"onClueChange",docblock:null,modifiers:[],params:[{name:"choiceIndex",optional:!1,type:null},{name:"newClue",optional:!1,type:null}],returns:null},{name:"onDelete",docblock:null,modifiers:[],params:[{name:"choiceIndex",optional:!1,type:null}],returns:null},{name:"addChoice",docblock:null,modifiers:[],params:[{name:"noneOfTheAbove",optional:!1,type:null},{name:"e",optional:!1,type:null}],returns:null},{name:"setDisplayCount",docblock:null,modifiers:[],params:[{name:"num",optional:!1,type:null}],returns:null},{name:"focus",docblock:null,modifiers:[],params:[],returns:null},{name:"getSaveWarnings",docblock:null,modifiers:[],params:[],returns:null},{name:"serialize",docblock:null,modifiers:[],params:[],returns:null}],displayName:"RadioEditor",props:{choices:{defaultValue:{value:"[{}, {}, {}, {}]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"shape",value:{content:{name:"string",required:!1},clue:{name:"string",required:!1},correct:{name:"bool",required:!1}}}},required:!1},displayCount:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"number"},required:!1},randomize:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},hasNoneOfTheAbove:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},multipleSelect:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},countChoices:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},deselectEnabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},apiOptions:{description:"",type:{name:"custom",raw:"ApiOptions.propTypes"},required:!1},static:{description:"",type:{name:"bool"},required:!1}},composes:["@khanacademy/perseus"]};export{d as R};
