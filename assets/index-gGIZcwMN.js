import{a as P}from"./extends-wRoo2ExD.js";import{r as s}from"./index-6oxdNXpR.js";import{s as l,d as H,c as y,b as N,V as m,I as V}from"./index-GoufVIe2.js";import{m as Y,c as K,u as F,a as L,T as G,I as Q,x as Z}from"./index-q_kBGkiq.js";import{l as E}from"./index-awljIyHI.js";import{d as J,a as X}from"./index-Pc_lv_ia.js";import{r as x}from"./index-9gkyvru-.js";let v=function(o){return o.Immediately="schedule-immediately",o.OnDemand="schedule-on-demand",o}({}),p=function(o){return o.Resolve="resolve-on-clear",o.Cancel="cancel-on-clear",o}({});(function(o){return o.Reset="reset",o.Passive="passive",o})({});class ee{constructor(e,t,n=v.Immediately){if(this._timeoutId=void 0,this._action=void 0,this._timeoutMs=void 0,typeof e!="function")throw new Error("Action must be a function");if(t<0)throw new Error("Timeout period must be >= 0");this._action=e,this._timeoutMs=t,n===v.Immediately&&this.set()}get isSet(){return this._timeoutId!=null}set(){this.isSet&&this.clear(p.Cancel),this._timeoutId=setTimeout(()=>this.clear(p.Resolve),this._timeoutMs)}clear(e=p.Cancel){const t=this._timeoutId;this._timeoutId=null,t!=null&&(clearTimeout(t),e===p.Resolve&&this._action())}}class te{constructor(e,t,n=v.Immediately){if(this._intervalId=void 0,this._action=void 0,this._intervalMs=void 0,typeof e!="function")throw new Error("Action must be a function");if(t<1)throw new Error("Interval period must be >= 1");this._action=e,this._intervalMs=t,n===v.Immediately&&this.set()}get isSet(){return this._intervalId!=null}set(){this.isSet&&this.clear(p.Cancel),this._intervalId=setInterval(()=>this._action(),this._intervalMs)}clear(e=p.Cancel){const t=this._intervalId;this._intervalId=null,t!=null&&(clearInterval(t),e===p.Resolve&&this._action())}}class oe{constructor(e,t=v.Immediately){if(this._animationFrameId=void 0,this._action=void 0,typeof e!="function")throw new Error("Action must be a function");this._action=e,t===v.Immediately&&this.set()}get isSet(){return this._animationFrameId!=null}set(){this.isSet&&this.clear(p.Cancel),this._animationFrameId=requestAnimationFrame(e=>this.clear(p.Resolve,e))}clear(e=p.Cancel,t){const n=this._animationFrameId;this._animationFrameId=null,n!=null&&(cancelAnimationFrame(n),e===p.Resolve&&this._action(t||performance.now()))}}class w{constructor(){this._disabled=!1,this._registeredActions=[]}timeout(e,t,n){if(this._disabled)return w.NoopAction;const r=new ee(e,t,n==null?void 0:n.schedulePolicy);return this._registeredActions.push(()=>r.clear(n==null?void 0:n.clearPolicy)),r}interval(e,t,n){if(this._disabled)return w.NoopAction;const r=new te(e,t,n==null?void 0:n.schedulePolicy);return this._registeredActions.push(()=>r.clear(n==null?void 0:n.clearPolicy)),r}animationFrame(e,t){if(this._disabled)return w.NoopAction;const n=new oe(e,t==null?void 0:t.schedulePolicy);return this._registeredActions.push(()=>n.clear(t==null?void 0:t.clearPolicy)),n}clearAll(){const e=[...this._registeredActions];this._registeredActions=[],e.forEach(t=>t())}disable(){this._disabled=!0,this.clearAll()}}w.NoopAction={set:()=>{},get isSet(){return!1},clear:()=>{}};class ne extends s.Component{constructor(...e){super(...e),this._actionScheduler=new w}componentWillUnmount(){this._actionScheduler.disable()}render(){const{children:e}=this.props;return e(this._actionScheduler)}}function k(){return k=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o},k.apply(this,arguments)}function se(o){const e=`withActionScheduler(${o.displayName||o.name})`,t=n=>s.createElement(ne,null,r=>s.createElement(o,k({},n,{schedule:r})));return t.displayName=e,t}const $=l.large_24,R={small:{query:"(max-width: 767px)",totalColumns:4,gutterWidth:l.medium_16,marginWidth:l.medium_16},medium:{query:"(min-width: 768px) and (max-width: 1023px)",totalColumns:8,gutterWidth:l.xLarge_32,marginWidth:l.large_24},large:{query:"(min-width: 1024px)",totalColumns:12,gutterWidth:l.xLarge_32,marginWidth:$,maxWidth:1120+$*2}},re={large:{query:"(min-width: 1px)",totalColumns:12,gutterWidth:l.xLarge_32,marginWidth:l.medium_16}},ie={small:{query:"(max-width: 767px)",totalColumns:4,gutterWidth:l.medium_16,marginWidth:l.medium_16},large:{query:"(min-width: 768px)",totalColumns:12,gutterWidth:l.xLarge_32,marginWidth:l.xxLarge_48}},le={ssrSize:"large",mediaSpec:R},W=s.createContext(le);W.displayName="MediaLayoutContext";const C={},ae="large";class de extends s.Component{constructor(e){super(e),this.cleanupThunks=void 0,this.state={size:void 0},this.cleanupThunks=[]}componentDidMount(){const e=Object.entries(this.props.mediaSpec);for(const[t,n]of e){const r=C[n.query];if(!r)continue;const i=d=>{d.matches&&this.setState({size:t})};r.addListener(i),this.cleanupThunks.push(()=>r.removeListener(i))}}componentWillUnmount(){this.cleanupThunks.forEach(e=>e())}getCurrentSize(e){if(this.state.size)return this.state.size;{const t=Object.entries(this.props.mediaSpec);for(const[n,r]of t)if(C[r.query].matches)return n}return ae}isUnsupportedEnvironment(){return typeof window>"u"||!window.matchMedia}getMockStyleSheet(e){const{styleSheets:t}=this.props,n={};if(!t)return n;for(const r of Object.keys(t)){const i=t[r];if(i)for(const d of Object.keys(i))Object.prototype.hasOwnProperty.call(n,d)||(n[d]=[t.all&&t.all[d],e==="small"&&[t.mdOrSmaller&&t.mdOrSmaller[d],t.small&&t.small[d]],e==="medium"&&[t.mdOrSmaller&&t.mdOrSmaller[d],t.mdOrLarger&&t.mdOrLarger[d],t.medium&&t.medium[d]],e==="large"&&[t.mdOrLarger&&t.mdOrLarger[d],t.large&&t.large[d]]])}return n}renderContent(e){const{children:t,mediaSpec:n,ssrSize:r,overrideSize:i}=this.props,d=[...Object.values(R).map(u=>u.query),...Object.values(re).map(u=>u.query),...Object.values(ie).map(u=>u.query),...Object.values(n).map(u=>u.query)];if(!e)for(const u of d.filter(h=>!C[h]))C[u]=window.matchMedia(u);const f=i||e&&r||this.getCurrentSize(n),c=this.getMockStyleSheet(f);return t({mediaSize:f,mediaSpec:n,styles:c})}render(){return s.createElement(H,{fallback:()=>this.renderContent(!0)},()=>this.renderContent(this.isUnsupportedEnvironment()))}}class ce extends s.Component{render(){return s.createElement(W.Consumer,null,({overrideSize:e,ssrSize:t,mediaSpec:n})=>s.createElement(de,P({},this.props,{overrideSize:e,ssrSize:t,mediaSpec:n})))}}E.StyleSheet.create({grow:{flexGrow:1}});const T={color:{bg:{inverse:y.darkBlue},text:{inverse:y.white,secondary:y.offBlack64},shadow:{default:y.offBlack16}},border:{radius:N.radius.medium_4,width:N.width.thin,color:y.blue},spacing:{dialog:{small:l.medium_16},panel:{closeButton:l.medium_16,footer:l.xLarge_32},header:{xsmall:l.xSmall_8,small:l.medium_16,medium:l.large_24,large:l.xLarge_32}}},ue=Y(T,{color:{bg:{inverse:y.eggplant}}}),me={default:T,khanmigo:ue},M=K(T);function he(o){const e=s.useContext(G),t=me[e]||T;return s.createElement(M.Provider,{value:t},o.children)}const pe=s.forwardRef(function(e,t){const{above:n,below:r,role:i="dialog",style:d,children:f,testId:c,"aria-labelledby":u,"aria-describedby":h}=e,{theme:I}=F(M),g=L(ge,I);return s.createElement(m,{style:[g.wrapper,d]},r&&s.createElement(m,{style:g.below},r),s.createElement(m,{role:i,"aria-modal":"true","aria-labelledby":u,"aria-describedby":h,ref:t,style:g.dialog,testId:c},f),n&&s.createElement(m,{style:g.above},n))}),q=s.forwardRef(function(e,t){return s.createElement(he,null,s.createElement(pe,P({},e,{ref:t})))}),fe="@media (max-width: 767px)",ge=o=>({wrapper:{display:"flex",flexDirection:"row",alignItems:"stretch",width:"100%",height:"100%",position:"relative",[fe]:{padding:o.spacing.dialog.small,flexDirection:"column"}},dialog:{width:"100%",height:"100%",borderRadius:o.border.radius,overflow:"hidden"},above:{pointerEvents:"none",position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:1},below:{pointerEvents:"none",position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:-1}});q.displayName="ModalDialog";function O({children:o}){return s.createElement(m,{style:ye.footer},o)}O.__IS_MODAL_FOOTER__=!0;O.isComponentOf=o=>o&&o.type&&o.type.__IS_MODAL_FOOTER__;const ye=E.StyleSheet.create({footer:{flex:"0 0 auto",boxSizing:"border-box",minHeight:l.xxxLarge_64,paddingLeft:l.medium_16,paddingRight:l.medium_16,paddingTop:l.xSmall_8,paddingBottom:l.xSmall_8,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",boxShadow:`0px -1px 0px ${y.offBlack16}`}});function S(o){const{breadcrumbs:e=void 0,light:t,subtitle:n=void 0,testId:r,title:i,titleId:d}=o;if(n&&e)throw new Error("'subtitle' and 'breadcrumbs' can't be used together");const{theme:f}=F(M),c=L(be,f);return s.createElement(m,{style:[c.header,!t&&c.dark],testId:r},e&&s.createElement(m,{style:c.breadcrumbs},e),s.createElement(J,{tag:"h2",style:c.title,id:d,testId:r&&`${r}-title`},i),n&&s.createElement(X,{style:t&&c.subtitle,testId:r&&`${r}-subtitle`},n))}const B="@media (max-width: 767px)",be=o=>({header:{boxShadow:`0px 1px 0px ${o.color.shadow.default}`,display:"flex",flexDirection:"column",minHeight:66,padding:`${o.spacing.header.medium}px ${o.spacing.header.large}px`,position:"relative",width:"100%",[B]:{paddingLeft:o.spacing.header.small,paddingRight:o.spacing.header.small}},dark:{background:o.color.bg.inverse,color:o.color.text.inverse},breadcrumbs:{color:o.color.text.secondary,marginBottom:o.spacing.header.xsmall},title:{paddingRight:o.spacing.header.small,[B]:{paddingRight:o.spacing.header.large}},subtitle:{color:o.color.text.secondary,marginTop:o.spacing.header.xsmall}});S.defaultProps={light:!0};const xe='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';class we extends s.Component{constructor(...e){super(...e),this.modalRoot=void 0,this.getModalRoot=t=>{if(!t)return;const n=x.findDOMNode(t);if(!n)throw new Error("Assertion error: modal root should exist after mount");this.modalRoot=n},this.handleFocusMoveToLast=()=>{this.focusElementIn(!1)},this.handleFocusMoveToFirst=()=>{this.focusElementIn(!0)}}tryToFocus(e){if(e instanceof HTMLElement){try{e.focus()}catch{}return document.activeElement===e}}focusElementIn(e){const t=this.modalRoot,n=Array.from(t.querySelectorAll(xe)),r=e?0:n.length-1,i=n[r];this.tryToFocus(i)}render(){const{style:e}=this.props;return s.createElement(s.Fragment,null,s.createElement("div",{tabIndex:0,className:"modal-focus-trap-first",onFocus:this.handleFocusMoveToLast,style:{position:"fixed"}}),s.createElement(m,{style:e,ref:this.getModalRoot},this.props.children),s.createElement("div",{tabIndex:0,className:"modal-focus-trap-last",onFocus:this.handleFocusMoveToFirst,style:{position:"fixed"}}))}}const z="data-modal-launcher-portal",Ee="a[href], details, input, textarea, select, button";function ve(o){return Array.from(o.querySelectorAll(Ee))}class _e extends s.Component{constructor(...e){super(...e),this._mousePressedOutside=!1,this.handleMouseDown=t=>{this._mousePressedOutside=t.target===t.currentTarget},this.handleMouseUp=t=>{t.target===t.currentTarget&&this._mousePressedOutside&&this.props.onCloseModal(),this._mousePressedOutside=!1}}componentDidMount(){const e=x.findDOMNode(this);if(!e)return;const t=this._getInitialFocusElement(e)||this._getFirstFocusableElement(e)||this._getDialogElement(e);setTimeout(()=>{t.focus()},0)}_getInitialFocusElement(e){const{initialFocusId:t}=this.props;return t?x.findDOMNode(e.querySelector(`#${t}`)):null}_getFirstFocusableElement(e){const t=ve(e);return t?t[0]:null}_getDialogElement(e){const t=x.findDOMNode(e.querySelector('[role="dialog"]'));return t.tabIndex=-1,t}render(){const{children:e,testId:t}=this.props,n={[z]:!0};return s.createElement(m,P({style:Me.modalPositioner,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,testId:t},n),e)}}const Me=E.StyleSheet.create({modalPositioner:{position:"fixed",left:0,top:0,width:"100%",height:"100%",alignItems:"center",justifyContent:"center",overflow:"auto",background:y.offBlack64}}),A=(()=>{if(typeof window>"u")return!1;const o=window.navigator.userAgent;return o.indexOf("iPad")>-1||o.indexOf("iPhone")>-1})();class a extends s.Component{componentDidMount(){if(a.numModalsOpened===0){const e=document.body;if(!e)throw new Error("couldn't find document.body");a.oldOverflow=e.style.overflow,a.oldScrollY=window.scrollY,A&&(a.oldPosition=e.style.position,a.oldWidth=e.style.width,a.oldTop=e.style.top),e.style.overflow="hidden",A&&(e.style.position="fixed",e.style.width="100%",e.style.top=`${-a.oldScrollY}px`)}a.numModalsOpened++}componentWillUnmount(){if(a.numModalsOpened--,a.numModalsOpened===0){const e=document.body;if(!e)throw new Error("couldn't find document.body");e.style.overflow=a.oldOverflow,A&&(e.style.position=a.oldPosition,e.style.width=a.oldWidth,e.style.top=a.oldTop),typeof window<"u"&&window.scrollTo&&window.scrollTo(0,a.oldScrollY)}}render(){return null}}a.oldOverflow=void 0;a.oldPosition=void 0;a.oldScrollY=void 0;a.oldWidth=void 0;a.oldTop=void 0;a.numModalsOpened=0;const Ie={closeModal:void 0},D=s.createContext(Ie);D.displayName="ModalContext";class j extends s.Component{constructor(...e){super(...e),this.lastElementFocusedOutsideModal=void 0,this.state={opened:!1},this._saveLastElementFocused=()=>{this.lastElementFocusedOutsideModal=document.activeElement},this._openModal=()=>{this._saveLastElementFocused(),this.setState({opened:!0})},this._returnFocus=()=>{const{closedFocusId:t,schedule:n}=this.props,r=this.lastElementFocusedOutsideModal;if(t){const i=x.findDOMNode(document.getElementById(t));if(i){n.animationFrame(()=>{i.focus()});return}}r!=null&&n.animationFrame(()=>{r.focus()})},this.handleCloseModal=()=>{this.setState({opened:!1},()=>{const{onClose:t}=this.props;t==null||t(),this._returnFocus()})}}static getDerivedStateFromProps(e,t){return typeof e.opened=="boolean"&&e.children&&console.warn("'children' and 'opened' can't be used together"),typeof e.opened=="boolean"&&!e.onClose&&console.warn("'onClose' should be used with 'opened'"),typeof e.opened!="boolean"&&!e.children&&console.warn("either 'children' or 'opened' must be set"),{opened:typeof e.opened=="boolean"?e.opened:t.opened}}componentDidUpdate(e){!e.opened&&this.props.opened&&this._saveLastElementFocused()}_renderModal(){return typeof this.props.modal=="function"?this.props.modal({closeModal:this.handleCloseModal}):this.props.modal}render(){const e=this.props.children?this.props.children({openModal:this._openModal}):null,{body:t}=document;return t?s.createElement(D.Provider,{value:{closeModal:this.handleCloseModal}},e,this.state.opened&&x.createPortal(s.createElement(we,{style:Se.container},s.createElement(_e,{initialFocusId:this.props.initialFocusId,testId:this.props.testId,onCloseModal:this.props.backdropDismissEnabled?this.handleCloseModal:()=>{}},this._renderModal())),t),this.state.opened&&s.createElement(Ce,{onClose:this.handleCloseModal}),this.state.opened&&s.createElement(a,null)):null}}j.defaultProps={backdropDismissEnabled:!0};class Ce extends s.Component{constructor(...e){super(...e),this._handleKeyup=t=>{t.key==="Escape"&&(t.preventDefault(),t.stopPropagation(),this.props.onClose())}}componentDidMount(){window.addEventListener("keyup",this._handleKeyup)}componentWillUnmount(){window.removeEventListener("keyup",this._handleKeyup)}render(){return null}}const Se=E.StyleSheet.create({container:{zIndex:1080}});se(j);function _(o){const{scrollOverflow:e,style:t,children:n}=o,{theme:r}=F(M),i=L(Fe,r);return s.createElement(m,{style:[i.wrapper,e&&i.scrollOverflow]},s.createElement(m,{style:[i.content,t]},n))}_.__IS_MODAL_CONTENT__=!0;_.isComponentOf=o=>o&&o.type&&o.type.__IS_MODAL_CONTENT__;const Oe="@media (max-width: 767px)",Fe=o=>({wrapper:{flex:1,display:"block"},scrollOverflow:{overflow:"auto"},content:{flex:1,minHeight:"100%",padding:l.xLarge_32,boxSizing:"border-box",[Oe]:{padding:`${l.xLarge_32}px ${l.medium_16}px`}}});_.defaultProps={scrollOverflow:!0};class Le extends s.Component{render(){const{light:e,onClick:t,style:n,testId:r}=this.props;return s.createElement(D.Consumer,null,({closeModal:i})=>{if(i&&t)throw new Error("You've specified 'onClose' on a modal when using ModalLauncher.  Please specify 'onClose' on the ModalLauncher instead");return s.createElement(Q,{icon:Z,"aria-label":"Close modal",onClick:t||i,kind:e?"primary":"tertiary",light:e,style:n,testId:r})})}}function U({closeButtonVisible:o=!0,scrollOverflow:e=!0,light:t=!0,content:n,footer:r,header:i,onClose:d,style:f,testId:c}){const{theme:u}=F(M),h=L(Te,u),g=s.useCallback(()=>{const b=_.isComponentOf(n)?n:s.createElement(_,null,n);return b&&s.cloneElement(b,{scrollOverflow:e,style:[!!r&&h.hasFooter,b.props.style]})},[n,r,e,h.hasFooter])();return s.createElement(m,{style:[h.wrapper,!t&&h.dark,f],testId:c&&`${c}-panel`},o&&s.createElement(Le,{light:!t,onClick:d,style:h.closeButton,testId:c&&`${c}-close`}),i,g,!r||O.isComponentOf(r)?r:s.createElement(O,null,r))}U.defaultProps={closeButtonVisible:!0,scrollOverflow:!0,light:!0};const Te=o=>({wrapper:{flex:"1 1 auto",position:"relative",display:"flex",flexDirection:"column",background:"white",boxSizing:"border-box",overflow:"hidden",height:"100%",width:"100%"},closeButton:{position:"absolute",right:o.spacing.panel.closeButton,top:o.spacing.panel.closeButton,zIndex:1,":focus":{outlineWidth:o.border.width,outlineColor:o.border.color,outlineOffset:1,outlineStyle:"solid",borderRadius:o.border.radius}},dark:{background:o.color.bg.inverse,color:o.color.text.inverse},hasFooter:{paddingBottom:o.spacing.panel.footer}});class Ae extends s.Component{renderHeader(e){const{title:t,breadcrumbs:n=void 0,subtitle:r=void 0,testId:i}=this.props;return n?s.createElement(S,{title:t,breadcrumbs:n,titleId:e,testId:i&&`${i}-header`}):r?s.createElement(S,{title:t,subtitle:r,titleId:e,testId:i&&`${i}-header`}):s.createElement(S,{title:t,titleId:e,testId:i&&`${i}-header`})}render(){const{onClose:e,footer:t,content:n,above:r,below:i,style:d,closeButtonVisible:f,testId:c,titleId:u,role:h,"aria-describedby":I}=this.props;return s.createElement(ce,{styleSheets:ke},({styles:g})=>s.createElement(V,{id:u},b=>s.createElement(q,{style:[g.dialog,d],above:r,below:i,testId:c,"aria-labelledby":b,"aria-describedby":I,role:h},s.createElement(U,{onClose:e,header:this.renderHeader(b),content:n,footer:t,closeButtonVisible:f,testId:c}))))}}Ae.defaultProps={closeButtonVisible:!0};const ke={small:E.StyleSheet.create({dialog:{width:"100%",height:"100%",overflow:"hidden"}}),mdOrLarger:E.StyleSheet.create({dialog:{width:"93.75%",maxWidth:576,height:"81.25%",maxHeight:624}})};function Pe(o){let e=o&&o.parentElement;for(;e&&!e.hasAttribute(z);)e=e.parentElement;return e}function ze(o){return Pe(o)}export{ze as m};
