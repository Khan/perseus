"use strict";(self.webpackChunkperseus=self.webpackChunkperseus||[]).push([[2017],{"./node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aD:()=>chunk_AY7I2SME.aD});var chunk_AY7I2SME=__webpack_require__("./node_modules/@storybook/addon-actions/dist/chunk-AY7I2SME.mjs")},"./packages/perseus-editor/src/all-editors.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>all_editors});var categorizer_editor=__webpack_require__("./packages/perseus-editor/src/widgets/categorizer-editor.tsx"),src=__webpack_require__("./packages/perseus/src/index.ts"),jquery=__webpack_require__("./node_modules/jquery/dist/jquery.js"),jquery_default=__webpack_require__.n(jquery),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("./node_modules/react/index.js"),index_all=__webpack_require__("./node_modules/underscore/modules/index-all.js"),blur_input=__webpack_require__("./packages/perseus-editor/src/components/blur-input.tsx");const{InfoTip,PropCheckBox}=src.components;class PairEditor extends react.Component{static propTypes={...src.ye.i,name:prop_types_default().string,value:prop_types_default().string};static defaultProps={name:"",value:""};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();serialize=()=>src.yU.serialize.call(this);render(){return react.createElement("fieldset",{className:"pair-editor"},react.createElement("label",null,"Name:"," ",react.createElement(blur_input.Z,{value:this.props.name,onChange:this.change("name")})),react.createElement("label",null," ","Value:"," ",react.createElement(blur_input.Z,{value:this.props.value,onChange:this.change("value")})))}}class PairsEditor extends react.Component{static propTypes={...src.ye.i,pairs:prop_types_default().arrayOf(prop_types_default().shape({name:prop_types_default().string,value:prop_types_default().string})).isRequired};change=(()=>{var _this2=this;return function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return src.ye.m.apply(_this2,args)}})();handlePairChange=(pairIndex,pair)=>{const pairs=this.props.pairs.slice();pairs[pairIndex]=pair;const lastPair=pairs[pairs.length-1];lastPair.name&&lastPair.value&&pairs.push({name:"",value:""}),this.change("pairs",pairs)};serialize=()=>src.yU.serialize.call(this);render(){const editors=index_all.ZP.map(this.props.pairs,((pair,i)=>react.createElement(PairEditor,{key:i,name:pair.name,value:pair.value,onChange:this.handlePairChange.bind(this,i)})));return react.createElement("div",null,editors)}}const KA_PROGRAM_URL=/khanacademy\.org\/computer-programming\/[^\/]+\/(\d+)/;class CSProgramEditor extends react.Component{static propTypes={...src.ye.i};static widgetName="cs-program";static defaultProps={programID:"",programType:null,settings:[{name:"",value:""}],showEditor:!1,showButtons:!1,width:400,height:400};change=(()=>{var _this3=this;return function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return src.ye.m.apply(_this3,args)}})();_handleSettingsChange=settings=>{this.change({settings:settings.pairs})};_handleProgramIDChange=programID=>{programID=function isolateProgramID(programUrl){const match=KA_PROGRAM_URL.exec(programUrl);return match&&(programUrl=match[1]),programUrl}(programID);const{isDevServer,InitialRequestUrl}=src.Dependencies.getDependencies(),baseUrl=`${isDevServer?InitialRequestUrl.origin:"https://www.khanacademy.org"}/api/internal/scratchpads/${programID}`;jquery_default().getJSON(baseUrl).done((programInfo=>{const programType=programInfo.userAuthoredContentType;this.change({width:programInfo.width,height:programInfo.height,programID,programType})})).fail(((jqxhr,textStatus,error)=>{src.Zb.error("Error retrieving scratchpad info for program ID ",src.D1.TransientService,{cause:error,loggedMetadata:{textStatus,programID}}),this.change({width:400,height:400,programID,programType:null})}))};serialize=()=>src.yU.serialize.call(this);render(){return react.createElement("div",null,react.createElement("label",null,"Url or Program ID:"," ",react.createElement(blur_input.Z,{value:this.props.programID,onChange:this._handleProgramIDChange})),react.createElement("br",null),react.createElement(PropCheckBox,{label:"Show Editor",showEditor:this.props.showEditor,onChange:this.props.onChange}),react.createElement(InfoTip,null,'If you show the editor, you should use the "full-width" alignment to make room for the width of the editor.'),react.createElement("br",null),react.createElement(PropCheckBox,{label:"Show Buttons",showButtons:this.props.showButtons,onChange:this.props.onChange}),react.createElement("br",null),react.createElement("label",null,"Settings:",react.createElement(PairsEditor,{name:"settings",pairs:this.props.settings,onChange:this._handleSettingsChange}),react.createElement(InfoTip,null,"Settings that you add here are available to the program as an object returned by ",react.createElement("code",null,"Program.settings()"))))}}const cs_program_editor=CSProgramEditor;try{CSProgramEditor.displayName="CSProgramEditor",CSProgramEditor.__docgenInfo={description:"This is the main editor for this widget, to specify all the options.",displayName:"CSProgramEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/cs-program-editor.tsx#CSProgramEditor"]={docgenInfo:CSProgramEditor.__docgenInfo,name:"CSProgramEditor",path:"packages/perseus-editor/src/widgets/cs-program-editor.tsx#CSProgramEditor"})}catch(__react_docgen_typescript_loader_error){}var definition_editor=__webpack_require__("./packages/perseus-editor/src/widgets/definition-editor.tsx"),dropdown_editor=__webpack_require__("./packages/perseus-editor/src/widgets/dropdown-editor.tsx");const ExampleGraphieWidget=__webpack_require__("./packages/perseus-editor/src/widgets/example-graphie-widget.tsx").Z.widget;class ExampleGraphieWidgetEditor extends react.Component{static propTypes={...src.ye.i};static widgetName="example-graphie-widget";static defaultProps={correct:[4,4],graph:{box:[340,340],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],valid:!0,backgroundImage:null,markings:"grid",showProtractor:!1}};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();handleChange=newProps=>{newProps.coord&&this.change({correct:newProps.coord})};serialize=()=>src.yU.serialize.call(this);render(){return react.createElement("div",null,react.createElement(ExampleGraphieWidget,{graph:this.props.graph,coord:this.props.correct,onChange:this.handleChange,apiOptions:this.props.apiOptions}))}}const example_graphie_widget_editor=ExampleGraphieWidgetEditor;try{ExampleGraphieWidgetEditor.displayName="ExampleGraphieWidgetEditor",ExampleGraphieWidgetEditor.__docgenInfo={description:"This is the widget's editor. This is what shows up on the left side\nof the screen in the demo page. Only the question writer sees this.",displayName:"ExampleGraphieWidgetEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/example-graphie-widget-editor.tsx#ExampleGraphieWidgetEditor"]={docgenInfo:ExampleGraphieWidgetEditor.__docgenInfo,name:"ExampleGraphieWidgetEditor",path:"packages/perseus-editor/src/widgets/example-graphie-widget-editor.tsx#ExampleGraphieWidgetEditor"})}catch(__react_docgen_typescript_loader_error){}class ExampleWidgetEditor extends react.Component{static propTypes={...src.ye.i};static widgetName="example-widget";static defaultProps={correct:""};input=react.createRef();handleAnswerChange=event=>{this.change({correct:event.target.value})};render(){return react.createElement("div",null,react.createElement("label",null,"Correct answer:",react.createElement("input",{value:this.props.correct,onChange:this.handleAnswerChange,ref:this.input})))}change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();focus=()=>(this.input.current?.focus(),!0);serialize=()=>src.yU.serialize.call(this)}const example_widget_editor=ExampleWidgetEditor;try{ExampleWidgetEditor.displayName="ExampleWidgetEditor",ExampleWidgetEditor.__docgenInfo={description:"This is the widget's editor. This is what shows up on the left side\nof the screen in the demo. Only the question writer sees this.",displayName:"ExampleWidgetEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/example-widget-editor.tsx#ExampleWidgetEditor"]={docgenInfo:ExampleWidgetEditor.__docgenInfo,name:"ExampleWidgetEditor",path:"packages/perseus-editor/src/widgets/example-widget-editor.tsx#ExampleWidgetEditor"})}catch(__react_docgen_typescript_loader_error){}var explanation_editor=__webpack_require__("./packages/perseus-editor/src/widgets/explanation-editor.tsx"),expression_editor=__webpack_require__("./packages/perseus-editor/src/widgets/expression-editor.tsx"),lib=__webpack_require__("./node_modules/aphrodite/lib/index.js"),editor=__webpack_require__("./packages/perseus-editor/src/editor.tsx");const{InlineIcon,TextInput}=src.components,{iconPlus,iconTrash}=src.icons;class GradedGroupEditor extends react.Component{static propTypes={...src.ye.i,title:prop_types_default().string,content:prop_types_default().string,widgets:prop_types_default().object,images:prop_types_default().object,apiOptions:src._E.propTypes};static widgetName="graded-group";static defaultProps={title:"",content:"",widgets:{},images:{},hint:null};editor=react.createRef();hintEditor=react.createRef();change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();handleAddHint=()=>{this.props.onChange({hint:{content:""}},(()=>{this.hintEditor.current?.focus()}))};handleRemoveHint=e=>{this.props.onChange({hint:null})};render(){return react.createElement("div",{className:"perseus-group-editor"},react.createElement("div",{className:"perseus-widget-row"},react.createElement("label",{className:(0,lib.css)(styles.title)},"Title:"," ",react.createElement(TextInput,{value:this.props.title,className:(0,lib.css)(styles.input),onChange:this.change("title")}))),react.createElement(editor.Z,{ref:this.editor,content:this.props.content,widgets:this.props.widgets,apiOptions:this.props.apiOptions,images:this.props.images,widgetEnabled:!0,immutableWidgets:!1,onChange:this.props.onChange,warnNoPrompt:!0,warnNoWidgets:!0}),!this.props.hint&&react.createElement("button",{type:"button",style:{marginTop:10},className:"add-hint simple-button orange",onClick:this.handleAddHint},react.createElement(InlineIcon,iconPlus)," Add a hint"),this.props.hint&&react.createElement("div",{className:"perseus-hint-editor"},react.createElement("div",{className:(0,lib.css)(styles.hintsTitle)},"Hint"),react.createElement(editor.Z,{ref:this.hintEditor,content:this.props.hint?this.props.hint.content:"",widgets:this.props.hint?this.props.hint.widgets:{},apiOptions:this.props.apiOptions,images:this.props.hint&&this.props.hint.images,widgetEnabled:!0,immutableWidgets:!1,onChange:props=>{this.change("hint",Object.assign({},this.props.hint,props))}}),react.createElement("button",{type:"button",className:"remove-hint simple-button orange",onClick:this.handleRemoveHint},react.createElement(InlineIcon,iconTrash)," Remove this hint")))}getSaveWarnings=()=>this.editor.current?.getSaveWarnings();serialize=()=>({title:this.props.title,...this.editor.current?.serialize(),hint:this.hintEditor.current?.serialize()})}const styles=lib.StyleSheet.create({title:{fontSize:18,fontWeight:"bold"},input:{fontSize:18},hintsTitle:{marginTop:10,fontSize:"110%",fontWeight:"bold"}}),graded_group_editor=GradedGroupEditor;try{GradedGroupEditor.displayName="GradedGroupEditor",GradedGroupEditor.__docgenInfo={description:"",displayName:"GradedGroupEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/graded-group-editor.tsx#GradedGroupEditor"]={docgenInfo:GradedGroupEditor.__docgenInfo,name:"GradedGroupEditor",path:"packages/perseus-editor/src/widgets/graded-group-editor.tsx#GradedGroupEditor"})}catch(__react_docgen_typescript_loader_error){}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}class GradedGroupSetEditor extends react.Component{static propTypes={...src.ye.i,apiOptions:src._E.propTypes,gradedGroups:prop_types_default().array,onChange:prop_types_default().func.isRequired};static widgetName="graded-group-set";static defaultProps={gradedGroups:[]};UNSAFE_componentWillMount(){this._editors=[]}change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();getSaveWarnings=()=>[].concat(...this._editors.map((editor=>editor?editor.getSaveWarnings():[])));serialize=()=>({gradedGroups:this.props.gradedGroups});renderGroups=()=>this.props.gradedGroups?this.props.gradedGroups.map(((group,i)=>react.createElement(graded_group_editor,_extends({key:i,ref:el=>this._editors[i]=el},group,{apiOptions:this.props.apiOptions,widgetEnabled:!0,immutableWidgets:!1,onChange:data=>this.change("gradedGroups",setArrayItem(this.props.gradedGroups,i,{...this.props.gradedGroups[i],...data}))})))):null;addGroup=()=>{const groups=this.props.gradedGroups||[];this.change("gradedGroups",groups.concat([graded_group_editor.defaultProps]))};render(){return react.createElement("div",{className:"perseus-group-editor"},this.renderGroups(),react.createElement("button",{onClick:this.addGroup},"Add group"))}}const setArrayItem=(list,i,value)=>[...list.slice(0,i),value,...list.slice(i+1)],graded_group_set_editor=GradedGroupSetEditor;try{GradedGroupSetEditor.displayName="GradedGroupSetEditor",GradedGroupSetEditor.__docgenInfo={description:"",displayName:"GradedGroupSetEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/graded-group-set-editor.tsx#GradedGroupSetEditor"]={docgenInfo:GradedGroupSetEditor.__docgenInfo,name:"GradedGroupSetEditor",path:"packages/perseus-editor/src/widgets/graded-group-set-editor.tsx#GradedGroupSetEditor"})}catch(__react_docgen_typescript_loader_error){}var graph_settings=__webpack_require__("./packages/perseus-editor/src/components/graph-settings.tsx");function grapher_editor_extends(){return grapher_editor_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},grapher_editor_extends.apply(this,arguments)}const{InfoTip:grapher_editor_InfoTip,MultiButtonGroup}=src.components,{containerSizeClass,getInteractiveBoxFromSizeClass}=src.SizingUtils,Grapher=src.AE.widget,{DEFAULT_GRAPHER_PROPS,allTypes,chooseType,defaultPlotProps,getEquationString,typeToButton}=src.GrapherUtil;class GrapherEditor extends react.Component{static propTypes={...src.ye.i};static widgetName="grapher";static defaultProps={correct:DEFAULT_GRAPHER_PROPS.plot,graph:DEFAULT_GRAPHER_PROPS.graph,availableTypes:DEFAULT_GRAPHER_PROPS.availableTypes};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();render(){const sizeClass=containerSizeClass.SMALL;let equationString,graph;if(!0===this.props.graph.valid){const graphProps={graph:this.props.graph,plot:this.props.correct,availableTypes:this.props.availableTypes,onChange:(newProps,cb)=>{let correct=this.props.correct;correct=correct.type===newProps.plot?.type?index_all.ZP.extend({},correct,newProps.plot):newProps.plot,this.props.onChange({correct},cb)},trackInteraction:function(){}};graph=react.createElement(Grapher,grapher_editor_extends({},graphProps,{apiOptions:this.props.apiOptions,containerSizeClass:sizeClass})),equationString=getEquationString(graphProps)}else graph=react.createElement("div",{className:"perseus-error"},this.props.graph.valid);return react.createElement("div",null,react.createElement("div",null,"Correct answer"," ",react.createElement(grapher_editor_InfoTip,null,react.createElement("p",null,"Graph the correct answer in the graph below and ensure the equation or point coordinates displayed represent the correct answer."))," ",": ",equationString),react.createElement(graph_settings.Z,{editableSettings:["graph","snap","image"],box:getInteractiveBoxFromSizeClass(sizeClass),range:this.props.graph.range,labels:this.props.graph.labels,step:this.props.graph.step,gridStep:this.props.graph.gridStep,snapStep:this.props.graph.snapStep,valid:this.props.graph.valid,backgroundImage:this.props.graph.backgroundImage,markings:this.props.graph.markings,rulerLabel:this.props.graph.rulerLabel,rulerTicks:this.props.graph.rulerTicks,showTooltips:this.props.graph.showTooltips,onChange:this.change("graph")}),react.createElement("div",{className:"perseus-widget-row"},react.createElement("label",null,"Available functions: "),react.createElement(MultiButtonGroup,{allowEmpty:!1,values:this.props.availableTypes,buttons:index_all.ZP.map(allTypes,typeToButton),onChange:this.handleAvailableTypesChange})),graph)}handleAvailableTypesChange=newAvailableTypes=>{let correct=this.props.correct;if(!index_all.ZP.contains(newAvailableTypes,this.props.correct.type)){const graph=this.props.graph,newType=chooseType(newAvailableTypes);correct=defaultPlotProps(newType,graph)}this.props.onChange({availableTypes:newAvailableTypes,correct})};serialize=()=>index_all.ZP.chain(this.props).pick("correct","availableTypes").extend({graph:index_all.ZP.omit(this.props.graph,"box")}).value()}const grapher_editor=GrapherEditor;try{GrapherEditor.displayName="GrapherEditor",GrapherEditor.__docgenInfo={description:"",displayName:"GrapherEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/grapher-editor.tsx#GrapherEditor"]={docgenInfo:GrapherEditor.__docgenInfo,name:"GrapherEditor",path:"packages/perseus-editor/src/widgets/grapher-editor.tsx#GrapherEditor"})}catch(__react_docgen_typescript_loader_error){}class GroupEditor extends react.Component{static propTypes={...src.ye.i,content:prop_types_default().string,widgets:prop_types_default().object,images:prop_types_default().object,metadata:prop_types_default().any,apiOptions:src._E.propTypes};static widgetName="group";static defaultProps={content:"",widgets:{},images:{},metadata:void 0};editor=react.createRef();render(){return react.createElement("div",{className:"perseus-group-editor"},react.createElement("div",null,this._renderMetadataEditor()),react.createElement(editor.Z,{ref:this.editor,content:this.props.content,widgets:this.props.widgets,apiOptions:this.props.apiOptions,images:this.props.images,widgetEnabled:!0,immutableWidgets:!1,onChange:this.props.onChange}))}_renderMetadataEditor=()=>{const GroupMetadataEditor=this.props.apiOptions.GroupMetadataEditor;return react.createElement(GroupMetadataEditor,{value:this.props.metadata,onChange:this.change("metadata")})};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();getSaveWarnings=()=>this.editor.current?.getSaveWarnings();serialize=()=>index_all.ZP.extend({},this.editor.current?.serialize(),{metadata:this.props.metadata})}const group_editor=GroupEditor;try{GroupEditor.displayName="GroupEditor",GroupEditor.__docgenInfo={description:"",displayName:"GroupEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/group-editor.tsx#GroupEditor"]={docgenInfo:GroupEditor.__docgenInfo,name:"GroupEditor",path:"packages/perseus-editor/src/widgets/group-editor.tsx#GroupEditor"})}catch(__react_docgen_typescript_loader_error){}const{PropCheckBox:iframe_editor_PropCheckBox}=src.components;class iframe_editor_PairEditor extends react.Component{static propTypes={...src.ye.i,name:prop_types_default().string,value:prop_types_default().string};static defaultProps={name:"",value:""};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();render(){return react.createElement("fieldset",null,react.createElement("label",null,"Name:",react.createElement(blur_input.Z,{value:this.props.name,onChange:this.change("name")})),react.createElement("label",null,"Value:",react.createElement(blur_input.Z,{value:this.props.value,onChange:this.change("value")})))}serialize=()=>src.yU.serialize.call(this)}class iframe_editor_PairsEditor extends react.Component{static propTypes={...src.ye.i,pairs:prop_types_default().arrayOf(prop_types_default().shape({name:prop_types_default().string,value:prop_types_default().string})).isRequired};render(){const editors=index_all.ZP.map(this.props.pairs,((pair,i)=>react.createElement(iframe_editor_PairEditor,{key:i,name:pair.name,value:pair.value,onChange:this.handlePairChange.bind(this,i)})));return react.createElement("div",null,editors)}change=(()=>{var _this2=this;return function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return src.ye.m.apply(_this2,args)}})();handlePairChange=(pairIndex,pair)=>{const pairs=this.props.pairs.slice();pairs[pairIndex]=pair;const lastPair=pairs[pairs.length-1];lastPair.name&&lastPair.value&&pairs.push({name:"",value:""}),this.change("pairs",pairs)};serialize=()=>src.yU.serialize.call(this)}class IframeEditor extends react.Component{static propTypes={...src.ye.i};static widgetName="iframe";static defaultProps={url:"",settings:[{name:"",value:""}],width:"400",height:"400",allowFullScreen:!1,allowTopNavigation:!1};change=(()=>{var _this3=this;return function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return src.ye.m.apply(_this3,args)}})();render(){return react.createElement("div",null,react.createElement("div",{style:{fontWeight:"bold",textAlign:"center"}},"This widget is deprecated! ",react.createElement("br",null),"Try using the Video or CS Program widgets instead."),react.createElement("label",null,"Url or Program ID:",react.createElement(blur_input.Z,{value:this.props.url,onChange:this.change("url")})),react.createElement("br",null),react.createElement("label",null,"Settings:",react.createElement(iframe_editor_PairsEditor,{name:"settings",pairs:this.props.settings,onChange:this.handleSettingsChange})),react.createElement("br",null),react.createElement("label",null,"Width:",react.createElement(blur_input.Z,{value:this.props.width,onChange:this.change("width")})),react.createElement("label",null,"Height:",react.createElement(blur_input.Z,{value:this.props.height,onChange:this.change("height")})),react.createElement(iframe_editor_PropCheckBox,{label:"Allow full screen",allowFullScreen:this.props.allowFullScreen,onChange:this.props.onChange}),react.createElement("br",null),react.createElement(iframe_editor_PropCheckBox,{label:"Allow iframe content to redirect the page",allowTopNavigation:this.props.allowTopNavigation,onChange:this.props.onChange}))}handleSettingsChange=settings=>{this.change({settings:settings.pairs})};serialize=()=>src.yU.serialize.call(this)}const iframe_editor=IframeEditor;try{IframeEditor.displayName="IframeEditor",IframeEditor.__docgenInfo={description:"This is the main editor for this widget, to specify all the options.",displayName:"IframeEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/iframe-editor.tsx#IframeEditor"]={docgenInfo:IframeEditor.__docgenInfo,name:"IframeEditor",path:"packages/perseus-editor/src/widgets/iframe-editor.tsx#IframeEditor"})}catch(__react_docgen_typescript_loader_error){}var create_react_class=__webpack_require__("./node_modules/create-react-class/index.js"),create_react_class_default=__webpack_require__.n(create_react_class);const{InfoTip:image_editor_InfoTip,InlineIcon:image_editor_InlineIcon,RangeInput}=src.components,defaultRange=[0,10],defaultBackgroundImage={url:null,width:0,height:0},INTERNALLY_HOSTED_URL_RE=new RegExp("^(https?|web\\+graphie)://[^/]*(ka-.*.s3.amazonaws.com|(fastly|cdn).kastatic.org|khanacademy.org|kasandbox.org)"),captionAlignments=["center","above","above right","right","below right","below","below left","left","above left"],image_editor=create_react_class_default()({displayName:"ImageEditor",propTypes:{...src.ye.i},statics:{widgetName:"image"},componentDidMount:function(){this._isMounted=!0},componentWillUnmount:function(){this._isMounted=!1},getDefaultProps:function(){return{title:"",range:[defaultRange,defaultRange],box:[400,400],backgroundImage:defaultBackgroundImage,labels:[],alt:"",caption:""}},getInitialState:function(){return{backgroundImageError:""}},render:function(){const backgroundImage=this.props.backgroundImage,imageSettings=react.createElement("div",{className:"image-settings"},!src.Util.isLabeledSVG(backgroundImage.url)&&react.createElement("div",null,react.createElement("label",null,react.createElement("div",null,"Preview:"),react.createElement("img",{alt:"Editor preview of image",src:backgroundImage.url,style:{width:"100%"}}))),react.createElement("div",null,react.createElement("label",null,react.createElement("div",null,"Dimensions:"),react.createElement("p",null,backgroundImage.width,"x",backgroundImage.height))),react.createElement("div",null,react.createElement("label",null,react.createElement("div",null,"Alt text:",react.createElement(image_editor_InfoTip,null,"This is important for screenreaders. The content of this alt text will be formatted as markdown (tables, emphasis, etc. are supported).")),react.createElement(editor.Z,{apiOptions:this.props.apiOptions,content:this.props.alt,onChange:props=>{null!=props.content&&this.change("alt",props.content)},widgetEnabled:!1}))),react.createElement("div",null,react.createElement("label",null,react.createElement("div",null,"Caption:"),react.createElement(editor.Z,{apiOptions:this.props.apiOptions,content:this.props.caption,onChange:props=>{null!=props.content&&this.change("caption",props.content)},widgetEnabled:!1})))),backgroundImageErrorText=react.createElement("div",{className:"renderer-widget-error"},this.state.backgroundImageError);return react.createElement("div",{className:"perseus-image-editor"},react.createElement("label",null,"Image url:",react.createElement(image_editor_InfoTip,null,"Paste an image or graphie image URL."),this.state.backgroundImageError&&backgroundImageErrorText,react.createElement(blur_input.Z,{value:backgroundImage.url||"",style:{width:332},onChange:url=>this.onUrlChange(url,!1)})),backgroundImage.url&&imageSettings)},_renderRowForLabel:function(label,i){return react.createElement("tr",{key:i},react.createElement("td",null,react.createElement(RangeInput,{value:label.coordinates,onChange:this.onCoordinateChange.bind(this,i)})),react.createElement("td",{style:{verticalAlign:"bottom",width:"5px"}},react.createElement("input",{type:"text",className:"graph-settings-axis-label",value:label.content,onChange:this.onContentChange.bind(this,i)})),react.createElement("td",null,react.createElement("select",{className:"perseus-widget-dropdown",value:label.alignment,onChange:this.onAlignmentChange.bind(this,i)},captionAlignments.map((function(alignment,i){return react.createElement("option",{key:""+i,value:alignment},alignment)}),this))),react.createElement("td",null,react.createElement("a",{href:"#",className:"simple-button orange delete-label",title:"Remove this label",onClick:this.removeLabel.bind(this,i)},react.createElement(image_editor_InlineIcon,src.icons.iconTrash))))},change(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(this,args)},removeLabel:function(labelIndex,e){e.preventDefault();const labels=(0,index_all.ZP)(this.props.labels).clone();labels.splice(labelIndex,1),this.props.onChange({labels})},onCoordinateChange:function(labelIndex,newCoordinates){const labels=this.props.labels.slice();labels[labelIndex]=index_all.ZP.extend({},labels[labelIndex],{coordinates:newCoordinates}),this.props.onChange({labels})},onContentChange:function(labelIndex,e){const newContent=e.target.value,labels=this.props.labels.slice();labels[labelIndex]=index_all.ZP.extend({},labels[labelIndex],{content:newContent}),this.props.onChange({labels})},onAlignmentChange:function(labelIndex,e){const newAlignment=e.target.value,labels=this.props.labels.slice();labels[labelIndex]=index_all.ZP.extend({},labels[labelIndex],{alignment:newAlignment}),this.props.onChange({labels})},setUrl:function(url,width,height,silent){if(!this._isMounted)return;const image=index_all.ZP.clone(this.props.backgroundImage);image.url=url,image.width=width,image.height=height;const box=[image.width,image.height];this.props.onChange({backgroundImage:image,box},null,silent)},onUrlChange:async function(url,silent){if(url)if(INTERNALLY_HOSTED_URL_RE.test(url)){this.setState({backgroundImageError:""});try{const size=await src.Util.getImageSizeModern(url);this.setUrl(url,size[0],size[1],!0)}catch(error){this.setState({backgroundImageError:`There was an error loading the image URL: ${JSON.stringify(error,null,2)}`})}}else this.setState({backgroundImageError:"Images must be from sites hosted by Khan Academy. Please input a Khan Academy-owned address, or use the Add Image tool to rehost an existing image"});else this.setUrl(url,0,0,silent)},onRangeChange:function(type,newRange){const range=this.props.range.slice();range[type]=newRange,this.props.onChange({range})},serialize(){return src.yU.serialize.call(this)}});var input_number_editor=__webpack_require__("./packages/perseus-editor/src/widgets/input-number-editor.tsx"),interaction_editor=__webpack_require__("./packages/perseus-editor/src/widgets/interaction-editor/index.ts"),es=__webpack_require__("./node_modules/@khanacademy/wonder-blocks-core/dist/es/index.js"),dist_es=__webpack_require__("./node_modules/@khanacademy/wonder-blocks-spacing/dist/es/index.js"),wonder_blocks_typography_dist_es=__webpack_require__("./node_modules/@khanacademy/wonder-blocks-typography/dist/es/index.js");const parsePointCount=points=>{const parsed=parseInt(points,10);return isNaN(parsed)||0===parsed?"unlimited":parsed},graph_points_count_selector=_ref=>{let{numPoints=1,onChange}=_ref;return react.createElement("select",{value:numPoints,onChange:e=>{onChange(parsePointCount(e.target.value))}},[...Array(7).keys()].map((n=>react.createElement("option",{key:n,value:n},`${n} point${n>1?"s":""}`))),react.createElement("option",{value:"unlimited"},"unlimited"))};try{graphpointscountselector.displayName="graphpointscountselector",graphpointscountselector.__docgenInfo={description:"",displayName:"graphpointscountselector",props:{numPoints:{defaultValue:{value:"1"},description:"",name:"numPoints",required:!1,type:{name:"PointValue"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(points: PointValue) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/components/graph-points-count-selector.tsx#graphpointscountselector"]={docgenInfo:graphpointscountselector.__docgenInfo,name:"graphpointscountselector",path:"packages/perseus-editor/src/components/graph-points-count-selector.tsx#graphpointscountselector"})}catch(__react_docgen_typescript_loader_error){}const graph_type_selector=props=>react.createElement("select",{value:props.graphType,onChange:e=>{const type=e.target.value;props.onChange(type)}},react.createElement("option",{value:"linear"},"Linear function"),react.createElement("option",{value:"quadratic"},"Quadratic function"),react.createElement("option",{value:"sinusoid"},"Sinusoid function"),react.createElement("option",{value:"circle"},"Circle"),react.createElement("option",{value:"point"},"Point(s)"),react.createElement("option",{value:"linear-system"},"Linear System"),react.createElement("option",{value:"polygon"},"Polygon"),react.createElement("option",{value:"segment"},"Line Segment(s)"),react.createElement("option",{value:"ray"},"Ray"),react.createElement("option",{value:"angle"},"Angle"));try{graphtypeselector.displayName="graphtypeselector",graphtypeselector.__docgenInfo={description:"",displayName:"graphtypeselector",props:{graphType:{defaultValue:null,description:"",name:"graphType",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newGraphType: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/components/graph-type-selector.tsx#graphtypeselector"]={docgenInfo:graphtypeselector.__docgenInfo,name:"graphtypeselector",path:"packages/perseus-editor/src/components/graph-type-selector.tsx#graphtypeselector"})}catch(__react_docgen_typescript_loader_error){}const segment_count_selector=_ref=>{let{numSegments=1,onChange}=_ref;return react.createElement("select",{key:"segment-select",value:numSegments,onChange:e=>{const num=+e.target.value;onChange(num)}},index_all.ZP.range(1,7).map((n=>react.createElement("option",{key:n,value:n},`${n} segment${n>1?"s":""}`))))};try{segmentcountselector.displayName="segmentcountselector",segmentcountselector.__docgenInfo={description:"",displayName:"segmentcountselector",props:{numSegments:{defaultValue:{value:"1"},description:"",name:"numSegments",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(numSegments: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/components/segment-count-selector.tsx#segmentcountselector"]={docgenInfo:segmentcountselector.__docgenInfo,name:"segmentcountselector",path:"packages/perseus-editor/src/components/segment-count-selector.tsx#segmentcountselector"})}catch(__react_docgen_typescript_loader_error){}function interactive_graph_editor_extends(){return interactive_graph_editor_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},interactive_graph_editor_extends.apply(this,arguments)}const{InfoTip:interactive_graph_editor_InfoTip}=src.components,{containerSizeClass:interactive_graph_editor_containerSizeClass,getInteractiveBoxFromSizeClass:interactive_graph_editor_getInteractiveBoxFromSizeClass}=src.SizingUtils,DeprecationMixin=src.Util.DeprecationMixin,InteractiveGraph=src.Gl.widget,interactive_graph_editor_defaultBackgroundImage={url:null},deprecatedProps={showGraph:function(props){return{markings:props.showGraph?"graph":"none"}}},Row=props=>{const{children,style}=props;return react.createElement(es.G7,{style:{...style,flexDirection:"row",marginTop:dist_es.Z.xSmall_8}},children)},FieldLabel=props=>react.createElement(wonder_blocks_typography_dist_es.S$,{style:{marginRight:dist_es.Z.xSmall_8}},props.children);class InteractiveGraphEditor extends react.Component{displayName="InteractiveGraphEditor";className="perseus-widget-interactive-graph";static widgetName="interactive-graph";static defaultProps={...InteractiveGraph.defaultProps,valid:!0,backgroundImage:interactive_graph_editor_defaultBackgroundImage,showTooltips:!1,correct:{type:InteractiveGraph.defaultProps.graph.type,coords:null}};deprecatedProps=deprecatedProps;UNSAFE_componentWillMount(){DeprecationMixin.UNSAFE_componentWillMount.call(this)}render(){let graph,equationString;const gridStep=this.props.gridStep||src.Util.getGridStep(this.props.range,this.props.step,src.Yu.defaultBoxSize),snapStep=this.props.snapStep||src.Util.snapStepFromGridStep(gridStep),sizeClass=interactive_graph_editor_containerSizeClass.SMALL;if(!0===this.props.valid){const graphProps={ref:"graph",box:this.props.box,range:this.props.range,labels:this.props.labels,step:this.props.step,gridStep,snapStep,graph:this.props.correct,backgroundImage:this.props.backgroundImage,markings:this.props.markings,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,trackInteraction:function(){},onChange:newProps=>{let correct=this.props.correct;correct=correct.type===newProps.graph.type?index_all.ZP.extend({},correct,newProps.graph):newProps.graph,this.props.onChange({correct})}};graph=react.createElement(InteractiveGraph,interactive_graph_editor_extends({},graphProps,{containerSizeClass:sizeClass,apiOptions:{...this.props.apiOptions,isMobile:!1}})),equationString=InteractiveGraph.getEquationString(graphProps)}else graph=react.createElement("div",{className:"perseus-error"},this.props.valid);return react.createElement(es.G7,null,react.createElement(Row,null,react.createElement(FieldLabel,null,"Type of Graph:"),react.createElement(graph_type_selector,{graphType:this.props.graph?.type??InteractiveGraph.defaultProps.graph.type,onChange:type=>{this.props.onChange({graph:{type},correct:{type}})}})),"point"===this.props.correct?.type&&react.createElement(Row,null,react.createElement(FieldLabel,null,"Number of Points:"),react.createElement(graph_points_count_selector,{numPoints:this.props.correct?.numPoints,onChange:points=>{this.props.onChange({correct:{type:"point",numPoints:points}})}})),"polygon"===this.props.correct?.type&&react.createElement(react.Fragment,null,react.createElement(Row,null,react.createElement(FieldLabel,null,"Number of sides:"),react.createElement("select",{key:"polygon-select",value:this.props.correct?.numSides||3,onChange:e=>{const graph={...this.props.correct,numSides:parsePointCount(e.target.value),coords:null,snapTo:"grid"};this.props.onChange({correct:graph})}},index_all.ZP.map(index_all.ZP.range(3,13),(function(n){return react.createElement("option",{key:n,value:n},`${n} sides`)})),react.createElement("option",{value:"unlimited"},"unlimited sides"))),react.createElement(Row,null,react.createElement(FieldLabel,null,"Snap to:"),react.createElement("select",{key:"polygon-snap",value:this.props.correct?.snapTo,onChange:e=>{const graph={...this.props.correct,snapTo:e.target.value,coords:null};this.props.onChange({correct:graph})}},react.createElement("option",{value:"grid"},"grid"),"unlimited"!==this.props.correct?.numSides&&react.createElement(react.Fragment,null,react.createElement("option",{value:"angles"},"interior angles"),react.createElement("option",{value:"sides"},"side measures"))),react.createElement(interactive_graph_editor_InfoTip,null,react.createElement("p",null,"These options affect the movement of the vertex points. The grid option will guide the points to the nearest half step along the grid."),react.createElement("p",null,"The interior angle and side measure options guide the points to the nearest whole angle or side")," ","measure respectively.")),react.createElement(Row,null,react.createElement(wonder_blocks_typography_dist_es.S$,{tag:"label"},"Show angle measures:"," ",react.createElement("input",{type:"checkbox",checked:this.props.correct?.showAngles,onChange:()=>{this.props.onChange({correct:{...this.props.correct,showAngles:!this.props.correct.showAngles}})}})),react.createElement(interactive_graph_editor_InfoTip,null,react.createElement("p",null,"Displays the interior angle measures."))),react.createElement(Row,null,react.createElement(wonder_blocks_typography_dist_es.S$,{tag:"label"},"Show side measures:"," ",react.createElement("input",{type:"checkbox",checked:this.props.correct?.showSides,onChange:()=>{this.props.onChange({correct:{...this.props.correct,showSides:!this.props.correct.showSides}})}})),react.createElement(interactive_graph_editor_InfoTip,null,react.createElement("p",null,"Displays the side lengths.")))),"segment"===this.props.correct?.type&&react.createElement(Row,null,react.createElement(FieldLabel,null,"Number of segments: "),react.createElement(segment_count_selector,{numSegments:this.props.correct?.numSegments,onChange:sides=>{this.props.onChange({correct:{type:"segment",numSegments:sides,coords:null}})}})),react.createElement(Row,null,react.createElement(FieldLabel,null,"Correct answer:"),react.createElement(wonder_blocks_typography_dist_es.Rr,{style:{fontSize:12,backgroundColor:"#eee",paddingInline:dist_es.Z.xxSmall_6,borderColor:"#ccc",borderStyle:"solid",borderWidth:1}},equationString),react.createElement(interactive_graph_editor_InfoTip,null,react.createElement("p",null,"Graph the correct answer in the graph below and ensure the equation or point coordinates displayed represent the correct answer."))),react.createElement(graph_settings.Z,{box:interactive_graph_editor_getInteractiveBoxFromSizeClass(sizeClass),range:this.props.range,labels:this.props.labels,step:this.props.step,gridStep,snapStep,valid:this.props.valid,backgroundImage:this.props.backgroundImage,markings:this.props.markings,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,showTooltips:this.props.showTooltips,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,onChange:this.props.onChange}),"polygon"===this.props.correct.type&&react.createElement("div",{className:"type-settings"},react.createElement("label",null," ","Student answer must"," ",react.createElement("select",{value:this.props.correct.match,onChange:this.changeMatchType},react.createElement("option",{value:"exact"},"match exactly"),react.createElement("option",{value:"congruent"},"be congruent"),react.createElement("option",{value:"approx"},"be approximately congruent"),react.createElement("option",{value:"similar"},"be similar"))),react.createElement(interactive_graph_editor_InfoTip,null,react.createElement("ul",null,react.createElement("li",null,react.createElement("p",null,react.createElement("b",null,"Match Exactly:")," Match exactly in size, orientation, and location on the grid even if it is not shown in the background.")),react.createElement("li",null,react.createElement("p",null,react.createElement("b",null,"Be Congruent:")," Be congruent in size and shape, but can be located anywhere on the grid.")),react.createElement("li",null,react.createElement("p",null,react.createElement("b",null,"Be Approximately Congruent:")," Be exactly similar, and congruent in size and shape to within 0.1 units, but can be located anywhere on the grid."," ",react.createElement("em",null,"Use this with snapping to angle measure."))),react.createElement("li",null,react.createElement("p",null,react.createElement("b",null,"Be Similar:")," Be similar with matching interior angles, and side measures that are matching or a multiple of the correct side measures. The figure can be located anywhere on the grid."))))),"angle"===this.props.correct.type&&react.createElement("div",{className:"type-settings"},react.createElement("div",null,react.createElement("label",null," ","Student answer must"," ",react.createElement("select",{value:this.props.correct.match,onChange:this.changeMatchType},react.createElement("option",{value:"exact"},"match exactly"),react.createElement("option",{value:"congruent"},"be congruent"))),react.createElement(interactive_graph_editor_InfoTip,null,react.createElement("p",null,"Congruency requires only that the angle measures are the same. An exact match implies congruency, but also requires that the angles have the same orientation and that the vertices are in the same position.")))),graph)}changeMatchType(e){const correct=index_all.ZP.extend({},this.props.correct,{match:e.target.value});this.props.onChange({correct})}serialize(){const json=index_all.ZP.pick(this.props,"step","backgroundImage","markings","labels","showProtractor","showRuler","showTooltips","rulerLabel","rulerTicks","range","gridStep","snapStep"),graph=this.refs.graph;if(graph){const correct=graph&&graph.getUserInput();index_all.ZP.extend(json,{graph:{type:correct.type},correct}),index_all.ZP.each(["allowReflexAngles","angleOffsetDeg","numPoints","numSides","numSegments","showAngles","showSides","snapTo","snapDegrees"],(function(key){index_all.ZP.has(correct,key)&&(json.graph[key]=correct[key])}))}return json}}const interactive_graph_editor=InteractiveGraphEditor;try{InteractiveGraphEditor.displayName="InteractiveGraphEditor",InteractiveGraphEditor.__docgenInfo={description:"",displayName:"InteractiveGraphEditor",props:{apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!0,type:{name:"Readonly<Readonly<{ isArticle?: boolean | undefined; onInputError?: ((widgetId: any, value: string, message?: string | null | undefined) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown..."}},labels:{defaultValue:null,description:"",name:"labels",required:!0,type:{name:"readonly string[]"}},range:{defaultValue:null,description:"",name:"range",required:!0,type:{name:"[Range, Range]"}},step:{defaultValue:null,description:"",name:"step",required:!0,type:{name:"[number, number]"}},gridStep:{defaultValue:null,description:"",name:"gridStep",required:!0,type:{name:"[number, number]"}},snapStep:{defaultValue:null,description:"",name:"snapStep",required:!0,type:{name:"[number, number]"}},box:{defaultValue:null,description:"",name:"box",required:!0,type:{name:"[number, number]"}},valid:{defaultValue:{value:"true"},description:"",name:"valid",required:!1,type:{name:"boolean"}},backgroundImage:{defaultValue:{value:"{\n    url: null,\n} as const"},description:"",name:"backgroundImage",required:!1,type:{name:"PerseusImageBackground"}},markings:{defaultValue:null,description:"",name:"markings",required:!0,type:{name:"string"}},showProtractor:{defaultValue:null,description:"",name:"showProtractor",required:!0,type:{name:"boolean"}},showRuler:{defaultValue:null,description:"",name:"showRuler",required:!0,type:{name:"boolean"}},showTooltips:{defaultValue:{value:"false"},description:"",name:"showTooltips",required:!1,type:{name:"boolean"}},rulerLabel:{defaultValue:null,description:"",name:"rulerLabel",required:!0,type:{name:"string"}},rulerTicks:{defaultValue:null,description:"",name:"rulerTicks",required:!0,type:{name:"number"}},correct:{defaultValue:{value:"{\n            type: InteractiveGraph.defaultProps.graph.type,\n            coords: null,\n        }"},description:"",name:"correct",required:!1,type:{name:"any"}},graph:{defaultValue:null,description:"",name:"graph",required:!0,type:{name:"PerseusGraphType | undefined"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(props: Partial<Props>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/interactive-graph-editor.tsx#InteractiveGraphEditor"]={docgenInfo:InteractiveGraphEditor.__docgenInfo,name:"InteractiveGraphEditor",path:"packages/perseus-editor/src/widgets/interactive-graph-editor.tsx#InteractiveGraphEditor"})}catch(__react_docgen_typescript_loader_error){}var label_image_editor=__webpack_require__("./packages/perseus-editor/src/widgets/label-image-editor.tsx");const{InfoTip:lights_puzzle_editor_InfoTip,NumberInput,PropCheckBox:lights_puzzle_editor_PropCheckBox}=src.components,TABLE_STYLE={display:"table",tableLayout:"fixed"},ROW_STYLE={display:"table-row"},CELL_STYLE={display:"table-cell",padding:5},BASE_TILE_STYLE={borderRadius:10,cursor:"pointer"},PATTERNS={plus:()=>[[!1,!0,!1],[!0,!0,!0],[!1,!0,!1]],x:()=>[[!0,!1,!0],[!1,!0,!1],[!0,!1,!0]],"plus/x":iter=>iter%2?PATTERNS.x():PATTERNS.plus()},clampToInt=function(value,min,max){return value=Math.floor(value),value=Math.max(value,min),value=Math.min(value,max)};class Tile extends react.Component{static propTypes={value:prop_types_default().bool.isRequired,size:prop_types_default().number.isRequired};render(){const color=this.props.value?"#55dd55":"#115511",style=index_all.ZP.extend({},BASE_TILE_STYLE,{width:this.props.size,height:this.props.size,backgroundColor:color});return react.createElement("div",{style,onClick:this._flip})}_flip=()=>{this.props.onChange(!this.props.value)}}class TileGrid extends react.Component{static propTypes={cells:prop_types_default().arrayOf(prop_types_default().arrayOf(prop_types_default().bool)).isRequired,size:prop_types_default().number.isRequired};render(){return react.createElement("div",{style:TABLE_STYLE,className:"no-select"},index_all.ZP.map(this.props.cells,((row,y)=>react.createElement("div",{key:y,style:ROW_STYLE},index_all.ZP.map(row,((cell,x)=>react.createElement("div",{key:x,style:CELL_STYLE},react.createElement(Tile,{value:cell,size:this.props.size,onChange:index_all.ZP.partial(this.props.onChange,y,x)}))))))))}}class LightsPuzzleEditor extends react.Component{static propTypes={...src.ye.i,startCells:prop_types_default().arrayOf(prop_types_default().arrayOf(prop_types_default().bool)),flipPattern:prop_types_default().string.isRequired,gradeIncompleteAsWrong:prop_types_default().bool.isRequired};static widgetName="lights-puzzle";static defaultProps={startCells:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],flipPattern:"plus",gradeIncompleteAsWrong:!1};_height=()=>this.props.startCells.length;_width=()=>0!==this.props.startCells.length?this.props.startCells[0].length:0;change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();render(){return react.createElement("div",null,react.createElement("div",null,"Width:",react.createElement(NumberInput,{value:this._width(),placeholder:5,onChange:this._changeWidth}),", ","Height:",react.createElement(NumberInput,{value:this._height(),placeholder:5,onChange:this._changeHeight})),react.createElement("div",null,"Flip pattern:",react.createElement("select",{value:this.props.flipPattern,onChange:this._handlePatternChange},index_all.ZP.map(index_all.ZP.keys(PATTERNS),((pattern,i)=>react.createElement("option",{value:pattern,key:i},pattern))))),react.createElement("div",null,"Grade incomplete puzzles as wrong:"," ",react.createElement(lights_puzzle_editor_PropCheckBox,{gradeIncompleteAsWrong:this.props.gradeIncompleteAsWrong,onChange:this.props.onChange}),react.createElement(lights_puzzle_editor_InfoTip,null,"By default, incomplete puzzles are graded as empty.")),react.createElement("div",null,"Starting configuration:"),react.createElement("div",{style:{overflowX:"auto"}},react.createElement(TileGrid,{cells:this.props.startCells,size:50,onChange:this._switchTile})))}_handlePatternChange=e=>{this.change("flipPattern",e.target.value)};_changeWidth=newWidth=>{newWidth=clampToInt(newWidth,1,8),this._truncateCells(newWidth,this._height())};_changeHeight=newHeight=>{newHeight=clampToInt(newHeight,1,8),this._truncateCells(this._width(),newHeight)};_truncateCells=(newWidth,newHeight)=>{const newCells=index_all.ZP.times(newHeight,(y=>index_all.ZP.times(newWidth,(x=>!(!this.props.startCells[y]||!this.props.startCells[y][x])))));this.change({startCells:newCells})};_switchTile=(tileY,tileX)=>{const newCells=(oldCells=this.props.startCells,predicate=(y,x)=>y===tileY&&x===tileX,index_all.ZP.map(oldCells,((row,y)=>index_all.ZP.map(row,((cell,x)=>predicate(y,x)?!cell:cell)))));var oldCells,predicate;this.change({startCells:newCells})};serialize=()=>src.yU.serialize.call(this)}const lights_puzzle_editor=LightsPuzzleEditor;try{LightsPuzzleEditor.displayName="LightsPuzzleEditor",LightsPuzzleEditor.__docgenInfo={description:"",displayName:"LightsPuzzleEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/lights-puzzle-editor.tsx#LightsPuzzleEditor"]={docgenInfo:LightsPuzzleEditor.__docgenInfo,name:"LightsPuzzleEditor",path:"packages/perseus-editor/src/widgets/lights-puzzle-editor.tsx#LightsPuzzleEditor"})}catch(__react_docgen_typescript_loader_error){}var matcher_editor=__webpack_require__("./packages/perseus-editor/src/widgets/matcher-editor.tsx");const{RangeInput:matrix_editor_RangeInput}=src.components,Matrix=src.x7.widget;class MatrixEditor extends react.Component{static propTypes={...src.ye.i,matrixBoardSize:prop_types_default().arrayOf(prop_types_default().number).isRequired,answers:prop_types_default().arrayOf(prop_types_default().arrayOf(prop_types_default().number)),prefix:prop_types_default().string,suffix:prop_types_default().string,cursorPosition:prop_types_default().arrayOf(prop_types_default().number)};static widgetName="matrix";static defaultProps={matrixBoardSize:[3,3],answers:[[]],prefix:"",suffix:"",cursorPosition:[0,0]};render(){const matrixProps=index_all.ZP.extend({numericInput:!0,onBlur:()=>{},onFocus:()=>{},trackInteraction:()=>{}},this.props);return react.createElement("div",{className:"perseus-matrix-editor"},react.createElement("div",{className:"perseus-widget-row"}," ","Max matrix size:"," ",react.createElement(matrix_editor_RangeInput,{value:this.props.matrixBoardSize,onChange:this.onMatrixBoardSizeChange,format:this.props.labelStyle,useArrowKeys:!0})),react.createElement("div",{className:"perseus-widget-row"},react.createElement(Matrix,matrixProps)),react.createElement("div",{className:"perseus-widget-row"}," ","Matrix prefix:"," ",react.createElement(editor.Z,{ref:"prefix",apiOptions:this.props.apiOptions,content:this.props.prefix,widgetEnabled:!1,onChange:newProps=>{this.change({prefix:newProps.content})}})),react.createElement("div",{className:"perseus-widget-row"}," ","Matrix suffix:"," ",react.createElement(editor.Z,{ref:"suffix",apiOptions:this.props.apiOptions,content:this.props.suffix,widgetEnabled:!1,onChange:newProps=>{this.change({suffix:newProps.content})}})))}change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();onMatrixBoardSizeChange=range=>{const matrixSize=function(matrix){const matrixSize=[1,1];return(0,index_all.ZP)(matrix).each(((matrixRow,row)=>{let rowWidth=0;(0,index_all.ZP)(matrixRow).each(((matrixCol,col)=>{null!=matrixCol&&matrixCol.toString().length&&(rowWidth=col+1)})),matrixSize[1]=Math.max(matrixSize[1],rowWidth),rowWidth>0&&(matrixSize[0]=Math.max(matrixSize[0],row+1))})),matrixSize}(this.props.answers);if(null!==range[0]&&null!==range[1]){range=[Math.round(Math.min(Math.max(range[0],1),6)),Math.round(Math.min(Math.max(range[1],1),6))];const answers=(0,index_all.ZP)(Math.min(range[0],matrixSize[0])).times((row=>(0,index_all.ZP)(Math.min(range[1],matrixSize[1])).times((col=>this.props.answers[row][col]))));this.props.onChange({matrixBoardSize:range,answers})}};serialize=()=>src.yU.serialize.call(this)}const matrix_editor=MatrixEditor;try{MatrixEditor.displayName="MatrixEditor",MatrixEditor.__docgenInfo={description:"",displayName:"MatrixEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/matrix-editor.tsx#MatrixEditor"]={docgenInfo:MatrixEditor.__docgenInfo,name:"MatrixEditor",path:"packages/perseus-editor/src/widgets/matrix-editor.tsx#MatrixEditor"})}catch(__react_docgen_typescript_loader_error){}const{InfoTip:measurer_editor_InfoTip,NumberInput:measurer_editor_NumberInput,PropCheckBox:measurer_editor_PropCheckBox,RangeInput:measurer_editor_RangeInput}=src.components,defaultImage={url:null,top:0,left:0};class MeasurerEditor extends react.Component{static widgetName="measurer";static propTypes={...src.ye.i,box:prop_types_default().arrayOf(prop_types_default().number),image:prop_types_default().shape({url:prop_types_default().string,top:prop_types_default().number,left:prop_types_default().number}),showProtractor:prop_types_default().bool,showRuler:prop_types_default().bool,rulerLabel:prop_types_default().string,rulerTicks:prop_types_default().number,rulerPixels:prop_types_default().number,rulerLength:prop_types_default().number};static defaultProps={box:[480,480],image:{},showProtractor:!0,showRuler:!1,rulerLabel:"",rulerTicks:10,rulerPixels:40,rulerLength:10};className="perseus-widget-measurer";render(){const image=index_all.ZP.extend({},defaultImage,this.props.image);return react.createElement("div",{className:"perseus-widget-measurer"},react.createElement("div",null,"Image displayed under protractor and/or ruler:"),react.createElement("div",null,"URL:"," ",react.createElement("input",{type:"text",className:"perseus-widget-measurer-url",ref:"image-url",defaultValue:image.url,onChange:this._changeUrl}),react.createElement(measurer_editor_InfoTip,null,react.createElement("p",null,'Create an image in graphie, or use the "Add image" function to create a background.'))),image.url&&react.createElement("div",{className:"perseus-widget-row"},react.createElement("label",{className:"perseus-widget-left-col"},"Pixels from top:"," ",react.createElement(measurer_editor_NumberInput,{placeholder:0,onChange:this._changeTop,value:image.top,useArrowKeys:!0})),react.createElement("label",{className:"perseus-widget-right-col"},"Pixels from left:"," ",react.createElement(measurer_editor_NumberInput,{placeholder:0,onChange:this._changeLeft,value:image.left,useArrowKeys:!0}))),react.createElement("div",null,"Containing area [width, height]:"," ",react.createElement(measurer_editor_RangeInput,{onChange:this.change("box"),value:this.props.box,useArrowKeys:!0})),react.createElement("div",{className:"perseus-widget-row"},react.createElement("div",{className:"perseus-widget-left-col"},react.createElement(measurer_editor_PropCheckBox,{label:"Show ruler",showRuler:this.props.showRuler,onChange:this.props.onChange})),react.createElement("div",{className:"perseus-widget-right-col"},react.createElement(measurer_editor_PropCheckBox,{label:"Show protractor",showProtractor:this.props.showProtractor,onChange:this.props.onChange}))),this.props.showRuler&&react.createElement("div",null,react.createElement("div",null,react.createElement("label",null," ","Ruler label:"," ",react.createElement("select",{onChange:e=>this.change("rulerLabel",e.target.value),value:this.props.rulerLabel},react.createElement("option",{value:""},"None"),react.createElement("optgroup",{label:"Metric"},this.renderLabelChoices([["milimeters","mm"],["centimeters","cm"],["meters","m"],["kilometers","km"]])),react.createElement("optgroup",{label:"Imperial"},this.renderLabelChoices([["inches","in"],["feet","ft"],["yards","yd"],["miles","mi"]]))))),react.createElement("div",null,react.createElement("label",null," ","Ruler ticks:"," ",react.createElement("select",{onChange:e=>this.change("rulerTicks",+e.target.value),value:this.props.rulerTicks},index_all.ZP.map([1,2,4,8,10,16],(function(n){return react.createElement("option",{key:n,value:n},n)}))))),react.createElement("div",null,react.createElement("label",null,"Ruler pixels per unit:"," ",react.createElement(measurer_editor_NumberInput,{placeholder:40,onChange:this.change("rulerPixels"),value:this.props.rulerPixels,useArrowKeys:!0}))),react.createElement("div",null,react.createElement("label",null,"Ruler length in units:"," ",react.createElement(measurer_editor_NumberInput,{placeholder:10,onChange:this.change("rulerLength"),value:this.props.rulerLength,useArrowKeys:!0})))))}change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();_changeUrl=e=>{this._changeImage("url",e.target.value)};_changeTop=newTop=>{this._changeImage("top",newTop)};_changeLeft=newLeft=>{this._changeImage("left",newLeft)};_changeImage=(subProp,newValue)=>{const image=index_all.ZP.clone(this.props.image);image[subProp]=newValue,this.change("image",image)};renderLabelChoices=choices=>index_all.ZP.map(choices,(function(nameAndValue){const[name,value]=nameAndValue;return react.createElement("option",{key:value,value},name)}));serialize=()=>src.yU.serialize.call(this)}const measurer_editor=MeasurerEditor;try{MeasurerEditor.displayName="MeasurerEditor",MeasurerEditor.__docgenInfo={description:"",displayName:"MeasurerEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/measurer-editor.tsx#MeasurerEditor"]={docgenInfo:MeasurerEditor.__docgenInfo,name:"MeasurerEditor",path:"packages/perseus-editor/src/widgets/measurer-editor.tsx#MeasurerEditor"})}catch(__react_docgen_typescript_loader_error){}const{NumberInput:molecule_editor_NumberInput,TextInput:molecule_editor_TextInput}=src.components;class MoleculeWidgetEditor extends react.Component{static propTypes={...src.ye.i,rotationAngle:prop_types_default().number,smiles:prop_types_default().string};static widgetName="molecule-renderer";change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();updateMolecule=newValue=>{this.change({smiles:newValue})};updateRotation=newValue=>{this.change({rotationAngle:newValue})};serialize=()=>src.yU.serialize.call(this);render(){return react.createElement("div",null,react.createElement("div",null,react.createElement("label",null,"SMILES:",react.createElement(molecule_editor_TextInput,{onChange:this.updateMolecule,value:this.props.smiles}))),react.createElement("div",null,react.createElement("label",null,"Rotation (deg):",react.createElement(molecule_editor_NumberInput,{onChange:this.updateRotation,value:this.props.rotationAngle}))))}}const molecule_editor=MoleculeWidgetEditor;try{MoleculeWidgetEditor.displayName="MoleculeWidgetEditor",MoleculeWidgetEditor.__docgenInfo={description:"",displayName:"MoleculeWidgetEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/molecule-editor.tsx#MoleculeWidgetEditor"]={docgenInfo:MoleculeWidgetEditor.__docgenInfo,name:"MoleculeWidgetEditor",path:"packages/perseus-editor/src/widgets/molecule-editor.tsx#MoleculeWidgetEditor"})}catch(__react_docgen_typescript_loader_error){}var number_line_editor=__webpack_require__("./packages/perseus-editor/src/widgets/number-line-editor.tsx"),numeric_input_editor=__webpack_require__("./packages/perseus-editor/src/widgets/numeric-input-editor.tsx");const{InfoTip:orderer_editor_InfoTip,TextListEditor}=src.components;class OrdererEditor extends react.Component{static propTypes={correctOptions:prop_types_default().array,otherOptions:prop_types_default().array,height:prop_types_default().oneOf(["normal","auto"]),layout:prop_types_default().oneOf(["horizontal","vertical"]),onChange:prop_types_default().func.isRequired};static widgetName="orderer";static defaultProps={correctOptions:[{content:"$x$"}],otherOptions:[{content:"$y$"}],height:"normal",layout:"horizontal"};render(){return react.createElement("div",{className:"perseus-widget-orderer"},react.createElement("div",null," ","Correct answer:"," ",react.createElement(orderer_editor_InfoTip,null,react.createElement("p",null,"Place the cards in the correct order. The same card can be used more than once in the answer but will only be displayed once at the top of a stack of identical cards."))),react.createElement(TextListEditor,{options:index_all.ZP.pluck(this.props.correctOptions,"content"),onChange:this.onOptionsChange.bind(this,"correctOptions"),layout:this.props.layout}),react.createElement("div",null," ","Other cards:"," ",react.createElement(orderer_editor_InfoTip,null,react.createElement("p",null,"Create cards that are not part of the answer."))),react.createElement(TextListEditor,{options:index_all.ZP.pluck(this.props.otherOptions,"content"),onChange:this.onOptionsChange.bind(this,"otherOptions"),layout:this.props.layout}),react.createElement("div",null,react.createElement("label",null," ","Layout:"," ",react.createElement("select",{value:this.props.layout,onChange:this.onLayoutChange},react.createElement("option",{value:"horizontal"},"Horizontal"),react.createElement("option",{value:"vertical"},"Vertical"))),react.createElement(orderer_editor_InfoTip,null,react.createElement("p",null,"Use the horizontal layout for short text and small images. The vertical layout is best for longer text (e.g. proofs)."))),react.createElement("div",null,react.createElement("label",null," ","Height:"," ",react.createElement("select",{value:this.props.height,onChange:this.onHeightChange},react.createElement("option",{value:"normal"},"Normal"),react.createElement("option",{value:"auto"},"Automatic"))),react.createElement(orderer_editor_InfoTip,null,react.createElement("p",null,'Use "Normal" for text, "Automatic" for images.'))))}onOptionsChange=(whichOptions,options,cb)=>{const props={};props[whichOptions]=index_all.ZP.map(options,(function(option){return{content:option}})),this.props.onChange(props,cb)};onLayoutChange=e=>{this.props.onChange({layout:e.target.value})};onHeightChange=e=>{this.props.onChange({height:e.target.value})};serialize=()=>({options:index_all.ZP.chain(index_all.ZP.pluck(this.props.correctOptions,"content")).union(index_all.ZP.pluck(this.props.otherOptions,"content")).uniq().reject((function(content){return""===content})).sort().sortBy((function(content){return/\d/.test(content)?0:/^\$?[a-zA-Z]+\$?$/.test(content)?2:1})).map((function(content){return{content}})).value(),correctOptions:this.props.correctOptions,otherOptions:this.props.otherOptions,height:this.props.height,layout:this.props.layout})}const orderer_editor=OrdererEditor;try{OrdererEditor.displayName="OrdererEditor",OrdererEditor.__docgenInfo={description:"",displayName:"OrdererEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/orderer-editor.tsx#OrdererEditor"]={docgenInfo:OrdererEditor.__docgenInfo,name:"OrdererEditor",path:"packages/perseus-editor/src/widgets/orderer-editor.tsx#OrdererEditor"})}catch(__react_docgen_typescript_loader_error){}const{InfoTip:passage_editor_InfoTip,PropCheckBox:passage_editor_PropCheckBox}=src.components;class PassageEditor extends react.Component{static propTypes={...src.ye.i,passageTitle:prop_types_default().string,passageText:prop_types_default().string,footnotes:prop_types_default().string,showLineNumbers:prop_types_default().bool};static widgetName="passage";static defaultProps={passageTitle:"",passageText:"",footnotes:"",showLineNumbers:!0};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();serialize=()=>src.yU.serialize.call(this);render(){const passageEditor=react.createElement(editor.Z,{ref:"passage-editor",apiOptions:this.props.apiOptions,content:this.props.passageText,widgetEnabled:!1,placeholder:"Type passage here...",onChange:newProps=>{this.change({passageText:newProps.content})},showWordCount:!0}),footnotesEditor=react.createElement(editor.Z,{ref:"passage-footnotes-editor",apiOptions:this.props.apiOptions,content:this.props.footnotes,widgetEnabled:!1,placeholder:"Type footnotes here...",onChange:newProps=>{this.change({footnotes:newProps.content})}});return react.createElement("div",{className:"perseus-widget-passage-editor"},react.createElement("div",{className:"perseus-widget-row"},react.createElement(passage_editor_PropCheckBox,{label:"Show line numbers",labelAlignment:"right",showLineNumbers:this.props.showLineNumbers,onChange:this.props.onChange})),react.createElement("div",null,"Passage title:",react.createElement(passage_editor_InfoTip,null,react.createElement("p",null,"An optional title that will appear directly above the passage in the same font style. (E.g. Passage 1)")),react.createElement("div",null,react.createElement("input",{type:"text",defaultValue:this.props.passageTitle,onChange:e=>{this.change({passageTitle:e.target.value})}}))),react.createElement("div",null,"Passage Text:",passageEditor),react.createElement("div",null,"Footnotes:",react.createElement(passage_editor_InfoTip,null,react.createElement("p",null,"To add footnotes, add ^ characters where they belong in the passage. Then, add ^ in the footnotes area to reference the footnotes in the passage.")),footnotesEditor))}}const passage_editor=PassageEditor;try{PassageEditor.displayName="PassageEditor",PassageEditor.__docgenInfo={description:"",displayName:"PassageEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/passage-editor.tsx#PassageEditor"]={docgenInfo:PassageEditor.__docgenInfo,name:"PassageEditor",path:"packages/perseus-editor/src/widgets/passage-editor.tsx#PassageEditor"})}catch(__react_docgen_typescript_loader_error){}const{InfoTip:passage_ref_editor_InfoTip,NumberInput:passage_ref_editor_NumberInput,TextInput:passage_ref_editor_TextInput}=src.components;class PassageRefEditor extends react.Component{static propTypes={...src.ye.i,passageNumber:prop_types_default().number,referenceNumber:prop_types_default().number,summaryText:prop_types_default().string};static widgetName="passage-ref";static defaultProps={passageNumber:1,referenceNumber:1,summaryText:""};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();serialize=()=>src.yU.serialize.call(this);render(){return react.createElement("div",null,react.createElement("div",null,react.createElement("label",null,"Passage Number: ",react.createElement(passage_ref_editor_NumberInput,{value:this.props.passageNumber,onChange:this.change("passageNumber")}))),react.createElement("div",null,react.createElement("label",null,"Reference Number: ",react.createElement(passage_ref_editor_NumberInput,{value:this.props.referenceNumber,onChange:this.change("referenceNumber")}))),react.createElement("div",null,react.createElement("label",null,"Summary Text: ",react.createElement(passage_ref_editor_TextInput,{value:this.props.summaryText,onChange:this.change("summaryText")}),react.createElement(passage_ref_editor_InfoTip,null,react.createElement("p",null,"Short summary of the referenced section. This will be included in parentheses and quotes automatically."),react.createElement("p",null,"Ex: The start ... the end")))))}}const passage_ref_editor=PassageRefEditor;try{PassageRefEditor.displayName="PassageRefEditor",PassageRefEditor.__docgenInfo={description:"",displayName:"PassageRefEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/passage-ref-editor.tsx#PassageRefEditor"]={docgenInfo:PassageRefEditor.__docgenInfo,name:"PassageRefEditor",path:"packages/perseus-editor/src/widgets/passage-ref-editor.tsx#PassageRefEditor"})}catch(__react_docgen_typescript_loader_error){}class PassageRefTargetEditor extends react.Component{static propTypes={...src.ye.i,content:prop_types_default().string};static widgetName="passage-ref-target";static defaultProps={content:""};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();handleContentChange=e=>{this.change({content:e.target.value})};serialize=()=>src.yU.serialize.call(this);render(){return react.createElement("div",null,"Content:",react.createElement("input",{type:"text",value:this.props.content,onChange:this.handleContentChange}))}}const passage_ref_target_editor=PassageRefTargetEditor;try{PassageRefTargetEditor.displayName="PassageRefTargetEditor",PassageRefTargetEditor.__docgenInfo={description:"",displayName:"PassageRefTargetEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/passage-ref-target-editor.tsx#PassageRefTargetEditor"]={docgenInfo:PassageRefTargetEditor.__docgenInfo,name:"PassageRefTargetEditor",path:"packages/perseus-editor/src/widgets/passage-ref-target-editor.tsx#PassageRefTargetEditor"})}catch(__react_docgen_typescript_loader_error){}var kmath_src=__webpack_require__("./packages/kmath/src/index.ts"),react_dom=__webpack_require__("./node_modules/react-dom/index.js");function plotter_editor_extends(){return plotter_editor_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},plotter_editor_extends.apply(this,arguments)}const{InfoTip:plotter_editor_InfoTip,NumberInput:plotter_editor_NumberInput,RangeInput:plotter_editor_RangeInput,TextListEditor:plotter_editor_TextListEditor}=src.components,Plotter=src.YD.widget,editingStates=["starting","correct"];function padArray(array,n,value){const copy=index_all.ZP.clone(array);copy.length=n;for(let i=array.length;i<n;i++)copy[i]=value;return copy}const editorDefaults={scaleY:1,maxY:10,snapsPerLine:2},formatNumber=num=>"$"+kmath_src.Rx.round(num,2)+"$";class PlotterEditor extends react.Component{static widgetName="plotter";static defaultProps={...editorDefaults,correct:[1],starting:[1],type:"bar",labels:["",""],categories:[""],picSize:30,picBoxHeight:36,plotDimensions:[275,200],labelInterval:1,get picUrl(){const staticUrl=src.Dependencies.getDependencies().staticUrl;return staticUrl?staticUrl("/images/badges/earth-small.png"):null}};state={editing:this.props.static?"starting":"correct",pic:null,loadedUrl:null,minX:null,maxX:null,tickStep:null};UNSAFE_componentWillMount(){this.fetchPic(this.props.picUrl)}UNSAFE_componentWillReceiveProps(nextProps){this.fetchPic(nextProps.picUrl),nextProps.static&&this.setState({editing:"starting"})}fetchPic=url=>{if(this.state.loadedUrl!==url){const pic=new Image;pic.src=url,pic.onload=()=>{this.setState({pic,loadedUrl:url})}}};handleChangeTickStep=value=>{this.setState({tickStep:value})};handleChangeRange=newValue=>{this.setState({minX:newValue[0],maxX:newValue[1]})};changeLabelInterval=value=>{this.props.onChange({labelInterval:value})};handlePlotterChange=newProps=>{const props={};props[this.state.editing]=newProps.values,this.props.onChange(props)};changeType=type=>{let categories;if("histogram"===type?(categories=[formatNumber(0)].concat(this.props.categories),this.props.onChange({type,categories})):"histogram"===this.props.type?(categories=this.props.categories.slice(1),this.props.onChange({type,categories})):this.props.onChange({type}),categories){react_dom.findDOMNode(this.refs.categories).value=categories.join(", ")}};changeLabel=(i,e)=>{const labels=index_all.ZP.clone(this.props.labels);labels[i]=e.target.value,this.props.onChange({labels})};changePicUrl=value=>{const url=src.Util.getRealImageUrl(value);this.props.onChange({picUrl:url})};changeCategories=categories=>{let n=categories.length;"histogram"===this.props.type&&n--;const value=this.props.scaleY;this.props.onChange({categories,correct:padArray(this.props.correct,n,value),starting:padArray(this.props.starting,n,value)})};changeScale=e=>{const oldScale=this.props.scaleY,newScale=+e.target.value||editorDefaults.scaleY,scale=function(value){return value*newScale/oldScale},maxY=scale(this.props.maxY);this.props.onChange({scaleY:newScale,maxY,correct:index_all.ZP.map(this.props.correct,scale),starting:index_all.ZP.map(this.props.starting,scale)}),react_dom.findDOMNode(this.refs.maxY).value=maxY};changeMax=e=>{this.props.onChange({maxY:+e.target.value||editorDefaults.maxY})};changeSnaps=e=>{this.props.onChange({snapsPerLine:+e.target.value||editorDefaults.snapsPerLine})};changeEditing=editing=>{this.setState({editing})};setCategoriesFromScale=()=>{const scale=this.state.tickStep||1,min=this.state.minX||0,max=this.state.maxX||0,length=Math.floor((max-min)/scale)*scale;let categories;categories="histogram"===this.props.type||"dotplot"===this.props.type?index_all.ZP.range(0,length+scale,scale):index_all.ZP.range(scale,length+scale,scale),categories=index_all.ZP.map(categories,(num=>num+min)),categories=index_all.ZP.map(categories,formatNumber),this.changeCategories(categories);react_dom.findDOMNode(this.refs.categories).value=categories.join(", ")};serialize=()=>{const json=index_all.ZP.pick(this.props,"correct","starting","type","labels","categories","scaleY","maxY","snapsPerLine","labelInterval");return"pic"===this.props.type&&(json.picUrl=this.props.picUrl),json};render(){const setFromScale=index_all.ZP.contains(["line","histogram","dotplot"],this.props.type),canChangeSnaps=!index_all.ZP.contains(["pic","dotplot"],this.props.type),props={trackInteraction:()=>{},...this.props};return react.createElement("div",{className:"perseus-widget-plotter-editor"},react.createElement("div",null,"Chart type:"," ",src.KT.map((type=>react.createElement("label",{key:type},react.createElement("input",{type:"radio",name:"chart-type",checked:this.props.type===type,onChange:index_all.ZP.partial(this.changeType,type)}),type)),this)),react.createElement("div",null,"Labels:"," ",["x","y"].map(((axis,i)=>react.createElement("label",{key:axis},axis+":",react.createElement("input",{type:"text",onChange:index_all.ZP.partial(this.changeLabel,i),defaultValue:this.props.labels[i]}))),this)),setFromScale&&react.createElement("div",{className:"set-from-scale-box"},react.createElement("span",{className:"categories-title"},"Set Categories From Scale"),react.createElement("div",null,react.createElement("label",null,"Tick Step:"," ",react.createElement(plotter_editor_NumberInput,{placeholder:1,useArrowKeys:!0,value:this.state.tickStep,onChange:this.handleChangeTickStep})),react.createElement(plotter_editor_InfoTip,null,react.createElement("p",null,"The difference between adjacent ticks."))),react.createElement("div",null,react.createElement("label",null,"Range:"," ",react.createElement(plotter_editor_RangeInput,{placeholder:[0,10],useArrowKeys:!0,value:[this.state.minX,this.state.maxX],onChange:this.handleChangeRange}))),react.createElement("div",null,react.createElement("button",{onClick:this.setCategoriesFromScale},"Set Categories"," "))),react.createElement("div",null,react.createElement("label",null,"Label Interval:"," ",react.createElement(plotter_editor_NumberInput,{useArrowKeys:!0,value:this.props.labelInterval,onChange:this.changeLabelInterval})),react.createElement(plotter_editor_InfoTip,null,react.createElement("p",null,'Which ticks to display the labels for. For instance, setting this to "4" will only show every 4th label (plus the last one)'))),"pic"===this.props.type&&react.createElement("div",null,react.createElement("label",null,"Picture:"," ",react.createElement(blur_input.Z,{className:"pic-url",value:this.props.picUrl,onChange:this.changePicUrl}),react.createElement(plotter_editor_InfoTip,null,react.createElement("p",null,'Use the default picture of Earth, or insert the URL for a different picture using the "Add image" function.'))),this.state.pic&&this.state.pic.width!==this.state.pic.height&&react.createElement("p",{className:"warning"},react.createElement("b",null,"Warning"),": You are using a picture which is not square. This means the image will get distorted. You should probably crop it to be square.")),react.createElement("div",null,react.createElement("label",null,"Categories:"," ",react.createElement(plotter_editor_TextListEditor,{ref:"categories",layout:"horizontal",options:this.props.categories,onChange:this.changeCategories}))),react.createElement("div",null,react.createElement("label",null,"Scale (y):"," ",react.createElement("input",{type:"text",onChange:this.changeScale,defaultValue:this.props.scaleY}))),react.createElement("div",null,react.createElement("label",null,"Max y:"," ",react.createElement("input",{type:"text",ref:"maxY",onChange:this.changeMax,defaultValue:this.props.maxY}))),canChangeSnaps&&react.createElement("div",null,react.createElement("label",null,"Snaps per line:"," ",react.createElement("input",{type:"text",onChange:this.changeSnaps,defaultValue:this.props.snapsPerLine})),react.createElement(plotter_editor_InfoTip,null,react.createElement("p",null,"Creates the specified number of divisions between the horizontal lines. Fewer snaps between lines makes the graph easier for the student to create correctly."))),react.createElement("div",null,"Editing values:"," ",editingStates.map((editing=>react.createElement("label",{key:editing},react.createElement("input",{type:"radio",disabled:"correct"===editing&&this.props.static,checked:this.props.static?"starting"===editing:this.state.editing===editing,onChange:e=>this.changeEditing(editing)}),editing))),react.createElement(plotter_editor_InfoTip,null,react.createElement("p",null,"Use this toggle to switch between editing the correct answer (what the student will be graded on) and the starting values (what the student will see plotted when they start the problem). Note: These cannot be the same."),react.createElement("p",null,"In static mode, the starting values are rendered out to the displayed widget."))),react.createElement(Plotter,plotter_editor_extends({},props,{starting:this.props[this.state.editing],onChange:this.handlePlotterChange})))}}const plotter_editor=PlotterEditor;try{PlotterEditor.displayName="PlotterEditor",PlotterEditor.__docgenInfo={description:"",displayName:"PlotterEditor",props:{type:{defaultValue:{value:"bar"},description:"",name:"type",required:!1,type:{name:"enum",value:[{value:'"line"'},{value:'"bar"'},{value:'"pic"'},{value:'"histogram"'},{value:'"dotplot"'}]}},labels:{defaultValue:{value:'["", ""]'},description:"",name:"labels",required:!1,type:{name:"string[]"}},categories:{defaultValue:{value:'[""]'},description:"",name:"categories",required:!1,type:{name:"readonly (string | number)[]"}},scaleY:{defaultValue:null,description:"",name:"scaleY",required:!0,type:{name:"number"}},maxY:{defaultValue:null,description:"",name:"maxY",required:!0,type:{name:"number"}},snapsPerLine:{defaultValue:null,description:"",name:"snapsPerLine",required:!0,type:{name:"number"}},picSize:{defaultValue:{value:"30"},description:"",name:"picSize",required:!1,type:{name:"number"}},picBoxHeight:{defaultValue:{value:"36"},description:"",name:"picBoxHeight",required:!1,type:{name:"number"}},picUrl:{defaultValue:null,description:"",name:"picUrl",required:!0,type:{name:"string"}},plotDimensions:{defaultValue:{value:"[275, 200]"},description:"",name:"plotDimensions",required:!1,type:{name:"readonly number[]"}},labelInterval:{defaultValue:{value:"1"},description:"",name:"labelInterval",required:!1,type:{name:"number"}},starting:{defaultValue:{value:"[1]"},description:"",name:"starting",required:!1,type:{name:"readonly number[]"}},correct:{defaultValue:{value:"[1]"},description:"",name:"correct",required:!1,type:{name:"readonly number[]"}},static:{defaultValue:null,description:"",name:"static",required:!0,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/plotter-editor.tsx#PlotterEditor"]={docgenInfo:PlotterEditor.__docgenInfo,name:"PlotterEditor",path:"packages/perseus-editor/src/widgets/plotter-editor.tsx#PlotterEditor"})}catch(__react_docgen_typescript_loader_error){}var radio_editor=__webpack_require__("./packages/perseus-editor/src/widgets/radio/editor.tsx");const{NumberInput:reaction_diagram_editor_NumberInput,TextInput:reaction_diagram_editor_TextInput}=src.components;class ReactionDiagramWidgetEditor extends react.Component{static propTypes={...src.ye.i,rotationAngle:prop_types_default().arrayOf(prop_types_default().number),separators:prop_types_default().arrayOf(prop_types_default().object),smiles:prop_types_default().arrayOf(prop_types_default().string)};static widgetName="reaction-diagram";static defaultProps={smiles:["",""],rotationAngle:[0,0],separators:[{type:"right",topText:"",bottomText:""}]};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();updateMolecule=idx=>function(newValue){const newSmiles=[...this.props.smiles];newSmiles[idx]=newValue,this.change({smiles:newSmiles})}.bind(this);updateRotation=idx=>function(newValue){const newRot=[...this.props.rotationAngle];newRot[idx]=newValue,this.change({rotationAngle:newRot})}.bind(this);updateSeparators=(idx,propName)=>newValue=>{const newSep=this.props.separators.map((sep=>({...sep})));newSep[idx][propName]=newValue,this.change({separators:newSep})};serialize=()=>src.yU.serialize.call(this);render(){return react.createElement("div",null,react.createElement("div",null,react.createElement("label",null,"LHS SMILES:",react.createElement(reaction_diagram_editor_TextInput,{onChange:this.updateMolecule(0),value:this.props.smiles[0]}))),react.createElement("div",null,react.createElement("label",null,"LHS Rotation (deg):",react.createElement(reaction_diagram_editor_NumberInput,{onChange:this.updateRotation(0),value:this.props.rotationAngle[0]}))),react.createElement("div",null,react.createElement("label",null,"RHS SMILES:",react.createElement(reaction_diagram_editor_TextInput,{onChange:this.updateMolecule(1),value:this.props.smiles[1]}))),react.createElement("div",null,react.createElement("label",null,"RHS Rotation (deg):",react.createElement(reaction_diagram_editor_NumberInput,{onChange:this.updateRotation(1),value:this.props.rotationAngle[1]}))),react.createElement("div",null,react.createElement("label",null,"Top of arrow text:",react.createElement(reaction_diagram_editor_TextInput,{onChange:this.updateSeparators(0,"topText"),value:this.props.separators[0].topText}))),react.createElement("div",null,react.createElement("label",null,"Bottom of arrow text:",react.createElement(reaction_diagram_editor_TextInput,{onChange:this.updateSeparators(0,"bottomText"),value:this.props.separators[0].bottomText}))))}}const reaction_diagram_editor=ReactionDiagramWidgetEditor;try{ReactionDiagramWidgetEditor.displayName="ReactionDiagramWidgetEditor",ReactionDiagramWidgetEditor.__docgenInfo={description:"",displayName:"ReactionDiagramWidgetEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/reaction-diagram-editor.tsx#ReactionDiagramWidgetEditor"]={docgenInfo:ReactionDiagramWidgetEditor.__docgenInfo,name:"ReactionDiagramWidgetEditor",path:"packages/perseus-editor/src/widgets/reaction-diagram-editor.tsx#ReactionDiagramWidgetEditor"})}catch(__react_docgen_typescript_loader_error){}const{InlineIcon:sequence_editor_InlineIcon}=src.components,{iconCircleArrowDown,iconCircleArrowUp,iconPlus:sequence_editor_iconPlus,iconTrash:sequence_editor_iconTrash}=src.icons;class StepControlButton extends react.Component{render(){return react.createElement("a",{href:"#",className:"step-control-button simple-button simple-button--small orange",onClick:e=>{e.preventDefault(),this.props.onClick()}},react.createElement(sequence_editor_InlineIcon,this.props.icon))}}class SequenceEditor extends react.Component{static propTypes={json:prop_types_default().arrayOf(prop_types_default().shape({content:prop_types_default().string,widgets:prop_types_default().objectOf(prop_types_default().any),images:prop_types_default().objectOf(prop_types_default().any)})),apiOptions:src._E.propTypes,onChange:prop_types_default().func.isRequired};static widgetName="sequence";static defaultProps={json:[{content:"",widgets:{},images:{}}]};render(){return react.createElement("div",{className:"perseus-sequence-editor"},index_all.ZP.map(this.props.json,((json,i)=>react.createElement("div",{key:i},"Step ",i+1,react.createElement("div",{style:{display:"inline-block",float:"right"}},i+1<this.props.json.length&&react.createElement(StepControlButton,{icon:iconCircleArrowDown,onClick:()=>{this._handleMoveStepLater(i)}}),i>0&&react.createElement(StepControlButton,{icon:iconCircleArrowUp,onClick:()=>{this._handleMoveStepEarlier(i)}}),react.createElement(StepControlButton,{icon:sequence_editor_iconTrash,onClick:()=>{confirm("Are you sure you want to remove step "+(i+1)+"?")&&this._handleRemoveStep(i)}}),react.createElement(StepControlButton,{icon:sequence_editor_iconPlus,onClick:()=>{this._handleAddStepAfter(i)}})),react.createElement(editor.Z,{ref:"editor"+i,apiOptions:this.props.apiOptions,content:json.content,widgets:json.widgets,images:json.images,widgetEnabled:!0,immutableWidgets:!1,onChange:index_all.ZP.partial(this._handleEditorChange,i)})))))}_handleEditorChange=(i,newProps)=>{const steps=index_all.ZP.clone(this.props.json);steps[i]=index_all.ZP.extend({},steps[i],newProps),this.props.onChange({json:steps})};serialize=()=>({json:index_all.ZP.times(this.props.json.length,(i=>this.refs["editor"+i].serialize()))});_handleMoveStepEarlier=i=>{if(0===i)return;const steps=index_all.ZP.clone(this.props.json),step=steps[i];steps.splice(i,1),steps.splice(i-1,0,step),this.props.onChange({json:steps})};_handleMoveStepLater=i=>{const steps=index_all.ZP.clone(this.props.json);if(i+1===steps.length)return;const step=steps[i];steps.splice(i,1),steps.splice(i+1,0,step),this.props.onChange({json:steps})};_handleAddStepAfter=i=>{const steps=index_all.ZP.clone(this.props.json),newStep=i>=0?{widgets:steps[i].widgets}:{};steps.splice(i+1,0,newStep),this.props.onChange({json:steps})};_handleRemoveStep=i=>{const steps=index_all.ZP.clone(this.props.json);steps.splice(i,1),this.props.onChange({json:steps})}}const sequence_editor=SequenceEditor;try{SequenceEditor.displayName="SequenceEditor",SequenceEditor.__docgenInfo={description:"",displayName:"SequenceEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/sequence-editor.tsx#SequenceEditor"]={docgenInfo:SequenceEditor.__docgenInfo,name:"SequenceEditor",path:"packages/perseus-editor/src/widgets/sequence-editor.tsx#SequenceEditor"})}catch(__react_docgen_typescript_loader_error){}class TextArea extends react.Component{render(){return react.createElement("textarea",{ref:"input",value:this.props.value||"",onChange:this.changeValue})}focus=()=>(this.refs.input.focus(),!0);changeValue=e=>{this.props.onChange(e.target.value)}}class SimpleMarkdownTesterEditor extends react.Component{static propTypes={...src.ye.i};static widgetName="simple-markdown-tester";static defaultProps={value:""};input=react.createRef();render(){return react.createElement("div",null,react.createElement("label",null,react.createElement("div",null,"Simple markdown contents:"),react.createElement("div",null,react.createElement(TextArea,{value:this.props.value,onChange:this.change("value"),ref:this.input}))))}change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();focus=()=>(this.input.current?.focus(),!0);serialize=()=>src.yU.serialize.call(this)}const simple_markdown_tester_editor=SimpleMarkdownTesterEditor;try{SimpleMarkdownTesterEditor.displayName="SimpleMarkdownTesterEditor",SimpleMarkdownTesterEditor.__docgenInfo={description:"",displayName:"SimpleMarkdownTesterEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/simple-markdown-tester-editor.tsx#SimpleMarkdownTesterEditor"]={docgenInfo:SimpleMarkdownTesterEditor.__docgenInfo,name:"SimpleMarkdownTesterEditor",path:"packages/perseus-editor/src/widgets/simple-markdown-tester-editor.tsx#SimpleMarkdownTesterEditor"})}catch(__react_docgen_typescript_loader_error){}var wonder_blocks_i18n_dist_es=__webpack_require__("./node_modules/@khanacademy/wonder-blocks-i18n/dist/es/index.js");const{InfoTip:simulator_editor_InfoTip,NumberInput:simulator_editor_NumberInput}=src.components;class SimulatorEditor extends react.Component{static propTypes={...src.ye.i,xAxisLabel:prop_types_default().string,yAxisLabel:prop_types_default().string,numTrials:prop_types_default().number,proportionLabel:prop_types_default().string,proportionOrPercentage:prop_types_default().string};static widgetName="simulator";static defaultProps={xAxisLabel:"Proportion (%)",yAxisLabel:"Number of times seen",numTrials:100,proportionLabel:"Underlying proportion",proportionOrPercentage:"proportion"};render(){return react.createElement("div",{className:"perseus-widget-simulator"},react.createElement("div",null,wonder_blocks_i18n_dist_es._("X-Axis Label"),":",react.createElement("input",{type:"text",className:"graph-settings-axis-label",value:this.props.xAxisLabel,onChange:index_all.ZP.partial(this.handleTargetValueChange,"xAxisLabel")})),react.createElement("div",null,wonder_blocks_i18n_dist_es._("Y-Axis Label"),":",react.createElement("input",{type:"text",className:"graph-settings-axis-label",value:this.props.yAxisLabel,onChange:index_all.ZP.partial(this.handleTargetValueChange,"yAxisLabel")})),react.createElement("div",null,wonder_blocks_i18n_dist_es._('"True Proportion" Label'),":",react.createElement("input",{type:"text",className:"graph-settings-axis-label",value:this.props.proportionLabel,onChange:index_all.ZP.partial(this.handleTargetValueChange,"proportionLabel")}),react.createElement(simulator_editor_InfoTip,null,react.createElement("p",null,'This text will be displayed next to the box in which the user enters the sample proportion for their simulation. For example, if your question is about surveying for approval ratings, you might want this to say "Sample approval rating".'))),react.createElement("div",null,wonder_blocks_i18n_dist_es._("Proportion or Percentage"),":",react.createElement("select",{className:"perseus-widget-dropdown",value:this.props.proportionOrPercentage,onChange:index_all.ZP.partial(this.handleTargetValueChange,"proportionOrPercentage")},react.createElement("option",{key:"proportion",value:"proportion"},"Proportion"),react.createElement("option",{key:"percentage",value:"percentage"},"Percentage")),react.createElement(simulator_editor_InfoTip,null,react.createElement("p",null,"Do you want the user to describe their simulation in terms of a proportion or a percentage?"))),react.createElement("div",null,wonder_blocks_i18n_dist_es._("Number of trials"),":",react.createElement(simulator_editor_NumberInput,{value:this.props.numTrials,checkValidity:val=>val>=0&&val<=5e3,onChange:this.change("numTrials")}),react.createElement(simulator_editor_InfoTip,null,react.createElement("p",null,"This controls the number of trials used in the simulation. For example, if you set this to 50, then the survey will be conducted 50 times. Warning: setting this too high (i.e., greater than 5000 or so) will freeze the page."))))}change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();handleTargetValueChange=(propName,e)=>{this.change(propName,e.target.value)};serialize=()=>src.yU.serialize.call(this)}const simulator_editor=SimulatorEditor;try{SimulatorEditor.displayName="SimulatorEditor",SimulatorEditor.__docgenInfo={description:"",displayName:"SimulatorEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/simulator-editor.tsx#SimulatorEditor"]={docgenInfo:SimulatorEditor.__docgenInfo,name:"SimulatorEditor",path:"packages/perseus-editor/src/widgets/simulator-editor.tsx#SimulatorEditor"})}catch(__react_docgen_typescript_loader_error){}var sorter_editor=__webpack_require__("./packages/perseus-editor/src/widgets/sorter-editor.tsx");const{InfoTip:table_editor_InfoTip,NumberInput:table_editor_NumberInput}=src.components,Table=src.dm.widget;class TableEditor extends react.Component{static propTypes={rows:prop_types_default().number,columns:prop_types_default().number,headers:prop_types_default().arrayOf(prop_types_default().string),answers:prop_types_default().arrayOf(prop_types_default().arrayOf(prop_types_default().string))};static widgetName="table";static defaultProps=function(){return{headers:[""],rows:4,columns:1,answers:(0,index_all.ZP)(4).times((function(){return src.Util.stringArrayOfSize(1)}))}}();numberOfColumns=react.createRef();focus=()=>{this.numberOfColumns.current?.focus()};render(){const tableProps=index_all.ZP.pick(this.props,"headers","answers","onChange","apiOptions");return index_all.ZP.extend(tableProps,{editableHeaders:!0,Editor:editor.Z,onFocus:()=>{},onBlur:()=>{},trackInteraction:()=>{}}),react.createElement("div",null,react.createElement("div",{className:"perseus-widget-row"},react.createElement("label",null,"Number of columns:"," ",react.createElement(table_editor_NumberInput,{ref:this.numberOfColumns,value:this.props.columns,onChange:val=>{val&&this.onSizeInput(this.props.rows,val)},useArrowKeys:!0}))),react.createElement("div",{className:"perseus-widget-row"},react.createElement("label",null,"Number of rows:"," ",react.createElement(table_editor_NumberInput,{ref:"numberOfRows",value:this.props.rows,onChange:val=>{val&&this.onSizeInput(val,this.props.columns)},useArrowKeys:!0}))),react.createElement("div",null," ","Table of answers:"," ",react.createElement(table_editor_InfoTip,null,react.createElement("p",null,"The student has to fill out all cells in the table. For partially filled tables create a table using the template, and insert text input boxes as desired."))),react.createElement("div",null,react.createElement(Table,tableProps)))}onSizeInput=(numRawRows,numRawColumns)=>{let rows=+numRawRows||0,columns=+numRawColumns||0;rows=Math.min(Math.max(1,rows),30),columns=Math.min(Math.max(1,columns),6);const oldColumns=this.props.columns,oldRows=this.props.rows,answers=this.props.answers;function fixColumnSizing(array){columns<=oldColumns?array.length=columns:(0,index_all.ZP)(columns-oldColumns).times((function(){array.push("")}))}rows<=oldRows?answers.length=rows:(0,index_all.ZP)(rows-oldRows).times((function(){answers.push(src.Util.stringArrayOfSize(oldColumns))}));const headers=this.props.headers;fixColumnSizing(headers),index_all.ZP.each(answers,fixColumnSizing),this.props.onChange({rows,columns,answers,headers})};serialize=()=>{const json=index_all.ZP.pick(this.props,"headers","rows","columns");return index_all.ZP.extend({},json,{answers:index_all.ZP.map(this.props.answers,index_all.ZP.clone)})}}const table_editor=TableEditor;try{TableEditor.displayName="TableEditor",TableEditor.__docgenInfo={description:"",displayName:"TableEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/table-editor.tsx#TableEditor"]={docgenInfo:TableEditor.__docgenInfo,name:"TableEditor",path:"packages/perseus-editor/src/widgets/table-editor.tsx#TableEditor"})}catch(__react_docgen_typescript_loader_error){}const{Graph,InfoTip:transformer_editor_InfoTip,PropCheckBox:transformer_editor_PropCheckBox}=src.components,Transformer=src._J.widget,{deepEq,getGridStep}=src.Util;const transformer_editor_defaultBackgroundImage={url:null};function orderInsensitiveCoordsEqual(coords1,coords2){return coords1=index_all.ZP.clone(coords1).sort(kmath_src.xm.compare),coords2=index_all.ZP.clone(coords2).sort(kmath_src.xm.compare),index_all.ZP.all(index_all.ZP.map(coords1,(function(coord1,i){const coord2=coords2[i];return kmath_src.xm.equal(coord1,coord2)})))}const defaultTransformerProps={apiOptions:src._E.defaults,gradeEmpty:!1,graphMode:"interactive",listMode:"dynamic",graph:{},tools:{translation:{enabled:!0,required:!1,constraints:{}},rotation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[1,6]},reflection:{enabled:!0,required:!1,constraints:{fixed:!1},coords:[[2,-4],[2,2]]},dilation:{enabled:!0,required:!1,constraints:{fixed:!1},coord:[6,6]}},drawSolutionShape:!0,starting:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]},correct:{shape:{type:"polygon-3",coords:[[2,2],[2,6],[7,2]]},transformations:[]}};class ToolSettings extends react.Component{static defaultProps={allowFixed:!0};render(){return react.createElement("div",null,this.props.name,":"," ",react.createElement(transformer_editor_PropCheckBox,{label:"enabled:",enabled:this.props.settings.enabled,onChange:this.props.onChange})," ",this.props.settings.enabled&&react.createElement(transformer_editor_PropCheckBox,{label:"required:",required:this.props.settings.required,onChange:this.props.onChange}),this.props.settings.enabled&&react.createElement(transformer_editor_InfoTip,null,"'Required' will only grade the answer as correct if the student has used at least one such transformation.")," ",this.props.allowFixed&&this.props.settings.enabled&&react.createElement(transformer_editor_PropCheckBox,{label:"fixed:",fixed:this.props.settings.constraints.fixed,onChange:this.changeConstraints}),this.props.allowFixed&&this.props.settings.enabled&&react.createElement(transformer_editor_InfoTip,null,"Enable 'fixed' to prevent the student from repositioning the tool. The tool will appear in the position at which it is placed in the editor below."))}changeConstraints=changed=>{const newConstraints=index_all.ZP.extend({},this.props.constraints,changed);this.props.onChange({constraints:newConstraints})}}class TransformationExplorerSettings extends react.Component{render(){return react.createElement("div",{className:"transformer-settings"},react.createElement("div",null," ","Mode:"," ",react.createElement("select",{value:this.getMode(),onChange:this.changeMode},react.createElement("option",{value:"interactive,dynamic"}," ","Exploration with text"," "),react.createElement("option",{value:"interactive,static"}," ","Exploration without text"," "),react.createElement("option",{value:"dynamic,interactive"}," ","Formal with movement"," "),react.createElement("option",{value:"static,interactive"}," ","Formal without movement"," ")),react.createElement(transformer_editor_InfoTip,null,react.createElement("ul",null,react.createElement("li",null,react.createElement("b",null,"Exploration:")," Students create transformations with tools on the graph."," "),react.createElement("li",null,react.createElement("b",null,"Formal with movement:")," Students specify transformations mathematically in the transformation list. Graph shows the results of these transformations."," "),react.createElement("li",null,react.createElement("b",null,"Formal without movement:")," Students specify transformations mathematically in the transformation list. Graph does not update."," ")))),react.createElement(ToolSettings,{name:"Translations",settings:this.props.tools.translation,allowFixed:!1,onChange:this.changeHandlerFor("translation")}),react.createElement(ToolSettings,{name:"Rotations",settings:this.props.tools.rotation,onChange:this.changeHandlerFor("rotation")}),react.createElement(ToolSettings,{name:"Reflections",settings:this.props.tools.reflection,onChange:this.changeHandlerFor("reflection")}),react.createElement(ToolSettings,{name:"Dilations",settings:this.props.tools.dilation,onChange:this.changeHandlerFor("dilation")}),react.createElement(transformer_editor_PropCheckBox,{label:"Draw Solution:",drawSolutionShape:this.props.drawSolutionShape,onChange:this.props.onChange}))}getMode=()=>this.props.graphMode+","+this.props.listMode;changeMode=e=>{const modes=e.target.value.split(",");this.props.onChange({graphMode:modes[0],listMode:modes[1]})};changeHandlerFor=toolName=>change=>{const newTools=index_all.ZP.clone(this.props.tools);newTools[toolName]=index_all.ZP.extend({},this.props.tools[toolName],change),this.props.onChange({tools:newTools})}}const ShapeTypes={getPointCountForType:function(type){const splitType=type.split("-");return"polygon"===splitType[0]?splitType[1]||3:"line"===splitType[0]||"lineSegment"===splitType[0]?2:"angle"===splitType[0]?3:"circle"===splitType[0]?2:"point"===splitType[0]?1:void 0},addMovableShape:function(graphie,options){if(options.editable&&options.translatable)throw new src.uI("It doesn't make sense to have a movable shape where you can stretch the points and translate them simultaneously.",src.D1.InvalidInput,{metadata:{options}});const points=index_all.ZP.map(options.shape.coords,(function(coord){let isMoving=!1,previousCoord=coord;const currentPoint=graphie.addMovablePoint({coord,normalStyle:options.normalPointStyle,highlightStyle:options.highlightPointStyle,constraints:{fixed:!options.translatable&&!options.editable},visible:options.showPoints,snapX:options.snap&&options.snap[0]||0,snapY:options.snap&&options.snap[1]||0,bounded:!1,onMove:function(x,y){isMoving||(previousCoord=currentPoint.coord,isMoving=!0);let moveVector=kmath_src.xr.subtract([x,y],currentPoint.coord);options.onMove&&(moveVector=options.onMove(moveVector[0],moveVector[1])),options.translatable&&index_all.ZP.each(points,(function(point){point!==currentPoint&&point.setCoord(kmath_src.xr.add(point.coord,moveVector))}));const oldCoord=currentPoint.coord,newCoord=kmath_src.xr.add(currentPoint.coord,moveVector);return currentPoint.coord=newCoord,shape.update(),currentPoint.coord=oldCoord,newCoord},onMoveEnd:function(){if(options.onMoveEnd&&isMoving){isMoving=!1;const change=kmath_src.xr.subtract(currentPoint.coord,previousCoord);options.onMoveEnd(change[0],change[1])}shape.update()}});return currentPoint.bounded=!0,currentPoint})),shape=ShapeTypes.addShape(graphie,options,points),removeShapeWithoutPoints=shape.remove;return shape.remove=function(){removeShapeWithoutPoints.apply(shape),index_all.ZP.invoke(points,"remove")},shape},addShape:function(graphie,options,points){points=points||options.shape.coords;const types=ShapeTypes._typesOf(options.shape),typeOptions=options.shape.options||ShapeTypes.defaultOptions(types),shapes=ShapeTypes._mapTypes(types,points,(function(type,points,i){const shapeOptions=index_all.ZP.extend({},options,typeOptions[i]);return ShapeTypes._addType(graphie,type,points,shapeOptions)})),updateFuncs=index_all.ZP.filter(index_all.ZP.pluck(shapes,"update"),index_all.ZP.identity),removeFuncs=index_all.ZP.filter(index_all.ZP.pluck(shapes,"remove"),index_all.ZP.identity),getOptions=function(){return index_all.ZP.map(shapes,(function(shape){return shape.getOptions?shape.getOptions():{}}))};return{type:types,points,update:function(){index_all.ZP.invoke(updateFuncs,"call")},remove:function(){index_all.ZP.invoke(removeFuncs,"call")},toJSON:function(){const coords=index_all.ZP.map(points,(function(pt){return index_all.ZP.isArray(pt)?pt:pt.coord}));return{type:types,coords,options:getOptions()}},getOptions}},equal:function(shape1,shape2){const types1=ShapeTypes._typesOf(shape1),types2=ShapeTypes._typesOf(shape2);if(types1.length!==types2.length)return!1;const shapes1=ShapeTypes._mapTypes(types1,shape1.coords,ShapeTypes._combine),shapes2=ShapeTypes._mapTypes(types2,shape2.coords,ShapeTypes._combine);return index_all.ZP.all(index_all.ZP.map(shapes1,(function(partialShape1,i){const partialShape2=shapes2[i];return partialShape1.type===partialShape2.type&&ShapeTypes._forType(partialShape1.type).equal(partialShape1.coords,partialShape2.coords)})))},_typesOf:function(shape){let types=shape.type;return index_all.ZP.isArray(types)||(types=[types]),index_all.ZP.map(types,(function(type){return"polygon"===type?"polygon-3":type}))},defaultOptions:function(types){return index_all.ZP.map(types,(function(type){const typeDefaultOptions=ShapeTypes._forType(type).defaultOptions;return index_all.ZP.extend({},typeDefaultOptions)}))},_forType:function(type){const baseType=type.split("-")[0];return ShapeTypes[baseType]},_mapTypes:function(types,points,func,context){return index_all.ZP.map(types,(function(type,i){const pointCount=ShapeTypes.getPointCountForType(type),currentPoints=index_all.ZP.first(points,pointCount);return points=index_all.ZP.rest(points,pointCount),func.call(context,type,currentPoints,i)}))},_addType:function(graphie,type,points,options){const lineCoords=index_all.ZP.isArray(points[0])?{coordA:points[0],coordZ:points[1]}:{pointA:points[0],pointZ:points[1]};if("polygon"===(type=type.split("-")[0])){const polygon=graphie.addMovablePolygon(index_all.ZP.extend({},options,{fixed:!options.editable,snapX:options.snap&&options.snap[0]||0,snapY:options.snap&&options.snap[1]||0,points,constrainToGraph:!1}));return{update:polygon.transform.bind(polygon),remove:polygon.remove.bind(polygon)}}if("line"===type||"lineSegment"===type){const line=graphie.addMovableLineSegment(index_all.ZP.extend({},options,lineCoords,{movePointsWithLine:!0,fixed:!0,constraints:{fixed:!0},extendLine:"line"===type}));return{update:line.transform.bind(line,!0),remove:line.remove.bind(line)}}if("angle"===type){const shouldChangeReflexivity=!!options.editable&&null,angle=graphie.addMovableAngle({angleLabel:"$deg0",fixed:!0,points,normalStyle:options.normalStyle,reflex:options.reflex});return index_all.ZP.isArray(points[0])||options.editable||(points[0].remove(),points[2].remove()),{update:angle.update.bind(angle,shouldChangeReflexivity),remove:angle.remove.bind(angle),getOptions:function(){return{reflex:angle.isReflex()}}}}if("circle"===type){let perimeter={remove:index_all.ZP.identity};const redrawPerim=function(){const coord0=points[0].coord||points[0],coord1=points[1].coord||points[1],radius=kmath_src.xm.distanceToPoint(coord0,coord1);perimeter.remove(),perimeter=graphie.circle(coord0,radius,index_all.ZP.extend({stroke:src.eA.DYNAMIC,"stroke-width":2},options.normalStyle))};return redrawPerim(),points[1].remove&&!options.editable&&points[1].remove(),{update:redrawPerim,remove:function(){perimeter.remove()}}}if("point"===type)return{update:null,remove:null};throw new src.uI("Invalid shape type "+type,src.D1.InvalidInput)},_combine:function(type,coords){return{type,coords}},polygon:{equal:orderInsensitiveCoordsEqual},line:{equal:kmath_src.jv.equal},lineSegment:{equal:orderInsensitiveCoordsEqual},angle:{equal:function(points1,points2){if(!kmath_src.xm.equal(points1[1],points2[1]))return!1;const line1_0=[points1[1],points1[0]],line1_2=[points1[1],points1[2]],line2_0=[points2[1],points2[0]],line2_2=[points2[1],points2[2]],equalUnflipped=kmath_src.kx.equal(line1_0,line2_0)&&kmath_src.kx.equal(line1_2,line2_2),equalFlipped=kmath_src.kx.equal(line1_0,line2_2)&&kmath_src.kx.equal(line1_2,line2_0);return equalUnflipped||equalFlipped},defaultOptions:{reflex:!1}},circle:{equal:function(points1,points2){const radius1=kmath_src.xm.distanceToPoint(points1[0],points1[1]),radius2=kmath_src.xm.distanceToPoint(points2[0],points2[1]);return kmath_src.xm.equal(points1[0],points2[0])&&kmath_src.Rx.equal(radius1,radius2)}},point:{equal:kmath_src.xm.equal}};class TransformationsShapeEditor extends react.Component{render(){return react.createElement("div",null,react.createElement(Graph,{ref:"graph",box:this.props.graph.box,range:this.props.graph.range,labels:this.props.graph.labels,step:this.props.graph.step,gridStep:this.props.graph.gridStep,markings:this.props.graph.markings,backgroundImage:this.props.graph.backgroundImage,onGraphieUpdated:this.setupGraphie}),react.createElement("select",{key:"type-select",value:this.getTypeString(this.props.shape.type),onChange:this.changeType},react.createElement("option",{value:"polygon-3"},"Triangle"),react.createElement("option",{value:"polygon-4"},"Quadrilateral"),react.createElement("option",{value:"polygon-5"},"Pentagon"),react.createElement("option",{value:"polygon-6"},"Hexagon"),react.createElement("option",{value:"line"},"Line"),react.createElement("option",{value:"line,line"},"2 lines"),react.createElement("option",{value:"lineSegment"},"Line segment"),react.createElement("option",{value:"lineSegment,lineSegment"}," ","2 line segments"," "),react.createElement("option",{value:"angle"},"Angle"),react.createElement("option",{value:"circle"},"Circle")))}getTypeString=type=>index_all.ZP.isArray(type)?index_all.ZP.map(type,this.getTypeString).join(","):"polygon"===type?"polygon-"+this.props.shape.coords.length:type;changeType=e=>{const types=String(e.target.value).split(","),pointCount=function arraySum(array){return index_all.ZP.reduce(array,(function(memo,arg){return memo+arg}),0)}(index_all.ZP.map(types,ShapeTypes.getPointCountForType)),radius=function scaleToRange(dist,range){const spreadX=range[0][1]-range[0][0],spreadY=range[1][1]-range[1][0];return dist*Math.max(spreadX,spreadY)/20}(4,this.refs.graph.props.range),offset=180*(.5-1/pointCount),coords=index_all.ZP.times(pointCount,(function(i){return kmath_src.xm.rotateDeg([radius,0],360*i/pointCount+offset)}));this.props.onChange({shape:{type:types,coords,options:ShapeTypes.defaultOptions(types)}})};componentDidMount(){this.setupGraphie(this.refs.graph.graphie())}componentDidUpdate(prevProps){deepEq(prevProps.shape,this.props.shape)||this.refs.graph.reset()}updateCoords=()=>{this.props.onChange({shape:this.shape.toJSON()})};setupGraphie=graphie=>{this.shape=ShapeTypes.addMovableShape(graphie,{editable:!0,snap:graphie.snap,shape:this.props.shape,onMoveEnd:this.updateCoords})}}class TransformerEditor extends react.Component{static defaultProps=defaultTransformerProps;static widgetName="transformer";render(){const graph=index_all.ZP.extend(function(setProps,boxSize){const labels=(setProps=setProps||{}).labels||["x","y"],range=setProps.range||[[-10,10],[-10,10]],step=setProps.step||[1,1];return{box:[boxSize,boxSize],labels,range,step,gridStep:setProps.gridStep||getGridStep(range,step,boxSize),valid:!0,backgroundImage:transformer_editor_defaultBackgroundImage,markings:"grid",showProtractor:!1}}(this.props.graph,340),this.props.graph);return react.createElement("div",null,react.createElement("div",null,react.createElement(transformer_editor_PropCheckBox,{label:"Grade empty answers as wrong:",gradeEmpty:this.props.gradeEmpty,onChange:this.props.onChange}),react.createElement(transformer_editor_InfoTip,null,react.createElement("p",null,"We generally do not grade empty answers. This usually works well, but sometimes can result in giving away part of an answer in a multi-part question."),react.createElement("p",null,"If this is a multi-part question (there is another widget), you probably want to enable this option. Otherwise, you should leave it disabled."),react.createElement("p",null,"Confused? Talk to Elizabeth."))),react.createElement("div",null,"Graph settings:"),react.createElement(graph_settings.Z,{box:graph.box,labels:graph.labels,range:graph.range,step:graph.step,gridStep:graph.gridStep,valid:graph.valid,backgroundImage:graph.backgroundImage,markings:graph.markings,showProtractor:graph.showProtractor,onChange:this.changeGraph}),react.createElement("div",null,"Transformation settings:"),react.createElement(TransformationExplorerSettings,{ref:"transformationSettings",graphMode:this.props.graphMode,listMode:this.props.listMode,tools:this.props.tools,drawSolutionShape:this.props.drawSolutionShape,onChange:this.props.onChange}),react.createElement("div",null,"Starting location:"),react.createElement(TransformationsShapeEditor,{ref:"shapeEditor",graph,shape:this.props.starting.shape,onChange:this.changeStarting,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable}),react.createElement("div",null,"Solution transformations:"),react.createElement(Transformer,{ref:"explorer",graph,graphMode:this.props.graphMode,listMode:this.props.listMode,gradeEmpty:this.props.gradeEmpty,tools:this.props.tools,drawSolutionShape:this.props.drawSolutionShape,starting:this.props.starting,correct:this.props.starting,transformations:this.props.correct.transformations,onChange:this.changeTransformer,trackInteraction:()=>{}}))}changeGraph=(graphChanges,callback)=>{const newGraph=index_all.ZP.extend({},this.props.graph,graphChanges);this.props.onChange({graph:newGraph},callback)};changeStarting=startingChanges=>{const newStarting=index_all.ZP.extend({},this.props.starting,startingChanges);this.props.onChange({starting:newStarting})};changeTransformer=(changes,callback)=>{changes.transformations&&(changes.correct={...this.props.correct,transformations:changes.transformations},delete changes.transformations),this.props.onChange(changes,callback)};serialize=()=>{const json=this.refs.explorer.getEditorJSON();return json.correct=json.answer,delete json.answer,json}}const transformer_editor=TransformerEditor;try{TransformerEditor.displayName="TransformerEditor",TransformerEditor.__docgenInfo={description:"",displayName:"TransformerEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/transformer-editor.tsx#TransformerEditor"]={docgenInfo:TransformerEditor.__docgenInfo,name:"TransformerEditor",path:"packages/perseus-editor/src/widgets/transformer-editor.tsx#TransformerEditor"})}catch(__react_docgen_typescript_loader_error){}var kas_src=__webpack_require__("./packages/kas/src/index.js");const{InlineIcon:unit_editor_InlineIcon,NumberInput:unit_editor_NumberInput}=src.components,{iconOk,iconRemove}=src.icons,primUnits=function(expr){return expr.simplify().asMul().partition()[1].flatten().simplify()};class UnitExample extends react.Component{UNSAFE_componentWillMount(){this._checkValidity(this.props)}UNSAFE_componentWillReceiveProps(nextProps){this._checkValidity(nextProps)}_checkValidity=_ref=>{let{name,original,sigfigs}=_ref;const parseResult=kas_src.f6(name);let solvedExample="",valid=!0;if(parseResult.parsed&&original){const x=new kas_src.nd("x"),{unit}=parseResult,equality=new kas_src.Eq(original,"=",new kas_src.UM(x,unit));try{solvedExample=function(num,sigfigs){return(0,src.Md)(num,sigfigs,-10,!1)}(equality.solveLinearEquationForVariable(x).eval(),sigfigs),valid=kas_src.qu(primUnits(original),primUnits(unit)).equal}catch(e){valid=!1}}else valid=!1;this.setState({valid,solvedExample})};render(){let icon;return icon=this.state.valid?react.createElement("span",null,react.createElement("span",{className:"unit-example-okay"},react.createElement(unit_editor_InlineIcon,iconOk)),this.state.solvedExample):react.createElement("span",{className:"unit-example-not-okay"},react.createElement(unit_editor_InlineIcon,iconRemove)),react.createElement("div",null,icon," ",this.props.name)}}class UnitInputEditor extends react.Component{static propTypes={...src.ye.i,value:prop_types_default().string,acceptingUnits:prop_types_default().arrayOf(prop_types_default().string),accepting:prop_types_default().oneOf(["all","some"]),sigfigs:prop_types_default().number};static widgetName="unit-input";static defaultProps={value:"5x10^5 kg m / s^2",accepting:"all",sigfigs:3};constructor(props){super(props),this.groupId=index_all.ZP.uniqueId("accepting"),this._doOriginal(props)}UNSAFE_componentWillReceiveProps(nextProps){this._doOriginal(nextProps)}change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();handleAcceptingUnitsChange=event=>{const acceptingUnits=event.target.value.split(",").map((str=>str.trim())).filter((str=>""!==str));this.change({acceptingUnits})};handleSigfigChange=sigfigs=>{this.change({sigfigs})};_checkSigfigValidity=sigfigs=>sigfigs>0&&sigfigs<=10;_setAccepting=val=>{this.change({accepting:val})};_doOriginal=props=>{const tryParse=kas_src.f6(props.value);this.parsed=!1,tryParse.parsed&&"unitMagnitude"===tryParse.type&&(this.original=tryParse.expr,this.parsed=!0)};onChange=event=>{this.props.onChange({value:event.target.value})};getSaveWarnings=()=>{const{value,accepting,acceptingUnits}=this.props,warnings=[];return kas_src.f6(value).parsed||warnings.push("Answer did not parse"),"some"===accepting&&0===acceptingUnits.length&&warnings.push("There are no accepted units"),warnings};serialize=()=>src.yU.serialize.call(this);render(){const{acceptingUnits=[],accepting}=this.props;let acceptingElem=null;if("some"===accepting){const unitsArr=acceptingUnits.map(((name,i)=>react.createElement(UnitExample,{name,original:this.original||null,sigfigs:this.props.sigfigs,key:i})));acceptingElem=react.createElement("div",null,react.createElement("input",{type:"text",defaultValue:acceptingUnits.join(", "),onChange:this.handleAcceptingUnitsChange})," ","(comma-separated)",unitsArr)}return react.createElement("div",{className:"unit-editor"},react.createElement("div",null,react.createElement("input",{value:this.props.value,className:"unit-editor-canonical",onChange:this.onChange})," ",this.parsed?react.createElement("span",{className:"unit-example-okay"},react.createElement(unit_editor_InlineIcon,iconOk)):react.createElement("span",{className:"unit-example-not-okay"},react.createElement(unit_editor_InlineIcon,iconRemove))),react.createElement("div",null,"Significant Figures:"," ",react.createElement(unit_editor_NumberInput,{value:this.props.sigfigs,onChange:this.handleSigfigChange,checkValidity:this._checkSigfigValidity,useArrowKeys:!0})),react.createElement("div",null,react.createElement("label",null,react.createElement("input",{type:"radio",name:this.groupId,onChange:()=>this._setAccepting("all"),checked:"all"===this.props.accepting})," Any equivalent unit "),react.createElement("label",null,react.createElement("input",{type:"radio",name:this.groupId,onChange:()=>this._setAccepting("some"),checked:"some"===this.props.accepting})," Only these units ")),acceptingElem)}}const unit_editor=UnitInputEditor;try{UnitInputEditor.displayName="UnitInputEditor",UnitInputEditor.__docgenInfo={description:"",displayName:"UnitInputEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/unit-editor.tsx#UnitInputEditor"]={docgenInfo:UnitInputEditor.__docgenInfo,name:"UnitInputEditor",path:"packages/perseus-editor/src/widgets/unit-editor.tsx#UnitInputEditor"})}catch(__react_docgen_typescript_loader_error){}const{InfoTip:video_editor_InfoTip}=src.components,KA_VIDEO_URL=/khanacademy\.org\/.*\/v\/(.*)$/;function getSlugFromUrl(url){const match=KA_VIDEO_URL.exec(url);return match?match[1]:url}class VideoEditor extends react.Component{static propTypes={...src.ye.i,location:prop_types_default().string,onChange:prop_types_default().func};static widgetName="video";static defaultProps={location:""};_handleUrlChange=url=>{this.props.onChange({location:getSlugFromUrl(url)})};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();serialize=()=>src.yU.serialize.call(this);render(){return react.createElement("div",null,react.createElement("label",null,"KA Video Slug:"," ",react.createElement(blur_input.Z,{value:this.props.location,style:{width:290},onChange:this._handleUrlChange}),react.createElement(video_editor_InfoTip,null,"KA video URLs will be converted to just the slug.")))}}const video_editor=VideoEditor;try{VideoEditor.displayName="VideoEditor",VideoEditor.__docgenInfo={description:"This is the main editor for this widget, to specify all the options.",displayName:"VideoEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/video-editor.tsx#VideoEditor"]={docgenInfo:VideoEditor.__docgenInfo,name:"VideoEditor",path:"packages/perseus-editor/src/widgets/video-editor.tsx#VideoEditor"})}catch(__react_docgen_typescript_loader_error){}const all_editors=[categorizer_editor.Z,cs_program_editor,definition_editor.Z,dropdown_editor.Z,example_graphie_widget_editor,example_widget_editor,explanation_editor.Z,expression_editor.Z,graded_group_editor,graded_group_set_editor,grapher_editor,group_editor,iframe_editor,image_editor,input_number_editor.Z,interaction_editor.Z,interactive_graph_editor,label_image_editor.Z,lights_puzzle_editor,matcher_editor.Z,matrix_editor,measurer_editor,molecule_editor,number_line_editor.Z,numeric_input_editor.Z,orderer_editor,passage_editor,passage_ref_editor,passage_ref_target_editor,plotter_editor,reaction_diagram_editor,sequence_editor,simple_markdown_tester_editor,simulator_editor,sorter_editor.Z,table_editor,transformer_editor,unit_editor,video_editor,radio_editor.Z]},"./packages/perseus-editor/src/all-widgets.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>all_widgets});var src=__webpack_require__("./packages/perseus/src/index.ts"),example_graphie_widget=__webpack_require__("./packages/perseus-editor/src/widgets/example-graphie-widget.tsx"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("./node_modules/react/index.js");class TextInput extends react.Component{input=react.createRef();render(){return react.createElement("input",{ref:this.input,value:this.props.value||"",onChange:this.changeValue})}focus=()=>(this.input.current?.focus(),!0);changeValue=e=>{this.props.onChange(e.target.value)}}class ExampleWidget extends react.Component{static propTypes={...src.ye.i,value:prop_types_default().string};static defaultProps={value:""};input=react.createRef();static validate(value,rubric){return""===value?{type:"invalid",message:"It looks like you haven't answered all of the question yet."}:value===rubric.correct?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}}change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();render(){return react.createElement(TextInput,{ref:this.input,value:this.props.value,onChange:this.change("value")})}getUserInput=()=>this.props.value;focus=()=>(this.input.current?.focus(),!0);simpleValidate=rubric=>ExampleWidget.validate(this.getUserInput(),rubric)}const example_widget={name:"example-widget",displayName:"Example Widget",defaultAlignment:"inline-block",hidden:!0,widget:ExampleWidget};try{examplewidget.displayName="examplewidget",examplewidget.__docgenInfo={description:"For this widget to work, we must import this file in src/all-widgets.js",displayName:"examplewidget",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/example-widget.tsx#examplewidget"]={docgenInfo:examplewidget.__docgenInfo,name:"examplewidget",path:"packages/perseus-editor/src/widgets/example-widget.tsx#examplewidget"})}catch(__react_docgen_typescript_loader_error){}var index_all=__webpack_require__("./node_modules/underscore/modules/index-all.js");const mdParse=src.ZU.parse,mdOutput=src.ZU.basicOutput;class SimpleMarkdownTester extends react.Component{static propTypes={...src.ye.i,value:prop_types_default().string};static defaultProps={value:""};static validate(state,rubric){return{type:"points",earned:0,total:0,message:null}}change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return src.ye.m.apply(_this,args)}})();toJSON=()=>({});render(){const parsed=mdParse(this.props.value),output=mdOutput(parsed);return react.createElement("div",null,output)}focus=()=>(this.refs.input.focus(),!0);simpleValidate=rubric=>SimpleMarkdownTester.validate(this.toJSON(),rubric)}const simple_markdown_tester={name:"simple-markdown-tester",displayName:"Simple Markdown Tester",hidden:!0,widget:SimpleMarkdownTester,transform:index_all.ZP.identity};try{simplemarkdowntester.displayName="simplemarkdowntester",simplemarkdowntester.__docgenInfo={description:"For this widget to work, we must import this file in src/all-widgets.js",displayName:"simplemarkdowntester",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/simple-markdown-tester.tsx#simplemarkdowntester"]={docgenInfo:simplemarkdowntester.__docgenInfo,name:"simplemarkdowntester",path:"packages/perseus-editor/src/widgets/simple-markdown-tester.tsx#simplemarkdowntester"})}catch(__react_docgen_typescript_loader_error){}const testing_widgets=[example_graphie_widget.Z,example_widget,simple_markdown_tester],all_widgets=[...src.DA,...testing_widgets]},"./packages/perseus-editor/src/components/blur-input.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");class BlurInput extends react__WEBPACK_IMPORTED_MODULE_0__.Component{input=react__WEBPACK_IMPORTED_MODULE_0__.createRef();constructor(props){super(props),this.state={value:this.props.value}}UNSAFE_componentWillReceiveProps(nextProps){this.setState({value:nextProps.value})}handleChange=e=>{this.setState({value:e.target.value})};handleBlur=e=>{this.props.onChange(e.target.value)};focus(){this.input.current?.focus()}render(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement("input",{ref:this.input,className:this.props.className,style:this.props.style,type:"text",value:this.state.value,onChange:this.handleChange,onBlur:this.handleBlur})}}const __WEBPACK_DEFAULT_EXPORT__=BlurInput;try{BlurInput.displayName="BlurInput",BlurInput.__docgenInfo={description:"",displayName:"BlurInput",props:{value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(arg1: string) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/components/blur-input.tsx#BlurInput"]={docgenInfo:BlurInput.__docgenInfo,name:"BlurInput",path:"packages/perseus-editor/src/components/blur-input.tsx#BlurInput"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{ML:()=>editor.Z,cx:()=>editor_page});(0,__webpack_require__("./packages/perseus-core/src/index.ts").C)("@khanacademy/perseus-editor","__lib_version__");var perseus_src=__webpack_require__("./packages/perseus/src/index.ts"),react=__webpack_require__("./node_modules/react/index.js"),index_all=__webpack_require__("./node_modules/underscore/modules/index-all.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types);const SCREEN_SIZES={phone:{width:320,height:480,framedWidth:320},tablet:{width:750,height:920,framedWidth:525},desktop:{width:688,height:600,framedWidth:688}};class DeviceFramer extends react.Component{static propTypes={children:prop_types_default().element.isRequired,deviceType:prop_types_default().oneOf([perseus_src.constants.devices.PHONE,perseus_src.constants.devices.TABLET,perseus_src.constants.devices.DESKTOP]).isRequired,nochrome:prop_types_default().bool};render(){const deviceType=this.props.deviceType;if(this.props.nochrome)return react.createElement("div",null,react.createElement("div",{key:"screen",style:{width:SCREEN_SIZES[deviceType].framedWidth+2*perseus_src.constants.n+perseus_src.constants.F}},react.createElement("div",null,this.props.children)));const scale=SCREEN_SIZES[deviceType].framedWidth/SCREEN_SIZES[deviceType].width,screenStyle={backgroundColor:"white",color:"black",textAlign:"left",width:SCREEN_SIZES[deviceType].width,height:SCREEN_SIZES[deviceType].height,border:"solid 1px #CCC",margin:8,zoom:scale};return react.createElement("div",{key:"screen",className:"screen",style:screenStyle},this.props.children)}}const device_framer=DeviceFramer;try{DeviceFramer.displayName="DeviceFramer",DeviceFramer.__docgenInfo={description:"",displayName:"DeviceFramer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/components/device-framer.tsx#DeviceFramer"]={docgenInfo:DeviceFramer.__docgenInfo,name:"DeviceFramer",path:"packages/perseus-editor/src/components/device-framer.tsx#DeviceFramer"})}catch(__react_docgen_typescript_loader_error){}var create_react_class=__webpack_require__("./node_modules/create-react-class/index.js"),create_react_class_default=__webpack_require__.n(create_react_class);const json_editor=create_react_class_default()({displayName:"JsonEditor",getInitialState:function(){return{currentValue:JSON.stringify(this.props.value,null,4),valid:!0}},UNSAFE_componentWillReceiveProps:function(nextProps){(!this.state.valid||!index_all.ZP.isEqual(nextProps.value,JSON.parse(this.state.currentValue)))&&this.setState(this.getInitialState())},render:function(){const classes="perseus-json-editor "+(this.state.valid?"valid":"invalid");return react.createElement("textarea",{className:classes,value:this.state.currentValue,onChange:this.handleChange,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur})},handleKeyDown:function(e){if("Tab"===e.key){const cursorPos=e.target.selectionStart,v=e.target.value,textBefore=v.substring(0,cursorPos),textAfter=v.substring(cursorPos,v.length);e.target.value=textBefore+"    "+textAfter,e.target.selectionStart=textBefore.length+4,e.target.selectionEnd=textBefore.length+4,e.preventDefault(),this.handleChange(e)}},handleChange:function(e){const nextString=e.target.value;try{let json=JSON.parse(nextString);index_all.ZP.isString(json)&&(json=JSON.parse(json)),this.setState({currentValue:nextString,valid:!0},(function(){this.props.onChange(json)}))}catch(ex){this.setState({currentValue:nextString,valid:!1})}},handleBlur:function(e){const nextString=e.target.value;try{let json=JSON.parse(nextString);index_all.ZP.isString(json)&&(json=JSON.parse(json)),this.setState({currentValue:JSON.stringify(json,null,4),valid:!0},(function(){this.props.onChange(json)}))}catch(ex){this.setState({currentValue:JSON.stringify(this.props.value,null,4),valid:!0})}}});var section_control_button=__webpack_require__("./packages/perseus-editor/src/components/section-control-button.tsx"),editor=__webpack_require__("./packages/perseus-editor/src/editor.tsx");let nextIframeID=0;const requestIframeData={},updateIframeHeight={};window.iframeDataStore={},window.addEventListener("message",(event=>{if("string"==typeof event.data){const callback=requestIframeData[event.data];callback&&callback()}else event.data.id&&(void 0!==event.data.height?updateIframeHeight[event.data.id](event.data.height):event.data.lintWarnings&&perseus_src.Zb.log("LINTER REPORT",{lintWarnings:JSON.stringify(event.data.lintWarnings)}))}));class IframeContentRenderer extends react.Component{container=react.createRef();componentDidMount(){this._isMounted=!0,this.iframeID=nextIframeID,nextIframeID++,this._prepareFrame(),requestIframeData[this.iframeID]=()=>{this.sendNewData(this._lastData)},updateIframeHeight[this.iframeID]=height=>{this._lastHeight=height,this._isMounted&&this.props.seamless&&this.container.current&&(this.container.current.style.height=height+"px")}}shouldComponentUpdate(nextProps){return nextProps.datasetValue!==this.props.datasetValue||nextProps.seamless!==this.props.seamless}componentDidUpdate(prevProps){this.container.current&&(this.props.seamless?this.container.current.style.height=this._lastHeight+"px":this.container.current.style.height="100%"),prevProps.datasetValue!==this.props.datasetValue&&this._prepareFrame()}componentWillUnmount(){requestIframeData[this.iframeID]=null,updateIframeHeight[this.iframeID]=null,this._isMounted=!1}_prepareFrame(){this._frame&&this.container.current?.removeChild(this._frame);const frame=document.createElement("iframe");frame.style.width="100%",frame.style.height="100%",frame.src=this.props.url,this.props.datasetKey&&(frame.dataset[this.props.datasetKey]=this.props.datasetValue),frame.dataset.id=String(this.iframeID),this.props.seamless&&(frame.dataset.lintGutter="true"),this.container.current?.appendChild(frame),this._frame=frame}sendNewData(data){const frame=this._frame;this._isMounted&&data&&frame?.contentWindow&&(this._lastData=data,window.iframeDataStore[this.iframeID]=data,frame.contentWindow.postMessage(this.iframeID,"*"))}render(){return react.createElement("div",{ref:this.container,style:{width:"100%",height:"100%"}})}}const iframe_content_renderer=IframeContentRenderer;try{IframeContentRenderer.displayName="IframeContentRenderer",IframeContentRenderer.__docgenInfo={description:"",displayName:"IframeContentRenderer",props:{url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},datasetKey:{defaultValue:null,description:"",name:"datasetKey",required:!0,type:{name:"string"}},datasetValue:{defaultValue:null,description:"",name:"datasetValue",required:!0,type:{name:"any"}},seamless:{defaultValue:null,description:"",name:"seamless",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/iframe-content-renderer.tsx#IframeContentRenderer"]={docgenInfo:IframeContentRenderer.__docgenInfo,name:"IframeContentRenderer",path:"packages/perseus-editor/src/iframe-content-renderer.tsx#IframeContentRenderer"})}catch(__react_docgen_typescript_loader_error){}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const{HUD,InlineIcon}=perseus_src.components,{iconCircleArrowDown,iconCircleArrowUp,iconPlus,iconTrash}=perseus_src.icons;class ArticleEditor extends react.Component{static defaultProps={contentPaths:[],json:[{}],mode:"edit",screen:"desktop",sectionImageUploadGenerator:()=>react.createElement("span",null),useNewStyles:!1};state={highlightLint:!0};componentDidMount(){this._updatePreviewFrames()}componentDidUpdate(){this._updatePreviewFrames()}_updatePreviewFrames(){"preview"===this.props.mode?this.refs["frame-all"].sendNewData({type:"article-all",data:this._sections().map(((section,i)=>this._apiOptionsForSection(section,i)))}):"edit"===this.props.mode&&this._sections().forEach(((section,i)=>{this.refs["frame-"+i].sendNewData({type:"article",data:this._apiOptionsForSection(section,i)})}))}_apiOptionsForSection(section,sectionIndex){const editor=this.refs[`editor${sectionIndex}`];return{apiOptions:{...perseus_src._E.defaults,...this.props.apiOptions,showAlignmentOptions:!0,isArticle:!0},json:section,useNewStyles:this.props.useNewStyles,linterContext:{contentType:"article",highlightLint:this.state.highlightLint,paths:this.props.contentPaths},legacyPerseusLint:editor?editor.getSaveWarnings():[]}}_sections(){return Array.isArray(this.props.json)?this.props.json:[this.props.json]}_renderEditor(){const{imageUploader,sectionImageUploadGenerator}=this.props,apiOptions={...perseus_src._E.defaults,...this.props.apiOptions,showAlignmentOptions:!0,isArticle:!0},sections=this._sections();return react.createElement("div",{className:"perseus-editor-table"},sections.map(((section,i)=>[react.createElement("div",{className:"perseus-editor-row",key:i},react.createElement("div",{className:"perseus-editor-left-cell"},react.createElement("div",{className:"pod-title"},"Section ",i+1,react.createElement("div",{style:{display:"inline-block",float:"right"}},sectionImageUploadGenerator(i),react.createElement(section_control_button.Z,{icon:iconPlus,onClick:()=>{this._handleAddSectionAfter(i)},title:"Add a new section after this one"}),i+1<sections.length&&react.createElement(section_control_button.Z,{icon:iconCircleArrowDown,onClick:()=>{this._handleMoveSectionLater(i)},title:"Move this section down"}),i>0&&react.createElement(section_control_button.Z,{icon:iconCircleArrowUp,onClick:()=>{this._handleMoveSectionEarlier(i)},title:"Move this section up"}),react.createElement(section_control_button.Z,{icon:iconTrash,onClick:()=>{confirm("Are you sure you want to delete section "+(i+1)+"?")&&this._handleRemoveSection(i)},title:"Delete this section"}))),react.createElement(editor.Z,_extends({},section,{apiOptions,imageUploader,onChange:index_all.ZP.partial(this._handleEditorChange,i),placeholder:"Type your section text here...",ref:"editor"+i}))),react.createElement("div",{className:"editor-preview"},this._renderIframePreview(i,!0)))])),this._renderAddSection(),this._renderLinterHUD())}_renderAddSection(){return react.createElement("div",{className:"perseus-editor-row"},react.createElement("div",{className:"perseus-editor-left-cell"},react.createElement("a",{href:"#",className:"simple-button orange",onClick:()=>{this._handleAddSectionAfter(this._sections().length-1)}},react.createElement(InlineIcon,iconPlus)," Add a section")))}_renderLinterHUD(){return react.createElement(HUD,{message:"Style warnings",enabled:this.state.highlightLint,onClick:()=>{this.setState({highlightLint:!this.state.highlightLint})}})}_renderIframePreview(i,nochrome){const isMobile="phone"===this.props.screen||"tablet"===this.props.screen;return react.createElement(device_framer,{deviceType:this.props.screen,nochrome},react.createElement(iframe_content_renderer,{ref:"frame-"+i,key:this.props.screen,datasetKey:"mobile",datasetValue:isMobile,seamless:nochrome,url:this.props.previewURL}))}_renderPreviewMode(){return react.createElement("div",{className:"standalone-preview"},this._renderIframePreview("all",!1))}_handleJsonChange=newJson=>{this.props.onChange({json:newJson})};_handleEditorChange=(i,newProps)=>{const sections=index_all.ZP.clone(this._sections());sections[i]=index_all.ZP.extend({},sections[i],newProps),this.props.onChange({json:sections})};_handleMoveSectionEarlier(i){if(0===i)return;const sections=index_all.ZP.clone(this._sections()),section=sections[i];sections.splice(i,1),sections.splice(i-1,0,section),this.props.onChange({json:sections})}_handleMoveSectionLater(i){const sections=index_all.ZP.clone(this._sections());if(i+1===sections.length)return;const section=sections[i];sections.splice(i,1),sections.splice(i+1,0,section),this.props.onChange({json:sections})}_handleAddSectionAfter(i){const sections=index_all.ZP.clone(this.serialize()),newSection=i>=0?{widgets:sections[i].widgets}:{};sections.splice(i+1,0,newSection),this.props.onChange({json:sections})}_handleRemoveSection(i){const sections=index_all.ZP.clone(this._sections());sections.splice(i,1),this.props.onChange({json:sections})}serialize(){if("edit"===this.props.mode)return this._sections().map(((section,i)=>this.refs["editor"+i].serialize()));if("preview"===this.props.mode||"json"===this.props.mode)return this.props.json;throw new perseus_src.uI("Could not serialize; mode "+this.props.mode+" not found",perseus_src.D1.Internal)}getSaveWarnings(){if("edit"!==this.props.mode)throw new perseus_src.uI("Can only get save warnings in edit mode.",perseus_src.D1.NotAllowed);return this._sections().map(((section,i)=>this.refs["editor"+i].getSaveWarnings()))}render(){return react.createElement("div",{className:"framework-perseus perseus-article-editor"},"edit"===this.props.mode&&this._renderEditor(),"preview"===this.props.mode&&this._renderPreviewMode(),"json"===this.props.mode&&react.createElement("div",{className:"json-editor"},react.createElement("div",{className:"json-editor-warning"},react.createElement("span",null,"Warning: Editing in this mode can lead to broken articles!")),react.createElement(json_editor,{multiLine:!0,onChange:this._handleJsonChange,value:this.props.json})))}}try{articleeditor.displayName="articleeditor",articleeditor.__docgenInfo={description:"",displayName:"articleeditor",props:{contentPaths:{defaultValue:{value:"[]"},description:"",name:"contentPaths",required:!1,type:{name:"readonly string[]"}},json:{defaultValue:{value:"[{}]"},description:"",name:"json",required:!1,type:{name:"JsonType"}},mode:{defaultValue:{value:"edit"},description:"",name:"mode",required:!1,type:{name:"enum",value:[{value:'"json"'},{value:'"diff"'},{value:'"edit"'},{value:'"preview"'}]}},screen:{defaultValue:{value:"desktop"},description:"",name:"screen",required:!1,type:{name:"enum",value:[{value:'"phone"'},{value:'"tablet"'},{value:'"desktop"'}]}},sectionImageUploadGenerator:{defaultValue:{value:"() => <span />"},description:"",name:"sectionImageUploadGenerator",required:!1,type:{name:"(i: number) => ReactElement<DetailedHTMLProps<HTMLAttributes<HTMLSpanElement>, HTMLSpanElement>, string | JSXElementConstructor<...>>"}},useNewStyles:{defaultValue:{value:"false"},description:"",name:"useNewStyles",required:!1,type:{name:"boolean"}},apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!1,type:{name:"Readonly<{ isArticle?: boolean; onInputError?: ((widgetId: any, value: string, message?: string | null) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown) | undef..."}},imageUploader:{defaultValue:null,description:"",name:"imageUploader",required:!1,type:{name:"((arg1: string, arg2: (arg1: string) => unknown) => unknown)"}},previewURL:{defaultValue:null,description:"",name:"previewURL",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(values: { [key: string]: any; }, callback?: (() => unknown) | undefined, silent?: boolean | undefined) => unknown"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/article-editor.tsx#articleeditor"]={docgenInfo:articleeditor.__docgenInfo,name:"articleeditor",path:"packages/perseus-editor/src/article-editor.tsx#articleeditor"})}catch(__react_docgen_typescript_loader_error){}const{ButtonGroup,InlineIcon:viewport_resizer_InlineIcon}=perseus_src.components,{devices}=perseus_src.constants,{iconDesktop,iconMobilePhone,iconTablet}=perseus_src.icons;class ViewportResizer extends react.Component{static propTypes={deviceType:prop_types_default().string.isRequired,onViewportSizeChanged:prop_types_default().func.isRequired};handleChange=value=>{this.props.onViewportSizeChanged(value)};render(){const phoneButtonContents=react.createElement("span",null,react.createElement(viewport_resizer_InlineIcon,iconMobilePhone)," Phone"),tabletButtonContents=react.createElement("span",null,react.createElement(viewport_resizer_InlineIcon,iconTablet)," Tablet"),desktopButtonContents=react.createElement("span",null,react.createElement(viewport_resizer_InlineIcon,iconDesktop)," Desktop");return react.createElement("span",{className:"viewport-resizer"},"Viewport:"," ",react.createElement(ButtonGroup,{value:this.props.deviceType,allowEmpty:!1,buttons:[{value:devices.PHONE,content:phoneButtonContents},{value:devices.TABLET,content:tabletButtonContents},{value:devices.DESKTOP,content:desktopButtonContents}],onChange:this.handleChange}))}}const viewport_resizer=ViewportResizer;try{ViewportResizer.displayName="ViewportResizer",ViewportResizer.__docgenInfo={description:"",displayName:"ViewportResizer",props:{deviceType:{defaultValue:null,description:"",name:"deviceType",required:!0,type:{name:"enum",value:[{value:'"phone"'},{value:'"tablet"'},{value:'"desktop"'}]}},onViewportSizeChanged:{defaultValue:null,description:"",name:"onViewportSizeChanged",required:!0,type:{name:"(arg1: DeviceType) => unknown"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/components/viewport-resizer.tsx#ViewportResizer"]={docgenInfo:ViewportResizer.__docgenInfo,name:"ViewportResizer",path:"packages/perseus-editor/src/components/viewport-resizer.tsx#ViewportResizer"})}catch(__react_docgen_typescript_loader_error){}var renderer_diff=__webpack_require__("./packages/perseus-editor/src/diffs/renderer-diff.tsx");const rendererProps=prop_types_default().shape({content:prop_types_default().string,images:prop_types_default().objectOf(prop_types_default().any),widgets:prop_types_default().objectOf(prop_types_default().any)});class ArticleDiff extends react.Component{static propTypes={after:prop_types_default().oneOfType([rendererProps,prop_types_default().arrayOf(rendererProps)]).isRequired,before:prop_types_default().oneOfType([rendererProps,prop_types_default().arrayOf(rendererProps)]).isRequired};static _stateFromProps=props=>{const{before,after}=props;return{before:Array.isArray(before)?before:[before],after:Array.isArray(after)?after:[after]}};state=ArticleDiff._stateFromProps(this.props);UNSAFE_componentWillReceiveProps(nextProps){this.setState(ArticleDiff._stateFromProps(nextProps))}render(){const{before,after}=this.state,sectionCount=Math.max(before.length,after.length),sections=index_all.ZP.times(sectionCount,(n=>react.createElement(renderer_diff.Z,{before:n<before.length?before[n]:void 0,after:n<after.length?after[n]:void 0,title:`Section ${n+1}`,showAlignmentOptions:!0,showSeparator:n<sectionCount-1,key:n})));return react.createElement("div",{className:"framework-perseus"},sections)}}try{ArticleDiff.displayName="ArticleDiff",ArticleDiff.__docgenInfo={description:"",displayName:"ArticleDiff",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/diffs/article-diff.tsx#ArticleDiff"]={docgenInfo:ArticleDiff.__docgenInfo,name:"ArticleDiff",path:"packages/perseus-editor/src/diffs/article-diff.tsx#ArticleDiff"})}catch(__react_docgen_typescript_loader_error){}var widget_diff=__webpack_require__("./packages/perseus-editor/src/diffs/widget-diff.tsx");const itemProps=prop_types_default().shape({question:prop_types_default().shape({}).isRequired,answerArea:prop_types_default().shape({}).isRequired,hints:prop_types_default().arrayOf(prop_types_default().any).isRequired});class ItemDiff extends react.Component{static propTypes={after:itemProps.isRequired,before:itemProps.isRequired};render(){const{before,after}=this.props,hintCount=Math.max(before.hints.length,after.hints.length),question=react.createElement(renderer_diff.Z,{before:before.question,after:after.question,title:"Question",showAlignmentOptions:!1,showSeparator:!0}),extras=react.createElement(widget_diff.Z,{before:before.answerArea,after:after.answerArea,title:"Question extras"}),hints=index_all.ZP.times(hintCount,(function(n){return react.createElement(renderer_diff.Z,{before:n<before.hints.length?before.hints[n]:void 0,after:n<after.hints.length?after.hints[n]:void 0,title:`Hint ${n+1}`,showAlignmentOptions:!1,showSeparator:n<hintCount-1,key:n})}));return react.createElement("div",{className:"framework-perseus"},question,extras,hints&&react.createElement("div",{className:"diff-separator"}),hints)}}try{ItemDiff.displayName="ItemDiff",ItemDiff.__docgenInfo={description:"",displayName:"ItemDiff",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/diffs/item-diff.tsx#ItemDiff"]={docgenInfo:ItemDiff.__docgenInfo,name:"ItemDiff",path:"packages/perseus-editor/src/diffs/item-diff.tsx#ItemDiff"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./packages/perseus-editor/src/diffs/structured-item-diff.tsx");const{InfoTip,InlineIcon:hint_editor_InlineIcon}=perseus_src.components,{iconCircleArrowDown:hint_editor_iconCircleArrowDown,iconCircleArrowUp:hint_editor_iconCircleArrowUp,iconPlus:hint_editor_iconPlus,iconTrash:hint_editor_iconTrash}=perseus_src.icons;class HintEditor extends react.Component{static defaultProps={className:"",content:"",replace:!1,showMoveButtons:!0,showTitle:!0,showRemoveButton:!0};editor=react.createRef();handleChange=e=>{this.props.onChange({replace:e.target.checked})};focus=()=>{this.editor.current?.focus()};getSaveWarnings=()=>this.editor.current?.getSaveWarnings();serialize=options=>this.editor.current?.serialize(options);render(){return react.createElement("div",{className:"perseus-hint-editor "+this.props.className},this.props.showTitle&&react.createElement("div",{className:"pod-title"},"Hint"),react.createElement(editor.Z,{ref:this.editor,key:this.props.itemId,apiOptions:this.props.apiOptions,widgets:this.props.widgets||void 0,content:this.props.content||void 0,images:this.props.images,replace:this.props.replace,placeholder:"Type your hint here...",imageUploader:this.props.imageUploader,onChange:this.props.onChange}),react.createElement("div",{className:"hint-controls-container clearfix"},this.props.showMoveButtons&&react.createElement("span",{className:"reorder-hints"},react.createElement("button",{type:"button",className:this.props.isLast?"hidden":"",onClick:index_all.ZP.partial(this.props.onMove,1)},react.createElement(hint_editor_InlineIcon,hint_editor_iconCircleArrowDown))," ",react.createElement("button",{type:"button",className:this.props.isFirst?"hidden":"",onClick:index_all.ZP.partial(this.props.onMove,-1)},react.createElement(hint_editor_InlineIcon,hint_editor_iconCircleArrowUp))," ",this.props.isLast&&react.createElement(InfoTip,null,react.createElement("p",null,"The last hint is automatically bolded."))),react.createElement("input",{type:"checkbox",checked:this.props.replace,onChange:this.handleChange}),"Replace previous hint",this.props.showRemoveButton&&react.createElement("button",{type:"button",className:"remove-hint simple-button orange",onClick:this.props.onRemove},react.createElement(hint_editor_InlineIcon,hint_editor_iconTrash),"Remove this hint"," ")))}}class CombinedHintEditor extends react.Component{static defaultProps={highlightLint:!1};editor=react.createRef();frame=react.createRef();componentDidMount(){this.updatePreview()}componentDidUpdate(){this.updatePreview()}updatePreview=()=>{const shouldBold=this.props.isLast&&!/\*\*/.test(this.props.hint.content);this.frame.current?.sendNewData({type:"hint",data:{hint:this.props.hint,bold:shouldBold,pos:this.props.pos,apiOptions:this.props.apiOptions,linterContext:{contentType:"hint",highlightLint:this.props.highlightLint,paths:this.props.contentPaths}}})};getSaveWarnings=()=>this.editor.current?.getSaveWarnings();serialize=options=>this.editor.current?.serialize(options);focus=()=>{this.editor.current?.focus()};render(){const isMobile="phone"===this.props.deviceType||"tablet"===this.props.deviceType;return react.createElement("div",{className:"perseus-combined-hint-editor perseus-editor-row"},react.createElement("div",{className:"perseus-editor-left-cell"},react.createElement(HintEditor,{ref:this.editor,itemId:this.props.itemId,isFirst:this.props.isFirst,isLast:this.props.isLast,widgets:this.props.hint.widgets,content:this.props.hint.content,images:this.props.hint.images,replace:this.props.hint.replace,imageUploader:this.props.imageUploader,onChange:this.props.onChange,onRemove:this.props.onRemove,onMove:this.props.onMove,apiOptions:this.props.apiOptions})),react.createElement("div",{className:"perseus-editor-right-cell"},react.createElement(device_framer,{deviceType:this.props.deviceType,nochrome:!0},react.createElement(iframe_content_renderer,{ref:this.frame,datasetKey:"mobile",datasetValue:isMobile,seamless:!0,url:this.props.previewURL}))))}}class CombinedHintsEditor extends react.Component{static HintEditor=HintEditor;static defaultProps={onChange:()=>{},hints:[],highlightLint:!1};handleHintChange=(i,newProps,cb,silent)=>{const hints=(0,index_all.ZP)(this.props.hints).clone();hints[i]=index_all.ZP.extend({},this.serializeHint(i,{keepDeletedWidgets:!0}),newProps),this.props.onChange({hints},cb,silent)};handleHintRemove=i=>{const hints=(0,index_all.ZP)(this.props.hints).clone();hints.splice(i,1),this.props.onChange({hints})};handleHintMove=(i,dir)=>{const hints=(0,index_all.ZP)(this.props.hints).clone(),hint=hints.splice(i,1)[0];hints.splice(i+dir,0,hint),this.props.onChange({hints},(()=>{this.refs["hintEditor"+(i+dir)].focus()}))};addHint=()=>{const hints=(0,index_all.ZP)(this.props.hints).clone().concat([{content:""}]);this.props.onChange({hints},(()=>{const i=hints.length-1;this.refs["hintEditor"+i].focus()}))};getSaveWarnings=()=>index_all.ZP.chain(this.props.hints).map(((hint,i)=>index_all.ZP.map(this.refs["hintEditor"+i].getSaveWarnings(),(issue=>"Hint "+(i+1)+": "+issue)))).flatten(!0).value();serialize=options=>this.props.hints.map(((hint,i)=>this.serializeHint(i,options)));serializeHint=(index,options)=>this.refs["hintEditor"+index].serialize(options);render(){const{itemId,hints}=this.props,hintElems=index_all.ZP.map(hints,(function(hint,i){return react.createElement(CombinedHintEditor,{ref:"hintEditor"+i,key:"hintEditor"+i,isFirst:0===i,isLast:i+1===hints.length,itemId,hint,pos:i,imageUploader:this.props.imageUploader,onChange:this.handleHintChange.bind(this,i),onRemove:this.handleHintRemove.bind(this,i),onMove:this.handleHintMove.bind(this,i),deviceType:this.props.deviceType,apiOptions:this.props.apiOptions,highlightLint:this.props.highlightLint,previewURL:this.props.previewURL,contentPaths:[]})}),this);return react.createElement("div",{className:"perseus-hints-editor perseus-editor-table"},hintElems,react.createElement("div",{className:"perseus-editor-row"},react.createElement("div",{className:"add-hint-container perseus-editor-left-cell"},react.createElement("button",{type:"button",className:"add-hint simple-button orange",onClick:this.addHint},react.createElement(hint_editor_InlineIcon,hint_editor_iconPlus)," Add a hint"))))}}const hint_editor=CombinedHintsEditor;try{HintEditor.displayName="HintEditor",HintEditor.__docgenInfo={description:"",displayName:"HintEditor",props:{itemId:{defaultValue:null,description:"",name:"itemId",required:!1,type:{name:"string"}},apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!1,type:{name:"Readonly<{ isArticle?: boolean; onInputError?: ((widgetId: any, value: string, message?: string | null) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown) | undef..."}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},imageUploader:{defaultValue:null,description:"",name:"imageUploader",required:!1,type:{name:"ImageUploader"}},showMoveButtons:{defaultValue:{value:"true"},description:"",name:"showMoveButtons",required:!1,type:{name:"boolean"}},showRemoveButton:{defaultValue:{value:"true"},description:"",name:"showRemoveButton",required:!1,type:{name:"boolean"}},showTitle:{defaultValue:{value:"true"},description:"",name:"showTitle",required:!1,type:{name:"boolean"}},content:{defaultValue:{value:""},description:"",name:"content",required:!1,type:{name:"string | null"}},replace:{defaultValue:{value:"false"},description:"",name:"replace",required:!1,type:{name:"boolean | null"}},widgets:{defaultValue:null,description:"",name:"widgets",required:!1,type:{name:"WidgetDict | null"}},images:{defaultValue:null,description:"",name:"images",required:!1,type:{name:"ImageDict | null"}},isLast:{defaultValue:null,description:"",name:"isLast",required:!0,type:{name:"boolean"}},isFirst:{defaultValue:null,description:"",name:"isFirst",required:!0,type:{name:"boolean"}},onMove:{defaultValue:null,description:"",name:"onMove",required:!0,type:{name:"(direction: number) => unknown"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!0,type:{name:"() => unknown"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"ChangeHandler"}},__type:{defaultValue:null,description:"",name:"__type",required:!1,type:{name:"enum",value:[{value:'"hint"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/hint-editor.tsx#HintEditor"]={docgenInfo:HintEditor.__docgenInfo,name:"HintEditor",path:"packages/perseus-editor/src/hint-editor.tsx#HintEditor"})}catch(__react_docgen_typescript_loader_error){}try{CombinedHintsEditor.displayName="CombinedHintsEditor",CombinedHintsEditor.__docgenInfo={description:"",displayName:"CombinedHintsEditor",props:{apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!1,type:{name:"Readonly<{ isArticle?: boolean; onInputError?: ((widgetId: any, value: string, message?: string | null) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown) | undef..."}},deviceType:{defaultValue:null,description:"",name:"deviceType",required:!0,type:{name:"enum",value:[{value:'"phone"'},{value:'"tablet"'},{value:'"desktop"'}]}},imageUploader:{defaultValue:null,description:"",name:"imageUploader",required:!1,type:{name:"ImageUploader"}},highlightLint:{defaultValue:{value:"false"},description:"",name:"highlightLint",required:!1,type:{name:"boolean"}},hints:{defaultValue:{value:"[]"},description:"",name:"hints",required:!1,type:{name:"readonly Hint[]"}},previewURL:{defaultValue:null,description:"",name:"previewURL",required:!0,type:{name:"string"}},onChange:{defaultValue:{value:"() => {}"},description:"",name:"onChange",required:!1,type:{name:"ChangeHandler"}},itemId:{defaultValue:null,description:"",name:"itemId",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/hint-editor.tsx#CombinedHintsEditor"]={docgenInfo:CombinedHintsEditor.__docgenInfo,name:"CombinedHintsEditor",path:"packages/perseus-editor/src/hint-editor.tsx#CombinedHintsEditor"})}catch(__react_docgen_typescript_loader_error){}var item_extras_editor=__webpack_require__("./packages/perseus-editor/src/item-extras-editor.tsx");function item_editor_extends(){return item_editor_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},item_editor_extends.apply(this,arguments)}const ITEM_DATA_VERSION=perseus_src.rz;class ItemEditor extends react.Component{static defaultProps={onChange:()=>{},question:{},answerArea:{}};frame=react.createRef();questionEditor=react.createRef();itemExtrasEditor=react.createRef();updateProps=(newProps,cb,silent)=>{const props=(0,index_all.ZP)(this.props).pick("question","answerArea");this.props.onChange((0,index_all.ZP)(props).extend(newProps),cb,silent)};triggerPreviewUpdate=newData=>{this.frame.current?.sendNewData(newData)};handleEditorChange=(newProps,cb,silent)=>{const question=index_all.ZP.extend({},this.props.question,newProps);this.updateProps({question},cb,silent)};handleItemExtrasChange=(newProps,cb,silent)=>{const answerArea=index_all.ZP.extend({},this.props.answerArea,newProps);this.updateProps({answerArea},cb,silent)};getSaveWarnings=()=>this.questionEditor.current?.getSaveWarnings();serialize=options=>({question:this.questionEditor.current?.serialize(options),answerArea:this.itemExtrasEditor.current?.serialize(),itemDataVersion:ITEM_DATA_VERSION});render(){const isMobile="phone"===this.props.deviceType||"tablet"===this.props.deviceType;return react.createElement("div",{className:"perseus-editor-table"},react.createElement("div",{className:"perseus-editor-row perseus-question-container"},react.createElement("div",{className:"perseus-editor-left-cell"},react.createElement("div",{className:"pod-title"},"Question"),react.createElement(editor.Z,item_editor_extends({ref:this.questionEditor,key:this.props.itemId,placeholder:"Type your question here...",className:"perseus-question-editor",imageUploader:this.props.imageUploader,onChange:this.handleEditorChange,apiOptions:this.props.apiOptions,showWordCount:!0},this.props.question))),react.createElement("div",{className:"perseus-editor-right-cell"},react.createElement("div",{id:"problemarea"},react.createElement(device_framer,{deviceType:this.props.deviceType,nochrome:!0},react.createElement(iframe_content_renderer,{ref:this.frame,key:this.props.deviceType,datasetKey:"mobile",datasetValue:isMobile,seamless:!0,url:this.props.previewURL})),react.createElement("div",{id:"hintsarea",className:"hintsarea",style:{display:"none"}})))),react.createElement("div",{className:"perseus-editor-row perseus-answer-container"},react.createElement("div",{className:"perseus-editor-left-cell"},react.createElement("div",{className:"pod-title"},"Question extras"),react.createElement(item_extras_editor.Z,item_editor_extends({ref:this.itemExtrasEditor,onChange:this.handleItemExtrasChange},this.props.answerArea))),react.createElement("div",{className:"perseus-editor-right-cell"},react.createElement("div",{id:"answer_area"}))))}}const item_editor=ItemEditor;try{ItemEditor.displayName="ItemEditor",ItemEditor.__docgenInfo={description:"",displayName:"ItemEditor",props:{apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!1,type:{name:"Readonly<{ isArticle?: boolean; onInputError?: ((widgetId: any, value: string, message?: string | null) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown) | undef..."}},deviceType:{defaultValue:null,description:"",name:"deviceType",required:!1,type:{name:"string"}},gradeMessage:{defaultValue:null,description:"",name:"gradeMessage",required:!1,type:{name:"string"}},imageUploader:{defaultValue:null,description:"",name:"imageUploader",required:!1,type:{name:"ImageUploader"}},wasAnswered:{defaultValue:null,description:"",name:"wasAnswered",required:!1,type:{name:"boolean"}},question:{defaultValue:{value:"{}"},description:"",name:"question",required:!1,type:{name:"any"}},answerArea:{defaultValue:{value:"{}"},description:"",name:"answerArea",required:!1,type:{name:"any"}},previewURL:{defaultValue:null,description:"",name:"previewURL",required:!0,type:{name:"string"}},onChange:{defaultValue:{value:"() => {}"},description:"",name:"onChange",required:!1,type:{name:"ChangeHandler"}},itemId:{defaultValue:null,description:"",name:"itemId",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/item-editor.tsx#ItemEditor"]={docgenInfo:ItemEditor.__docgenInfo,name:"ItemEditor",path:"packages/perseus-editor/src/item-editor.tsx#ItemEditor"})}catch(__react_docgen_typescript_loader_error){}const{HUD:editor_page_HUD}=perseus_src.components;class EditorPage extends react.Component{itemEditor=react.createRef();hintsEditor=react.createRef();static defaultProps={developerMode:!1,jsonMode:!1,onChange:()=>{}};constructor(props){super(props),this.state={json:index_all.ZP.pick(this.props,"question","answerArea","hints","itemDataVersion"),gradeMessage:"",wasAnswered:!1,highlightLint:!0},this._isMounted=!1}componentDidMount(){this._isMounted=!0,this.updateRenderer()}componentDidUpdate(){setTimeout((()=>{this.updateRenderer()}))}componentWillUnmount(){this._isMounted=!1}toggleJsonMode=()=>{this.setState({json:this.serialize({keepDeletedWidgets:!0})},(()=>{this.props.onChange({jsonMode:!this.props.jsonMode})}))};updateRenderer(){const hasEditor=!this.props.developerMode||!this.props.jsonMode;if(!this._isMounted||!hasEditor)return;const touch="phone"===this.props.previewDevice||"tablet"===this.props.previewDevice,deviceBasedApiOptions={...this.getApiOptions(),customKeypad:touch,isMobile:touch};this.itemEditor.current?.triggerPreviewUpdate({type:"question",data:(0,index_all.ZP)({item:this.serialize(),apiOptions:deviceBasedApiOptions,initialHintsVisible:0,device:this.props.previewDevice,linterContext:{contentType:"exercise",highlightLint:this.state.highlightLint,paths:this.props.contentPaths||[]},reviewMode:!0,legacyPerseusLint:this.itemEditor.current?.getSaveWarnings()}).extend((0,index_all.ZP)(this.props).pick("workAreaSelector","solutionAreaSelector","hintsAreaSelector","problemNum"))})}getApiOptions(){return{...perseus_src._E.defaults,...this.props.apiOptions}}getSaveWarnings(){const issues1=this.itemEditor.current?.getSaveWarnings(),issues2=this.hintsEditor.current?.getSaveWarnings();return issues1.concat(issues2)}serialize(options){return this.props.jsonMode?this.state.json:index_all.ZP.extend(this.itemEditor.current?.serialize(options),{hints:this.hintsEditor.current?.serialize(options)})}handleChange=(toChange,cb,silent)=>{const newProps=(0,index_all.ZP)(this.props).pick("question","hints","answerArea");(0,index_all.ZP)(newProps).extend(toChange),this.props.onChange(newProps,cb,silent)};changeJSON=newJson=>{this.setState({json:newJson}),this.props.onChange(newJson)};scorePreview(){return this.renderer?this.renderer.scoreInput():null}render(){let className="framework-perseus";const touch="phone"===this.props.previewDevice||"tablet"===this.props.previewDevice,deviceBasedApiOptions={...this.getApiOptions(),customKeypad:touch,isMobile:touch};return deviceBasedApiOptions.isMobile&&(className+=" "+perseus_src.ms.MOBILE),react.createElement("div",{id:"perseus",className},react.createElement("div",{style:{marginBottom:10}},this.props.developerMode&&react.createElement("span",null,react.createElement("label",null," ","Developer JSON Mode:"," ",react.createElement("input",{type:"checkbox",checked:this.props.jsonMode,onChange:this.toggleJsonMode}))," "),!this.props.jsonMode&&react.createElement(viewport_resizer,{deviceType:this.props.previewDevice,onViewportSizeChanged:this.props.onPreviewDeviceChange}),!this.props.jsonMode&&react.createElement(editor_page_HUD,{message:"Style warnings",enabled:this.state.highlightLint,onClick:()=>{this.setState({highlightLint:!this.state.highlightLint})}})),this.props.developerMode&&this.props.jsonMode&&react.createElement("div",null,react.createElement(json_editor,{multiLine:!0,value:this.state.json,onChange:this.changeJSON})),(!this.props.developerMode||!this.props.jsonMode)&&react.createElement(item_editor,{ref:this.itemEditor,itemId:this.props.itemId,question:this.props.question,answerArea:this.props.answerArea,imageUploader:this.props.imageUploader,onChange:this.handleChange,wasAnswered:this.state.wasAnswered,gradeMessage:this.state.gradeMessage,deviceType:this.props.previewDevice,apiOptions:deviceBasedApiOptions,previewURL:this.props.previewURL}),(!this.props.developerMode||!this.props.jsonMode)&&react.createElement(hint_editor,{ref:this.hintsEditor,itemId:this.props.itemId,hints:this.props.hints,imageUploader:this.props.imageUploader,onChange:this.handleChange,deviceType:this.props.previewDevice,apiOptions:deviceBasedApiOptions,previewURL:this.props.previewURL,highlightLint:this.state.highlightLint}))}}const editor_page=EditorPage;try{EditorPage.displayName="EditorPage",EditorPage.__docgenInfo={description:"",displayName:"EditorPage",props:{apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!1,type:{name:"Readonly<{ isArticle?: boolean; onInputError?: ((widgetId: any, value: string, message?: string | null) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown) | undef..."}},answerArea:{defaultValue:null,description:"",name:"answerArea",required:!1,type:{name:"any"}},contentPaths:{defaultValue:null,description:"",name:"contentPaths",required:!1,type:{name:"readonly string[]"}},developerMode:{defaultValue:{value:"false"},description:"",name:"developerMode",required:!1,type:{name:"boolean"}},frameSource:{defaultValue:null,description:"",name:"frameSource",required:!0,type:{name:"string"}},hints:{defaultValue:null,description:"",name:"hints",required:!1,type:{name:"readonly Hint[]"}},imageUploader:{defaultValue:null,description:"",name:"imageUploader",required:!1,type:{name:"ImageUploader"}},itemDataVersion:{defaultValue:null,description:"",name:"itemDataVersion",required:!1,type:{name:"Version"}},itemId:{defaultValue:null,description:"",name:"itemId",required:!0,type:{name:"string"}},jsonMode:{defaultValue:{value:"false"},description:"",name:"jsonMode",required:!1,type:{name:"boolean"}},onChange:{defaultValue:{value:"() => {}"},description:"",name:"onChange",required:!1,type:{name:"ChangeHandler"}},onPreviewDeviceChange:{defaultValue:null,description:"",name:"onPreviewDeviceChange",required:!0,type:{name:"(arg1: DeviceType) => unknown"}},previewDevice:{defaultValue:null,description:"",name:"previewDevice",required:!0,type:{name:"enum",value:[{value:'"phone"'},{value:'"tablet"'},{value:'"desktop"'}]}},question:{defaultValue:null,description:"",name:"question",required:!1,type:{name:"any"}},previewURL:{defaultValue:null,description:"",name:"previewURL",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/editor-page.tsx#EditorPage"]={docgenInfo:EditorPage.__docgenInfo,name:"EditorPage",path:"packages/perseus-editor/src/editor-page.tsx#EditorPage"})}catch(__react_docgen_typescript_loader_error){}const{findContentNodesInItem,findHintNodesInItem,inferItemShape}=perseus_src.MultiItems;var lib=__webpack_require__("./node_modules/aphrodite/lib/index.js"),hubble=__webpack_require__("./vendor/hubble/hubble.js"),hubble_default=__webpack_require__.n(hubble),react_dom=__webpack_require__("./node_modules/react-dom/index.js");function simple_button_extends(){return simple_button_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},simple_button_extends.apply(this,arguments)}class SimpleButton extends react.Component{static propTypes={children:prop_types_default().node,color:prop_types_default().oneOf(["orange","green"]),onClick:prop_types_default().func};static defaultProps={children:null,color:"green",onClick:()=>{}};render(){const{children,color,onClick,...otherProps}=this.props;return react.createElement("div",simple_button_extends({className:(0,lib.css)(styles.baseButton,"green"===color&&styles.green,"orange"===color&&styles.orange),onClick},otherProps),children)}}const styles=lib.StyleSheet.create({baseButton:{top:"0",fontSize:"11px",padding:"3px 10px",backgroundRepeat:"repeat-x",borderColor:"\n             rgba(0, 0, 0, 0.1)\n             rgba(0, 0, 0, 0.1)\n             rgba(0, 0, 0, 0.25)\n         ",color:"#ffffff",borderRadius:"3px",lineHeight:"15px",cursor:"pointer",transition:"box-shadow ease-in-out 0.15s",appearance:"none",textDecoration:"none",textAlign:"center",":hover":{boxShadow:"0 1px 1px rgba(0, 0, 0, 0.35),\n                 inset 0 0 50px 5px rgba(255, 255, 255, 0.2)"}},green:{border:"1px solid #7fab07",backgroundColor:"#80ac07",backgroundImage:"linear-gradient(to bottom, #8aba08, #719807)",":hover":{borderBottomColor:"#547105",backgroundColor:"#719807"}},orange:{border:"1px solid #d45704",backgroundColor:"#d55704",backgroundImage:"linear-gradient(to bottom, #e35d04, #c04f03)",":hover":{borderBottomColor:"#983e03",backgroundColor:"#c04f03"}}}),simple_button=SimpleButton;try{SimpleButton.displayName="SimpleButton",SimpleButton.__docgenInfo={description:"",displayName:"SimpleButton",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/components/simple-button.tsx#SimpleButton"]={docgenInfo:SimpleButton.__docgenInfo,name:"SimpleButton",path:"packages/perseus-editor/src/components/simple-button.tsx#SimpleButton"})}catch(__react_docgen_typescript_loader_error){}function multirenderer_editor_extends(){return multirenderer_editor_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},multirenderer_editor_extends.apply(this,arguments)}const{InlineIcon:multirenderer_editor_InlineIcon}=perseus_src.components,{iconChevronDown,iconTrash:multirenderer_editor_iconTrash}=perseus_src.icons,{MultiRenderer}=perseus_src.MultiItems;class ModeDropdown extends react.Component{_handleSelectMode=event=>{if(this.props.onChange){const value=event.target.value;this.props.onChange(value)}};render(){return react.createElement("label",null,"Mode:"," ",react.createElement("select",{value:this.props.currentMode,onChange:this._handleSelectMode},react.createElement("option",{value:"edit"},"Edit"),react.createElement("option",{value:"preview"},"Preview"),react.createElement("option",{value:"json"},"Dev-only JSON")))}}function camelCaseToHuman(str){return str.replace(/[A-Z]/g,(s=>" "+s.toLowerCase()))}function capitalize(str){return str.charAt(0).toUpperCase()+str.slice(1).toLowerCase()}function pluralToSingular(str){return"s"===str.charAt(str.length-1)?str.slice(0,-1):str}function multiPath(path){return["_multi",...path]}const Header=_ref=>{let{depth,...props}=_ref;const HeaderTag=`h${Math.min(depth,5)+1}`;return react.createElement(HeaderTag,props)},NodeContainer=props=>{const{shape,data,path,actions,name:givenName,controls,...otherProps}=props,name=givenName||camelCaseToHuman(path[path.length-1]||""),children=react.createElement(NodeContent,multirenderer_editor_extends({},otherProps,{shape,data,path,actions})),key=path.join(".");return"array"===shape.type?react.createElement(ArrayContainer,{key,name,controls,path,shape,actions},children):"object"===shape.type?react.createElement(ObjectContainer,{key,name,controls,path},children):react.createElement(LeafContainer,{key,name,controls,path,shape},children)},LeafContainer=_ref2=>{let{name,controls,children,path,shape}=_ref2;const previewHeading=("content"===shape.type||"hint"===shape.type)&&react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.containerHeader)},react.createElement(Header,{depth:path.length,className:(0,lib.css)(multirenderer_editor_styles.containerTitle)},capitalize(name)));return react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.container)},react.createElement("span",{className:(0,lib.css)(multirenderer_editor_styles.row,multirenderer_editor_styles.rowHeading)},react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.columnLeft)},react.createElement("div",{className:"pod-title "+(0,lib.css)(multirenderer_editor_styles.containerHeader)},react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.containerTitle)},capitalize(name)),controls)),react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.columnRight)},previewHeading)),children)},ArrayContainer=props=>{const{name,controls,children,path,shape,actions}=props;return react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.container)},controls&&react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.columnLeft,multirenderer_editor_styles.containerHeader)},controls),react.createElement("div",null,children),react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.columnLeft)},react.createElement("a",{href:"javascript:void 0",onClick:()=>actions.addArrayElement(path,shape.elementShape)},"Add a ",pluralToSingular(name))))},ObjectContainer=_ref3=>{let{name,controls,children,path}=_ref3;const headingEditor=react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.containerHeader)},react.createElement(Header,{depth:path.length,className:(0,lib.css)(multirenderer_editor_styles.containerTitle)},capitalize(name)),controls),headingPreview=(name||controls)&&react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.containerHeader,multirenderer_editor_styles.previewCollectionHeader)},react.createElement(Header,{depth:path.length,className:(0,lib.css)(multirenderer_editor_styles.containerTitle)},capitalize(name))),hasBothHeadings=headingEditor&&headingPreview;return react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.container)},hasBothHeadings&&react.createElement("span",{className:(0,lib.css)(multirenderer_editor_styles.row)},react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.columnLeft)},headingEditor),react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.columnRight)},headingPreview)),react.createElement("div",{className:(0,lib.css)(path.length>0&&multirenderer_editor_styles.contentIndent)},children))},NodeContent=props=>{const{shape,data,...restProps}=props;return"content"===shape.type?react.createElement(ItemNodeContent,multirenderer_editor_extends({shape,data},restProps)):"hint"===shape.type?react.createElement(HintNodeContent,multirenderer_editor_extends({shape,data},restProps)):"tags"===shape.type?react.createElement(TagsNodeContent,multirenderer_editor_extends({shape,data},restProps)):"array"===shape.type?react.createElement(ArrayNodeContent,multirenderer_editor_extends({shape,data},restProps)):"object"===shape.type?react.createElement(ObjectNodeContent,multirenderer_editor_extends({shape,data},restProps)):null},withStickiness=WrappedComponent=>class StickyComponent extends react.Component{state={sticky:!1};componentDidMount(){this.stickynessTimer=setInterval(this.updateStickiness,1e3),this.updateStickiness()}componentWillUnmount(){clearInterval(this.stickynessTimer)}updateStickiness=()=>{const sticky=react_dom.findDOMNode(this).offsetHeight>window.innerHeight;sticky!==this.state.sticky&&this.setState({sticky})};render(){return react.createElement(WrappedComponent,multirenderer_editor_extends({},this.props,{sticky:this.state.sticky}))}},ItemNodeContent=withStickiness((props=>{const{data,path,actions,apiOptions,renderers,sticky}=props,preview=react.createElement("div",{className:"framework-perseus"},hubble_default()(renderers).get(path));return react.createElement("span",null,react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.row)},react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.columnLeft)},react.createElement("div",{className:(0,lib.css)(sticky&&multirenderer_editor_styles.sticky)},react.createElement(editor.Z,multirenderer_editor_extends({},data,{onChange:newVal=>actions.mergeValueAtPath(path,newVal),apiOptions})))),react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.columnRight)},react.createElement("div",{className:(0,lib.css)(sticky&&multirenderer_editor_styles.sticky)},preview))))})),HintNodeContent=withStickiness((props=>{const{data,path,actions,apiOptions,renderers,sticky}=props,preview=react.createElement("div",{className:"framework-perseus"},hubble_default()(renderers).get(path));return react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.row)},react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.columnLeft)},react.createElement("div",{className:(0,lib.css)(sticky&&multirenderer_editor_styles.sticky)},react.createElement(HintEditor,multirenderer_editor_extends({},data,{className:(0,lib.css)(multirenderer_editor_styles.hintEditor),onChange:newVal=>actions.mergeValueAtPath(path,newVal),apiOptions,showTitle:!1,showRemoveButton:!1,showMoveButtons:!1,onRemove:()=>{},onMove:direction=>{},isFirst:!0,isLast:!0})))),react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.columnRight)},react.createElement("div",{className:(0,lib.css)(sticky&&multirenderer_editor_styles.sticky)},preview)))})),TagsNodeContent=props=>{const{data,path,actions,apiOptions}=props,{GroupMetadataEditor}=apiOptions;return null==GroupMetadataEditor?null:react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.columnLeft)},react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.tagsEditor)},react.createElement(GroupMetadataEditor,{value:data,onChange:newVal=>actions.setValueAtPath(path,newVal),showTitle:!1})))},ArrayNodeContent=props=>{const{shape,data,path,actions,...otherProps}=props,elementName=pluralToSingular(camelCaseToHuman(path[path.length-1])),elementType=shape.elementShape.type,elementIsLeaf="content"===elementType||"hint"===elementType,children=data.map(((subdata,i)=>{const subpath=path.concat(i),controls=[i>0&&react.createElement("div",{key:"moveArrayElementUp",className:(0,lib.css)(multirenderer_editor_styles.control)},react.createElement(simple_button,{color:"orange",title:"Move up",onClick:()=>actions.moveArrayElementUp(subpath)},react.createElement("div",{className:(0,lib.css)(multirenderer_editor_styles.verticalFlip)},react.createElement(multirenderer_editor_InlineIcon,iconChevronDown)))),i<data.length-1&&react.createElement("div",{key:"moveArrayElementDown",className:(0,lib.css)(multirenderer_editor_styles.control)},react.createElement(simple_button,{color:"orange",title:"Move down",onClick:()=>actions.moveArrayElementDown(subpath)},react.createElement(multirenderer_editor_InlineIcon,iconChevronDown))),react.createElement("div",{key:"removeArrayElement",className:(0,lib.css)(multirenderer_editor_styles.control)},react.createElement(simple_button,{color:"orange",title:"Delete",onClick:()=>actions.removeArrayElement(subpath)},react.createElement(multirenderer_editor_InlineIcon,multirenderer_editor_iconTrash)))];return react.createElement("div",{key:i,className:(0,lib.css)(multirenderer_editor_styles.arrayElement,!elementIsLeaf&&multirenderer_editor_styles.arrayElementAndNotLeaf)},react.createElement(NodeContainer,multirenderer_editor_extends({},otherProps,{key:i,shape:shape.elementShape,data:subdata,path:subpath,actions,name:`${elementName} ${i+1}`,controls})))}));return react.createElement("div",null,children)},ObjectNodeContent=props=>{const{shape,data,path,...otherProps}=props,children=Object.keys(shape.shape).map((subkey=>react.createElement("div",{key:subkey,className:(0,lib.css)(multirenderer_editor_styles.objectElement)},react.createElement(NodeContainer,multirenderer_editor_extends({},otherProps,{shape:shape.shape[subkey],data:data[subkey],path:path.concat(subkey)})))));return react.createElement("div",null,children)};class MultiRendererEditor extends react.Component{_renderLayout=()=>{const{Layout,apiOptions,item}=this.props;return react.createElement(Layout,{ref:node=>this.layout=node,item,apiOptions})};_renderJson=()=>react.createElement("div",null,react.createElement(ModeDropdown,{currentMode:this.props.editorMode,onChange:editorMode=>this.props.onChange({editorMode})}),react.createElement(json_editor,{multiLine:!0,value:this.props.item,onChange:item=>this.props.onChange({item})}));_renderPreview=()=>react.createElement("div",null,react.createElement(ModeDropdown,{currentMode:this.props.editorMode,onChange:editorMode=>this.props.onChange({editorMode})}),this._renderLayout());mergeValueAtPath=(path,newValue)=>{this.props.onChange({item:hubble_default()(this.props.item).merge(multiPath(path),newValue).freeze()})};setValueAtPath=(path,newValue)=>{this.props.onChange({item:hubble_default()(this.props.item).set(multiPath(path),newValue).freeze()})};addArrayElement=(path,shape)=>{const currentLength=hubble_default()(this.props.item).get(multiPath(path)).length,newElementPath=path.concat(currentLength),newValue=(0,perseus_src.o)(shape);this.props.onChange({item:hubble_default()(this.props.item).set(multiPath(newElementPath),newValue).freeze()})};removeArrayElement=path=>{this.props.onChange({item:hubble_default()(this.props.item).del(multiPath(path)).freeze()})};moveArrayElementDown=path=>{const nextElementIndex=path[path.length-1]+1,nextElementPath=path.slice(0,-1).concat(nextElementIndex),element=hubble_default()(this.props.item).get(multiPath(path)),nextElement=hubble_default()(this.props.item).get(multiPath(nextElementPath));this.props.onChange({item:hubble_default()(this.props.item).set(multiPath(path),nextElement).set(multiPath(nextElementPath),element).freeze()})};moveArrayElementUp=path=>{const index=path[path.length-1],previousElementPath=path.slice(0,-1).concat(index-1);this.moveArrayElementDown(previousElementPath)};_renderEdit=()=>{const apiOptions={...perseus_src._E.defaults,...this.props.apiOptions},{item}=this.props,itemShape=this.props.Layout.shape;return react.createElement("div",{className:"perseus-multirenderer-editor"},react.createElement(ModeDropdown,{currentMode:this.props.editorMode,onChange:editorMode=>this.props.onChange({editorMode})}),react.createElement(MultiRenderer,{item,shape:itemShape,apiOptions,dependencies:{analytics:{onAnalyticsEvent:async()=>{}}}},(_ref4=>{let{renderers}=_ref4;return react.createElement(NodeContainer,{shape:itemShape,data:(0,perseus_src.uJ)(item),path:[],actions:this,apiOptions,renderers})})))};score=()=>{if(this.layout)return this.layout.score()};getSerializedState=()=>{if(this.layout)return this.layout.getSerializedState()};restoreSerializedState=state=>{this.layout&&this.layout.restoreSerializedState(state)};_renderContent=()=>{switch(this.props.editorMode){case"json":return this._renderJson();case"preview":return this._renderPreview();case"edit":return this._renderEdit();default:return react.createElement(ModeDropdown,{currentMode:this.props.editorMode,onChange:editorMode=>this.props.onChange({editorMode})})}};render(){return react.createElement("div",{id:"perseus"},this._renderContent())}}const multirenderer_editor_styles=lib.StyleSheet.create({container:{},editor:{width:"100%"},treePreview:{position:"relative"},verticalFlip:{transform:"scaleY(-1)"},control:{marginLeft:12},containerHeader:{alignItems:"flex-end",display:"flex",flexDirection:"row"},previewCollectionHeader:{marginBottom:16},containerTitle:{flexGrow:1,margin:0},contentIndent:{marginLeft:8},hintEditor:{paddingBottom:0},arrayElement:{marginBottom:16},arrayElementAndNotLeaf:{borderBottom:"1px solid #ccc",":first-child":{borderTop:"1px solid #ccc",paddingTop:16}},objectElement:{marginBottom:16},tagsEditor:{border:"1px solid #ddd",padding:"5px 10px"},row:{display:"flex",position:"relative"},columnLeft:{width:360,marginRight:30,position:"relative"},columnRight:{flex:1,marginLeft:30,position:"relative"},sticky:{position:"sticky",top:33},rowHeading:{position:"sticky",backgroundColor:"white",width:"100%",zIndex:101,top:-1}});try{MultiRendererEditor.displayName="MultiRendererEditor",MultiRendererEditor.__docgenInfo={description:"",displayName:"MultiRendererEditor",props:{Layout:{defaultValue:null,description:"",name:"Layout",required:!0,type:{name:"ComponentType<any> & LayoutStatics"}},apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!0,type:{name:"Readonly<{ isArticle?: boolean | undefined; onInputError?: ((widgetId: any, value: string, message?: string | null | undefined) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown) | undef..."}},item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"Item"}},editorMode:{defaultValue:null,description:"",name:"editorMode",required:!0,type:{name:"enum",value:[{value:'"json"'},{value:'"edit"'},{value:'"preview"'}]}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"ChangeHandler"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/multirenderer-editor.tsx#MultiRendererEditor"]={docgenInfo:MultiRendererEditor.__docgenInfo,name:"MultiRendererEditor",path:"packages/perseus-editor/src/multirenderer-editor.tsx#MultiRendererEditor"})}catch(__react_docgen_typescript_loader_error){}create_react_class_default()({displayName:"StatefulArticleEditor",getInitialState:function(){return(0,index_all.ZP)({}).extend(this.props,{mode:"edit",onChange:this.handleChange,ref:"editor",screen:"phone"})},componentDidMount:function(){this._isMounted=!0},UNSAFE_componentWillReceiveProps:function(nextProps){this.setState((0,index_all.ZP)(nextProps).omit("onChange","ref"))},componentWillUnmount:function(){this._isMounted=!1},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(){return this.refs.editor.serialize()},handleChange:function(newState,cb){this._isMounted&&this.setState(newState,cb)},scorePreview:function(){return this.refs.editor.scorePreview()},render:function(){const{mode,screen}=this.state;return react.createElement("div",null,react.createElement("div",{style:stateful_article_editor_styles.controlBar},react.createElement("span",{style:stateful_article_editor_styles.controls},"Mode:"," ",react.createElement("span",{onClick:()=>this.setState({mode:"edit"}),style:"edit"===mode?stateful_article_editor_styles.controlSelected:stateful_article_editor_styles.control},"EDIT")," | ",react.createElement("span",{onClick:()=>this.setState({mode:"preview"}),style:"preview"===mode?stateful_article_editor_styles.controlSelected:stateful_article_editor_styles.control},"PREVIEW")," | ",react.createElement("span",{onClick:()=>this.setState({mode:"json"}),style:"json"===mode?stateful_article_editor_styles.controlSelected:stateful_article_editor_styles.control},"JSON")),react.createElement("span",{style:stateful_article_editor_styles.controls},"Screen:"," ",react.createElement("span",{onClick:()=>this.setState({screen:"phone"}),style:"phone"===screen?stateful_article_editor_styles.controlSelected:stateful_article_editor_styles.control},"PHONE")," | ",react.createElement("span",{onClick:()=>this.setState({screen:"tablet"}),style:"tablet"===screen?stateful_article_editor_styles.controlSelected:stateful_article_editor_styles.control},"TABLET")," | ",react.createElement("span",{onClick:()=>this.setState({screen:"desktop"}),style:"desktop"===screen?stateful_article_editor_styles.controlSelected:stateful_article_editor_styles.control},"DESKTOP"))),react.createElement("div",{style:stateful_article_editor_styles.editor},react.createElement(ArticleEditor,this.state)))}});const stateful_article_editor_styles={controlBar:{marginBottom:25,marginTop:5},controls:{marginRight:10},controlSelected:{cursor:"default",fontWeight:700},control:{cursor:"pointer"},editor:{marginTop:-20}};create_react_class_default()({displayName:"StatefulEditorPage",propTypes:{componentClass:prop_types_default().func},getDefaultProps:function(){return{componentClass:editor_page}},render:function(){const Component=this.props.componentClass;return react.createElement(Component,this.state)},getInitialState:function(){return(0,index_all.ZP)({}).extend(index_all.ZP.omit(this.props,"componentClass"),{onChange:this.handleChange,ref:"editor"})},componentDidMount:function(){this._isMounted=!0},componentWillUnmount:function(){this._isMounted=!1},UNSAFE_componentWillReceiveProps:function(nextProps){this.setState((0,index_all.ZP)(nextProps).pick("apiOptions","imageUploader","developerMode","problemNum","previewDevice","frameSource"))},getSaveWarnings:function(){return this.refs.editor.getSaveWarnings()},serialize:function(){return this.refs.editor.serialize()},handleChange:function(newState,cb){this._isMounted&&this.setState(newState,cb)},scorePreview:function(){return this.refs.editor.scorePreview()}});__webpack_require__("./packages/perseus-editor/src/styles/perseus-editor.less");var all_editors=__webpack_require__("./packages/perseus-editor/src/all-editors.ts"),all_widgets=__webpack_require__("./packages/perseus-editor/src/all-widgets.ts");perseus_src.Cu.registerEditors(all_editors.Z),perseus_src.Cu.registerWidgets(all_widgets.Z)},"./packages/perseus-editor/src/item-extras-editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js");const{InfoTip}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.components;class ItemExtrasEditor extends react__WEBPACK_IMPORTED_MODULE_1__.Component{static defaultProps={calculator:!1,chi2Table:!1,financialCalculatorMonthlyPayment:!1,financialCalculatorTotalAmount:!1,financialCalculatorTimeToPayOff:!1,periodicTable:!1,periodicTableWithKey:!1,tTable:!1,zTable:!1};state={financialCalculatorOptionsExpanded:!1};componentDidUpdate(prevProps){!this.state.financialCalculatorOptionsExpanded||this.props.financialCalculatorMonthlyPayment||this.props.financialCalculatorTotalAmount||this.props.financialCalculatorTimeToPayOff||this.setState({financialCalculatorOptionsExpanded:!1})}serialize=()=>{const data={...ItemExtrasEditor.defaultProps};for(const key of _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.vW)data[key]=!!this.props[key];return data};render(){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"perseus-answer-editor"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"perseus-answer-options"},react__WEBPACK_IMPORTED_MODULE_1__.createElement(ItemExtraCheckbox,{label:"Show calculator:",infoTip:"Use the calculator when completing difficult calculations is NOT the intent of the question. DONT use the calculator when testing the students ability to complete different types of computations.",checked:this.props.calculator,onChange:e=>{this.props.onChange({calculator:e.target.checked})}}),react__WEBPACK_IMPORTED_MODULE_1__.createElement(ItemExtraCheckbox,{label:"Show financial calculator:",infoTip:"This provides the student with the ability to view a financial calculator, e.g., for answering financial questions. Once checked, requires at least one of the three options below to be checked.",checked:this.state.financialCalculatorOptionsExpanded,onChange:e=>{this.setState({financialCalculatorOptionsExpanded:e.target.checked}),this.props.onChange({financialCalculatorMonthlyPayment:e.target.checked,financialCalculatorTotalAmount:e.target.checked,financialCalculatorTimeToPayOff:e.target.checked})}}),this.state.financialCalculatorOptionsExpanded&&react__WEBPACK_IMPORTED_MODULE_1__.createElement(react__WEBPACK_IMPORTED_MODULE_1__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement(ItemExtraCheckbox,{label:"Include monthly payment:",infoTip:"This provides the student with the ability to view a monthly payment calculator; e.g., given a loan amount, interest rate, and term, what is the monthly payment?",checked:this.props.financialCalculatorMonthlyPayment,onChange:e=>{this.props.onChange({financialCalculatorMonthlyPayment:e.target.checked})},indent:!0}),react__WEBPACK_IMPORTED_MODULE_1__.createElement(ItemExtraCheckbox,{label:"Include total amount:",infoTip:"This provides the student with the ability to view a total amount calculator; e.g., given a monthly payment, interest rate, and term, what is the total amount to be paid?",checked:this.props.financialCalculatorTotalAmount,onChange:e=>{this.props.onChange({financialCalculatorTotalAmount:e.target.checked})},indent:!0}),react__WEBPACK_IMPORTED_MODULE_1__.createElement(ItemExtraCheckbox,{label:"Include time-to-pay-off:",infoTip:"This provides the student with the ability to view a time to pay off calculator; e.g., given a loan amount, interest rate, and monthly payment, how long will it take to pay off the loan?",checked:this.props.financialCalculatorTimeToPayOff,onChange:e=>{this.props.onChange({financialCalculatorTimeToPayOff:e.target.checked})},indent:!0})),react__WEBPACK_IMPORTED_MODULE_1__.createElement(ItemExtraCheckbox,{label:"Show periodic table:",infoTip:"This provides the student with the ability to view a periodic table of the elements, e.g., for answering chemistry questions.",checked:this.props.periodicTable,onChange:e=>{this.props.onChange({periodicTable:e.target.checked,periodicTableWithKey:!1})}}),this.props.periodicTable&&react__WEBPACK_IMPORTED_MODULE_1__.createElement(ItemExtraCheckbox,{label:"Include key/legend with periodic table:",infoTip:"Include a key for HS courses; omit for AP chemistry.",checked:this.props.periodicTableWithKey,onChange:e=>{this.props.onChange({periodicTableWithKey:e.target.checked})},indent:!0}),react__WEBPACK_IMPORTED_MODULE_1__.createElement(ItemExtraCheckbox,{label:"Show z table (statistics):",infoTip:"This provides the student with the ability to view a table of critical values for the z distribution, e.g. for answering statistics questions.",checked:this.props.zTable,onChange:e=>{this.props.onChange({zTable:e.target.checked})}}),react__WEBPACK_IMPORTED_MODULE_1__.createElement(ItemExtraCheckbox,{label:"Show t table (statistics):",infoTip:"This provides the student with the ability to view a table of critical values for the Student's t distribution, e.g. for answering statistics questions.",checked:this.props.tTable,onChange:e=>{this.props.onChange({tTable:e.target.checked})}}),react__WEBPACK_IMPORTED_MODULE_1__.createElement(ItemExtraCheckbox,{label:"Show chi-squared table (statistics):",infoTip:"This provides the student with the ability to view a table of critical values for the chi-squared distribution, e.g. for answering statistics questions.",checked:this.props.chi2Table,onChange:e=>{this.props.onChange({chi2Table:e.target.checked})}})))}}const ItemExtraCheckbox=props=>react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{style:{marginLeft:props.indent?"10px":"0px"}},react__WEBPACK_IMPORTED_MODULE_1__.createElement("label",null,props.label,react__WEBPACK_IMPORTED_MODULE_1__.createElement("input",{type:"checkbox",checked:props.checked,onChange:props.onChange})),react__WEBPACK_IMPORTED_MODULE_1__.createElement(InfoTip,null,props.infoTip)),__WEBPACK_DEFAULT_EXPORT__=ItemExtrasEditor;try{ItemExtrasEditor.displayName="ItemExtrasEditor",ItemExtrasEditor.__docgenInfo={description:"",displayName:"ItemExtrasEditor",props:{calculator:{defaultValue:{value:"false"},description:"",name:"calculator",required:!1,type:{name:"boolean"}},chi2Table:{defaultValue:{value:"false"},description:"",name:"chi2Table",required:!1,type:{name:"boolean"}},financialCalculatorMonthlyPayment:{defaultValue:{value:"false"},description:"",name:"financialCalculatorMonthlyPayment",required:!1,type:{name:"boolean"}},financialCalculatorTotalAmount:{defaultValue:{value:"false"},description:"",name:"financialCalculatorTotalAmount",required:!1,type:{name:"boolean"}},financialCalculatorTimeToPayOff:{defaultValue:{value:"false"},description:"",name:"financialCalculatorTimeToPayOff",required:!1,type:{name:"boolean"}},periodicTable:{defaultValue:{value:"false"},description:"",name:"periodicTable",required:!1,type:{name:"boolean"}},periodicTableWithKey:{defaultValue:{value:"false"},description:"",name:"periodicTableWithKey",required:!1,type:{name:"boolean"}},tTable:{defaultValue:{value:"false"},description:"",name:"tTable",required:!1,type:{name:"boolean"}},zTable:{defaultValue:{value:"false"},description:"",name:"zTable",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(props: Partial<PerseusAnswerArea>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/item-extras-editor.tsx#ItemExtrasEditor"]={docgenInfo:ItemExtrasEditor.__docgenInfo,name:"ItemExtrasEditor",path:"packages/perseus-editor/src/item-extras-editor.tsx#ItemExtrasEditor"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/util/register-all-widgets-and-editors-for-testing.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>registerAllWidgetsAndEditorsForTesting});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),_all_editors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/perseus-editor/src/all-editors.ts"),_all_widgets__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/perseus-editor/src/all-widgets.ts");const registerAllWidgetsAndEditorsForTesting=()=>{_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Cu.registerWidgets(_all_widgets__WEBPACK_IMPORTED_MODULE_2__.Z),_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Cu.registerEditors(_all_editors__WEBPACK_IMPORTED_MODULE_1__.Z)}},"./packages/perseus-editor/src/widgets/categorizer-editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),underscore__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/underscore/modules/index-all.js");const{PropCheckBox,TextListEditor}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.components,Categorizer=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Cx.widget;class CategorizerEditor extends react__WEBPACK_IMPORTED_MODULE_1__.Component{static propTypes={..._khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.i,apiOptions:_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__._E.propTypes,items:prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_3___default().string),categories:prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_3___default().string),values:prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_3___default().number),randomizeItems:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool};static widgetName="categorizer";static defaultProps={items:[],categories:[],values:[],randomizeItems:!1};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.m.apply(_this,args)}})();serialize=()=>_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.yU.serialize.call(this);render(){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_1__.createElement(PropCheckBox,{label:"Randomize item order",labelAlignment:"right",randomizeItems:this.props.randomizeItems,onChange:this.props.onChange})),"Categories:",react__WEBPACK_IMPORTED_MODULE_1__.createElement(TextListEditor,{options:this.props.categories,onChange:cat=>{this.change("categories",cat)},layout:"horizontal"}),"Items:",react__WEBPACK_IMPORTED_MODULE_1__.createElement(TextListEditor,{options:this.props.items,onChange:items=>{this.change({items,values:underscore__WEBPACK_IMPORTED_MODULE_2__.ZP.first(this.props.values,items.length)})},layout:"vertical"}),react__WEBPACK_IMPORTED_MODULE_1__.createElement(Categorizer,{apiOptions:this.props.apiOptions,items:this.props.items,categories:this.props.categories,values:this.props.values,onChange:newProps=>{this.props.onChange(newProps)},trackInteraction:function(){}}))}}const __WEBPACK_DEFAULT_EXPORT__=CategorizerEditor;try{CategorizerEditor.displayName="CategorizerEditor",CategorizerEditor.__docgenInfo={description:"",displayName:"CategorizerEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/categorizer-editor.tsx#CategorizerEditor"]={docgenInfo:CategorizerEditor.__docgenInfo,name:"CategorizerEditor",path:"packages/perseus-editor/src/widgets/categorizer-editor.tsx#CategorizerEditor"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/widgets/definition-editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),underscore__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/underscore/modules/index-all.js"),_editor__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/perseus-editor/src/editor.tsx");const{TextInput}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.components;class DefinitionEditor extends react__WEBPACK_IMPORTED_MODULE_1__.Component{static propTypes={..._khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.i,togglePrompt:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,definition:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,apiOptions:prop_types__WEBPACK_IMPORTED_MODULE_4___default().any};static widgetName="definition";static defaultProps={togglePrompt:"",definition:""};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.m.apply(_this,args)}})();serialize=()=>_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.yU.serialize.call(this);render(){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"perseus-widget-definition-editor"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("a",{href:"https://docs.google.com/document/d/1udaPef4imOfTMhmLDlWq4SM0mxL0r3YHFZE-5J1uGfo",target:"_blank"},"Definition style guide"),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("label",null,"Word to be defined:"," ",react__WEBPACK_IMPORTED_MODULE_1__.createElement(TextInput,{value:this.props.togglePrompt,onChange:this.change("togglePrompt"),placeholder:"define me"}))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_editor__WEBPACK_IMPORTED_MODULE_3__.Z,{apiOptions:this.props.apiOptions,content:this.props.definition,widgetEnabled:!1,placeholder:"definition goes here",onChange:props=>{const newProps={};underscore__WEBPACK_IMPORTED_MODULE_2__.ZP.has(props,"content")&&(newProps.definition=props.content),this.change(newProps)}})))}}const __WEBPACK_DEFAULT_EXPORT__=DefinitionEditor;try{DefinitionEditor.displayName="DefinitionEditor",DefinitionEditor.__docgenInfo={description:"",displayName:"DefinitionEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/definition-editor.tsx#DefinitionEditor"]={docgenInfo:DefinitionEditor.__docgenInfo,name:"DefinitionEditor",path:"packages/perseus-editor/src/widgets/definition-editor.tsx#DefinitionEditor"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/widgets/dropdown-editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-dom/index.js"),underscore__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/underscore/modules/index-all.js");const{InfoTip,InlineIcon}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.components,{iconPlus,iconTrash}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.icons;class DropdownEditor extends react__WEBPACK_IMPORTED_MODULE_1__.Component{static propTypes={choices:prop_types__WEBPACK_IMPORTED_MODULE_4___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_4___default().shape({content:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,correct:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool})),placeholder:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string};static widgetName="dropdown";static defaultProps={placeholder:"",choices:[{content:"",correct:!1}]};onPlaceholderChange=e=>{const placeholder=e.target.value;this.props.onChange({placeholder})};onCorrectChange=choiceIndex=>{const choices=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.map(this.props.choices,(function(choice,i){return underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.extend({},choice,{correct:i===choiceIndex})}));this.props.onChange({choices})};onContentChange=(choiceIndex,e)=>{const choices=this.props.choices.slice(),choice=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.clone(choices[choiceIndex]);choice.content=e.target.value,choices[choiceIndex]=choice,this.props.onChange({choices})};addChoice=e=>{e.preventDefault();const choices=this.props.choices;this.props.onChange({choices:choices.concat([{content:"",correct:!1}])},this.focus.bind(this,choices.length))};removeChoice=(choiceIndex,e)=>{e.preventDefault();const choices=(0,underscore__WEBPACK_IMPORTED_MODULE_3__.ZP)(this.props.choices).clone();choices.splice(choiceIndex,1),this.props.onChange({choices})};focus=i=>(react_dom__WEBPACK_IMPORTED_MODULE_2__.findDOMNode(this.refs["editor"+i]).focus(),!0);serialize=()=>_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.yU.serialize.call(this);render(){const dropdownGroupName=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.uniqueId("perseus_dropdown_");return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"perseus-widget-dropdown"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"dropdown-info"},"Dropdown",react__WEBPACK_IMPORTED_MODULE_1__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("p",null,"The drop down is useful for making inequalities in a custom format. We normally use the symbols ","<",","," ",">",', ,  (in that order) which you can copy into the choices. When possible, use the "multiple choice" answer type instead.'))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"dropdown-placeholder"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("input",{type:"text",placeholder:"Placeholder value",value:this.props.placeholder,onChange:this.onPlaceholderChange}),react__WEBPACK_IMPORTED_MODULE_1__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("p",null,"This value will appear as the drop down default. It should give the user some indication of the values available in the drop down itself, e.g., Yes/No/Maybe."))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"clearfix"}),react__WEBPACK_IMPORTED_MODULE_1__.createElement("ul",{className:"dropdown-choices"},this.props.choices.map((function(choice,i){const checkedClass=choice.correct?"correct":"incorrect";return react__WEBPACK_IMPORTED_MODULE_1__.createElement("li",{key:""+i},react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("input",{ref:"radio"+i,type:"radio",name:dropdownGroupName,checked:choice.correct?"checked":"",onChange:this.onCorrectChange.bind(this,i),value:i}),react__WEBPACK_IMPORTED_MODULE_1__.createElement("input",{type:"text",ref:"editor"+i,onChange:this.onContentChange.bind(this,i),className:checkedClass,value:choice.content}),react__WEBPACK_IMPORTED_MODULE_1__.createElement("a",{href:"#",className:"simple-button orange","aria-label":"Delete choice",onClick:this.removeChoice.bind(this,i)},react__WEBPACK_IMPORTED_MODULE_1__.createElement("span",{className:"remove-choice"},react__WEBPACK_IMPORTED_MODULE_1__.createElement(InlineIcon,iconTrash)))))}),this)),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"add-choice-container"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("a",{href:"#",className:"simple-button orange",onClick:this.addChoice},react__WEBPACK_IMPORTED_MODULE_1__.createElement(InlineIcon,iconPlus)," Add a choice"," ")))}}const __WEBPACK_DEFAULT_EXPORT__=DropdownEditor;try{DropdownEditor.displayName="DropdownEditor",DropdownEditor.__docgenInfo={description:"",displayName:"DropdownEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/dropdown-editor.tsx#DropdownEditor"]={docgenInfo:DropdownEditor.__docgenInfo,name:"DropdownEditor",path:"packages/perseus-editor/src/widgets/dropdown-editor.tsx#DropdownEditor"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/widgets/example-graphie-widget.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_kmath__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/kmath/src/index.ts"),_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/perseus/src/index.ts"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),underscore__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/underscore/modules/index-all.js");const{Graphie}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_1__.components,MovablePoint=Graphie.MovablePoint;class ExampleGraphieWidget extends react__WEBPACK_IMPORTED_MODULE_2__.Component{static propTypes={..._khanacademy_perseus__WEBPACK_IMPORTED_MODULE_1__.ye.i,apiOptions:_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_1__._E.propTypes,graph:prop_types__WEBPACK_IMPORTED_MODULE_4___default().object.isRequired,coord:prop_types__WEBPACK_IMPORTED_MODULE_4___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_4___default().number)};static defaultProps={coord:null,graph:{box:[400,400],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],valid:!0,backgroundImage:null,markings:"grid",showProtractor:!1}};static validate(state,rubric){return null==state.coord?{type:"invalid",message:null}:_khanacademy_kmath__WEBPACK_IMPORTED_MODULE_0__.xm.equal(state.coord,rubric.correct)?{type:"points",earned:1,total:1,message:null}:{type:"points",earned:0,total:1,message:null}}getUserInput=()=>_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_1__.E.getUserInput.call(this);render(){return react__WEBPACK_IMPORTED_MODULE_2__.createElement(Graphie,{ref:"graphie",box:this.props.graph.box,range:this.props.graph.range,options:this.props.graph,setup:this.setupGraphie,setDrawingAreaAvailable:this.props.apiOptions.setDrawingAreaAvailable},react__WEBPACK_IMPORTED_MODULE_2__.createElement(MovablePoint,{pointSize:5,coord:this.props.coord||[0,0],constraints:[MovablePoint.constraints.snap(),MovablePoint.constraints.bound()],onMove:this.movePoint}))}change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_1__.ye.m.apply(_this,args)}})();movePoint=newCoord=>{this.change({coord:newCoord})};_getGridConfig=options=>underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.map(options.step,(function(step,i){return _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_1__.Util.gridDimensionConfig(step,options.range[i],options.box[i],options.gridStep[i])}));setupGraphie=(graphie,options)=>{const gridConfig=this._getGridConfig(options);graphie.graphInit({range:options.range,scale:underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.pluck(gridConfig,"scale"),axisArrows:"<->",labelFormat:function(s){return"\\small{"+s+"}"},gridStep:options.gridStep,tickStep:underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.pluck(gridConfig,"tickStep"),labelStep:1,unityLabels:underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.pluck(gridConfig,"unityLabel")}),graphie.label([0,options.range[1][1]],options.labels[1],"above")};simpleValidate=rubric=>ExampleGraphieWidget.validate(this.getUserInput(),rubric)}const __WEBPACK_DEFAULT_EXPORT__={name:"example-graphie-widget",displayName:"Example Graphie Widget",hidden:!0,widget:ExampleGraphieWidget};try{examplegraphiewidget.displayName="examplegraphiewidget",examplegraphiewidget.__docgenInfo={description:"For this widget to work, we must export it.\nWe also must import this file in src/all-widgets.js",displayName:"examplegraphiewidget",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/example-graphie-widget.tsx#examplegraphiewidget"]={docgenInfo:examplegraphiewidget.__docgenInfo,name:"examplegraphiewidget",path:"packages/perseus-editor/src/widgets/example-graphie-widget.tsx#examplegraphiewidget"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/widgets/explanation-editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),underscore__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/underscore/modules/index-all.js"),_editor__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/perseus-editor/src/editor.tsx");const{TextInput}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.components,defaultExplanationProps={showPrompt:"Explain",hidePrompt:"Hide explanation",explanation:"explanation goes here\n\nmore explanation",widgets:{}};class ExplanationEditor extends react__WEBPACK_IMPORTED_MODULE_1__.Component{static propTypes={..._khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.i,showPrompt:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,hidePrompt:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,explanation:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,widgets:prop_types__WEBPACK_IMPORTED_MODULE_4___default().object,apiOptions:prop_types__WEBPACK_IMPORTED_MODULE_4___default().any};static widgetName="explanation";static defaultProps=defaultExplanationProps;state={};change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.m.apply(_this,args)}})();serialize=()=>_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.yU.serialize.call(this);render(){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"perseus-widget-explanation-editor"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("label",null,"Prompt to show explanation:"," ",react__WEBPACK_IMPORTED_MODULE_1__.createElement(TextInput,{value:this.props.showPrompt,onChange:this.change("showPrompt")}))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("label",null,"Prompt to hide explanation:"," ",react__WEBPACK_IMPORTED_MODULE_1__.createElement(TextInput,{value:this.props.hidePrompt,onChange:this.change("hidePrompt")}))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_editor__WEBPACK_IMPORTED_MODULE_3__.Z,{apiOptions:this.props.apiOptions,content:this.props.explanation,widgets:this.props.widgets,widgetEnabled:!0,immutableWidgets:!1,onChange:props=>{const newProps={};underscore__WEBPACK_IMPORTED_MODULE_2__.ZP.has(props,"content")&&(newProps.explanation=props.content),underscore__WEBPACK_IMPORTED_MODULE_2__.ZP.has(props,"widgets")&&(newProps.widgets=props.widgets),this.change(newProps)}})))}}const __WEBPACK_DEFAULT_EXPORT__=ExplanationEditor;try{ExplanationEditor.displayName="ExplanationEditor",ExplanationEditor.__docgenInfo={description:"",displayName:"ExplanationEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/explanation-editor.tsx#ExplanationEditor"]={docgenInfo:ExplanationEditor.__docgenInfo,name:"ExplanationEditor",path:"packages/perseus-editor/src/widgets/explanation-editor.tsx#ExplanationEditor"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/widgets/input-number-editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),underscore__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/underscore/modules/index-all.js"),_components_blur_input__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/perseus-editor/src/components/blur-input.tsx");const{InfoTip}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.components,answerTypes={number:{name:"Numbers",forms:"integer, decimal, proper, improper, mixed"},decimal:{name:"Decimals",forms:"decimal"},integer:{name:"Integers",forms:"integer"},rational:{name:"Fractions and mixed numbers",forms:"integer, proper, improper, mixed"},improper:{name:"Improper numbers (no mixed)",forms:"integer, proper, improper"},mixed:{name:"Mixed numbers (no improper)",forms:"integer, proper, mixed"},percent:{name:"Numbers or percents",forms:"integer, decimal, proper, improper, mixed, percent"},pi:{name:"Numbers with pi",forms:"pi"}};class InputNumberEditor extends react__WEBPACK_IMPORTED_MODULE_1__.Component{static widgetName="input-number";static defaultProps={value:0,simplify:"required",size:"normal",inexact:!1,maxError:.1,answerType:"number",rightAlign:!1};input=react__WEBPACK_IMPORTED_MODULE_1__.createRef();handleAnswerChange=str=>{const value=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util.firstNumericalParse(str)||0;this.props.onChange({value})};render(){const answerTypeOptions=underscore__WEBPACK_IMPORTED_MODULE_2__.ZP.map(answerTypes,(function(v,k){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("option",{value:k,key:k},v.name)}),this);return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("label",null,"Correct answer:"," ",react__WEBPACK_IMPORTED_MODULE_1__.createElement(_components_blur_input__WEBPACK_IMPORTED_MODULE_3__.Z,{value:""+this.props.value,onChange:this.handleAnswerChange,ref:this.input}))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("label",null,"Unsimplified answers"," ",react__WEBPACK_IMPORTED_MODULE_1__.createElement("select",{value:this.props.simplify,onChange:e=>{this.props.onChange({simplify:e.target.value})}},react__WEBPACK_IMPORTED_MODULE_1__.createElement("option",{value:"required"},"will not be graded"),react__WEBPACK_IMPORTED_MODULE_1__.createElement("option",{value:"optional"},"will be accepted"),react__WEBPACK_IMPORTED_MODULE_1__.createElement("option",{value:"enforced"},"will be marked wrong"))),react__WEBPACK_IMPORTED_MODULE_1__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("p",null,'Normally select "will not be graded". This will give the user a message saying the answer is correct but not simplified. The user will then have to simplify it and re-enter, but will not be penalized. (5th grade and anything after)'),react__WEBPACK_IMPORTED_MODULE_1__.createElement("p",null,'Select "will be accepted" only if the user is not expected to know how to simplify fractions yet. (Anything prior to 5th grade)'),react__WEBPACK_IMPORTED_MODULE_1__.createElement("p",null,'Select "will be marked wrong" only if we are specifically assessing the ability to simplify.'))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("label",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("input",{type:"checkbox",checked:this.props.inexact,onChange:e=>{this.props.onChange({inexact:e.target.checked})}})," ","Allow inexact answers"),react__WEBPACK_IMPORTED_MODULE_1__.createElement("label",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("input",{type:"checkbox",style:{visibility:"hidden"}}),"Max error:"," ",react__WEBPACK_IMPORTED_MODULE_1__.createElement("input",{type:"text",disabled:!this.props.inexact,defaultValue:this.props.maxError,"aria-label":"Max error",onBlur:e=>{const ans=""+(_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util.firstNumericalParse(e.target.value)||0);e.target.value=ans,this.props.onChange({maxError:ans})}}))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,"Answer type:"," ",react__WEBPACK_IMPORTED_MODULE_1__.createElement("select",{value:this.props.answerType,onChange:e=>{this.props.onChange({answerType:e.target.value})},"aria-label":"Answer type"},answerTypeOptions),react__WEBPACK_IMPORTED_MODULE_1__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("p",null,'Use the default "Numbers" unless the answer must be in a specific form (e.g., question is about converting decimals to fractions).'))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("label",null,"Width"," ",react__WEBPACK_IMPORTED_MODULE_1__.createElement("select",{value:this.props.size,onChange:e=>{this.props.onChange({size:e.target.value})}},react__WEBPACK_IMPORTED_MODULE_1__.createElement("option",{value:"normal"},"Normal (80px)"),react__WEBPACK_IMPORTED_MODULE_1__.createElement("option",{value:"small"},"Small (40px)"))),react__WEBPACK_IMPORTED_MODULE_1__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("p",null,'Use size "Normal" for all text boxes, unless there are multiple text boxes in one line and the answer area is too narrow to fit them.'))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("label",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("input",{type:"checkbox",checked:this.props.rightAlign,onChange:e=>{this.props.onChange({rightAlign:e.target.checked})}})," ","Right alignment")))}focus=()=>(this.input.current?.focus(),!0);serialize=()=>({value:this.props.value,simplify:this.props.simplify,size:this.props.size,inexact:this.props.inexact,maxError:this.props.maxError,answerType:this.props.answerType,rightAlign:this.props.rightAlign})}const __WEBPACK_DEFAULT_EXPORT__=InputNumberEditor;try{InputNumberEditor.displayName="InputNumberEditor",InputNumberEditor.__docgenInfo={description:"",displayName:"InputNumberEditor",props:{value:{defaultValue:{value:"0"},description:"",name:"value",required:!1,type:{name:"number"}},simplify:{defaultValue:{value:"required"},description:"",name:"simplify",required:!1,type:{name:"enum",value:[{value:'"required"'},{value:'"optional"'},{value:'"enforced"'}]}},size:{defaultValue:{value:"normal"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"normal"'},{value:'"small"'}]}},inexact:{defaultValue:{value:"false"},description:"",name:"inexact",required:!1,type:{name:"boolean"}},maxError:{defaultValue:{value:"0.1"},description:"",name:"maxError",required:!1,type:{name:"string | number"}},answerType:{defaultValue:{value:"number"},description:"",name:"answerType",required:!1,type:{name:"enum",value:[{value:'"number"'},{value:'"decimal"'},{value:'"integer"'},{value:'"rational"'},{value:'"improper"'},{value:'"mixed"'},{value:'"percent"'},{value:'"pi"'}]}},rightAlign:{defaultValue:{value:"false"},description:"",name:"rightAlign",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:'(arg1: { value?: 0 | ParsedValue | undefined; simplify?: "required" | "optional" | "enforced" | undefined; size?: "normal" | "small" | undefined; inexact?: boolean | undefined; maxError?: string | ... 1 more ... | undefined; answerType?: "number" | ... 7 more ... | undefined; rightAlign?: boolean | undefined; }) => ...'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/input-number-editor.tsx#InputNumberEditor"]={docgenInfo:InputNumberEditor.__docgenInfo,name:"InputNumberEditor",path:"packages/perseus-editor/src/widgets/input-number-editor.tsx#InputNumberEditor"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/widgets/matcher-editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),underscore__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/underscore/modules/index-all.js");const{InfoTip,PropCheckBox,TextListEditor}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.components;class MatcherEditor extends react__WEBPACK_IMPORTED_MODULE_1__.Component{static propTypes={left:prop_types__WEBPACK_IMPORTED_MODULE_3___default().array,right:prop_types__WEBPACK_IMPORTED_MODULE_3___default().array,labels:prop_types__WEBPACK_IMPORTED_MODULE_3___default().array,orderMatters:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,padding:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool};static widgetName="matcher";static defaultProps={left:["$x$","$y$","$z$"],right:["$1$","$2$","$3$"],labels:["test","label"],orderMatters:!1,padding:!0};render(){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"perseus-matcher-editor"},react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null," ","Correct answer:"," ",react__WEBPACK_IMPORTED_MODULE_1__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("p",null,"Enter the correct answers here. The preview on the right will show the cards in a randomized order, which is how the student will see them."))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:"perseus-clearfix"},react__WEBPACK_IMPORTED_MODULE_1__.createElement(TextListEditor,{options:this.props.left,onChange:(options,cb)=>{this.props.onChange({left:options},cb)},layout:"vertical"}),react__WEBPACK_IMPORTED_MODULE_1__.createElement(TextListEditor,{options:this.props.right,onChange:(options,cb)=>{this.props.onChange({right:options},cb)},layout:"vertical"})),react__WEBPACK_IMPORTED_MODULE_1__.createElement("span",null," ","Labels:"," ",react__WEBPACK_IMPORTED_MODULE_1__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("p",null,"These are entirely optional."))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("input",{type:"text",defaultValue:this.props.labels[0],onChange:this.onLabelChange.bind(this,0)}),react__WEBPACK_IMPORTED_MODULE_1__.createElement("input",{type:"text",defaultValue:this.props.labels[1],onChange:this.onLabelChange.bind(this,1)})),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement(PropCheckBox,{label:"Order of the matched pairs matters:",orderMatters:this.props.orderMatters,onChange:this.props.onChange}),react__WEBPACK_IMPORTED_MODULE_1__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("p",null,"With this option enabled, only the order provided above will be treated as correct. This is useful when ordering is significant, such as in the context of a proof."),react__WEBPACK_IMPORTED_MODULE_1__.createElement("p",null,"If disabled, pairwise matching is sufficient. To make this clear, the left column becomes fixed in the provided order and only the cards in the right column can be moved."))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement(PropCheckBox,{label:"Padding:",padding:this.props.padding,onChange:this.props.onChange}),react__WEBPACK_IMPORTED_MODULE_1__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("p",null,"Padding is good for text, but not needed for images."))))}onLabelChange=(index,e)=>{const labels=underscore__WEBPACK_IMPORTED_MODULE_2__.ZP.clone(this.props.labels);labels[index]=e.target.value,this.props.onChange({labels})};getSaveWarnings=()=>this.props.left.length!==this.props.right.length?["The two halves of the matcher have different numbers of cards."]:[];serialize=()=>underscore__WEBPACK_IMPORTED_MODULE_2__.ZP.pick(this.props,"left","right","labels","orderMatters","padding")}const __WEBPACK_DEFAULT_EXPORT__=MatcherEditor;try{MatcherEditor.displayName="MatcherEditor",MatcherEditor.__docgenInfo={description:"",displayName:"MatcherEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/matcher-editor.tsx#MatcherEditor"]={docgenInfo:MatcherEditor.__docgenInfo,name:"MatcherEditor",path:"packages/perseus-editor/src/widgets/matcher-editor.tsx#MatcherEditor"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/widgets/number-line-editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_kmath__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/kmath/src/index.ts"),_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/perseus/src/index.ts"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),underscore__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/underscore/modules/index-all.js");const{ButtonGroup,InfoTip,NumberInput,PropCheckBox,RangeInput}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_1__.components;class NumberLineEditor extends react__WEBPACK_IMPORTED_MODULE_2__.Component{static propTypes={range:prop_types__WEBPACK_IMPORTED_MODULE_4___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_4___default().number).isRequired,labelRange:prop_types__WEBPACK_IMPORTED_MODULE_4___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_4___default().number).isRequired,labelStyle:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string.isRequired,labelTicks:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool,divisionRange:prop_types__WEBPACK_IMPORTED_MODULE_4___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_4___default().number).isRequired,numDivisions:prop_types__WEBPACK_IMPORTED_MODULE_4___default().number.isRequired,snapDivisions:prop_types__WEBPACK_IMPORTED_MODULE_4___default().number,tickStep:prop_types__WEBPACK_IMPORTED_MODULE_4___default().number,correctRel:prop_types__WEBPACK_IMPORTED_MODULE_4___default().oneOf(["lt","gt","le","ge","eq"]),correctX:prop_types__WEBPACK_IMPORTED_MODULE_4___default().number,initialX:prop_types__WEBPACK_IMPORTED_MODULE_4___default().number,isTickCtrl:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool,onChange:prop_types__WEBPACK_IMPORTED_MODULE_4___default().func.isRequired,static:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool,showTooltips:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool};static widgetName="number-line";static defaultProps={range:[0,10],labelRange:[null,null],labelStyle:"decimal",labelTicks:!0,divisionRange:[1,12],numDivisions:5,snapDivisions:2,tickStep:null,correctRel:"eq",correctX:null,initialX:null,showTooltips:!1};onRangeChange=range=>{this.props.onChange({range})};onLabelRangeChange=(i,num)=>{let labelRange=this.props.labelRange.slice();const otherNum=labelRange[1-i];null==num||null==otherNum?labelRange[i]=num:labelRange=[Math.min(num,otherNum),Math.max(num,otherNum)],this.props.onChange({labelRange})};onDivisionRangeChange=divisionRange=>{let numDivisions=this.props.numDivisions;var x,gt,lt;x=numDivisions,gt=divisionRange[0],lt=divisionRange[1],numDivisions=Math.min(Math.max(x,gt),lt),this.props.onChange({divisionRange,numDivisions})};onNumChange=(key,value)=>{const opts={};opts[key]=value,this.props.onChange(opts)};onNumDivisionsChange=numDivisions=>{const divRange=this.props.divisionRange.slice();(numDivisions=(numDivisions=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.isFinite(numDivisions)?Math.round(numDivisions):0)<0?-1*numDivisions:numDivisions)&&(numDivisions=Math.min(divRange[1],Math.max(divRange[0],numDivisions)),this.props.onChange({tickStep:null,divisionRange:divRange,numDivisions}))};onTickStepChange=tickStep=>{this.props.onChange({numDivisions:null,tickStep})};onChangeRelation=e=>{const value=e.target.value;this.props.onChange({correctRel:value,isInequality:"eq"!==value})};onLabelStyleChange=labelStyle=>{this.props.onChange({labelStyle})};serialize=()=>_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_1__.yU.serialize.call(this);render(){const range=this.props.range,labelRange=this.props.labelRange,divisionRange=this.props.divisionRange;range[0]=+range[0],range[1]=+range[1];const width=range[1]-range[0],numDivisions=this.props.numDivisions,snapDivisions=this.props.snapDivisions,tickStep=this.props.tickStep,isTickCtrl=this.props.isTickCtrl;let step;step=isTickCtrl?null:tickStep?tickStep/snapDivisions:width/numDivisions/snapDivisions;return react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-number-line-editor"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},"Correct x"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("select",{value:this.props.correctRel,onChange:this.onChangeRelation,"aria-label":"Select relationship"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:"eq","aria-label":"Equal"},"="),react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:"lt","aria-label":"Less than"},"<"),react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:"gt","aria-label":"Greater than"},">"),react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:"le","aria-label":"Less than or equal"},""),react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:"ge","aria-label":"Greater than or equal"},""))," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:this.props.correctX,format:this.props.labelStyle,onChange:this.onNumChange.bind(this,"correctX"),checkValidity:val=>val>=range[0]&&val<=range[1]&&(!step||_khanacademy_kmath__WEBPACK_IMPORTED_MODULE_0__.Rx.isInteger((val-range[0])/step)),placeholder:"answer",size:"normal",useArrowKeys:!0}),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"This is the correct answer. The answer is validated (as right or wrong) by using only the end position of the point and the relation (=, <, >, , )."))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},this.props.static?react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Range:"):react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Position:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:this.props.initialX,format:this.props.labelStyle,onChange:this.onNumChange.bind(this,"initialX"),placeholder:range[0],checkValidity:val=>val>=range[0]&&val<=range[1],useArrowKeys:!0}),"  "),react__WEBPACK_IMPORTED_MODULE_2__.createElement(RangeInput,{value:range,onChange:this.onRangeChange,format:this.props.labelStyle,useArrowKeys:!0}),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"This controls the initial position of the point along the number line and the",react__WEBPACK_IMPORTED_MODULE_2__.createElement("strong",null,"range"),", the position of the endpoints of the number line. Setting the range constrains the position of the answer and the labels."),react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"In static mode, the initial position of the point is determined by Correct x instead of position."))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},"Labels:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:labelRange[0],placeholder:range[0],format:this.props.labelStyle,checkValidity:val=>val>=range[0]&&val<=range[1],onChange:this.onLabelRangeChange.bind(this,0),useArrowKeys:!0}),react__WEBPACK_IMPORTED_MODULE_2__.createElement("span",null," & "),react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:labelRange[1],placeholder:range[1],format:this.props.labelStyle,checkValidity:val=>val>=range[0]&&val<=range[1],onChange:this.onLabelRangeChange.bind(this,1),useArrowKeys:!0}),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"This controls the position of the left / right labels. By default, the labels are set by the range ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_2__.createElement("strong",null,"Note:")," Ensure that the labels line up with the tick marks, or it may be confusing for users.")))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},"Style:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(ButtonGroup,{allowEmpty:!1,value:this.props.labelStyle,buttons:[{value:"decimal",content:"0.75",title:"Decimals"},{value:"improper",content:"",title:"Improper fractions"},{value:"mixed",content:"1",title:"Mixed numbers"},{value:"non-reduced",content:"",title:"Non-reduced"}],onChange:this.onLabelStyleChange}),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"This controls the styling of the labels for the two main labels as well as all the tick mark labels, if applicable. Your choices are decimal, improper fractions, mixed fractions, and non-reduced fractions."))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},!this.props.static&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Show tick controller",isTickCtrl:this.props.isTickCtrl,onChange:this.props.onChange})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-right-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Show label ticks",labelTicks:this.props.labelTicks,onChange:this.props.onChange}))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},!this.props.static&&react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Show tooltips",showTooltips:this.props.showTooltips,onChange:this.props.onChange})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},isTickCtrl&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Start num divisions at"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:this.props.numDivisions||null,format:"decimal",onChange:this.onNumDivisionsChange,checkValidity:val=>val>=divisionRange[0]&&val<=divisionRange[1],placeholder:width/this.props.tickStep,useArrowKeys:!0})),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"This controls the number (and position) of the tick marks. The number of divisions is constrained to"," "+divisionRange[0]+""+divisionRange[1],".",react__WEBPACK_IMPORTED_MODULE_2__.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_2__.createElement("strong",null,"Note:")," The user will be able to specify the number of divisions in a number input."))),!isTickCtrl&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Num divisions:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:this.props.numDivisions||null,format:"decimal",onChange:this.onNumDivisionsChange,checkValidity:val=>val>=divisionRange[0]&&val<=divisionRange[1],placeholder:width/this.props.tickStep,useArrowKeys:!0}))," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"or tick step:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:this.props.tickStep||null,format:this.props.labelStyle,onChange:this.onTickStepChange,checkValidity:val=>val>0&&val<=width,placeholder:width/this.props.numDivisions,useArrowKeys:!0})),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"This controls the number (and position) of the tick marks; you can either set the number of divisions (2 divisions would split the entire range in two halves), or the tick step (the distance between ticks) and the other value will be updated accordingly."," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_2__.createElement("strong",null,"Note:")," There is no check to see if labels coordinate with the tick marks, which may be confusing for users if the blue labels and black ticks are off-step.")))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Snap increments per tick:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:snapDivisions,checkValidity:val=>val>0,format:this.props.labelStyle,onChange:this.onNumChange.bind(this,"snapDivisions"),useArrowKeys:!0})),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"This determines the number of different places the point will snap between two adjacent tick marks."," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_2__.createElement("strong",null,"Note:"),"Ensure the required number of snap increments is provided to answer the question."))))}}const __WEBPACK_DEFAULT_EXPORT__=NumberLineEditor;try{NumberLineEditor.displayName="NumberLineEditor",NumberLineEditor.__docgenInfo={description:"",displayName:"NumberLineEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/number-line-editor.tsx#NumberLineEditor"]={docgenInfo:NumberLineEditor.__docgenInfo,name:"NumberLineEditor",path:"packages/perseus-editor/src/widgets/number-line-editor.tsx#NumberLineEditor"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/widgets/numeric-input-editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),create_react_class__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/create-react-class/index.js"),create_react_class__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(create_react_class__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),underscore__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/underscore/modules/index-all.js"),_editor__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/perseus-editor/src/editor.tsx");const{ButtonGroup,InfoTip,InlineIcon,MultiButtonGroup,NumberInput,PropCheckBox,TextInput}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.components,{iconGear,iconTrash}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.icons,{firstNumericalParse}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util,answerFormButtons=[{title:"Integers",value:"integer",content:"6"},{title:"Decimals",value:"decimal",content:"0.75"},{title:"Proper fractions",value:"proper",content:""},{title:"Improper fractions",value:"improper",content:""},{title:"Mixed numbers",value:"mixed",content:"1"},{title:"Numbers with ",value:"pi",content:""}],initAnswer=status=>({value:null,status,message:"",simplify:"required",answerForms:[],strict:!1,maxError:null}),__WEBPACK_DEFAULT_EXPORT__=create_react_class__WEBPACK_IMPORTED_MODULE_1___default()({displayName:"NumericInputEditor",propTypes:{..._khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.i},statics:{widgetName:"numeric-input"},getDefaultProps:function(){return{answers:[initAnswer("correct")],size:"normal",coefficient:!1,labelText:"",rightAlign:!1}},getInitialState:function(){return{lastStatus:"wrong",showOptions:underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.map(this.props.answers,(()=>!1))}},render:function(){const answers=this.props.answers,unsimplifiedAnswers=i=>react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Unsimplified answers are"),react__WEBPACK_IMPORTED_MODULE_2__.createElement(ButtonGroup,{value:answers[i].simplify,allowEmpty:!1,buttons:[{value:"required",content:"ungraded"},{value:"optional",content:"accepted"},{value:"enforced",content:"wrong"}],onChange:this.updateAnswer(i,"simplify")}),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,'Normally select "ungraded". This will give the user a message saying the answer is correct but not simplified. The user will then have to simplify it and re-enter, but will not be penalized. (5th grade and after)'),react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,'Select "accepted" only if the user is not expected to know how to simplify fractions yet. (Anything prior to 5th grade)'),react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,'Select "wrong" ',react__WEBPACK_IMPORTED_MODULE_2__.createElement("em",null,"only")," if we are specifically assessing the ability to simplify."))),suggestedAnswerTypes=i=>react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Choose the suggested answer formats"),react__WEBPACK_IMPORTED_MODULE_2__.createElement(MultiButtonGroup,{buttons:answerFormButtons,values:answers[i].answerForms,onChange:this.updateAnswer(i,"answerForms")}),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,'Formats will be autoselected for you based on the given answer; to show no suggested formats and accept all types, simply have a decimal/integer be the answer. Values with  will have format "pi", and values that are fractions will have some subset (mixed will be "mixed" and "proper"; improper/proper will both be "improper" and "proper"). If you would like to specify that it is only a proper fraction (or only a mixed/improper fraction), deselect the other format. Except for specific cases, you should not need to change the autoselected formats.'),react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"To restrict the answer to ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("em",null,"only"),' an improper fraction (i.e. 7/4), select the improper fraction and toggle "strict" to true. This ',react__WEBPACK_IMPORTED_MODULE_2__.createElement("b",null,"will not")," ","accept 1.75 as an answer."," "),react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"Unless you are testing that specific skill, please do not restrict the answer format."))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Strictly match only these formats",strict:answers[i].strict,onChange:this.updateAnswer.bind(this,i)}))),maxError=i=>react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Max error"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{className:"max-error",value:answers[i].maxError,onChange:this.updateAnswer(i,"maxError"),placeholder:"0"}))),inputSize=react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Width: "),react__WEBPACK_IMPORTED_MODULE_2__.createElement(ButtonGroup,{value:this.props.size,allowEmpty:!1,buttons:[{value:"normal",content:"Normal (80px)"},{value:"small",content:"Small (40px)"}],onChange:this.change("size")}),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,'Use size "Normal" for all text boxes, unless there are multiple text boxes in one line and the answer area is too narrow to fit them.'))),rightAlign=react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Right alignment",rightAlign:this.props.rightAlign,onChange:this.props.onChange})),labelText=react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Label text:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(TextInput,{value:this.props.labelText,onChange:this.change("labelText")})),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"Text to describe this input. This will be shown to users using screenreaders."))),coefficientCheck=react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Coefficient",coefficient:this.props.coefficient,onChange:this.props.onChange}),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"A coefficient style number allows the student to use - for -1 and an empty string to mean 1.")))),addAnswerButton=react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("a",{href:"javascript:void(0)",className:"simple-button orange",onClick:()=>this.addAnswer(),onKeyDown:e=>this.onSpace(e,this.addAnswer)},react__WEBPACK_IMPORTED_MODULE_2__.createElement("span",null,"Add new answer"))),instructions={wrong:"(address the mistake/misconception)",ungraded:"(explain in detail to avoid confusion)",correct:"(reinforce the user's understanding)"};return react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-input-number-editor"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"ui-title"},"User input"),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"msg-title"},"Message shown to user on attempt"),(()=>answers.map(((answer,i)=>{const editor=react__WEBPACK_IMPORTED_MODULE_2__.createElement(_editor__WEBPACK_IMPORTED_MODULE_4__.Z,{apiOptions:this.props.apiOptions,content:answer.message||"",placeholder:"Why is this answer "+answer.status+"?\t"+instructions[answer.status],widgetEnabled:!1,onChange:newProps=>{"content"in newProps&&this.updateAnswer(i,{message:newProps.content})}});return react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row",key:i},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"input-answer-editor-value-container"+(answer.maxError?" with-max-error":"")},react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:answer.value,className:"numeric-input-value",placeholder:"answer",format:underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.last(answer.answerForms),onFormatChange:(newValue,format)=>{let forms;"pi"===format?forms=["pi"]:"mixed"===format?forms=["proper","mixed"]:"proper"!==format&&"improper"!==format||(forms=["proper","improper"]),this.updateAnswer(i,{value:firstNumericalParse(newValue),answerForms:forms})},onChange:newValue=>{this.updateAnswer(i,{value:firstNumericalParse(newValue)})}}),answer.strict&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"is-strict-indicator",title:"strictly equivalent to"},""),"required"!==answer.simplify&&"correct"===answer.status&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"simplify-indicator "+answer.simplify,title:"accepts unsimplified answers"},""),answer.maxError?react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"max-error-container"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"max-error-plusmn"},""),react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{placeholder:0,value:answers[i].maxError,format:underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.last(answer.answerForms),onChange:this.updateAnswer(i,"maxError")})):null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"value-divider"}),react__WEBPACK_IMPORTED_MODULE_2__.createElement("a",{href:"javascript:void(0)",className:"answer-status "+answer.status,onClick:()=>this.onStatusChange(i),onKeyDown:e=>this.onSpace(e,this.onStatusChange,i)},answer.status),react__WEBPACK_IMPORTED_MODULE_2__.createElement("a",{href:"javascript:void(0)",className:"answer-trash","aria-label":"Delete answer",onClick:()=>this.onTrashAnswer(i),onKeyDown:e=>this.onSpace(e,this.onTrashAnswer,i)},react__WEBPACK_IMPORTED_MODULE_2__.createElement(InlineIcon,iconTrash)),react__WEBPACK_IMPORTED_MODULE_2__.createElement("a",{href:"javascript:void(0)",className:"options-toggle","aria-label":"Toggle options",onClick:()=>this.onToggleOptions(i),onKeyDown:e=>this.onSpace(e,this.onToggleOptions,i)},react__WEBPACK_IMPORTED_MODULE_2__.createElement(InlineIcon,iconGear))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"input-answer-editor-message"},editor),this.state.showOptions[i]&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"options-container"},maxError(i),"correct"===answer.status&&unsimplifiedAnswers(i),suggestedAnswerTypes(i)))})))(),addAnswerButton,inputSize,rightAlign,coefficientCheck,labelText)},change(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.m.apply(this,args)},onToggleOptions:function(choiceIndex){const showOptions=this.state.showOptions.slice();showOptions[choiceIndex]=!showOptions[choiceIndex],this.setState({showOptions})},onTrashAnswer:function(choiceIndex){if(choiceIndex>=0&&choiceIndex<this.props.answers.length){const answers=this.props.answers.slice(0);answers.splice(choiceIndex,1),this.props.onChange({answers})}},onSpace:function(e,callback){if(" "===e.key){e.preventDefault();const args=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.toArray(arguments).slice(2);callback.apply(this,args)}},onStatusChange:function(choiceIndex){const statuses=["wrong","ungraded","correct"],answers=this.props.answers,newStatus=statuses[(underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.indexOf(statuses,answers[choiceIndex].status)+1)%statuses.length];this.updateAnswer(choiceIndex,{status:newStatus,simplify:"correct"===newStatus?"required":"accepted"})},updateAnswer:function(choiceIndex,update){if(!underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.isObject(update))return underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.partial(((choiceIndex,key,value)=>{const update={};update[key]=value,this.updateAnswer(choiceIndex,update)}),choiceIndex,update);let answers=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.clone(this.props.answers);if(choiceIndex===answers.length){const lastAnswer=initAnswer(this.state.lastStatus);answers=answers.concat(lastAnswer)}answers[choiceIndex]=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.extend({},answers[choiceIndex],update),this.props.onChange({answers})},addAnswer:function(){const lastAnswer=initAnswer(this.state.lastStatus),answers=this.props.answers.concat(lastAnswer);this.props.onChange({answers})},getSaveWarnings:function(){const warnings=[];return underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.contains(underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.pluck(this.props.answers,"value"),"")&&warnings.push("One or more answers is empty"),this.props.answers.forEach(((answer,i)=>{answer.strict&&(!answer.answerForms||0===answer.answerForms.length)&&warnings.push(`Answer ${i+1} is set to string format matching, but no format was selected`)})),warnings},serialize(){return _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.yU.serialize.call(this)}})},"./packages/perseus-editor/src/widgets/radio/editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),_khanacademy_wonder_blocks_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@khanacademy/wonder-blocks-i18n/dist/es/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),underscore__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/underscore/modules/index-all.js"),_editor__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/perseus-editor/src/editor.tsx");const{InlineIcon,PropCheckBox}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.components,{iconPlus,iconTrash}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.icons;class ChoiceEditor extends react__WEBPACK_IMPORTED_MODULE_2__.Component{static propTypes={apiOptions:_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__._E.propTypes,choice:prop_types__WEBPACK_IMPORTED_MODULE_5___default().object,showDelete:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,onClueChange:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func,onContentChange:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func,onDelete:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func};render(){const checkedClass=this.props.choice.correct?"correct":"incorrect";let placeholder="Type a choice here...";this.props.choice.isNoneOfTheAbove&&(placeholder=this.props.choice.correct?"Type the answer to reveal to the user...":"None of the above");const editor=react__WEBPACK_IMPORTED_MODULE_2__.createElement(_editor__WEBPACK_IMPORTED_MODULE_4__.Z,{ref:"content-editor",apiOptions:this.props.apiOptions,content:this.props.choice.content||"",widgetEnabled:!1,placeholder,disabled:this.props.choice.isNoneOfTheAbove&&!this.props.choice.correct,onChange:this.props.onContentChange}),clueEditor=react__WEBPACK_IMPORTED_MODULE_2__.createElement(_editor__WEBPACK_IMPORTED_MODULE_4__.Z,{ref:"clue-editor",apiOptions:this.props.apiOptions,content:this.props.choice.clue||"",widgetEnabled:!1,placeholder:_khanacademy_wonder_blocks_i18n__WEBPACK_IMPORTED_MODULE_1__._("Why is this choice %(correctOrIncorrect)s?",{correctOrIncorrect:checkedClass}),onChange:this.props.onClueChange}),deleteLink=react__WEBPACK_IMPORTED_MODULE_2__.createElement("a",{className:"simple-button orange delete-choice",href:"#",onClick:e=>{e.stopPropagation(),e.preventDefault(),this.props.onDelete()},title:"Remove this choice"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(InlineIcon,iconTrash));return react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"choice-clue-editors"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:`choice-editor ${checkedClass}`},editor),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"clue-editor"},clueEditor),this.props.showDelete&&deleteLink)}}class RadioEditor extends react__WEBPACK_IMPORTED_MODULE_2__.Component{static propTypes={..._khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.i,apiOptions:_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__._E.propTypes,choices:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().shape({content:prop_types__WEBPACK_IMPORTED_MODULE_5___default().string,clue:prop_types__WEBPACK_IMPORTED_MODULE_5___default().string,correct:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool})),displayCount:prop_types__WEBPACK_IMPORTED_MODULE_5___default().number,randomize:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,hasNoneOfTheAbove:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,multipleSelect:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,countChoices:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,deselectEnabled:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,static:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool};static widgetName="radio";static defaultProps={choices:[{},{}],displayCount:null,randomize:!1,hasNoneOfTheAbove:!1,multipleSelect:!1,countChoices:!1,deselectEnabled:!1};render(){const numCorrect=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.reduce(this.props.choices,(function(memo,choice){return choice.correct?memo+1:memo}),0);return react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("a",{href:"https://docs.google.com/document/d/1frZf7yrWVWb1n4tVjqlzqVUiv1pn4cZXbxgP62-JDBY/edit#heading=h.8ng1isya19nu",target:"_blank"},"Multiple choice style guide"),react__WEBPACK_IMPORTED_MODULE_2__.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Multiple selections",labelAlignment:"right",multipleSelect:this.props.multipleSelect,onChange:this.onMultipleSelectChange})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-right-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Randomize order",labelAlignment:"right",randomize:this.props.randomize,onChange:this.props.onChange})),this.props.multipleSelect&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Specify number correct",labelAlignment:"right",countChoices:this.props.countChoices,onChange:this.onCountChoicesChange}))),react__WEBPACK_IMPORTED_MODULE_2__.createElement(_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Zp,{multipleSelect:this.props.multipleSelect,countChoices:this.props.countChoices,numCorrect,editMode:!0,labelWrap:!1,apiOptions:this.props.apiOptions,choices:this.props.choices.map(((choice,i)=>({content:react__WEBPACK_IMPORTED_MODULE_2__.createElement(ChoiceEditor,{ref:`choice-editor${i}`,apiOptions:this.props.apiOptions,choice,onContentChange:newProps=>{"content"in newProps&&this.onContentChange(i,newProps.content)},onClueChange:newProps=>{"content"in newProps&&this.onClueChange(i,newProps.content)},onDelete:()=>this.onDelete(i),showDelete:this.props.choices.length>=2}),isNoneOfTheAbove:choice.isNoneOfTheAbove,checked:choice.correct})),this),onChange:this.onChange}),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"add-choice-container"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("a",{className:"simple-button orange",href:"#",onClick:this.addChoice.bind(this,!1)},react__WEBPACK_IMPORTED_MODULE_2__.createElement(InlineIcon,iconPlus)," Add a choice"," "),!this.props.hasNoneOfTheAbove&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("a",{className:"simple-button",href:"#",onClick:this.addChoice.bind(this,!0)},react__WEBPACK_IMPORTED_MODULE_2__.createElement(InlineIcon,iconPlus)," None of the above"," ")))}change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.m.apply(_this,args)}})();onMultipleSelectChange=allowMultiple=>{allowMultiple=allowMultiple.multipleSelect;const numCorrect=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.reduce(this.props.choices,(function(memo,choice){return choice.correct?memo+1:memo}),0);if(!allowMultiple&&numCorrect>1){const choices=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.map(this.props.choices,(function(choice){return underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.defaults({correct:!1},choice)}));this.props.onChange({multipleSelect:allowMultiple,choices})}else this.props.onChange({multipleSelect:allowMultiple})};onCountChoicesChange=count=>{count=count.countChoices,this.props.onChange({countChoices:count})};onChange=_ref=>{let{checked}=_ref;const choices=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.map(this.props.choices,((choice,i)=>underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.extend({},choice,{correct:checked[i],content:choice.isNoneOfTheAbove&&!checked[i]?"":choice.content})));this.props.onChange({choices})};onContentChange=(choiceIndex,newContent)=>{const choices=this.props.choices.slice();choices[choiceIndex]=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.extend({},choices[choiceIndex],{content:newContent}),this.props.onChange({choices})};onClueChange=(choiceIndex,newClue)=>{const choices=this.props.choices.slice();choices[choiceIndex]=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.extend({},choices[choiceIndex],{clue:newClue}),""===newClue&&delete choices[choiceIndex].clue,this.props.onChange({choices})};onDelete=choiceIndex=>{const choices=this.props.choices.slice(),deleted=choices[choiceIndex];choices.splice(choiceIndex,1),this.props.onChange({choices,hasNoneOfTheAbove:this.props.hasNoneOfTheAbove&&!deleted.isNoneOfTheAbove})};addChoice=(noneOfTheAbove,e)=>{e.preventDefault();const choices=this.props.choices.slice(),newChoice={isNoneOfTheAbove:noneOfTheAbove},addIndex=choices.length-(this.props.hasNoneOfTheAbove?1:0);choices.splice(addIndex,0,newChoice),this.props.onChange({choices,hasNoneOfTheAbove:noneOfTheAbove||this.props.hasNoneOfTheAbove},(()=>{this.refs[`choice-editor${addIndex}`].refs["content-editor"].focus()}))};setDisplayCount=num=>{this.props.onChange({displayCount:num})};focus=()=>(this.refs["choice-editor0"].refs["content-editor"].focus(),!0);getSaveWarnings=()=>underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.some(underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.pluck(this.props.choices,"correct"))?[]:["No choice is marked as correct."];serialize=()=>underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.pick(this.props,"choices","randomize","multipleSelect","countChoices","displayCount","hasNoneOfTheAbove","deselectEnabled")}const __WEBPACK_DEFAULT_EXPORT__=RadioEditor;try{RadioEditor.displayName="RadioEditor",RadioEditor.__docgenInfo={description:"",displayName:"RadioEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/radio/editor.tsx#RadioEditor"]={docgenInfo:RadioEditor.__docgenInfo,name:"RadioEditor",path:"packages/perseus-editor/src/widgets/radio/editor.tsx#RadioEditor"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/widgets/sorter-editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),underscore__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/underscore/modules/index-all.js");const{InfoTip,PropCheckBox,TextListEditor}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.components;class SorterEditor extends react__WEBPACK_IMPORTED_MODULE_1__.Component{static propTypes={correct:prop_types__WEBPACK_IMPORTED_MODULE_3___default().array,layout:prop_types__WEBPACK_IMPORTED_MODULE_3___default().oneOf(["horizontal","vertical"]),padding:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool};static widgetName="sorter";static defaultProps={correct:["$x$","$y$","$z$"],layout:"horizontal",padding:!0};onLayoutChange=e=>{this.props.onChange({layout:e.target.value})};serialize=()=>underscore__WEBPACK_IMPORTED_MODULE_2__.ZP.pick(this.props,"correct","layout","padding");render(){const editor=this;return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null," ","Correct answer:"," ",react__WEBPACK_IMPORTED_MODULE_1__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("p",null,"Enter the correct answer (in the correct order) here. The preview on the right will have the cards in a randomized order, which is how the student will see them."))),react__WEBPACK_IMPORTED_MODULE_1__.createElement(TextListEditor,{options:this.props.correct,onChange:function(options,cb){editor.props.onChange({correct:options},cb)},layout:this.props.layout}),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("label",null," ","Layout:"," ",react__WEBPACK_IMPORTED_MODULE_1__.createElement("select",{value:this.props.layout,onChange:this.onLayoutChange},react__WEBPACK_IMPORTED_MODULE_1__.createElement("option",{value:"horizontal"},"Horizontal"),react__WEBPACK_IMPORTED_MODULE_1__.createElement("option",{value:"vertical"},"Vertical"))),react__WEBPACK_IMPORTED_MODULE_1__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("p",null,"Use the horizontal layout for short text and small images. The vertical layout is best for longer text and larger images."))),react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_1__.createElement(PropCheckBox,{label:"Padding:",padding:this.props.padding,onChange:this.props.onChange}),react__WEBPACK_IMPORTED_MODULE_1__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_1__.createElement("p",null,"Padding is good for text, but not needed for images."))))}}const __WEBPACK_DEFAULT_EXPORT__=SorterEditor;try{SorterEditor.displayName="SorterEditor",SorterEditor.__docgenInfo={description:"",displayName:"SorterEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/sorter-editor.tsx#SorterEditor"]={docgenInfo:SorterEditor.__docgenInfo,name:"SorterEditor",path:"packages/perseus-editor/src/widgets/sorter-editor.tsx#SorterEditor"})}catch(__react_docgen_typescript_loader_error){}}}]);