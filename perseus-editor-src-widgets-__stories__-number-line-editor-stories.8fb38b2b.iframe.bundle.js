"use strict";(self.webpackChunkperseus=self.webpackChunkperseus||[]).push([[3778],{"./node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aD:()=>action});var v4=__webpack_require__("./node_modules/@storybook/addon-actions/node_modules/uuid/dist/esm-browser/v4.js"),external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("@storybook/preview-api"),external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),preview_errors=__webpack_require__("./node_modules/@storybook/core-events/dist/errors/preview-errors.mjs"),ADDON_ID="storybook/actions",EVENT_ID=`${ADDON_ID}/action-event`,config={depth:10,clearOnStoryChange:!0,limit:50},findProto=(obj,callback)=>{let proto=Object.getPrototypeOf(obj);return!proto||callback(proto)?proto:findProto(proto,callback)},serializeArg=a=>{if("object"==typeof(e=a)&&e&&findProto(e,(proto=>/^Synthetic(?:Base)?Event$/.test(proto.constructor.name)))&&"function"==typeof e.persist){let e=Object.create(a.constructor.prototype,Object.getOwnPropertyDescriptors(a));e.persist();let viewDescriptor=Object.getOwnPropertyDescriptor(e,"view"),view=viewDescriptor?.value;return"object"==typeof view&&"Window"===view?.constructor.name&&Object.defineProperty(e,"view",{...viewDescriptor,value:Object.create(view.constructor.prototype)}),e}var e;return a},generateId=()=>"object"==typeof crypto&&"function"==typeof crypto.getRandomValues?(0,v4.Z)():Date.now().toString(36)+Math.random().toString(36).substring(2);function action(name,options={}){let actionOptions={...config,...options},handler=function(...args){if(options.implicit){let storyRenderer=("__STORYBOOK_PREVIEW__"in external_STORYBOOK_MODULE_GLOBAL_.global?external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_PREVIEW__:void 0)?.storyRenders.find((render=>"playing"===render.phase||"rendering"===render.phase));if(storyRenderer){let deprecated=!window?.FEATURES?.disallowImplicitActionsInRenderV8,error=new preview_errors.is({phase:storyRenderer.phase,name,deprecated});if(!deprecated)throw error;console.warn(error)}}let channel=external_STORYBOOK_MODULE_PREVIEW_API_.addons.getChannel(),id=generateId(),serializedArgs=args.map(serializeArg),normalizedArgs=args.length>1?serializedArgs:serializedArgs[0],actionDisplayToEmit={id,count:0,data:{name,args:normalizedArgs},options:{...actionOptions,maxDepth:5+(actionOptions.depth||3),allowFunction:actionOptions.allowFunction||!1}};channel.emit(EVENT_ID,actionDisplayToEmit)};return handler.isAction=!0,handler}},"./packages/perseus-editor/src/widgets/__stories__/number-line-editor.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var _storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_number_line_editor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/perseus-editor/src/widgets/number-line-editor.tsx");const __WEBPACK_DEFAULT_EXPORT__={title:"Perseus/Editor/Widgets/Number Line Editor"},Default=args=>react__WEBPACK_IMPORTED_MODULE_1__.createElement(_number_line_editor__WEBPACK_IMPORTED_MODULE_2__.Z,{onChange:(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_0__.aD)("onChange")});Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'(args: StoryArgs): React.ReactElement => {\n  return <NumberLineEditor onChange={action("onChange")} />;\n}',...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"];try{Default.displayName="Default",Default.__docgenInfo={description:"",displayName:"Default",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/__stories__/number-line-editor.stories.tsx#Default"]={docgenInfo:Default.__docgenInfo,name:"Default",path:"packages/perseus-editor/src/widgets/__stories__/number-line-editor.stories.tsx#Default"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/widgets/number-line-editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_kmath__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/kmath/src/index.ts"),_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/perseus/src/index.ts"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),underscore__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/underscore/modules/index-all.js");const{ButtonGroup,InfoTip,NumberInput,PropCheckBox,RangeInput}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_1__.components;class NumberLineEditor extends react__WEBPACK_IMPORTED_MODULE_2__.Component{static propTypes={range:prop_types__WEBPACK_IMPORTED_MODULE_4___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_4___default().number).isRequired,labelRange:prop_types__WEBPACK_IMPORTED_MODULE_4___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_4___default().number).isRequired,labelStyle:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string.isRequired,labelTicks:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool,divisionRange:prop_types__WEBPACK_IMPORTED_MODULE_4___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_4___default().number).isRequired,numDivisions:prop_types__WEBPACK_IMPORTED_MODULE_4___default().number.isRequired,snapDivisions:prop_types__WEBPACK_IMPORTED_MODULE_4___default().number,tickStep:prop_types__WEBPACK_IMPORTED_MODULE_4___default().number,correctRel:prop_types__WEBPACK_IMPORTED_MODULE_4___default().oneOf(["lt","gt","le","ge","eq"]),correctX:prop_types__WEBPACK_IMPORTED_MODULE_4___default().number,initialX:prop_types__WEBPACK_IMPORTED_MODULE_4___default().number,isTickCtrl:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool,onChange:prop_types__WEBPACK_IMPORTED_MODULE_4___default().func.isRequired,static:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool,showTooltips:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool};static widgetName="number-line";static defaultProps={range:[0,10],labelRange:[null,null],labelStyle:"decimal",labelTicks:!0,divisionRange:[1,12],numDivisions:5,snapDivisions:2,tickStep:null,correctRel:"eq",correctX:null,initialX:null,showTooltips:!1};onRangeChange=range=>{this.props.onChange({range})};onLabelRangeChange=(i,num)=>{let labelRange=this.props.labelRange.slice();const otherNum=labelRange[1-i];null==num||null==otherNum?labelRange[i]=num:labelRange=[Math.min(num,otherNum),Math.max(num,otherNum)],this.props.onChange({labelRange})};onDivisionRangeChange=divisionRange=>{let numDivisions=this.props.numDivisions;var x,gt,lt;x=numDivisions,gt=divisionRange[0],lt=divisionRange[1],numDivisions=Math.min(Math.max(x,gt),lt),this.props.onChange({divisionRange,numDivisions})};onNumChange=(key,value)=>{const opts={};opts[key]=value,this.props.onChange(opts)};onNumDivisionsChange=numDivisions=>{const divRange=this.props.divisionRange.slice();(numDivisions=(numDivisions=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.isFinite(numDivisions)?Math.round(numDivisions):0)<0?-1*numDivisions:numDivisions)&&(numDivisions=Math.min(divRange[1],Math.max(divRange[0],numDivisions)),this.props.onChange({tickStep:null,divisionRange:divRange,numDivisions}))};onTickStepChange=tickStep=>{this.props.onChange({numDivisions:null,tickStep})};onChangeRelation=e=>{const value=e.target.value;this.props.onChange({correctRel:value,isInequality:"eq"!==value})};onLabelStyleChange=labelStyle=>{this.props.onChange({labelStyle})};serialize=()=>_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_1__.yU.serialize.call(this);render(){const range=this.props.range,labelRange=this.props.labelRange,divisionRange=this.props.divisionRange;range[0]=+range[0],range[1]=+range[1];const width=range[1]-range[0],numDivisions=this.props.numDivisions,snapDivisions=this.props.snapDivisions,tickStep=this.props.tickStep,isTickCtrl=this.props.isTickCtrl;let step;step=isTickCtrl?null:tickStep?tickStep/snapDivisions:width/numDivisions/snapDivisions;return react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-number-line-editor"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},"Correct x"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("select",{value:this.props.correctRel,onChange:this.onChangeRelation,"aria-label":"Select relationship"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:"eq","aria-label":"Equal"},"="),react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:"lt","aria-label":"Less than"},"<"),react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:"gt","aria-label":"Greater than"},">"),react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:"le","aria-label":"Less than or equal"},"≤"),react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:"ge","aria-label":"Greater than or equal"},"≥"))," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:this.props.correctX,format:this.props.labelStyle,onChange:this.onNumChange.bind(this,"correctX"),checkValidity:val=>val>=range[0]&&val<=range[1]&&(!step||_khanacademy_kmath__WEBPACK_IMPORTED_MODULE_0__.Rx.isInteger((val-range[0])/step)),placeholder:"answer",size:"normal",useArrowKeys:!0}),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"This is the correct answer. The answer is validated (as right or wrong) by using only the end position of the point and the relation (=, <, >, ≤, ≥)."))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},this.props.static?react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Range:"):react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Position:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:this.props.initialX,format:this.props.labelStyle,onChange:this.onNumChange.bind(this,"initialX"),placeholder:range[0],checkValidity:val=>val>=range[0]&&val<=range[1],useArrowKeys:!0})," ∈ "),react__WEBPACK_IMPORTED_MODULE_2__.createElement(RangeInput,{value:range,onChange:this.onRangeChange,format:this.props.labelStyle,useArrowKeys:!0}),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"This controls the initial position of the point along the number line and the",react__WEBPACK_IMPORTED_MODULE_2__.createElement("strong",null,"range"),", the position of the endpoints of the number line. Setting the range constrains the position of the answer and the labels."),react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"In static mode, the initial position of the point is determined by Correct x instead of position."))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},"Labels:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:labelRange[0],placeholder:range[0],format:this.props.labelStyle,checkValidity:val=>val>=range[0]&&val<=range[1],onChange:this.onLabelRangeChange.bind(this,0),useArrowKeys:!0}),react__WEBPACK_IMPORTED_MODULE_2__.createElement("span",null," & "),react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:labelRange[1],placeholder:range[1],format:this.props.labelStyle,checkValidity:val=>val>=range[0]&&val<=range[1],onChange:this.onLabelRangeChange.bind(this,1),useArrowKeys:!0}),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"This controls the position of the left / right labels. By default, the labels are set by the range ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_2__.createElement("strong",null,"Note:")," Ensure that the labels line up with the tick marks, or it may be confusing for users.")))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},"Style:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(ButtonGroup,{allowEmpty:!1,value:this.props.labelStyle,buttons:[{value:"decimal",content:"0.75",title:"Decimals"},{value:"improper",content:"⁷⁄₄",title:"Improper fractions"},{value:"mixed",content:"1¾",title:"Mixed numbers"},{value:"non-reduced",content:"⁸⁄₄",title:"Non-reduced"}],onChange:this.onLabelStyleChange}),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"This controls the styling of the labels for the two main labels as well as all the tick mark labels, if applicable. Your choices are decimal, improper fractions, mixed fractions, and non-reduced fractions."))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},!this.props.static&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Show tick controller",isTickCtrl:this.props.isTickCtrl,onChange:this.props.onChange})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-right-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Show label ticks",labelTicks:this.props.labelTicks,onChange:this.props.onChange}))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},!this.props.static&&react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Show tooltips",showTooltips:this.props.showTooltips,onChange:this.props.onChange})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},isTickCtrl&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Start num divisions at"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:this.props.numDivisions||null,format:"decimal",onChange:this.onNumDivisionsChange,checkValidity:val=>val>=divisionRange[0]&&val<=divisionRange[1],placeholder:width/this.props.tickStep,useArrowKeys:!0})),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"This controls the number (and position) of the tick marks. The number of divisions is constrained to"," "+divisionRange[0]+"–"+divisionRange[1],".",react__WEBPACK_IMPORTED_MODULE_2__.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_2__.createElement("strong",null,"Note:")," The user will be able to specify the number of divisions in a number input."))),!isTickCtrl&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("span",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Num divisions:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:this.props.numDivisions||null,format:"decimal",onChange:this.onNumDivisionsChange,checkValidity:val=>val>=divisionRange[0]&&val<=divisionRange[1],placeholder:width/this.props.tickStep,useArrowKeys:!0}))," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"or tick step:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:this.props.tickStep||null,format:this.props.labelStyle,onChange:this.onTickStepChange,checkValidity:val=>val>0&&val<=width,placeholder:width/this.props.numDivisions,useArrowKeys:!0})),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"This controls the number (and position) of the tick marks; you can either set the number of divisions (2 divisions would split the entire range in two halves), or the tick step (the distance between ticks) and the other value will be updated accordingly."," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_2__.createElement("strong",null,"Note:")," There is no check to see if labels coordinate with the tick marks, which may be confusing for users if the blue labels and black ticks are off-step.")))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Snap increments per tick:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(NumberInput,{value:snapDivisions,checkValidity:val=>val>0,format:this.props.labelStyle,onChange:this.onNumChange.bind(this,"snapDivisions"),useArrowKeys:!0})),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,"This determines the number of different places the point will snap between two adjacent tick marks."," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_2__.createElement("strong",null,"Note:"),"Ensure the required number of snap increments is provided to answer the question."))))}}const __WEBPACK_DEFAULT_EXPORT__=NumberLineEditor;try{NumberLineEditor.displayName="NumberLineEditor",NumberLineEditor.__docgenInfo={description:"",displayName:"NumberLineEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/number-line-editor.tsx#NumberLineEditor"]={docgenInfo:NumberLineEditor.__docgenInfo,name:"NumberLineEditor",path:"packages/perseus-editor/src/widgets/number-line-editor.tsx#NumberLineEditor"})}catch(__react_docgen_typescript_loader_error){}}}]);