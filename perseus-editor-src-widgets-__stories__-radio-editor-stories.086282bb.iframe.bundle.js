"use strict";(self.webpackChunkperseus=self.webpackChunkperseus||[]).push([[4709],{"./packages/perseus-editor/src/widgets/__stories__/radio-editor.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var aphrodite__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/aphrodite/lib/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_radio_editor__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/perseus-editor/src/widgets/radio/editor.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const __WEBPACK_DEFAULT_EXPORT__={title:"Perseus/Editor/Widgets/Radio Editor"},styles=aphrodite__WEBPACK_IMPORTED_MODULE_0__.StyleSheet.create({wrapper:{width:338}}),question_widgets={"radio 1":{graded:!0,version:{major:1,minor:0},static:!1,type:"radio",options:{displayCount:null,onePerLine:!1,choices:[{content:"$-8$ and $8$",correct:!1,clue:"The square root operation ($\\sqrt{\\phantom{x}}$) calculates *only* the positive square root when performed on a number, so $x$ is equal to *only* $8$."},{content:"$-8$",correct:!1,clue:"While $(-8)^2=64$, the square root operation ($\\sqrt{\\phantom{x}}$) calculates *only* the positive square root when performed on a number."},{content:"$8$",correct:!0,isNoneOfTheAbove:!1,clue:"$8$ is the positive square root of $64$."},{content:"No value of $x$ satisfies the equation.",correct:!1,isNoneOfTheAbove:!1,clue:"$8$ satisfies the equation."}],countChoices:!1,hasNoneOfTheAbove:!1,multipleSelect:!1,randomize:!1,deselectEnabled:!1},alignment:"default"}};class WithState extends react__WEBPACK_IMPORTED_MODULE_1__.Component{state=question_widgets["radio 1"];apiOptions=Object.freeze({});render(){return react__WEBPACK_IMPORTED_MODULE_1__.createElement("div",{className:(0,aphrodite__WEBPACK_IMPORTED_MODULE_0__.css)(styles.wrapper)},react__WEBPACK_IMPORTED_MODULE_1__.createElement(_radio_editor__WEBPACK_IMPORTED_MODULE_2__.Z,_extends({},this.state,{apiOptions:this.apiOptions,onChange:props=>{this.setState({...this._widget.serialize(),...props})},ref:widget=>this._widget=widget})))}}const Default=args=>react__WEBPACK_IMPORTED_MODULE_1__.createElement(WithState,null);Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"(args: StoryArgs): React.ReactElement => {\n  return <WithState />;\n}",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"];try{Default.displayName="Default",Default.__docgenInfo={description:"",displayName:"Default",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/__stories__/radio-editor.stories.tsx#Default"]={docgenInfo:Default.__docgenInfo,name:"Default",path:"packages/perseus-editor/src/widgets/__stories__/radio-editor.stories.tsx#Default"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/widgets/radio/editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),_khanacademy_wonder_blocks_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@khanacademy/wonder-blocks-i18n/dist/es/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),underscore__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/underscore/modules/index-all.js"),_editor__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/perseus-editor/src/editor.tsx");const{InlineIcon,PropCheckBox}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.components,{iconPlus,iconTrash}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.icons;class ChoiceEditor extends react__WEBPACK_IMPORTED_MODULE_2__.Component{static propTypes={apiOptions:_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__._E.propTypes,choice:prop_types__WEBPACK_IMPORTED_MODULE_5___default().object,showDelete:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,onClueChange:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func,onContentChange:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func,onDelete:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func};render(){const checkedClass=this.props.choice.correct?"correct":"incorrect";let placeholder="Type a choice here...";this.props.choice.isNoneOfTheAbove&&(placeholder=this.props.choice.correct?"Type the answer to reveal to the user...":"None of the above");const editor=react__WEBPACK_IMPORTED_MODULE_2__.createElement(_editor__WEBPACK_IMPORTED_MODULE_4__.Z,{ref:"content-editor",apiOptions:this.props.apiOptions,content:this.props.choice.content||"",widgetEnabled:!1,placeholder,disabled:this.props.choice.isNoneOfTheAbove&&!this.props.choice.correct,onChange:this.props.onContentChange}),clueEditor=react__WEBPACK_IMPORTED_MODULE_2__.createElement(_editor__WEBPACK_IMPORTED_MODULE_4__.Z,{ref:"clue-editor",apiOptions:this.props.apiOptions,content:this.props.choice.clue||"",widgetEnabled:!1,placeholder:_khanacademy_wonder_blocks_i18n__WEBPACK_IMPORTED_MODULE_1__._("Why is this choice %(correctOrIncorrect)s?",{correctOrIncorrect:checkedClass}),onChange:this.props.onClueChange}),deleteLink=react__WEBPACK_IMPORTED_MODULE_2__.createElement("a",{className:"simple-button orange delete-choice",href:"#",onClick:e=>{e.stopPropagation(),e.preventDefault(),this.props.onDelete()},title:"Remove this choice"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(InlineIcon,iconTrash));return react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"choice-clue-editors"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:`choice-editor ${checkedClass}`},editor),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"clue-editor"},clueEditor),this.props.showDelete&&deleteLink)}}class RadioEditor extends react__WEBPACK_IMPORTED_MODULE_2__.Component{static propTypes={..._khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.i,apiOptions:_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__._E.propTypes,choices:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().shape({content:prop_types__WEBPACK_IMPORTED_MODULE_5___default().string,clue:prop_types__WEBPACK_IMPORTED_MODULE_5___default().string,correct:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool})),displayCount:prop_types__WEBPACK_IMPORTED_MODULE_5___default().number,randomize:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,hasNoneOfTheAbove:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,multipleSelect:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,countChoices:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,deselectEnabled:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,static:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool};static widgetName="radio";static defaultProps={choices:[{},{}],displayCount:null,randomize:!1,hasNoneOfTheAbove:!1,multipleSelect:!1,countChoices:!1,deselectEnabled:!1};render(){const numCorrect=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.reduce(this.props.choices,(function(memo,choice){return choice.correct?memo+1:memo}),0);return react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("a",{href:"https://docs.google.com/document/d/1frZf7yrWVWb1n4tVjqlzqVUiv1pn4cZXbxgP62-JDBY/edit#heading=h.8ng1isya19nu",target:"_blank"},"Multiple choice style guide"),react__WEBPACK_IMPORTED_MODULE_2__.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Multiple selections",labelAlignment:"right",multipleSelect:this.props.multipleSelect,onChange:this.onMultipleSelectChange})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-right-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Randomize order",labelAlignment:"right",randomize:this.props.randomize,onChange:this.props.onChange})),this.props.multipleSelect&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Specify number correct",labelAlignment:"right",countChoices:this.props.countChoices,onChange:this.onCountChoicesChange}))),react__WEBPACK_IMPORTED_MODULE_2__.createElement(_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Zp,{multipleSelect:this.props.multipleSelect,countChoices:this.props.countChoices,numCorrect,editMode:!0,labelWrap:!1,apiOptions:this.props.apiOptions,choices:this.props.choices.map(((choice,i)=>({content:react__WEBPACK_IMPORTED_MODULE_2__.createElement(ChoiceEditor,{ref:`choice-editor${i}`,apiOptions:this.props.apiOptions,choice,onContentChange:newProps=>{"content"in newProps&&this.onContentChange(i,newProps.content)},onClueChange:newProps=>{"content"in newProps&&this.onClueChange(i,newProps.content)},onDelete:()=>this.onDelete(i),showDelete:this.props.choices.length>=2}),isNoneOfTheAbove:choice.isNoneOfTheAbove,checked:choice.correct})),this),onChange:this.onChange}),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"add-choice-container"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("a",{className:"simple-button orange",href:"#",onClick:this.addChoice.bind(this,!1)},react__WEBPACK_IMPORTED_MODULE_2__.createElement(InlineIcon,iconPlus)," Add a choice"," "),!this.props.hasNoneOfTheAbove&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("a",{className:"simple-button",href:"#",onClick:this.addChoice.bind(this,!0)},react__WEBPACK_IMPORTED_MODULE_2__.createElement(InlineIcon,iconPlus)," None of the above"," ")))}change=(()=>{var _this=this;return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.m.apply(_this,args)}})();onMultipleSelectChange=allowMultiple=>{allowMultiple=allowMultiple.multipleSelect;const numCorrect=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.reduce(this.props.choices,(function(memo,choice){return choice.correct?memo+1:memo}),0);if(!allowMultiple&&numCorrect>1){const choices=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.map(this.props.choices,(function(choice){return underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.defaults({correct:!1},choice)}));this.props.onChange({multipleSelect:allowMultiple,choices})}else this.props.onChange({multipleSelect:allowMultiple})};onCountChoicesChange=count=>{count=count.countChoices,this.props.onChange({countChoices:count})};onChange=_ref=>{let{checked}=_ref;const choices=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.map(this.props.choices,((choice,i)=>underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.extend({},choice,{correct:checked[i],content:choice.isNoneOfTheAbove&&!checked[i]?"":choice.content})));this.props.onChange({choices})};onContentChange=(choiceIndex,newContent)=>{const choices=this.props.choices.slice();choices[choiceIndex]=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.extend({},choices[choiceIndex],{content:newContent}),this.props.onChange({choices})};onClueChange=(choiceIndex,newClue)=>{const choices=this.props.choices.slice();choices[choiceIndex]=underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.extend({},choices[choiceIndex],{clue:newClue}),""===newClue&&delete choices[choiceIndex].clue,this.props.onChange({choices})};onDelete=choiceIndex=>{const choices=this.props.choices.slice(),deleted=choices[choiceIndex];choices.splice(choiceIndex,1),this.props.onChange({choices,hasNoneOfTheAbove:this.props.hasNoneOfTheAbove&&!deleted.isNoneOfTheAbove})};addChoice=(noneOfTheAbove,e)=>{e.preventDefault();const choices=this.props.choices.slice(),newChoice={isNoneOfTheAbove:noneOfTheAbove},addIndex=choices.length-(this.props.hasNoneOfTheAbove?1:0);choices.splice(addIndex,0,newChoice),this.props.onChange({choices,hasNoneOfTheAbove:noneOfTheAbove||this.props.hasNoneOfTheAbove},(()=>{this.refs[`choice-editor${addIndex}`].refs["content-editor"].focus()}))};setDisplayCount=num=>{this.props.onChange({displayCount:num})};focus=()=>(this.refs["choice-editor0"].refs["content-editor"].focus(),!0);getSaveWarnings=()=>underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.some(underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.pluck(this.props.choices,"correct"))?[]:["No choice is marked as correct."];serialize=()=>underscore__WEBPACK_IMPORTED_MODULE_3__.ZP.pick(this.props,"choices","randomize","multipleSelect","countChoices","displayCount","hasNoneOfTheAbove","deselectEnabled")}const __WEBPACK_DEFAULT_EXPORT__=RadioEditor;try{RadioEditor.displayName="RadioEditor",RadioEditor.__docgenInfo={description:"",displayName:"RadioEditor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/radio/editor.tsx#RadioEditor"]={docgenInfo:RadioEditor.__docgenInfo,name:"RadioEditor",path:"packages/perseus-editor/src/widgets/radio/editor.tsx#RadioEditor"})}catch(__react_docgen_typescript_loader_error){}}}]);