"use strict";(self.webpackChunkperseus=self.webpackChunkperseus||[]).push([[6620],{"./packages/perseus-editor/src/widgets/__stories__/interactive-graph-editor.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,default:()=>interactive_graph_editor_stories});var react=__webpack_require__("./node_modules/react/index.js"),interactive_graph_editor=__webpack_require__("./packages/perseus-editor/src/widgets/interactive-graph-editor.tsx");const interactive_graph_editor_stories={title:"Perseus/Editor/Widgets/Interactive Graph Editor",component:interactive_graph_editor.Z,argTypes:{apiOptions:{control:{type:"object"},type:{name:"object",required:!0}},labels:{control:{type:"array"},type:{name:"ReadonlyArray<string>",required:!1}},range:{control:{type:"array"},type:{name:"[Range, Range]",required:!1}},step:{control:{type:"array"},type:{name:"[number, number]",required:!1}},gridStep:{control:{type:"array"},type:{name:"[number, number]",required:!0}},snapStep:{control:{type:"array"},type:{name:"[number, number]",required:!0}},box:{control:{type:"array"},type:{name:"[number, number]",required:!0}},valid:{control:{type:"text"},type:{name:"string",required:!1}},backgroundImage:{control:{type:"object"},type:{name:"PerseusImageBackground",required:!1}},markings:{control:{type:"select"},table:{defaultValue:{summary:"graph"},type:{summary:'"graph" | "grid" | "none"'}},type:{name:"enum",value:["graph","grid","none"],required:!1}},showProtractor:{control:{type:"boolean"},type:{name:"boolean",required:!1}},showRuler:{control:{type:"boolean"},type:{name:"boolean",required:!1}},rulerLabel:{control:{type:"text"},type:{name:"string",required:!1}},rulerTicks:{control:{type:"number"},type:{name:"number",required:!1}},correct:{control:{type:null},type:{name:"object",required:!1}},graph:{control:{type:"object"},type:{name:"object",required:!0}},onChange:{control:{type:"function"},type:{name:"(props: Partial<Props>) => void",required:!0}}}},Default=args=>react.createElement(interactive_graph_editor.Z,args);Default.args={box:[288,288],gridStep:[1,1],labels:["x","y"],range:[[-10,10],[-10,10]],snapStep:[1,1],step:[1,1]},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"(args): React.ReactElement => {\n  return <InteractiveGraphEditor {...args} />;\n}",...Default.parameters?.docs?.source}}};try{Default.displayName="Default",Default.__docgenInfo={description:"",displayName:"Default",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/__stories__/interactive-graph-editor.stories.tsx#Default"]={docgenInfo:Default.__docgenInfo,name:"Default",path:"packages/perseus-editor/src/widgets/__stories__/interactive-graph-editor.stories.tsx#Default"})}catch(__react_docgen_typescript_loader_error){}},"./packages/perseus-editor/src/components/graph-settings.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/perseus/src/index.ts"),create_react_class__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/create-react-class/index.js"),create_react_class__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(create_react_class__WEBPACK_IMPORTED_MODULE_1__),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/index.js"),react_dom__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-dom/index.js"),underscore__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/underscore/modules/index-all.js");const{ButtonGroup,InfoTip,PropCheckBox,RangeInput}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.components,{getDependencies}=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Dependencies,defaultBackgroundImage={url:null,width:0,height:0};const __WEBPACK_DEFAULT_EXPORT__=create_react_class__WEBPACK_IMPORTED_MODULE_1___default()({displayName:"GraphSettings",propTypes:{..._khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.i,editableSettings:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().oneOf(["canvas","graph","snap","image","measure"])),box:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().number),labels:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().string),range:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().number)),step:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().number),gridStep:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().number),snapStep:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().number),valid:prop_types__WEBPACK_IMPORTED_MODULE_5___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,prop_types__WEBPACK_IMPORTED_MODULE_5___default().string]),backgroundImage:prop_types__WEBPACK_IMPORTED_MODULE_5___default().object,markings:prop_types__WEBPACK_IMPORTED_MODULE_5___default().oneOf(["graph","grid","none"]),showProtractor:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,showRuler:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,showTooltips:prop_types__WEBPACK_IMPORTED_MODULE_5___default().bool,rulerLabel:prop_types__WEBPACK_IMPORTED_MODULE_5___default().string,rulerTicks:prop_types__WEBPACK_IMPORTED_MODULE_5___default().number},getDefaultProps:function(){return{editableSettings:["graph","snap","image","measure"],box:[_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Yu.defaultBoxSizeSmall,_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Yu.defaultBoxSizeSmall],labels:["x","y"],range:[[-10,10],[-10,10]],step:[1,1],gridStep:[1,1],snapStep:[1,1],valid:!0,backgroundImage:defaultBackgroundImage,markings:"graph",showProtractor:!1,showRuler:!1,showTooltips:!1,rulerLabel:"",rulerTicks:10}},getInitialState:function(){return this.stateFromProps(this.props)},componentDidMount:function(){this._isMounted=!0,this.changeGraph=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.debounce(this.changeGraph,300)},UNSAFE_componentWillReceiveProps:function(nextProps){underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isEqual(this.props.labels,nextProps.labels)&&underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isEqual(this.props.gridStep,nextProps.gridStep)&&underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isEqual(this.props.snapStep,nextProps.snapStep)&&underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isEqual(this.props.step,nextProps.step)&&underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isEqual(this.props.range,nextProps.range)&&underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isEqual(this.props.backgroundImage,nextProps.backgroundImage)||this.setState(this.stateFromProps(nextProps))},componentWillUnmount:function(){this._isMounted=!1},stateFromProps:function(props){return{labelsTextbox:props.labels,gridStepTextbox:props.gridStep,snapStepTextbox:props.snapStep,stepTextbox:props.step,rangeTextbox:props.range,backgroundImage:underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.clone(props.backgroundImage)}},change(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.ye.m.apply(this,args)},changeRulerLabel:function(e){this.change({rulerLabel:e.target.value})},changeRulerTicks:function(e){this.change({rulerTicks:+e.target.value})},changeBackgroundUrl:function(e){if("keypress"===e.type&&"Enter"!==e.key)return;const setUrl=(url,width,height)=>{const image=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.clone(this.props.backgroundImage);image.url=url,image.width=width,image.height=height,this.setState({backgroundImage:image},this.changeGraph)},url=react_dom__WEBPACK_IMPORTED_MODULE_3__.findDOMNode(this.refs["bg-url"]).value;url?_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util.getImageSize(url,((width,height)=>{this._isMounted&&setUrl(url,width,height)})):setUrl(null,0,0)},renderLabelChoices:function(choices){return underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.map(choices,(function(nameAndValue){return react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:nameAndValue[1]},nameAndValue[0])}))},validRange:function(range){return underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.every(range,(function(num){return underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isFinite(num)}))?!(range[0]>=range[1])||"Range must have a higher number on the right":"Range must be a valid number"},validateStepValue:function(settings){const{step,range,name,minTicks,maxTicks}=settings;if(!underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.isFinite(step))return name+" must be a valid number";const nSteps=function numSteps(range,step){return Math.floor((range[1]-range[0])/step)}(range,step);return nSteps<minTicks?name+" is too large, there must be at least "+minTicks+" ticks.":!(nSteps>maxTicks)||name+" is too small, there can be at most "+maxTicks+" ticks."},validSnapStep:function(step,range){return this.validateStepValue({step,range,name:"Snap step",minTicks:5,maxTicks:60})},validGridStep:function(step,range){return this.validateStepValue({step,range,name:"Grid step",minTicks:3,maxTicks:60})},validStep:function(step,range){return this.validateStepValue({step,range,name:"Step",minTicks:3,maxTicks:20})},validBackgroundImageSize:function(image){if(!image.url)return!0;return!!(image.width<=450&&image.height<=450)||"Image must be smaller than 450px x 450px."},validateGraphSettings:function(range,step,gridStep,snapStep,image){const self=this;let msg;const goodRange=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.every(range,(function(range){return msg=self.validRange(range),!0===msg}));if(!goodRange)return msg;const goodStep=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.every(step,(function(step,i){return msg=self.validStep(step,range[i]),!0===msg}));if(!goodStep)return msg;const goodGridStep=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.every(gridStep,(function(gridStep,i){return msg=self.validGridStep(gridStep,range[i]),!0===msg}));if(!goodGridStep)return msg;const goodSnapStep=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.every(snapStep,(function(snapStep,i){return msg=self.validSnapStep(snapStep,range[i]),!0===msg}));if(!goodSnapStep)return msg;const goodImageSize=this.validBackgroundImageSize(image);return!0===goodImageSize||(msg=goodImageSize,msg)},changeLabel:function(i,e){const val=e.target.value,labels=this.state.labelsTextbox.slice();labels[i]=val,this.setState({labelsTextbox:labels},this.changeGraph)},changeRange:function(i,values){const ranges=this.state.rangeTextbox.slice();ranges[i]=values;const step=this.state.stepTextbox.slice(),gridStep=this.state.gridStepTextbox.slice(),snapStep=this.state.snapStepTextbox.slice(),scale=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util.scaleFromExtent(ranges[i],this.props.box[i]);!0===this.validRange(ranges[i])&&(step[i]=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util.tickStepFromExtent(ranges[i],this.props.box[i]),gridStep[i]=_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util.gridStepFromTickStep(step[i],scale),snapStep[i]=gridStep[i]/2),this.setState({stepTextbox:step,gridStepTextbox:gridStep,snapStepTextbox:snapStep,rangeTextbox:ranges},this.changeGraph)},changeStep:function(step){this.setState({stepTextbox:step},this.changeGraph)},changeSnapStep:function(snapStep){this.setState({snapStepTextbox:snapStep},this.changeGraph)},changeGridStep:function(gridStep){this.setState({gridStepTextbox:gridStep,snapStepTextbox:underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.map(gridStep,(function(step){return step/2}))},this.changeGraph)},changeGraph:function(){const labels=this.state.labelsTextbox,range=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.map(this.state.rangeTextbox,(function(range){return underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.map(range,Number)})),step=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.map(this.state.stepTextbox,Number),gridStep=this.state.gridStepTextbox,snapStep=this.state.snapStepTextbox,image=this.state.backgroundImage,validationResult=this.validateGraphSettings(range,step,gridStep,snapStep,image);!0===validationResult?this.change({valid:!0,labels,range,step,gridStep,snapStep,backgroundImage:image}):this.change({valid:validationResult})},render:function(){const scale=[_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.TR.roundTo(2,_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util.scaleFromExtent(this.props.range[0],this.props.box[0])),_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.TR.roundTo(2,_khanacademy_perseus__WEBPACK_IMPORTED_MODULE_0__.Util.scaleFromExtent(this.props.range[1],this.props.box[1]))],{TeX}=getDependencies();return react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.contains(this.props.editableSettings,"canvas")&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"graph-settings"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},"Canvas size (x,y pixels)",react__WEBPACK_IMPORTED_MODULE_2__.createElement(RangeInput,{value:this.props.box,onChange:box=>{this.change({box})}})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},"Scale (px per div):"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement(TeX,null,"("+scale[0]+", "+scale[1]+")"))),underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.contains(this.props.editableSettings,"graph")&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"graph-settings"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"}," ","x Label",react__WEBPACK_IMPORTED_MODULE_2__.createElement("input",{type:"text",className:"graph-settings-axis-label",ref:"labels-0",onChange:e=>this.changeLabel(0,e),value:this.state.labelsTextbox[0]||""})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-right-col"},"y Label",react__WEBPACK_IMPORTED_MODULE_2__.createElement("input",{type:"text",className:"graph-settings-axis-label",ref:"labels-1",onChange:e=>this.changeLabel(1,e),value:this.state.labelsTextbox[1]||""}))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},"x Range",react__WEBPACK_IMPORTED_MODULE_2__.createElement(RangeInput,{value:this.state.rangeTextbox[0],onChange:vals=>this.changeRange(0,vals)})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-right-col"},"y Range",react__WEBPACK_IMPORTED_MODULE_2__.createElement(RangeInput,{value:this.state.rangeTextbox[1],onChange:vals=>this.changeRange(1,vals)}))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},"Tick Step",react__WEBPACK_IMPORTED_MODULE_2__.createElement(RangeInput,{value:this.state.stepTextbox,onChange:this.changeStep})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-right-col"},"Grid Step",react__WEBPACK_IMPORTED_MODULE_2__.createElement(RangeInput,{value:this.state.gridStepTextbox,onChange:this.changeGridStep}))),underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.contains(this.props.editableSettings,"snap")&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},"Snap Step",react__WEBPACK_IMPORTED_MODULE_2__.createElement(RangeInput,{value:this.state.snapStepTextbox,onChange:this.changeSnapStep}))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null,"Markings: "),react__WEBPACK_IMPORTED_MODULE_2__.createElement(ButtonGroup,{value:this.props.markings,allowEmpty:!1,buttons:[{value:"graph",content:"Graph"},{value:"grid",content:"Grid"},{value:"none",content:"None"}],onChange:this.change("markings")})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Show tooltips",showTooltips:this.props.showTooltips,onChange:this.change}))),underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.contains(this.props.editableSettings,"image")&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"image-settings"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,"Background image:"),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,"Url:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("input",{type:"text",className:"graph-settings-background-url",ref:"bg-url",value:this.state.backgroundImage.url||"",onChange:e=>{const image=underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.clone(this.props.backgroundImage);image.url=e.target.value,this.setState({backgroundImage:image})},onKeyPress:this.changeBackgroundUrl,onBlur:this.changeBackgroundUrl}),react__WEBPACK_IMPORTED_MODULE_2__.createElement(InfoTip,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("p",null,'Create an image in graphie, or use the "Add image" function to create a background.')))),underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.contains(this.props.editableSettings,"measure")&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"misc-settings"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-row"},react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-left-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Show ruler",showRuler:this.props.showRuler,onChange:this.change})),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",{className:"perseus-widget-right-col"},react__WEBPACK_IMPORTED_MODULE_2__.createElement(PropCheckBox,{label:"Show protractor",showProtractor:this.props.showProtractor,onChange:this.change}))),this.props.showRuler&&react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null," ","Ruler label:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("select",{onChange:this.changeRulerLabel,value:this.props.rulerLabel},react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:""},"None"),react__WEBPACK_IMPORTED_MODULE_2__.createElement("optgroup",{label:"Metric"},this.renderLabelChoices([["milimeters","mm"],["centimeters","cm"],["meters","m"],["kilometers","km"]])),react__WEBPACK_IMPORTED_MODULE_2__.createElement("optgroup",{label:"Imperial"},this.renderLabelChoices([["inches","in"],["feet","ft"],["yards","yd"],["miles","mi"]]))))),react__WEBPACK_IMPORTED_MODULE_2__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_2__.createElement("label",null," ","Ruler ticks:"," ",react__WEBPACK_IMPORTED_MODULE_2__.createElement("select",{onChange:this.changeRulerTicks,value:this.props.rulerTicks},underscore__WEBPACK_IMPORTED_MODULE_4__.ZP.map([1,2,4,8,10,16],(function(n){return react__WEBPACK_IMPORTED_MODULE_2__.createElement("option",{value:n},n)}))))))))}})},"./packages/perseus-editor/src/widgets/interactive-graph-editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>interactive_graph_editor});var src=__webpack_require__("./packages/perseus/src/index.ts"),es=__webpack_require__("./node_modules/@khanacademy/wonder-blocks-core/dist/es/index.js"),dist_es=__webpack_require__("./node_modules/@khanacademy/wonder-blocks-spacing/dist/es/index.js"),wonder_blocks_typography_dist_es=__webpack_require__("./node_modules/@khanacademy/wonder-blocks-typography/dist/es/index.js"),react=__webpack_require__("./node_modules/react/index.js"),index_all=__webpack_require__("./node_modules/underscore/modules/index-all.js");const parsePointCount=points=>{const parsed=parseInt(points,10);return isNaN(parsed)||0===parsed?"unlimited":parsed},graph_points_count_selector=_ref=>{let{numPoints=1,onChange}=_ref;return react.createElement("select",{value:numPoints,onChange:e=>{onChange(parsePointCount(e.target.value))}},[...Array(7).keys()].map((n=>react.createElement("option",{key:n,value:n},`${n} point${n>1?"s":""}`))),react.createElement("option",{value:"unlimited"},"unlimited"))};try{graphpointscountselector.displayName="graphpointscountselector",graphpointscountselector.__docgenInfo={description:"",displayName:"graphpointscountselector",props:{numPoints:{defaultValue:{value:"1"},description:"",name:"numPoints",required:!1,type:{name:"PointValue"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(points: PointValue) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/components/graph-points-count-selector.tsx#graphpointscountselector"]={docgenInfo:graphpointscountselector.__docgenInfo,name:"graphpointscountselector",path:"packages/perseus-editor/src/components/graph-points-count-selector.tsx#graphpointscountselector"})}catch(__react_docgen_typescript_loader_error){}var graph_settings=__webpack_require__("./packages/perseus-editor/src/components/graph-settings.tsx");const graph_type_selector=props=>react.createElement("select",{value:props.graphType,onChange:e=>{const type=e.target.value;props.onChange(type)}},react.createElement("option",{value:"linear"},"Linear function"),react.createElement("option",{value:"quadratic"},"Quadratic function"),react.createElement("option",{value:"sinusoid"},"Sinusoid function"),react.createElement("option",{value:"circle"},"Circle"),react.createElement("option",{value:"point"},"Point(s)"),react.createElement("option",{value:"linear-system"},"Linear System"),react.createElement("option",{value:"polygon"},"Polygon"),react.createElement("option",{value:"segment"},"Line Segment(s)"),react.createElement("option",{value:"ray"},"Ray"),react.createElement("option",{value:"angle"},"Angle"));try{graphtypeselector.displayName="graphtypeselector",graphtypeselector.__docgenInfo={description:"",displayName:"graphtypeselector",props:{graphType:{defaultValue:null,description:"",name:"graphType",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newGraphType: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/components/graph-type-selector.tsx#graphtypeselector"]={docgenInfo:graphtypeselector.__docgenInfo,name:"graphtypeselector",path:"packages/perseus-editor/src/components/graph-type-selector.tsx#graphtypeselector"})}catch(__react_docgen_typescript_loader_error){}const segment_count_selector=_ref=>{let{numSegments=1,onChange}=_ref;return react.createElement("select",{key:"segment-select",value:numSegments,onChange:e=>{const num=+e.target.value;onChange(num)}},index_all.ZP.range(1,7).map((n=>react.createElement("option",{key:n,value:n},`${n} segment${n>1?"s":""}`))))};try{segmentcountselector.displayName="segmentcountselector",segmentcountselector.__docgenInfo={description:"",displayName:"segmentcountselector",props:{numSegments:{defaultValue:{value:"1"},description:"",name:"numSegments",required:!1,type:{name:"number"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(numSegments: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/components/segment-count-selector.tsx#segmentcountselector"]={docgenInfo:segmentcountselector.__docgenInfo,name:"segmentcountselector",path:"packages/perseus-editor/src/components/segment-count-selector.tsx#segmentcountselector"})}catch(__react_docgen_typescript_loader_error){}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}const{InfoTip}=src.components,{containerSizeClass,getInteractiveBoxFromSizeClass}=src.SizingUtils,DeprecationMixin=src.Util.DeprecationMixin,InteractiveGraph=src.Gl.widget,defaultBackgroundImage={url:null},deprecatedProps={showGraph:function(props){return{markings:props.showGraph?"graph":"none"}}},Row=props=>{const{children,style}=props;return react.createElement(es.G7,{style:{...style,flexDirection:"row",marginTop:dist_es.Z.xSmall_8}},children)},FieldLabel=props=>react.createElement(wonder_blocks_typography_dist_es.S$,{style:{marginRight:dist_es.Z.xSmall_8}},props.children);class InteractiveGraphEditor extends react.Component{displayName="InteractiveGraphEditor";className="perseus-widget-interactive-graph";static widgetName="interactive-graph";static defaultProps={...InteractiveGraph.defaultProps,valid:!0,backgroundImage:defaultBackgroundImage,showTooltips:!1,correct:{type:InteractiveGraph.defaultProps.graph.type,coords:null}};deprecatedProps=deprecatedProps;UNSAFE_componentWillMount(){DeprecationMixin.UNSAFE_componentWillMount.call(this)}render(){let graph,equationString;const gridStep=this.props.gridStep||src.Util.getGridStep(this.props.range,this.props.step,src.Yu.defaultBoxSize),snapStep=this.props.snapStep||src.Util.snapStepFromGridStep(gridStep),sizeClass=containerSizeClass.SMALL;if(!0===this.props.valid){const graphProps={ref:"graph",box:this.props.box,range:this.props.range,labels:this.props.labels,step:this.props.step,gridStep,snapStep,graph:this.props.correct,backgroundImage:this.props.backgroundImage,markings:this.props.markings,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,trackInteraction:function(){},onChange:newProps=>{let correct=this.props.correct;correct=correct.type===newProps.graph.type?index_all.ZP.extend({},correct,newProps.graph):newProps.graph,this.props.onChange({correct})}};graph=react.createElement(InteractiveGraph,_extends({},graphProps,{containerSizeClass:sizeClass,apiOptions:{...this.props.apiOptions,isMobile:!1}})),equationString=InteractiveGraph.getEquationString(graphProps)}else graph=react.createElement("div",{className:"perseus-error"},this.props.valid);return react.createElement(es.G7,null,react.createElement(Row,null,react.createElement(FieldLabel,null,"Type of Graph:"),react.createElement(graph_type_selector,{graphType:this.props.graph?.type??InteractiveGraph.defaultProps.graph.type,onChange:type=>{this.props.onChange({graph:{type},correct:{type}})}})),"point"===this.props.correct?.type&&react.createElement(Row,null,react.createElement(FieldLabel,null,"Number of Points:"),react.createElement(graph_points_count_selector,{numPoints:this.props.correct?.numPoints,onChange:points=>{this.props.onChange({correct:{type:"point",numPoints:points}})}})),"polygon"===this.props.correct?.type&&react.createElement(react.Fragment,null,react.createElement(Row,null,react.createElement(FieldLabel,null,"Number of sides:"),react.createElement("select",{key:"polygon-select",value:this.props.correct?.numSides||3,onChange:e=>{const graph={...this.props.correct,numSides:parsePointCount(e.target.value),coords:null,snapTo:"grid"};this.props.onChange({correct:graph})}},index_all.ZP.map(index_all.ZP.range(3,13),(function(n){return react.createElement("option",{key:n,value:n},`${n} sides`)})),react.createElement("option",{value:"unlimited"},"unlimited sides"))),react.createElement(Row,null,react.createElement(FieldLabel,null,"Snap to:"),react.createElement("select",{key:"polygon-snap",value:this.props.correct?.snapTo,onChange:e=>{const graph={...this.props.correct,snapTo:e.target.value,coords:null};this.props.onChange({correct:graph})}},react.createElement("option",{value:"grid"},"grid"),"unlimited"!==this.props.correct?.numSides&&react.createElement(react.Fragment,null,react.createElement("option",{value:"angles"},"interior angles"),react.createElement("option",{value:"sides"},"side measures"))),react.createElement(InfoTip,null,react.createElement("p",null,"These options affect the movement of the vertex points. The grid option will guide the points to the nearest half step along the grid."),react.createElement("p",null,"The interior angle and side measure options guide the points to the nearest whole angle or side")," ","measure respectively.")),react.createElement(Row,null,react.createElement(wonder_blocks_typography_dist_es.S$,{tag:"label"},"Show angle measures:"," ",react.createElement("input",{type:"checkbox",checked:this.props.correct?.showAngles,onChange:()=>{this.props.onChange({correct:{...this.props.correct,showAngles:!this.props.correct.showAngles}})}})),react.createElement(InfoTip,null,react.createElement("p",null,"Displays the interior angle measures."))),react.createElement(Row,null,react.createElement(wonder_blocks_typography_dist_es.S$,{tag:"label"},"Show side measures:"," ",react.createElement("input",{type:"checkbox",checked:this.props.correct?.showSides,onChange:()=>{this.props.onChange({correct:{...this.props.correct,showSides:!this.props.correct.showSides}})}})),react.createElement(InfoTip,null,react.createElement("p",null,"Displays the side lengths.")))),"segment"===this.props.correct?.type&&react.createElement(Row,null,react.createElement(FieldLabel,null,"Number of segments: "),react.createElement(segment_count_selector,{numSegments:this.props.correct?.numSegments,onChange:sides=>{this.props.onChange({correct:{type:"segment",numSegments:sides,coords:null}})}})),react.createElement(Row,null,react.createElement(FieldLabel,null,"Correct answer:"),react.createElement(wonder_blocks_typography_dist_es.Rr,{style:{fontSize:12,backgroundColor:"#eee",paddingInline:dist_es.Z.xxSmall_6,borderColor:"#ccc",borderStyle:"solid",borderWidth:1}},equationString),react.createElement(InfoTip,null,react.createElement("p",null,"Graph the correct answer in the graph below and ensure the equation or point coordinates displayed represent the correct answer."))),react.createElement(graph_settings.Z,{box:getInteractiveBoxFromSizeClass(sizeClass),range:this.props.range,labels:this.props.labels,step:this.props.step,gridStep,snapStep,valid:this.props.valid,backgroundImage:this.props.backgroundImage,markings:this.props.markings,showProtractor:this.props.showProtractor,showRuler:this.props.showRuler,showTooltips:this.props.showTooltips,rulerLabel:this.props.rulerLabel,rulerTicks:this.props.rulerTicks,onChange:this.props.onChange}),"polygon"===this.props.correct.type&&react.createElement("div",{className:"type-settings"},react.createElement("label",null," ","Student answer must"," ",react.createElement("select",{value:this.props.correct.match,onChange:this.changeMatchType},react.createElement("option",{value:"exact"},"match exactly"),react.createElement("option",{value:"congruent"},"be congruent"),react.createElement("option",{value:"approx"},"be approximately congruent"),react.createElement("option",{value:"similar"},"be similar"))),react.createElement(InfoTip,null,react.createElement("ul",null,react.createElement("li",null,react.createElement("p",null,react.createElement("b",null,"Match Exactly:")," Match exactly in size, orientation, and location on the grid even if it is not shown in the background.")),react.createElement("li",null,react.createElement("p",null,react.createElement("b",null,"Be Congruent:")," Be congruent in size and shape, but can be located anywhere on the grid.")),react.createElement("li",null,react.createElement("p",null,react.createElement("b",null,"Be Approximately Congruent:")," Be exactly similar, and congruent in size and shape to within 0.1 units, but can be located anywhere on the grid."," ",react.createElement("em",null,"Use this with snapping to angle measure."))),react.createElement("li",null,react.createElement("p",null,react.createElement("b",null,"Be Similar:")," Be similar with matching interior angles, and side measures that are matching or a multiple of the correct side measures. The figure can be located anywhere on the grid."))))),"angle"===this.props.correct.type&&react.createElement("div",{className:"type-settings"},react.createElement("div",null,react.createElement("label",null," ","Student answer must"," ",react.createElement("select",{value:this.props.correct.match,onChange:this.changeMatchType},react.createElement("option",{value:"exact"},"match exactly"),react.createElement("option",{value:"congruent"},"be congruent"))),react.createElement(InfoTip,null,react.createElement("p",null,"Congruency requires only that the angle measures are the same. An exact match implies congruency, but also requires that the angles have the same orientation and that the vertices are in the same position.")))),graph)}changeMatchType(e){const correct=index_all.ZP.extend({},this.props.correct,{match:e.target.value});this.props.onChange({correct})}serialize(){const json=index_all.ZP.pick(this.props,"step","backgroundImage","markings","labels","showProtractor","showRuler","showTooltips","rulerLabel","rulerTicks","range","gridStep","snapStep"),graph=this.refs.graph;if(graph){const correct=graph&&graph.getUserInput();index_all.ZP.extend(json,{graph:{type:correct.type},correct}),index_all.ZP.each(["allowReflexAngles","angleOffsetDeg","numPoints","numSides","numSegments","showAngles","showSides","snapTo","snapDegrees"],(function(key){index_all.ZP.has(correct,key)&&(json.graph[key]=correct[key])}))}return json}}const interactive_graph_editor=InteractiveGraphEditor;try{InteractiveGraphEditor.displayName="InteractiveGraphEditor",InteractiveGraphEditor.__docgenInfo={description:"An editor for the InteractiveGraph widget, which allows the user to\nspecify the graph's properties and the correct answer.\n\nUsed in the exercise editor.",displayName:"InteractiveGraphEditor",props:{apiOptions:{defaultValue:null,description:"",name:"apiOptions",required:!0,type:{name:"Readonly<Readonly<{ isArticle?: boolean | undefined; onInputError?: ((widgetId: any, value: string, message?: string | null | undefined) => unknown) | undefined; onFocusChange?: ((newFocusPath: FocusPath, oldFocusPath: FocusPath, keypadHeight?: number | undefined, focusedElement?: HTMLElement | undefined) => unknown..."}},labels:{defaultValue:null,description:"The labels for the x and y axes.",name:"labels",required:!0,type:{name:"readonly string[]"}},range:{defaultValue:null,description:"The range of the graph in the x and y directions.",name:"range",required:!0,type:{name:"[x: Range, y: Range]"}},step:{defaultValue:null,description:"How far apart the tick marks on the axes are in the x and y\ndirections.",name:"step",required:!0,type:{name:"[x: number, y: number]"}},gridStep:{defaultValue:null,description:"How far apart the grid lines are in the x and y directions.",name:"gridStep",required:!0,type:{name:"[x: number, y: number]"}},snapStep:{defaultValue:null,description:"How far apart the snap-to points are in the x and y directions.",name:"snapStep",required:!0,type:{name:"[x: number, y: number]"}},box:{defaultValue:null,description:"The size of the graph in pixels.",name:"box",required:!0,type:{name:"[x: number, y: number]"}},valid:{defaultValue:{value:"true"},description:"An error message to display in the graph area, or true if the\ngraph is valid.",name:"valid",required:!1,type:{name:"string | boolean"}},backgroundImage:{defaultValue:{value:"{\n    url: null,\n} as const"},description:"The background image to display in the graph area and its properties.",name:"backgroundImage",required:!1,type:{name:"PerseusImageBackground"}},markings:{defaultValue:null,description:"The type of markings to display on the graph.\n- graph: shows the axes and the grid lines\n- grid: shows only the grid lines\n- none: shows no markings",name:"markings",required:!0,type:{name:"string"}},showProtractor:{defaultValue:null,description:"Whether to show the protractor on the graph.",name:"showProtractor",required:!0,type:{name:"boolean"}},showRuler:{defaultValue:null,description:"Whether to show the ruler on the graph.",name:"showRuler",required:!0,type:{name:"boolean"}},showTooltips:{defaultValue:{value:"false"},description:"Whether to show tooltips on the graph.",name:"showTooltips",required:!1,type:{name:"boolean"}},rulerLabel:{defaultValue:null,description:"The label to display on the ruler, if any.",name:"rulerLabel",required:!0,type:{name:"string"}},rulerTicks:{defaultValue:null,description:"The number of ticks to display on the ruler.",name:"rulerTicks",required:!0,type:{name:"number"}},correct:{defaultValue:{value:"{\n            type: InteractiveGraph.defaultProps.graph.type,\n            coords: null,\n        }"},description:"The data for checking if an answer is correct.",name:"correct",required:!1,type:{name:"any"}},graph:{defaultValue:null,description:"The graph to display in the graph area.",name:"graph",required:!0,type:{name:"PerseusGraphType | undefined"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(props: Partial<Props>) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/perseus-editor/src/widgets/interactive-graph-editor.tsx#InteractiveGraphEditor"]={docgenInfo:InteractiveGraphEditor.__docgenInfo,name:"InteractiveGraphEditor",path:"packages/perseus-editor/src/widgets/interactive-graph-editor.tsx#InteractiveGraphEditor"})}catch(__react_docgen_typescript_loader_error){}}}]);